(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"0voo":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return!("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)}},"27N1":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("fGyu"),a=n("VtSi"),u=n.n(a),s=n("9fIP"),o=n("zjfJ"),i=n("eSbf"),c=n("q30X"),l=n("EVBU"),d=n("ruhg");function f(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,u=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw a}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function e(){Object(s.a)(this,e)};Object(o.a)(p,"setRegistry",(function(e){p.registry=e})),Object(o.a)(p,"registryItemExist",(function(e,t){return"undefined"!==typeof p.registry[t][e]})),Object(o.a)(p,"getRegistryItem",(function(e,t){var n,r;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(p.registry){a.next=2;break}throw new Error("registry not found");case 2:if(p.registry[t][e]){a.next=4;break}throw new Error("registry cannot find ".concat(t," type: ").concat(e));case 4:return n=p.registry[t][e],a.next=7,u.a.awrap(n.load());case 7:return r=a.sent,a.abrupt("return",r);case 9:case"end":return a.stop()}}),null,null,null,Promise)})),Object(o.a)(p,"getRegistryNodeItem",(function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",p.getRegistryItem(e,"node"));case 1:case"end":return t.stop()}}),null,null,null,Promise)})),Object(o.a)(p,"getRegistryResourceItem",(function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",p.getRegistryItem(e,"resource"));case 1:case"end":return t.stop()}}),null,null,null,Promise)})),Object(o.a)(p,"insertResource",(function(e){var t,n;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(p.registryItemExist(e.type,"resource")){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,u.a.awrap(p.getRegistryResourceItem(e.type));case 4:return t=r.sent,r.next=7,u.a.awrap(t.default.fromJSON({type:e.type,data:e.data},e.id||Object(c.d)()));case 7:return n=r.sent,e.root&&n&&e.root.addResource(n),r.abrupt("return",n);case 10:case"end":return r.stop()}}),null,null,null,Promise)})),Object(o.a)(p,"insertNode",(function(e,t){var n,r;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(p.registryItemExist(e.type,"node")){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,u.a.awrap(p.getRegistryNodeItem(e.type));case 4:return n=a.sent,a.next=7,u.a.awrap(n.default.getInstance({id:e.id,type:e.type,mode:e.mode,data:e.data,config:e.config,states:e.states,context:e.context,parent:e.parent,index:e.index,childrenIds:e.childrenIds,resourceId:e.resourceId,resourceMap:e.resourceMap}));case 7:if((r=a.sent).states.isExtra||!r.hasParent()){a.next=14;break}return a.next=11,u.a.awrap(r.parent.upsertChild(r,e.index));case 11:if("undefined"!==typeof t&&!t){a.next=14;break}return a.next=14,u.a.awrap(r.parent.update());case 14:return a.abrupt("return",r);case 15:case"end":return a.stop()}}),null,null,null,Promise)})),Object(o.a)(p,"doAssembleResource",(function(e){var t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.data.resources[e.resourceId]){n.next=3;break}throw new Error("assembler cannot find resource: "+e.resourceId);case 3:return n.next=5,u.a.awrap(p.insertResource({id:e.resourceId,type:t.type,data:t.data}));case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),null,null,null,Promise)})),Object(o.a)(p,"assembleResources",(function(e){var t,n,r;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=function(t){var r,a,s,o;return u.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:r=f(t),i.prev=1,r.s();case 3:if((a=r.n()).done){i.next=11;break}return s=a.value,i.next=7,u.a.awrap(p.doAssembleResource({resourceId:s,data:e}));case 7:"undefined"!==typeof(o=i.sent)&&n.set(s,o);case 9:i.next=3;break;case 11:i.next=16;break;case 13:i.prev=13,i.t0=i.catch(1),r.e(i.t0);case 16:return i.prev=16,r.f(),i.finish(16);case 19:case"end":return i.stop()}}),null,null,[[1,13,16,19]],Promise)},n=new Map,r=Object.keys(e.resources),a.next=5,u.a.awrap(t(r));case 5:return a.abrupt("return",n);case 6:case"end":return a.stop()}}),null,null,null,Promise)})),Object(o.a)(p,"doAssembleNodes",(function(e){var t,n,a,s,o;return u.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=function(e){var t,r,a;return u.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:t=f(e),s.prev=1,t.s();case 3:if((r=t.n()).done){s.next=9;break}return a=r.value,s.next=7,u.a.awrap(n(a,e.indexOf(a)));case 7:s.next=3;break;case 9:s.next=14;break;case 11:s.prev=11,s.t0=s.catch(1),t.e(s.t0);case 14:return s.prev=14,t.f(),s.finish(14);case 17:case"end":return s.stop()}}),null,null,[[1,11,14,17]],Promise)},n=function(t,n){var r;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(p.doAssembleNodes({data:e.data,mode:e.mode,nodeId:t,parent:o,index:n,context:e.context}));case 2:if(!(r=a.sent)){a.next=6;break}return a.next=6,u.a.awrap(r.parent.upsertChild(r));case 6:case"end":return a.stop()}}),null,null,null,Promise)},t=e.data.nodes[e.nodeId]){i.next=5;break}throw new Error("assembler cannot find node: "+e.nodeId);case 5:return s=[],t.children?s=Object(r.a)(t.children):t.data&&t.data.children&&(s=Object(r.a)(t.data.children)),i.next=9,u.a.awrap(p.insertNode({id:e.nodeId,type:t.type,mode:e.mode,data:t.data,config:t.config,parent:e.parent,index:e.index,childrenIds:s,resourceMap:e.resources,states:{isAssembling:!0},context:e.context},!1));case 9:if(!(o=i.sent)){i.next=15;break}if(t.data&&t.data.children&&delete t.data.children,!(o.childrenIds.length>0)){i.next=15;break}return i.next=15,u.a.awrap(a(o.childrenIds));case 15:return i.abrupt("return",o);case 16:case"end":return i.stop()}}),null,null,null,Promise)})),Object(o.a)(p,"insertSubtree",(function(e){var t,n;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(Object.keys(e.data.resources).length>0)){r.next=4;break}return r.next=3,u.a.awrap(p.assembleResources(e.data));case 3:t=r.sent;case 4:return t&&t.forEach((function(t){e.parent.addResource(t)})),r.next=7,u.a.awrap(p.doAssembleNodes({data:e.data,mode:e.mode,parent:e.parent,index:e.index,nodeId:e.data.root}));case 7:if(!(n=r.sent)){r.next=11;break}return r.next=11,u.a.awrap(p.notifyAssembled(n));case 11:return r.abrupt("return",n);case 12:case"end":return r.stop()}}),null,null,null,Promise)})),Object(o.a)(p,"assembleNodes",(function(e,t,n,r){var a;return u.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,u.a.awrap(p.doAssembleNodes({data:e,mode:t,nodeId:e.root,resources:n,context:r}));case 2:return a=s.sent,s.abrupt("return",a);case 4:case"end":return s.stop()}}),null,null,null,Promise)})),Object(o.a)(p,"build",(function(e,t,n){var r,a,s;return u.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return r=new l.a,i.b.globalStates=r,"object"===typeof n&&Object.keys(n).length>0&&Object.keys(n).forEach((function(e){r.set(e,n[e])})),o.next=5,u.a.awrap(p.assembleResources(e));case 5:return a=o.sent,o.next=8,u.a.awrap(p.assembleNodes(e,t,a,n));case 8:if((s=o.sent)&&s.api.event.addUserEvents(e.actions||[]),!s){o.next=13;break}return o.next=13,u.a.awrap(p.notifyAssembled(s));case 13:return o.abrupt("return",s);case 14:case"end":return o.stop()}}),null,null,null,Promise)})),Object(o.a)(p,"notifyAssembled",(function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!==typeof e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,u.a.awrap(e.onNodeAssembled());case 4:if(e.states.isAssembling=!1,!e.hasChild()){t.next=8;break}return t.next=8,u.a.awrap(Object(d.a)(e.childrenIds,(function(t){return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.awrap(p.notifyAssembled(e.childrenNodes[t]));case 2:case"end":return n.stop()}}),null,null,null,Promise)})));case 8:case"end":return t.stop()}}),null,null,null,Promise)}))},EVBU:function(e,t,n){"use strict";var r=n("zjfJ"),a=n("9fIP"),u=n("MMYH");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var o=function(){function e(){Object(a.a)(this,e),this.data={}}return Object(u.a)(e,[{key:"set",value:function(e,t){if("undefined"===typeof this.data[e])this.data[e]={value:t,subscribers:{}};else{this.data[e].value=t;for(var n=0,r=Object.keys(this.data[e].subscribers);n<r.length;n++){var a=r[n];this.data[e].subscribers[a](this.data[e].value)}}}},{key:"get",value:function(e){return this.data[e]?this.data[e].value:void 0}},{key:"subscribe",value:function(e,t,n){return"undefined"===typeof this.data[e]&&(this.data[e]={value:void 0,subscribers:{}}),this.data[e].subscribers=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.data[e].subscribers,{},Object(r.a)({},t,n)),!0}},{key:"unsubscribe",value:function(e,t){"undefined"!==typeof this.data[e]&&delete this.data[e].subscribers[t]}}]),e}();t.a=o},EaQW:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r={node:{audio:{load:function(){return Promise.all([n.e(0),n.e(74)]).then(n.bind(null,"F67+"))}},text:{load:function(){return Promise.all([n.e(0),n.e(1),n.e(116)]).then(n.bind(null,"Gqyw"))}},button:{load:function(){return Promise.all([n.e(0),n.e(76)]).then(n.bind(null,"llbL"))}},separator:{load:function(){return Promise.all([n.e(0),n.e(105)]).then(n.bind(null,"Sxqv"))}},carousel:{load:function(){return Promise.all([n.e(0),n.e(59)]).then(n.bind(null,"hhqH"))}},storycover:{load:function(){return Promise.all([n.e(0),n.e(62)]).then(n.bind(null,"Dijc"))}},immersive:{load:function(){return Promise.all([n.e(0),n.e(1),n.e(89)]).then(n.bind(null,"Rbad"))}},"immersive-slide":{load:function(){return Promise.all([n.e(0),n.e(1),n.e(7),n.e(93)]).then(n.bind(null,"uDpm"))}},"immersive-narrative-panel":{load:function(){return Promise.all([n.e(0),n.e(53)]).then(n.bind(null,"juCh"))}},tour:{load:function(){return Promise.all([n.e(0),n.e(1),n.e(119)]).then(n.bind(null,"1b7a"))}},"tour-place":{load:function(){return Promise.all([n.e(0),n.e(63)]).then(n.bind(null,"0FUi"))}},"tour-map":{load:function(){return Promise.all([n.e(0),n.e(120)]).then(n.bind(null,"oDK8"))}},story:{load:function(){return Promise.all([n.e(0),n.e(57)]).then(n.bind(null,"x5U6"))}},embed:{load:function(){return Promise.all([n.e(0),n.e(49)]).then(n.bind(null,"jD4n"))}},image:{load:function(){return Promise.all([n.e(0),n.e(88)]).then(n.bind(null,"do+P"))}},video:{load:function(){return Promise.all([n.e(0),n.e(124)]).then(n.bind(null,"ySv9"))}},expressmap:{load:function(){return Promise.all([n.e(0),n.e(60)]).then(n.bind(null,"yA8Z"))}},webmap:{load:function(){return Promise.all([n.e(0),n.e(1),n.e(126)]).then(n.bind(null,"2jAD"))}},credits:{load:function(){return Promise.all([n.e(0),n.e(52)]).then(n.bind(null,"hjcv"))}},attribution:{load:function(){return Promise.all([n.e(0),n.e(80)]).then(n.bind(null,"4tr2"))}},"action-button":{load:function(){return Promise.all([n.e(0),n.e(71)]).then(n.bind(null,"iLPI"))}},navigation:{load:function(){return Promise.all([n.e(0),n.e(103)]).then(n.bind(null,"bFY2"))}},swipe:{load:function(){return Promise.all([n.e(0),n.e(115)]).then(n.bind(null,"UyJI"))}}},resource:{audio:{load:function(){return n.e(131).then(n.bind(null,"rJbp"))}},image:{load:function(){return n.e(133).then(n.bind(null,"6kAc"))}},video:{load:function(){return n.e(135).then(n.bind(null,"zyGc"))}},expressmap:{load:function(){return n.e(132).then(n.bind(null,"fzbh"))}},webmap:{load:function(){return n.e(136).then(n.bind(null,"r3W2"))}},"story-theme":{load:function(){return n.e(134).then(n.bind(null,"M7lX"))}}}},a={node:{globe:{load:function(){return Promise.all([n.e(0),n.e(99)]).then(n.bind(null,"fZYm"))}},"express-mapping":{load:function(){return Promise.all([n.e(0),n.e(97)]).then(n.bind(null,"Cgwt"))}},template:{load:function(){return Promise.all([n.e(0),n.e(101)]).then(n.bind(null,"pkAV"))}}},resource:{}}},WTRt:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return b}));var r=n("zjfJ"),a=n("VtSi"),u=n.n(a),s=n("27N1"),o=n("EaQW");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}s.a.setRegistry(o.b);var l=function(e){var t,n=arguments;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=!(n.length>1&&void 0!==n[1])||n[1],r.next=3,u.a.awrap(s.a.insertNode(e,t));case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),null,null,null,Promise)},d=function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(s.a.insertSubtree(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),null,null,null,Promise)},f=s.a.insertResource,b=function(e,t,n){var r,a;return u.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return r=c({},n||{},{storyData:e}),o.next=3,u.a.awrap(s.a.build(e,t,r));case 3:return a=o.sent,o.abrupt("return",a);case 5:case"end":return o.stop()}}),null,null,null,Promise)}},eSbf:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return f}));var r=n("VtSi"),a=n.n(r),u=n("9fIP"),s=n("MMYH"),o=n("zjfJ"),i=n("q30X"),c=n("EVBU"),l=n("27N1"),d=function(e){return{id:e.id||Object(i.d)(),type:e.type,data:e.data}},f=function(){function e(t){if(Object(u.a)(this,e),Object(o.a)(this,"eventHandlers",{}),!e.isDataValid(t.data))throw new Error;this.id=t.id,this.type=t.type,this.data=t.data}return Object(s.a)(e,[{key:"setGlobalState",value:function(t,n){e.globalStates||(e.globalStates=new c.a),e.globalStates.set(t,n)}},{key:"getGlobalState",value:function(t){if(e.globalStates)return e.globalStates.get(t)}},{key:"subscribeGlobalState",value:function(t,n,r){return e.globalStates||(e.globalStates=new c.a),e.globalStates.subscribe(t,n,r)}},{key:"unsubscribeGlobalState",value:function(t,n){e.globalStates&&e.globalStates.unsubscribe(t,n)}},{key:"getData",value:function(){return Object(i.a)(this.data)}},{key:"do",value:function(e,t){var n=this.eventHandlers[e];return"undefined"!==typeof n&&n(t)}},{key:"addEventListener",value:function(e,t){this.eventHandlers||(this.eventHandlers={}),this.eventHandlers[e]=t}},{key:"removeEventListener",value:function(e){delete this.eventHandlers[e]}},{key:"clone",value:function(){var e,t;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.awrap(l.a.getRegistryResourceItem(this.type));case 2:return e=n.sent,t=e.default.fromJSON({type:this.type,data:this.data},Object(i.d)()),n.abrupt("return",t);case 5:case"end":return n.stop()}}),null,this,null,Promise)}}]),e}();Object(o.a)(f,"type","resource"),Object(o.a)(f,"setGlobalState",(function(e){f.globalStates=e})),Object(o.a)(f,"isDataValid",(function(e){return!0})),Object(o.a)(f,"isJSONValid",(function(e){return!0})),Object(o.a)(f,"getInstance",(function(e){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),null,null,null,Promise)})),Object(o.a)(f,"fromJSON",(function(e,t){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),null,null,null,Promise)})),t.b=f},h0mi:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.Builder=0]="Builder",e[e.Viewer=1]="Viewer"}(r||(r={}))},ruhg:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("VtSi"),a=n.n(r),u=function(e,t){var n;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:n=0;case 1:if(!(n<e.length)){r.next=7;break}return r.next=4,a.a.awrap(t(e[n],n,e));case 4:n++,r.next=1;break;case 7:case"end":return r.stop()}}),null,null,null,Promise)}}}]);