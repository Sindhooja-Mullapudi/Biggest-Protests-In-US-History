(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"11In":function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return s})),r.d(e,"b",(function(){return c}));var n=r("hegE"),i=r("hwME");function o(t){var e=t.authentication.username,r=t.owner||e;return Object(n.a)(t)+"/content/users/"+encodeURIComponent(r)+"/items/"+t.id+"/share"}function a(t){var e=t.authentication.username;return(t.owner||e)===e}function s(t){return t.authentication.getUser(t).then((function(t){return!(!t||"org_admin"!==t.role)}))}function c(t){return Object(i.a)(t.groupId,t).then((function(t){return t.userMembership.memberType})).catch((function(){return"none"}))}},"2SGB":function(t,e,r){"use strict";var n=r("fGyu"),i=r("9fIP"),o=r("MMYH"),a=r("K/z8"),s=r("sRHE"),c=r("8K1b"),u=r("ERkP"),l=r("YQpL"),f=r("5G9k"),d=r("R56p"),p=r("nChe");function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var m=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},g=r.n(p).a||p;function b(t,e){return Object(f.a)(Object.assign(Object.assign({},d.a),{locale:"en"}),Object(d.b)(),t,e)}var v=function(t){Object(c.a)(f,t);var e,r=(e=f,function(){var t,r=Object(s.a)(e);if(h()){var n=Object(s.a)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return Object(a.a)(this,t)});function f(){return Object(i.a)(this,f),r.apply(this,arguments)}return Object(o.a)(f,[{key:"shouldComponentUpdate",value:function(t){var e=this.props,r=e.values,n=m(e,["values"]),i=t.values,o=m(t,["values"]);return!g(i,r)||!g(n,o)}},{key:"render",value:function(){var t=this;return u.createElement(l.a.Consumer,null,(function(e){t.props.defaultMessage||Object(d.f)(e);var r=e||{},i=r.formatMessage,o=void 0===i?b:i,a=r.textComponent,s=void 0===a?u.Fragment:a,c=t.props,l=c.id,f=c.description,p=c.defaultMessage,h=c.values,m=c.children,g=c.tagName,v=void 0===g?s:g,y=o({id:l,description:f,defaultMessage:p},h);return Array.isArray(y)||(y=[y]),"function"===typeof m?m.apply(void 0,Object(n.a)(y)):v?u.createElement.apply(u,[v,null].concat(Object(n.a)(y))):y}))}}]),f}(u.Component);v.displayName="FormattedMessage",v.defaultProps={values:{}},e.a=v},"33W0":function(t,e,r){"use strict";function n(t){var e=JSON.parse(JSON.stringify(t));return e.data&&("undefined"!==typeof Blob&&t.data instanceof Blob||"ReadStream"===t.data.constructor.name?e.file=t.data:e.text=t.data,delete e.data),e}function i(t){return t.owner?Promise.resolve(t.owner):t.item&&t.item.owner?Promise.resolve(t.item.owner):t.authentication&&t.authentication.getUsername?t.authentication.getUsername():Promise.reject(new Error("Could not determine the owner of this item. Pass the `owner`, `item.owner`, or `authentication` option."))}r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i}))},"3BTF":function(t,e){function r(){var t={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return t}var n=/javascript\s*\:/gim;e.whiteList=r(),e.getDefaultWhiteList=r,e.onAttr=function(t,e,r){},e.onIgnoreAttr=function(t,e,r){},e.safeAttrValue=function(t,e){return n.test(e)?"":e}},"5ts5":function(t,e,r){"use strict";r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return c}));var n=r("D57K"),i=r("ZcpU"),o=r("hegE"),a=r("33W0");function s(t){return Object(a.a)(t).then((function(e){var r=Object(o.a)(t)+"/content/users/"+e+"/items/"+t.item.id+"/update";return t.params=n.a({},t.params,Object(a.b)(t.item)),Object(i.c)(r,t)}))}function c(t){return Object(a.a)(t).then((function(e){var r=Object(o.a)(t)+"/content/users/"+e+"/items/"+t.id+"/updateResources";return t.params=n.a({file:t.resource,fileName:t.name,text:t.content},t.params),"undefined"!==typeof t.private&&(t.params.access=t.private?"private":"inherit"),Object(i.c)(r,t)}))}},"79uv":function(t,e,r){"use strict";r.d(e,"j",(function(){return p})),r.d(e,"e",(function(){return h})),r.d(e,"h",(function(){return m})),r.d(e,"c",(function(){return g})),r.d(e,"b",(function(){return b})),r.d(e,"a",(function(){return v})),r.d(e,"d",(function(){return y})),r.d(e,"f",(function(){return w})),r.d(e,"g",(function(){return O})),r.d(e,"i",(function(){return j}));var n=r("fGyu"),i=r("VtSi"),o=r.n(i),a=r("vpyF"),s=r("hwME"),c=r("fQV3"),u=r("Z34l"),l=r("ZcpU"),f=r("ADxc"),d=r("N8kh"),p=function(t){var e,r,n,i,s,c,u;return o.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e=t.userSession,r=t.isFavorite,n=t.itemId,i=t.owner,l.next=3,o.a.awrap(e.getUser());case 3:if(s=l.sent,!r){l.next=11;break}return l.next=7,o.a.awrap(Object(a.a)({id:n,groupId:s.favGroupId,authentication:e,owner:i}));case 7:return c=l.sent,l.abrupt("return",c);case 11:return l.next=13,o.a.awrap(Object(a.b)({id:n,groupId:s.favGroupId,authentication:e,owner:i}));case 13:return u=l.sent,l.abrupt("return",u);case 15:case"end":return l.stop()}}),null,null,null,Promise)},h=function(t,e){return"published"===e?"pub_".concat(t):"draft_".concat(t)},m=function t(e,r,n){var i,a,c,u;return o.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(r){l.next=2;break}return l.abrupt("return",!1);case 2:return l.next=4,o.a.awrap(r.getUser());case 4:if((i=l.sent).favGroupId){l.next=7;break}return l.abrupt("return",!1);case 7:return l.next=9,o.a.awrap(Object(s.b)(i.favGroupId,{authentication:r,paging:{num:100,start:"number"===typeof n?n:1}}));case 9:if(a=l.sent,c=a.items,u=a.nextStart,-1===c.findIndex((function(t){return t.id===e}))){l.next=17;break}return l.abrupt("return",!0);case 17:if(-1===u){l.next=21;break}return l.abrupt("return",t(e,r,u));case 21:return l.abrupt("return",!1);case 22:case"end":return l.stop()}}),null,null,null,Promise)},g=function(t,e){return e.toLowerCase().match(/\.gif$/)?0:t<=100?100:t>100&&t<=200?200:t>200&&t<=400?400:t>400&&t<=800?800:t>800&&t<=1600?1600:t>1600&&t<=2e3?2e3:t>2e3&&t<=2400?2400:Math.round(t)},b=function(t){var e,r,i,a,s,u;return o.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,o.a.awrap(Object(c.d)(t.itemId,{authentication:t.userSession,portal:t.portal,params:{owner:t.username}}));case 2:if(e=l.sent,r=e.total,i=e.num,a=e.resources,!(r>i)){l.next=12;break}return l.next=9,o.a.awrap(Promise.all(new Array(Math.ceil(r/i)).fill(void 0).reduce((function(e,r,o){return[].concat(Object(n.a)(e),[Object(c.d)(t.itemId,{authentication:t.userSession,portal:t.portal,params:{owner:t.username,start:o*i+1}})])}),[])));case 9:return s=l.sent,u=s.reduce((function(t,e){return[].concat(Object(n.a)(t),Object(n.a)(e.resources))}),[]),l.abrupt("return",u);case 12:return l.abrupt("return",a);case 13:case"end":return l.stop()}}),null,null,null,Promise)},v=function(t){var e="".concat(Object(u.e)(t.portalHost,t.userSession),"/content/items/").concat(t.itemId,"/resources/").concat(t.resourceId);return Object(l.c)(e,{authentication:t.userSession})},y=function(t){var e,r,i,a,s,u,l,f,d,p;return o.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,o.a.awrap(Object(c.c)(t.itemDetails.id,{authentication:t.userSession}));case 2:if(a=h.sent,s=(null===(e=a.admin)||void 0===e?void 0:e.map((function(t){return t.id})))||[],u=(null===(r=a.member)||void 0===r?void 0:r.map((function(t){return t.id})))||[],l=(null===(i=a.other)||void 0===i?void 0:i.map((function(t){return t.id})))||[],f=[].concat(Object(n.a)(s),Object(n.a)(u),Object(n.a)(l)),!t.excludeFavoritesGroup){h.next=13;break}return h.next=10,o.a.awrap(t.userSession.getUser());case 10:return d=h.sent,p=d.favGroupId,h.abrupt("return",f.filter((function(t){return t!==p})));case 13:return h.abrupt("return",f);case 14:case"end":return h.stop()}}),null,null,null,Promise)},w=function(t){return t.typeKeywords&&t.typeKeywords.includes("Copy Item")},O=function(t){return t.type===f.PortalItemTypes.Image||t.type===f.PortalItemTypes.PDF},j=function(t,e,r){return O(t)&&t.access!==d.a.PUBLIC&&(null===r||void 0===r?void 0:r.token)?"".concat(e,"?token=").concat(r.token):e}},"9bA5":function(t,e,r){var n=r("w9Sv").FilterCSS,i=r("Fo8R"),o=r("yuEw"),a=o.parseTag,s=o.parseAttr,c=r("oGsw");function u(t){return void 0===t||null===t}function l(t){(t=function(t){var e={};for(var r in t)e[r]=t[r];return e}(t||{})).stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=i.onIgnoreTagStripAll),t.whiteList=t.whiteList||i.whiteList,t.onTag=t.onTag||i.onTag,t.onTagAttr=t.onTagAttr||i.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||i.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||i.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||i.safeAttrValue,t.escapeHtml=t.escapeHtml||i.escapeHtml,this.options=t,!1===t.css?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new n(t.css))}l.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var e=this.options,r=e.whiteList,n=e.onTag,o=e.onIgnoreTag,l=e.onTagAttr,f=e.onIgnoreTagAttr,d=e.safeAttrValue,p=e.escapeHtml,h=this.cssFilter;e.stripBlankChar&&(t=i.stripBlankChar(t)),e.allowCommentTag||(t=i.stripCommentTag(t));var m=!1;if(e.stripIgnoreTagBody){m=i.StripTagBody(e.stripIgnoreTagBody,o);o=m.onIgnoreTag}var g=a(t,(function(t,e,i,a,m){var g,b={sourcePosition:t,position:e,isClosing:m,isWhite:r.hasOwnProperty(i)};if(!u(g=n(i,a,b)))return g;if(b.isWhite){if(b.isClosing)return"</"+i+">";var v=function(t){var e=c.spaceIndex(t);if(-1===e)return{html:"",closing:"/"===t[t.length-2]};var r="/"===(t=c.trim(t.slice(e+1,-1)))[t.length-1];return r&&(t=c.trim(t.slice(0,-1))),{html:t,closing:r}}(a),y=r[i],w=s(v.html,(function(t,e){var r,n=-1!==c.indexOf(y,t);return u(r=l(i,t,e,n))?n?(e=d(i,t,e,h))?t+'="'+e+'"':t:u(r=f(i,t,e,n))?void 0:r:r}));a="<"+i;return w&&(a+=" "+w),v.closing&&(a+=" /"),a+=">"}return u(g=o(i,a,b))?p(a):g}),p);return m&&(g=m.remove(g)),g},t.exports=l},Abkm:function(t,e,r){"use strict";r.d(e,"f",(function(){return i})),r.d(e,"b",(function(){return o})),r.d(e,"g",(function(){return a})),r.d(e,"e",(function(){return s})),r.d(e,"a",(function(){return c})),r.d(e,"c",(function(){return u})),r.d(e,"d",(function(){return l}));var n=r("sHW7"),i=function(t){var e=[];return Object.keys(t).forEach((function(r){t.hasOwnProperty(r)&&e.push("".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(t[r])))})),e.join("&")},o=function(t){var e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},a=function(t){return t.replace(/(<([^>]+)>)/g,"")},s=function(t){return new n.Sanitizer({whiteList:{},stripIgnoreTag:!0,allowCommentTag:!1},!1).sanitize(t)},c=function(t){return t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():""},u=function(t){return t*parseFloat(getComputedStyle(document.documentElement).fontSize)},l=function(t){try{var e=s(t),r=document.createElement("div");return r.innerHTML=e,r.innerText||""}catch(n){return""}}},BVlg:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return E}));var n,i=r("VtSi"),o=r.n(i),a=r("9fIP"),s=r("MMYH"),c=r("pWxA"),u=r("K/z8"),l=r("sRHE"),f=r("8K1b"),d=r("zjfJ"),p=r("ZcpU"),h=r("fQV3"),m=r("r2q8"),g=r("Z34l"),b=r("Abkm"),v=r("kO5H"),y=r("N8kh"),w=r("79uv"),O=r("sczD"),j=r("wTCQ"),x=r("JmSK"),I=r("72yd");function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function k(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach((function(e){Object(d.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}!function(t){t.Story="story",t.Collection="collection"}(n||(n={}));var E=function(t){Object(f.a)(n,t);var e,r=(e=n,function(){var t,r=Object(l.a)(e);if(T()){var n=Object(l.a)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return Object(u.a)(this,t)});function n(t){var e;return Object(a.a)(this,n),e=r.call(this),Object(d.a)(Object(c.a)(e),"_isOrgItem",!1),Object(d.a)(Object(c.a)(e),"_viewerMode","view"),Object(d.a)(Object(c.a)(e),"preloadedItemResourceImages",{}),Object(d.a)(Object(c.a)(e),"fetchItemResource",(function(t){var r,n;return o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return r=e.getItemResourceUrl(k({},t,{skipToken:!0})),i.next=3,o.a.awrap(Object(p.c)(r,{authentication:e.userSession}));case 3:return n=i.sent,i.abrupt("return",n);case 5:case"end":return i.stop()}}),null,null,null,Promise)})),Object(d.a)(Object(c.a)(e),"getItemResourceUrl",(function(t,r){var n=t.userSession||e.userSession,i=t.queryParameters?Object.assign({},t.queryParameters):{};!t.skipToken&&n&&n.token&&(i.token=n.token);var o="".concat(Object(g.e)(e.config.PORTAL_HOST,r?null:e.userSession),"/content/items/").concat(e.itemId,"/resources/").concat(t.resourceName).concat(i?"?"+Object(b.f)(i):"");if(r){o=o.replace(/^https:\/\/www/,"https://cdn")}return o})),Object(d.a)(Object(c.a)(e),"preloadItemResourceImage",(function(t,r){var n=e.getKeyForPreloadedItemResourceImage(t,r);return new Promise((function(i){if("undefined"!==typeof e.preloadedItemResourceImages[n])i({image:e.preloadedItemResourceImages[n],key:n,fileName:t,width:r});else{var o=new Image;o.src=e.getItemResourceImageFullUrl(t,r),o.onload=function(){e.preloadedItemResourceImages[n]=o,i({image:o,key:n,fileName:t,width:r})},o.onerror=function(e){i({error:e.error,fileName:t,width:r})}}}))})),Object(d.a)(Object(c.a)(e),"getKeyForPreloadedItemResourceImage",(function(t,e){return"".concat(t,"_w").concat(e)})),e.type=t.type,e.config=t.config,e.version=t.version,t.userSession&&(e.userSession=t.userSession),e.storyMapUserPrivileges=t.storyMapUserPrivileges,t.viewerMode&&(e.viewerMode=t.viewerMode),e}return Object(s.a)(n,[{key:"getItemPublishDate",value:function(){try{var t=Object(v.a)({itemDetails:this.itemDetails,typekeywordId:x.e.publishedDate})||Object(v.a)({itemDetails:this.itemDetails,typekeywordId:"publish-date"});if(t)return new Date(parseInt(t,10));throw new Error("No published date")}catch(e){return"builder"!==this.viewerMode&&new Date(this.itemDetails?this.itemDetails.created:Date.now())}}},{key:"getItemPublishStatus",value:function(){if(!this.itemDetails||!this.itemDetails.typeKeywords||!this.itemDetails.typeKeywords.length)return x.c.draft;var t=Object(j.d)(this.itemDetails.typeKeywords);return t||(Object(v.b)(this.itemDetails)&&this.itemDetails.access!==y.a.PRIVATE?x.c.published:x.c.draft)}},{key:"getItemResourceImageFullUrl",value:function(t,e){return t?t.startsWith("https://")?t:this.getItemResourceUrl({resourceName:t,userSession:void 0,queryParameters:e&&Object(w.c)(e,t)?{w:Object(w.c)(e,t)}:void 0}):""}},{key:"unloadPreloadedItemResourceImage",value:function(t,e){delete this.preloadedItemResourceImages[this.getKeyForPreloadedItemResourceImage(t,e)]}},{key:"setItemDetails",value:function(t){this._itemId=t.id,this._itemOwner=t.owner,this._itemDetails=t,(this._itemDetails.orgId||this._itemDetails.isOrgItem||0===this._itemDetails.typeKeywords.filter((function(t){return t===I.f})).length)&&(this._isOrgItem=!0)}},{key:"setItemData",value:function(t){var e=O.a.sanitize(t,{allowUndefined:!0});this._itemData=e}},{key:"itemId",get:function(){return this._itemId},set:function(t){this._itemId||(this._itemId=t)}},{key:"itemOwner",get:function(){return this._itemOwner}},{key:"itemDetails",get:function(){return this._itemDetails},set:function(t){if(this._itemDetails)throw new Error("Item details have already been set on the StoryItem and cannot be modified from outside of the StoryItem");this.setItemDetails(t)}},{key:"itemData",get:function(){return this._itemData},set:function(t){if(this._itemData)throw new Error("Item data have already been set on the StoryItem and cannot be modified from outside of the StoryItem");this.setItemData(t)}},{key:"itemSharingLevel",get:function(){var t,e;return this._itemSharingLevel?this._itemSharingLevel.access===y.a.PRIVATE&&(null===(t=this._itemSharingLevel.groups)||void 0===t?void 0:t.length)&&(null===(e=this._itemSharingLevel.groups)||void 0===e?void 0:e.length)>0?{access:y.a.SHARED,groups:this._itemSharingLevel.groups}:this._itemSharingLevel:this.itemDetails&&this.itemDetails.access?{access:this.itemDetails.access,groups:[]}:{access:y.a.PRIVATE,groups:[]}},set:function(t){this._itemSharingLevel=t}},{key:"version",set:function(t){this._itemVersion=t},get:function(){return this._itemVersion}},{key:"isOrgItem",get:function(){return this._isOrgItem}},{key:"viewerMode",set:function(t){this._viewerMode=t},get:function(){return this._viewerMode}},{key:"userSession",get:function(){return this._userSession},set:function(t){!this.itemOwner&&t&&t.username&&(this._itemOwner=t.username),this._userSession=t}},{key:"storyMapUserPrivileges",get:function(){return this._storyMapUserPrivileges},set:function(t){this._storyMapUserPrivileges=t}}]),n}(m.EventEmitter);Object(d.a)(E,"validateItemData",(function(t,e){return!(t!==n.Story||!e||"string"!==typeof e.root)||!(t!==n.Collection||!e||"object"!==typeof e.items)})),Object(d.a)(E,"fetchItemDetails",(function(t){var e,r;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.userSession?t.userSession:void 0,n.next=3,o.a.awrap(Object(h.a)(t.itemId,{authentication:e,portal:e?void 0:Object(g.e)(t.portalHost)}));case 3:return r=n.sent,n.abrupt("return",r);case 5:case"end":return n.stop()}}),null,null,null,Promise)})),Object(d.a)(E,"fetchItemData",(function(t){var e,r,n;return o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e=t.userSession?t.userSession:void 0,i.next=3,o.a.awrap(Object(h.b)(t.itemId,{authentication:e,portal:e?void 0:Object(g.e)(t.portalHost)}));case 3:if(r=i.sent,!E.validateItemData(t.type,r)){i.next=6;break}return i.abrupt("return",r);case 6:throw(n=new Error("invalid json response body at ".concat(Object(g.e)(t.portalHost,t.userSession),"/content/items/").concat(t.itemId,"/data. reason: Unexpected end of JSON input"))).name="FetchError",n.type="invalid-json",n;case 10:case"end":return i.stop()}}),null,null,null,Promise)})),e.c=E},Bx5b:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i}));var n="storymapcollection",i="smdraftresourceid"},EPBW:function(t,e){var r="[object Object]";var n,i,o=Function.prototype,a=Object.prototype,s=o.toString,c=a.hasOwnProperty,u=s.call(Object),l=a.toString,f=(n=Object.getPrototypeOf,i=Object,function(t){return n(i(t))});t.exports=function(t){if(!function(t){return!!t&&"object"==typeof t}(t)||l.call(t)!=r||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(r){}return e}(t))return!1;var e=f(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==u}},Fo8R:function(t,e,r){var n=r("w9Sv").FilterCSS,i=r("w9Sv").getDefaultWhiteList,o=r("oGsw");function a(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}var s=new n;function c(t){return t.replace(u,"&lt;").replace(l,"&gt;")}var u=/</g,l=/>/g,f=/"/g,d=/&quot;/g,p=/&#([a-zA-Z0-9]*);?/gim,h=/&colon;?/gim,m=/&newline;?/gim,g=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,b=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,v=/u\s*r\s*l\s*\(.*/gi;function y(t){return t.replace(f,"&quot;")}function w(t){return t.replace(d,'"')}function O(t){return t.replace(p,(function(t,e){return"x"===e[0]||"X"===e[0]?String.fromCharCode(parseInt(e.substr(1),16)):String.fromCharCode(parseInt(e,10))}))}function j(t){return t.replace(h,":").replace(m," ")}function x(t){for(var e="",r=0,n=t.length;r<n;r++)e+=t.charCodeAt(r)<32?" ":t.charAt(r);return o.trim(e)}function I(t){return t=x(t=j(t=O(t=w(t))))}function S(t){return t=c(t=y(t))}var k=/<!--[\s\S]*?-->/g;e.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]},e.getDefaultWhiteList=a,e.onTag=function(t,e,r){},e.onIgnoreTag=function(t,e,r){},e.onTagAttr=function(t,e,r){},e.onIgnoreTagAttr=function(t,e,r){},e.safeAttrValue=function(t,e,r,n){if(r=I(r),"href"===e||"src"===e){if("#"===(r=o.trim(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===e){if(g.lastIndex=0,g.test(r))return""}else if("style"===e){if(b.lastIndex=0,b.test(r))return"";if(v.lastIndex=0,v.test(r)&&(g.lastIndex=0,g.test(r)))return"";!1!==n&&(r=(n=n||s).process(r))}return r=S(r)},e.escapeHtml=c,e.escapeQuote=y,e.unescapeQuote=w,e.escapeHtmlEntities=O,e.escapeDangerHtml5Entities=j,e.clearNonPrintableCharacter=x,e.friendlyAttrValue=I,e.escapeAttrValue=S,e.onIgnoreTagStripAll=function(){return""},e.StripTagBody=function(t,e){"function"!==typeof e&&(e=function(){});var r=!Array.isArray(t),n=[],i=!1;return{onIgnoreTag:function(a,s,c){if(function(e){return!!r||-1!==o.indexOf(t,e)}(a)){if(c.isClosing){var u="[/removed]",l=c.position+u.length;return n.push([!1!==i?i:c.position,l]),i=!1,u}return i||(i=c.position),"[removed]"}return e(a,s,c)},remove:function(t){var e="",r=0;return o.forEach(n,(function(n){e+=t.slice(r,n[0]),r=n[1]})),e+=t.slice(r)}}},e.stripCommentTag=function(t){return t.replace(k,"")},e.stripBlankChar=function(t){var e=t.split("");return(e=e.filter((function(t){var e=t.charCodeAt(0);return 127!==e&&(!(e<=31)||(10===e||13===e))}))).join("")},e.cssFilter=s,e.getDefaultCSSWhiteList=i},Gh8D:function(t,e,r){"use strict";r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return c}));var n=r("D57K"),i=r("ZcpU"),o=(r("Tc8g"),r("hegE")),a=r("33W0");function s(t){return Object(a.a)(t).then((function(e){var r=Object(o.a)(t)+"/content/users/"+e+"/items/"+t.id+"/delete";return Object(i.c)(r,t)}))}function c(t){return Object(a.a)(t).then((function(e){var r=Object(o.a)(t)+"/content/users/"+e+"/items/"+t.id+"/removeResources";return t.params=n.a({},t.params,{resource:t.resource}),Object(i.c)(r,t)}))}},JGeh:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r("Tc8g"),i=r("ZcpU"),o=r("Qyps"),a=function(){function t(t){void 0===t&&(t=""),this.termStack=[],this.rangeStack=[],this.openGroups=0,this.q=t}return t.prototype.match=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.termStack=this.termStack.concat(t),this},t.prototype.in=function(t){var e="`in("+(t?'"'+t+'"':"")+")`";return this.hasRange||this.hasTerms?(t&&"*"!==t&&(this.q+=t+":"),this.commit()):(Object(o.a)(e+" was called with no call to `match(...)` or `from(...)`/`to(...)`. Your query was not modified."),this)},t.prototype.startGroup=function(){return this.commit(),this.openGroups>0&&(this.q+=" "),this.openGroups++,this.q+="(",this},t.prototype.endGroup=function(){return this.openGroups<=0?(Object(o.a)("`endGroup(...)` was called without calling `startGroup(...)` first. Your query was not modified."),this):(this.commit(),this.openGroups--,this.q+=")",this)},t.prototype.and=function(){return this.addModifier("and")},t.prototype.or=function(){return this.addModifier("or")},t.prototype.not=function(){return this.addModifier("not")},t.prototype.from=function(t){return this.hasTerms?(Object(o.a)("`from(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Your query was not modified."),this):(this.rangeStack[0]=t,this)},t.prototype.to=function(t){return this.hasTerms?(Object(o.a)("`to(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Your query was not modified."),this):(this.rangeStack[1]=t,this)},t.prototype.boost=function(t){return this.commit(),this.q+="^"+t,this},t.prototype.toParam=function(){return this.commit(),this.cleanup(),this.q},t.prototype.clone=function(){return this.commit(),this.cleanup(),new t(this.q+"")},t.prototype.addModifier=function(t){return this.currentModifer?(Object(o.a)("You have called `"+this.currentModifer+"()` after `"+t+"()`. Your current query was not modified."),this):(this.commit(),""===this.q&&"not"!==t?(Object(o.a)("You have called `"+t+"()` without calling another method to modify your query first. Try calling `match()` first."),this):(this.currentModifer=t,this.q+=""===this.q?"":" ",this.q+=t.toUpperCase()+" ",this))},t.prototype.hasWhiteSpace=function(t){return/\s/g.test(t)},t.prototype.formatTerm=function(t){return t instanceof Date?t.getTime():"string"===typeof t&&this.hasWhiteSpace(t)?'"'+t+'"':t},t.prototype.commit=function(){var t=this;return this.currentModifer=void 0,this.hasRange&&(this.q+="["+this.formatTerm(this.rangeStack[0])+" TO "+this.formatTerm(this.rangeStack[1])+"]",this.rangeStack=[void 0,void 0]),this.hasTerms&&(this.q+=this.termStack.map((function(e){return t.formatTerm(e)})).join(" "),this.termStack=[]),this},Object.defineProperty(t.prototype,"hasTerms",{get:function(){return this.termStack.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasRange",{get:function(){return this.rangeStack.length&&this.rangeStack[0]&&this.rangeStack[1]},enumerable:!0,configurable:!0}),t.prototype.cleanup=function(){if(this.openGroups>0)for(Object(o.a)("Automatically closing "+this.openGroups+" group(s). You can use `endGroup(...)` to remove this warning.");this.openGroups>0;)this.q+=")",this.openGroups--;var t=this.q;this.q=t.replace(/( AND ?| NOT ?| OR ?)*$/,""),t!==this.q&&Object(o.a)("`startGroup(...)` was called without calling `endGroup(...)` first. Your query was not modified."),this.q=this.q.replace(/(\(\))*/,"")},t}(),s=r("hegE");function c(t){return function t(e,r){var o,c,u;switch(c="string"===typeof e||e instanceof a?{httpMethod:"GET",params:{q:e}}:Object(n.a)(e,["q","num","start","sortField","sortOrder"],{httpMethod:"GET"}),r){case"item":u="/search";break;case"group":u="/community/groups";break;case"groupContent":if("string"===typeof e||e instanceof a||!e.groupId)return Promise.reject(new Error("you must pass a `groupId` option to `searchGroupContent`"));u="/content/groups/"+e.groupId+"/search";break;default:u="/portals/self/users/search"}return o=Object(s.a)(c)+u,Object(i.c)(o,c).then((function(n){return n.nextStart&&-1!==n.nextStart&&(n.nextPage=function(){var i;return"string"===typeof e||e instanceof a?i={q:e,start:n.nextStart}:(i=e).start=n.nextStart,t(i,r)}),n}))}(t,"item")}},JmSK:function(t,e,r){"use strict";var n,i,o,a,s,c;r.d(e,"c",(function(){return n})),r.d(e,"a",(function(){return i})),r.d(e,"e",(function(){return o})),r.d(e,"d",(function(){return s})),r.d(e,"b",(function(){return c})),function(t){t.published="smstatuspublished",t.unpublishedChanges="smstatusunpublishedchanges",t.draft="smstatusdraft"}(n||(n={})),function(t){t.published="smversionpublished",t.draft="smversiondraft"}(i||(i={})),function(t){t.publishedDate="smpublisheddate"}(o||(o={})),function(t){t[t.ExpressMap=0]="ExpressMap",t[t.WebMap=1]="WebMap",t[t.WebScene=2]="WebScene"}(a||(a={})),function(t){t.Image="image",t.Video="video",t.ImageOrVideo="image-or-video",t.Audio="audio",t.Embed="embed",t.Map="map",t.GuidedTour="tour",t.Sidecar="sidecar",t.Globe="globe",t.Terrain="terrain",t.ImageEditor="imageEditor",t.Viewer3D="viewer3D",t.Charting="charting",t.ExpressMapping="expressMapping",t.BinVisualization="binVisualization",t.Template="template"}(s||(s={})),function(t){t[t.Full=1920]="Full",t[t.Wide=1200]="Wide",t[t.Standard=820]="Standard"}(c||(c={}))},N8kh:function(t,e,r){"use strict";var n;r.d(e,"a",(function(){return n})),function(t){t.PUBLIC="public",t.ORG="org",t.PRIVATE="private",t.SHARED="shared"}(n||(n={}))},TLWd:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("BVlg"),i=function(t){var e=t.type,r=t.dateStamp,i="number"===typeof r?r:(null===r||void 0===r?void 0:r.getTime())||Date.now(),o=1e3*Math.round(i/1e3);return"".concat(e===n.a.Collection?"StoryMapCollection":"StoryMap"," ").concat(o)}},Tc8g:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("D57K");function i(t,e,r){var i=n.a({params:{}},r,t);return i.params=e.reduce((function(e,r){return(t[r]||"boolean"===typeof t[r])&&(e[r]=t[r]),e}),i.params),["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"].reduce((function(t,e){return i[e]&&(t[e]=i[e]),t}),{})}},URUM:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r("D57K"),i=(r("Tc8g"),r("ZcpU")),o=r("hegE"),a=r("33W0");r("5ts5");function s(t){return Object(a.a)(t).then((function(e){var r=Object(o.a)(t)+"/content/users/"+e+"/items/"+t.id+"/addResources";return t.params=n.a({file:t.resource,fileName:t.name,resourcesPrefix:t.prefix,text:t.content,access:t.private?"private":"inherit"},t.params),Object(i.c)(r,t)}))}},VxPs:function(t,e,r){var n=r("rS/+");t.exports=function(t,e){";"!==(t=n.trimRight(t))[t.length-1]&&(t+=";");var r=t.length,i=!1,o=0,a=0,s="";function c(){if(!i){var r=n.trim(t.slice(o,a)),c=r.indexOf(":");if(-1!==c){var u=n.trim(r.slice(0,c)),l=n.trim(r.slice(c+1));if(u){var f=e(o,s.length,u,l,r);f&&(s+=f+"; ")}}}o=a+1}for(;a<r;a++){var u=t[a];if("/"===u&&"*"===t[a+1]){var l=t.indexOf("*/",a+2);if(-1===l)break;o=(a=l+1)+1,i=!1}else"("===u?i=!0:")"===u?i=!1:";"===u?i||c():"\n"===u&&c()}return n.trim(s)}},fQV3:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return s})),r.d(e,"d",(function(){return c})),r.d(e,"c",(function(){return u}));var n=r("D57K"),i=r("ZcpU"),o=(r("Tc8g"),r("hegE"));r("33W0");function a(t,e){var r=Object(o.a)(e)+"/content/items/"+t,a=n.a({httpMethod:"GET"},e);return Object(i.c)(r,a)}function s(t,e){var r=Object(o.a)(e)+"/content/items/"+t+"/data",a=n.a({httpMethod:"GET",params:{}},e);return a.file&&(a.params.f=null),Object(i.c)(r,a).catch((function(t){if(!RegExp(/The string did not match the expected pattern|(Unexpected end of (JSON input|data at line 1 column 1))/i).test(t.message))throw t}))}function c(t,e){var r=Object(o.a)(e)+"/content/items/"+t+"/resources",a=n.a({},e);return a.params=n.a({num:1e3},a.params),Object(i.c)(r,a)}function u(t,e){var r=Object(o.a)(e)+"/content/items/"+t+"/groups";return Object(i.c)(r,e)}},g2IE:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"c",(function(){return i})),r.d(e,"b",(function(){return o}));var n=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512,r=t.split(",")[0].split(":")[1].split(";")[0],n=atob(t.split(",")[1]),i=[],o=0;o<n.length;o+=e){for(var a=n.slice(o,o+e),s=new Array(a.length),c=0;c<a.length;c++)s[c]=a.charCodeAt(c);var u=new Uint8Array(s);i.push(u)}var l=new Blob(i,{type:r});return l},i=function(t){return new Blob([JSON.stringify(t)],{type:"application/json"})},o=function(t,e){var r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",e+".json"),document.body.appendChild(n),n.click(),n.remove()}},hwME:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return s}));var n=r("D57K"),i=r("ZcpU"),o=(r("Tc8g"),r("hegE"));function a(t,e){var r=Object(o.a)(e)+"/community/groups/"+t,a=n.a({httpMethod:"GET"},e);return Object(i.c)(r,a)}function s(t,e){var r=Object(o.a)(e)+"/content/groups/"+t,a=n.a({httpMethod:"GET"},{params:{start:1,num:100}},e);return e&&e.paging&&(a.params=n.a({},e.paging)),Object(i.c)(r,a)}},"kBU/":function(t,e,r){var n=r("3BTF"),i=r("VxPs");r("rS/+");function o(t){return void 0===t||null===t}function a(t){(t=function(t){var e={};for(var r in t)e[r]=t[r];return e}(t||{})).whiteList=t.whiteList||n.whiteList,t.onAttr=t.onAttr||n.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||n.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||n.safeAttrValue,this.options=t}a.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var e=this.options,r=e.whiteList,n=e.onAttr,a=e.onIgnoreAttr,s=e.safeAttrValue;return i(t,(function(t,e,i,c,u){var l=r[i],f=!1;if(!0===l?f=l:"function"===typeof l?f=l(c):l instanceof RegExp&&(f=l.test(c)),!0!==f&&(f=!1),c=s(i,c)){var d,p={position:e,sourcePosition:t,source:u,isWhite:f};return f?o(d=n(i,c,p))?i+":"+c:d:o(d=a(i,c,p))?void 0:d}}))},t.exports=a},kO5H:function(t,e,r){"use strict";r.d(e,"a",(function(){return s})),r.d(e,"c",(function(){return c})),r.d(e,"b",(function(){return u}));var n=r("fGyu"),i=r("zjfJ");function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){Object(i.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var s=function(t){var e="".concat(t.typekeywordId,":");return t.itemDetails.typeKeywords&&t.itemDetails.typeKeywords.reduce((function(t,r){return 0===r.search(e)?r.replace(e,""):t}),void 0)||void 0},c=function(t){var e="".concat(t.typekeywordId,":"),r=a({},t.itemDetails).typeKeywords.filter((function(t){return 0!==t.search(e)}));return a({},t.itemDetails,{typeKeywords:[].concat(Object(n.a)(r),["".concat(e).concat(t.data)])})},u=function(t){return t.typeKeywords.includes("storymapcollection")&&0===t.typeKeywords.filter((function(t){return/smversiondraft/.test(t)})).length}},oGsw:function(t,e){t.exports={indexOf:function(t,e){var r,n;if(Array.prototype.indexOf)return t.indexOf(e);for(r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},forEach:function(t,e,r){var n,i;if(Array.prototype.forEach)return t.forEach(e,r);for(n=0,i=t.length;n<i;n++)e.call(r,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/.exec(t);return e?e.index:-1}}},q30X:function(t,e,r){"use strict";r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return s})),r.d(e,"b",(function(){return c})),r.d(e,"a",(function(){return u}));var n=r("dunV"),i=Object(n.a)("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",6),o=function(t){return"".concat(t,"-").concat(i())},a=function(){return o("n")},s=function(){return o("r")},c=function(){return o("e")},u=function t(e){var r,n;if("object"!==typeof e)return e;if(!e)return e;if("[object Array]"===Object.prototype.toString.apply(e)){for(n=[],r=0;r<e.length;r+=1)n[r]=t(e[r]);return n}n={};var i=Object.keys(e);for(r=0;r<i.length;r++)e.hasOwnProperty(i[r])&&(n[i[r]]=t(e[i[r]]));return n}},r2q8:function(t,e,r){"use strict";var n,i="object"===typeof Reflect?Reflect:null,o=i&&"function"===typeof i.apply?i.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};n=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!==t};function s(){s.init.call(this)}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function u(t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function f(t,e,r,n){var i,o,a,s;if(u(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]),void 0===a)a=o[e]=r,++t._eventsCount;else if("function"===typeof a?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=l(t))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,s=c,console&&console.warn&&console.warn(s)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=d.bind(n);return i.listener=r,n.wrapFn=i,i}function h(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):g(i,i.length)}function m(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(t){if("number"!==typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");c=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=i[t];if(void 0===c)return!1;if("function"===typeof c)o(c,this,e);else{var u=c.length,l=g(c,u);for(r=0;r<u;++r)o(l[r],this,e)}return!0},s.prototype.addListener=function(t,e){return f(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return f(this,t,e,!0)},s.prototype.once=function(t,e){return u(e),this.on(t,p(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,p(this,t,e)),this},s.prototype.removeListener=function(t,e){var r,n,i,o,a;if(u(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!==typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},s.prototype.listeners=function(t){return h(this,t,!0)},s.prototype.rawListeners=function(t){return h(this,t,!1)},s.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},"rS/+":function(t,e){t.exports={indexOf:function(t,e){var r,n;if(Array.prototype.indexOf)return t.indexOf(e);for(r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},forEach:function(t,e,r){var n,i;if(Array.prototype.forEach)return t.forEach(e,r);for(n=0,i=t.length;n<i;n++)e.call(r,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}}},sHW7:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(r("EPBW")),o=n(r("tTwn")),a=function(){function t(t,e){var r,n=this;this.arcgisWhiteList={a:["href","target","style"],img:["src","width","height","border","alt","style"],video:["autoplay","controls","height","loop","muted","poster","preload","width"],audio:["autoplay","controls","loop","muted","preload"],source:["media","src","type"],span:["style"],table:["width","height","cellpadding","cellspacing","border","style"],div:["style","align"],font:["size","color","style"],tr:["height","valign","align","style"],td:["height","width","valign","align","colspan","rowspan","nowrap","style"],th:["height","width","valign","align","colspan","rowspan","nowrap","style"],p:["style"],b:[],strong:[],i:[],em:[],u:[],br:[],li:[],ul:[],ol:[],hr:[],tbody:[]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(t,e,r,i){return"a"===t&&"href"===e||("img"===t||"source"===t)&&"src"===e?n.sanitizeUrl(r):o.default.safeAttrValue(t,e,r,i)}},t&&!e?r=t:t&&e?(r=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach((function(e){"whiteList"===e?r.whiteList=n._extendObjectOfArrays([n.arcgisWhiteList,t.whiteList||{}]):r[e]=t[e]}))):(r=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=r,this._xssFilter=new o.default.FilterXSS(r)}return t.prototype.sanitize=function(t,e){switch(void 0===e&&(e={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,e);default:if(e.allowUndefined&&"undefined"===typeof t)return;return null}},t.prototype.sanitizeUrl=function(t){var e=this._trim(t.substring(0,t.indexOf(":")));return"/"===t||"#"===t||"#"===t[0]||this.allowedProtocols.indexOf(e.toLowerCase())>-1?o.default.escapeAttrValue(t):""},t.prototype.validate=function(t,e){void 0===e&&(e={});var r=this.sanitize(t,e);return{isValid:t===r,sanitized:r}},t.prototype._extendObjectOfArrays=function(t){var e={};return t.forEach((function(t){Object.keys(t).forEach((function(r){Array.isArray(t[r])&&Array.isArray(e[r])?e[r]=e[r].concat(t[r]):e[r]=t[r]}))})),e},t.prototype._iterateOverObject=function(t,e){var r=this;void 0===e&&(e={});try{var n=!1,o=void 0;if(Array.isArray(t))o=t.reduce((function(t,i){var o=r.validate(i,e);return o.isValid?t.concat([i]):(n=!0,t.concat([o.sanitized]))}),[]);else{if(!i.default(t)){if(e.allowUndefined&&"undefined"===typeof t)return;return null}o=Object.keys(t).reduce((function(i,o){var a=t[o],s=r.validate(a,e);return s.isValid?i[o]=a:(n=!0,i[o]=s.sanitized),i}),{})}return n?o:t}catch(a){return null}},t.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},t}();e.Sanitizer=a},sczD:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("sHW7"),i=new n.Sanitizer({whiteList:{strong:["class"],em:["class"],a:["href","target","rel","class"],ul:[],ol:[],li:[],p:[],br:[],h1:[],h2:[],h3:[],h4:[],blockquote:[],span:["class"]},stripIgnoreTag:!0,allowCommentTag:!1},!1)},tTwn:function(t,e,r){var n=r("Fo8R"),i=r("yuEw"),o=r("9bA5");function a(t,e){return new o(e).process(t)}for(var s in(e=t.exports=a).filterXSS=a,e.FilterXSS=o,n)e[s]=n[s];for(var s in i)e[s]=i[s];"undefined"!==typeof window&&(window.filterXSS=t.exports),"undefined"!==typeof self&&"undefined"!==typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=t.exports)},vpyF:function(t,e,r){"use strict";r.d(e,"a",(function(){return d})),r.d(e,"b",(function(){return p}));var n=r("D57K"),i=r("ZcpU"),o=r("hegE"),a=r("11In");function s(t){var e,r={httpMethod:"GET"};if("string"===typeof t)e="https://www.arcgis.com/sharing/rest/community/users/"+t;else{var a=t.username||t.authentication.username;e=Object(o.a)(t)+"/community/users/"+encodeURIComponent(a),r=n.a({},t,r)}return Object(i.c)(e,r)}function c(t){var e=t.id,r=Object(o.a)(t)+"/community/groups/"+e+"/addUsers",n=Object.assign({},t,{admins:void 0,users:void 0}),a=u("users",t.users,n).concat(u("admins",t.admins,n)).map((function(t){return function(t,e){return Object(i.c)(t,e).catch((function(t){return{errors:[t]}}))}(r,t)}));return Promise.all(a).then(l)}function u(t,e,r){return!e||e.length<1?[]:function(t,e){if(0===t.length)return[];for(var r=[],n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r}(e,25).map((function(e){return function(t,e,r){var i,o;return Object.assign({},r,((i={})[t]=e,i.params=n.a({},r.params,((o={})[t]=e,o)),i))}(t,e,r)}))}function l(t){var e=t.filter((function(t){return t.notAdded})).reduce((function(t,e){return t.concat(e.notAdded)}),[]),r=t.filter((function(t){return t.errors})).reduce((function(t,e){return t.concat(e.errors)}),[]),n={notAdded:e};return r.length>0&&(n.errors=r),n}var f=r("JGeh");function d(t){return h(n.a({action:"share"},t))}function p(t){return h(n.a({action:"unshare"},t))}function h(t){var e=t.authentication.username,r=t.owner||e,n=t.confirmItemControl||!1;return s({username:e,authentication:t.authentication}).then((function(u){var l="org_admin"===u.role,d="share"===t.action?"notSharedWith":"notUnsharedFrom";return function(t){var e={q:"id: "+t.id+" AND group: "+t.groupId,start:1,num:10,sortField:"title",authentication:t.authentication,httpMethod:"POST"};return Object(f.a)(e).then((function(e){if(e.total>0)return e.results.some((function(e){return e.id===t.id}))}))}(t).then((function(f){if("share"===t.action&&!0===f||"unshare"===t.action&&!1===f){var p={itemId:t.id,shortcut:!0};return p[d]=[],p}return Object(a.b)(t).then((function(a){if("none"===a&&!l)throw Error("This item can not be "+t.action+"d by "+e+" as they are not a member of the specified group "+t.groupId+".");if(n&&r!==e&&!l)throw Error("This item can not be "+t.action+"d to shared editing group "+t.groupId+" by "+e+" as they not the item owner.");if("unshare"===t.action&&r!==e&&"admin"!==a&&"owner"!==a)throw Error("This item can not be "+t.action+"d from group "+t.groupId+" by "+e+" as they not the item owner, group admin or group owner.");if("share"===t.action&&n&&r!==e&&l)return function(t,e){var r=e.owner;return s({username:r,authentication:e.authentication}).then((function(n){if(t.orgId!==n.orgId)throw Error("User "+r+" is not a member of the same org as "+t.username+". Consequently they can not be added added to group "+e.groupId+" nor can item "+e.id+" be shared to the group.");var a=n.groups||[],s=a.find((function(t){return t.id===e.groupId}));if(!s&&a.length>511)throw Error("User "+r+" already has 512 groups, and can not be added to group "+e.groupId+". Consequently item "+e.id+" can not be shared to the group.");return s?"member"===s.userMembership.memberType?function(t){var e=Object(o.a)(t)+"/community/groups/"+t.id+"/updateUsers",r={authentication:t.authentication,params:{}};return"admin"===t.newMemberType?r.params.admins=t.users:r.params.users=t.users,Object(i.c)(e,r)}({id:e.groupId,users:[r],newMemberType:"admin",authentication:e.authentication}).then((function(t){return{notAdded:t.results.reduce((function(t,e){return e.success||t.push(e.username),t}),[])}})):{notAdded:[]}:c({id:e.groupId,admins:[r],authentication:e.authentication})})).then((function(t){if(t.notAdded.length)throw Error("Error adding user "+r+" to group "+e.groupId+". Consequently item "+e.id+" was not shared to the group.");return m(e)}))}(u,t);if("none"!==a)return m(t);throw Error("This item can not be "+t.action+"d by "+e+" as they are not a member of the specified group "+t.groupId+".")})).then((function(e){if(e[d].length)throw Error("Item "+t.id+" could not be "+t.action+"d to group "+t.groupId+".");return e}))}))}))}function m(t){var e=t.authentication.username,r=t.owner||e,n=Object(o.a)(t)+"/content/items/"+t.id+"/"+t.action;return r===e&&(n=Object(o.a)(t)+"/content/users/"+r+"/items/"+t.id+"/"+t.action),t.params={groups:t.groupId,confirmItemControl:t.confirmItemControl},Object(i.c)(n,t)}},vs5j:function(t,e,r){"use strict";r.d(e,"d",(function(){return d})),r.d(e,"b",(function(){return p})),r.d(e,"a",(function(){return h})),r.d(e,"e",(function(){return m})),r.d(e,"c",(function(){return g}));var n=r("VtSi"),i=r.n(n),o=r("zjfJ"),a=r("JmSK"),s=r("q30X"),c=r("72yd"),u=r("BVlg"),l=r("Bx5b"),f=r("TLWd"),d=function(t,e,r){var n=[a.c.draft,"arcgis-storymaps","".concat(a.a.draft,":").concat(e)];return t===u.a.Collection&&n.push(l.b),r&&n.push(c.f),{title:Object(f.a)({type:t}),tags:[""],typeKeywords:n,type:"StoryMap"}},p=function(t){var e,r=Object(s.c)(),n=Object(s.c)(),i=Object(s.c)(),a=Object(s.d)(),c={root:r,nodes:(e={},Object(o.a)(e,r,{type:"story",data:{storyTheme:a},children:[n,i]}),Object(o.a)(e,n,{type:"storycover",data:{type:"full",title:"",summary:"",byline:"".concat(t.firstName&&t.lastName&&"undefined"!==t.firstName&&"undefined"!==t.lastName?"".concat(t.firstName," ").concat(t.lastName):""),titlePanelPosition:"start"}}),Object(o.a)(e,i,{type:"navigation",data:{links:[]},config:{isHidden:!0}}),e),resources:Object(o.a)({},a,{type:"story-theme",data:{themeId:"summit",themeBaseVariableOverrides:{}}})},u=c.nodes[r].children;if(!u)throw new Error("new story created with no children block");if("string"===typeof t.webmap){var l="r-".concat(t.webmap),f=Object(s.c)();c.resources[l]={type:"webmap",data:{itemId:t.webmap,itemType:"Web Map",type:"default"}},u.push(f),c.nodes[f]={type:"webmap",data:{map:l}}}if("string"===typeof t.webscene){var d="r-".concat(t.webscene),p=Object(s.c)();c.resources[d]={type:"webmap",data:{itemId:t.webscene,itemType:"Web Scene",type:"default"}},u.push(p),c.nodes[p]={type:"webmap",data:{map:d}}}var h=Object(s.c)();return u.push(h),c.nodes[h]={type:"credits"},c},h=function(){return{items:[],sortOrder:"custom",sortField:"custom"}},m=function(t){return!t||/StoryMap \d{10,15}/.test(t)||/StoryMapCollection \d{10,15}/.test(t)},g=function(t){var e,r,n;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e="".concat(location.origin).concat(t,"/static/images/builder/item/default-thumbnail.jpg"),o.next=3,i.a.awrap(fetch(e));case 3:return r=o.sent,o.next=6,i.a.awrap(r.blob());case 6:return n=o.sent,o.abrupt("return",n);case 8:case"end":return o.stop()}}),null,null,null,Promise)}},w9Sv:function(t,e,r){var n=r("3BTF"),i=r("kBU/");for(var o in(e=t.exports=function(t,e){return new i(e).process(t)}).FilterCSS=i,n)e[o]=n[o];"undefined"!==typeof window&&(window.filterCSS=t.exports)},wTCQ:function(t,e,r){"use strict";r.d(e,"d",(function(){return I})),r.d(e,"c",(function(){return S})),r.d(e,"e",(function(){return k})),r.d(e,"b",(function(){return T})),r.d(e,"a",(function(){return E}));var n=r("VtSi"),i=r.n(n),o=r("ERkP"),a=r.n(o),s=r("2SGB"),c=r("79uv"),u=r("Z34l"),l=r("g2IE"),f=r("txt0"),d=r("JmSK"),p=r("Gh8D"),h=r("D57K"),m=r("ZcpU"),g=r("Tc8g"),b=r("hegE"),v=r("33W0");function y(t){return function(t){return t.file&&!t.multipart?Promise.reject(new Error("The request must be a multipart request for file uploading.")):t.multipart&&!t.filename?Promise.reject(new Error("The file name is required for a multipart request.")):Object(v.a)(t).then((function(e){var r=Object(b.a)(t)+"/content/users/"+e,n=r+"/addItem";t.folderId&&(n=r+"/"+t.folderId+"/addItem"),t.params=h.a({},t.params,Object(v.b)(t.item));var i=Object(g.a)(t,["owner","folderId","file","dataUrl","text","async","multipart","filename","overwrite"],{params:h.a({},t.params)});return Object(m.c)(n,i)}))}(h.a({folderId:null},t))}var w=r("URUM"),O=r("vs5j"),j=r("BVlg"),x=a.a.createElement,I=function(t){return t.indexOf(d.c.draft)>=0||t.indexOf("status:draft")>=0||Object(c.f)({typeKeywords:t})?d.c.draft:t.indexOf(d.c.published)>=0||t.indexOf("status:published")>=0?d.c.published:(t.indexOf(d.c.unpublishedChanges)>=0||t.indexOf("status:unpublished-changes")>=0)&&d.c.unpublishedChanges},S=function(t){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.awrap(Object(c.j)({isFavorite:!0,itemId:t.id,userSession:t.userSession,owner:t.owner}));case 3:t.toast.add({type:"success",title:x(s.a,{id:"itemUtils.addFavoriteSuccess.".concat(t.itemType)})}),e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),t.toast.add({type:"error",title:x(s.a,{id:"builder.common.sorry"}),details:x(s.a,{id:"itemUtils.errorFavoriting.".concat(t.itemType)})}),new Error(e.t0);case 10:case"end":return e.stop()}}),null,null,[[0,6]],Promise)},k=function(t){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.awrap(Object(c.j)({isFavorite:!1,itemId:t.id,userSession:t.userSession,owner:t.owner}));case 3:t.toast.add({type:"success",title:x(s.a,{id:"itemUtils.removeFavoriteSuccess.".concat(t.itemType)})}),e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),t.toast.add({type:"error",title:x(s.a,{id:"builder.common.sorry"}),details:x(s.a,{id:"itemUtils.errorUnfavoriting.".concat(t.itemType)})}),new Error(e.t0);case 10:case"end":return e.stop()}}),null,null,[[0,6]],Promise)},T=function(t){var e,r;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.type?x(s.a,{id:"itemUtils.deleteCollectionSuccess"}):x(s.a,{id:"itemUtils.deleteStorySuccess"}),r=t.type?x(s.a,{id:"itemUtils.errorDeletingCollection"}):x(s.a,{id:"itemUtils.errorDeletingStory"}),n.prev=2,n.next=5,i.a.awrap(Object(p.a)({authentication:t.userSession,id:t.id}));case 5:t.toast.add({type:"success",title:e}),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(2),t.toast.add({type:"error",title:x(s.a,{id:"builder.common.sorry"}),details:r}),new Error(n.t0);case 12:case"end":return n.stop()}}),null,null,[[2,8]],Promise)},E=function(t){var e,r,n,o,a;return i.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,i.a.awrap(Object(u.i)(t.userSession));case 2:return e=s.sent,s.next=5,i.a.awrap(Object(O.c)(t.baseUrl));case 5:return r=s.sent,s.next=8,i.a.awrap(y({authentication:t.userSession,params:{thumbnail:r},item:Object(O.d)(t.itemType,t.appVersion,e)}));case 8:return n=s.sent,s.next=11,i.a.awrap(t.userSession.getUser());case 11:return o=s.sent,a=t.itemType===j.a.Story?Object(O.b)({firstName:o.firstName,lastName:o.lastName,webmap:t&&t.webmap?t.webmap:void 0,webscene:t&&t.webscene?t.webscene:void 0}):Object(O.a)(),s.next=15,i.a.awrap(Object(w.a)({authentication:t.userSession,id:n.id,name:"draft.json",resource:Object(l.c)(a),owner:t.userSession.username,private:!0}));case 15:return f.a.trackEvent(f.a.Category.Story,f.a.Action.Story_CreateNewStory),s.abrupt("return",n);case 17:case"end":return s.stop()}}),null,null,null,Promise)}},yuEw:function(t,e,r){var n=r("oGsw");function i(t){var e=n.spaceIndex(t);if(-1===e)var r=t.slice(1,-1);else r=t.slice(1,e+1);return"/"===(r=n.trim(r).toLowerCase()).slice(0,1)&&(r=r.slice(1)),"/"===r.slice(-1)&&(r=r.slice(0,-1)),r}function o(t){return"</"===t.slice(0,2)}var a=/[^a-zA-Z0-9_:\.\-]/gim;function s(t,e){for(;e<t.length;e++){var r=t[e];if(" "!==r)return"="===r?e:-1}}function c(t,e){for(;e>0;e--){var r=t[e];if(" "!==r)return"="===r?e:-1}}function u(t){return function(t){return'"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1]}(t)?t.substr(1,t.length-2):t}e.parseTag=function(t,e,r){var n="",a=0,s=!1,c=!1,u=0,l=t.length,f="",d="";for(u=0;u<l;u++){var p=t.charAt(u);if(!1===s){if("<"===p){s=u;continue}}else if(!1===c){if("<"===p){n+=r(t.slice(a,u)),s=u,a=u;continue}if(">"===p){n+=r(t.slice(a,s)),f=i(d=t.slice(s,u+1)),n+=e(s,n.length,f,d,o(d)),a=u+1,s=!1;continue}if(('"'===p||"'"===p)&&"="===t.charAt(u-1)){c=p;continue}}else if(p===c){c=!1;continue}}return a<t.length&&(n+=r(t.substr(a))),n},e.parseAttr=function(t,e){var r=0,i=[],o=!1,l=t.length;function f(t,r){if(!((t=(t=n.trim(t)).replace(a,"").toLowerCase()).length<1)){var o=e(t,r||"");o&&i.push(o)}}for(var d=0;d<l;d++){var p,h=t.charAt(d);if(!1!==o||"="!==h)if(!1===o||d!==r||'"'!==h&&"'"!==h||"="!==t.charAt(d-1))if(/\s|\n|\t/.test(h)){if(t=t.replace(/\s|\n|\t/g," "),!1===o){if(-1===(p=s(t,d))){f(n.trim(t.slice(r,d))),o=!1,r=d+1;continue}d=p-1;continue}if(-1===(p=c(t,d-1))){f(o,u(n.trim(t.slice(r,d)))),o=!1,r=d+1;continue}}else;else{if(-1===(p=t.indexOf(h,d+1)))break;f(o,n.trim(t.slice(r+1,p))),o=!1,r=(d=p)+1}else o=t.slice(r,d),r=d+1}return r<t.length&&(!1===o?f(t.slice(r)):f(o,u(n.trim(t.slice(r))))),n.trim(i.join(" "))}}}]);