(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{fzbh:function(t,e,r){"use strict";r.r(e),r.d(e,"ExpressMapResource",(function(){return m}));var n=r("zygG"),a=r("VtSi"),c=r.n(a),u=r("9fIP"),s=r("MMYH"),i=r("K/z8"),o=r("sRHE"),l=r("8K1b"),f=r("zjfJ"),p=r("q30X"),b=r("eSbf"),d=r("79uv"),O=r("g2IE");function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function j(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach((function(e){Object(f.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var m=function(t){Object(l.a)(a,t);var e,r=(e=a,function(){var t,r=Object(o.a)(e);if(h()){var n=Object(o.a)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return Object(i.a)(this,t)});function a(t){var e;if(Object(u.a)(this,a),e=r.call(this,t),!a.isDataValid(t.data))throw new Error;return e.addEventListener("getItemId",(function(){return e.getItemId()})),e}return Object(s.a)(a,null,[{key:"isDataValid",value:function(t){return!!t.itemId}}]),Object(s.a)(a,[{key:"clone",value:function(){var t,e,r,u,s,i,o;return c.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(t=this.getGlobalState("storyItem")){l.next=3;break}return l.abrupt("return",void 0);case 3:return e=function(t,e){var r,n,a;return c.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return r=Object(d.e)(t,e.version),n=e.userSession,a={resourceName:r,userSession:n},u.next=5,c.a.awrap(e.fetchItemResource(a));case 5:return u.abrupt("return",u.sent);case 6:case"end":return u.stop()}}),null,null,null,Promise)},r=function(t,e){var r,n,a,u;return c.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return r="expressmap_".concat(Date.now(),".json"),n=Object(d.e)(r,"draft"),a={isAdd:!0,resourceName:n,resource:Object(O.c)(t)},s.next=5,c.a.awrap(e.upsertItemResource(a));case 5:return u=s.sent,s.abrupt("return",u.success?r:"");case 7:case"end":return s.stop()}}),null,null,null,Promise)},l.t0=c.a,l.t1=Promise,l.t2=a.fromJSON({type:this.type,data:this.data},Object(p.d)()),l.t3=r,l.next=11,c.a.awrap(e(this.data.itemId,t));case 11:return l.t4=l.sent,l.t5=t,l.t6=(0,l.t3)(l.t4,l.t5),l.t7=[l.t2,l.t6],l.t8=l.t1.all.call(l.t1,l.t7),l.next=18,l.t0.awrap.call(l.t0,l.t8);case 18:return u=l.sent,s=Object(n.a)(u,2),i=s[0],o=s[1],i&&o&&(i.data=j({},i.data,{itemId:o})),l.abrupt("return",i);case 24:case"end":return l.stop()}}),null,this,null,Promise)}},{key:"setData",value:function(t){if(!a.isDataValid(t))throw new Error;this.data=t}},{key:"toJSON",value:function(){return{type:a.type,data:{itemId:this.data.itemId}}}},{key:"getItemId",value:function(){return this.data.itemId}}]),a}(b.a);Object(f.a)(m,"type","expressmap"),Object(f.a)(m,"isJSONValid",(function(t){return m.isDataValid(t.data)})),Object(f.a)(m,"getInstance",(function(t){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new m(Object(b.c)(t)));case 1:case"end":return e.stop()}}),null,null,null,Promise)})),Object(f.a)(m,"fromJSON",(function(t,e){return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(m.isJSONValid(t)){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,c.a.awrap(m.getInstance(j({id:e},t)));case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),null,null,null,Promise)})),e.default=m}}]);