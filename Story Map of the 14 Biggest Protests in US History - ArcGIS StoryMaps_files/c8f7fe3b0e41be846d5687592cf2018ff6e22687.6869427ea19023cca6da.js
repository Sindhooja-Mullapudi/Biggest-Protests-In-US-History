(window.webpackJsonp=window.webpackJsonp||[]).push([[1,24,48,49,50,61,66,67,68,127],{"+2DB":function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e[e.Background=0]="Background",e[e.Builder=1]="Builder",e[e.Viewer=2]="Viewer",e[e.FullInteractive=3]="FullInteractive"}(i||(i={}))},"+ApL":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"chevron-down-16",path:"M14 4.217v2.766l-6 6-6-6V4.217l6 6z",viewBox:"0 0 16 16"})}return c}(n("MEC2").a)},"+PoS":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){var t=e.storyItem,n=e.fileName;if("public"===t.itemDetails.access||t.userSession){var i={resourceName:n,queryParameters:{token:t.userSession?t.userSession.token:""},userSession:void 0},o="public"===t.itemDetails.access&&"view"===t.viewerMode,r=t.getItemResourceUrl(i,o);if(a(o)&&"audio"!==e.playableMediaType){var s=new URL(r);r="".concat(window.location.origin,"/video").concat(s.href.replace(s.origin,""))}return r}return""},a=function(e){return!e&&navigator&&o(navigator.userAgent)},o=function(e){return!!e&&!!(/Safari\//i.test(e)&&/^((?!Chrome).)*$/i.test(e)&&/^((?!Android).)*$/i.test(e))}},"+ol3":function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("NX3A"),c=n("Z4N4"),l=r.a.createElement,p=Object(o.memo)((function(e){var t="function"===typeof e.onClick?"button":"div";return l(t,{onClick:e.onClick,className:a.a.dynamic([["3012880740",[s.a.color.darkGreen,c.a.typography.body14(),c.a.gapped("column",s.a.spacing.xxxs)]]])+" footer-info"},l("div",{className:a.a.dynamic([["3012880740",[s.a.color.darkGreen,c.a.typography.body14(),c.a.gapped("column",s.a.spacing.xxxs)]]])+" content"},!e.shouldRenderTextFirst&&e.icon,e.text,e.shouldRenderTextFirst&&e.icon),l(a.a,{id:"3012880740",dynamic:[s.a.color.darkGreen,c.a.typography.body14(),c.a.gapped("column",s.a.spacing.xxxs)]},[".content.__jsx-style-dynamic-selector{color:".concat(s.a.color.darkGreen,";").concat(c.a.typography.body14()," ").concat(c.a.gapped("column",s.a.spacing.xxxs),";}")]))}));t.a=p},"+tpQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"launch",path:"M20 11h2v11H2V2h11v2H4v16h16zm-5-9v1.5h4.44l-7.93 7.93 1.062 1.06L20.5 4.56V9H22V2z",viewBox:"0 0 24 24"})}return c}(n("MEC2").a)},"/BqC":function(e,t,n){"use strict";n.r(t),n.d(t,"SidecarViewer",(function(){return w}));var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("yFcC"),p=n.n(l),u=n("ERkP"),d=n.n(u),h=n("O94r"),m=n.n(h),f=n("NX3A"),y=n("eCu0"),g=n("V+ka"),v=n("2tmL"),b=n("caza"),x=d.a.createElement;function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var w=function(e){Object(c.a)(l,e);var t,n=(t=l,function(){var e,n=Object(s.a)(t);if(O()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function l(){return Object(a.a)(this,l),n.apply(this,arguments)}return Object(o.a)(l,[{key:"render",value:function(){if(this.props.printMode)return x("div",{className:"immersive-container"},this.props.children);var e={styles:x(p.a,{id:"3868188295",dynamic:[f.a.responsiveBreakpoints.large,"end"===this.props.narrativePanelPosition?"1fr auto":"auto 1fr"]},[".sidecar.__jsx-style-dynamic-selector{grid-template-columns:auto;}",".sidecar.docked-panel.__jsx-style-dynamic-selector{grid-template-rows:auto 1fr;}",".sidecar.floating-panel.__jsx-style-dynamic-selector{grid-template-rows:auto;}","@media (min-width:".concat(f.a.responsiveBreakpoints.large,"){.sidecar.docked-panel.__jsx-style-dynamic-selector{grid-template-rows:auto;grid-template-columns:").concat("end"===this.props.narrativePanelPosition?"1fr auto":"auto 1fr",";}}")]),className:p.a.dynamic([["3868188295",[f.a.responsiveBreakpoints.large,"end"===this.props.narrativePanelPosition?"1fr auto":"auto 1fr"]]])},t={styles:x(p.a,{id:"738879980",dynamic:[this.props.appOffset.top]},[".top-sentinel.sentinel-sidecar.__jsx-style-dynamic-selector{top:calc(".concat(this.props.appOffset.top," * -1);}")]),className:p.a.dynamic([["738879980",[this.props.appOffset.top]]])},n={styles:x(p.a,{id:"1877012741",dynamic:[v.a.STACKED_MEDIA_PANEL_HEIGHT,f.a.responsiveBreakpoints.large]},[".bottom-sentinel.sentinel-sidecar.__jsx-style-dynamic-selector{bottom:calc(".concat(v.a.STACKED_MEDIA_PANEL_HEIGHT," - 100vh);}"),"@media (min-width:".concat(f.a.responsiveBreakpoints.large,"){.bottom-sentinel.sentinel-sidecar.__jsx-style-dynamic-selector{bottom:0;}}")]),className:p.a.dynamic([["1877012741",[v.a.STACKED_MEDIA_PANEL_HEIGHT,f.a.responsiveBreakpoints.large]]])};return x(b.a,Object(i.a)({},this.props,{className:m()("sidecar",e.className,this.props.subtype),navDotsOrientation:"vertical",areNavDotsIntegrated:!0,shouldHideNavDots:"floating-panel"===this.props.subtype,topDockedSentinelClassName:m()("top-sentinel","sentinel-sidecar",t.className),bottomDockedSentinelClassName:m()("bottom-sentinel","sentinel-sidecar",n.className)}),this.props.children,e.styles,t.styles,n.styles)}}]),l}(u.PureComponent);t.default=Object(g.b)(Object(y.c)(w))},"/StV":function(e,t,n){"use strict";var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("pWxA"),s=n("K/z8"),c=n("sRHE"),l=n("8K1b"),p=n("zjfJ"),u=n("yFcC"),d=n.n(u),h=n("ERkP"),m=n.n(h),f=n("O94r"),y=n.n(f),g=n("Z4N4"),v=n("NX3A"),b=n("2SGB"),x=n("YQpL"),O=n("uUTH"),w=n("wwFW"),j=n("Pmyh"),C=n("MEC2"),k=m.a.createElement;function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var I=function(e){Object(l.a)(i,e);var t,n=(t=i,function(){var e,n=Object(c.a)(t);if(S()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function i(e){Object(a.a)(this,i);var t={iconName:"block-layout-float",path:"",viewBox:"0 0 32 32",children:function(){return k("g",null,k("rect",{x:"8",y:"12.25",width:"7",height:"8.75"}),k("rect",{x:"8",y:"8.5",width:"15",height:"2.5"}),k("rect",{x:"8",y:"22.25",width:"15",height:"2.5"}),k("rect",{x:"17",y:"17.25",width:"6",height:"2.5"}),k("rect",{x:"17",y:"13.25",width:"6",height:"2.5"}))}};return n.call(this,e,t)}return i}(C.a),P=m.a.createElement;function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var E=function(e){Object(l.a)(i,e);var t,n=(t=i,function(){var e,n=Object(c.a)(t);if(R()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function i(e){Object(a.a)(this,i);var t={iconName:"block-layout-content",path:"",viewBox:"0 0 32 32",children:function(){return P("g",null,P("rect",{x:"8",y:"8",width:"15",height:"2.5"}),P("rect",{x:"8",y:"11.75",width:"15",height:"8.75"}),P("rect",{x:"8",y:"21.75",width:"15",height:"2.5"}))}};return n.call(this,e,t)}return i}(C.a),D=m.a.createElement;function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var M=function(e){Object(l.a)(i,e);var t,n=(t=i,function(){var e,n=Object(c.a)(t);if(T()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function i(e){Object(a.a)(this,i);var t={iconName:"block-layout-wide",path:"",viewBox:"0 0 32 32",children:function(){return D("g",null,D("rect",{x:"5.5",y:"12",width:"21",height:"8.75"}),D("rect",{x:"8.5",y:"8",width:"15",height:"2.5"}),D("rect",{x:"8.5",y:"22",width:"15",height:"2.5"}))}};return n.call(this,e,t)}return i}(C.a),A=m.a.createElement;function N(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var L=function(e){Object(l.a)(i,e);var t,n=(t=i,function(){var e,n=Object(c.a)(t);if(N()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function i(e){Object(a.a)(this,i);var t={iconName:"block-layout-full",path:"",viewBox:"0 0 32 32",children:function(){return A("g",null,A("rect",{x:"5.5",y:"8.5",width:"21",height:"12.75"}),A("rect",{x:"8.5",y:"22.5",width:"15",height:"2.5"}))}};return n.call(this,e,t)}return i}(C.a),G=n("Y/5s"),_=n("A7aE"),B=n("3Uv7"),W=m.a.createElement,V=function(e){var t=e.isCompact,n=e.children;return W("div",{className:d.a.dynamic([["828585057",[v.a.spacing.xxxxs,t?0:v.a.spacing.xxxs,g.a.shadow.sm(),v.a.color.white]]])+" media-toolbar-group"},n,W(d.a,{id:"828585057",dynamic:[v.a.spacing.xxxxs,t?0:v.a.spacing.xxxs,g.a.shadow.sm(),v.a.color.white]},[".media-toolbar-group.__jsx-style-dynamic-selector{height:4rem;padding:".concat(v.a.spacing.xxxxs," ").concat(t?0:v.a.spacing.xxxs,";display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;").concat(g.a.shadow.sm()," background:").concat(v.a.color.white,";}")]))},F=n("liFR"),U=m.a.createElement,z=function(e){var t=e.icon;return U(F.a,{tooltipContent:e.tooltipContent,key:e.buttonId},U("button",{type:"button","data-button-id":e.buttonId,onClick:e.onClick,disabled:e.isDisabled,className:d.a.dynamic([["2896579662",[g.a.center(),e.iconSize||"3rem",e.iconSize?v.a.spacing.xxxxs:"0",v.a.color.darkGreen,v.a.spacing.xxxxs,v.a.color.beauBlue,v.a.color.ashGrey,v.a.color.platinum,v.a.color.beauBlue,v.a.color.beauBlue]]])+" "+(y()("media-toolbar-button",{active:e.isActive})||"")},U(t,{flipRTL:e.rtlIcon,className:d.a.dynamic([["2896579662",[g.a.center(),e.iconSize||"3rem",e.iconSize?v.a.spacing.xxxxs:"0",v.a.color.darkGreen,v.a.spacing.xxxxs,v.a.color.beauBlue,v.a.color.ashGrey,v.a.color.platinum,v.a.color.beauBlue,v.a.color.beauBlue]]])}),U(d.a,{id:"2896579662",dynamic:[g.a.center(),e.iconSize||"3rem",e.iconSize?v.a.spacing.xxxxs:"0",v.a.color.darkGreen,v.a.spacing.xxxxs,v.a.color.beauBlue,v.a.color.ashGrey,v.a.color.platinum,v.a.color.beauBlue,v.a.color.beauBlue]},[".media-toolbar-button.__jsx-style-dynamic-selector{height:100%;".concat(g.a.center(),"  overflow:hidden;font-size:").concat(e.iconSize||"3rem",";padding:").concat(e.iconSize?v.a.spacing.xxxxs:"0",";border:1px solid transparent;color:").concat(v.a.color.darkGreen,";margin:0 ").concat(v.a.spacing.xxxxs,";}"),".media-toolbar-button.__jsx-style-dynamic-selector:focus{outline:none;border:1px solid ".concat(v.a.color.beauBlue,";}"),".media-toolbar-button.__jsx-style-dynamic-selector:disabled{color:".concat(v.a.color.ashGrey,";cursor:default;}"),".media-toolbar-button.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector:not([disabled]){background:".concat(v.a.color.platinum,";}"),".media-toolbar-button.active.__jsx-style-dynamic-selector{background:".concat(v.a.color.beauBlue,";border-radius:0.2rem;}"),".media-toolbar-button.active.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector:not([disabled]){background:".concat(v.a.color.beauBlue,";}")])))},H=m.a.createElement;function Y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var K=function(e){Object(l.a)(u,e);var t,n=(t=u,function(){var e,n=Object(c.a)(t);if(Y()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function u(){var e;Object(a.a)(this,u);for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return e=n.call.apply(n,[this].concat(o)),Object(p.a)(Object(r.a)(e),"state",{isDeleteConfirmationModalShowing:!1}),Object(p.a)(Object(r.a)(e),"dividerStyles",{styles:H(d.a,{id:"319492420",dynamic:[v.a.color.platinum]},[".divider.__jsx-style-dynamic-selector{width:1px;background-color:".concat(v.a.color.platinum,";}")]),className:d.a.dynamic([["319492420",[v.a.color.platinum]]])}),Object(p.a)(Object(r.a)(e),"renderEditButton",(function(){return e.renderButton({buttonId:"edit",icon:O.a,iconSize:"2rem",onClick:e.props.onEditClicked,tooltipContent:e.props.intl.formatMessage({id:"builder.common.edit"})})})),Object(p.a)(Object(r.a)(e),"renderPropertiesButton",(function(){return H(h.Fragment,null,e.renderButton({buttonId:"properties",icon:w.a,iconSize:"2rem",onClick:e.props.onSettingsClicked,tooltipContent:e.props.intl.formatMessage({id:"builder.mediaToolbar.properties"})}))})),Object(p.a)(Object(r.a)(e),"renderDeleteButton",(function(){return H(h.Fragment,null,H("div",{className:y()("divider",e.dividerStyles.className)}),e.renderButton({buttonId:"delete",icon:j.a,iconSize:"2rem",onClick:e.toggleDeleteModal,tooltipContent:e.props.intl.formatMessage({id:"builder.mediaToolbar.delete"})}),H(B.a,{title:e.props.deleteConfirmationModalTitle||H(b.a,{id:"builder.media.delete.modal.title"}),description:e.props.deleteConfirmationModalDescription||H(b.a,{id:"builder.media.delete.modal.description"}),isShowing:!!e.state.isDeleteConfirmationModalShowing,onConfirm:e.deleteMedia,onCancel:e.toggleDeleteModal}))})),Object(p.a)(Object(r.a)(e),"renderSizeButtons",(function(){return H(h.Fragment,null,"hide"!==e.props.possibleSizes.float&&e.renderButton({buttonId:"float",icon:I,rtlIcon:!0,isDisabled:!e.props.possibleSizes.float,isActive:"float"===e.props.size,onClick:e.onClick,tooltipContent:e.props.possibleSizes.float?e.props.intl.formatMessage({id:"builder.mediaToolbar.sizeFloat"}):e.props.intl.formatMessage({id:"builder.mediaToolbar.sizeDisabled"})}),"hide"!==e.props.possibleSizes.standard&&e.renderButton({buttonId:"standard",icon:E,isDisabled:!e.props.possibleSizes.standard,isActive:"standard"===e.props.size,onClick:e.onClick,tooltipContent:e.props.possibleSizes.standard?e.props.intl.formatMessage({id:"builder.mediaToolbar.sizeStandard"}):e.props.intl.formatMessage({id:"builder.mediaToolbar.sizeDisabled"})}),"hide"!==e.props.possibleSizes.wide&&e.renderButton({buttonId:"wide",icon:M,isDisabled:!e.props.possibleSizes.wide,isActive:"wide"===e.props.size,onClick:e.onClick,tooltipContent:e.props.possibleSizes.wide?e.props.intl.formatMessage({id:"builder.mediaToolbar.sizeWide"}):e.props.intl.formatMessage({id:"builder.mediaToolbar.imageDisabledMedium"})}),"hide"!==e.props.possibleSizes.full&&e.renderButton({buttonId:"full",icon:L,isDisabled:!e.props.possibleSizes.full,isActive:"full"===e.props.size,onClick:e.onClick,tooltipContent:e.props.possibleSizes.full?e.props.intl.formatMessage({id:"builder.mediaToolbar.sizeFull"}):e.props.intl.formatMessage({id:"builder.mediaToolbar.imageDisableLarge.alternative"})}))})),Object(p.a)(Object(r.a)(e),"renderButton",(function(e){return"function"===typeof e.onClick&&H(z,Object(i.a)({key:e.buttonId},e))})),Object(p.a)(Object(r.a)(e),"hideAllSizingOptions",(function(){return(!e.props.possibleSizes.standard||"hide"===e.props.possibleSizes.standard)&&(!e.props.possibleSizes.wide||"hide"===e.props.possibleSizes.wide)&&(!e.props.possibleSizes.full||"hide"===e.props.possibleSizes.full)&&(!e.props.possibleSizes.float||"hide"===e.props.possibleSizes.float)})),Object(p.a)(Object(r.a)(e),"onClick",(function(t){var n=t.currentTarget.dataset.buttonId;e.props.updateSize(n)})),Object(p.a)(Object(r.a)(e),"toggleDeleteModal",(function(){e.setState({isDeleteConfirmationModalShowing:!e.state.isDeleteConfirmationModalShowing})})),Object(p.a)(Object(r.a)(e),"deleteMedia",(function(){e.setState({isDeleteConfirmationModalShowing:!1}),e.props.onDeleteClicked()})),e}return Object(o.a)(u,[{key:"render",value:function(){var e=this.hideAllSizingOptions();return H(V,{isCompact:this.props.shouldUseCompactToolbar},this.props.mediaSpecificActions&&this.props.mediaSpecificActions.length>0&&H(m.a.Fragment,null,this.props.mediaSpecificActions.map(this.renderButton),H("div",{className:y()("divider",this.dividerStyles.className)})),"function"===typeof this.props.onEditClicked&&H(m.a.Fragment,null,this.renderEditButton(),H("div",{className:y()("divider",this.dividerStyles.className)})),!e&&H(m.a.Fragment,null,this.renderSizeButtons(),H("div",{className:y()("divider",this.dividerStyles.className)})),this.renderPropertiesButton(),this.props.onDeleteClicked&&this.renderDeleteButton(),this.dividerStyles.styles)}}]),u}(h.PureComponent),X=Object(_.b)(Object(x.c)(Object(G.d)(K))),J=m.a.createElement;function Z(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var q=function(e){Object(l.a)(u,e);var t,n=(t=u,function(){var e,n=Object(c.a)(t);if(Z()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function u(){var e;Object(a.a)(this,u);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),Object(p.a)(Object(r.a)(e),"layoutRef",Object(h.createRef)()),Object(p.a)(Object(r.a)(e),"setupVideoEvents",(function(){if(e.layoutRef.current){var t=e.layoutRef.current.querySelector(".toolbar-wrapper");t&&(e.layoutRef.current.onmouseover=function(){t.classList.add("is-visible")},e.layoutRef.current.onmouseout=function(){t.classList.remove("is-visible")})}})),e}return Object(o.a)(u,[{key:"componentDidMount",value:function(){this.setupVideoEvents()}},{key:"render",value:function(){return J("div",{ref:this.layoutRef,className:d.a.dynamic([["1914491593",[this.props.shouldUseSmallOverlap?"-75%":"-50%",this.props.extraGroup&&this.props.extraGroup.length>0?g.a.gapped("column",v.a.spacing.xxxs):"",this.props.shouldUseSmallOverlap?"75%":"50%"]]])+" with-media-toolbar"},this.props.shouldShowMediaToolbar&&J("div",{className:d.a.dynamic([["1914491593",[this.props.shouldUseSmallOverlap?"-75%":"-50%",this.props.extraGroup&&this.props.extraGroup.length>0?g.a.gapped("column",v.a.spacing.xxxs):"",this.props.shouldUseSmallOverlap?"75%":"50%"]]])+" "+(y()("toolbar-wrapper",{bottom:"bottom"===this.props.toolbarPosition})||"")},J(X,this.props),this.props.extraGroup&&J(V,{isCompact:this.props.shouldUseCompactToolbar},this.props.extraGroup.map((function(e){return J(z,Object(i.a)({key:e.buttonId},e))})))),this.props.children,J(d.a,{id:"1914491593",dynamic:[this.props.shouldUseSmallOverlap?"-75%":"-50%",this.props.extraGroup&&this.props.extraGroup.length>0?g.a.gapped("column",v.a.spacing.xxxs):"",this.props.shouldUseSmallOverlap?"75%":"50%"]},[".with-media-toolbar.__jsx-style-dynamic-selector{position:relative;}",".toolbar-wrapper.__jsx-style-dynamic-selector{position:absolute;left:50%;z-index:5;-webkit-transform:translate(-50%,".concat(this.props.shouldUseSmallOverlap?"-75%":"-50%",");-ms-transform:translate(-50%,").concat(this.props.shouldUseSmallOverlap?"-75%":"-50%",");transform:translate(-50%,").concat(this.props.shouldUseSmallOverlap?"-75%":"-50%",");opacity:0;").concat(this.props.extraGroup&&this.props.extraGroup.length>0?g.a.gapped("column",v.a.spacing.xxxs):"",";}"),".bottom.__jsx-style-dynamic-selector{bottom:0;-webkit-transform:translate(-50%,".concat(this.props.shouldUseSmallOverlap?"75%":"50%",");-ms-transform:translate(-50%,").concat(this.props.shouldUseSmallOverlap?"75%":"50%",");transform:translate(-50%,").concat(this.props.shouldUseSmallOverlap?"75%":"50%",");}"),".with-media-toolbar.__jsx-style-dynamic-selector:hover .toolbar-wrapper.__jsx-style-dynamic-selector{opacity:1;}",".toolbar-wrapper.__jsx-style-dynamic-selector:focus-within{opacity:1;}",".is-visible.__jsx-style-dynamic-selector{opacity:1;}"]))}}]),u}(h.PureComponent);Object(p.a)(q,"defaultProps",{shouldShowMediaToolbar:!0,toolbarPosition:"top"});t.a=q},"/iEh":function(e,t,n){var i=n("lL5k"),a=/^\*\./,o=/\.\*$/,r=/\/.*$/,s=/:(\d+)$/,c=/^(\w+):\/\//,l=/\\\.\\\*/g;function p(e){if(!e||"string"!==typeof e)return null;var t=e.match(c);t=t?t[1]:null;var n=(e=(e=e.replace(c,"")).replace(r,"")).match(s);return n=n?parseInt(n[1],10):null,{protocol:t,url:e=e.replace(s,""),port:n}}e.exports=function(e,t){return Array.isArray(t)||(t=[t]),t.some((function(t){return function(e,t){if(!e||!t)return!1;var n=!t.protocol||!e.protocol||t.protocol===e.protocol,a=!t.port||e.port===t.port,o=t.url.startsWith("."),r=t.url.endsWith("."),s="^";return o&&(s+=".+"),s+=i(t.url).replace(l,"\\..*"),r&&(s+=".+"),s+="$",new RegExp(s).test(e.url)&&n&&a}(p(e),function(e){var t=p(e);return t&&(t.url=t.url.replace(a,"."),t.url=t.url.replace(o,".")),t}(t))}))}},"/pJn":function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return h})),n.d(t,"g",(function(){return m})),n.d(t,"f",(function(){return f}));var i=n("yFcC"),a=n.n(i),o=n("NX3A"),r=n("Z4N4"),s=n("ERkP"),c=n.n(s).a.createElement,l={styles:c(a.a,{id:"3156402794"},[".sc-title.jsx-3156402794,.sc-summary.jsx-3156402794{resize:none;border:none;width:100%;outline:none;display:block;overflow:hidden;background-color:transparent;padding:".concat(o.a.spacing.xxxs,";margin:0 -").concat(o.a.spacing.xxxs,";}")]),className:"jsx-3156402794"},p={styles:c(a.a,{id:"3117693194"},[".sc-title.jsx-3117693194{margin-bottom:".concat(o.a.spacing.xxs,";overflow-wrap:break-word;}")]),className:"jsx-3117693194"},u={styles:c(a.a,{id:"1635155496"},[".sc-summary.jsx-1635155496{margin-top:".concat(o.a.spacing.xxs,";margin-bottom:").concat(o.a.spacing.sm,";overflow-wrap:break-word;}")]),className:"jsx-1635155496"},d=function(e,t){return{styles:c(a.a,{id:"4163326870",dynamic:[t||e.titleColor,o.a.spacing.xxs]},[".sc-divider.__jsx-style-dynamic-selector{width:0.2rem;background-color:".concat(t||e.titleColor,";display:inline-block;margin:0 ").concat(o.a.spacing.xxs,";vertical-align:bottom;position:relative;}")]),className:a.a.dynamic([["4163326870",[t||e.titleColor,o.a.spacing.xxs]]])}},h={styles:c(a.a,{id:"1107801029"},[".sc-byline-container.jsx-1107801029{display:inline;margin:auto 0;position:relative;}",".sc-byline-container.is-empty.jsx-1107801029{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;}"]),className:"jsx-1107801029"},m=function(e,t,n){var i=e.mixins.typography.body.size.baseline({returnStylesAsObject:!0});return c(a.a,{id:"701902817",dynamic:[t||e.titleColor,e.mixins.typography.title.size.stepUp5(),t||e.bodyColor,e.mixins.typography.body.size.stepUp1(),t||e.bodyColor,e.mixins.typography.body.size.stepDown1({weight:"bold"}),n||r.a.hexA(e.bodyColor,.3),n||r.a.hexA(e.bodyColor,.3),parseFloat(i["line-height"])*parseFloat(i["font-size"].replace(/rem$/,"")),e.mixins.typography.body.size.baseline({weight:"bold"}),t||e.bodyColor,n||r.a.hexA(e.bodyColor,.3),o.a.responsiveBreakpoints.medium,e.mixins.typography.title.size.stepUp7(),e.mixins.typography.body.size.stepUp2(),e.mixins.typography.body.size.baseline({weight:"bold"}),o.a.responsiveBreakpoints.large,e.mixins.typography.title.size.stepUp8(),e.mixins.typography.body.size.stepUp3()]},["body.print .sc-title,.sc-title{color:".concat(t||e.titleColor,";").concat(e.mixins.typography.title.size.stepUp5(),";}"),"body.print .sc-summary,.sc-summary{color:".concat(t||e.bodyColor,";").concat(e.mixins.typography.body.size.stepUp1(),";}"),".sc-builder-byline,.sc-viewer-byline{color:".concat(t||e.bodyColor,";}"),".sc-builder-byline,.sc-viewer-byline,body.print .sc-viewer-byline,body.print .sc-published-date{".concat(e.mixins.typography.body.size.stepDown1({weight:"bold"}),";}"),".sc-title::-ms-input-placeholder,.sc-summary::-ms-input-placeholder{color:".concat(n||r.a.hexA(e.bodyColor,.3),";}"),".sc-title::-webkit-input-placeholder,.sc-summary::-webkit-input-placeholder,.sc-builder-byline::-webkit-input-placeholder,.placeholder-dummy{color:".concat(n||r.a.hexA(e.bodyColor,.3),";}"),".sc-title::-moz-placeholder,.sc-summary::-moz-placeholder,.sc-builder-byline::-moz-placeholder,.placeholder-dummy{color:".concat(n||r.a.hexA(e.bodyColor,.3),";}"),".sc-title:-ms-input-placeholder,.sc-summary:-ms-input-placeholder,.sc-builder-byline:-ms-input-placeholder,.placeholder-dummy{color:".concat(n||r.a.hexA(e.bodyColor,.3),";}"),".sc-title::placeholder,.sc-summary::placeholder,.sc-builder-byline::placeholder,.placeholder-dummy{color:".concat(n||r.a.hexA(e.bodyColor,.3),";}"),".sc-divider{height:".concat(parseFloat(i["line-height"])*parseFloat(i["font-size"].replace(/rem$/,"")),"rem;}"),".ql-container.byline-text-editor,.byline-text-editor{".concat(e.mixins.typography.body.size.baseline({weight:"bold"})," color:").concat(t||e.bodyColor,";}"),".placeholder-viewer,.placeholder-builder{color:".concat(n||r.a.hexA(e.bodyColor,.3),";}"),"@media (min-width:".concat(o.a.responsiveBreakpoints.medium,"){.sc-title{").concat(e.mixins.typography.title.size.stepUp7(),";}.sc-summary{").concat(e.mixins.typography.body.size.stepUp2(),";}.sc-builder-byline,.sc-viewer-byline{").concat(e.mixins.typography.body.size.baseline({weight:"bold"}),";}}"),"@media (min-width:".concat(o.a.responsiveBreakpoints.large,"){.sc-title{").concat(e.mixins.typography.title.size.stepUp8(),";}.sc-summary{").concat(e.mixins.typography.body.size.stepUp3(),";}}")])},f={styles:c(a.a,{id:"2033339739"},[".byline-text-editor.ql-container.jsx-2033339739 .ql-editor,.byline-text-editor.ql-container.jsx-2033339739 .ql-editor.ql-blank,.byline-text-editor.ql-container.jsx-2033339739 .ql-editor p{display:inline;}"]),className:"jsx-2033339739"}},"/rJK":function(e,t,n){var i;e.exports=function e(t,n,a){function o(s,c){if(!n[s]){if(!t[s]){if(!c&&"function"==typeof i&&i)return i(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};t[s][0].call(l.exports,(function(e){return o(t[s][1][e]||e)}),l,l.exports,e,t,n,a)}return n[s].exports}for(var r="function"==typeof i&&i,s=0;s<a.length;s++)o(a[s]);return o}({1:[function(e,t,n){(function(i,a,o,r,s,c,l,p,u){"use strict";var d=e("crypto");function h(e,t){return function(e,t){var n;if(void 0===(n="passthrough"!==t.algorithm?d.createHash(t.algorithm):new b).write&&(n.write=n.update,n.end=n.update),v(t,n).dispatch(e),n.update||n.end(""),n.digest)return n.digest("buffer"===t.encoding?void 0:t.encoding);var i=n.read();return"buffer"!==t.encoding?i.toString(t.encoding):i}(e,t=y(e,t))}(n=t.exports=h).sha1=function(e){return h(e)},n.keys=function(e){return h(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},n.MD5=function(e){return h(e,{algorithm:"md5",encoding:"hex"})},n.keysMD5=function(e){return h(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var m=d.getHashes?d.getHashes().slice():["sha1","md5"];m.push("passthrough");var f=["buffer","hex","binary","base64"];function y(e,t){t=t||{};var n={};if(n.algorithm=t.algorithm||"sha1",n.encoding=t.encoding||"hex",n.excludeValues=!!t.excludeValues,n.algorithm=n.algorithm.toLowerCase(),n.encoding=n.encoding.toLowerCase(),n.ignoreUnknown=!0===t.ignoreUnknown,n.respectType=!1!==t.respectType,n.respectFunctionNames=!1!==t.respectFunctionNames,n.respectFunctionProperties=!1!==t.respectFunctionProperties,n.unorderedArrays=!0===t.unorderedArrays,n.unorderedSets=!1!==t.unorderedSets,n.unorderedObjects=!1!==t.unorderedObjects,n.replacer=t.replacer||void 0,n.excludeKeys=t.excludeKeys||void 0,void 0===e)throw new Error("Object argument required.");for(var i=0;i<m.length;++i)m[i].toLowerCase()===n.algorithm.toLowerCase()&&(n.algorithm=m[i]);if(-1===m.indexOf(n.algorithm))throw new Error('Algorithm "'+n.algorithm+'"  not supported. supported values: '+m.join(", "));if(-1===f.indexOf(n.encoding)&&"passthrough"!==n.algorithm)throw new Error('Encoding "'+n.encoding+'"  not supported. supported values: '+f.join(", "));return n}function g(e){if("function"==typeof e)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))}function v(e,t,n){function i(e){return t.update?t.update(e,"utf8"):t.write(e,"utf8")}return n=n||[],{dispatch:function(t){e.replacer&&(t=e.replacer(t));var n=typeof t;return null===t&&(n="null"),this["_"+n](t)},_object:function(t){var a,r=Object.prototype.toString.call(t),s=/\[object (.*)\]/i.exec(r);if(s=(s=s?s[1]:"unknown:["+r+"]").toLowerCase(),0<=(a=n.indexOf(t)))return this.dispatch("[CIRCULAR:"+a+"]");if(n.push(t),void 0!==o&&o.isBuffer&&o.isBuffer(t))return i("buffer:"),i(t);if("object"===s||"function"===s||"asyncfunction"===s){var c=Object.keys(t);e.unorderedObjects&&(c=c.sort()),!1===e.respectType||g(t)||c.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(c=c.filter((function(t){return!e.excludeKeys(t)}))),i("object:"+c.length+":");var l=this;return c.forEach((function(n){l.dispatch(n),i(":"),e.excludeValues||l.dispatch(t[n]),i(",")}))}if(!this["_"+s]){if(e.ignoreUnknown)return i("["+s+"]");throw new Error('Unknown object type "'+s+'"')}this["_"+s](t)},_array:function(t,a){a=void 0!==a?a:!1!==e.unorderedArrays;var o=this;if(i("array:"+t.length+":"),!a||t.length<=1)return t.forEach((function(e){return o.dispatch(e)}));var r=[],s=t.map((function(t){var i=new b,a=n.slice();return v(e,i,a).dispatch(t),r=r.concat(a.slice(n.length)),i.read().toString()}));return n=n.concat(r),s.sort(),this._array(s,!1)},_date:function(e){return i("date:"+e.toJSON())},_symbol:function(e){return i("symbol:"+e.toString())},_error:function(e){return i("error:"+e.toString())},_boolean:function(e){return i("bool:"+e.toString())},_string:function(e){i("string:"+e.length+":"),i(e.toString())},_function:function(t){i("fn:"),g(t)?this.dispatch("[native]"):this.dispatch(t.toString()),!1!==e.respectFunctionNames&&this.dispatch("function-name:"+String(t.name)),e.respectFunctionProperties&&this._object(t)},_number:function(e){return i("number:"+e.toString())},_xml:function(e){return i("xml:"+e.toString())},_null:function(){return i("Null")},_undefined:function(){return i("Undefined")},_regexp:function(e){return i("regex:"+e.toString())},_uint8array:function(e){return i("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint8clampedarray:function(e){return i("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},_int8array:function(e){return i("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint16array:function(e){return i("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_int16array:function(e){return i("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_uint32array:function(e){return i("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_int32array:function(e){return i("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_float32array:function(e){return i("float32array:"),this.dispatch(Array.prototype.slice.call(e))},_float64array:function(e){return i("float64array:"),this.dispatch(Array.prototype.slice.call(e))},_arraybuffer:function(e){return i("arraybuffer:"),this.dispatch(new Uint8Array(e))},_url:function(e){return i("url:"+e.toString())},_map:function(t){i("map:");var n=Array.from(t);return this._array(n,!1!==e.unorderedSets)},_set:function(t){i("set:");var n=Array.from(t);return this._array(n,!1!==e.unorderedSets)},_blob:function(){if(e.ignoreUnknown)return i("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return i("domwindow")},_process:function(){return i("process")},_timer:function(){return i("timer")},_pipe:function(){return i("pipe")},_tcp:function(){return i("tcp")},_udp:function(){return i("udp")},_tty:function(){return i("tty")},_statwatcher:function(){return i("statwatcher")},_securecontext:function(){return i("securecontext")},_connection:function(){return i("connection")},_zlib:function(){return i("zlib")},_context:function(){return i("context")},_nodescript:function(){return i("nodescript")},_httpparser:function(){return i("httpparser")},_dataview:function(){return i("dataview")},_signal:function(){return i("signal")},_fsevent:function(){return i("fsevent")},_tlswrap:function(){return i("tlswrap")}}}function b(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}n.writeToStream=function(e,t,n){return void 0===n&&(n=t,t={}),v(t=y(e,t),n).dispatch(e)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_794fcf4d.js","/")},{buffer:3,crypto:5,lYpoI2:10}],2:[function(e,t,n){(function(e,t,i,a,o,r,s,c,l){!function(e){"use strict";var t="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),i="/".charCodeAt(0),a="0".charCodeAt(0),o="a".charCodeAt(0),r="A".charCodeAt(0),s="-".charCodeAt(0),c="_".charCodeAt(0);function l(e){var t=e.charCodeAt(0);return t===n||t===s?62:t===i||t===c?63:t<a?-1:t<a+10?t-a+26+26:t<r+26?t-r:t<o+26?t-o+26:void 0}e.toByteArray=function(e){var n,i,a,o,r;if(0<e.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var s=e.length;o="="===e.charAt(s-2)?2:"="===e.charAt(s-1)?1:0,r=new t(3*e.length/4-o),i=0<o?e.length-4:e.length;var c=0;function p(e){r[c++]=e}for(n=0;n<i;n+=4,0)p((16711680&(a=l(e.charAt(n))<<18|l(e.charAt(n+1))<<12|l(e.charAt(n+2))<<6|l(e.charAt(n+3))))>>16),p((65280&a)>>8),p(255&a);return 2==o?p(255&(a=l(e.charAt(n))<<2|l(e.charAt(n+1))>>4)):1==o&&(p((a=l(e.charAt(n))<<10|l(e.charAt(n+1))<<4|l(e.charAt(n+2))>>2)>>8&255),p(255&a)),r},e.fromByteArray=function(e){var t,n,i,a,o=e.length%3,r="";function s(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}for(t=0,i=e.length-o;t<i;t+=3)r+=s((a=n=(e[t]<<16)+(e[t+1]<<8)+e[t+2])>>18&63)+s(a>>12&63)+s(a>>6&63)+s(63&a);switch(o){case 1:r+=s((n=e[e.length-1])>>2),r+=s(n<<4&63),r+="==";break;case 2:r+=s((n=(e[e.length-2]<<8)+e[e.length-1])>>10),r+=s(n>>4&63),r+=s(n<<2&63),r+="="}return r}}(void 0===n?this.base64js={}:n)}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:10}],3:[function(e,t,n){(function(t,i,a,o,r,s,c,l,p){var u=e("base64-js"),d=e("ieee754");function a(e,t,n){if(!(this instanceof a))return new a(e,t,n);var i,o,r,s,c,l=typeof e;if("base64"===t&&"string"==l)for(e=(i=e).trim?i.trim():i.replace(/^\s+|\s+$/g,"");e.length%4!=0;)e+="=";if("number"==l)o=R(e);else if("string"==l)o=a.byteLength(e,t);else{if("object"!=l)throw new Error("First argument needs to be a number, array or string.");o=R(e.length)}if(a._useTypedArrays?r=a._augment(new Uint8Array(o)):((r=this).length=o,r._isBuffer=!0),a._useTypedArrays&&"number"==typeof e.byteLength)r._set(e);else if(E(c=e)||a.isBuffer(c)||c&&"object"==typeof c&&"number"==typeof c.length)for(s=0;s<o;s++)a.isBuffer(e)?r[s]=e.readUInt8(s):r[s]=e[s];else if("string"==l)r.write(e,0,t);else if("number"==l&&!a._useTypedArrays&&!n)for(s=0;s<o;s++)r[s]=0;return r}function h(e,t,n,i){return a._charsWritten=A(function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function m(e,t,n){var i="";n=Math.min(e.length,n);for(var a=t;a<n;a++)i+=String.fromCharCode(e[a]);return i}function f(e,t,n,i){i||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=t,"missing offset"),B(t+1<e.length,"Trying to read beyond buffer length"));var a,o=e.length;if(!(o<=t))return n?(a=e[t],t+1<o&&(a|=e[t+1]<<8)):(a=e[t]<<8,t+1<o&&(a|=e[t+1])),a}function y(e,t,n,i){i||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=t,"missing offset"),B(t+3<e.length,"Trying to read beyond buffer length"));var a,o=e.length;if(!(o<=t))return n?(t+2<o&&(a=e[t+2]<<16),t+1<o&&(a|=e[t+1]<<8),a|=e[t],t+3<o&&(a+=e[t+3]<<24>>>0)):(t+1<o&&(a=e[t+1]<<16),t+2<o&&(a|=e[t+2]<<8),t+3<o&&(a|=e[t+3]),a+=e[t]<<24>>>0),a}function g(e,t,n,i){if(i||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=t,"missing offset"),B(t+1<e.length,"Trying to read beyond buffer length")),!(e.length<=t)){var a=f(e,t,n,!0);return 32768&a?-1*(65535-a+1):a}}function v(e,t,n,i){if(i||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=t,"missing offset"),B(t+3<e.length,"Trying to read beyond buffer length")),!(e.length<=t)){var a=y(e,t,n,!0);return 2147483648&a?-1*(4294967295-a+1):a}}function b(e,t,n,i){return i||(B("boolean"==typeof n,"missing or invalid endian"),B(t+3<e.length,"Trying to read beyond buffer length")),d.read(e,t,n,23,4)}function x(e,t,n,i){return i||(B("boolean"==typeof n,"missing or invalid endian"),B(t+7<e.length,"Trying to read beyond buffer length")),d.read(e,t,n,52,8)}function O(e,t,n,i,a){a||(B(null!=t,"missing value"),B("boolean"==typeof i,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+1<e.length,"trying to write beyond buffer length"),L(t,65535));var o=e.length;if(!(o<=n))for(var r=0,s=Math.min(o-n,2);r<s;r++)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function w(e,t,n,i,a){a||(B(null!=t,"missing value"),B("boolean"==typeof i,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+3<e.length,"trying to write beyond buffer length"),L(t,4294967295));var o=e.length;if(!(o<=n))for(var r=0,s=Math.min(o-n,4);r<s;r++)e[n+r]=t>>>8*(i?r:3-r)&255}function j(e,t,n,i,a){a||(B(null!=t,"missing value"),B("boolean"==typeof i,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+1<e.length,"Trying to write beyond buffer length"),G(t,32767,-32768)),e.length<=n||O(e,0<=t?t:65535+t+1,n,i,a)}function C(e,t,n,i,a){a||(B(null!=t,"missing value"),B("boolean"==typeof i,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+3<e.length,"Trying to write beyond buffer length"),G(t,2147483647,-2147483648)),e.length<=n||w(e,0<=t?t:4294967295+t+1,n,i,a)}function k(e,t,n,i,a){a||(B(null!=t,"missing value"),B("boolean"==typeof i,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+3<e.length,"Trying to write beyond buffer length"),_(t,34028234663852886e22,-34028234663852886e22)),e.length<=n||d.write(e,t,n,i,23,4)}function S(e,t,n,i,a){a||(B(null!=t,"missing value"),B("boolean"==typeof i,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+7<e.length,"Trying to write beyond buffer length"),_(t,17976931348623157e292,-17976931348623157e292)),e.length<=n||d.write(e,t,n,i,52,8)}n.Buffer=a,n.SlowBuffer=a,n.INSPECT_MAX_BYTES=50,a.poolSize=8192,a._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(e){return!1}}(),a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.byteLength=function(e,t){var n;switch(e+="",t||"utf8"){case"hex":n=e.length/2;break;case"utf8":case"utf-8":n=T(e).length;break;case"ascii":case"binary":case"raw":n=e.length;break;case"base64":n=M(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;default:throw new Error("Unknown encoding")}return n},a.concat=function(e,t){if(B(E(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new a(0);if(1===e.length)return e[0];var n;if("number"!=typeof t)for(n=t=0;n<e.length;n++)t+=e[n].length;var i=new a(t),o=0;for(n=0;n<e.length;n++){var r=e[n];r.copy(i,o),o+=r.length}return i},a.prototype.write=function(e,t,n,i){if(isFinite(t))isFinite(n)||(i=n,n=void 0);else{var o=i;i=t,t=n,n=o}t=Number(t)||0;var r,s,c,l,p,u=this.length-t;switch((!n||u<(n=Number(n)))&&(n=u),i=String(i||"utf8").toLowerCase()){case"hex":r=function(e,t,n,i){n=Number(n)||0;var o=e.length-n;(!i||o<(i=Number(i)))&&(i=o);var r=t.length;B(r%2==0,"Invalid hex string"),r/2<i&&(i=r/2);for(var s=0;s<i;s++){var c=parseInt(t.substr(2*s,2),16);B(!isNaN(c),"Invalid hex string"),e[n+s]=c}return a._charsWritten=2*s,s}(this,e,t,n);break;case"utf8":case"utf-8":l=t,p=n,r=a._charsWritten=A(T(e),this,l,p);break;case"ascii":case"binary":r=h(this,e,t,n);break;case"base64":s=t,c=n,r=a._charsWritten=A(M(e),this,s,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=function(e,t,n,i){return a._charsWritten=A(function(e){for(var t,n,i,a=[],o=0;o<e.length;o++)n=(t=e.charCodeAt(o))>>8,i=t%256,a.push(i),a.push(n);return a}(t),e,n,i)}(this,e,t,n);break;default:throw new Error("Unknown encoding")}return r},a.prototype.toString=function(e,t,n){var i,a,o,r,s=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,(n=void 0!==n?Number(n):n=s.length)===t)return"";switch(e){case"hex":i=function(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||i<n)&&(n=i);for(var a="",o=t;o<n;o++)a+=D(e[o]);return a}(s,t,n);break;case"utf8":case"utf-8":i=function(e,t,n){var i="",a="";n=Math.min(e.length,n);for(var o=t;o<n;o++)e[o]<=127?(i+=N(a)+String.fromCharCode(e[o]),a=""):a+="%"+e[o].toString(16);return i+N(a)}(s,t,n);break;case"ascii":case"binary":i=m(s,t,n);break;case"base64":a=s,r=n,i=0===(o=t)&&r===a.length?u.fromByteArray(a):u.fromByteArray(a.slice(o,r));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=function(e,t,n){for(var i=e.slice(t,n),a="",o=0;o<i.length;o+=2)a+=String.fromCharCode(i[o]+256*i[o+1]);return a}(s,t,n);break;default:throw new Error("Unknown encoding")}return i},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.copy=function(e,t,n,i){if(n=n||0,i||0===i||(i=this.length),t=t||0,i!==n&&0!==e.length&&0!==this.length){B(n<=i,"sourceEnd < sourceStart"),B(0<=t&&t<e.length,"targetStart out of bounds"),B(0<=n&&n<this.length,"sourceStart out of bounds"),B(0<=i&&i<=this.length,"sourceEnd out of bounds"),i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o=i-n;if(o<100||!a._useTypedArrays)for(var r=0;r<o;r++)e[r+t]=this[r+n];else e._set(this.subarray(n,n+o),t)}},a.prototype.slice=function(e,t){var n=this.length;if(e=P(e,n,0),t=P(t,n,n),a._useTypedArrays)return a._augment(this.subarray(e,t));for(var i=t-e,o=new a(i,void 0,!0),r=0;r<i;r++)o[r]=this[r+e];return o},a.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},a.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},a.prototype.readUInt8=function(e,t){if(t||(B(null!=e,"missing offset"),B(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return this[e]},a.prototype.readUInt16LE=function(e,t){return f(this,e,!0,t)},a.prototype.readUInt16BE=function(e,t){return f(this,e,!1,t)},a.prototype.readUInt32LE=function(e,t){return y(this,e,!0,t)},a.prototype.readUInt32BE=function(e,t){return y(this,e,!1,t)},a.prototype.readInt8=function(e,t){if(t||(B(null!=e,"missing offset"),B(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return 128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){return g(this,e,!0,t)},a.prototype.readInt16BE=function(e,t){return g(this,e,!1,t)},a.prototype.readInt32LE=function(e,t){return v(this,e,!0,t)},a.prototype.readInt32BE=function(e,t){return v(this,e,!1,t)},a.prototype.readFloatLE=function(e,t){return b(this,e,!0,t)},a.prototype.readFloatBE=function(e,t){return b(this,e,!1,t)},a.prototype.readDoubleLE=function(e,t){return x(this,e,!0,t)},a.prototype.readDoubleBE=function(e,t){return x(this,e,!1,t)},a.prototype.writeUInt8=function(e,t,n){n||(B(null!=e,"missing value"),B(null!=t,"missing offset"),B(t<this.length,"trying to write beyond buffer length"),L(e,255)),t>=this.length||(this[t]=e)},a.prototype.writeUInt16LE=function(e,t,n){O(this,e,t,!0,n)},a.prototype.writeUInt16BE=function(e,t,n){O(this,e,t,!1,n)},a.prototype.writeUInt32LE=function(e,t,n){w(this,e,t,!0,n)},a.prototype.writeUInt32BE=function(e,t,n){w(this,e,t,!1,n)},a.prototype.writeInt8=function(e,t,n){n||(B(null!=e,"missing value"),B(null!=t,"missing offset"),B(t<this.length,"Trying to write beyond buffer length"),G(e,127,-128)),t>=this.length||(0<=e?this.writeUInt8(e,t,n):this.writeUInt8(255+e+1,t,n))},a.prototype.writeInt16LE=function(e,t,n){j(this,e,t,!0,n)},a.prototype.writeInt16BE=function(e,t,n){j(this,e,t,!1,n)},a.prototype.writeInt32LE=function(e,t,n){C(this,e,t,!0,n)},a.prototype.writeInt32BE=function(e,t,n){C(this,e,t,!1,n)},a.prototype.writeFloatLE=function(e,t,n){k(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){k(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){S(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){S(this,e,t,!1,n)},a.prototype.fill=function(e,t,n){if(e=e||0,t=t||0,n=n||this.length,"string"==typeof e&&(e=e.charCodeAt(0)),B("number"==typeof e&&!isNaN(e),"value is not a number"),B(t<=n,"end < start"),n!==t&&0!==this.length){B(0<=t&&t<this.length,"start out of bounds"),B(0<=n&&n<=this.length,"end out of bounds");for(var i=t;i<n;i++)this[i]=e}},a.prototype.inspect=function(){for(var e=[],t=this.length,i=0;i<t;i++)if(e[i]=D(this[i]),i===n.INSPECT_MAX_BYTES){e[i+1]="...";break}return"<Buffer "+e.join(" ")+">"},a.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new Error("Buffer.toArrayBuffer not supported in this browser");if(a._useTypedArrays)return new a(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;t<n;t+=1)e[t]=this[t];return e.buffer};var I=a.prototype;function P(e,t,n){return"number"!=typeof e?n:t<=(e=~~e)?t:0<=e||0<=(e+=t)?e:0}function R(e){return(e=~~Math.ceil(+e))<0?0:e}function E(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function D(e){return e<16?"0"+e.toString(16):e.toString(16)}function T(e){for(var t=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<=127)t.push(e.charCodeAt(n));else{var a=n;55296<=i&&i<=57343&&n++;for(var o=encodeURIComponent(e.slice(a,n+1)).substr(1).split("%"),r=0;r<o.length;r++)t.push(parseInt(o[r],16))}}return t}function M(e){return u.toByteArray(e)}function A(e,t,n,i){for(var a=0;a<i&&!(a+n>=t.length||a>=e.length);a++)t[a+n]=e[a];return a}function N(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}function L(e,t){B("number"==typeof e,"cannot write a non-number as a number"),B(0<=e,"specified a negative value for writing an unsigned value"),B(e<=t,"value is larger than maximum value for type"),B(Math.floor(e)===e,"value has a fractional component")}function G(e,t,n){B("number"==typeof e,"cannot write a non-number as a number"),B(e<=t,"value larger than maximum allowed value"),B(n<=e,"value smaller than minimum allowed value"),B(Math.floor(e)===e,"value has a fractional component")}function _(e,t,n){B("number"==typeof e,"cannot write a non-number as a number"),B(e<=t,"value larger than maximum allowed value"),B(n<=e,"value smaller than minimum allowed value")}function B(e,t){if(!e)throw new Error(t||"Failed assertion")}a._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=I.get,e.set=I.set,e.write=I.write,e.toString=I.toString,e.toLocaleString=I.toString,e.toJSON=I.toJSON,e.copy=I.copy,e.slice=I.slice,e.readUInt8=I.readUInt8,e.readUInt16LE=I.readUInt16LE,e.readUInt16BE=I.readUInt16BE,e.readUInt32LE=I.readUInt32LE,e.readUInt32BE=I.readUInt32BE,e.readInt8=I.readInt8,e.readInt16LE=I.readInt16LE,e.readInt16BE=I.readInt16BE,e.readInt32LE=I.readInt32LE,e.readInt32BE=I.readInt32BE,e.readFloatLE=I.readFloatLE,e.readFloatBE=I.readFloatBE,e.readDoubleLE=I.readDoubleLE,e.readDoubleBE=I.readDoubleBE,e.writeUInt8=I.writeUInt8,e.writeUInt16LE=I.writeUInt16LE,e.writeUInt16BE=I.writeUInt16BE,e.writeUInt32LE=I.writeUInt32LE,e.writeUInt32BE=I.writeUInt32BE,e.writeInt8=I.writeInt8,e.writeInt16LE=I.writeInt16LE,e.writeInt16BE=I.writeInt16BE,e.writeInt32LE=I.writeInt32LE,e.writeInt32BE=I.writeInt32BE,e.writeFloatLE=I.writeFloatLE,e.writeFloatBE=I.writeFloatBE,e.writeDoubleLE=I.writeDoubleLE,e.writeDoubleBE=I.writeDoubleBE,e.fill=I.fill,e.inspect=I.inspect,e.toArrayBuffer=I.toArrayBuffer,e}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:11,lYpoI2:10}],4:[function(e,t,n){(function(n,i,a,o,r,s,c,l,p){var u=new(a=e("buffer").Buffer)(4);u.fill(0),t.exports={hash:function(e,t,n,i){return a.isBuffer(e)||(e=new a(e)),function(e,t,n){for(var i=new a(t),o=n?i.writeInt32BE:i.writeInt32LE,r=0;r<e.length;r++)o.call(i,e[r],4*r,!0);return i}(t(function(e,t){if(e.length%4!=0){var n=e.length+(4-e.length%4);e=a.concat([e,u],n)}for(var i=[],o=t?e.readInt32BE:e.readInt32LE,r=0;r<e.length;r+=4)i.push(o.call(e,r));return i}(e,i),8*e.length),n,i)}}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],5:[function(e,t,n){(function(t,i,a,o,r,s,c,l,p){a=e("buffer").Buffer;var u=e("./sha"),d=e("./sha256"),h=e("./rng"),m={sha1:u,sha256:d,md5:e("./md5")},f=64,y=new a(f);function g(e,t){var n=m[e=e||"sha1"],i=[];return n||v("algorithm:",e,"is not yet supported"),{update:function(e){return a.isBuffer(e)||(e=new a(e)),i.push(e),e.length,this},digest:function(e){var o=a.concat(i),r=t?function(e,t,n){a.isBuffer(t)||(t=new a(t)),a.isBuffer(n)||(n=new a(n)),t.length>f?t=e(t):t.length<f&&(t=a.concat([t,y],f));for(var i=new a(f),o=new a(f),r=0;r<f;r++)i[r]=54^t[r],o[r]=92^t[r];var s=e(a.concat([i,n]));return e(a.concat([o,s]))}(n,t,o):n(o);return i=null,e?r.toString(e):r}}}function v(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}y.fill(0),n.createHash=function(e){return g(e)},n.createHmac=function(e,t){return g(e,t)},n.randomBytes=function(e,t){if(!t||!t.call)return new a(h(e));try{t.call(this,void 0,new a(h(e)))}catch(e){t(e)}},function(e,t){for(var n in e)t(e[n])}(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],(function(e){n[e]=function(){v("sorry,",e,"is not implemented yet")}}))}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:10}],6:[function(e,t,n){(function(n,i,a,o,r,s,c,l,p){var u=e("./helpers");function d(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,i=-271733879,a=-1732584194,o=271733878,r=0;r<e.length;r+=16){var s=n,c=i,l=a,p=o;n=m(n,i,a,o,e[r+0],7,-680876936),o=m(o,n,i,a,e[r+1],12,-389564586),a=m(a,o,n,i,e[r+2],17,606105819),i=m(i,a,o,n,e[r+3],22,-1044525330),n=m(n,i,a,o,e[r+4],7,-176418897),o=m(o,n,i,a,e[r+5],12,1200080426),a=m(a,o,n,i,e[r+6],17,-1473231341),i=m(i,a,o,n,e[r+7],22,-45705983),n=m(n,i,a,o,e[r+8],7,1770035416),o=m(o,n,i,a,e[r+9],12,-1958414417),a=m(a,o,n,i,e[r+10],17,-42063),i=m(i,a,o,n,e[r+11],22,-1990404162),n=m(n,i,a,o,e[r+12],7,1804603682),o=m(o,n,i,a,e[r+13],12,-40341101),a=m(a,o,n,i,e[r+14],17,-1502002290),n=f(n,i=m(i,a,o,n,e[r+15],22,1236535329),a,o,e[r+1],5,-165796510),o=f(o,n,i,a,e[r+6],9,-1069501632),a=f(a,o,n,i,e[r+11],14,643717713),i=f(i,a,o,n,e[r+0],20,-373897302),n=f(n,i,a,o,e[r+5],5,-701558691),o=f(o,n,i,a,e[r+10],9,38016083),a=f(a,o,n,i,e[r+15],14,-660478335),i=f(i,a,o,n,e[r+4],20,-405537848),n=f(n,i,a,o,e[r+9],5,568446438),o=f(o,n,i,a,e[r+14],9,-1019803690),a=f(a,o,n,i,e[r+3],14,-187363961),i=f(i,a,o,n,e[r+8],20,1163531501),n=f(n,i,a,o,e[r+13],5,-1444681467),o=f(o,n,i,a,e[r+2],9,-51403784),a=f(a,o,n,i,e[r+7],14,1735328473),n=y(n,i=f(i,a,o,n,e[r+12],20,-1926607734),a,o,e[r+5],4,-378558),o=y(o,n,i,a,e[r+8],11,-2022574463),a=y(a,o,n,i,e[r+11],16,1839030562),i=y(i,a,o,n,e[r+14],23,-35309556),n=y(n,i,a,o,e[r+1],4,-1530992060),o=y(o,n,i,a,e[r+4],11,1272893353),a=y(a,o,n,i,e[r+7],16,-155497632),i=y(i,a,o,n,e[r+10],23,-1094730640),n=y(n,i,a,o,e[r+13],4,681279174),o=y(o,n,i,a,e[r+0],11,-358537222),a=y(a,o,n,i,e[r+3],16,-722521979),i=y(i,a,o,n,e[r+6],23,76029189),n=y(n,i,a,o,e[r+9],4,-640364487),o=y(o,n,i,a,e[r+12],11,-421815835),a=y(a,o,n,i,e[r+15],16,530742520),n=g(n,i=y(i,a,o,n,e[r+2],23,-995338651),a,o,e[r+0],6,-198630844),o=g(o,n,i,a,e[r+7],10,1126891415),a=g(a,o,n,i,e[r+14],15,-1416354905),i=g(i,a,o,n,e[r+5],21,-57434055),n=g(n,i,a,o,e[r+12],6,1700485571),o=g(o,n,i,a,e[r+3],10,-1894986606),a=g(a,o,n,i,e[r+10],15,-1051523),i=g(i,a,o,n,e[r+1],21,-2054922799),n=g(n,i,a,o,e[r+8],6,1873313359),o=g(o,n,i,a,e[r+15],10,-30611744),a=g(a,o,n,i,e[r+6],15,-1560198380),i=g(i,a,o,n,e[r+13],21,1309151649),n=g(n,i,a,o,e[r+4],6,-145523070),o=g(o,n,i,a,e[r+11],10,-1120210379),a=g(a,o,n,i,e[r+2],15,718787259),i=g(i,a,o,n,e[r+9],21,-343485551),n=v(n,s),i=v(i,c),a=v(a,l),o=v(o,p)}return Array(n,i,a,o)}function h(e,t,n,i,a,o){return v((r=v(v(t,e),v(i,o)))<<(s=a)|r>>>32-s,n);var r,s}function m(e,t,n,i,a,o,r){return h(t&n|~t&i,e,t,a,o,r)}function f(e,t,n,i,a,o,r){return h(t&i|n&~i,e,t,a,o,r)}function y(e,t,n,i,a,o,r){return h(t^n^i,e,t,a,o,r)}function g(e,t,n,i,a,o,r){return h(n^(t|~i),e,t,a,o,r)}function v(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}t.exports=function(e){return u.hash(e,d,16)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],7:[function(e,t,n){(function(e,n,i,a,o,r,s,c,l){var p;p=function(e){for(var t,n=new Array(e),i=0;i<e;i++)0==(3&i)&&(t=4294967296*Math.random()),n[i]=t>>>((3&i)<<3)&255;return n},t.exports=p}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],8:[function(e,t,n){(function(n,i,a,o,r,s,c,l,p){var u=e("./helpers");function d(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var n,i=Array(80),a=1732584193,o=-271733879,r=-1732584194,s=271733878,c=-1009589776,l=0;l<e.length;l+=16){for(var p=a,u=o,d=r,y=s,g=c,v=0;v<80;v++){i[v]=v<16?e[l+v]:f(i[v-3]^i[v-8]^i[v-14]^i[v-16],1);var b=m(m(f(a,5),h(v,o,r,s)),m(m(c,i[v]),(n=v)<20?1518500249:n<40?1859775393:n<60?-1894007588:-899497514));c=s,s=r,r=f(o,30),o=a,a=b}a=m(a,p),o=m(o,u),r=m(r,d),s=m(s,y),c=m(c,g)}return Array(a,o,r,s,c)}function h(e,t,n,i){return e<20?t&n|~t&i:!(e<40)&&e<60?t&n|t&i|n&i:t^n^i}function m(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function f(e,t){return e<<t|e>>>32-t}t.exports=function(e){return u.hash(e,d,20,!0)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],9:[function(e,t,n){(function(n,i,a,o,r,s,c,l,p){function u(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function d(e,t){return e>>>t|e<<32-t}function h(e,t){return e>>>t}function m(e,t){var n,i,a,o,r,s,c,l,p,m,f,y,g,v,b,x,O,w,j=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),C=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),k=new Array(64);e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var S=0;S<e.length;S+=16){n=C[0],i=C[1],a=C[2],o=C[3],r=C[4],s=C[5],c=C[6],l=C[7];for(var I=0;I<64;I++)k[I]=I<16?e[I+S]:u(u(u(d(w=k[I-2],17)^d(w,19)^h(w,10),k[I-7]),d(O=k[I-15],7)^d(O,18)^h(O,3)),k[I-16]),p=u(u(u(u(l,d(x=r,6)^d(x,11)^d(x,25)),(b=r)&s^~b&c),j[I]),k[I]),m=u(d(v=n,2)^d(v,13)^d(v,22),(f=n)&(y=i)^f&(g=a)^y&g),l=c,c=s,s=r,r=u(o,p),o=a,a=i,i=n,n=u(p,m);C[0]=u(n,C[0]),C[1]=u(i,C[1]),C[2]=u(a,C[2]),C[3]=u(o,C[3]),C[4]=u(r,C[4]),C[5]=u(s,C[5]),C[6]=u(c,C[6]),C[7]=u(l,C[7])}return C}var f=e("./helpers");t.exports=function(e){return f.hash(e,m,32,!0)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],10:[function(e,t,n){(function(e,n,i,a,o,r,s,c,l){function p(){}(e=t.exports={}).nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",(function(e){var t=e.source;t!==window&&null!==t||"process-tick"!==e.data||(e.stopPropagation(),0<n.length&&n.shift()())}),!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:10}],11:[function(e,t,n){(function(e,t,i,a,o,r,s,c,l){n.read=function(e,t,n,i,a){var o,r,s=8*a-i-1,c=(1<<s)-1,l=c>>1,p=-7,u=n?a-1:0,d=n?-1:1,h=e[t+u];for(u+=d,o=h&(1<<-p)-1,h>>=-p,p+=s;0<p;o=256*o+e[t+u],u+=d,p-=8);for(r=o&(1<<-p)-1,o>>=-p,p+=i;0<p;r=256*r+e[t+u],u+=d,p-=8);if(0===o)o=1-l;else{if(o===c)return r?NaN:1/0*(h?-1:1);r+=Math.pow(2,i),o-=l}return(h?-1:1)*r*Math.pow(2,o-i)},n.write=function(e,t,n,i,a,o){var r,s,c,l=8*o-a-1,p=(1<<l)-1,u=p>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:o-1,m=i?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,r=p):(r=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-r))<1&&(r--,c*=2),2<=(t+=1<=r+u?d/c:d*Math.pow(2,1-u))*c&&(r++,c/=2),p<=r+u?(s=0,r=p):1<=r+u?(s=(t*c-1)*Math.pow(2,a),r+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,a),r=0));8<=a;e[n+h]=255&s,h+=m,s/=256,a-=8);for(r=r<<a|s,l+=a;0<l;e[n+h]=255&r,h+=m,r/=256,l-=8);e[n+h-m]|=128*f}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/ieee754/index.js","/node_modules/ieee754")},{buffer:3,lYpoI2:10}]},{},[1])(1)},"/t8o":function(e,t,n){"use strict";var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("pWxA"),s=n("K/z8"),c=n("sRHE"),l=n("8K1b"),p=n("zjfJ"),u=n("yFcC"),d=n.n(u),h=n("ERkP"),m=n.n(h),f=n("YQpL"),y=n("O94r"),g=n.n(y),v=n("WXRn"),b=n("NX3A"),x=n("uoXB"),O=n("AtlR"),w=n("Z4N4");function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var C=function(e){Object(l.a)(i,e);var t,n=(t=i,function(){var e,n=Object(c.a)(t);if(j()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function i(e){Object(a.a)(this,i);return n.call(this,e,{iconName:"reset-thin",path:"M32.02 16a13.027 13.027 0 0 1-17.865 12.09l.389-.967a12.068 12.068 0 1 0-6.673-6.73l5.26-5.261.737.736L7.5 22.236l-6.368-6.368.736-.736 4.7 4.7A13.016 13.016 0 1 1 32.02 16z",viewBox:"0 0 36 32"})}return i}(n("MEC2").a),k=n("eCu0"),S=m.a.createElement,I=Object(k.c)((function(e){var t=w.a.hexA(b.a.color.black,e.isBold?.7:.3),n=w.a.hexA(b.a.color.black,e.isBold?1:.6),i={styles:S(d.a,{id:"1168065346",dynamic:[w.a.hexA(b.a.color.black,.15),e.isTouchDevice?n:t,b.a.color.white,e.dimension,e.dimension,n,w.a.gapped("column",b.a.spacing.xxxs)]},[".overlay-button.__jsx-style-dynamic-selector{-webkit-transition:background-color 0.15s;transition:background-color 0.15s;-webkit-filter:drop-shadow(0px 1px 4px ".concat(w.a.hexA(b.a.color.black,.15),");filter:drop-shadow(0px 1px 4px ").concat(w.a.hexA(b.a.color.black,.15),");background-color:").concat(e.isTouchDevice?n:t,";color:").concat(b.a.color.white,";line-height:0;height:").concat(e.dimension,";width:").concat(e.dimension,";border-radius:50%;}"),".overlay-button.is-activated.__jsx-style-dynamic-selector,button.overlay-button.__jsx-style-dynamic-selector:hover,.user-is-tabbing button.overlay-button.__jsx-style-dynamic-selector:focus{background-color:".concat(n,";}"),"body:not(.user-is-tabbing) button.overlay-button.__jsx-style-dynamic-selector:focus{outline:none;}",".inner-container.__jsx-style-dynamic-selector{height:100%;width:100%;".concat(w.a.gapped("column",b.a.spacing.xxxs),";}")]),className:d.a.dynamic([["1168065346",[w.a.hexA(b.a.color.black,.15),e.isTouchDevice?n:t,b.a.color.white,e.dimension,e.dimension,n,w.a.gapped("column",b.a.spacing.xxxs)]]])},a=g()("overlay-button",i.className,{"is-activated":e.isActivated}),o=S(m.a.Fragment,null,S("div",{className:g()("inner-container",i.className)},e.children),i.styles);return"function"===typeof e.onClick?S("button",{className:a,onClick:e.onClick,"aria-label":e.ariaLabel},o):S("div",{className:a},o)})),P=m.a.createElement;function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var E=function(e){Object(l.a)(u,e);var t,n=(t=u,function(){var e,n=Object(c.a)(t);if(R()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function u(e){var t;return Object(a.a)(this,u),t=n.call(this,e),Object(p.a)(Object(r.a)(t),"activate",(function(){t.setState({isActivated:!0}),t.finishPulseAnimation()})),Object(p.a)(Object(r.a)(t),"deactivate",(function(){t.setState({isActivated:!1}),t.finishPulseAnimation()})),Object(p.a)(Object(r.a)(t),"onButtonPulseStart",(function(){t.setState({isPulsing:!0})})),Object(p.a)(Object(r.a)(t),"finishPulseAnimation",(function(){t.state.isPulsing&&(t.setState({isPulsing:!1}),"function"===typeof t.props.onPulseComplete&&t.props.onPulseComplete())})),t.state={isActivated:!1,isPulsing:!1},t}return Object(o.a)(u,[{key:"render",value:function(){var e={color:b.a.color.white,height:this.props.isViewportMaxWidth("small")?"2rem":"4rem",width:"auto"},t=Object(v.b)(),n=t?x.a:O.a,a=t?O.a:x.a,o=this.props.isViewportMaxWidth("medium")?"0.3rem":"0.6rem",r=w.a.hexA(b.a.color.white,this.state.isActivated?1:.75);return P("div",{className:d.a.dynamic([["4068625955",[this.props.mediaOffset||"10rem",this.props.mediaOffset||"10rem",this.props.offsetBottom,this.props.offsetTop,this.props.offsetTop,this.props.offsetTop,this.props.offsetTop,b.a.spacing.sm,o,r,o,w.a.hexA(b.a.color.white,1),o,w.a.hexA(b.a.color.white,0),o,w.a.hexA(b.a.color.white,0),b.a.responsiveBreakpoints.medium,b.a.spacing.xxxs,b.a.spacing.xxxs,b.a.responsiveBreakpoints.large,b.a.spacing.xxs,b.a.spacing.xxs,b.a.responsiveBreakpoints.extraLarge,b.a.spacing.xxs,b.a.spacing.xxs]]])+" "+(g()("arrow-container-outer","previous"===this.props.direction?"start":"end",{"click-through":this.props.canClickThrough})||"")},P("button",{"aria-label":this.props.intl.formatMessage({id:"component.immersive.slideshow.navArrow.".concat(this.props.direction)}),onClick:this.props.onClick,onMouseEnter:this.activate,onMouseLeave:this.deactivate,onAnimationStart:this.onButtonPulseStart,onAnimationEnd:this.finishPulseAnimation,className:d.a.dynamic([["4068625955",[this.props.mediaOffset||"10rem",this.props.mediaOffset||"10rem",this.props.offsetBottom,this.props.offsetTop,this.props.offsetTop,this.props.offsetTop,this.props.offsetTop,b.a.spacing.sm,o,r,o,w.a.hexA(b.a.color.white,1),o,w.a.hexA(b.a.color.white,0),o,w.a.hexA(b.a.color.white,0),b.a.responsiveBreakpoints.medium,b.a.spacing.xxxs,b.a.spacing.xxxs,b.a.responsiveBreakpoints.large,b.a.spacing.xxs,b.a.spacing.xxs,b.a.responsiveBreakpoints.extraLarge,b.a.spacing.xxs,b.a.spacing.xxs]]])+" "+(g()("arrow-container-inner","previous"===this.props.direction?"start":"end",{"fit-content":this.props.shouldFitContentHeight},{"click-through":this.props.canClickThrough})||"")},P("div",{className:d.a.dynamic([["4068625955",[this.props.mediaOffset||"10rem",this.props.mediaOffset||"10rem",this.props.offsetBottom,this.props.offsetTop,this.props.offsetTop,this.props.offsetTop,this.props.offsetTop,b.a.spacing.sm,o,r,o,w.a.hexA(b.a.color.white,1),o,w.a.hexA(b.a.color.white,0),o,w.a.hexA(b.a.color.white,0),b.a.responsiveBreakpoints.medium,b.a.spacing.xxxs,b.a.spacing.xxxs,b.a.responsiveBreakpoints.large,b.a.spacing.xxs,b.a.spacing.xxs,b.a.responsiveBreakpoints.extraLarge,b.a.spacing.xxs,b.a.spacing.xxs]]])+" "+(g()("button-container",{"can-dock":this.props.isDockable,pulse:this.props.shouldPulse||this.state.isPulsing})||"")},P(I,{isActivated:this.state.isActivated,isBold:this.props.isDockable,dimension:this.props.isViewportMaxWidth("small")?"3.2rem":"6.4rem"},"beginning"===this.props.direction?P(C,Object(i.a)({},e,{height:this.props.isViewportMaxWidth("small")?b.a.spacing.xxs:b.a.spacing.sm,width:"auto"})):"next"===this.props.direction?P(a,Object(i.a)({},e,{className:d.a.dynamic([["4068625955",[this.props.mediaOffset||"10rem",this.props.mediaOffset||"10rem",this.props.offsetBottom,this.props.offsetTop,this.props.offsetTop,this.props.offsetTop,this.props.offsetTop,b.a.spacing.sm,o,r,o,w.a.hexA(b.a.color.white,1),o,w.a.hexA(b.a.color.white,0),o,w.a.hexA(b.a.color.white,0),b.a.responsiveBreakpoints.medium,b.a.spacing.xxxs,b.a.spacing.xxxs,b.a.responsiveBreakpoints.large,b.a.spacing.xxs,b.a.spacing.xxs,b.a.responsiveBreakpoints.extraLarge,b.a.spacing.xxs,b.a.spacing.xxs]]])+" "+(e&&null!=e.className&&e.className||"")})):P(n,Object(i.a)({},e,{className:d.a.dynamic([["4068625955",[this.props.mediaOffset||"10rem",this.props.mediaOffset||"10rem",this.props.offsetBottom,this.props.offsetTop,this.props.offsetTop,this.props.offsetTop,this.props.offsetTop,b.a.spacing.sm,o,r,o,w.a.hexA(b.a.color.white,1),o,w.a.hexA(b.a.color.white,0),o,w.a.hexA(b.a.color.white,0),b.a.responsiveBreakpoints.medium,b.a.spacing.xxxs,b.a.spacing.xxxs,b.a.responsiveBreakpoints.large,b.a.spacing.xxs,b.a.spacing.xxs,b.a.responsiveBreakpoints.extraLarge,b.a.spacing.xxs,b.a.spacing.xxs]]])+" "+(e&&null!=e.className&&e.className||"")}))))),P(d.a,{id:"4068625955",dynamic:[this.props.mediaOffset||"10rem",this.props.mediaOffset||"10rem",this.props.offsetBottom,this.props.offsetTop,this.props.offsetTop,this.props.offsetTop,this.props.offsetTop,b.a.spacing.sm,o,r,o,w.a.hexA(b.a.color.white,1),o,w.a.hexA(b.a.color.white,0),o,w.a.hexA(b.a.color.white,0),b.a.responsiveBreakpoints.medium,b.a.spacing.xxxs,b.a.spacing.xxxs,b.a.responsiveBreakpoints.large,b.a.spacing.xxs,b.a.spacing.xxs,b.a.responsiveBreakpoints.extraLarge,b.a.spacing.xxs,b.a.spacing.xxs]},[".arrow-container-outer.__jsx-style-dynamic-selector{position:absolute;top:0;bottom:0;}",".arrow-container-outer.click-through.__jsx-style-dynamic-selector{pointer-events:none;}","html:not([dir='rtl']) .arrow-container-outer.start.__jsx-style-dynamic-selector{left:0;}","html[dir='rtl'] .arrow-container-outer.start.__jsx-style-dynamic-selector{right:0;}","html:not([dir='rtl']) .arrow-container-outer.end.__jsx-style-dynamic-selector{right:0;}","html[dir='rtl'] .arrow-container-outer.end.__jsx-style-dynamic-selector{left:0;}",".arrow-container-inner.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;--top-spacing:".concat(this.props.mediaOffset||"10rem",";--bottom-spacing:calc( ").concat(this.props.mediaOffset||"10rem"," + ").concat(this.props.offsetBottom," );--button-height:calc( 100vh - ").concat(this.props.offsetTop," - var(--top-spacing) - var(--bottom-spacing) );height:var(--button-height);margin-top:var(--top-spacing);top:calc(var(--top-spacing) + ").concat(this.props.offsetTop,");margin-bottom:var(--bottom-spacing);position:-webkit-sticky;position:sticky;z-index:2;-webkit-tap-highlight-color:transparent;}"),".arrow-container-inner.fit-content.__jsx-style-dynamic-selector{--button-height:6.4rem;--top-spacing:calc((50vh - var(--button-height) / 2) - ".concat(this.props.offsetTop,");--bottom-spacing:calc(50vh - var(--button-height) / 2);height:var(--button-height);margin-top:var(--top-spacing);margin-bottom:var(--bottom-spacing);}"),".arrow-container-inner.click-through.__jsx-style-dynamic-selector{pointer-events:auto;}","body:not(.user-is-tabbing) .arrow-container-inner.__jsx-style-dynamic-selector:focus{outline:none;}","body:not(.user-is-tabbing) .arrow-container-inner.__jsx-style-dynamic-selector::-moz-focus-inner{border:0;}",".button-container.__jsx-style-dynamic-selector{-webkit-transition:-webkit-transform 0.15s;-webkit-transition:transform 0.15s;transition:transform 0.15s;}",".button-container.can-dock.__jsx-style-dynamic-selector{position:-webkit-sticky;position:sticky;top:calc(".concat(this.props.offsetTop," + ").concat(b.a.spacing.sm,");border-radius:50%;}"),".button-container.can-dock.__jsx-style-dynamic-selector::after{content:'';height:100%;width:100%;position:absolute;top:0;left:0;border-radius:50%;box-shadow:0 0 0 ".concat(o," ").concat(r,";}"),"@-webkit-keyframes pulse-__jsx-style-dynamic-selector{0%{box-shadow:0 0 0 ".concat(o," ").concat(w.a.hexA(b.a.color.white,1),";}70%{box-shadow:0 0 0 calc(").concat(o," + 2.5rem) ").concat(w.a.hexA(b.a.color.white,0),";}100%{box-shadow:0 0 0 ").concat(o," ").concat(w.a.hexA(b.a.color.white,0),";}}"),"@keyframes pulse-__jsx-style-dynamic-selector{0%{box-shadow:0 0 0 ".concat(o," ").concat(w.a.hexA(b.a.color.white,1),";}70%{box-shadow:0 0 0 calc(").concat(o," + 2.5rem) ").concat(w.a.hexA(b.a.color.white,0),";}100%{box-shadow:0 0 0 ").concat(o," ").concat(w.a.hexA(b.a.color.white,0),";}}"),".button-container.pulse.__jsx-style-dynamic-selector{-webkit-animation:pulse-__jsx-style-dynamic-selector 2s ease-in-out 1;animation:pulse-__jsx-style-dynamic-selector 2s ease-in-out 1;}",".arrow-container-inner.__jsx-style-dynamic-selector:hover .button-container.__jsx-style-dynamic-selector,.user-is-tabbing .arrow-container-inner.__jsx-style-dynamic-selector:focus .button-container.__jsx-style-dynamic-selector{-webkit-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05);}","@media (min-width:".concat(b.a.responsiveBreakpoints.medium,"){html:not([dir='rtl']) .arrow-container-inner.start.__jsx-style-dynamic-selector,html[dir='rtl'] .arrow-container-inner.end.__jsx-style-dynamic-selector{padding-left:").concat(b.a.spacing.xxxs,";}html[dir='rtl'] .arrow-container-inner.start.__jsx-style-dynamic-selector,html:not([dir='rtl']) .arrow-container-inner.end.__jsx-style-dynamic-selector{padding-right:").concat(b.a.spacing.xxxs,";}}"),"@media (min-width:".concat(b.a.responsiveBreakpoints.large,"){html:not([dir='rtl']) .arrow-container-inner.start.__jsx-style-dynamic-selector,html[dir='rtl'] .arrow-container-inner.end.__jsx-style-dynamic-selector{padding-left:").concat(b.a.spacing.xxs,";}html[dir='rtl'] .arrow-container-inner.start.__jsx-style-dynamic-selector,html:not([dir='rtl']) .arrow-container-inner.end.__jsx-style-dynamic-selector{padding-right:").concat(b.a.spacing.xxs,";}}"),"@media (min-width:".concat(b.a.responsiveBreakpoints.extraLarge,"){html:not([dir='rtl']) .arrow-container-inner.start.__jsx-style-dynamic-selector,html[dir='rtl'] .arrow-container-inner.end.__jsx-style-dynamic-selector{padding-right:").concat(b.a.spacing.xxs,";}html[dir='rtl'] .arrow-container-inner.start.__jsx-style-dynamic-selector,html:not([dir='rtl']) .arrow-container-inner.end.__jsx-style-dynamic-selector{padding-left:").concat(b.a.spacing.xxs,";}}")]))}}]),u}(h.PureComponent);t.a=Object(k.c)(Object(f.c)(E))},"02jS":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var i=n("ClPg"),a=function(e){var t=function(e){var t=e;if(e&&e.length>0){e.endsWith("<p><br></p>")?t=e.replace("<p><br></p>",""):e.endsWith("<blockquote><br></blockquote>")?t=e.replace("<blockquote><br></blockquote>",""):e.endsWith("<h4><br></h4>")?t=e.replace("<h4><br></h4>",""):e.endsWith("<h3><br></h3>")&&(t=e.replace("<h3><br></h3>",""));var n=t.match(/^(<\s*\w+>)/g),i=t.match(/(<\/\s*\w+>)$/g);if(n&&i&&n[0].substring(1)===i[0].substring(2)){if("<strong>"===n[0]||"<em>"===n[0])return t;t=function(e){var t=e.match(/(<a href=\"[\w-:%#\.\/]*\" target=\"_blank\">)/g),n=e;return t&&t.forEach((function(e){var t=e.replace('target="_blank">','target="_blank"')+' rel="noopener noreferrer">';n=n.replace(e,t)})),n}(t=t.replace(n[0],"").replace(i[0],""))}}return t}(e);return o(t)},o=function(e){return e.split("<br>").join("")},r=function(e,t){var n=i.c[e].tagName,a=["<".concat(n,">"),"".concat(t),"</".concat(n,">")];return e===i.b.TYPE.QUOTE&&(a[1]=a[1].replace("<em>","").replace("</em>",""),a.splice(2,0,"</em>"),a.splice(1,0,"<em>")),a.join("")}},"0OTU":function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("Z4N4"),f=n("wWnZ"),y=n("liFR"),g=h.a.createElement;function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(v()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"renderButton",(function(){var t={styles:g(u.a,{id:"1689838057",dynamic:[m.a.shadow.sm()]},[".button.__jsx-style-dynamic-selector{".concat(m.a.shadow.sm(),";}")]),className:u.a.dynamic([["1689838057",[m.a.shadow.sm()]]])};return g(f.a,{type:"full",color:"light",className:t.className,disabled:e.props.isDisabled,onClick:e.props.onItemClick},e.props.item.titleAlt?e.props.item.titleAlt:e.props.item.title,t.styles)})),e}return Object(a.a)(p,[{key:"render",value:function(){return this.props.isDisabled&&this.props.disabledTooltipStr?g(y.a,{targetClassName:"tooltip-adjust-margins",tooltipContent:this.props.disabledTooltipStr},this.renderButton()):this.renderButton()}}]),p}(d.PureComponent);t.a=b},"0goI":function(e,t,n){"use strict";var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("yFcC"),p=n.n(l),u=n("ERkP"),d=n.n(u),h=n("O94r"),m=n.n(h),f=n("K98y"),y=d.a.createElement;function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){Object(c.a)(l,e);var t,n=(t=l,function(){var e,n=Object(s.a)(t);if(g()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function l(){return Object(a.a)(this,l),n.apply(this,arguments)}return Object(o.a)(l,[{key:"render",value:function(){var e={styles:y(p.a,{id:"2803715437",dynamic:[this.props.hasNaturalDirection?"unset":"scaleX(-1)",this.props.hasNaturalDirection?"scaleX(-1)":"unset"]},[".icon.__jsx-style-dynamic-selector{-webkit-transform:".concat(this.props.hasNaturalDirection?"unset":"scaleX(-1)",";-ms-transform:").concat(this.props.hasNaturalDirection?"unset":"scaleX(-1)",";transform:").concat(this.props.hasNaturalDirection?"unset":"scaleX(-1)",";}"),"html[dir='rtl'] .icon.__jsx-style-dynamic-selector{-webkit-transform:".concat(this.props.hasNaturalDirection?"scaleX(-1)":"unset",";-ms-transform:").concat(this.props.hasNaturalDirection?"scaleX(-1)":"unset",";transform:").concat(this.props.hasNaturalDirection?"scaleX(-1)":"unset",";}")]),className:p.a.dynamic([["2803715437",[this.props.hasNaturalDirection?"unset":"scaleX(-1)",this.props.hasNaturalDirection?"scaleX(-1)":"unset"]]])},t=m()("icon-directional-arrow",e.className,this.props.className);return y(u.Fragment,null,y(f.a,Object(i.a)({},this.props,{className:t})),e.styles)}}]),l}(u.PureComponent);t.a=v},"1lKD":function(e,t,n){"use strict";var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("pWxA"),s=n("K/z8"),c=n("sRHE"),l=n("8K1b"),p=n("zjfJ"),u=n("yFcC"),d=n.n(u),h=n("ERkP"),m=n.n(h),f=n("4yTv"),y=n("AmmK"),g=n("NX3A"),v=n("Z4N4"),b=n("nylY"),x=n("OGR5"),O=n("pao5"),w=n("aomC"),j=n("A7aE"),C=m.a.createElement;function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=function(e){Object(l.a)(i,e);var t,n=(t=i,function(){var e,n=Object(c.a)(t);if(k()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function i(){var e;Object(a.a)(this,i);for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return e=n.call.apply(n,[this].concat(o)),Object(p.a)(Object(r.a)(e),"onSelected",(function(){e.props.onSelected(e.props.id)})),e}return Object(o.a)(i,[{key:"render",value:function(){return C("label",{htmlFor:this.props.id,className:d.a.dynamic([["2447293383",[v.a.screenReaderOnly(),g.a.spacing.xxs,g.a.spacing.xxs,g.a.spacing.sm,v.a.shadow.sm(),this.props.storyDesign.storyTheme.themeVariables.accentColor1,v.a.typography.h3(),g.a.color.darkGreen,g.a.spacing.xs,g.a.spacing.xxxs,v.a.typography.body14(),g.a.color.cadet,g.a.spacing.sm]]])},C("input",{id:this.props.id,type:"radio",checked:this.props.isSelected,"aria-checked":this.props.isSelected,value:this.props.id,name:this.props.groupId,onClick:this.onSelected,readOnly:!0,className:d.a.dynamic([["2447293383",[v.a.screenReaderOnly(),g.a.spacing.xxs,g.a.spacing.xxs,g.a.spacing.sm,v.a.shadow.sm(),this.props.storyDesign.storyTheme.themeVariables.accentColor1,v.a.typography.h3(),g.a.color.darkGreen,g.a.spacing.xs,g.a.spacing.xxxs,v.a.typography.body14(),g.a.color.cadet,g.a.spacing.sm]]])}),C("div",{className:d.a.dynamic([["2447293383",[v.a.screenReaderOnly(),g.a.spacing.xxs,g.a.spacing.xxs,g.a.spacing.sm,v.a.shadow.sm(),this.props.storyDesign.storyTheme.themeVariables.accentColor1,v.a.typography.h3(),g.a.color.darkGreen,g.a.spacing.xs,g.a.spacing.xxxs,v.a.typography.body14(),g.a.color.cadet,g.a.spacing.sm]]])+" label-content"},C("img",{src:this.props.thumbnail,alt:this.props.alt,className:d.a.dynamic([["2447293383",[v.a.screenReaderOnly(),g.a.spacing.xxs,g.a.spacing.xxs,g.a.spacing.sm,v.a.shadow.sm(),this.props.storyDesign.storyTheme.themeVariables.accentColor1,v.a.typography.h3(),g.a.color.darkGreen,g.a.spacing.xs,g.a.spacing.xxxs,v.a.typography.body14(),g.a.color.cadet,g.a.spacing.sm]]])+" option-image"}),C("p",{className:d.a.dynamic([["2447293383",[v.a.screenReaderOnly(),g.a.spacing.xxs,g.a.spacing.xxs,g.a.spacing.sm,v.a.shadow.sm(),this.props.storyDesign.storyTheme.themeVariables.accentColor1,v.a.typography.h3(),g.a.color.darkGreen,g.a.spacing.xs,g.a.spacing.xxxs,v.a.typography.body14(),g.a.color.cadet,g.a.spacing.sm]]])+" option-title"},this.props.title),C("p",{className:d.a.dynamic([["2447293383",[v.a.screenReaderOnly(),g.a.spacing.xxs,g.a.spacing.xxs,g.a.spacing.sm,v.a.shadow.sm(),this.props.storyDesign.storyTheme.themeVariables.accentColor1,v.a.typography.h3(),g.a.color.darkGreen,g.a.spacing.xs,g.a.spacing.xxxs,v.a.typography.body14(),g.a.color.cadet,g.a.spacing.sm]]])+" option-subtitle"},this.props.subtitle),"boolean"===typeof this.props.isSelected&&C("div",{className:d.a.dynamic([["2447293383",[v.a.screenReaderOnly(),g.a.spacing.xxs,g.a.spacing.xxs,g.a.spacing.sm,v.a.shadow.sm(),this.props.storyDesign.storyTheme.themeVariables.accentColor1,v.a.typography.h3(),g.a.color.darkGreen,g.a.spacing.xs,g.a.spacing.xxxs,v.a.typography.body14(),g.a.color.cadet,g.a.spacing.sm]]])+" radio-container"},C(w.a,{variant:"radio",isSelected:this.props.isSelected}))),C(d.a,{id:"2447293383",dynamic:[v.a.screenReaderOnly(),g.a.spacing.xxs,g.a.spacing.xxs,g.a.spacing.sm,v.a.shadow.sm(),this.props.storyDesign.storyTheme.themeVariables.accentColor1,v.a.typography.h3(),g.a.color.darkGreen,g.a.spacing.xs,g.a.spacing.xxxs,v.a.typography.body14(),g.a.color.cadet,g.a.spacing.sm]},["input[type='radio'].__jsx-style-dynamic-selector{".concat(v.a.screenReaderOnly(),";}"),"label.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;cursor:pointer;height:100%;}",".label-content.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:41rem;padding:".concat(g.a.spacing.xxs," ").concat(g.a.spacing.xxs," ").concat(g.a.spacing.sm,";").concat(v.a.shadow.sm(),";}"),"input[type='radio'].__jsx-style-dynamic-selector:focus+.label-content.__jsx-style-dynamic-selector{box-shadow:inset 0 0.2rem 0.2rem 0 rgba(0,0,0,0.1), 0 0 0.5rem 1px ".concat(this.props.storyDesign.storyTheme.themeVariables.accentColor1,";}"),".option-image.__jsx-style-dynamic-selector{width:100%;height:auto;}",".option-title.__jsx-style-dynamic-selector{".concat(v.a.typography.h3(),";color:").concat(g.a.color.darkGreen,";margin-top:").concat(g.a.spacing.xs,";margin-bottom:").concat(g.a.spacing.xxxs,";}"),".option-subtitle.__jsx-style-dynamic-selector{".concat(v.a.typography.body14(),";color:").concat(g.a.color.cadet,";margin-bottom:").concat(g.a.spacing.sm,";}"),".radio-container.__jsx-style-dynamic-selector{margin-top:auto;}"]))}}]),i}(h.PureComponent),I=Object(j.b)(S),P=m.a.createElement;function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var E=function(e){Object(l.a)(u,e);var t,n=(t=u,function(){var e,n=Object(c.a)(t);if(R()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function u(){var e;Object(a.a)(this,u);for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return e=n.call.apply(n,[this].concat(o)),Object(p.a)(Object(r.a)(e),"renderOptions",(function(){return e.props.options.map((function(t,n){return P(f.a,{size:4,pre:0===n?2:0,key:t.id},P(I,Object(i.a)({},t,{groupId:e.props.optionGroupId,isSelected:"undefined"===typeof e.props.selectedOptionId?void 0:e.props.selectedOptionId===t.id,onSelected:e.props.onOptionSelected})))}))})),e}return Object(o.a)(u,[{key:"render",value:function(){return P(y.a,{isOpen:this.props.isShowing,preventScrollWhenOpen:!0,onRequestClose:this.props.onCloseClicked},P("div",{className:d.a.dynamic([["443368001",[g.a.color.white,g.a.spacing.sm,v.a.typography.h1(),g.a.spacing.xxxl,g.a.spacing.xxs,v.a.typography.body16(),g.a.color.cadet,g.a.spacing.xl]]])+" container"},P("button",{onClick:this.props.onCloseClicked,className:d.a.dynamic([["443368001",[g.a.color.white,g.a.spacing.sm,v.a.typography.h1(),g.a.spacing.xxxl,g.a.spacing.xxs,v.a.typography.body16(),g.a.color.cadet,g.a.spacing.xl]]])+" close-button"},P(b.a,{width:g.a.font.size.extraLarge,height:g.a.font.size.extraLarge,color:g.a.color.coolGrey})),P("div",{className:d.a.dynamic([["443368001",[g.a.color.white,g.a.spacing.sm,v.a.typography.h1(),g.a.spacing.xxxl,g.a.spacing.xxs,v.a.typography.body16(),g.a.color.cadet,g.a.spacing.xl]]])+" content"},P(x.b,null,P(O.a,null,P(f.a,{size:10,pre:1},P("h2",{className:d.a.dynamic([["443368001",[g.a.color.white,g.a.spacing.sm,v.a.typography.h1(),g.a.spacing.xxxl,g.a.spacing.xxs,v.a.typography.body16(),g.a.color.cadet,g.a.spacing.xl]]])+" modal-title"},this.props.title),P("p",{className:d.a.dynamic([["443368001",[g.a.color.white,g.a.spacing.sm,v.a.typography.h1(),g.a.spacing.xxxl,g.a.spacing.xxs,v.a.typography.body16(),g.a.color.cadet,g.a.spacing.xl]]])+" modal-subtitle"},this.props.subtitle)))),P("div",{className:d.a.dynamic([["443368001",[g.a.color.white,g.a.spacing.sm,v.a.typography.h1(),g.a.spacing.xxxl,g.a.spacing.xxs,v.a.typography.body16(),g.a.color.cadet,g.a.spacing.xl]]])+" options"},P(x.b,null,P(O.a,{equalHeightGridItems:!0},this.renderOptions()))))),P(d.a,{id:"443368001",dynamic:[g.a.color.white,g.a.spacing.sm,v.a.typography.h1(),g.a.spacing.xxxl,g.a.spacing.xxs,v.a.typography.body16(),g.a.color.cadet,g.a.spacing.xl]},[".container.__jsx-style-dynamic-selector{height:100vh;width:100vw;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:auto;-webkit-overflow-scrolling:touch;}",".content.__jsx-style-dynamic-selector{background:".concat(g.a.color.white,";-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;position:relative;}"),".close-button.__jsx-style-dynamic-selector{position:fixed;top:0;z-index:1;margin:".concat(g.a.spacing.sm,";cursor:pointer;}"),"html:not([dir='rtl']) .close-button.__jsx-style-dynamic-selector{right:0;}","html[dir='rtl'] .close-button.__jsx-style-dynamic-selector{left:0;}",".modal-title.__jsx-style-dynamic-selector{".concat(v.a.typography.h1(),";margin-top:").concat(g.a.spacing.xxxl,";margin-bottom:").concat(g.a.spacing.xxs,";}"),".modal-subtitle.__jsx-style-dynamic-selector{".concat(v.a.typography.body16(),";color:").concat(g.a.color.cadet,";}"),".options.__jsx-style-dynamic-selector{margin-top:".concat(g.a.spacing.xl,";}")]))}}]),u}(h.PureComponent);t.a=E},"1yNe":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var i=n("jD4n"),a=function(e,t,n,a,o,r,s,c){return a===i.Display.Inline&&t&&("video"===o||"photo"===o&&!r)?"embedly-iframe":e&&!s&&r?"placeholder":r?"inline-iframe":a===i.Display.Card||!s&&((e||"small"===n)&&"link"===o||e&&("rich"===o||"card"===c))?"card":"rich"===o&&t?"embedly-iframe":"inline-iframe"},o=function(e){var t={url:e.url,embedType:e.contentType,title:e.title,description:e.description,thumbnailUrl:e.thumbnailUrl,providerUrl:e.providerUrl,height:e.height,width:e.width,aspectRatio:e.aspectRatio,useSmartEmbed:e.useSmartEmbed,caption:e.title||e.description,display:e.isKnownEmbed&&("link"!==e.embedType||e.supportsEmbedlyCards)||"iframe"===e.addedAsType||e.skippedUrlChecks?i.Display.Inline:i.Display.Card};return"link"!==e.embedType&&(t.embedSrc=e.embedSrc),"video"!==e.embedType&&"audio"!==e.embedType&&t}},"20vC":function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("Z4N4"),g=n("LuYe"),v=n("NX3A"),b=n("liFR"),x=n("oK9Z"),O=h.a.createElement;function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var j=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(w()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"renderSearchButton",(function(){var e={styles:O(u.a,{id:"2221843545",dynamic:[y.a.shadow.md()]},[".search-button.__jsx-style-dynamic-selector{padding:1rem;".concat(y.a.shadow.md(),";}")]),className:u.a.dynamic([["2221843545",[y.a.shadow.md()]]])};return O(d.Fragment,null,O(x.a,{className:f()("search-button",e.className),disabled:!0},O(g.a,{width:v.a.spacing.xxs,height:"auto"})),e.styles)})),e}return Object(a.a)(p,[{key:"render",value:function(){return O(d.Fragment,null,O("div",{className:u.a.dynamic([["250786912",[v.a.spacing.xs,v.a.spacing.xs]]])+" search-container"},O(b.a,{tooltipContent:this.props.tooltip},this.renderSearchButton())),O(u.a,{id:"250786912",dynamic:[v.a.spacing.xs,v.a.spacing.xs]},[".search-container.__jsx-style-dynamic-selector{position:absolute;top:".concat(v.a.spacing.xs,";margin:0 ").concat(v.a.spacing.xs,";z-index:1;}")]))}}]),p}(d.Component);t.b=j},"2EIY":function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("zjfJ"),l=n("yFcC"),p=n.n(l),u=n("ERkP"),d=n.n(u),h=n("O94r"),m=n.n(h),f=n("Z4N4"),y=n("NX3A"),g=n("PJBw"),v=n("uEvS"),b=n("QSI2"),x=n("Xls9"),O=n("2tmL"),w=d.a.createElement;function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var C=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(j()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){var e=m()("container",this.props.isFullScreen?"full-screen":"partial-screen",{docked:this.props.isDocked,end:"end"===this.props.position}),t=x.f[this.props.narrativePanelSize||"small"];return w(u.Fragment,null,w("div",{className:p.a.dynamic([["2202542764",[this.props.immersiveOffset.top,this.props.immersiveOffset.bottom,this.props.immersiveOffset.bottom,this.props.immersiveOffset.top,O.a.STACKED_MEDIA_PANEL_HEIGHT,this.props.immersiveOffset.top,f.a.shadow.sm(),y.a.responsiveBreakpoints.large,"end"===this.props.position?"1 / 2":"2 / 3",y.a.print.pageHeightLetter,y.a.print.pageHeightLetter]],["1165693220",[y.a.responsiveBreakpoints.large,t.width,"auto"===t.min?"auto":"calc(100vw - ".concat(t.min,")"),"auto"===t.max?"auto":"calc(100vw - ".concat(t.max,")"),y.a.responsiveBreakpoints.extraLarge,t.widthXL]]])+" "+(m()(e,"main",{"show-shadow":this.props.isDocked&&this.props.showDropShadow})||"")},w(g.a,{isVisible:this.props.isVisible,transition:this.props.transition,isTransitionAnimated:this.props.isTransitionAnimated},this.props.children)),this.props.appendedUI&&w("div",{className:p.a.dynamic([["2202542764",[this.props.immersiveOffset.top,this.props.immersiveOffset.bottom,this.props.immersiveOffset.bottom,this.props.immersiveOffset.top,O.a.STACKED_MEDIA_PANEL_HEIGHT,this.props.immersiveOffset.top,f.a.shadow.sm(),y.a.responsiveBreakpoints.large,"end"===this.props.position?"1 / 2":"2 / 3",y.a.print.pageHeightLetter,y.a.print.pageHeightLetter]],["1165693220",[y.a.responsiveBreakpoints.large,t.width,"auto"===t.min?"auto":"calc(100vw - ".concat(t.min,")"),"auto"===t.max?"auto":"calc(100vw - ".concat(t.max,")"),y.a.responsiveBreakpoints.extraLarge,t.widthXL]]])+" "+(m()(e,"appended")||"")},this.props.appendedUI),w(p.a,{id:"2202542764",dynamic:[this.props.immersiveOffset.top,this.props.immersiveOffset.bottom,this.props.immersiveOffset.bottom,this.props.immersiveOffset.top,O.a.STACKED_MEDIA_PANEL_HEIGHT,this.props.immersiveOffset.top,f.a.shadow.sm(),y.a.responsiveBreakpoints.large,"end"===this.props.position?"1 / 2":"2 / 3",y.a.print.pageHeightLetter,y.a.print.pageHeightLetter]},[".container.__jsx-style-dynamic-selector{--main-screen-height:calc( 100vh - (".concat(this.props.immersiveOffset.top," + ").concat(this.props.immersiveOffset.bottom,") );--bottom-margin:").concat(this.props.immersiveOffset.bottom,";width:100%;position:-webkit-sticky;position:sticky;top:").concat(this.props.immersiveOffset.top,";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;max-height:100%;pointer-events:none;}"),".container.appended.__jsx-style-dynamic-selector{z-index:2;}",".container.partial-screen.__jsx-style-dynamic-selector{grid-row:1 / 2;grid-column:1 / 2;height:calc( ".concat(O.a.STACKED_MEDIA_PANEL_HEIGHT," - (").concat(this.props.immersiveOffset.top,") );}"),".container.partial-screen.main.__jsx-style-dynamic-selector{z-index:1;}",".container.partial-screen.show-shadow.__jsx-style-dynamic-selector{".concat(f.a.shadow.sm(),";}"),".container.full-screen.__jsx-style-dynamic-selector{grid-row:1;grid-column:1;height:var(--main-screen-height);margin-bottom:var(--bottom-margin);}",".container.full-screen.main.__jsx-style-dynamic-selector{z-index:0;}","@media (min-width:".concat(y.a.responsiveBreakpoints.large,"){.container.partial-screen.__jsx-style-dynamic-selector{grid-row:1 / 2;grid-column:").concat("end"===this.props.position?"1 / 2":"2 / 3",";height:var(--main-screen-height);margin-bottom:var(--bottom-margin);box-shadow:none;}.container.partial-screen.main.__jsx-style-dynamic-selector{z-index:0;}.container.partial-screen.show-shadow.__jsx-style-dynamic-selector{box-shadow:none;}html:not([dir='rtl']) .ReactModal__Body--open .container.partial-screen.docked.__jsx-style-dynamic-selector:not(.end){right:0;}html:not([dir='rtl']) .ReactModal__Body--open .container.partial-screen.docked.end.__jsx-style-dynamic-selector{left:0;}html[dir='rtl'] .ReactModal__Body--open .container.partial-screen.docked.__jsx-style-dynamic-selector:not(.end){left:0;}html[dir='rtl'] .ReactModal__Body--open .container.partial-screen.docked.end.__jsx-style-dynamic-selector{right:0;}}"),"body.print .container.main.__jsx-style-dynamic-selector{padding:0;position:static;z-index:1;}","body.print .container.partial-screen.main.__jsx-style-dynamic-selector{height:calc(".concat(y.a.print.pageHeightLetter," / 3);grid-column:1 / 2;}"),"body.print .container.full-screen.main.__jsx-style-dynamic-selector{height:calc(".concat(y.a.print.pageHeightLetter," / 2.5);}")]),w(p.a,{id:"1165693220",dynamic:[y.a.responsiveBreakpoints.large,t.width,"auto"===t.min?"auto":"calc(100vw - ".concat(t.min,")"),"auto"===t.max?"auto":"calc(100vw - ".concat(t.max,")"),y.a.responsiveBreakpoints.extraLarge,t.widthXL]},["@media (min-width:".concat(y.a.responsiveBreakpoints.large,"){.ReactModal__Body--open .container.partial-screen.docked.__jsx-style-dynamic-selector{position:fixed;width:calc(100vw - ").concat(t.width,");max-width:").concat("auto"===t.min?"auto":"calc(100vw - ".concat(t.min,")"),";min-width:").concat("auto"===t.max?"auto":"calc(100vw - ".concat(t.max,")"),";}}"),"@media (min-width:".concat(y.a.responsiveBreakpoints.extraLarge,"){.ReactModal__Body--open .container.partial-screen.docked.__jsx-style-dynamic-selector{width:calc(100vw - ").concat(t.widthXL,");}}")]))}}]),c}(u.PureComponent);Object(c.a)(C,"defaultProps",{isFullScreen:!1}),t.a=Object(b.b)(Object(v.b)(C))},"2ai2":function(e,t,n){"use strict";n.r(t),n.d(t,"createCookieData",(function(){return a})),n.d(t,"createCookieAttributes",(function(){return o})),n.d(t,"setUserCookie",(function(){return r})),n.d(t,"destroyUserCookie",(function(){return s}));var i=n("MHYw"),a=function(e,t){var n=!!t.id,a=Object(i.b)(t),o={expires:e.expiresAt.getTime(),persistent:e.shouldPersist,token:e.token,email:e.username,customBaseUrl:a,culture:t.user.culture||"",region:t.user.region};if(n){o.urlKey=t.urlKey,o.accountId=t.id,o.role={org_admin:"account_admin",org_publisher:"account_publisher",org_user:"account_user"}[t.user.role]}return o},o=function(e){var t=["path=/"];if(e.isSSLOnly&&t.push("secure"),e.shouldPersist){var n=e.expiresAt.toUTCString();t.push("expires=".concat(n))}return t.join(";")},r=function(e,t){var n=JSON.stringify(e),i=encodeURIComponent(n);document.cookie="esri_auth=".concat(i,";").concat(t)},s=function(){document.cookie="esri_auth=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;"}},"2bAO":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("zjfJ"),l=n("yFcC"),p=n.n(l),u=n("ERkP"),d=n.n(u),h=n("Z4N4"),m=n("NX3A"),f=n("6pnf"),y=d.a.createElement;function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(g()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){var e="normal"===this.props.spacing?m.a.spacing.xxs:m.a.spacing.xxxs;return y(u.Fragment,null,y("label",{htmlFor:this.props.id,className:p.a.dynamic([["3879803753",[h.a.screenReaderOnly(),this.props.alignment,m.a.spacing.xxs,m.a.spacing.xxs,m.a.color.coolGrey,e,e,e,e,e,e,h.a.center(),m.a.color.white,m.a.spacing.xxs,m.a.spacing.xxs,m.a.color.haikuGreen,m.a.color.haikuGreen]],["2295101617",[this.props.disabled?"not-allowed":"pointer",this.props.disabled?.5:1]]])+" "+(this.props.className||"")},y("input",{id:this.props.id,type:"checkbox",checked:!!this.props.isChecked,"aria-checked":this.props.isChecked,value:this.props.value,name:this.props.name,disabled:this.props.disabled,onChange:this.props.onChange,className:p.a.dynamic([["3879803753",[h.a.screenReaderOnly(),this.props.alignment,m.a.spacing.xxs,m.a.spacing.xxs,m.a.color.coolGrey,e,e,e,e,e,e,h.a.center(),m.a.color.white,m.a.spacing.xxs,m.a.spacing.xxs,m.a.color.haikuGreen,m.a.color.haikuGreen]],["2295101617",[this.props.disabled?"not-allowed":"pointer",this.props.disabled?.5:1]]])}),y("div",{className:p.a.dynamic([["3879803753",[h.a.screenReaderOnly(),this.props.alignment,m.a.spacing.xxs,m.a.spacing.xxs,m.a.color.coolGrey,e,e,e,e,e,e,h.a.center(),m.a.color.white,m.a.spacing.xxs,m.a.spacing.xxs,m.a.color.haikuGreen,m.a.color.haikuGreen]],["2295101617",[this.props.disabled?"not-allowed":"pointer",this.props.disabled?.5:1]]])+" checkbox-input-outer"},y("div",{className:p.a.dynamic([["3879803753",[h.a.screenReaderOnly(),this.props.alignment,m.a.spacing.xxs,m.a.spacing.xxs,m.a.color.coolGrey,e,e,e,e,e,e,h.a.center(),m.a.color.white,m.a.spacing.xxs,m.a.spacing.xxs,m.a.color.haikuGreen,m.a.color.haikuGreen]],["2295101617",[this.props.disabled?"not-allowed":"pointer",this.props.disabled?.5:1]]])+" checkbox-input-inner"},y(f.a,{width:m.a.spacing.xxxs,height:"auto"}))),y("div",{className:p.a.dynamic([["3879803753",[h.a.screenReaderOnly(),this.props.alignment,m.a.spacing.xxs,m.a.spacing.xxs,m.a.color.coolGrey,e,e,e,e,e,e,h.a.center(),m.a.color.white,m.a.spacing.xxs,m.a.spacing.xxs,m.a.color.haikuGreen,m.a.color.haikuGreen]],["2295101617",[this.props.disabled?"not-allowed":"pointer",this.props.disabled?.5:1]]])+" label-content"},this.props.children)),y(p.a,{id:"3879803753",dynamic:[h.a.screenReaderOnly(),this.props.alignment,m.a.spacing.xxs,m.a.spacing.xxs,m.a.color.coolGrey,e,e,e,e,e,e,h.a.center(),m.a.color.white,m.a.spacing.xxs,m.a.spacing.xxs,m.a.color.haikuGreen,m.a.color.haikuGreen]},["input[type='checkbox'].__jsx-style-dynamic-selector{".concat(h.a.screenReaderOnly(),";}"),"label.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:".concat(this.props.alignment,";-webkit-box-align:").concat(this.props.alignment,";-ms-flex-align:").concat(this.props.alignment,";align-items:").concat(this.props.alignment,";}"),".label-content.__jsx-style-dynamic-selector{-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;}",".checkbox-input-outer.__jsx-style-dynamic-selector{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:".concat(m.a.spacing.xxs,";height:").concat(m.a.spacing.xxs,";border-radius:1px;border:1px solid ").concat(m.a.color.coolGrey,";box-shadow:inset 0 0.2rem 0.2rem 0 rgba(0,0,0,0.1);margin:calc(").concat(e," / 2) ").concat(e," calc(").concat(e," / 2) 0;}"),".checkbox-input-inner.__jsx-style-dynamic-selector{display:none;}","html[dir='rtl'] .checkbox-input-outer.__jsx-style-dynamic-selector{margin:calc(".concat(e," / 2) 0 calc(").concat(e," / 2) ").concat(e,";-webkit-transform:scale(-1,1);-ms-transform:scale(-1,1);transform:scale(-1,1);}"),"input[type='checkbox'].__jsx-style-dynamic-selector:checked+.checkbox-input-outer.__jsx-style-dynamic-selector .checkbox-input-inner.__jsx-style-dynamic-selector{".concat(h.a.center(),";color:").concat(m.a.color.white,";width:").concat(m.a.spacing.xxs,";height:").concat(m.a.spacing.xxs,";border-radius:1px;background-color:").concat(m.a.color.haikuGreen,";margin:-1px;}"),"input[type='checkbox'].__jsx-style-dynamic-selector:focus+.checkbox-input-outer.__jsx-style-dynamic-selector{box-shadow:inset 0 0.2rem 0.2rem 0 rgba(0,0,0,0.1), 0 0 0.5rem 1px ".concat(m.a.color.haikuGreen,";}")]),y(p.a,{id:"2295101617",dynamic:[this.props.disabled?"not-allowed":"pointer",this.props.disabled?.5:1]},["label.__jsx-style-dynamic-selector{cursor:".concat(this.props.disabled?"not-allowed":"pointer",";opacity:").concat(this.props.disabled?.5:1,";}")]))}}]),c}(u.PureComponent);Object(c.a)(v,"defaultProps",{alignment:"initial",spacing:"normal"})},"2tmL":function(e,t,n){"use strict";t.a={STACKED_MEDIA_PANEL_HEIGHT:"40vh",OFFSET_BOTTOM_EXPANDED:"135px",OFFSET_BOTTOM_COLLAPSED:"32px"}},"33+R":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"chevron-down",path:"M5 13.769v-2.766l11 11 11-11v2.766l-11 11z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},"3SKz":function(e,t,n){"use strict";n.r(t),n.d(t,"NavigationViewer",(function(){return _}));var i=n("fGyu"),a=n("9fIP"),o=n("MMYH"),r=n("pWxA"),s=n("K/z8"),c=n("sRHE"),l=n("8K1b"),p=n("zjfJ"),u=n("yFcC"),d=n.n(u),h=n("ERkP"),m=n.n(h),f=n("2SGB"),y=n("O94r"),g=n.n(y),v=n("pFSi"),b=n.n(v),x=n("7Zgl"),O=n("NX3A"),w=n("Z4N4"),j=n("wrGn"),C=n("K98y"),k=n("Y/5s"),S=n("eCu0"),I=n("Abkm"),P=n("WXRn"),R=n("A7aE"),E=n("V+ka"),D=n("6LyH"),T=m.a.createElement;function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var L=O.a.spacing.xl,G=O.a.spacing.lg,_=function(e){Object(l.a)(u,e);var t,n=(t=u,function(){var e,n=Object(c.a)(t);if(N()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function u(e){var t;return Object(a.a)(this,u),t=n.call(this,e),Object(p.a)(Object(r.a)(t),"clickHandlers",b()((function(e){return t.onNavigationClick.bind(Object(r.a)(t),e)}))),Object(p.a)(Object(r.a)(t),"arrowHandlers",b()((function(e){return t.scrollNav.bind(Object(r.a)(t),e)}))),Object(p.a)(Object(r.a)(t),"navRef",Object(h.createRef)()),Object(p.a)(Object(r.a)(t),"navRefLinksWrapper",Object(h.createRef)()),Object(p.a)(Object(r.a)(t),"intersectingHeadings",[]),Object(p.a)(Object(r.a)(t),"renderArrow",(function(e){var n={styles:T(d.a,{id:"318435658",dynamic:[O.a.spacing.sm,O.a.spacing.sm]},[".icon-arrow-left.__jsx-style-dynamic-selector{position:absolute;left:".concat(O.a.spacing.sm,";}"),".icon-arrow-right.__jsx-style-dynamic-selector{position:absolute;right:".concat(O.a.spacing.sm,";}")]),className:d.a.dynamic([["318435658",[O.a.spacing.sm,O.a.spacing.sm]]])};return T("button",{onClick:t.arrowHandlers(e),className:d.a.dynamic([["2921402818",[e,w.a.hexA(t.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundColor,.4),t.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundHoverColor,O.a.spacing.xxl,t.state.isLeftArrowVisible?"flex":"none",t.state.isRightArrowVisible?"flex":"none"]]])+" "+"arrow ".concat(e)},T("left"===e?j.a:C.a,{width:O.a.spacing.xs,color:t.props.storyDesign.storyTheme.themeVariables.accentColor1,className:n.className}),T(d.a,{id:"2921402818",dynamic:[e,w.a.hexA(t.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundColor,.4),t.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundHoverColor,O.a.spacing.xxl,t.state.isLeftArrowVisible?"flex":"none",t.state.isRightArrowVisible?"flex":"none"]},[".arrow.__jsx-style-dynamic-selector{position:absolute;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-image:linear-gradient( to ".concat(e,", ").concat(w.a.hexA(t.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundColor,.4),", ").concat(t.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundHoverColor," 100% );width:").concat(O.a.spacing.xxl,";top:0;bottom:0;}"),".left.__jsx-style-dynamic-selector{left:0;display:".concat(t.state.isLeftArrowVisible?"flex":"none",";}"),".right.__jsx-style-dynamic-selector{right:0;display:".concat(t.state.isRightArrowVisible?"flex":"none",";}")]),n.styles)})),Object(p.a)(Object(r.a)(t),"renderLinks",(function(){return t.props.links.length?t.props.links.map((function(e){if(!e.isHidden){var n=e.customText?e.customText:e.defaultText;return n&&n.length>30&&(n=n.slice(0,30).concat("...")),T(h.Fragment,{key:e.nodeId},T("button",{dangerouslySetInnerHTML:{__html:n},onClick:t.clickHandlers(e.nodeId),id:"l-".concat(e.nodeId),className:d.a.dynamic([["3651566434",[t.props.storyDesign.storyTheme.themeVariables.bodyColor,t.props.isViewportMaxWidth("small")?t.props.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.stepDown1():t.props.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.baseline(),t.props.storyDesign.storyTheme.themeVariables.accentColor1,t.props.storyDesign.storyTheme.themeVariables.accentColor1]]])+" "+(g()("navigation-button",{active:e.nodeId===t.props.activeLink})||"")}),T(d.a,{id:"3651566434",dynamic:[t.props.storyDesign.storyTheme.themeVariables.bodyColor,t.props.isViewportMaxWidth("small")?t.props.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.stepDown1():t.props.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.baseline(),t.props.storyDesign.storyTheme.themeVariables.accentColor1,t.props.storyDesign.storyTheme.themeVariables.accentColor1]},[".navigation-button.__jsx-style-dynamic-selector{color:".concat(t.props.storyDesign.storyTheme.themeVariables.bodyColor,";").concat(t.props.isViewportMaxWidth("small")?t.props.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.stepDown1():t.props.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.baseline(),";-webkit-text-decoration:none;text-decoration:none;cursor:pointer;white-space:nowrap;border-bottom:1px solid transparent;}"),".navigation-button.__jsx-style-dynamic-selector:hover{border-bottom:1px solid ".concat(t.props.storyDesign.storyTheme.themeVariables.accentColor1,";}"),".navigation-button.active.__jsx-style-dynamic-selector{border-bottom:2px solid ".concat(t.props.storyDesign.storyTheme.themeVariables.accentColor1,";}"),"body:not(.user-is-tabbing) .navigation-button.__jsx-style-dynamic-selector:focus{outline:none;}"]))}})):T(f.a,{id:"builder.storyNavigation.noHeadings"})})),Object(p.a)(Object(r.a)(t),"setUpNavLinkObserver",(function(){var e=-1*Object(I.c)(Object(x.i)(t.props.appOffset.top)+Object(x.i)(t.state.navBarHeight));t.intersectionObserver&&t.intersectionObserver.disconnect(),t.intersectionObserver=new IntersectionObserver(t.onIntersection,{threshold:[0,.25,.5,.75,1],rootMargin:"".concat(e,"px 0px 0px 0px")}),t.props.links.forEach((function(e){if(!e.isHidden){var n=document.querySelector("#".concat(e.nodeId));n&&(n.id=e.nodeId,t.intersectionObserver.observe(n))}}))})),Object(p.a)(Object(r.a)(t),"onNavigationClick",(function(e){var n=document.getElementById(e),i=Object(I.c)(Object(x.i)(t.props.appOffset.top)+Object(x.i)(t.state.navBarHeight)+(t.props.isViewportMaxWidth("small")?Object(x.i)(O.a.spacing.lg):Object(x.i)(O.a.spacing.xl)));if(n){var a=n.getBoundingClientRect().top+window.pageYOffset;window.scrollTo(0,a-i)}})),Object(p.a)(Object(r.a)(t),"updateArrows",(function(){t.navRefLinksWrapper.current&&t.navRef.current&&(t.navRefLinksWrapper.current.scrollWidth<=t.navRefLinksWrapper.current.clientWidth?t.setState({isLeftArrowVisible:!1,isRightArrowVisible:!1}):0===t.navRefLinksWrapper.current.scrollLeft?t.setState({isLeftArrowVisible:!1,isRightArrowVisible:!0}):Math.round(t.navRefLinksWrapper.current.scrollLeft)+5>=t.navRefLinksWrapper.current.scrollWidth-t.navRefLinksWrapper.current.clientWidth?t.setState({isLeftArrowVisible:!0,isRightArrowVisible:!1}):t.setState({isLeftArrowVisible:!0,isRightArrowVisible:!0}))})),Object(p.a)(Object(r.a)(t),"checkNavBarJustification",(function(){t.setState({justification:t.navRefLinksWrapper.current&&t.navRef.current&&t.navRefLinksWrapper.current.scrollWidth>t.navRefLinksWrapper.current.clientWidth?"start":"centered"},(function(){t.updateArrows()}))})),Object(p.a)(Object(r.a)(t),"scrollNav",(function(e){var n;if(t.navRefLinksWrapper.current&&t.navRef.current){n="right"===e?t.navRefLinksWrapper.current.clientWidth>t.navRefLinksWrapper.current.scrollWidth-t.navRefLinksWrapper.current.scrollLeft?t.navRefLinksWrapper.current.scrollWidth-t.navRefLinksWrapper.current.scrollLeft:t.navRefLinksWrapper.current.clientWidth:t.navRefLinksWrapper.current.clientWidth>t.navRefLinksWrapper.current.scrollWidth-t.navRefLinksWrapper.current.scrollLeft?-(t.navRefLinksWrapper.current.scrollWidth-t.navRefLinksWrapper.current.scrollLeft):-t.navRefLinksWrapper.current.clientWidth;var i=t.navRefLinksWrapper.current.scrollLeft+n;t.navRefLinksWrapper.current.scrollTo(i,0)}})),Object(p.a)(Object(r.a)(t),"onIntersection",(function(e){var n=Object(i.a)(t.intersectingHeadings);t.intersectingHeadings.length||(e.forEach((function(e){n.push({id:e.target.id,isIntersecting:e.isIntersecting})})),t.intersectingHeadings=n),e.forEach((function(e){var t=n.find((function(t){return e.target.id===t.id}));t&&(t.isIntersecting=e.isIntersecting)})),t.intersectingHeadings=n;var a=n.find((function(e){return e.isIntersecting}));if(!a){var o=e.find((function(e){return e.target.id===t.props.activeLink})),r=n.findIndex((function(e){return e.id===t.props.activeLink}));n[r]&&o&&o.boundingClientRect.top>window.innerHeight&&(a=n[r-1])}a&&a.id!==t.props.activeLink&&(t.checkLinkVisibility(a.id),t.props.updateActiveLink(a.id))})),Object(p.a)(Object(r.a)(t),"checkLinkVisibility",(function(e){var n=document.getElementById("l-".concat(e));if(n&&t.navRef.current&&t.navRefLinksWrapper.current)if(Object(P.b)())n.offsetLeft<0?t.scrollNav("left"):n.offsetLeft>t.navRefLinksWrapper.current.scrollLeft&&t.scrollNav("right");else{if(n.offsetLeft>=Math.round(t.navRefLinksWrapper.current.scrollLeft)&&n.offsetLeft<t.navRefLinksWrapper.current.scrollLeft+t.navRefLinksWrapper.current.clientWidth)return;n.offsetLeft>t.navRefLinksWrapper.current.clientWidth+t.navRefLinksWrapper.current.scrollLeft?t.scrollNav("right"):n.offsetLeft<t.navRefLinksWrapper.current.scrollWidth-t.navRefLinksWrapper.current.scrollLeft&&t.scrollNav("left")}})),t.state={isLeftArrowVisible:!1,isRightArrowVisible:!1,justification:"centered",navBarHeight:t.props.isViewportMaxWidth("small")?G:L},t}return Object(o.a)(u,[{key:"componentDidUpdate",value:function(e,t){var n=this;this.checkNavBarJustification();var i=this.props.isViewportMaxWidth("small")?G:L;this.state.navBarHeight!==i&&this.setState((function(){return{navBarHeight:i}}),(function(){var e=A({},n.props.storyOffsetContext.storyOffset,{navBarHeight:n.state.navBarHeight});n.props.storyOffsetContext.updateStoryOffsetContext({storyOffset:e})}));var a=[];(this.props.links.reduce((function(t,n,i){return n.isHidden?t:(a.push(n.nodeId),!e.links||!e.links[i]||n.nodeId!==e.links[i].nodeId||n.nodeId===e.links[i].nodeId&&n.isHidden!==e.links[i].isHidden?(t.push(n.nodeId),t):t)}),[]).length||a.length!==this.intersectingHeadings.length)&&(this.intersectingHeadings=[],this.setUpNavLinkObserver())}},{key:"componentDidMount",value:function(){if(this.setUpNavLinkObserver(),this.checkNavBarJustification(),!this.props.isHidden){var e=A({},this.props.storyOffsetContext.storyOffset,{navBarHeight:this.state.navBarHeight});this.props.storyOffsetContext.updateStoryOffsetContext({storyOffset:e})}}},{key:"componentWillUnmount",value:function(){var e=A({},this.props.storyOffsetContext.storyOffset,{navBarHeight:"0rem"});this.props.storyOffsetContext.updateStoryOffsetContext({storyOffset:e}),this.intersectionObserver.disconnect()}},{key:"render",value:function(){return this.updateArrows(),!this.props.isHidden&&T("div",{"data-blockid":this.props.blockId,ref:this.navRef,role:"navigation",className:d.a.dynamic([["2951770667",[this.state.navBarHeight,this.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundColor,this.props.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.stepDown1(),this.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundHoverColor,this.props.storyDesign.storyTheme.themeVariables.bodyColor,w.a.gapped("column",this.props.isViewportMaxWidth("small")?O.a.spacing.xxs:O.a.spacing.sm),this.state.justification,O.a.spacing.lg,"minimal"===this.props.coverType?O.a.spacing.xl:"full"===this.props.coverType?0:"0rem",this.props.appOffset.top]]])+" "+(g()("navigation-viewer",this.props.className)||"")},this.renderArrow("left"),T("div",{ref:this.navRefLinksWrapper,onScroll:this.updateArrows,className:d.a.dynamic([["2951770667",[this.state.navBarHeight,this.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundColor,this.props.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.stepDown1(),this.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundHoverColor,this.props.storyDesign.storyTheme.themeVariables.bodyColor,w.a.gapped("column",this.props.isViewportMaxWidth("small")?O.a.spacing.xxs:O.a.spacing.sm),this.state.justification,O.a.spacing.lg,"minimal"===this.props.coverType?O.a.spacing.xl:"full"===this.props.coverType?0:"0rem",this.props.appOffset.top]]])+" links-wrapper"},this.renderLinks()),this.renderArrow("right"),T(d.a,{id:"2951770667",dynamic:[this.state.navBarHeight,this.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundColor,this.props.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.stepDown1(),this.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundHoverColor,this.props.storyDesign.storyTheme.themeVariables.bodyColor,w.a.gapped("column",this.props.isViewportMaxWidth("small")?O.a.spacing.xxs:O.a.spacing.sm),this.state.justification,O.a.spacing.lg,"minimal"===this.props.coverType?O.a.spacing.xl:"full"===this.props.coverType?0:"0rem",this.props.appOffset.top]},[".navigation-viewer.__jsx-style-dynamic-selector{height:".concat(this.state.navBarHeight,";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:").concat(this.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundColor,";").concat(this.props.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.stepDown1(),";border-bottom:1px solid ").concat(this.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundHoverColor,";color:").concat(this.props.storyDesign.storyTheme.themeVariables.bodyColor,";}"),"body.print .navigation-viewer.__jsx-style-dynamic-selector{display:none;}",".links-wrapper.__jsx-style-dynamic-selector{width:100%;overflow-x:scroll;-ms-overflow-style:none;-webkit-scrollbar-width:none;-moz-scrollbar-width:none;-ms-scrollbar-width:none;scrollbar-width:none;".concat(w.a.gapped("column",this.props.isViewportMaxWidth("small")?O.a.spacing.xxs:O.a.spacing.sm),";-webkit-box-pack:").concat(this.state.justification,";-webkit-justify-content:").concat(this.state.justification,";-ms-flex-pack:").concat(this.state.justification,";justify-content:").concat(this.state.justification,";margin:0 ").concat(O.a.spacing.lg,";}"),".links-wrapper.__jsx-style-dynamic-selector::-webkit-scrollbar{display:none;width:0;}",".layout-wrapper:first-child{margin-bottom:".concat("minimal"===this.props.coverType?O.a.spacing.xl:"full"===this.props.coverType?0:"0rem",";}"),".layout-wrapper.navigation-bar{position:-webkit-sticky;position:sticky;top:".concat(this.props.appOffset.top,";z-index:9;}")]))}}]),u}(h.PureComponent);t.default=Object(D.a)(Object(R.b)(Object(k.d)(Object(S.c)(Object(E.b)(_)))))},"3Uv7":function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("2SGB"),h=n("YQpL"),m=n("dV92"),f=u.a.createElement;function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var g=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(y()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return f(m.a,{headerTitle:this.props.title,isShowingModal:this.props.isShowing,primaryButtonTitle:this.props.altPrimaryButtonContent?this.props.altPrimaryButtonContent:f(d.a,{id:"common.deleteConfirmation"}),onPrimaryButtonClick:this.props.onConfirm,secondaryButtonTitle:f(d.a,{id:"common.cancel"}),onSecondaryButtonClick:this.props.onCancel,onCloseButtonClick:this.props.onCancel,closeButtonLabel:this.props.intl.formatMessage({id:"common.close"})},f("p",{className:"jsx-3954680386 description"},this.props.description),f(l.a,{id:"3954680386"},[".description.jsx-3954680386{margin:0;}"]))}}]),c}(p.PureComponent);t.a=Object(h.c)(g)},"3Z5K":function(e,t,n){"use strict";n.r(t),n.d(t,"SidecarImmersiveNarrativePanelViewer",(function(){return S}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("NX3A"),g=n("eCu0"),v=n("A7aE"),b=n("KaQd"),x=n("Xls9"),O=n("2tmL"),w=n("uEvS"),j=n("lsPM"),C=h.a.createElement;function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(k()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"onIntersection",(function(e){Object(b.a)({entries:e,node:t.sentinelNode.current,callback:t.props.onThresholdHit})})),Object(l.a)(Object(o.a)(t),"setTopRef",(function(e){"function"===typeof t.props.setTopNode&&e&&t.props.setTopNode(e)})),t.sentinelNode=Object(d.createRef)(),t}return Object(a.a)(p,[{key:"componentDidMount",value:function(){this.intersectionObserver=new IntersectionObserver(this.onIntersection,{threshold:0}),this.sentinelNode.current&&this.intersectionObserver.observe(this.sentinelNode.current)}},{key:"componentWillUnmount",value:function(){this.intersectionObserver.disconnect()}},{key:"render",value:function(){if(this.props.printMode)return this.props.children;var e=Object(x.c)(this.props.size);return C("div",{"data-blockid":this.props.blockId,className:u.a.dynamic([["2446811529",[this.props.immersiveOffset.top,this.props.immersiveOffset.bottom,y.a.spacing.lg,y.a.spacing.lg,"end"===this.props.position?"2 / 3":"1 / 2",this.props.immersiveOffset.top,this.props.immersiveOffset.top,O.a.STACKED_MEDIA_PANEL_HEIGHT,this.props.immersiveOffset.top,y.a.responsiveBreakpoints.medium]]])+" "+(f()("immersive-narrative-panel",Object(l.a)({},e.className,"floating-panel"!==this.props.immersiveSubtype),{first:this.props.isFirst,last:this.props.isLast,overlaid:"floating-panel"===this.props.immersiveSubtype,stacked:"docked-panel"===this.props.immersiveSubtype&&this.props.isViewportMaxWidth("medium"),docked:"docked-panel"===this.props.immersiveSubtype&&this.props.isViewportMinWidth("large")})||"")},!this.props.printMode&&C(h.a.Fragment,null,C("span",{ref:this.setTopRef,className:u.a.dynamic([["2446811529",[this.props.immersiveOffset.top,this.props.immersiveOffset.bottom,y.a.spacing.lg,y.a.spacing.lg,"end"===this.props.position?"2 / 3":"1 / 2",this.props.immersiveOffset.top,this.props.immersiveOffset.top,O.a.STACKED_MEDIA_PANEL_HEIGHT,this.props.immersiveOffset.top,y.a.responsiveBreakpoints.medium]]])+" "+(f()("top-node",{first:this.props.isFirst,stacked:"docked-panel"===this.props.immersiveSubtype&&this.props.isViewportMaxWidth("medium")})||"")}),C("span",{ref:this.sentinelNode,className:u.a.dynamic([["2446811529",[this.props.immersiveOffset.top,this.props.immersiveOffset.bottom,y.a.spacing.lg,y.a.spacing.lg,"end"===this.props.position?"2 / 3":"1 / 2",this.props.immersiveOffset.top,this.props.immersiveOffset.top,O.a.STACKED_MEDIA_PANEL_HEIGHT,this.props.immersiveOffset.top,y.a.responsiveBreakpoints.medium]]])+" "+(f()("sentinel",{stacked:"docked-panel"===this.props.immersiveSubtype&&this.props.isViewportMaxWidth("medium")})||"")})),"floating-panel"===this.props.immersiveSubtype?C(j.a,{position:this.props.position,size:this.props.size,panelStyle:this.props.panelStyle,printMode:this.props.printMode,horizonalSpacingSm:y.a.spacing.xs},this.props.children):this.props.children,C(u.a,{id:"2446811529",dynamic:[this.props.immersiveOffset.top,this.props.immersiveOffset.bottom,y.a.spacing.lg,y.a.spacing.lg,"end"===this.props.position?"2 / 3":"1 / 2",this.props.immersiveOffset.top,this.props.immersiveOffset.top,O.a.STACKED_MEDIA_PANEL_HEIGHT,this.props.immersiveOffset.top,y.a.responsiveBreakpoints.medium]},[".immersive-narrative-panel.__jsx-style-dynamic-selector{position:relative;min-height:calc( 100vh - (".concat(this.props.immersiveOffset.top," + ").concat(this.props.immersiveOffset.bottom,") );padding-top:0;padding-bottom:70vh;}"),".immersive-narrative-panel.stacked.__jsx-style-dynamic-selector{z-index:0;min-height:8rem;padding-top:0;padding-bottom:0;}",".immersive-narrative-panel.docked.__jsx-style-dynamic-selector{padding-left:".concat(y.a.spacing.lg,";padding-right:").concat(y.a.spacing.lg,";grid-column:").concat("end"===this.props.position?"2 / 3":"1 / 2",";z-index:auto;}"),".immersive-narrative-panel.overlaid.__jsx-style-dynamic-selector{grid-column:1;z-index:1;pointer-events:none;padding-left:0;padding-right:0;-webkit-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);transform:translate3d(0,0,0);}",".immersive-narrative-panel.first.__jsx-style-dynamic-selector:not(.stacked){padding-top:calc((100vh - ".concat(this.props.immersiveOffset.top,") * 0.2);}"),".immersive-narrative-panel.overlaid.first.__jsx-style-dynamic-selector{grid-row:1;}",".immersive-narrative-panel.last.__jsx-style-dynamic-selector:not(.stacked){padding-bottom:calc(100vh - ".concat(this.props.immersiveOffset.top,");}"),".top-node.__jsx-style-dynamic-selector{position:absolute;left:0;width:100%;height:0;z-index:0;}",".top-node.stacked.__jsx-style-dynamic-selector{top:calc(".concat(O.a.STACKED_MEDIA_PANEL_HEIGHT," * -1);}"),".top-node.__jsx-style-dynamic-selector:not(.stacked){top:calc(".concat(this.props.immersiveOffset.top," * -1 - 10vh);}"),".top-node.first.__jsx-style-dynamic-selector:not(.stacked){top:0;}",".sentinel.__jsx-style-dynamic-selector{position:absolute;left:0;width:100%;height:0.1rem;z-index:0;}",".sentinel.stacked.__jsx-style-dynamic-selector{top:45vh;}",".sentinel.__jsx-style-dynamic-selector:not(.stacked){top:15vh;}","@media (min-width:".concat(y.a.responsiveBreakpoints.medium,"){.immersive-narrative-panel.stacked.__jsx-style-dynamic-selector{min-height:16rem;}}")]),"floating-panel"!==this.props.immersiveSubtype&&e.styles)}}]),p}(d.PureComponent);Object(l.a)(S,"defaultProps",{immersiveSubtype:"docked-panel",position:"start"}),t.default=Object(w.b)(Object(g.c)(Object(v.b)(S)))},"4DfP":function(e,t,n){"use strict";var i=n("VtSi"),a=n.n(i),o=n("9fIP"),r=n("MMYH"),s=n("pWxA"),c=n("K/z8"),l=n("sRHE"),p=n("8K1b"),u=n("zjfJ"),d=n("yFcC"),h=n.n(d),m=n("ERkP"),f=n.n(m),y=n("jvFD"),g=n.n(y),v=n("2SGB"),b=n("YQpL"),x=n("Lf33"),O=n("tSRP"),w=n("7sDT"),j=n("AuFC"),C=n("i8u9"),k=n("fd07"),S=n("zfQs"),I=n("5ZgZ"),P=f.a.createElement;function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var E=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(R()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(){var e;Object(o.a)(this,i);for(var t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return e=n.call.apply(n,[this].concat(r)),Object(u.a)(Object(s.a)(e),"renderTarget",(function(){return P("button",{className:"jsx-2601786124 dropdown-target"},P(S.a,{userSession:e.props.userSession}),P(h.a,{id:"2601786124"},[".dropdown-target.jsx-2601786124{border-radius:50%;overflow:hidden;height:4rem;width:4rem;}","body:not(.user-is-tabbing) .dropdown-target.jsx-2601786124:focus{outline:none;}"]))})),Object(u.a)(Object(s.a)(e),"renderPopper",(function(){var t="".concat(e.props.config.BASE_URL,"/stories"),n="".concat(e.props.config.BASE_URL,"/collections"),i="";return e.props.userSession&&(i=Object(k.f)({portal:e.props.userSession.portal,currentUrl:window.location.href,config:e.props.config})),P(x.a,{hasLimitedWidth:!1},P("div",{className:"jsx-1109215457 dropdown-wrapper"},P(I.a,{userSession:e.props.userSession}),P(g.a,{href:"/stories",as:t,passHref:!0},P(x.a.Item,{isBold:!1,trackingName:"My Stories -- header",trackingContent:"My Stories"},P(v.a,{id:"builder.itemBrowser.stories"}))),P(g.a,{href:"/collections",as:n,passHref:!0},P(x.a.Item,{isBold:!1,trackingName:"Collections -- header",trackingContent:"My Collections"},P(v.a,{id:"component.collections.collections"}))),e.props.featureDecisions.canSwitchAccounts&&P(x.a.Item,{isBold:!1,link:{href:i,openInNewPage:!0,allowUnsafeOpenerAccess:!0,trackingName:"Switch Accounts -- header",trackingContent:"Switch Accounts"}},P(v.a,{id:"component.avatar.switchAccounts"})),P(x.a.Item,{isBold:!1,onClick:e.onSignOutClicked},P(v.a,{id:"component.avatar.signOut"}))),P(h.a,{id:"1109215457"},[".dropdown-wrapper.jsx-1109215457{width:21.2rem;}"]))})),Object(u.a)(Object(s.a)(e),"onSignOutClicked",(function(){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.userSession){t.next=3;break}return t.next=3,a.a.awrap(Object(k.j)({userSession:e.props.userSession,config:e.props.config,isPortal:e.props.environment.isPortal}));case 3:case"end":return t.stop()}}),null,null,null,Promise)})),e}return Object(r.a)(i,[{key:"render",value:function(){return P("div",{className:"jsx-1180973837 avatar"},P(O.a,{target:this.renderTarget(),popper:this.renderPopper(),placement:"bottom-end"}),P(h.a,{id:"1180973837"},[".avatar.jsx-1180973837{line-height:0;display:inline-block;}"]))}}]),i}(m.PureComponent);t.a=Object(C.b)(Object(w.c)(Object(j.c)(Object(b.c)(E))))},"4EqL":function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("Y/5s"),c=n("nVDo"),l=n("Bsig"),p=n("DmvT"),u=n("+L/X"),d=r.a.createElement;t.a=Object(u.b)(Object(s.d)((function(e){var t=c.k,n=Object(p.a)({props:e},e.src);return e.src?d("div",{className:a.a.dynamic([["141953252",[t,l.c[e.theme.id],n,e.styleMixin]]])+" image"},d(a.a,{id:"141953252",dynamic:[t,l.c[e.theme.id],n,e.styleMixin]},[".image.__jsx-style-dynamic-selector{width:100%;padding-bottom:".concat(t,";background-color:").concat(l.c[e.theme.id],";background-position:center;background-size:cover;background-image:url(").concat(n,");").concat(e.styleMixin,";}")])):null})))},"4m8B":function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("A7aE"),c=r.a.createElement;t.a=Object(s.b)((function(e){return c(o.Fragment,null,c("div",{dangerouslySetInnerHTML:{__html:e.text},className:a.a.dynamic([["2039306796",[e.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.stepDown1(),e.styleMixin||"",e.storyDesign.storyTheme.themeVariables.accentColor1]]])+" popup-description"}),c(a.a,{id:"2039306796",dynamic:[e.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.stepDown1(),e.styleMixin||"",e.storyDesign.storyTheme.themeVariables.accentColor1]},[".popup-description.__jsx-style-dynamic-selector{".concat(e.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.stepDown1()," ").concat(e.styleMixin||"",";overflow-wrap:break-word;max-width:100%;}"),".popup-description.__jsx-style-dynamic-selector p{margin:0;overflow-wrap:break-word;}",".popup-description.__jsx-style-dynamic-selector a{color:".concat(e.storyDesign.storyTheme.themeVariables.accentColor1,";}")]))}))},"4wv1":function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("zjfJ"),l=n("yFcC"),p=n.n(l),u=n("ERkP"),d=n.n(u),h=n("O94r"),m=n.n(h),f=n("IXx0"),y=d.a.createElement;function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(g()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(e){var t;return Object(i.a)(this,c),(t=n.call(this,e)).trayNode=Object(u.createRef)(),t.activeItemNode=Object(u.createRef)(),t}return Object(a.a)(c,[{key:"render",value:function(){var e=this;return y("ul",{ref:this.trayNode,"data-blockid":this.props.id,className:"jsx-2039018470 "+(m()("linear-tray",this.props.className,{shown:this.props.isShowing})||"")},this.props.items.map((function(t){return y("li",{key:t.id,"data-blockid":t.id,ref:t.id===e.props.activeItemId?e.activeItemNode:void 0,className:"jsx-2039018470 "+(m()("tray-item",!1===t.isDraggable?"undraggable":"draggable")||"")},t.node)})),y(p.a,{id:"2039018470"},[".linear-tray.jsx-2039018470{display:none;width:100%;overflow-x:auto;overflow-y:hidden;}",".linear-tray.shown.jsx-2039018470{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".tray-item.ghost.jsx-2039018470{visibility:hidden;}"]))}},{key:"componentDidMount",value:function(){this.scrollTray(),"function"===typeof this.props.handleDragDrop&&this.trayNode.current&&(this.dragDropGroup=Object(f.a)({element:this.trayNode.current,draggableItemSelector:".draggable",filteredItemSelector:".undraggable",ghostClass:"ghost",dragClass:"dnd-drag-tray-item",id:this.props.id,groupsToDropFrom:["".concat(this.props.id)],handler:this.props.handleDragDrop,setDataHandler:this.props.handleSetData,onMoveHandler:this.props.handleOnMove,setForceFallback:!1}))}},{key:"componentDidUpdate",value:function(e){this.props.activeItemId!==e.activeItemId&&this.scrollTray()}},{key:"componentWillUnmount",value:function(){this.dragDropGroup&&"function"===typeof this.dragDropGroup.destroy&&this.dragDropGroup.destroy()}},{key:"scrollTray",value:function(){var e=this.activeItemNode.current,t=this.trayNode.current;if(e&&t){var n=t.clientWidth/2-e.clientWidth/2,i=e.offsetLeft-n;t.scrollLeft=i}}}]),c}(u.Component);Object(c.a)(v,"defaultProps",{isShowing:!0}),t.a=v},"4z/A":function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return m})),n.d(t,"i",(function(){return f})),n.d(t,"e",(function(){return y})),n.d(t,"h",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"f",(function(){return b})),n.d(t,"d",(function(){return x})),n.d(t,"g",(function(){return O})),n.d(t,"j",(function(){return j}));var i=n("fGyu"),a=n("VtSi"),o=n.n(a),r=n("zjfJ"),s=n("zygG"),c=n("sCFI"),l=n("WXRn"),p=n("jKTg");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n,i,a){return Object(c.loadModules)(C(t,!!i)).then((function(t){var r=Object(s.a)(t,2),c=r[0],l=r[1];return new Promise((function(t,r){try{i&&l&&(l.portalUrl=i+"/content/items");var s=new c(d({portalItem:{id:e}},n));s.load().then((function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.awrap(s.basemap.load());case 2:return e.abrupt("return",w(s,a));case 3:case"end":return e.stop()}}),null,null,null,Promise)})).then((function(){var e=s.layers.map((function(e){return e.load().catch((function(e){return e}))}));return Promise.all(e.toArray())})).then((function(e){t({layers:e.filter((function(e){return e.loaded})),map:s})})).catch((function(e){r(e)}))}catch(p){r(p)}}))}))}function m(e,t,n){return Object(c.loadModules)(k(t)).then((function(t){return new(0,Object(s.a)(t,1)[0])(d({container:e},n))}))}function f(e){return Object(c.loadModules)(P()).then((function(t){return new(0,Object(s.a)(t,1)[0])({view:e})}))}function y(e){return Object(c.loadModules)(R()).then((function(t){return new(0,Object(s.a)(t,1)[0])({view:e})}))}function g(e){return Object(c.loadModules)(E()).then((function(t){return new(0,Object(s.a)(t,1)[0])({view:e})}))}function v(e){return Object(c.loadModules)(D()).then((function(t){return new(0,Object(s.a)(t,1)[0])({view:e})}))}function b(e,t){return Object(c.loadModules)(S()).then((function(n){return new(0,Object(s.a)(n,1)[0])({view:t,container:e})}))}function x(e){return Object(c.loadModules)(T()).then((function(t){var n=Object(s.a)(t,2),i=n[0],a=n[1],o=new i({view:e,maxSuggestions:3,popupEnabled:!1});return new a({collapseIconClass:Object(l.b)()?"esri-icon-right-arrow":"esri-icon-left-arrow",view:e,content:o,mode:"floating"})}))}function O(e){return Object(c.loadModules)(M()).then((function(t){var n=new(0,Object(s.a)(t,1)[0])({view:e});return n.graphic.popupTemplate=void 0,n}))}var w=function(e,t){return t&&t.forEach((function(t){e.allLayers.forEach((function(e){e&&e.url===t.sourceUrl&&(e.url=t.proxyUrl)}))})),e};function j(){return Object(c.loadModules)(I()).then((function(e){return Object(s.a)(e,1)[0]}))}var C=function(e,t){return[e===p.a.webScene?"esri/WebScene":"esri/WebMap"].concat(Object(i.a)(t?["esri/config"]:[]))},k=function(e){return e===p.a.webScene?["esri/views/SceneView"]:["esri/views/MapView"]},S=function(){return["esri/widgets/Legend"]},I=function(){return["esri/geometry/support/jsonUtils"]},P=function(){return["esri/widgets/Zoom"]},R=function(){return["esri/widgets/Home"]},E=function(){return["esri/widgets/NavigationToggle"]},D=function(){return["esri/widgets/Compass"]},T=function(){return["esri/widgets/Search","esri/widgets/Expand"]},M=function(){return["esri/widgets/Locate"]}},"54/T":function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("YQpL"),f=n("e3Gu"),y=n("Z4N4"),g=n("NX3A"),v=n("7nmT");function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var x=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(b()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"getContainerElement",(function(){return document.querySelector(t.props.selector)})),Object(l.a)(Object(o.a)(t),"updateContainerElementIfNeeded",(function(){var e=t.getContainerElement();t.state.containerElement!==e&&t.setState({containerElement:e})})),t.state={containerElement:void 0},t}return Object(a.a)(p,[{key:"componentDidMount",value:function(){this.updateContainerElementIfNeeded()}},{key:"componentDidUpdate",value:function(){this.updateContainerElementIfNeeded()}},{key:"render",value:function(){return this.state.containerElement?Object(v.createPortal)(this.props.children,this.state.containerElement):null}}]),p}(d.PureComponent),O=n("eCu0"),w=n("A7aE"),j=h.a.createElement;function C(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var k="drawing-text-editor",S=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(C()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"renderThis",(function(){var t=e.isEditable()&&e.props.isBeingEdited;return j("div",{"data-editing":t,className:u.a.dynamic([["3762665160",[e.props.isBeingEdited?"initial":"inherit",e.props.textColor]]])+" drawing-text"},t?e.renderDrawingTextEditor():e.renderDrawingTextViewer(),j(u.a,{id:"3762665160",dynamic:[e.props.isBeingEdited?"initial":"inherit",e.props.textColor]},[".drawing-text.__jsx-style-dynamic-selector{pointer-events:".concat(e.props.isBeingEdited?"initial":"inherit",";z-index:1;position:relative;color:").concat(e.props.textColor,";}")]))})),Object(l.a)(Object(o.a)(e),"renderDrawingTextViewer",(function(){var t=e.props.text.trim();return j("div",{className:u.a.dynamic([["1036123264",["drawing-text-viewer",e.isEditable()?"":"pointer-events: initial;",e.getCommonStyles(),t?"":"opacity: 0.4;"]]])+" drawing-text-viewer"},t||e.props.intl.formatMessage({id:"common.yourText"}),j(u.a,{id:"1036123264",dynamic:["drawing-text-viewer",e.isEditable()?"":"pointer-events: initial;",e.getCommonStyles(),t?"":"opacity: 0.4;"]},[".".concat("drawing-text-viewer",".__jsx-style-dynamic-selector{width:100%;").concat(e.isEditable()?"":"pointer-events: initial;",";").concat(e.getCommonStyles(),";").concat(t?"":"opacity: 0.4;",";}")]))})),Object(l.a)(Object(o.a)(e),"renderDrawingTextEditor",(function(){return j(f.a,{variant:"plain",placeholder:e.props.intl.formatMessage({id:"common.yourText"}),initText:e.props.text,onTextChange:e.props.updateDrawingTextContent,render:e.renderTextEditor,shouldAutoSelectAll:!0,selector:".".concat(k)})})),Object(l.a)(Object(o.a)(e),"renderTextEditor",(function(t){return j("div",{ref:t,className:u.a.dynamic([["1840092929",[k,y.a.typography.body14(),k,e.getCommonStyles(),g.a.color.coolGrey,k,k,e.getCommonStyles()]]])+" "+(k||"")},j(u.a,{id:"1840092929",dynamic:[k,y.a.typography.body14(),k,e.getCommonStyles(),g.a.color.coolGrey,k,k,e.getCommonStyles()]},[".".concat(k,".__jsx-style-dynamic-selector{").concat(y.a.typography.body14(),";}"),".".concat(k,".__jsx-style-dynamic-selector .ql-editor.ql-blank::before{").concat(e.getCommonStyles(),";font-style:initial;color:").concat(g.a.color.coolGrey,";}"),".".concat(k,".__jsx-style-dynamic-selector .ql-editor{padding:0;margin:0;}"),".".concat(k,".__jsx-style-dynamic-selector .ql-editor p{").concat(e.getCommonStyles(),";caret-color:currentcolor;}")]))})),Object(l.a)(Object(o.a)(e),"getCommonStyles",(function(){return"\n    margin: 0;\n    ".concat(e.props.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.baseline(),"\n    ").concat(e.props.isViewportMaxWidth("medium")?y.a.typography.body12():y.a.typography.body14(),"\n    text-align: center;\n    background-color: transparent;\n    overflow-wrap: break-word;\n  ")})),Object(l.a)(Object(o.a)(e),"getElementSelector",(function(){return"#".concat(e.props.containerId," #text-editor-").concat(e.props.id)})),Object(l.a)(Object(o.a)(e),"isEditable",(function(){return"function"===typeof e.props.updateDrawingTextContent})),e}return Object(a.a)(p,[{key:"render",value:function(){return j(x,{selector:this.getElementSelector()},this.renderThis())}}]),p}(d.PureComponent);t.a=Object(O.c)(Object(m.c)(Object(w.b)(S)))},"57qx":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"j",(function(){return h})),n.d(t,"i",(function(){return m})),n.d(t,"e",(function(){return f}));var i=n("fGyu"),a=n("OzwF"),o=Object.freeze({type:"order",value:"primary"}),r={basemapPrimary:"primary",basemapAlt:"alternate",basemapImagery:"imagery"},s={primary:"basemapPrimary",alternate:"basemapAlt",imagery:"basemapImagery"},c=function(e,t){return[e.basemapPrimary,e.basemapImagery,e.basemapAlt].concat(Object(i.a)("CN"===t?[Object(a.a)("cn")]:[]))},l=function(e,t){return t===e.basemapPrimary?"basemapPrimary":t===e.basemapImagery?"basemapImagery":t===e.basemapAlt?"basemapAlt":"cn"===t?"cn":void 0},p=function(e,t){return e[t||"basemapPrimary"]||Object(a.a)("cn")},u=function(e,t){return p(e,t).id},d=function(e){return r[e]},h=function(e){return s[e]},m=function(e,t){return"order"===t.type?p(e,h(t.value)):Object(a.a)(t.value)},f=function(e){var t=e.thumbnail,n=e.baseUrl,i=void 0===n?"":n,a=e.isHighRes;if(t.startsWith("https://"))return t;var o=a?t.replace(/\..{3,4}$/,"@2x$&"):t;return"".concat(i,"/static/images/builder/map/basemaps/").concat(o)}},"5ZgZ":function(e,t,n){"use strict";var i=n("VtSi"),a=n.n(i),o=n("9fIP"),r=n("MMYH"),s=n("pWxA"),c=n("K/z8"),l=n("sRHE"),p=n("8K1b"),u=n("zjfJ"),d=n("yFcC"),h=n.n(d),m=n("ERkP"),f=n.n(m),y=n("2SGB"),g=n("AuFC"),v=n("NX3A"),b=n("Z4N4"),x=n("i8u9"),O=n("fd07"),w=n("zfQs"),j=f.a.createElement;function C(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var k=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(C()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),t=n.call(this,e),Object(u.a)(Object(s.a)(t),"getUserDetails",(function(){var e,n;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(e=t.props.userSession)){i.next=11;break}return i.prev=2,i.next=5,a.a.awrap(e.getUser());case 5:n=i.sent,t.setState({fullName:n.fullName||"",username:n.username||""}),i.next=11;break;case 9:i.prev=9,i.t0=i.catch(2);case 11:case"end":return i.stop()}}),null,null,[[2,9]],Promise)})),Object(u.a)(Object(s.a)(t),"onSignOutClicked",(function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.props.userSession){e.next=3;break}return e.next=3,a.a.awrap(Object(O.j)({userSession:t.props.userSession,config:t.props.config,isPortal:t.props.environment.isPortal}));case 3:case"end":return e.stop()}}),null,null,null,Promise)})),t.state={fullName:"",username:""},t}return Object(r.a)(i,[{key:"render",value:function(){var e=Object(O.d)(this.props.userSession.portal);return j("ul",{className:h.a.dynamic([["3960874926",[v.a.spacing.xxxs,v.a.spacing.xxs,b.a.dropdownItemHover(),v.a.color.darkGreen,b.a.gapped("column",v.a.spacing.xxs),b.a.typography.h6(),v.a.color.coolGrey,b.a.typography.body14(),b.a.lineClamp(1),v.a.spacing.xxxxs,v.a.color.darkGreen,v.a.spacing.xxs,v.a.spacing.xxs,b.a.typography.body12(),v.a.spacing.xxxs]]])+" avatar-details"},j("li",{className:h.a.dynamic([["3960874926",[v.a.spacing.xxxs,v.a.spacing.xxs,b.a.dropdownItemHover(),v.a.color.darkGreen,b.a.gapped("column",v.a.spacing.xxs),b.a.typography.h6(),v.a.color.coolGrey,b.a.typography.body14(),b.a.lineClamp(1),v.a.spacing.xxxxs,v.a.color.darkGreen,v.a.spacing.xxs,v.a.spacing.xxs,b.a.typography.body12(),v.a.spacing.xxxs]]])},j("a",{href:e,className:h.a.dynamic([["3960874926",[v.a.spacing.xxxs,v.a.spacing.xxs,b.a.dropdownItemHover(),v.a.color.darkGreen,b.a.gapped("column",v.a.spacing.xxs),b.a.typography.h6(),v.a.color.coolGrey,b.a.typography.body14(),b.a.lineClamp(1),v.a.spacing.xxxxs,v.a.color.darkGreen,v.a.spacing.xxs,v.a.spacing.xxs,b.a.typography.body12(),v.a.spacing.xxxs]]])+" anchor"},j("div",{className:h.a.dynamic([["3960874926",[v.a.spacing.xxxs,v.a.spacing.xxs,b.a.dropdownItemHover(),v.a.color.darkGreen,b.a.gapped("column",v.a.spacing.xxs),b.a.typography.h6(),v.a.color.coolGrey,b.a.typography.body14(),b.a.lineClamp(1),v.a.spacing.xxxxs,v.a.color.darkGreen,v.a.spacing.xxs,v.a.spacing.xxs,b.a.typography.body12(),v.a.spacing.xxxs]]])+" content-container"},this.props.isShowingAvatar&&j(w.a,{userSession:this.props.userSession}),j("div",{className:h.a.dynamic([["3960874926",[v.a.spacing.xxxs,v.a.spacing.xxs,b.a.dropdownItemHover(),v.a.color.darkGreen,b.a.gapped("column",v.a.spacing.xxs),b.a.typography.h6(),v.a.color.coolGrey,b.a.typography.body14(),b.a.lineClamp(1),v.a.spacing.xxxxs,v.a.color.darkGreen,v.a.spacing.xxs,v.a.spacing.xxs,b.a.typography.body12(),v.a.spacing.xxxs]]])+" anchor-text-container"},j("span",{className:h.a.dynamic([["3960874926",[v.a.spacing.xxxs,v.a.spacing.xxs,b.a.dropdownItemHover(),v.a.color.darkGreen,b.a.gapped("column",v.a.spacing.xxs),b.a.typography.h6(),v.a.color.coolGrey,b.a.typography.body14(),b.a.lineClamp(1),v.a.spacing.xxxxs,v.a.color.darkGreen,v.a.spacing.xxs,v.a.spacing.xxs,b.a.typography.body12(),v.a.spacing.xxxs]]])+" anchor-text"},this.state.fullName),j("div",{className:h.a.dynamic([["3960874926",[v.a.spacing.xxxs,v.a.spacing.xxs,b.a.dropdownItemHover(),v.a.color.darkGreen,b.a.gapped("column",v.a.spacing.xxs),b.a.typography.h6(),v.a.color.coolGrey,b.a.typography.body14(),b.a.lineClamp(1),v.a.spacing.xxxxs,v.a.color.darkGreen,v.a.spacing.xxs,v.a.spacing.xxs,b.a.typography.body12(),v.a.spacing.xxxs]]])+" text-subtext-gap"}),j("span",{className:h.a.dynamic([["3960874926",[v.a.spacing.xxxs,v.a.spacing.xxs,b.a.dropdownItemHover(),v.a.color.darkGreen,b.a.gapped("column",v.a.spacing.xxs),b.a.typography.h6(),v.a.color.coolGrey,b.a.typography.body14(),b.a.lineClamp(1),v.a.spacing.xxxxs,v.a.color.darkGreen,v.a.spacing.xxs,v.a.spacing.xxs,b.a.typography.body12(),v.a.spacing.xxxs]]])+" anchor-subtext"},this.state.username))))),this.props.isShowingAvatar&&j("li",{className:h.a.dynamic([["3960874926",[v.a.spacing.xxxs,v.a.spacing.xxs,b.a.dropdownItemHover(),v.a.color.darkGreen,b.a.gapped("column",v.a.spacing.xxs),b.a.typography.h6(),v.a.color.coolGrey,b.a.typography.body14(),b.a.lineClamp(1),v.a.spacing.xxxxs,v.a.color.darkGreen,v.a.spacing.xxs,v.a.spacing.xxs,b.a.typography.body12(),v.a.spacing.xxxs]]])},j("button",{type:"button",onClick:this.onSignOutClicked,className:h.a.dynamic([["3960874926",[v.a.spacing.xxxs,v.a.spacing.xxs,b.a.dropdownItemHover(),v.a.color.darkGreen,b.a.gapped("column",v.a.spacing.xxs),b.a.typography.h6(),v.a.color.coolGrey,b.a.typography.body14(),b.a.lineClamp(1),v.a.spacing.xxxxs,v.a.color.darkGreen,v.a.spacing.xxs,v.a.spacing.xxs,b.a.typography.body12(),v.a.spacing.xxxs]]])+" sign-out"},j(y.a,{id:"component.avatar.signOut"}))),j(h.a,{id:"3960874926",dynamic:[v.a.spacing.xxxs,v.a.spacing.xxs,b.a.dropdownItemHover(),v.a.color.darkGreen,b.a.gapped("column",v.a.spacing.xxs),b.a.typography.h6(),v.a.color.coolGrey,b.a.typography.body14(),b.a.lineClamp(1),v.a.spacing.xxxxs,v.a.color.darkGreen,v.a.spacing.xxs,v.a.spacing.xxs,b.a.typography.body12(),v.a.spacing.xxxs]},[".avatar-details.__jsx-style-dynamic-selector{width:32rem;max-width:100%;padding:".concat(v.a.spacing.xxxs," ").concat(v.a.spacing.xxs,";}"),".avatar-details.__jsx-style-dynamic-selector:hover{".concat(b.a.dropdownItemHover(),";}"),".anchor.__jsx-style-dynamic-selector{display:block;-webkit-text-decoration:none;text-decoration:none;color:".concat(v.a.color.darkGreen,";}"),".content-container.__jsx-style-dynamic-selector{".concat(b.a.gapped("column",v.a.spacing.xxs),";-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;}"),".anchor-text-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;}",".anchor-text.__jsx-style-dynamic-selector{".concat(b.a.typography.h6(),";}"),".anchor-subtext.__jsx-style-dynamic-selector{color:".concat(v.a.color.coolGrey,";").concat(b.a.typography.body14(),";").concat(b.a.lineClamp(1),";}"),".text-subtext-gap.__jsx-style-dynamic-selector{height:".concat(v.a.spacing.xxxxs,";width:100%;}"),".sign-out.__jsx-style-dynamic-selector{display:block;color:".concat(v.a.color.darkGreen,";margin:0 0 ").concat(v.a.spacing.xxs," calc(4rem + ").concat(v.a.spacing.xxs,");").concat(b.a.typography.body12(),";padding:").concat(v.a.spacing.xxxs," 0;}")]))}},{key:"componentDidMount",value:function(){this.getUserDetails()}}]),i}(m.PureComponent);t.a=Object(x.b)(Object(g.c)(k))},"5mn2":function(e,t,n){"use strict";var i=n("ERkP"),a=n.n(i),o=n("YQpL"),r=n("NX3A"),s=n("A7aE"),c=n("vEi1"),l=a.a.createElement;t.a=Object(s.b)(Object(o.c)((function(e){return l(c.default,{text:e.intl.formatMessage({id:"component.immersive.tour.noContentPlacholder"}),type:"paragraph",style:{color:e.storyDesign.storyTheme.themeVariables.bodyMutedColor,padding:"0 ".concat(r.a.spacing.xxs)}})})))},"5p0Z":function(e,t,n){"use strict";n.r(t),n.d(t,"MapFocusedTourPlaceViewer",(function(){return E}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("YQpL"),g=n("NX3A"),v=n("Z4N4"),b=n("OGR5"),x=n("pao5"),O=n("4yTv"),w=n("eCu0"),j=n("A7aE"),C=n("KaQd"),k=n("l/Z4"),S=n("5mn2"),I=n("D6ti"),P=h.a.createElement;function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var E=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(R()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"onIntersection",(function(e){Object(C.a)({entries:e,node:t.sentinelNode.current,callback:t.props.onThresholdHit})})),Object(l.a)(Object(o.a)(t),"setTopRef",(function(e){"function"===typeof t.props.setTopElement&&e&&t.props.setTopElement(e)})),t.sentinelNode=Object(d.createRef)(),t}return Object(a.a)(p,[{key:"componentDidMount",value:function(){this.intersectionObserver=new IntersectionObserver(this.onIntersection,{threshold:0}),this.sentinelNode.current&&this.intersectionObserver.observe(this.sentinelNode.current)}},{key:"componentWillUnmount",value:function(){this.intersectionObserver.disconnect()}},{key:"render",value:function(){var e=this.props.isViewportMinWidth("extra-extra-large");return this.props.isViewportMaxWidth("medium")||this.props.printMode?P(I.a,this.props):P("div",{className:u.a.dynamic([["1078329141",[g.a.spacing.xxl,v.a.center("column"),g.a.spacing.xxxxxl,this.props.storyDesign.storyTheme.themeVariables.backgroundColor,v.a.shadow.xs(),g.a.spacing.sm,g.a.spacing.xxs]]])+" "+(f()("place",this.props.tourSubtype)||"")},P("span",{ref:this.setTopRef,className:u.a.dynamic([["1078329141",[g.a.spacing.xxl,v.a.center("column"),g.a.spacing.xxxxxl,this.props.storyDesign.storyTheme.themeVariables.backgroundColor,v.a.shadow.xs(),g.a.spacing.sm,g.a.spacing.xxs]]])+" top-node"}),P("span",{ref:this.sentinelNode,className:u.a.dynamic([["1078329141",[g.a.spacing.xxl,v.a.center("column"),g.a.spacing.xxxxxl,this.props.storyDesign.storyTheme.themeVariables.backgroundColor,v.a.shadow.xs(),g.a.spacing.sm,g.a.spacing.xxs]]])+" sentinel"}),P(b.b,{isFullWidth:e},P(x.a,null,P(O.a,{size:e?3:4,pre:1},P("div",{className:u.a.dynamic([["1078329141",[g.a.spacing.xxl,v.a.center("column"),g.a.spacing.xxxxxl,this.props.storyDesign.storyTheme.themeVariables.backgroundColor,v.a.shadow.xs(),g.a.spacing.sm,g.a.spacing.xxs]]])+" place-panel-container"},P("div",{className:u.a.dynamic([["1078329141",[g.a.spacing.xxl,v.a.center("column"),g.a.spacing.xxxxxl,this.props.storyDesign.storyTheme.themeVariables.backgroundColor,v.a.shadow.xs(),g.a.spacing.sm,g.a.spacing.xxs]]])+" "+(f()("place-panel-inner",{selected:this.props.isSelected,animated:this.props.isTransitionAnimated})||"")},!this.props.isSelected&&P("button",{"aria-label":this.props.intl.formatMessage({id:"component.immersive.tour.maskLabel"}),onClick:this.props.onPlaceClicked,className:u.a.dynamic([["1078329141",[g.a.spacing.xxl,v.a.center("column"),g.a.spacing.xxxxxl,this.props.storyDesign.storyTheme.themeVariables.backgroundColor,v.a.shadow.xs(),g.a.spacing.sm,g.a.spacing.xxs]]])+" mask"}),P("div",{className:u.a.dynamic([["1078329141",[g.a.spacing.xxl,v.a.center("column"),g.a.spacing.xxxxxl,this.props.storyDesign.storyTheme.themeVariables.backgroundColor,v.a.shadow.xs(),g.a.spacing.sm,g.a.spacing.xxs]]])+" place-number-container"},P(k.a,{isSelected:this.props.isSelected,number:this.props.index+1,hasColor:this.props.hasFeature,color:this.props.accentColor})),this.props.media&&P("div",{className:u.a.dynamic([["1078329141",[g.a.spacing.xxl,v.a.center("column"),g.a.spacing.xxxxxl,this.props.storyDesign.storyTheme.themeVariables.backgroundColor,v.a.shadow.xs(),g.a.spacing.sm,g.a.spacing.xxs]]])+" media-container"},this.props.media),this.props.content?P("div",{className:u.a.dynamic([["1078329141",[g.a.spacing.xxl,v.a.center("column"),g.a.spacing.xxxxxl,this.props.storyDesign.storyTheme.themeVariables.backgroundColor,v.a.shadow.xs(),g.a.spacing.sm,g.a.spacing.xxs]]])+" content-container"},this.props.content):this.props.content||this.props.media?void 0:P("div",{className:u.a.dynamic([["1078329141",[g.a.spacing.xxl,v.a.center("column"),g.a.spacing.xxxxxl,this.props.storyDesign.storyTheme.themeVariables.backgroundColor,v.a.shadow.xs(),g.a.spacing.sm,g.a.spacing.xxs]]])+" content-container"},P(S.a,null)),this.props.appendedUI))))),P(u.a,{id:"1078329141",dynamic:[g.a.spacing.xxl,v.a.center("column"),g.a.spacing.xxxxxl,this.props.storyDesign.storyTheme.themeVariables.backgroundColor,v.a.shadow.xs(),g.a.spacing.sm,g.a.spacing.xxs]},[".place.__jsx-style-dynamic-selector{position:relative;}",".top-node.__jsx-style-dynamic-selector{position:absolute;top:-30vh;left:0;width:100%;height:0;z-index:0;}",".sentinel.__jsx-style-dynamic-selector{position:absolute;top:50vh;left:0;width:100%;height:0.1rem;z-index:0;}",".place-panel-container.__jsx-style-dynamic-selector{pointer-events:auto;padding-bottom:".concat(g.a.spacing.xxl,";}"),".place-panel-inner.__jsx-style-dynamic-selector{".concat(v.a.center("column"),";-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;position:relative;opacity:0.6;min-height:").concat(g.a.spacing.xxxxxl,";background:").concat(this.props.storyDesign.storyTheme.themeVariables.backgroundColor,";").concat(v.a.shadow.xs(),";}"),".place-panel-inner.animated.__jsx-style-dynamic-selector{-webkit-transition:opacity 0.3s ease-in-out;transition:opacity 0.3s ease-in-out;}",".place-panel-inner.selected.__jsx-style-dynamic-selector{opacity:1;}",".mask.__jsx-style-dynamic-selector{position:absolute;z-index:99;top:0;left:0;bottom:0;width:100%;}",".place-number-container.__jsx-style-dynamic-selector{position:absolute;z-index:1;top:0;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}",".media-container.__jsx-style-dynamic-selector{width:100%;height:27.5rem;}",".content-container.__jsx-style-dynamic-selector{padding:".concat(g.a.spacing.sm," ").concat(g.a.spacing.xxs,";}"),".content-container.__jsx-style-dynamic-selector>.layout-wrapper:first-child{margin-top:0;}",".content-container.__jsx-style-dynamic-selector>.layout-wrapper:last-child{margin-bottom:0;}"]))}}]),p}(d.PureComponent);t.default=Object(j.b)(Object(w.c)(Object(y.c)(E)))},"686e":function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("YQpL"),f=n("7sDT"),y=n("Z4N4"),g=n("NX3A"),v=n("JmSK"),b=n("+L/X"),x=n("q94Z"),O=n("Y1ga"),w=n("C5oz"),j=h.a.createElement;function C(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var k=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(C()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"onItemSelected",(function(t){e.props.onItemCollapsed(t)})),e}return Object(a.a)(p,[{key:"render",value:function(){var e=this,t=this.props.items.map((function(t){var n=t;if(n.id===v.d.Image||n.id===v.d.Audio||n.id===v.d.ImageOrVideo){var i=e.props.intl.formatMessage({id:n.id===v.d.ImageOrVideo?"builder.addMediaModal.titleImageVideo":n.id===v.d.Audio?"builder.immersive.slidesPanel.addBackgroundAudio":"builder.addMediaModal.titleImage"}),a=e.props.pendingItem===v.d.Image||e.props.pendingItem===v.d.ImageOrVideo||e.props.pendingItem===v.d.Audio;return j(x.a,{key:n.id,item:n,onItemSelected:e.onItemSelected,isExpanded:a,onItemExpanded:e.props.onItemExpanded,onItemCollapsed:e.props.onItemCollapsed,mediaPickerUI:e.props.mediaPickerUI,mediaTitle:i,source:e.props.source,childrenWithCallback:e.props.childrenWithCallback,isUploadByLinkDisabled:e.props.isUploadByLinkDisabled,isDisabled:e.props.isDisabled})}if(n.type===v.d.Embed){var o,r,s=e.props.storyItem.storyMapUserPrivileges.canEmbedWebContent;return"video"===n.id||s||(o=!0,r=e.props.intl.formatMessage({id:"publicAccount.disabled"})),j(w.a,{key:n.id,item:n,onItemSelected:e.onItemSelected,mediaPickerUI:e.props.mediaPickerUI,isExpanded:e.props.pendingItem===v.d.Embed,onItemExpanded:e.props.onItemExpanded,onItemCollapsed:e.props.onItemCollapsed,isDisabled:o,disabledTooltipStr:r})}if(n.type===v.d.Map)return j(O.a,{key:n.id,item:n,isExpanded:e.props.pendingItem===v.d.Map,onItemSelected:e.onItemSelected,onItemExpanded:e.props.onItemExpanded,onItemCollapsed:e.props.onItemCollapsed,mediaPickerUI:e.props.mediaPickerUI,source:e.props.source});throw new Error("Error: unexpected item type passed to MediaPickerMenu")}));return j("div",{className:u.a.dynamic([["526033251",[y.a.gapped("row",g.a.spacing.xxxs)]]])+" media-picker-menu"},t,j(u.a,{id:"526033251",dynamic:[y.a.gapped("row",g.a.spacing.xxxs)]},[".media-picker-menu.__jsx-style-dynamic-selector{".concat(y.a.gapped("row",g.a.spacing.xxxs),";}")]))}}]),p}(d.PureComponent);t.a=Object(f.c)(Object(m.c)(Object(b.b)(k)))},"6ATX":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"map",path:"M31 31H1V1h30zM25.374 2a1.032 1.032 0 0 1-.546.676c-1.297.613-2.535 1.367-2.535 2.203 0 .564.464.822.464 1.389 0 .797-.966 1.007-1.189 1.67a.885.885 0 0 0-.046.283c0 .568.618 1.75-.822 1.646-.347-.023-.994.637-.928.979.156.771.515 2.21-.72 2.879-1.006.544-.964 2.058-2.108 2.058-.694 0-.952-.72-1.645-.72a.942.942 0 0 0-.875.976c0 .734-.617 1.955-1.595 1.955a1.282 1.282 0 0 1-1.234-.617c-.309-.553-.591-1.08-1.235-1.08a1.238 1.238 0 0 0-1.182 1.287c0 .5.205.783.205 1.285 0 .772-.616 1.131-.616 1.904a.81.81 0 0 0 .874.72c.707 0 .89-.382 1.593-.31.503.051.67.708.67 1.03 0 1.299-2.203 1.717-1.39 3.342.329.654 2.418.347 2.418 1.441a3.258 3.258 0 0 1-.213 1.115 4.266 4.266 0 0 0-.352 1.508c0 .067.01.207.026.381h4.774c.215-.754.833-1.53.833-1.96v-.058c-1-.365-.429-.591-.429-.972 0-1.158 1.784-1.004 1.784-2.16 0-.348-.368-.477-.368-.823 0-.85 1.013-1.017 1.013-1.865v-1.004c0-.385.504-.65.89-.65.436 0 .76.293 1.198.293.965 0 1.04-1.48 2.006-1.48.72 0 .708.85 1.235 1.314a2.48 2.48 0 0 0 1.813.365h1.26c.207 0 .966-.365 1.598-.54V2z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},"6Fw+":function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("ERkP"),l=n.n(c),p=n("cCzZ"),u=n("2EIY"),d=l.a.createElement;function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(h()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return d(u.a,this.props,d(p.default,{backgroundColor:this.props.backgroundColor},this.props.children))}}]),c}(c.PureComponent);t.a=m},"6LyH":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("ERkP"),p=n.n(l),u=n("w3Wr"),d=p.a.createElement;function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){return function(t){Object(c.a)(p,t);var n,l=(n=p,function(){var e,t=Object(s.a)(n);if(h()){var i=Object(s.a)(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Object(r.a)(this,e)});function p(){return Object(a.a)(this,p),l.apply(this,arguments)}return Object(o.a)(p,[{key:"render",value:function(){var t=this;return d(u.a.Consumer,null,(function(n){return d(e,Object(i.a)({},t.props,{storyOffsetContext:n}))}))}}]),p}(l.PureComponent)}},"6OG6":function(e,t,n){"use strict";n.r(t),n.d(t,"SwipeViewer",(function(){return W}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("MEC2");function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(f()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"caret-right",path:"M12 5.9L22.1 16 12 26.1z",viewBox:"0 0 32 32"})}return a}(m.a);function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(g()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"caret-left",path:"M20 26.1L9.9 16 20 5.9z",viewBox:"0 0 32 32"})}return a}(m.a),b=n("Z4N4"),x=n("NX3A"),O=n("WXRn"),w=n("ix8t"),j=n("Z3Fy"),C=n("u0WM"),k=n("gZeU"),S=n("xWUc"),I=n("A7aE"),P=n("VtSi"),R=n.n(P),E=n("O94r"),D=n.n(E),T=n("h88A"),M=n("4z/A"),A=h.a.createElement;function N(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var L=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(N()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"mapInfoLegendIcon",Object(d.createRef)()),Object(l.a)(Object(o.a)(t),"legendRef1",Object(d.createRef)()),Object(l.a)(Object(o.a)(t),"legendRef2",Object(d.createRef)()),Object(l.a)(Object(o.a)(t),"legendHeadingStyles",{styles:A(u.a,{id:"1005771756",dynamic:[b.a.typography.h5()]},[".heading.__jsx-style-dynamic-selector{".concat(b.a.typography.h5(),";}")]),className:u.a.dynamic([["1005771756",[b.a.typography.h5()]]])}),Object(l.a)(Object(o.a)(t),"showExpandedLegend",(function(){t.setState({isShowingExpandedLegend:!0})})),Object(l.a)(Object(o.a)(t),"hideExpandedLegend",(function(){t.setState({isShowingExpandedLegend:!1})})),Object(l.a)(Object(o.a)(t),"renderExpandedLegend",(function(){return A("div",{className:u.a.dynamic([["3661246716",[x.a.spacing.xs,x.a.spacing.xs,x.a.color.white,x.a.color.antiFlashWhite]]])+" "+(D()("expanded-legend-container",{hide:!t.state.isShowingExpandedLegend})||"")},t.renderLegend1(),A("span",{className:u.a.dynamic([["3661246716",[x.a.spacing.xs,x.a.spacing.xs,x.a.color.white,x.a.color.antiFlashWhite]]])+" "+(D()("divider",{hide:!t.props.views[0]||!t.props.views[1]})||"")}),t.renderLegend2(),A(u.a,{id:"3661246716",dynamic:[x.a.spacing.xs,x.a.spacing.xs,x.a.color.white,x.a.color.antiFlashWhite]},[".expanded-legend-container.__jsx-style-dynamic-selector{padding:".concat(x.a.spacing.xs,";display:grid;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;grid-gap:").concat(x.a.spacing.xs,";background-color:").concat(x.a.color.white,";}"),".divider.__jsx-style-dynamic-selector{border-top:1px solid ".concat(x.a.color.antiFlashWhite,";}"),".expanded-legend-container.hide.__jsx-style-dynamic-selector,.divider.hide.__jsx-style-dynamic-selector{display:none;}"]))})),Object(l.a)(Object(o.a)(t),"renderLegend1",(function(){var e;return A("div",{hidden:!t.props.views[0]},A("h5",{className:D()("heading",t.legendHeadingStyles.className)},null===(e=t.props.views[0])||void 0===e?void 0:e.title),A("div",{"data-legend1":!0,ref:t.legendRef1}),t.legendHeadingStyles.styles)})),Object(l.a)(Object(o.a)(t),"renderLegend2",(function(){var e;return A("div",{hidden:!t.props.views[1]},A("h5",{className:D()("heading",t.legendHeadingStyles.className)},null===(e=t.props.views[1])||void 0===e?void 0:e.title),A("div",{"data-legend2":!0,ref:t.legendRef2}),t.legendHeadingStyles.styles)})),Object(l.a)(Object(o.a)(t),"renderLegendIcon",(function(){var e=t.props.storyDesign.storyTheme.themeVariables.backgroundColor||x.a.color.white,n=t.props.storyDesign.storyTheme.themeVariables.bodyColor||x.a.color.darkGreen;return A("div",{ref:t.mapInfoLegendIcon,className:u.a.dynamic([["510613281",[b.a.circle(x.a.spacing.lg),b.a.center(),b.a.shadow.xs(),e]]])+" "+(D()("legend-icon-container",{hide:t.state.isShowingExpandedLegend})||"")},A(T.a,{color:n,width:x.a.spacing.xxs,height:"auto"}),A(u.a,{id:"510613281",dynamic:[b.a.circle(x.a.spacing.lg),b.a.center(),b.a.shadow.xs(),e]},[".legend-icon-container.__jsx-style-dynamic-selector{".concat(b.a.circle(x.a.spacing.lg)," overflow:hidden;cursor:pointer;").concat(b.a.center()," ").concat(b.a.shadow.xs()," background-color:").concat(e,";}"),".legend-icon-container.hide.__jsx-style-dynamic-selector{display:none;}"]))})),t.state={isShowingExpandedLegend:!1},t}return Object(a.a)(p,[{key:"componentDidUpdate",value:function(e,t){var n,i,a,o,r,s,c,l;return R.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===(n=this.props.views[0])||void 0===n?void 0:n.view,s=null===(i=this.props.views[1])||void 0===i?void 0:i.view,c=null===(a=e.views[0])||void 0===a?void 0:a.view,l=null===(o=e.views[1])||void 0===o?void 0:o.view,this.isCreatingLegend1){t.next=11;break}if(!r||!this.legendRef1.current||this.esriLegend1&&r===c){t.next=11;break}return this.isCreatingLegend1=!0,t.next=9,R.a.awrap(Object(M.f)(this.legendRef1.current,r));case 9:this.esriLegend1=t.sent,this.isCreatingLegend1=!1;case 11:if(this.isCreatingLegend2){t.next=18;break}if(!s||!this.legendRef2.current||this.esriLegend2&&s===l){t.next=18;break}return this.isCreatingLegend2=!0,t.next=16,R.a.awrap(Object(M.f)(this.legendRef2.current,s));case 16:this.esriLegend2=t.sent,this.isCreatingLegend2=!1;case 18:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"render",value:function(){return A("div",{onMouseEnter:this.showExpandedLegend,onMouseLeave:this.hideExpandedLegend,onTouchStart:this.showExpandedLegend,className:u.a.dynamic([["3511376808",[x.a.spacing.xs,x.a.spacing.xs,this.props.isFullScreen?"block":"none",x.a.spacing.xs,x.a.responsiveBreakpoints.medium]]])+" legend-container"},this.renderExpandedLegend(),this.renderLegendIcon(),A(u.a,{id:"3511376808",dynamic:[x.a.spacing.xs,x.a.spacing.xs,this.props.isFullScreen?"block":"none",x.a.spacing.xs,x.a.responsiveBreakpoints.medium]},[".legend-container.__jsx-style-dynamic-selector{position:absolute;left:".concat(x.a.spacing.xs,";bottom:").concat(x.a.spacing.xs,";z-index:6;max-width:26.4rem;height:auto;max-height:80%;overflow-y:auto;display:").concat(this.props.isFullScreen?"block":"none",";background-color:transparent;}"),".legend-container.__jsx-style-dynamic-selector .esri-legend__service{padding-left:0;padding-right:0;padding-bottom:0;}","html[dir='rtl'] .legend-container.__jsx-style-dynamic-selector{left:unset;right:".concat(x.a.spacing.xs,";}"),"@media (min-width:".concat(x.a.responsiveBreakpoints.medium,"){.legend-container.__jsx-style-dynamic-selector{display:block;}}")]))}}]),p}(d.PureComponent),G=Object(I.b)(L),_=h.a.createElement;function B(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var W=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(B()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"setResizableMediaWidth",(function(){setTimeout((function(){var e,n,i=null===(e=t.containerRef.current)||void 0===e?void 0:e.offsetWidth,a=null===(n=t.resizableMediaRef.current)||void 0===n?void 0:n.children;if(a)for(var o=0,r=Array.from(a);o<r.length;o++){r[o].style.width="".concat(i,"px")}if("undefined"!==typeof t.props.mediaPickerClassname){var s,c=null===(s=t.endMediaRef.current)||void 0===s?void 0:s.querySelector(".".concat(t.props.mediaPickerClassname));c&&(c.style.width="".concat(i,"px"))}i&&t.setElementsPositions(i)}),500)})),Object(l.a)(Object(o.a)(t),"renderSwipeContainer",(function(){var e,n,i,a,o={styles:_(u.a,{id:"2088006277"},[".icon.jsx-2088006277 svg{margin:0 -5px;}"]),className:"jsx-2088006277"},r=t.props.storyDesign.storyTheme.themeVariables,s=r.backgroundColor,c=r.bodyColor,l=Object(O.b)()?y:v,p=Object(O.b)()?v:y;Array.isArray(t.props.children)&&(e=null===(i=t.props.children)||void 0===i?void 0:i[0],n=null===(a=t.props.children)||void 0===a?void 0:a[1]);return _(d.Fragment,null,_("div",{"data-blockid":t.props.blockId,ref:t.containerRef,role:"button",onMouseMove:t.state.isSwiping?t.onSwipe:void 0,onMouseUp:t.state.isSwiping?void 0:t.onSwipeStop,onTouchMove:t.state.isSwiping?t.onTouchSwipe:void 0,onTouchEnd:t.state.isSwiping?void 0:t.onSwipeStop,className:u.a.dynamic([["2113220603",[t.props.storyDesign.storyTheme.themeVariables.backgroundColor,b.a.center(),x.a.spacing.xxxxs,s,s,x.a.spacing.xxxs,b.a.center(),S.a,x.a.spacing.xs,t.props.isFullScreen?0:1]]])+" swipe-container"},_("div",{ref:t.resizableMediaRef,className:u.a.dynamic([["2113220603",[t.props.storyDesign.storyTheme.themeVariables.backgroundColor,b.a.center(),x.a.spacing.xxxxs,s,s,x.a.spacing.xxxs,b.a.center(),S.a,x.a.spacing.xs,t.props.isFullScreen?0:1]]])+" start-media"},e||_("div",{className:u.a.dynamic([["2113220603",[t.props.storyDesign.storyTheme.themeVariables.backgroundColor,b.a.center(),x.a.spacing.xxxxs,s,s,x.a.spacing.xxxs,b.a.center(),S.a,x.a.spacing.xs,t.props.isFullScreen?0:1]]])+" placeholder-container"},_(w.a,null))),_("div",{ref:t.endMediaRef,className:u.a.dynamic([["2113220603",[t.props.storyDesign.storyTheme.themeVariables.backgroundColor,b.a.center(),x.a.spacing.xxxxs,s,s,x.a.spacing.xxxs,b.a.center(),S.a,x.a.spacing.xs,t.props.isFullScreen?0:1]]])+" end-media"},n||_(w.a,null)),_("div",{role:"button",ref:t.swipeHandleRef,onMouseDown:t.onSwipeStart,onMouseUp:t.onSwipeStop,onTouchStart:t.onSwipeStart,onTouchEnd:t.onSwipeStop,className:u.a.dynamic([["2113220603",[t.props.storyDesign.storyTheme.themeVariables.backgroundColor,b.a.center(),x.a.spacing.xxxxs,s,s,x.a.spacing.xxxs,b.a.center(),S.a,x.a.spacing.xs,t.props.isFullScreen?0:1]]])+" swipe-handle-container"},_("div",{className:u.a.dynamic([["2113220603",[t.props.storyDesign.storyTheme.themeVariables.backgroundColor,b.a.center(),x.a.spacing.xxxxs,s,s,x.a.spacing.xxxs,b.a.center(),S.a,x.a.spacing.xs,t.props.isFullScreen?0:1]]])+" swipe-divider"}),_("div",{className:u.a.dynamic([["2113220603",[t.props.storyDesign.storyTheme.themeVariables.backgroundColor,b.a.center(),x.a.spacing.xxxxs,s,s,x.a.spacing.xxxs,b.a.center(),S.a,x.a.spacing.xs,t.props.isFullScreen?0:1]]])+" swipe-handle"},_("div",{className:u.a.dynamic([["2113220603",[t.props.storyDesign.storyTheme.themeVariables.backgroundColor,b.a.center(),x.a.spacing.xxxxs,s,s,x.a.spacing.xxxs,b.a.center(),S.a,x.a.spacing.xs,t.props.isFullScreen?0:1]]])+" swipe-icon-container"},_(l,{width:x.a.spacing.sm,height:"auto",color:c,className:u.a.dynamic([["2113220603",[t.props.storyDesign.storyTheme.themeVariables.backgroundColor,b.a.center(),x.a.spacing.xxxxs,s,s,x.a.spacing.xxxs,b.a.center(),S.a,x.a.spacing.xs,t.props.isFullScreen?0:1]]])+" "+(o.className||"")}),_(p,{width:x.a.spacing.sm,height:"auto",color:c,className:u.a.dynamic([["2113220603",[t.props.storyDesign.storyTheme.themeVariables.backgroundColor,b.a.center(),x.a.spacing.xxxxs,s,s,x.a.spacing.xxxs,b.a.center(),S.a,x.a.spacing.xs,t.props.isFullScreen?0:1]]])+" "+(o.className||"")})))),t.props.legendViews&&Object.keys(t.props.legendViews).length&&_(G,{views:t.props.legendViews,isFullScreen:t.props.isFullScreen})),o.styles,_(u.a,{id:"2113220603",dynamic:[t.props.storyDesign.storyTheme.themeVariables.backgroundColor,b.a.center(),x.a.spacing.xxxxs,s,s,x.a.spacing.xxxs,b.a.center(),S.a,x.a.spacing.xs,t.props.isFullScreen?0:1]},[".swipe-container.__jsx-style-dynamic-selector{position:relative;overflow:hidden;width:100%;height:100%;}",".end-media.__jsx-style-dynamic-selector{position:relative;width:100%;height:100%;z-index:0;}",".start-media.__jsx-style-dynamic-selector{position:absolute;top:0;left:0;width:50%;height:100%;overflow:hidden;z-index:1;}","html[dir='rtl'] .start-media.__jsx-style-dynamic-selector{right:0;left:unset;}",".placeholder-container.__jsx-style-dynamic-selector{height:100%;background:".concat(t.props.storyDesign.storyTheme.themeVariables.backgroundColor,";}"),".swipe-handle-container.__jsx-style-dynamic-selector{position:absolute;".concat(b.a.center()," height:100%;left:50%;top:0;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);cursor:col-resize;z-index:2;}"),".swipe-divider.__jsx-style-dynamic-selector{position:absolute;top:0;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);width:".concat(x.a.spacing.xxxxs,";height:100%;background:").concat(s,";z-index:0;}"),".swipe-handle.__jsx-style-dynamic-selector{position:relative;padding:0 0.2rem;border-radius:50%;background:".concat(s,";z-index:1;}"),".swipe-icon-container.__jsx-style-dynamic-selector{position:relative;margin:".concat(x.a.spacing.xxxs," 0;").concat(b.a.center(),";}"),".swipe-container.__jsx-style-dynamic-selector .".concat(S.a,"{top:unset;bottom:").concat(x.a.spacing.xs,";opacity:").concat(t.props.isFullScreen?0:1,";}"),"@-webkit-keyframes media-slide-in-__jsx-style-dynamic-selector{0%{width:0%;}50%{width:55%;}100%{width:50%;}}","@keyframes media-slide-in-__jsx-style-dynamic-selector{0%{width:0%;}50%{width:55%;}100%{width:50%;}}","@-webkit-keyframes handle-slide-in-__jsx-style-dynamic-selector{0%{left:0;}50%{left:55%;}100%{left:50%;}}","@keyframes handle-slide-in-__jsx-style-dynamic-selector{0%{left:0;}50%{left:55%;}100%{left:50%;}}","@-webkit-keyframes handle-slide-in-rtl-__jsx-style-dynamic-selector{0%{right:0;}50%{right:55%;}100%{right:50%;}}","@keyframes handle-slide-in-rtl-__jsx-style-dynamic-selector{0%{right:0;}50%{right:55%;}100%{right:50%;}}"]))})),Object(l.a)(Object(o.a)(t),"calculateBounds",(function(){if(t.containerRef.current&&t.resizableMediaRef.current&&t.swipeHandleRef.current){var e=t.containerRef.current.getBoundingClientRect();t.containerOffset=e.left+window.scrollX,t.containerWidth=t.containerRef.current.offsetWidth,t.minLeft=t.containerOffset,t.maxLeft=t.containerOffset+t.containerWidth}})),Object(l.a)(Object(o.a)(t),"onSwipeStart",(function(e){var n,i;t.addWindowListeners(),null===(n=t.swipeHandleRef.current)||void 0===n||n.classList.add("draggable"),null===(i=t.resizableMediaRef.current)||void 0===i||i.classList.add("resizable"),t.setState({isSwiping:!0}),e.preventDefault()})),Object(l.a)(Object(o.a)(t),"onSwipe",(function(e){var n=e.clientX,i=t.getWidthValue(n);t.applyWidth(i,"mouseup")})),Object(l.a)(Object(o.a)(t),"onTouchSwipe",(function(e){var n,i=null===(n=e.touches[0])||void 0===n?void 0:n.clientX,a=t.getWidthValue(i);t.applyWidth(a,"touchend")})),Object(l.a)(Object(o.a)(t),"applyWidth",(function(e,n){var i,a,o=null===(i=t.containerRef.current)||void 0===i?void 0:i.querySelector(".draggable"),r=null===(a=t.containerRef.current)||void 0===a?void 0:a.querySelector(".resizable");if(o){var s=function(){var e;o.classList.remove("draggable"),null===(e=t.resizableMediaRef.current)||void 0===e||e.classList.remove("resizable")};if(Object(O.b)()){var c=parseFloat(e.replace("%",""));o.style.left=100-c+"%"}else o.style.left=e;o.addEventListener(n,s),o.removeEventListener(n,s)}r&&(r.style.width=e)})),Object(l.a)(Object(o.a)(t),"onSwipeStop",(function(){var e,n;null===(e=t.swipeHandleRef.current)||void 0===e||e.classList.remove("draggable"),null===(n=t.resizableMediaRef.current)||void 0===n||n.classList.remove("resizable"),t.removeWindowListeners(),t.setState({isSwiping:!1})})),Object(l.a)(Object(o.a)(t),"addWindowListeners",(function(){window.addEventListener("mouseup",t.onSwipeStop),window.addEventListener("touchend",t.onSwipeStop)})),Object(l.a)(Object(o.a)(t),"removeWindowListeners",(function(){window.removeEventListener("mouseup",t.onSwipeStop),window.removeEventListener("touchend",t.onSwipeStop)})),Object(l.a)(Object(o.a)(t),"getWidthValue",(function(e){var n=e;e<t.minLeft?n=t.minLeft:e>=t.maxLeft&&(n=t.maxLeft);var i=100*(n-t.containerOffset)/t.containerWidth;return Object(O.b)()&&(i=100-i),i+"%"})),Object(l.a)(Object(o.a)(t),"setElementsPositions",(function(e){var n,i;if("undefined"!==typeof t.props.mediaPickerClassname){var a,o,r=null===(a=t.resizableMediaRef.current)||void 0===a?void 0:a.querySelector(".".concat(t.props.mediaPickerClassname));r&&(Object(O.b)()?r.style.right="".concat(-e/4*3,"px"):r.style.left="".concat(e/4,"px"));var s=null===(o=t.endMediaRef.current)||void 0===o?void 0:o.querySelector(".".concat(t.props.mediaPickerClassname));t.setElementPosition(s,75)}var c=null===(n=t.resizableMediaRef.current)||void 0===n?void 0:n.querySelector(".".concat(S.a));t.setElementPosition(c,25);var l=null===(i=t.endMediaRef.current)||void 0===i?void 0:i.querySelector(".".concat(S.a));t.setElementPosition(l,75)})),Object(l.a)(Object(o.a)(t),"setElementPosition",(function(e,t){e&&(Object(O.b)()?e.style.left=100-t+"%":e.style.left=t+"%")})),t.containerRef=Object(d.createRef)(),t.resizableMediaRef=Object(d.createRef)(),t.swipeHandleRef=Object(d.createRef)(),t.endMediaRef=Object(d.createRef)(),t.state={isSwiping:!1},t}return Object(a.a)(p,[{key:"componentDidMount",value:function(){this.setResizableMediaWidth(),this.calculateBounds(),"function"===typeof this.props.observe&&this.containerRef.current&&this.props.observe(this.containerRef.current),window.addEventListener("resize",this.setResizableMediaWidth)}},{key:"componentDidUpdate",value:function(e){var t;this.containerWidth!==(null===(t=this.containerRef.current)||void 0===t?void 0:t.offsetWidth)&&this.calculateBounds(),this.props.children!==e.children&&this.setResizableMediaWidth()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setResizableMediaWidth)}},{key:"render",value:function(){var e=this.props.mediaWrapperCaption||_(C.a,{text:this.props.caption,alignmentLg:this.props.captionAlignmentLg,customCaptionColors:this.props.customCaptionColors}),t="function"===typeof this.props.getSwipeType&&"map"===this.props.getSwipeType();return _(k.a,{aspectRatio:this.props.swipeAspectRatio,caption:e,fillParent:this.props.isFullScreen,heightConstrained:t,isFullScreen:t?this.props.isFullScreen:void 0,onToggleFullScreen:t?this.props.onToggleFullScreen:void 0,onFullScreenTransitionEnd:this.setResizableMediaWidth},t?_(j.a,{isFullScreen:!1,showMask:!1},this.renderSwipeContainer()):this.renderSwipeContainer())}}]),p}(d.PureComponent);t.default=Object(I.b)(W)},"6Omi":function(e,t,n){"use strict";n.r(t),n.d(t,"Editor",(function(){return pr}));var i=n("fGyu"),a=n("VtSi"),o=n.n(a),r=n("cxan"),s=n("9fIP"),c=n("MMYH"),l=n("pWxA"),p=n("K/z8"),u=n("sRHE"),d=n("8K1b"),h=n("zjfJ"),m=n("yFcC"),f=n.n(m),y=n("ERkP"),g=n.n(y),v=n("2SGB"),b=n("YQpL"),x=n("/rJK"),O=n.n(x),w=n("ZcpU"),j=n("KA4O");var C=n("t7DY"),k=n("dV92"),S=n("NX3A"),I=n("bAEK"),P=n("bzXW"),R=n("wwFW"),E=n("HW3u"),D=n("mjBc"),T=n("Y/5s"),M=n("eCu0"),A=n("n32U"),N=n("txt0"),L=n("Z34l"),G=n("AuFC"),_=n("QQI7"),B=n("HbGN"),W=n("liFR"),V=n("7Vmz"),F=n("Qquf"),U=n("+ol3"),z=n("QOs2"),H=g.a.createElement;function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}Object(y.memo)((function(e){return H(U.a,{shouldRenderTextFirst:!0,text:H(v.a,{id:"builder.map.editingMultipleMap"}),icon:H(W.a,{tooltipContent:e.intl.formatMessage({id:"builder.map.editingMultipleMapWarning"}),placement:"top"},H(V.a,{color:S.a.color.alertRed,width:S.a.spacing.xxs}))})}));var K=Object(y.memo)((function(e){var t=e.isForOverriding,n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(B.a)(e,["isForOverriding"]),{heading:H(v.a,t?{id:"builder.map.adjustExpressMapAppearance"}:{id:"builder.map.editExpressMap"}),primaryButtonTitle:H(v.a,{id:"viewer.common.done"}),secondaryButtonTitle:H(v.a,{id:"common.cancel"}),info:H("div",{className:"jsx-3896288173"},H(U.a,{text:H(v.a,{id:"builder.map.overview"}),onClick:e.showOnboardingModal,icon:H(F.a,{color:S.a.color.deepLilac,width:S.a.spacing.xxs})}),H(f.a,{id:"3896288173"},["div.jsx-3896288173{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:100%;width:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}"]))});return H(z.a,n)})),X=Object(b.c)(K),J=n("ZdeG"),Z=n("O9+8"),q=n("WXRn"),Q=n("ADNR"),$=n("MEC2");function ee(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var te=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(ee()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){Object(s.a)(this,i);return n.call(this,e,{iconName:"select-rectangle",path:"M22 4h-3V2h3zM4 8H2v3h2zm22 3h2V8h-2zm0-5h2V2h-4v2h2zm0 10h2v-3h-2zM4 13H2v3h2zm4 15h3v-2H8zm5 0h3v-2h-3zM9 4h3V2H9zm5 0h3V2h-3zM4 24H2v4h4v-2H4zm0-6H2v3h2zM2 6h2V4h2V2H2zm24.34 25.926l3.582-1.802-3.087-6.16H32l-12-8.756v14.805l3.176-4.353z",viewBox:"0 0 32 32"})}return i}($.a),ne=n("OQoL"),ie=n("o8Z9"),ae=n("MKkT"),oe=n("r3il"),re=n("f95f");function se(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ce=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(se()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){Object(s.a)(this,i);return n.call(this,e,{iconName:"freehand",path:"M29.533 28.106a15.993 15.993 0 0 1-6.466-2.657c3.222-.713 6.42-3.789 6.78-7.28.423-4.108-2.968-6.32-6.764-6.055a4.824 4.824 0 0 0-3.561 1.84c-2.129 2.631-1.51 7.085.01 10.041a10.475 10.475 0 0 1-5.18-1.75 5.196 5.196 0 0 1-2.328-3.441c-.232-1.71.687-3.578 1.577-5.388 1.101-2.238 2.149-4.575.545-6.58a2.012 2.012 0 0 0-1.512-.817l-.128-.004c-2.512 0-4.958 5.237-7.754 5.237-.816 0-2.076-.745-2.02-1.85.107-2.094 2.814-4.876 5.266-6.874L6.941 1.195C5.606 2.28 1.243 5.989 1.034 9.345c-.133 2.134 2.017 3.619 3.675 3.619 3.563 0 6.427-5.243 7.867-5.243.038 0 .101.001.242.178.885 1.104.418 2.408-.743 4.769-.954 1.94-2.137 4.139-1.835 6.364a6.952 6.952 0 0 0 3.037 4.705 12.685 12.685 0 0 0 7.099 1.992c.144 0 .287-.003.433-.008 2.815 2.919 7.166 3.852 8.468 4.07l.514.086.213-1.69zM23.07 13.81c2.778-.234 5.39 1.22 5.085 4.188-.284 2.765-2.965 5.257-5.482 5.799a10.523 10.523 0 0 1-1.135.177 6.023 6.023 0 0 1-.168-.222c-1.546-2.129-2.351-6.472-.527-8.731a3.07 3.07 0 0 1 2.227-1.211z",viewBox:"0 0 32 32"})}return i}($.a),le=n("bcaP");function pe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ue=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(pe()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){Object(s.a)(this,i);return n.call(this,e,{iconName:"freehand-area",path:"M25.46 9.37C19.24-.273 7.51 2.183 7.082 10.816c-.301 6.097-4.115 6.644-4.115 9.623 0 4.117 3.721 5.262 5.581 5.262s3.754-.87 7.442 1.051c14.882 7.754 14.882-8.989 9.468-17.384zM13.12 4.347l-4.77 4.77a6.554 6.554 0 0 1 4.77-4.77zm-5.104 6.476c.006-.116.022-.228.032-.342l6.36-6.36a8.565 8.565 0 0 1 .893-.058 9.077 9.077 0 0 1 1.881.223l-9.731 9.73v.001a12.262 12.262 0 0 0 .565-3.194zm-4.149 9.654c0-.86.43-1.428 1.256-2.44a14.967 14.967 0 0 0 1.518-2.15l11.404-11.4a10.307 10.307 0 0 1 2.04.898L3.978 21.491a4.91 4.91 0 0 1-.11-1.013zm.371 1.814L20.727 5.805a12.319 12.319 0 0 1 1.652 1.286L5.583 23.886a3.67 3.67 0 0 1-1.344-1.594zm4.249 2.483a6.25 6.25 0 0 1-2.22-.511L22.903 7.627a14.664 14.664 0 0 1 1.33 1.608l-15.53 15.53c-.071.003-.147.01-.216.01zm2.886-.198a14.297 14.297 0 0 0-1.515.095L24.684 9.847l.009.013a18.075 18.075 0 0 1 1.048 1.87L12.77 24.7a9.06 9.06 0 0 0-1.397-.123zm4.442 1.076a11.979 11.979 0 0 0-2.155-.783l12.403-12.403a21.195 21.195 0 0 1 .81 2.128zm.724.338l10.568-10.568a21.879 21.879 0 0 1 .529 2.41l-9.082 9.082a22.749 22.749 0 0 1-2.015-.924zm10.322-.538a4.374 4.374 0 0 1-4.169 2.397h-.012l5.014-5.014a8.225 8.225 0 0 1-.833 2.617zm-5.17 2.324a12.009 12.009 0 0 1-2.362-.576l8.426-8.426a16.858 16.858 0 0 1 .068 2.87z",viewBox:"0 0 32 32"})}return i}($.a);function de(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var he=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(de()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){Object(s.a)(this,i);return n.call(this,e,{iconName:"text",path:"M27 4.04V10h-.766c-.379-1.74-2.068-2.317-2.803-2.687a6.916 6.916 0 0 0-3.182-.523H18v18.353a2.737 2.737 0 0 0 2.643 1.838h.957V28H10.4v-1.019h.957A2.737 2.737 0 0 0 14 25.143V6.79h-2.249a6.916 6.916 0 0 0-3.182.523c-.735.37-2.424.946-2.803 2.687H5V4.04h22z",viewBox:"0 0 32 32"})}return i}($.a);function me(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var fe=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(me()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){Object(s.a)(this,i);return n.call(this,e,{iconName:"arrow-down-right",path:"M8 12h2.585L2.12 3.415 3.536 2 12 10.586V8h2v6H8z",viewBox:"0 0 16 16"})}return i}($.a);function ye(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ge=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(ye()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){Object(s.a)(this,i);return n.call(this,e,{iconName:"arrow-double-diagonal",path:"M4 5.4V8H2V2h6v2H5.4l6.5 6.6V8h2v6h-6v-2h2.6z",viewBox:"0 0 16 16"})}return i}($.a),ve=n("vfFb"),be=n("RuJI");function xe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Oe=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(xe()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){Object(s.a)(this,i);return n.call(this,e,{iconName:"rectangle",path:"M30 27H2V5h28zM3 26h26V6H3z",viewBox:"0 0 32 32"})}return i}($.a);function we(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var je,Ce,ke=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(we()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){Object(s.a)(this,i);return n.call(this,e,{iconName:"star",path:"M31.965 12.033H19.778L16.008.4l-3.772 11.633H-.035l9.941 7.172L6.12 30.83l9.889-7.194 9.886 7.194-3.788-11.625zm-7.978 16.173l-7.98-5.806-7.982 5.807 3.058-9.386-8.023-5.788h9.903l3.044-9.39 3.043 9.39h9.84l-7.96 5.791z",viewBox:"0 0 32 32"})}return i}($.a),Se=n("Z4N4"),Ie=n("gzH7"),Pe=n("utbi"),Re=g.a.createElement;function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function De(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Te={},Me=(je={},Object(h.a)(je,C.b.SELECT,Q.a),Object(h.a)(je,C.b.SELECT_RECT,te),Object(h.a)(je,C.b.UNDO,ne.a),Object(h.a)(je,C.b.REDO,ie.a),Object(h.a)(je,C.b.POINT_REGULAR,ae.a),Object(h.a)(je,C.b.POINT_NUMBERED,oe.a),Object(h.a)(je,C.b.POLYLINE_BENDING,re.a),Object(h.a)(je,C.b.FREEHAND_POLYLINE_BENDING,ce),Object(h.a)(je,C.b.FREEHAND_CURVE,ce),Object(h.a)(je,C.b.POLYGON,le.a),Object(h.a)(je,C.b.FREEHAND_POLYGON,ue),Object(h.a)(je,C.b.TEXT_LEADERLINE,he),Object(h.a)(je,C.b.ARROW_SINGLE,fe),Object(h.a)(je,C.b.ARROW_DOUBLE,ge),Object(h.a)(je,C.b.POINT_ICON,ve.a),Object(h.a)(je,C.b.CIRCLE,be.a),Object(h.a)(je,C.b.RECTANGLE,Oe),Object(h.a)(je,C.b.STAR,ke),Object(h.a)(je,C.b.POLYLINE_CONSTRAINT,re.a),je),Ae=(Ce={},Object(h.a)(Ce,C.b.SELECT,{tooltipTitleId:"builder.map.select"}),Object(h.a)(Ce,C.b.SELECT_RECT,{tooltipTitleId:"builder.map.groupSelect",tooltipContentFilename:"group-select.mp4",tooltipPosterFilename:"group-select.jpg"}),Object(h.a)(Ce,C.b.UNDO,{tooltipTitleId:"builder.map.undo"}),Object(h.a)(Ce,C.b.REDO,{tooltipTitleId:"builder.map.redo"}),Object(h.a)(Ce,C.b.POINT_REGULAR,{tooltipTitleId:"builder.map.addPoints",tooltipContentFilename:"add-points.mp4",tooltipPosterFilename:"add-points.jpg",tooltipDescriptionId:"builder.map.addPoints.description"}),Object(h.a)(Ce,C.b.POINT_ICON,{tooltipTitleId:"builder.map.addPoints"}),Object(h.a)(Ce,C.b.POINT_NUMBERED,{tooltipTitleId:"builder.map.addNumberedPoints",tooltipContentFilename:"add-numbered-points.mp4",tooltipPosterFilename:"add-numbered-points.jpg",tooltipDescriptionId:"builder.map.addNumberedPoints.description"}),Object(h.a)(Ce,C.b.POLYLINE_BENDING,{tooltipTitleId:"builder.map.drawLines",tooltipContentFilename:"draw-line.mp4",tooltipPosterFilename:"draw-line.jpg",tooltipDescriptionId:"builder.map.drawLines.descriptiion"}),Object(h.a)(Ce,C.b.FREEHAND_POLYLINE_BENDING,{tooltipTitleId:"builder.map.drawFreehandLines"}),Object(h.a)(Ce,C.b.POLYGON,{tooltipTitleId:"builder.map.drawAreas",tooltipContentFilename:"draw-area.mp4",tooltipPosterFilename:"draw-area.jpg"}),Object(h.a)(Ce,C.b.FREEHAND_POLYGON,{tooltipTitleId:"builder.map.drawFreehandAreas"}),Object(h.a)(Ce,C.b.TEXT_LEADERLINE,{tooltipTitleId:"builder.map.addAnnotations",tooltipContentFilename:"add-annotations.mp4",tooltipPosterFilename:"add-annotations.jpg",tooltipDescriptionId:"builder.map.addAnnotations.description"}),Object(h.a)(Ce,C.b.ARROW_SINGLE,{tooltipTitleId:"builder.map.drawArrows",tooltipContentFilename:"draw-arrows.mp4",tooltipPosterFilename:"draw-arrows.jpg"}),Object(h.a)(Ce,C.b.ARROW_DOUBLE,{tooltipTitleId:"builder.map.drawTwoHeadArrows",tooltipContentFilename:"draw-two-headed-arrows.mp4",tooltipPosterFilename:"draw-two-headed-arrows.jpg"}),Object(h.a)(Ce,C.b.CIRCLE,{tooltipTitleId:"builder.map.drawFreehandAreas"}),Object(h.a)(Ce,C.b.RECTANGLE,{tooltipTitleId:"builder.map.drawFreehandAreas"}),Object(h.a)(Ce,C.b.STAR,{tooltipTitleId:"builder.map.drawFreehandAreas"}),Object(h.a)(Ce,C.b.POLYLINE_CONSTRAINT,{tooltipTitleId:"builder.map.drawFreehandAreas"}),Ce),Ne=[{mode:C.b.SELECT},{mode:C.b.SELECT_RECT},{mode:C.b.UNDO},{mode:C.b.REDO}],Le=[[{mode:C.b.POINT_REGULAR},{mode:C.b.POINT_NUMBERED}],[{mode:C.b.POLYLINE_BENDING},{mode:C.b.FREEHAND_POLYLINE_BENDING}],[{mode:C.b.POLYGON},{mode:C.b.FREEHAND_POLYGON}]],Ge=[{mode:C.b.TEXT_LEADERLINE},[{mode:C.b.ARROW_SINGLE},{mode:C.b.ARROW_DOUBLE}]],_e=[[{mode:C.b.CIRCLE},{mode:C.b.RECTANGLE},{mode:C.b.STAR},{mode:C.b.POLYLINE_CONSTRAINT}]],Be=[Ne,Le,Ge],We=function(e){Object(d.a)(a,e);var t,n=(t=a,function(){var e,n=Object(u.a)(t);if(De()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function a(){var e;Object(s.a)(this,a);for(var t=arguments.length,o=new Array(t),c=0;c<t;c++)o[c]=arguments[c];return e=n.call.apply(n,[this].concat(o)),Object(h.a)(Object(l.a)(e),"renderAllDrawingTools",(function(){return[].concat(Be,Object(i.a)(e.props.areLabFeaturesEnabled?[_e]:[])).map((function(t,n){return Re(y.Fragment,{key:n},t.map(e.renderButton),n!==Be.length-1&&Re(Pe.a,null))}))})),Object(h.a)(Object(l.a)(e),"renderButton",(function(t,n){if(Array.isArray(t))return Re(y.Fragment,{key:"frag-".concat(n)},t.map(e.renderButton));var i=Ae[t.mode],a=e.renderDrawingToolButton(t.mode);if("undefined"===typeof i)return a;var o=i.tooltipTitleId,s=i.tooltipDescriptionId,c=i.tooltipContentFilename,l=i.tooltipPosterFilename,p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({tooltipContent:e.props.intl.formatMessage({id:o})},c&&{tooltipTitle:e.props.intl.formatMessage({id:o}),tooltipContent:"".concat(e.props.config.BASE_URL,"/static/videos/expressmap-onboarding/").concat(c),tooltipPoster:"".concat(e.props.config.BASE_URL,"/static/images/expressmap-onboarding-poster-images/").concat(l),tooltipDescription:s&&e.props.intl.formatMessage({id:s}),hasMedia:!0,mediaFormat:"mp4"});return t.mode===C.b.POINT_REGULAR&&e.props.shouldShowNudge?Re(I.a,{key:t.mode,target:Re("div",null,a),title:e.props.intl.formatMessage({id:"builder.map.onboarding.nudge2.title"}),text:e.props.intl.formatMessage({id:"builder.map.onboarding.nudge2.text"}),isShowing:!0,placement:"bottom",onClick:e.props.onNudgeClick}):Re(W.a,Object(r.a)({key:t.mode,placement:"bottom"},p),a)})),Object(h.a)(Object(l.a)(e),"renderDrawingToolButton",(function(t){var n={width:S.a.spacing.xxs,height:S.a.spacing.xxs},i=Me[t],a=e.props.intl.formatMessage({id:Ae[t].tooltipTitleId});switch(t){case C.b.UNDO:return Re(Ie.a,{onClick:e.props.undo,isDisabled:e.props.isDisabled||!e.props.canUndo,ariaLabel:a},Object(q.b)()?Re(ie.a,n):Re(ne.a,n));case C.b.REDO:return Re(Ie.a,{onClick:e.props.redo,isDisabled:e.props.isDisabled||!e.props.canRedo,ariaLabel:a},Object(q.b)()?Re(ne.a,n):Re(ie.a,n));default:return Re(Ie.a,{onClick:e.getDrawingModeSetter(t),isActive:t===e.props.drawingMode,isDisabled:e.props.isDisabled||Te[t],ariaLabel:a},Re(i,n))}})),Object(h.a)(Object(l.a)(e),"getDrawingModeSetter",(function(t){return function(){e.props.onToolSelected(t)}})),e}return Object(c.a)(a,[{key:"render",value:function(){return Re("div",{className:f.a.dynamic([["2785178787",[Se.a.gapped("column",S.a.spacing.xxxs),S.a.spacing.xxs,S.a.responsiveBreakpoints.extraLarge,S.a.spacing.sm]]])+" drawing-toolbar"},this.renderAllDrawingTools(),Re(f.a,{id:"2785178787",dynamic:[Se.a.gapped("column",S.a.spacing.xxxs),S.a.spacing.xxs,S.a.responsiveBreakpoints.extraLarge,S.a.spacing.sm]},[".drawing-toolbar.__jsx-style-dynamic-selector{".concat(Se.a.gapped("column",S.a.spacing.xxxs),";height:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 ").concat(S.a.spacing.xxs,";}"),"@media (min-width:".concat(S.a.responsiveBreakpoints.extraLarge,"){.drawing-toolbar.__jsx-style-dynamic-selector{padding:0 ").concat(S.a.spacing.sm,";}}")]))}}]),a}(y.PureComponent),Ve=Object(G.c)(Object(D.b)(Object(b.c)(We))),Fe=n("hJks"),Ue=n("54/T"),ze=n("LqVs"),He=n("nVDo"),Ye=n("RP1v"),Ke=n("T+qs"),Xe=n("e3Gu"),Je=n("2gSQ"),Ze=n("+L/X"),qe=n("60Hg"),Qe=n("nylY"),$e=n("Lri9"),et=n("72yd"),tt=n("cuUk"),nt=g.a.createElement;function it(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var at=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(it()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){var t;return Object(s.a)(this,i),t=n.call(this,e),Object(h.a)(Object(l.a)(t),"renderLoadedState",(function(){return nt("div",{className:f.a.dynamic([["4189464077",[t.props.src||t.state.localImage,Se.a.hexA(S.a.color.haikuBlack,.8)]]])+" loaded-state"},t.renderButton("remove",t.removeImage),nt(f.a,{id:"4189464077",dynamic:[t.props.src||t.state.localImage,Se.a.hexA(S.a.color.haikuBlack,.8)]},[".loaded-state.__jsx-style-dynamic-selector{height:100%;background-image:url(".concat(t.props.src||t.state.localImage,");background-size:cover;background-repeat:no-repeat;background-position:center;}"),".loaded-state.__jsx-style-dynamic-selector>button{opacity:0;background-color:transparent;-webkit-transition:0.2s ease-in-out;transition:0.2s ease-in-out;}",".loaded-state.__jsx-style-dynamic-selector>button:hover,.loaded-state.__jsx-style-dynamic-selector>button:focus{opacity:1;background-color:".concat(Se.a.hexA(S.a.color.haikuBlack,.8),";}")]))})),Object(h.a)(Object(l.a)(t),"renderEmptyState",(function(e,n,i,a,o,r){return nt("div",{onDrop:n,onDragOver:i,onDragLeave:a,onDragEnd:a,className:f.a.dynamic([["1011650470",[r?S.a.color.bleuDeFrance:"transparent",location.origin,t.props.config.BASE_URL]]])+" empty-state"},t.renderButton("add",e),nt(f.a,{id:"1011650470",dynamic:[r?S.a.color.bleuDeFrance:"transparent",location.origin,t.props.config.BASE_URL]},[".empty-state.__jsx-style-dynamic-selector{height:100%;background-color:".concat(r?S.a.color.bleuDeFrance:"transparent",";background-image:url(").concat(location.origin).concat(t.props.config.BASE_URL,"/static/images/builder/map/popup-image-editor-background.svg);background-size:cover;background-repeat:no-repeat;background-position:center;}")]))})),Object(h.a)(Object(l.a)(t),"renderButton",(function(e,t){var n="add"===e?qe.a:Qe.a;return nt("button",{onClick:t,className:f.a.dynamic([["1720405642",[Se.a.gappedList(S.a.spacing.xxxs),Se.a.typography.body12Bold(),S.a.color.cambridgeBlue,Se.a.circle(S.a.spacing.lg),Se.a.center(),Se.a.hexA(S.a.color.coolGrey,.7)]]])},nt("div",{className:f.a.dynamic([["1720405642",[Se.a.gappedList(S.a.spacing.xxxs),Se.a.typography.body12Bold(),S.a.color.cambridgeBlue,Se.a.circle(S.a.spacing.lg),Se.a.center(),Se.a.hexA(S.a.color.coolGrey,.7)]]])+" button-content"},nt("div",{className:f.a.dynamic([["1720405642",[Se.a.gappedList(S.a.spacing.xxxs),Se.a.typography.body12Bold(),S.a.color.cambridgeBlue,Se.a.circle(S.a.spacing.lg),Se.a.center(),Se.a.hexA(S.a.color.coolGrey,.7)]]])+" circle"},nt(n,{height:S.a.spacing.xxs,width:"auto",color:S.a.color.haikuGreen,className:f.a.dynamic([["1720405642",[Se.a.gappedList(S.a.spacing.xxxs),Se.a.typography.body12Bold(),S.a.color.cambridgeBlue,Se.a.circle(S.a.spacing.lg),Se.a.center(),Se.a.hexA(S.a.color.coolGrey,.7)]]])})),nt(v.a,"add"===e?{id:"builder.common.addImage"}:{id:"builder.map.removeImage"})),nt(f.a,{id:"1720405642",dynamic:[Se.a.gappedList(S.a.spacing.xxxs),Se.a.typography.body12Bold(),S.a.color.cambridgeBlue,Se.a.circle(S.a.spacing.lg),Se.a.center(),Se.a.hexA(S.a.color.coolGrey,.7)]},["button.__jsx-style-dynamic-selector{height:100%;width:100%;}",".button-content.__jsx-style-dynamic-selector{".concat(Se.a.gappedList(S.a.spacing.xxxs),";justify-items:center;").concat(Se.a.typography.body12Bold(),";color:").concat(S.a.color.cambridgeBlue,";-webkit-transition:0.2s ease-in-out;transition:0.2s ease-in-out;}"),".circle.__jsx-style-dynamic-selector{".concat(Se.a.circle(S.a.spacing.lg),";").concat(Se.a.center(),";border:1px solid ").concat(Se.a.hexA(S.a.color.coolGrey,.7),";}")]))})),Object(h.a)(Object(l.a)(t),"onPickFile",(function(e){Object(tt.e)(e,"image").then((function(n){t.setState({localImage:n}),t.props.onPick(e)})).catch((function(e){"max-file-size-exceeded"===e&&t.props.toast.add({type:"error",title:nt(v.a,{id:"builder.image.uploadErrorTitle"}),details:nt(v.a,{id:"builder.image.uploadErrorDescription"})})}))})),Object(h.a)(Object(l.a)(t),"removeImage",(function(){t.setState({localImage:""}),t.props.onRemove()})),t.state={localImage:""},t}return Object(c.a)(i,[{key:"render",value:function(){var e=He.k;return nt("div",{className:f.a.dynamic([["838183098",[e,S.a.color.darkGreen]]])+" outer-wrapper"},nt("div",{className:f.a.dynamic([["838183098",[e,S.a.color.darkGreen]]])+" inner-wrapper"},this.props.src||this.state.localImage?this.renderLoadedState():nt($e.a,{accept:et.h.join(","),render:this.renderEmptyState,onPick:this.onPickFile})),nt(f.a,{id:"838183098",dynamic:[e,S.a.color.darkGreen]},[".outer-wrapper.__jsx-style-dynamic-selector{padding-bottom:".concat(e,";background-color:").concat(S.a.color.darkGreen,";position:relative;width:100%;}"),".inner-wrapper.__jsx-style-dynamic-selector{position:absolute;top:0;bottom:0;left:0;right:0;}"]))}}]),i}(y.PureComponent),ot=Object(G.c)(Object(b.c)(Object(Je.a)(at))),rt=n("gMe1"),st=n("Pmyh"),ct=g.a.createElement,lt=Object(b.c)(Object(y.memo)((function(e){var t=e.onClick,n=e.intl.formatMessage({id:"builder.common.delete"});return ct("div",{className:f.a.dynamic([["845399750",[Se.a.center(),Se.a.circle("4rem"),S.a.color.darkGreen,S.a.color.warmBlack]]])+" delete-button-wrapper"},ct(W.a,{usePositionFixed:!0,tooltipContent:n},ct("button",{onClick:t,"aria-label":n,className:f.a.dynamic([["845399750",[Se.a.center(),Se.a.circle("4rem"),S.a.color.darkGreen,S.a.color.warmBlack]]])},ct(st.a,{width:S.a.spacing.xxs,height:"auto",color:S.a.color.ashGrey}))),ct(f.a,{id:"845399750",dynamic:[Se.a.center(),Se.a.circle("4rem"),S.a.color.darkGreen,S.a.color.warmBlack]},[".delete-button-wrapper.__jsx-style-dynamic-selector{".concat(Se.a.center(),";}"),"button.__jsx-style-dynamic-selector{".concat(Se.a.circle("4rem")," overflow:hidden;background-color:").concat(S.a.color.darkGreen,";-webkit-transition:background-color 0.2s;transition:background-color 0.2s;}"),"button.__jsx-style-dynamic-selector:hover,button.__jsx-style-dynamic-selector:focus{background-color:".concat(S.a.color.warmBlack,";}")]))}))),pt=n("wWnZ"),ut=g.a.createElement,dt=Object(y.memo)((function(e){var t=e.onClick;return ut(pt.a,{type:"clear",color:"dark",onClick:t},ut(v.a,{id:"viewer.common.done"}))})),ht=n("K98y"),mt=g.a.createElement,ft=Object(y.memo)((function(e){var t=e.onClick,n=e.children;return mt("button",{onClick:t,className:f.a.dynamic([["3977614341",[S.a.spacing.xxxs,S.a.spacing.xxs,Se.a.typography.body14(),S.a.font.weight.medium,S.a.color.haikuGreen,Se.a.center()]]])+" back-button"},mt("div",{className:f.a.dynamic([["3977614341",[S.a.spacing.xxxs,S.a.spacing.xxs,Se.a.typography.body14(),S.a.font.weight.medium,S.a.color.haikuGreen,Se.a.center()]]])+" back-button-content"},mt("div",{className:f.a.dynamic([["3977614341",[S.a.spacing.xxxs,S.a.spacing.xxs,Se.a.typography.body14(),S.a.font.weight.medium,S.a.color.haikuGreen,Se.a.center()]]])+" back-icon"},mt(ht.a,{width:S.a.font.size.medium,height:"auto"})),n),mt(f.a,{id:"3977614341",dynamic:[S.a.spacing.xxxs,S.a.spacing.xxs,Se.a.typography.body14(),S.a.font.weight.medium,S.a.color.haikuGreen,Se.a.center()]},[".back-button.__jsx-style-dynamic-selector{width:100%;padding:".concat(S.a.spacing.xxxs," 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"),".back-button-content.__jsx-style-dynamic-selector{display:grid;grid-auto-flow:column;grid-gap:".concat(S.a.spacing.xxs,";-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;-webkit-align-items:start;-webkit-box-align:start;-ms-flex-align:start;align-items:start;").concat(Se.a.typography.body14(),";font-weight:").concat(S.a.font.weight.medium,";color:").concat(S.a.color.haikuGreen,";}"),".back-icon.__jsx-style-dynamic-selector{-webkit-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1);".concat(Se.a.center(),";}"),"html[dir='rtl'] .back-icon.__jsx-style-dynamic-selector{-webkit-transform:initial;-ms-transform:initial;transform:initial;}"]))})),yt=g.a.createElement,gt=Object(y.memo)((function(e){return yt("div",{className:f.a.dynamic([["1355507254",[S.a.spacing.xs,Se.a.gappedList(S.a.spacing.xs)]]])+" side-panel-editor"},yt(ft,{onClick:e.onGoBack},e.backButtonText),e.children,yt(dt,{onClick:e.onConfirm}),yt(lt,{onClick:e.onDelete}),yt(f.a,{id:"1355507254",dynamic:[S.a.spacing.xs,Se.a.gappedList(S.a.spacing.xs)]},[".side-panel-editor.__jsx-style-dynamic-selector{padding:".concat(S.a.spacing.xs,";").concat(Se.a.gappedList(S.a.spacing.xs),";}")]))})),vt=g.a.createElement;function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ot(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var wt,jt=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(Ot()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){var t;return Object(s.a)(this,i),t=n.call(this,e),Object(h.a)(Object(l.a)(t),"renderForm",(function(){var e=t.getPopup(),n=e.description,i=e.image,a=t.state.isImageDirty?void 0:Object(rt.g)(Object(l.a)(t),i);return vt("div",{className:f.a.dynamic([["1508402789",[Se.a.gappedList(S.a.spacing.xxs)]]])+" popup-form"},vt(ot,{src:a,onPick:t.onPickImage,onRemove:t.onRemoveImage}),t.renderTitle(),vt(Xe.a,{placeholder:t.props.intl.formatMessage({id:"builder.map.descriptionOptional"}),initHtml:n,variant:"inline",onHtmlChange:t.onDescriptionChange,render:t.renderDescriptionRichTextEditor,tooltipLinkPlaceholder:et.c}),vt(f.a,{id:"1508402789",dynamic:[Se.a.gappedList(S.a.spacing.xxs)]},[".popup-form.__jsx-style-dynamic-selector{".concat(Se.a.gappedList(S.a.spacing.xxs),";}"),".popup-form.__jsx-style-dynamic-selector>div{min-width:0;}"]))})),Object(h.a)(Object(l.a)(t),"renderTitle",(function(){var e=t.props.drawingType,n=e===C.j.POINT_NUMBERED?oe.a:He.f[He.g[e]].icon;return vt("div",{className:f.a.dynamic([["2023373205",[S.a.spacing.xxxs,S.a.spacing.xxxs,S.a.color.platinum,Se.a.typography.body14(),S.a.color.cambridgeBlue,Se.a.typography.body14(),S.a.color.darkGreen,S.a.spacing.xxxs,S.a.color.haikuBlack]]])+" title"},vt(n,{height:S.a.font.size.medium,width:"auto",color:S.a.color.coolGrey,children:t.props.numberedPointNumber,className:f.a.dynamic([["2023373205",[S.a.spacing.xxxs,S.a.spacing.xxxs,S.a.color.platinum,Se.a.typography.body14(),S.a.color.cambridgeBlue,Se.a.typography.body14(),S.a.color.darkGreen,S.a.spacing.xxxs,S.a.color.haikuBlack]]])}),vt("input",{value:t.state.title,type:"text",maxLength:He.m,onChange:t.onTitleChange,autoFocus:!0,placeholder:t.props.intl.formatMessage({id:"builder.map.nameOptional"}),className:f.a.dynamic([["2023373205",[S.a.spacing.xxxs,S.a.spacing.xxxs,S.a.color.platinum,Se.a.typography.body14(),S.a.color.cambridgeBlue,Se.a.typography.body14(),S.a.color.darkGreen,S.a.spacing.xxxs,S.a.color.haikuBlack]]])}),vt(f.a,{id:"2023373205",dynamic:[S.a.spacing.xxxs,S.a.spacing.xxxs,S.a.color.platinum,Se.a.typography.body14(),S.a.color.cambridgeBlue,Se.a.typography.body14(),S.a.color.darkGreen,S.a.spacing.xxxs,S.a.color.haikuBlack]},["input.__jsx-style-dynamic-selector{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;margin:0 ".concat(S.a.spacing.xxxs,";padding:calc(").concat(S.a.spacing.xxxs," * 0.5);border:0;background-color:transparent;color:").concat(S.a.color.platinum,";").concat(Se.a.typography.body14(),";}"),"input.__jsx-style-dynamic-selector::-webkit-input-placeholder{color:".concat(S.a.color.cambridgeBlue,";").concat(Se.a.typography.body14(),";}"),"input.__jsx-style-dynamic-selector::-moz-placeholder{color:".concat(S.a.color.cambridgeBlue,";").concat(Se.a.typography.body14(),";}"),"input.__jsx-style-dynamic-selector:-ms-input-placeholder{color:".concat(S.a.color.cambridgeBlue,";").concat(Se.a.typography.body14(),";}"),"input.__jsx-style-dynamic-selector::placeholder{color:".concat(S.a.color.cambridgeBlue,";").concat(Se.a.typography.body14(),";}"),".title.__jsx-style-dynamic-selector{background-color:".concat(S.a.color.darkGreen,";padding:").concat(S.a.spacing.xxxs,";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"),".title.__jsx-style-dynamic-selector svg text{fill:".concat(S.a.color.haikuBlack,";}")]))})),Object(h.a)(Object(l.a)(t),"renderDescriptionRichTextEditor",(function(e){return vt("div",{ref:e,className:f.a.dynamic([["3140474723",["description",S.a.color.darkGreen,S.a.spacing.xxs,Se.a.typography.body14(),S.a.spacing.xxxl,"description",S.a.color.cambridgeBlue,Se.a.typography.body14(!0),S.a.spacing.xxs,S.a.spacing.xxs,"description",S.a.color.platinum,"description",S.a.color.bleuDeFrance]]])+" description"},vt(f.a,{id:"3140474723",dynamic:["description",S.a.color.darkGreen,S.a.spacing.xxs,Se.a.typography.body14(),S.a.spacing.xxxl,"description",S.a.color.cambridgeBlue,Se.a.typography.body14(!0),S.a.spacing.xxs,S.a.spacing.xxs,"description",S.a.color.platinum,"description",S.a.color.bleuDeFrance]},[".".concat("description",".__jsx-style-dynamic-selector{background-color:").concat(S.a.color.darkGreen,";padding:").concat(S.a.spacing.xxs,";").concat(Se.a.typography.body14(),";height:").concat(S.a.spacing.xxxl,";overflow-y:auto;}"),".".concat("description",".__jsx-style-dynamic-selector .ql-editor.ql-blank::before{color:").concat(S.a.color.cambridgeBlue,";font-family:'Avenir Next';").concat(Se.a.typography.body14(!0),";left:").concat(S.a.spacing.xxs,";right:").concat(S.a.spacing.xxs,";}"),".".concat("description",".__jsx-style-dynamic-selector .ql-editor{font-family:'Avenir Next';color:").concat(S.a.color.platinum,";margin:0;}"),".".concat("description",".__jsx-style-dynamic-selector .ql-editor a{color:").concat(S.a.color.bleuDeFrance,";}")]))})),Object(h.a)(Object(l.a)(t),"onTitleChange",(function(e){var n=t.getPopup().title,i=e.target.value;i!==t.state.title&&t.setState({title:i,isTitleDirty:i!==n})})),Object(h.a)(Object(l.a)(t),"onDescriptionChange",(function(e){var n=t.getPopup().description,i=e.replace(/<[^>]+>/g,"")?e:"";i!==t.state.description&&t.setState({description:i,isDescriptionDirty:i!==n})})),Object(h.a)(Object(l.a)(t),"submitPopupContent",(function(){var e;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=xt({id:t.props.id},t.props.popup,{},t.state.isTitleDirty?{title:t.state.title}:{},{},t.state.isImageDirty?{image:t.state.image}:{},{},t.state.isDescriptionDirty?{description:t.state.description}:{}),t.props.close(),n.next=4,o.a.awrap(t.uploadImageFileAsResource());case 4:t.props.updatePopup(e);case 5:case"end":return n.stop()}}),null,null,null,Promise)})),Object(h.a)(Object(l.a)(t),"onPickImage",(function(e){var n=Date.now(),i="".concat(e.type.slice(e.type.indexOf("/")+1)),a="".concat(n,".").concat(i);t.setState({image:a,isImageDirty:!0},(function(){t.imageFile=e}))})),Object(h.a)(Object(l.a)(t),"onRemoveImage",(function(){t.setState({image:"",isImageDirty:!0},(function(){t.imageFile=void 0}))})),Object(h.a)(Object(l.a)(t),"uploadImageFileAsResource",(function(){var e,n;return o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e=t.state.image||"",t.imageFile&&e){i.next=3;break}return i.abrupt("return");case 3:if("function"===typeof(n=t.props.storyItem).upsertItemResource){i.next=7;break}return console.error("No storyItemBuilder."),i.abrupt("return");case 7:return i.abrupt("return",n.upsertItemResource({resourceName:e,resource:t.imageFile,isAdd:!0}).then((function(t){if(!t.success)throw new Error("Image uploading failed.");return n.preloadItemResourceImage(e,rt.a)})).catch((function(e){t.props.toast.add({type:"error",title:vt(v.a,{id:"builder.image.uploadErrorTitle"}),details:vt(v.a,{id:"builder.image.uploadFailDescription"})})})));case 8:case"end":return i.stop()}}),null,null,null,Promise)})),Object(h.a)(Object(l.a)(t),"deleteCurrentDrawing",(function(){t.props.removeDrawing(t.props.id),t.props.close()})),Object(h.a)(Object(l.a)(t),"getPopup",(function(){return t.props.popup||He.e})),t.state=xt({},t.props.popup||He.e,{isTitleDirty:!1,isImageDirty:!1,isDescriptionDirty:!1}),t}return Object(c.a)(i,[{key:"componentDidUpdate",value:function(e){if(e.popup!==this.props.popup){var t=this.props.popup||He.e;this.setState(xt({},t,{isImageDirty:!1})),this.imageFile=void 0}}},{key:"render",value:function(){return vt(gt,{backButtonText:vt(v.a,{id:"builder.map.mapLayers"}),onDelete:this.deleteCurrentDrawing,onConfirm:this.submitPopupContent,onGoBack:this.submitPopupContent},this.renderForm())}}]),i}(y.PureComponent),Ct=Object(Je.a)(Object(Ze.b)(Object(b.c)(jt))),kt=n("8zWw"),St=g.a.createElement,It=Object(y.memo)((function(e){var t=e.intl.formatMessage({id:"builder.map.tipsForAddingData"}),n=e.intl.formatMessage({id:"builder.map.addData"});return St(kt.a,{onClick:e.onClick,message:t,disabled:e.isDisabled,icon:St(qe.a,null),tooltipContent:e.tooltipContent},n)})),Pt=Object(b.c)(It),Rt=n("QhVD"),Et=n("AEMd"),Dt=n("O94r"),Tt=n.n(Dt),Mt=g.a.createElement,At=Object(y.memo)((function(e){return Mt("li",{className:f.a.dynamic([["2377173990",[e.thumbnail,S.a.color.warmBlack,S.a.color.haikuGreen,Se.a.typography.body12(),S.a.spacing.xxxs,S.a.color.cambridgeBlue,S.a.color.platinum]]])+" "+(Tt()({selected:e.isSelected,disabled:!e.isEnabled})||"")},Mt("label",{className:f.a.dynamic([["2377173990",[e.thumbnail,S.a.color.warmBlack,S.a.color.haikuGreen,Se.a.typography.body12(),S.a.spacing.xxxs,S.a.color.cambridgeBlue,S.a.color.platinum]]])},Mt("button",{onClick:function(){e.onSelect(e.visType)},"aria-label":e.name,disabled:!e.isEnabled,className:f.a.dynamic([["2377173990",[e.thumbnail,S.a.color.warmBlack,S.a.color.haikuGreen,Se.a.typography.body12(),S.a.spacing.xxxs,S.a.color.cambridgeBlue,S.a.color.platinum]]])},e.tooltipContent&&Mt("span",{className:f.a.dynamic([["2377173990",[e.thumbnail,S.a.color.warmBlack,S.a.color.haikuGreen,Se.a.typography.body12(),S.a.spacing.xxxs,S.a.color.cambridgeBlue,S.a.color.platinum]]])},e.tooltipContent)),Mt("div",{className:f.a.dynamic([["2377173990",[e.thumbnail,S.a.color.warmBlack,S.a.color.haikuGreen,Se.a.typography.body12(),S.a.spacing.xxxs,S.a.color.cambridgeBlue,S.a.color.platinum]]])+" name"},e.name)),Mt(f.a,{id:"2377173990",dynamic:[e.thumbnail,S.a.color.warmBlack,S.a.color.haikuGreen,Se.a.typography.body12(),S.a.spacing.xxxs,S.a.color.cambridgeBlue,S.a.color.platinum]},["label.__jsx-style-dynamic-selector{display:block;line-height:0;}","button.__jsx-style-dynamic-selector{height:5.6rem;width:5.6rem;background-image:url(".concat(e.thumbnail,");background-size:cover;background-repeat:no-repeat;-webkit-transition:box-shadow 0.2s;transition:box-shadow 0.2s;box-shadow:inset 0 0 0 1px ").concat(S.a.color.warmBlack,";}"),".selected.__jsx-style-dynamic-selector button.__jsx-style-dynamic-selector{box-shadow:inset 0 0 0 2px ".concat(S.a.color.haikuGreen,";}"),".name.__jsx-style-dynamic-selector{".concat(Se.a.typography.body12()," padding-top:").concat(S.a.spacing.xxxs,";color:").concat(S.a.color.cambridgeBlue,";word-break:break-word;text-align:center;}"),".selected.__jsx-style-dynamic-selector .name.__jsx-style-dynamic-selector{color:".concat(S.a.color.platinum,";}"),".disabled.__jsx-style-dynamic-selector{opacity:0.4;}"]))})),Nt=g.a.createElement,Lt=Object(y.memo)((function(e){return Nt("section",{className:f.a.dynamic([["3173466987",[S.a.color.platinum,Se.a.typography.body14()]]])+" vis-editor-section"},Nt("div",{className:f.a.dynamic([["3173466987",[S.a.color.platinum,Se.a.typography.body14()]]])+" header"},e.heading,e.info),e.children&&Nt("div",{className:f.a.dynamic([["3173466987",[S.a.color.platinum,Se.a.typography.body14()]]])+" content"},e.children),Nt(f.a,{id:"3173466987",dynamic:[S.a.color.platinum,Se.a.typography.body14()]},[".header.__jsx-style-dynamic-selector{color:".concat(S.a.color.platinum,";").concat(Se.a.typography.body14()," display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:4rem;word-break:break-word;}")]))})),Gt=g.a.createElement,_t=(wt={},Object(h.a)(wt,Rt.d.numColor,{thumbnail:"point-color.svg",name:{id:"builder.map.color"}}),Object(h.a)(wt,Rt.d.numSize,{thumbnail:"point-size.svg",name:{id:"builder.map.size"}}),Object(h.a)(wt,Rt.d.simpleLocation,{thumbnail:"point-location.svg",name:{id:"builder.map.vis.style.location"}}),wt),Bt=Object(y.memo)((function(e){return Gt(Lt,{heading:Gt(v.a,{id:"builder.map.vis.style"}),info:void 0},Gt("ul",{className:f.a.dynamic([["3763478211",[Se.a.gapped("column",S.a.spacing.xxs)]]])},He.b.map((function(t){return Gt(At,{key:t,visType:t,onSelect:e.setVisType,isEnabled:e.visTypes.includes(t),isSelected:e.currentVisType===t,name:e.intl.formatMessage(_t[t].name),thumbnail:"".concat(e.config.BASE_URL,"/static/images/builder/map/vis/").concat(_t[t].thumbnail)})})),Gt(f.a,{id:"3763478211",dynamic:[Se.a.gapped("column",S.a.spacing.xxs)]},["ul.__jsx-style-dynamic-selector{".concat(Se.a.gapped("column",S.a.spacing.xxs)," justify-content:start;-webkit-align-items:start;-webkit-box-align:start;-ms-flex-align:start;align-items:start;}")])))})),Wt=Object(G.c)(Object(b.c)(Bt)),Vt=n("Qy73"),Ft=n("Bcqe"),Ut=n.n(Ft),zt=Math.sqrt(50),Ht=Math.sqrt(10),Yt=Math.sqrt(2),Kt=function(e,t,n){var i,a,o,r,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((i=t<e)&&(a=e,e=t,t=a),0===(r=Xt(e,t,n))||!isFinite(r))return[];if(r>0)for(e=Math.ceil(e/r),t=Math.floor(t/r),o=new Array(a=Math.ceil(t-e+1));++s<a;)o[s]=(e+s)*r;else for(e=Math.floor(e*r),t=Math.ceil(t*r),o=new Array(a=Math.ceil(e-t+1));++s<a;)o[s]=(e-s)/r;return i&&o.reverse(),o};function Xt(e,t,n){var i=(t-e)/Math.max(0,n),a=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,a);return a>=0?(o>=zt?10:o>=Ht?5:o>=Yt?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(o>=zt?10:o>=Ht?5:o>=Yt?2:1)}var Jt=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN};var Zt=function(e){var t;return 1===e.length&&(t=e,e=function(e,n){return Jt(t(e),n)}),{left:function(t,n,i,a){for(null==i&&(i=0),null==a&&(a=t.length);i<a;){var o=i+a>>>1;e(t[o],n)<0?i=o+1:a=o}return i},right:function(t,n,i,a){for(null==i&&(i=0),null==a&&(a=t.length);i<a;){var o=i+a>>>1;e(t[o],n)>0?a=o:i=o+1}return i}}}(Jt),qt=Zt.right,Qt=(Zt.left,qt),$t=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function en(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function tn(){}var nn="\\s*([+-]?\\d+)\\s*",an="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",on="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rn=/^#([0-9a-f]{3,8})$/,sn=new RegExp("^rgb\\("+[nn,nn,nn]+"\\)$"),cn=new RegExp("^rgb\\("+[on,on,on]+"\\)$"),ln=new RegExp("^rgba\\("+[nn,nn,nn,an]+"\\)$"),pn=new RegExp("^rgba\\("+[on,on,on,an]+"\\)$"),un=new RegExp("^hsl\\("+[an,on,on]+"\\)$"),dn=new RegExp("^hsla\\("+[an,on,on,an]+"\\)$"),hn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function mn(){return this.rgb().formatHex()}function fn(){return this.rgb().formatRgb()}function yn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rn.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?gn(t):3===n?new xn(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?new xn(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?new xn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=sn.exec(e))?new xn(t[1],t[2],t[3],1):(t=cn.exec(e))?new xn(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ln.exec(e))?vn(t[1],t[2],t[3],t[4]):(t=pn.exec(e))?vn(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=un.exec(e))?Cn(t[1],t[2]/100,t[3]/100,1):(t=dn.exec(e))?Cn(t[1],t[2]/100,t[3]/100,t[4]):hn.hasOwnProperty(e)?gn(hn[e]):"transparent"===e?new xn(NaN,NaN,NaN,0):null}function gn(e){return new xn(e>>16&255,e>>8&255,255&e,1)}function vn(e,t,n,i){return i<=0&&(e=t=n=NaN),new xn(e,t,n,i)}function bn(e,t,n,i){return 1===arguments.length?((a=e)instanceof tn||(a=yn(a)),a?new xn((a=a.rgb()).r,a.g,a.b,a.opacity):new xn):new xn(e,t,n,null==i?1:i);var a}function xn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function On(){return"#"+jn(this.r)+jn(this.g)+jn(this.b)}function wn(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function jn(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Cn(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Sn(e,t,n,i)}function kn(e){if(e instanceof Sn)return new Sn(e.h,e.s,e.l,e.opacity);if(e instanceof tn||(e=yn(e)),!e)return new Sn;if(e instanceof Sn)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),o=Math.max(t,n,i),r=NaN,s=o-a,c=(o+a)/2;return s?(r=t===o?(n-i)/s+6*(n<i):n===o?(i-t)/s+2:(t-n)/s+4,s/=c<.5?o+a:2-o-a,r*=60):s=c>0&&c<1?0:r,new Sn(r,s,c,e.opacity)}function Sn(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function In(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Pn(e,t,n,i,a){var o=e*e,r=o*e;return((1-3*e+3*o-r)*t+(4-6*o+3*r)*n+(1+3*e+3*o-3*r)*i+r*a)/6}$t(tn,yn,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:mn,formatHex:mn,formatHsl:function(){return kn(this).formatHsl()},formatRgb:fn,toString:fn}),$t(xn,bn,en(tn,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new xn(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new xn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:On,formatHex:On,formatRgb:wn,toString:wn})),$t(Sn,(function(e,t,n,i){return 1===arguments.length?kn(e):new Sn(e,t,n,null==i?1:i)}),en(tn,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Sn(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Sn(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new xn(In(e>=240?e-240:e+120,a,i),In(e,a,i),In(e<120?e+240:e-120,a,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Rn=function(e){return function(){return e}};function En(e,t){return function(n){return e+n*t}}function Dn(e){return 1===(e=+e)?Tn:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):Rn(isNaN(t)?n:t)}}function Tn(e,t){var n=t-e;return n?En(e,n):Rn(isNaN(e)?t:e)}var Mn=function e(t){var n=Dn(t);function i(e,t){var i=n((e=bn(e)).r,(t=bn(t)).r),a=n(e.g,t.g),o=n(e.b,t.b),r=Tn(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=a(t),e.b=o(t),e.opacity=r(t),e+""}}return i.gamma=e,i}(1);function An(e){return function(t){var n,i,a=t.length,o=new Array(a),r=new Array(a),s=new Array(a);for(n=0;n<a;++n)i=bn(t[n]),o[n]=i.r||0,r[n]=i.g||0,s[n]=i.b||0;return o=e(o),r=e(r),s=e(s),i.opacity=1,function(e){return i.r=o(e),i.g=r(e),i.b=s(e),i+""}}}An((function(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[i],o=e[i+1],r=i>0?e[i-1]:2*a-o,s=i<t-1?e[i+2]:2*o-a;return Pn((n-i/t)*t,r,a,o,s)}})),An((function(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),a=e[(i+t-1)%t],o=e[i%t],r=e[(i+1)%t],s=e[(i+2)%t];return Pn((n-i/t)*t,a,o,r,s)}}));var Nn=function(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,a=t.slice();return function(o){for(n=0;n<i;++n)a[n]=e[n]*(1-o)+t[n]*o;return a}};function Ln(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Gn(e,t){var n,i=t?t.length:0,a=e?Math.min(i,e.length):0,o=new Array(a),r=new Array(i);for(n=0;n<a;++n)o[n]=zn(e[n],t[n]);for(;n<i;++n)r[n]=t[n];return function(e){for(n=0;n<a;++n)r[n]=o[n](e);return r}}var _n=function(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}},Bn=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}},Wn=function(e,t){var n,i={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?i[n]=zn(e[n],t[n]):a[n]=t[n];return function(e){for(n in i)a[n]=i[n](e);return a}},Vn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fn=new RegExp(Vn.source,"g");var Un=function(e,t){var n,i,a,o=Vn.lastIndex=Fn.lastIndex=0,r=-1,s=[],c=[];for(e+="",t+="";(n=Vn.exec(e))&&(i=Fn.exec(t));)(a=i.index)>o&&(a=t.slice(o,a),s[r]?s[r]+=a:s[++r]=a),(n=n[0])===(i=i[0])?s[r]?s[r]+=i:s[++r]=i:(s[++r]=null,c.push({i:r,x:Bn(n,i)})),o=Fn.lastIndex;return o<t.length&&(a=t.slice(o),s[r]?s[r]+=a:s[++r]=a),s.length<2?c[0]?function(e){return function(t){return e(t)+""}}(c[0].x):function(e){return function(){return e}}(t):(t=c.length,function(e){for(var n,i=0;i<t;++i)s[(n=c[i]).i]=n.x(e);return s.join("")})},zn=function(e,t){var n,i=typeof t;return null==t||"boolean"===i?Rn(t):("number"===i?Bn:"string"===i?(n=yn(t))?(t=n,Mn):Un:t instanceof yn?Mn:t instanceof Date?_n:Ln(t)?Nn:Array.isArray(t)?Gn:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Wn:Bn)(e,t)},Hn=function(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}},Yn=function(e){return function(){return e}},Kn=function(e){return+e},Xn=[0,1];function Jn(e){return e}function Zn(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Yn(isNaN(t)?NaN:.5)}function qn(e,t,n){var i=e[0],a=e[1],o=t[0],r=t[1];return a<i?(i=Zn(a,i),o=n(r,o)):(i=Zn(i,a),o=n(o,r)),function(e){return o(i(e))}}function Qn(e,t,n){var i=Math.min(e.length,t.length)-1,a=new Array(i),o=new Array(i),r=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++r<i;)a[r]=Zn(e[r],e[r+1]),o[r]=n(t[r],t[r+1]);return function(t){var n=Qt(e,t,1,i)-1;return o[n](a[n](t))}}function $n(){var e,t,n,i,a,o,r=Xn,s=Xn,c=zn,l=Jn;function p(){var e=Math.min(r.length,s.length);return l!==Jn&&(l=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(r[0],r[e-1])),i=e>2?Qn:qn,a=o=null,u}function u(t){return isNaN(t=+t)?n:(a||(a=i(r.map(e),s,c)))(e(l(t)))}return u.invert=function(n){return l(t((o||(o=i(s,r.map(e),Bn)))(n)))},u.domain=function(e){return arguments.length?(r=Array.from(e,Kn),p()):r.slice()},u.range=function(e){return arguments.length?(s=Array.from(e),p()):s.slice()},u.rangeRound=function(e){return s=Array.from(e),c=Hn,p()},u.clamp=function(e){return arguments.length?(l=!!e||Jn,p()):l!==Jn},u.interpolate=function(e){return arguments.length?(c=e,p()):c},u.unknown=function(e){return arguments.length?(n=e,u):n},function(n,i){return e=n,t=i,p()}}function ei(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var ti=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ni(e){if(!(t=ti.exec(e)))throw new Error("invalid format: "+e);var t;return new ii({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function ii(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}ni.prototype=ii.prototype,ii.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var ai,oi,ri,si,ci=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]},li=function(e){return(e=ci(Math.abs(e)))?e[1]:NaN},pi=function(e){e:for(var t,n=e.length,i=1,a=-1;i<n;++i)switch(e[i]){case".":a=t=i;break;case"0":0===a&&(a=i),t=i;break;default:if(!+e[i])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e},ui=function(e,t){var n=ci(e,t);if(!n)return e+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")},di={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return ui(100*e,t)},r:ui,s:function(e,t){var n=ci(e,t);if(!n)return e+"";var i=n[0],a=n[1],o=a-(ai=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,r=i.length;return o===r?i:o>r?i+new Array(o-r+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+ci(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},hi=function(e){return e},mi=Array.prototype.map,fi=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];oi=function(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?hi:(t=mi.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var a=e.length,o=[],r=0,s=t[0],c=0;a>0&&s>0&&(c+s+1>i&&(s=Math.max(1,i-c)),o.push(e.substring(a-=s,a+s)),!((c+=s+1)>i));)s=t[r=(r+1)%t.length];return o.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",r=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?hi:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(mi.call(e.numerals,String)),c=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"-":e.minus+"",p=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=ni(e)).fill,n=e.align,u=e.sign,d=e.symbol,h=e.zero,m=e.width,f=e.comma,y=e.precision,g=e.trim,v=e.type;"n"===v?(f=!0,v="g"):di[v]||(void 0===y&&(y=12),g=!0,v="g"),(h||"0"===t&&"="===n)&&(h=!0,t="0",n="=");var b="$"===d?a:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===d?o:/[%p]/.test(v)?c:"",O=di[v],w=/[defgprs%]/.test(v);function j(e){var a,o,c,d=b,j=x;if("c"===v)j=O(e)+j,e="";else{var C=(e=+e)<0||1/e<0;if(e=isNaN(e)?p:O(Math.abs(e),y),g&&(e=pi(e)),C&&0===+e&&"+"!==u&&(C=!1),d=(C?"("===u?u:l:"-"===u||"("===u?"":u)+d,j=("s"===v?fi[8+ai/3]:"")+j+(C&&"("===u?")":""),w)for(a=-1,o=e.length;++a<o;)if(48>(c=e.charCodeAt(a))||c>57){j=(46===c?r+e.slice(a+1):e.slice(a))+j,e=e.slice(0,a);break}}f&&!h&&(e=i(e,1/0));var k=d.length+e.length+j.length,S=k<m?new Array(m-k+1).join(t):"";switch(f&&h&&(e=i(S+e,S.length?m-j.length:1/0),S=""),n){case"<":e=d+e+j+S;break;case"=":e=d+S+e+j;break;case"^":e=S.slice(0,k=S.length>>1)+d+e+j+S.slice(k);break;default:e=S+d+e+j}return s(e)}return y=void 0===y?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),j.toString=function(){return e+""},j}return{format:u,formatPrefix:function(e,t){var n=u(((e=ni(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(li(t)/3))),a=Math.pow(10,-i),o=fi[8+i/3];return function(e){return n(a*e)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),ri=oi.format,si=oi.formatPrefix;var yi=function(e,t,n,i){var a,o=function(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/a;return o>=zt?a*=10:o>=Ht?a*=5:o>=Yt&&(a*=2),t<e?-a:a}(e,t,n);switch((i=ni(null==i?",f":i)).type){case"s":var r=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(li(t)/3)))-li(Math.abs(e)))}(o,r))||(i.precision=a),si(i,r);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,li(t)-li(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=a-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(a=function(e){return Math.max(0,-li(Math.abs(e)))}(o))||(i.precision=a-2*("%"===i.type))}return ri(i)};function gi(){var e=$n()(Jn,Jn);return e.copy=function(){return t=e,gi().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},ei.apply(e,arguments),function(e){var t=e.domain;return e.ticks=function(e){var n=t();return Kt(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return yi(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,a=t(),o=0,r=a.length-1,s=a[o],c=a[r];return c<s&&(i=s,s=c,c=i,i=o,o=r,r=i),(i=Xt(s,c,n))>0?i=Xt(s=Math.floor(s/i)*i,c=Math.ceil(c/i)*i,n):i<0&&(i=Xt(s=Math.ceil(s*i)/i,c=Math.floor(c*i)/i,n)),i>0?(a[o]=Math.floor(s/i)*i,a[r]=Math.ceil(c/i)*i,t(a)):i<0&&(a[o]=Math.ceil(s*i)/i,a[r]=Math.floor(c*i)/i,t(a)),e},e}(e)}var vi=g.a.createElement;function bi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var xi=function(e){Object(d.a)(a,e);var t,n=(t=a,function(){var e,n=Object(u.a)(t);if(bi()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function a(e){var t;return Object(s.a)(this,a),t=n.call(this,e),Object(h.a)(Object(l.a)(t),"dragStart",(function(e){return function(n){n.stopPropagation(),t.state.isDragging||t.setState({isDragging:!0,dragIndex:e})}})),Object(h.a)(Object(l.a)(t),"drag",(function(e){if(t.state.isDragging){var n=t.props,a=Object(i.a)(t.props.selections),o=t.scale.invert(e.nativeEvent.offsetX-n.margin.left);if(0===t.state.dragIndex){if(t.props.disableLeftKnob)return;if(o>a[1])return}if(1===t.state.dragIndex){if(t.props.disableRightKnob)return;if(o<a[0])return}a[t.state.dragIndex]=o,t.props.onSelectionsChange(a)}})),Object(h.a)(Object(l.a)(t),"dragEnd",(function(e){t.setState({isDragging:!1,dragIndex:-1})})),t.scale=gi().clamp(!0),t.state={isDragging:!1,dragIndex:-1},t}return Object(c.a)(a,[{key:"render",value:function(){var e=this;this.scale.domain([this.props.min,this.props.max]);var t=this.props,n=t.leftSideOutlierColor||this.props.gradientColorFrom,i=t.rightSideOutlierColor||this.props.gradientColorTo,a=t.margin.top+2*(Math.max(2*t.knobRadius,t.trackHeight)/2+t.textPadding+t.textHeight)+t.margin.bottom,o=Math.max(t.height,a),r=o-t.margin.top-t.margin.bottom,s=t.width-t.margin.left-t.margin.right;this.scale.range([0,s]);var c=r/2,l=c-t.trackHeight/2,p=r,u=this.scale(t.selections[0])-this.scale(t.min),d=this.scale(t.selections[1])-this.scale(t.selections[0]),h=this.scale(t.max)-this.scale(t.selections[1]),m="id".concat(t.min).concat(t.max).concat(t.width).concat(t.height);return vi("svg",{width:t.width,height:o,className:f.a.dynamic([["2729480237",[S.a.color.emeraldGreen]]])+" color-slider"},vi("defs",{className:f.a.dynamic([["2729480237",[S.a.color.emeraldGreen]]])},vi("linearGradient",{id:"gradient"+m,className:f.a.dynamic([["2729480237",[S.a.color.emeraldGreen]]])},vi("stop",{offset:t.gradientColorFromOffset+"%",stopColor:t.gradientColorFrom,className:f.a.dynamic([["2729480237",[S.a.color.emeraldGreen]]])}),vi("stop",{offset:t.gradientColorToOffset+"%",stopColor:t.gradientColorTo,className:f.a.dynamic([["2729480237",[S.a.color.emeraldGreen]]])})),vi("filter",{x:"0",y:"0",width:"1",height:"1",id:"textBg"+m,className:f.a.dynamic([["2729480237",[S.a.color.emeraldGreen]]])},vi("feFlood",{floodColor:"white",className:f.a.dynamic([["2729480237",[S.a.color.emeraldGreen]]])}),vi("feComposite",{in:"SourceGraphic",className:f.a.dynamic([["2729480237",[S.a.color.emeraldGreen]]])}))),vi("g",{transform:"translate(".concat(t.margin.left,", ").concat(t.margin.top,")"),onMouseMove:this.drag,onMouseUp:this.dragEnd,onMouseLeave:this.dragEnd,className:f.a.dynamic([["2729480237",[S.a.color.emeraldGreen]]])+" color-slider-track"},vi("rect",{x:0,y:0,width:s,height:o,className:f.a.dynamic([["2729480237",[S.a.color.emeraldGreen]]])+" event-capture"}),vi("rect",{width:u,height:t.trackHeight,x:0,y:l,fill:n,className:f.a.dynamic([["2729480237",[S.a.color.emeraldGreen]]])}),t.gradientColorFrom===t.gradientColorTo?vi("rect",{width:d,height:t.trackHeight,x:u,y:l,fill:t.gradientColorTo,className:f.a.dynamic([["2729480237",[S.a.color.emeraldGreen]]])}):vi("rect",{width:d,height:t.trackHeight,x:u,y:l,fill:"url(#gradient".concat(m,")"),className:f.a.dynamic([["2729480237",[S.a.color.emeraldGreen]]])}),vi("rect",{width:h,height:t.trackHeight,x:u+d,y:l,fill:i,className:f.a.dynamic([["2729480237",[S.a.color.emeraldGreen]]])}),t.selections.map((function(n,i){var a=0===i?"start":i===t.selections.length-1?"end":"middle",o=0===i?-t.knobRadius:i===t.selections.length-1?t.knobRadius:0;return vi("g",{transform:"translate(".concat(e.scale(n),", 0)"),key:"knob-g-".concat(i),className:f.a.dynamic([["2729480237",[S.a.color.emeraldGreen]]])+" "+"".concat(t.disableLeftKnob&&0===i||t.disableRightKnob&&1===i?"":"color-slider-move"," no-select")},vi("circle",{onMouseDown:e.dragStart(i),r:t.knobRadius,cx:0,cy:c,fill:S.a.color.darkGreen,stroke:S.a.color.platinum,strokeWidth:"1",className:f.a.dynamic([["2729480237",[S.a.color.emeraldGreen]]])+" "+((e.state.dragIndex===i?"color-slider-knob-active":"color-slider-knob-default")||"")}),vi("text",{filter:"url(#textBg".concat(m,")"),textAnchor:a,x:o,y:p,fill:"#666",className:f.a.dynamic([["2729480237",[S.a.color.emeraldGreen]]])},(n>t.max?t.max:n<t.min?t.min:n).toFixed(+t.textDecimal)))}))),vi(f.a,{id:"2729480237",dynamic:[S.a.color.emeraldGreen]},["svg.__jsx-style-dynamic-selector{vertical-align:top;}",".color-slider.__jsx-style-dynamic-selector{position:relative;}",".no-select.__jsx-style-dynamic-selector{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",".color-slider-track.__jsx-style-dynamic-selector{pointer-events:all;}",".color-slider-track.__jsx-style-dynamic-selector rect.__jsx-style-dynamic-selector{stroke-width:0;shape-rendering:crispedges;}",".event-capture.__jsx-style-dynamic-selector{visibility:hidden;}",".color-slider-move.__jsx-style-dynamic-selector circle.__jsx-style-dynamic-selector{cursor:move;}",".color-slider-move.__jsx-style-dynamic-selector .color-slider-knob-default.__jsx-style-dynamic-selector{stroke:#ccc;stroke-width:1px;}",".color-slider-move.__jsx-style-dynamic-selector .color-slider-knob-active.__jsx-style-dynamic-selector,.color-slider-move.__jsx-style-dynamic-selector .color-slider-knob-default.__jsx-style-dynamic-selector:hover{stroke:".concat(S.a.color.emeraldGreen,";stroke-width:2px;}"),"text.__jsx-style-dynamic-selector{display:none;}"]))}}]),a}(y.Component);Object(h.a)(xi,"defaultProps",{margin:{top:0,right:10,bottom:0,left:10},leftSideOutlierColor:"",rightSideOutlierColor:"",gradientColorFromOffset:0,gradientColorToOffset:100,textDecimal:2,knobRadius:8,trackHeight:3,textHeight:14,textPadding:1,disableLeftKnob:!1,disableRightKnob:!1});var Oi=g.a.createElement;function wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(n),!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ci(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ki=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(Ci()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){var t;return Object(s.a)(this,i),t=n.call(this,e),Object(h.a)(Object(l.a)(t),"styles",{container:{position:"absolute"},wrapper:{position:"relative",display:"inline-block",color:"#fff"},body:{position:"absolute",minWidth:"20px",maxWidth:"100px",background:"#fff",bottom:"100%",left:"50%",marginBottom:"1rem",padding:".5rem",WebkitTransform:"translateX(-50%)",msTransform:"translateX(-50%)",OTransform:"translateX(-50%)",transform:"translateX(-50%)",borderRadius:"5px",boxShadow:"rgba(160, 160, 160, 0.5) 0px 1px 3px 0px"},content:{background:"#fff",color:"#000",display:"inline",padding:".3em 1em"},arrow:{position:"absolute",width:"0",height:"0",bottom:"-5px",left:"50%",marginLeft:"-5px",borderLeft:"solid transparent 5px",borderRight:"solid transparent 5px",borderTop:"solid #fff 5px"},gap:{position:"absolute",width:"100%"}}),Object(h.a)(Object(l.a)(t),"show",(function(){return t.setVisibility(!0)})),Object(h.a)(Object(l.a)(t),"hide",(function(){return t.setVisibility(!1)})),Object(h.a)(Object(l.a)(t),"setVisibility",(function(e){t.setState({visible:e})})),t.state={visible:!0},t}return Object(c.a)(i,[{key:"render",value:function(){return Oi("div",{style:ji({},this.styles.container,{left:this.props.left+"px",top:this.props.top-5+"px"})},Oi("div",{style:this.styles.wrapper},this.state.visible&&Oi("div",{style:this.styles.body},Oi("div",{style:this.styles.content},this.props.content),Oi("div",{style:this.styles.arrow}),Oi("div",{style:this.styles.gap}))))}}]),i}(y.PureComponent),Si=function(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var i=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(a);++i<a;)o[i]=e+i*n;return o};const Ii=Symbol("implicit");function Pi(){var e,t,n=function e(){var t=new Map,n=[],i=[],a=Ii;function o(e){var o=e+"",r=t.get(o);if(!r){if(a!==Ii)return a;t.set(o,r=n.push(e))}return i[(r-1)%i.length]}return o.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new Map;for(const i of e){const e=i+"";t.has(e)||t.set(e,n.push(i))}return o},o.range=function(e){return arguments.length?(i=Array.from(e),o):i.slice()},o.unknown=function(e){return arguments.length?(a=e,o):a},o.copy=function(){return e(n,i).unknown(a)},ei.apply(o,arguments),o}().unknown(void 0),i=n.domain,a=n.range,o=0,r=1,s=!1,c=0,l=0,p=.5;function u(){var n=i().length,u=r<o,d=u?r:o,h=u?o:r;e=(h-d)/Math.max(1,n-c+2*l),s&&(e=Math.floor(e)),d+=(h-d-e*(n-c))*p,t=e*(1-c),s&&(d=Math.round(d),t=Math.round(t));var m=Si(n).map((function(t){return d+e*t}));return a(u?m.reverse():m)}return delete n.unknown,n.domain=function(e){return arguments.length?(i(e),u()):i()},n.range=function(e){return arguments.length?([o,r]=e,o=+o,r=+r,u()):[o,r]},n.rangeRound=function(e){return[o,r]=e,o=+o,r=+r,s=!0,u()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(s=!!e,u()):s},n.padding=function(e){return arguments.length?(c=Math.min(1,l=+e),u()):c},n.paddingInner=function(e){return arguments.length?(c=Math.min(1,e),u()):c},n.paddingOuter=function(e){return arguments.length?(l=+e,u()):l},n.align=function(e){return arguments.length?(p=Math.max(0,Math.min(1,e)),u()):p},n.copy=function(){return Pi(i(),[o,r]).round(s).paddingInner(c).paddingOuter(l).align(p)},ei.apply(u(),arguments)}var Ri=g.a.createElement;function Ei(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Di=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(Ei()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){var t;return Object(s.a)(this,i),t=n.call(this,e),Object(h.a)(Object(l.a)(t),"cursorOffset",[-2,-2]),Object(h.a)(Object(l.a)(t),"showToolTip",(function(e){return function(n){t.props.isEnableTooltip&&t.state.hoveredX!==n.nativeEvent.offsetX&&t.setState({hoveredX:n.nativeEvent.offsetX,hoveredY:n.nativeEvent.offsetY,hoveredData:e}),n.stopPropagation()}})),Object(h.a)(Object(l.a)(t),"hideTooltip",(function(){t.props.isEnableTooltip&&t.setState({hoveredX:null,hoveredY:null,hoveredData:null})})),t.xScale=Pi(),t.xLabelScale=gi().clamp(!0),t.yScale=gi(),t.state={hoveredX:0,hoveredY:0,hoveredData:null},t}return Object(c.a)(i,[{key:"render",value:function(){var e=this,t=this.props,n=function(e,t){let n,i;if(void 0===t)for(const a of e)null!=a&&(void 0===n?a>=a&&(n=i=a):(n>a&&(n=a),i<a&&(i=a)));else{let a=-1;for(let o of e)null!=(o=t(o,++a,e))&&(void 0===n?o>=o&&(n=i=o):(n>o&&(n=o),i<o&&(i=o)))}return[n,i]}(this.props.data.bins,(function(e){return e.count}));this.xScale.domain(Array(t.data.bins.length).fill(0).map((function(e,t){return t+""}))).rangeRound([0,t.width-t.margin.left-t.margin.right]),this.xLabelScale.domain([t.margin.left,t.width-t.margin.right]).range([t.data.minValue,t.data.maxValue]),this.yScale.domain([n[0]||0,n[1]||1]).range([t.height-t.margin.top-t.margin.bottom-1,0]);var i=(t.selections[0]-t.data.minValue)/(t.data.maxValue-t.data.minValue)*100,a=(t.selections[1]-t.data.minValue)/(t.data.maxValue-t.data.minValue)*100,o=t.isEnableTooltip&&this.state.hoveredData&&this.state.hoveredX&&this.state.hoveredY&&Ri(ki,{left:this.state.hoveredX+this.cursorOffset[0],top:this.state.hoveredY+this.cursorOffset[1],content:this.xLabelScale(this.state.hoveredX).toFixed(t.textDecimal)}),r=t.isEnableTooltip&&this.state.hoveredData&&this.state.hoveredX&&Ri("g",{className:"histogram-svg-line",transform:"translate(".concat(this.state.hoveredX-t.margin.left+this.cursorOffset[0],", ").concat(this.yScale(this.state.hoveredData.count),")")},Ri("line",{y1:"0",y2:t.height-t.margin.top-t.margin.bottom-this.yScale(this.state.hoveredData.count)})),s=this.xScale("1")-this.xScale("0")-Math.ceil(t.barPadding),c="id".concat(this.props.height).concat(this.props.width).concat(this.props.data.minValue).concat(this.props.data.maxValue);return Ri("div",{className:"jsx-1142075609 histogram-container"},o,Ri("svg",{width:t.width,height:t.height,onMouseOver:this.hideTooltip,onMouseOut:this.hideTooltip,className:"jsx-1142075609 histogram-svg"},Ri("defs",{className:"jsx-1142075609"},Ri("linearGradient",{id:"gradient"+c,gradientUnits:"userSpaceOnUse",x1:"0",y1:"0",x2:t.width-t.margin.left-t.margin.right,y2:"0",className:"jsx-1142075609"},Ri("stop",{offset:i+"%",stopColor:t.gradientColorFrom,className:"jsx-1142075609"}),Ri("stop",{offset:a+"%",stopColor:t.gradientColorTo,className:"jsx-1142075609"}))),Ri("g",{transform:"translate(".concat(t.margin.left,", ").concat(t.margin.top,")"),fill:"url(#gradient".concat(c,")"),className:"jsx-1142075609"},t.data.bins.sort((function(e,t){return e.minValue-t.minValue})).map((function(n,i){return Ri("rect",{key:"histogram-bar-"+i,x:e.xScale(i+""),y:e.yScale(n.count),width:s,height:t.height-t.margin.top-t.margin.bottom-e.yScale(n.count),onMouseMove:e.showToolTip(n),onMouseOver:e.showToolTip(n),className:"jsx-1142075609 histogram-svg-bar"})})),r)),Ri(f.a,{id:"1142075609"},["svg.jsx-1142075609{vertical-align:top;}",".histogram-container.jsx-1142075609{position:relative;}",".histogram-svg.jsx-1142075609{pointer-events:all;}",".histogram-svg-path-event.jsx-1142075609{fill:none;visibility:hidden;}",".histogram-svg-rect-event.jsx-1142075609{pointer-events:all;fill:none;visibility:hidden;}",".no-select.jsx-1142075609{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",".histogram-svg-bar.jsx-1142075609{stroke-width:0;shape-rendering:crispedges;}",".histogram-svg-line.jsx-1142075609{fill:none;stroke:#fff;stroke-width:1.5px;}"]))}}]),i}(y.Component);Object(h.a)(Di,"defaultProps",{margin:{top:0,right:10,bottom:0,left:10},barPadding:0,isEnableTooltip:!1,textDecimal:2});var Ti=g.a.createElement,Mi=190,Ai=60,Ni=50,Li=6,Gi=0,_i=Object(y.memo)((function(e){var t={width:Mi,selections:e.selections,gradientColorFrom:e.gradient[0],gradientColorTo:e.gradient[e.gradient.length-1]};return Ti("div",{className:"jsx-3895235084 histogram-slider"},Ti(Di,Object(r.a)({data:e.data,height:Ai},t)),Ti(xi,Object(r.a)({onSelectionsChange:e.onSelectionChange,min:e.data.minValue,max:e.data.maxValue,height:Ni,trackHeight:Li},t)),Ti(f.a,{id:"3895235084"},[".histogram-slider.jsx-3895235084>:last-child{margin-top:".concat(Gi-.5*(Ni-Li),"px;}")]))})),Bi=g.a.createElement;function Wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Vi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Fi=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(Vi()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(){var e;Object(s.a)(this,i);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),Object(h.a)(Object(l.a)(e),"setSelections",(function(t){var n=e.props.layerRenderer,i=JSON.parse(n),a=Object(Vt.a)(t[0],t[1],i.visualVariables[0].stops.length);i.visualVariables[0].stops=a.map((function(t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wi(Object(n),!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({value:t,label:i.visualVariables[0].stops[n].label||""},function(t){switch(e.props.visType){case Rt.d.numColor:return{color:e.props.themeColors[t]};case Rt.d.numSize:default:return{size:e.props.themeSizes[t]}}}(n))})),e.onLayerRendererChange(i)})),Object(h.a)(Object(l.a)(e),"onLayerRendererChange",Ut()((function(t){e.props.onLayerRendererChange(e.props.index,JSON.stringify(t))}),100)),e}return Object(c.a)(i,[{key:"render",value:function(){var e="string"===typeof this.props.layerRenderer?JSON.parse(this.props.layerRenderer):this.props.layerRenderer;if(!e.hasOwnProperty("visualVariables"))return null;var t=e.visualVariables[0].stops,n=t[0],i=t[t.length-1],a=[n.value,i.value],o=[this.props.themeColors[0],this.props.themeColors[this.props.themeColors.length-1]].map((function(e){return"string"===typeof e?e:"rgba(".concat(e.r,",").concat(e.g,",").concat(e.b,",").concat(e.a,")")}));return Bi("div",{className:f.a.dynamic([["1824460259",[Se.a.center(),Se.a.center()]]])+" fine-tuning"},this.props.histogramResult&&Bi(_i,{data:this.props.histogramResult,gradient:o,selections:a,onSelectionChange:this.setSelections}),Bi("div",{className:f.a.dynamic([["1824460259",[Se.a.center(),Se.a.center()]]])+" labels"},t.map((function(e){var t=e.label;return t&&Bi("span",{className:f.a.dynamic([["1824460259",[Se.a.center(),Se.a.center()]]])},t)}))),Bi(f.a,{id:"1824460259",dynamic:[Se.a.center(),Se.a.center()]},[".fine-tuning.__jsx-style-dynamic-selector{".concat(Se.a.center(),";-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}"),".labels.__jsx-style-dynamic-selector{width:100%;".concat(Se.a.center(),";-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-top:-2rem;}")]))}}]),i}(y.Component),Ui=n("A7aE"),zi=g.a.createElement,Hi=Object(y.memo)((function(e){var t=e.data,n=e.renderer,i=!!Object(Vt.c)(n.visType),a=n.rendererConf&&"new"!==n.rendererConf,o=n.histogramResults&&n.histogramResults[e.dataSignature+n.fields[0]];if(!i||!a||!o)return null;var r=t.serviceUrl&&t.serviceUrl.geometryType?t.serviceUrl.geometryType:void 0;if(!r)return null;var s=[];"esriGeometryPoint"===r?s=[8,75]:"esriGeometryPolyline"===r&&(s=[2,18]);var c=Object(Et.o)(n.visType===Rt.d.numColor),l=e.storyDesign.storyTheme.themeVariables,p=c?c(l.colorRampDefinitions[n.colorIndex]):[l[Et.a[n.colorIndex]]];return zi(Lt,{heading:zi(v.a,{id:"builder.map.vis.fineTuning"}),info:void 0},zi(Fi,{visType:n.visType,index:e.index,histogramResult:n.histogramResults[e.dataSignature+n.fields[0]],themeColors:p,themeSizes:s,layerRenderer:n.rendererConf,onLayerRendererChange:e.setVisRenderer}))})),Yi=Object(Ui.b)(Object(b.c)(Hi)),Ki=n("qzml"),Xi=g.a.createElement,Ji=Object(y.memo)((function(e){var t=Object(y.useState)(function(e){var t=e.renderer;return(e.fields||[]).findIndex((function(e){return e.name===t.fields[0]}))}(e)+1),n=t[0],a=t[1],o=[{name:e.title,alias:e.intl.formatMessage({id:"builder.map.vis.location"}),type:"esriFieldTypeGeometry"}].concat(Object(i.a)(e.fields||[])).map((function(t,n){var i=t.type.replace("esriFieldType","");return{id:t.name,content:Xi("span",{title:"".concat(t.alias," (").concat(i,")")},t.alias,Xi("span",null,"\xa0(",i,")")),onClick:function(){e.setVisField(t.name,Object(Et.h)(e.geometryType,[t])[0]),a(n)}}}));return Xi(Lt,{heading:Xi(v.a,{id:"builder.map.vis.selectAnAttributeToMap"})},Xi(Ki.a,{selectedIndex:n,options:o,placement:"bottom-end"}))})),Zi=Object(b.c)(Ji),qi=n("uPd/"),Qi=g.a.createElement,$i=Object(y.memo)((function(e){var t=e.colors;if(0===t.length)return null;var n=(t.length>1?t:[].concat(Object(i.a)(t),Object(i.a)(t))).map((function(e){var t=e.r,n=e.g,i=e.b,a=e.a;return"rgba(".concat(t,",").concat(n,",").concat(i,",").concat(a,")")})).join(),a=S.a.spacing.xxs;return Qi("div",{className:f.a.dynamic([["984197648",[a,S.a.spacing.xxxs,S.a.spacing.xxxs,a,n]]])+" color-option"},Qi(f.a,{id:"984197648",dynamic:[a,S.a.spacing.xxxs,S.a.spacing.xxxs,a,n]},[".color-option.__jsx-style-dynamic-selector{height:".concat(a,";width:100%;position:relative;}"),".color-option.__jsx-style-dynamic-selector::before{content:'';position:absolute;top:0;bottom:0;left:".concat(S.a.spacing.xxxs,";right:").concat(S.a.spacing.xxxs,";border-radius:calc(").concat(a," * 0.5);background-image:linear-gradient(to right,").concat(n,");}")]))})),ea=Object(y.memo)((function(e){var t=e.getColorRamps,n=e.colorRampDefinitions,i=e.onSelect,a=e.selectedIndex,o=t?n.map((function(e,n){return{id:e.name,content:Qi($i,{colors:t(e)}),onClick:function(){i(n)}}})):[{id:"",content:Qi($i,{colors:Et.c})}];return Qi(Ki.a,{selectedIndex:a,options:o,isFullWidth:!0,placement:"bottom-end"})})),ta=Object(y.memo)((function(e){var t=Object(y.useState)(e.renderer.colorIndex),n=t[0],i=t[1],a=Object(Et.o)(!!e.shouldRenderColorRamps),o=Qi(v.a,{id:"builder.map.color"}),r=function(t){e.setVisColor(t),i(t)},s=e.shouldRenderColorRamps?o:Qi("div",{className:"jsx-609477350 heading-wrapper"},o,Qi(qi.a,{selected:n,onSelect:r,placement:"bottom-end"}),Qi(f.a,{id:"609477350"},[".heading-wrapper.jsx-609477350{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}"]));return Qi(Lt,{heading:s,info:void 0},e.shouldRenderColorRamps&&Qi(ea,{selectedIndex:n,onSelect:r,getColorRamps:a,colorRampDefinitions:e.storyDesign.storyTheme.themeVariables.colorRampDefinitions}))})),na=Object(Ui.b)(Object(b.c)(ta)),ia=n("9ixP"),aa=g.a.createElement,oa=Object(y.memo)((function(e){var t=[{id:"temp-id",content:aa("span",null,"(Coming soon...)"),onClick:function(){}}];return aa(y.Fragment,null,aa(ia.a.LabeledSwitch,{label:aa("span",{className:f.a.dynamic([["4226177709",[Se.a.typography.body14(),S.a.spacing.xxxs]]])},aa(v.a,{id:"builder.map.vis.showPopups"})),switch:aa(ia.a,{isOn:e.isShowingPopups,onToggle:e.onToggle})}),e.isShowingPopups&&aa(Lt,{heading:aa(v.a,{id:"builder.map.vis.selectNameFieldOptional"})},aa(Ki.a,{selectedIndex:0,options:t,placement:"bottom-end"})),aa(f.a,{id:"4226177709",dynamic:[Se.a.typography.body14(),S.a.spacing.xxxs]},["span.__jsx-style-dynamic-selector{".concat(Se.a.typography.body14()," padding:0 ").concat(S.a.spacing.xxxs,";}")]))})),ra=Object(b.c)(oa),sa=g.a.createElement;function ca(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var la=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(ca()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){var t;return Object(s.a)(this,i),t=n.call(this,e),Object(h.a)(Object(l.a)(t),"getInitialFieldIndex",(function(){var e=t.props.layerDefinition,n=t.props.visConfig.renderer.fields[0];return(e.fields||[]).findIndex((function(e){return e.name===n}))})),Object(h.a)(Object(l.a)(t),"renderEditorContent",(function(){return sa(y.Fragment,null,t.renderVisFieldSelector(),t.renderVisStyler(),t.renderVisColor(),t.renderVisFineTuner())})),Object(h.a)(Object(l.a)(t),"renderVisFieldSelector",(function(){return sa(Zi,Object(r.a)({setVisField:function(e,n){t.props.setVisField(t.props.index,e,n)}},t.props.layerDefinition,t.props.visConfig))})),Object(h.a)(Object(l.a)(t),"renderVisStyler",(function(){var e=t.props,n=e.layerDefinition,i=e.visConfig,a=(i.renderer.fields||[])[0],o=(n.fields||[]).filter((function(e){return e.name===a})),r=Object(Et.h)(n.geometryType,o),s=i.renderer.visType;return sa(Wt,{visTypes:r,currentVisType:s,setVisType:function(e){t.props.setVisType(t.props.index,e)}})})),Object(h.a)(Object(l.a)(t),"renderVisColor",(function(){return sa(na,Object(r.a)({},t.props.layerDefinition,t.props.visConfig,{setVisColor:function(e){t.props.setVisColor(t.props.index,e)},shouldRenderColorRamps:t.props.visConfig.renderer.visType===Rt.d.numColor}))})),Object(h.a)(Object(l.a)(t),"renderVisFineTuner",(function(){return t.props.visConfig.renderer.visType!==Rt.d.simpleLocation&&sa(Yi,Object(r.a)({index:t.props.index},t.props.visConfig,{setVisRenderer:t.props.setVisRenderer}))})),Object(h.a)(Object(l.a)(t),"renderPopupEditor",(function(){return sa(ra,{onToggle:function(e){},isShowingPopups:!0})})),t.state={selectedFieldIndex:t.getInitialFieldIndex()},t}return Object(c.a)(i,[{key:"render",value:function(){return sa(gt,{backButtonText:sa(v.a,{id:"builder.map.mapLayers"}),onDelete:this.props.onRemove,onConfirm:this.props.onExit,onGoBack:this.props.onExit},this.renderEditorContent())}}]),i}(y.PureComponent),pa=Object(Je.a)(Object(Ze.b)(Object(b.c)(la))),ua=n("i3DM");function da(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ha=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(da()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){Object(s.a)(this,i);return n.call(this,e,{iconName:"layer-map-16",path:"M13.867 1.6A9.762 9.762 0 0 0 8 1.6a9.762 9.762 0 0 1-5.867 0L0 14.4s3.2 1.6 8 0c4.8-1.601 8 0 8 0zM3.117 12l.779-8h8.209l.778 8zm2.437-5.888a2.331 2.331 0 0 1 1.174.88 1.985 1.985 0 0 0 .368.381 2.532 2.532 0 0 0 1.475.324 1.097 1.097 0 0 1 .743.292l.108.107a4.25 4.25 0 0 0 1.23.911 2.891 2.891 0 0 0 .951.17L11.197 5H9v1H8V5H4.803l-.106 1.087a1.816 1.816 0 0 1 .857.025zM10 6h1v1h-1zm1.682 3.98L11.78 11H4.219l.393-4.044a1.149 1.149 0 0 1 .726-.074 1.584 1.584 0 0 1 .772.619 2.608 2.608 0 0 0 .539.536 3.26 3.26 0 0 0 1.918.46.297.297 0 0 1 .195.07l.099.099a4.956 4.956 0 0 0 1.475 1.077 3.771 3.771 0 0 0 1.346.238z",viewBox:"0 0 16 16"})}return i}($.a),ma=n("azqN"),fa=n("k5Cm"),ya=g.a.createElement,ga=Object(y.memo)((function(e){var t=Object(y.useState)(!1),n=t[0],i=t[1],a=Object(y.useRef)(null),o=Object(y.useRef)(null),r="reorderable-list-ghost",s="reorderable-list-drag";Object(y.useEffect)((function(){var t=a.current;return t&&(o.current=new fa.a(t,{ghostClass:r,dragClass:s,animation:150,easing:"cubic-bezier(1, 0, 0, 1)",forceFallback:!0,invertSwap:!0,delay:50,onStart:function(){i(!0)},onEnd:function(t){var n=t.oldIndex,a=t.newIndex;i(!1),"number"===typeof n&&"number"===typeof a&&e.reorder(n,a)}})),function(){o.current&&o.current.destroy()}}),[]);var c=ya(f.a,{id:"3870299758"},["button,[role='button']{cursor:-webkit-grabbing !important;cursor:-moz-grabbing !important;cursor:grabbing !important;}","body{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing;}"]);return ya("ul",{ref:a,className:f.a.dynamic([["659260134",[r,S.a.color.haikuGreen,e.ghostStyleMixin||"",s,S.a.color.emeraldGreen,S.a.color.darkGreen,e.dragStyleMixin||""]]])+" "+(e.className||"")},e.children,ya(f.a,{id:"659260134",dynamic:[r,S.a.color.haikuGreen,e.ghostStyleMixin||"",s,S.a.color.emeraldGreen,S.a.color.darkGreen,e.dragStyleMixin||""]},["ul.__jsx-style-dynamic-selector .".concat(r,"{padding-top:0;padding-bottom:0;max-height:0;overflow:hidden;box-shadow:0 0 0 1px ").concat(S.a.color.haikuGreen,";").concat(e.ghostStyleMixin||"",";}"),"ul.__jsx-style-dynamic-selector .".concat(s,"{height:unset !important;box-shadow:0 0 0 1px ").concat(S.a.color.emeraldGreen,";background-color:").concat(S.a.color.darkGreen,";").concat(e.dragStyleMixin||"",";}")]),n&&c)})),va=g.a.createElement,ba=function(e){var t=e.onReorder,n=e.children,i={styles:va(f.a,{id:"147056356",dynamic:[S.a.spacing.xs]},["ul.__jsx-style-dynamic-selector{padding-bottom:".concat(S.a.spacing.xs,";}")]),className:f.a.dynamic([["147056356",[S.a.spacing.xs]]])};return va(ga,{reorder:t,className:i.className},n,i.styles)},xa=Object(y.memo)((function(e){return va("section",{className:f.a.dynamic([["2857705701",[S.a.spacing.xs]]])+" layer-section"},va(ma.a,null,e.heading),"function"===typeof e.onReorder?va(ba,e):va("ul",{className:f.a.dynamic([["2857705701",[S.a.spacing.xs]]])+" layers"},e.children),va(f.a,{id:"2857705701",dynamic:[S.a.spacing.xs]},[".layers.__jsx-style-dynamic-selector{padding:".concat(S.a.spacing.xs," 0;}")]))})),Oa=n("yd9k"),wa=n("Lf33"),ja=n("tSRP"),Ca=n("v7Aj"),ka=g.a.createElement;function Sa(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ia=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(Sa()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(){var e;Object(s.a)(this,i);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),Object(h.a)(Object(l.a)(e),"renderContextMenuTarget",(function(){var e={styles:ka(f.a,{id:"3700794167"},[".icon-ellipsis.jsx-3700794167{-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}"]),className:"jsx-3700794167"};return ka("div",null,ka(Ca.a,{size:S.a.spacing.xxs},ka(Oa.a,{height:S.a.spacing.xxs,width:"auto",color:S.a.color.cambridgeBlue,className:e.className}),e.styles))})),Object(h.a)(Object(l.a)(e),"renderContextMenuPopper",(function(){return ka(wa.a,null,"function"===typeof e.props.toggle&&ka(wa.a.Item,{onClick:e.props.toggle},e.props.isHidden?ka(v.a,{id:"builder.common.show"}):ka(v.a,{id:"builder.common.hide"})),ka(wa.a.Item,{onClick:e.props.startEditingTitle},ka(v.a,{id:"builder.map.rename"})),ka(wa.a.Item,{onClick:e.props.delete,isDangerous:!0},ka(v.a,{id:"builder.common.delete"})))})),e}return Object(c.a)(i,[{key:"render",value:function(){return ka(ja.a,{target:this.renderContextMenuTarget(),popper:this.renderContextMenuPopper(),placement:"bottom-start",offset:[0,8]})}}]),i}(y.PureComponent),Pa=n("I0tp"),Ra=g.a.createElement,Ea=function(e){var t=Object(y.useState)(!1),n=t[0],i=t[1],a=function(t){Object(ua.a)(t)&&!n&&e.onVisLayerClick(e.index)};return Ra("li",{className:f.a.dynamic([["2761164394",[S.a.spacing.xxxs,S.a.spacing.xxs,S.a.spacing.xs,Se.a.hexA(S.a.color.pearlAqua,.1),S.a.color.antiFlashWhite,Se.a.typography.body14(),Se.a.hexA(S.a.color.white,.5)]]])+" vis-layer"},Ra(ha,{height:S.a.spacing.xxs,width:"auto",color:S.a.color.cambridgeBlue}),Ra("div",{onClick:a,role:"button",onKeyDown:a,tabIndex:0,className:f.a.dynamic([["2761164394",[S.a.spacing.xxxs,S.a.spacing.xxs,S.a.spacing.xs,Se.a.hexA(S.a.color.pearlAqua,.1),S.a.color.antiFlashWhite,Se.a.typography.body14(),Se.a.hexA(S.a.color.white,.5)]]])+" title"},Ra(Pa.a,{text:e.visConfig.data.title,isEditing:n,endEditing:function(){i(!1)},updateText:function(t){e.updateVisLayer(e.index,{title:t})}})),Ra(Ia,{startEditingTitle:function(){i(!0)},delete:function(){e.removeVisLayer(e.index)}}),Ra(f.a,{id:"2761164394",dynamic:[S.a.spacing.xxxs,S.a.spacing.xxs,S.a.spacing.xs,Se.a.hexA(S.a.color.pearlAqua,.1),S.a.color.antiFlashWhite,Se.a.typography.body14(),Se.a.hexA(S.a.color.white,.5)]},[".vis-layer.__jsx-style-dynamic-selector{display:grid;grid-template-columns:auto 1fr auto;grid-gap:".concat(S.a.spacing.xxxs,";-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:'pointer';padding:").concat(S.a.spacing.xxs," ").concat(S.a.spacing.xs,";-webkit-transition:background-color 0.2s;transition:background-color 0.2s;}"),".vis-layer.__jsx-style-dynamic-selector:hover{background-color:".concat(Se.a.hexA(S.a.color.pearlAqua,.1),";}"),".title.__jsx-style-dynamic-selector{color:".concat(S.a.color.antiFlashWhite,";").concat(Se.a.typography.body14()," height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;outline-offset:2px;}"),".vis-layer.__jsx-style-dynamic-selector span.__jsx-style-dynamic-selector{color:".concat(Se.a.hexA(S.a.color.white,.5),";}")]))},Da=function(e){return Ra(xa,{heading:Ra(v.a,{id:"builder.map.visualizationLayers"}),onReorder:e.reorderVisLayers},e.visConfigs.map((function(t,n){return Ra(Ea,Object(r.a)({key:t.dataSignature,index:n,visConfig:t},e))})))},Ta=n("PSUV"),Ma=n("Abkm"),Aa=n("+ApL"),Na=n("0xoW"),La=n("UvhB"),Ga=g.a.createElement;function _a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ba=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(_a()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(){var e;Object(s.a)(this,i);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),Object(h.a)(Object(l.a)(e),"renderDropdownTarget",(function(){return Ga("button",null,Ga(Na.a,{id:"",color:e.getSelectedColorValue(),isSmall:!0,isSelected:!0,selectedBorderColor:S.a.color.haikuBlack}))})),Object(h.a)(Object(l.a)(e),"renderDropdownPopper",(function(){return Ga(La.a,{flavor:"light",onSelect:e.props.onSelect,selectedColor:e.getSelectedColorValue()})})),Object(h.a)(Object(l.a)(e),"getSelectedColorValue",(function(){return e.props.storyDesign.storyTheme.themeVariables[e.props.selectedColor||"accentColor1"]})),e}return Object(c.a)(i,[{key:"render",value:function(){return Ga(ja.a,{target:this.renderDropdownTarget(),popper:this.renderDropdownPopper(),hideOnContentClick:!1,placement:"bottom-start",offset:[0,8]})}}]),i}(y.PureComponent),Wa=Object(Ui.b)(Ba),Va=g.a.createElement;function Fa(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ua=function(e){Object(d.a)(a,e);var t,n=(t=a,function(){var e,n=Object(u.a)(t);if(Fa()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function a(e){var t;return Object(s.a)(this,a),t=n.call(this,e),Object(h.a)(Object(l.a)(t),"renderHeader",(function(){return Va("div",{className:f.a.dynamic([["1248314411",[S.a.spacing.xxxs]]])+" drawing-group-header"},t.renderHeaderLeft(),t.renderHeaderRight(),Va(f.a,{id:"1248314411",dynamic:[S.a.spacing.xxxs]},[".drawing-group-header.__jsx-style-dynamic-selector{height:4rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 ".concat(S.a.spacing.xxxs,";}")]))})),Object(h.a)(Object(l.a)(t),"renderHeaderLeft",(function(){var e=Object(Ke.d)(t.props,t.props.intl.formatMessage);return Va("div",{className:f.a.dynamic([["1499183632",[Se.a.gapped("column",S.a.spacing.xxxs)]]])},t.renderChevronButton(),t.renderTitle(e),Va(f.a,{id:"1499183632",dynamic:[Se.a.gapped("column",S.a.spacing.xxxs)]},["div.__jsx-style-dynamic-selector{".concat(Se.a.gapped("column",S.a.spacing.xxxs),";}")]))})),Object(h.a)(Object(l.a)(t),"renderTitle",(function(e){return Va(y.Fragment,null,Va(Pa.a,{isEditing:t.state.isEditingTitle,startEditing:t.props.canToggle?void 0:t.startEditingTitle,endEditing:t.endEditingTitle,text:e,updateText:t.updateTitle,nonEditableText:Va("span",{className:"jsx-4078596519"},t.props.drawingIds.length),textColor:"inherit"}),Va(f.a,{id:"4078596519"},["span.jsx-4078596519{opacity:0.4;}"]))})),Object(h.a)(Object(l.a)(t),"renderHeaderRight",(function(){return Va("div",{className:f.a.dynamic([["1990551081",[Se.a.gapped("column",S.a.spacing.xxxs)]]])+" icons"},Va(y.Fragment,null,Va(Ia,{delete:t.delete,startEditingTitle:t.startEditingTitle,isHidden:!t.props.isVisible,toggle:t.props.canToggle?t.toggleVisibility:void 0}),Va(Wa,{onSelect:t.selectColor,selectedColor:t.props.color})),Va(f.a,{id:"1990551081",dynamic:[Se.a.gapped("column",S.a.spacing.xxxs)]},[".icons.__jsx-style-dynamic-selector{".concat(Se.a.gapped("column",S.a.spacing.xxxs),";width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;}")]))})),Object(h.a)(Object(l.a)(t),"renderChevronButton",(function(){var e=t.state.isShowingChildren,n={styles:Va(f.a,{id:"309811851",dynamic:[e?"0":"-90deg"]},[".icon-chevron-down-16.__jsx-style-dynamic-selector{-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-transform:rotate(".concat(e?"0":"-90deg",");-ms-transform:rotate(").concat(e?"0":"-90deg",");transform:rotate(").concat(e?"0":"-90deg",");-webkit-transition:0.2s;transition:0.2s;}")]),className:f.a.dynamic([["309811851",[e?"0":"-90deg"]]])};return Va(Ca.a,{onClick:t.toggleChildren,size:"1.6rem"},Va(Aa.a,{width:"1.2rem",height:"1.2rem",color:S.a.color.cambridgeBlue,className:n.className}),n.styles)})),Object(h.a)(Object(l.a)(t),"renderChildren",(function(){var e={styles:Va(f.a,{id:"1424618567",dynamic:[S.a.spacing.xs]},["ul.__jsx-style-dynamic-selector{padding-bottom:".concat(S.a.spacing.xs,";}")]),className:f.a.dynamic([["1424618567",[S.a.spacing.xs]]])};return Va(y.Fragment,null,Va(ga,{reorder:t.reorderDrawings,className:e.className},t.props.children),e.styles)})),Object(h.a)(Object(l.a)(t),"startEditingTitle",(function(){t.setState({isEditingTitle:!0})})),Object(h.a)(Object(l.a)(t),"endEditingTitle",(function(){t.setState({isEditingTitle:!1})})),Object(h.a)(Object(l.a)(t),"updateTitle",(function(e){t.props.update(t.props.type,{title:e})})),Object(h.a)(Object(l.a)(t),"delete",(function(){t.props.delete(t.props.type)})),Object(h.a)(Object(l.a)(t),"toggleChildren",(function(){t.setState((function(e){return{isShowingChildren:!e.isShowingChildren}}))})),Object(h.a)(Object(l.a)(t),"selectColor",(function(e){t.props.update(t.props.type,{color:e});var n="".concat(N.a.Action.Builder_ExpressMap_ChangeGroupColor,"_").concat(String(t.props.type).split("_").map((function(e){return Object(Ma.a)(e)})).join(""));N.a.trackEvent(N.a.Category.Builder,n,e)})),Object(h.a)(Object(l.a)(t),"reorderDrawings",(function(e,n){var a=Object(i.a)(t.props.drawingIds);a.splice(n,0,a.splice(e,1)[0]),t.props.update(t.props.type,{drawingIds:a})})),Object(h.a)(Object(l.a)(t),"toggleVisibility",(function(){t.props.toggle(t.props.type,!t.props.isVisible)})),t.state={isShowingChildren:!0,isEditingTitle:!1},t}return Object(c.a)(a,[{key:"render",value:function(){return this.props.drawingIds.length>0&&Va("li",{className:f.a.dynamic([["1451773733",[S.a.spacing.xxs,this.props.isVisible?S.a.color.antiFlashWhite:S.a.color.coolGrey]]])+" drawing-group"},this.renderHeader(),this.state.isShowingChildren&&this.renderChildren(),Va(f.a,{id:"1451773733",dynamic:[S.a.spacing.xxs,this.props.isVisible?S.a.color.antiFlashWhite:S.a.color.coolGrey]},[".drawing-group.__jsx-style-dynamic-selector{padding:0 ".concat(S.a.spacing.xxs,";color:").concat(this.props.isVisible?S.a.color.antiFlashWhite:S.a.color.coolGrey,";}")]))}}]),a}(y.Component),za=Object(b.c)(Ua),Ha=n("bu6S"),Ya=g.a.createElement,Ka=function(e){return Ya(xa,{heading:Ya(v.a,{id:"builder.map.drawingLayers"})},0===Object(Ke.f)(e.drawingCategories)?Ya(Ta.a,null,Ya(v.a,{id:"builder.expressMap.yourDrawnItems"})):Ya(y.Fragment,null,e.drawingCategories.filter((function(e){return e.drawingIds.length>0})).map((function(t,n){var i,a,o=null===(i=null===(a=e.drawingCategoryVisibilities)||void 0===a?void 0:a[t.type])||void 0===i||i;return Ya(za,Object(r.a)({index:n,key:t.type},t,{isVisible:o,canToggle:!!e.drawingCategoryVisibilities,delete:e.removeDrawingCategory,update:e.updateDrawingCategory,toggle:e.toggleDrawingCategory}),t.drawingIds.filter((function(t){return e.drawings[t]})).map((function(n,i){var a=e.popups[n],r=a?a.title:"",s=e.drawings[n].type,c=t.type===Ye.a.PointNumbered?i+1:void 0;return Ya(Ha.a,{key:n,id:n,title:r,type:s,isDisabled:!o,onClick:e.drawingCategoryVisibilities?void 0:e.onDrawingItemClick,shouldIgnoreTheme:!0,numberedPointNumber:c})})))}))))},Xa=g.a.createElement;function Ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Za(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var qa=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(Za()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(){var e;Object(s.a)(this,i);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),Object(h.a)(Object(l.a)(e),"renderPopupEditor",(function(){var t=e.props.currentlyEditedPopupId,n=e.props.popups[t];if(t in e.props.drawings){var i=e.props.drawings[t].type,a=i===C.j.POINT_NUMBERED?Object(Ke.g)(e.props.drawingCategories.find((function(e){return e.type===Ye.a.PointNumbered})),t):void 0;return Xa(Ct,{id:t,popup:n,updatePopup:e.props.updatePopup,close:e.closePopupEditor,removeDrawing:e.props.removeDrawing,drawingType:i,numberedPointNumber:a})}})),Object(h.a)(Object(l.a)(e),"renderVisEditor",(function(){if("undefined"!==typeof e.props.currentlyEditedVisIndex){var t=e.props.layerDefinitions[e.props.currentlyEditedVisIndex],n=e.props.visConfigs[e.props.currentlyEditedVisIndex],i=function(){e.props.onVisLayerClick()};return t&&n&&Xa(pa,{index:e.props.currentlyEditedVisIndex,layerDefinition:t,setVisField:e.props.setVisField,setVisType:e.props.setVisType,setVisColor:e.props.setVisColor,setVisRenderer:e.props.setVisRenderer,visConfig:n,onExit:i,onRemove:function(){"undefined"!==typeof e.props.currentlyEditedVisIndex&&e.props.removeVisLayer(e.props.currentlyEditedVisIndex),i()}})}})),Object(h.a)(Object(l.a)(e),"renderLayerSections",(function(){return Xa(y.Fragment,null,Xa("div",{className:f.a.dynamic([["3430407494",[S.a.spacing.xs]]])+" layer-sections"},Xa(Ka,e.props),e.props.layerDefinitions.length>0&&Xa(Da,e.props)),e.renderTailpiece(),Xa(f.a,{id:"3430407494",dynamic:[S.a.spacing.xs]},[".layer-sections.__jsx-style-dynamic-selector{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;overflow-y:auto;position:relative;padding-bottom:".concat(S.a.spacing.xs,";}")]))})),Object(h.a)(Object(l.a)(e),"renderTailpiece",(function(){return e.props.areLabFeaturesEnabled&&e.renderAddButton()})),Object(h.a)(Object(l.a)(e),"renderAddButton",(function(){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(n),!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.props.layerDefinitions.length>1&&{isDisabled:!0,tooltipContent:e.props.intl.formatMessage({id:"builder.map.youCanOnlyAddTwoVis"})},{},e.props.storyMapUserPrivileges&&!e.props.storyMapUserPrivileges.canAddDataToExpressMap&&{isDisabled:!0,tooltipContent:e.props.intl.formatMessage({id:"publicAccount.disabled"})});return Xa(Pt,Object(r.a)({onClick:e.props.openDataBrowserModal},t))})),Object(h.a)(Object(l.a)(e),"closePopupEditor",(function(){e.props.onDrawingItemClick("")})),e}return Object(c.a)(i,[{key:"render",value:function(){var e=this.props.drawings[this.props.currentlyEditedPopupId],t=e&&e.type in He.g,n="number"===typeof this.props.currentlyEditedVisIndex&&this.props.visConfigs[this.props.currentlyEditedVisIndex];return Xa("div",{className:"jsx-3715953563 layers-tab"},t?this.renderPopupEditor():n?this.renderVisEditor():this.renderLayerSections(),Xa(f.a,{id:"3715953563"},[".layers-tab.jsx-3715953563{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:100%;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}"]))}}]),i}(y.Component),Qa=Object(D.b)(Object(ze.b)(Object(b.c)(qa))),$a=n("S5pg"),eo=g.a.createElement;function to(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var no=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(to()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(){var e;Object(s.a)(this,i);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),Object(h.a)(Object(l.a)(e),"filePath","".concat(e.props.config.BASE_URL,"/static/images/expressmap-onboarding-modal")),Object(h.a)(Object(l.a)(e),"stringsPath","builder.map.onboarding"),Object(h.a)(Object(l.a)(e),"modalSlides",[{imageUrl:"".concat(e.filePath,"/ExpressMapOnboard1.jpg?v=19.3.1"),imageAlt:e.props.intl.formatMessage({id:"".concat(e.stringsPath,".slide1.imageAlt")}),title:e.props.intl.formatMessage({id:"".concat(e.stringsPath,".slide1.title")}),mainText:e.props.intl.formatMessage({id:"".concat(e.stringsPath,".slide1.text")}),navDotAria:e.props.intl.formatMessage({id:"builder.common.displayTip"},{tipNumber:1}),closeButtonLabel:e.props.intl.formatMessage({id:"builder.common.skip"})},{imageUrl:"".concat(e.filePath,"/ExpressMapOnboard2.jpg"),imageAlt:e.props.intl.formatMessage({id:"".concat(e.stringsPath,".slide2.imageAlt")}),title:e.props.intl.formatMessage({id:"".concat(e.stringsPath,".slide2.title")}),mainText:e.props.intl.formatMessage({id:"".concat(e.stringsPath,".slide2.text")}),navDotAria:e.props.intl.formatMessage({id:"builder.common.displayTip"},{tipNumber:2}),closeButtonLabel:e.props.intl.formatMessage({id:"builder.common.skip"})},{imageUrl:"".concat(e.filePath,"/ExpressMapOnboard3.jpg?v=19.3.1"),imageAlt:e.props.intl.formatMessage({id:"".concat(e.stringsPath,".slide3.imageAlt")}),title:e.props.intl.formatMessage({id:"".concat(e.stringsPath,".slide3.title")}),mainText:e.props.intl.formatMessage({id:"".concat(e.stringsPath,".slide3.text")}),navDotAria:e.props.intl.formatMessage({id:"builder.common.displayTip"},{tipNumber:3}),closeButtonLabel:e.props.intl.formatMessage({id:"builder.common.skip"})},{imageUrl:"".concat(e.filePath,"/ExpressMapOnboard4.jpg?v=19.3.1"),imageAlt:e.props.intl.formatMessage({id:"".concat(e.stringsPath,".slide4.imageAlt")}),title:e.props.intl.formatMessage({id:"".concat(e.stringsPath,".slide4.title")}),mainText:e.props.intl.formatMessage({id:"".concat(e.stringsPath,".slide4.text")}),navDotAria:e.props.intl.formatMessage({id:"builder.common.displayTip"},{tipNumber:4}),closeButtonLabel:e.props.intl.formatMessage({id:"builder.common.gotIt"})}]),e}return Object(c.a)(i,[{key:"render",value:function(){return eo($a.a,{modalSlides:this.modalSlides,onCloseButtonClick:this.props.onCloseButtonClick,isShowingModal:this.props.isShowingModal,previousButtonAria:this.props.intl.formatMessage({id:"builder.common.previousTip"}),nextButtonAria:this.props.intl.formatMessage({id:"builder.common.nextTip"})})}}]),i}(y.PureComponent),io=Object(G.c)(Object(b.c)(no)),ao=n("BAoe"),oo=n("/wLg"),ro=n("TM+8"),so=n("asqy"),co=n("iwZA"),lo=n("yHNY"),po=g.a.createElement,uo=Object(ao.b)({"search.label":{id:"common.search"},"search.clear-btn-label":{id:"component.myStories.index.clearBtnLabel"}}),ho=Object(y.memo)((function(e){var t=e.intl.formatMessage;return po(oo.a,{isShowingModal:e.isShowing,type:"content",onClose:e.onClose},po(ro.a,{id:"data-browser",heading:po(v.a,{id:"builder.itemBrowser.addData"}),defaultSearchQuery:'type:"Feature Service" AND typekeywords:"Singlelayer"',searchBoxProps:{clearBtnLabel:t(uo["search.clear-btn-label"]),label:t(uo["search.label"]),placeholder:t(uo["search.label"])},tabFilters:[{id:0,content:po(v.a,{id:"builder.itemBrowser.myLayers"}),searchModifier:"myContent"},{id:1,content:po(v.a,{id:"builder.itemBrowser.myFavorites"}),searchModifier:"favoritesGroup"},{id:2,content:po(v.a,{id:"builder.itemBrowser.sharedWithMe"}),searchModifier:"sharedWithMe"},{id:3,content:po(v.a,{id:"builder.itemBrowser.livingAtlas"}),searchModifier:e.canAddPremiumAndSubscriptionLayers?"":'-typekeywords:"Requires Subscription" AND -typekeywords:"Requires Credits"',isLivingAtlas:!0,customSearchOptions:{searchType:"groupItems",groupId:e.config.LIVING_ATLAS_MAP_GROUP_ID}}],initialItems:{query:"",start:1,num:24,results:[],nextStart:-1,total:0},sortOptions:[{id:0,content:po(v.a,{id:"builder.itemBrowser.dateModified"}),sortField:"modified",sortOrder:"desc"}],userSession:e.userSession,renderCardFooterStartItems:function(t){return!(e.userSession&&e.userSession.username===t.item.owner)&&po(lo.a,{username:t.item.owner})},renderCardFooterEndItems:function(t){return po(g.a.Fragment,null,po(co.a,{id:t.item.id}),po(so.a,{isFavorite:t.item.isFavorite,id:t.item.id,owner:t.item.owner,userSession:e.userSession,type:"layer"}))},cardRole:"button",onCardClick:function(t){e.addDataItem(t),e.onClose()},shouldIgnoreItem:function(e){var t=e.url;return!(t&&t.startsWith("https://"))}}))})),mo=Object(G.c)(Object(b.c)(ho)),fo=n("W8gz"),yo=n("bXtg"),go=n("cVdA"),vo=n("dsEC"),bo=g.a.createElement,xo=Object(b.c)(Object(y.memo)((function(e){var t=function(t){return bo(fo.a,{title:bo(v.a,{id:"builder.map.mapConfigurations"})},bo(vo.a.Navigation,{isOn:e.isAllowingNavigation,onToggle:e.onToggleIsAllowingNavigation,isDisabled:t}),bo(vo.a.Search,{isOn:e.isShowingSearch,onToggle:e.onToggleIsShowingSearch,mapType:"expressmap",isDisabled:!e.isAllowingNavigation||t}),bo(vo.a.Locate,{isOn:e.isShowingLocate,onToggle:e.onToggleIsShowingLocate,mapType:"expressmap",isDisabled:!e.isAllowingNavigation||t}),bo(vo.a.Legend,{isOn:e.isShowingLegend,onToggle:e.onToggleIsShowingLegend,isDisabled:t}),bo(vo.a.Clustering,{isOn:e.isAllowingClustering,onToggle:e.onToggleIsAllowingClustering,isDisabled:!e.isAllowingNavigation||t}))};return bo(yo.a,null,e.shouldDisableAllMapConfigs?bo(W.a,{tooltipContent:e.intl.formatMessage({id:"builder.swipe.map.mapControls.disabled"}),placement:"top"},t(!0)):t(),bo(fo.a,{title:bo(v.a,{id:"builder.map.basemap"})},bo(go.a,{userRegionOrCountry:e.userRegionOrCountry,basemap:e.basemap,onPick:e.onPickBasemap})),e.shouldShowLabUi&&bo(fo.a,{title:bo(v.a,{id:"builder.map.lab"})},bo(ia.a.LabeledSwitch,{label:bo(v.a,{id:"builder.map.tint"}),switch:bo(ia.a,{isOn:e.isShowingMapFilter,onToggle:e.toggleMapFilter})})))}))),Oo=n("TQaU"),wo=n("gMl6"),jo=n("f9/c"),Co=n("dC0i"),ko=n("57qx"),So=n("hG09"),Io=n("KMip"),Po=n("l5Wi"),Ro=n("LJBs"),Eo=function(){function e(t,n,i,a){var o=this;Object(s.a)(this,e),this.onTravel=n,this.onUpdate=function(){i(o.getOnUpdatePayload())},this.limit=a,this.initTimePoint=t,this.clear()}return Object(c.a)(e,[{key:"undo",value:function(){return this.present--,this.getPresentTimePoint()}},{key:"redo",value:function(){return this.present++,this.getPresentTimePoint()}},{key:"record",value:function(e){this.timeline[this.present+1]=e,this.timeline.length>this.present+2&&(this.timeline=this.timeline.slice(0,this.present+2)),"number"===typeof this.limit&&this.timeline.length>this.limit&&(this.timeline=this.timeline.slice(-this.limit)),this._present=this.timeline.length-1,this.onUpdate()}},{key:"getPresentTimePoint",value:function(){return this.timeline[this._present]}},{key:"clear",value:function(){this.timeline=[this.initTimePoint],this._present=0}},{key:"canUndo",value:function(){return this._present>0}},{key:"canRedo",value:function(){return this._present<this.timeline.length-1}},{key:"getOnUpdatePayload",value:function(){return{canRedo:this.canRedo(),canUndo:this.canUndo()}}},{key:"present",get:function(){return this._present},set:function(e){e<0||e>this.timeline.length-1||(this._present=e,this.onTravel(this.getPresentTimePoint()),this.onUpdate())}}]),e}(),Do=n("cpdA"),To=n("GpNk"),Mo=function(){return Object(To.a)({id:"expressmapOnboardingModal"})},Ao=function(){Object(To.b)({id:"expressmapOnboardingModal",value:!0})},No=function(){return Object(To.a)({id:"expressmapSearchNudge"})},Lo=function(){Object(To.b)({id:"expressmapSearchNudge",value:!0})},Go=function(){return Object(To.a)({id:"expressmapDrawNudge"})},_o=function(){Object(To.b)({id:"expressmapDrawNudge",value:!0})},Bo=n("20vC"),Wo=n("wAF/");function Vo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Fo=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(Vo()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){Object(s.a)(this,i);return n.call(this,e,{iconName:"dash-solid",path:"M0 7h16v2H0z",viewBox:"0 0 16 16"})}return i}($.a);function Uo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var zo=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(Uo()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){Object(s.a)(this,i);return n.call(this,e,{iconName:"dash-large",path:"M10 7h6v2h-6zM0 7h6v2H0z",viewBox:"0 0 16 16"})}return i}($.a);function Ho(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Yo=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(Ho()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){Object(s.a)(this,i);return n.call(this,e,{iconName:"dash-small",path:"M10 7v2H6V7h4zM4 7v2H0V7h4zm12 0v2h-4V7h4z",viewBox:"0 0 16 16"})}return i}($.a),Ko=n("gbSL"),Xo=n("X/3D"),Jo=n("ADUw"),Zo=n("KDNM"),qo=n("K16L"),Qo=g.a.createElement;function $o(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var er=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if($o()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(){var e;Object(s.a)(this,i);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),Object(h.a)(Object(l.a)(e),"getColorSwatchesItem",(function(t){if("function"===typeof e.props.updateSelectedArrowColor){var n=[{id:qo.d.ThemeColor1,color:t.themeColor1,ariaLabel:e.props.intl.formatMessage({id:"builder.designPanel.accentColorControl.themeColor1.label"})},{id:qo.d.ThemeColor2,color:t.themeColor2,ariaLabel:e.props.intl.formatMessage({id:"builder.designPanel.accentColorControl.themeColor2.label"})},{id:qo.d.ThemeColor3,color:t.themeColor3,ariaLabel:e.props.intl.formatMessage({id:"builder.designPanel.accentColorControl.themeColor3.label"})},{id:qo.d.BackgroundColor,color:t.backgroundColor,ariaLabel:e.props.intl.formatMessage({id:"component.colorSwatchDropdown.backgroundColor.label"})},{id:qo.d.TitleColor,color:t.titleColor,ariaLabel:e.props.intl.formatMessage({id:"component.textSwatchDropdown.themed.label"})}];return"undefined"!==typeof Object(Zo.b)(t)&&n.push({id:qo.d.AccentColor1,color:t.accentColor1,ariaLabel:e.props.intl.formatMessage({id:"builder.designPanel.accentColorControl.customColor"})}),{label:e.props.intl.formatMessage({id:"builder.map.color"}),control:Qo(Ko.a,{colors:n,onClick:e.props.updateSelectedArrowColor,selectedStyle:e.props.selectedArrowColor})}}})),Object(h.a)(Object(l.a)(e),"getTextSwatchesItem",(function(t){if("function"===typeof e.props.updateSelectedTextColor)return{label:e.props.intl.formatMessage({id:"builder.map.color"}),control:Qo(Ko.a,{styles:[{id:qo.c.Color1,ariaLabel:e.props.intl.formatMessage({id:"component.textSwatchDropdown.themed.label"}),textColor:t.backgroundColor,backgroundColor:t.titleColor},{id:qo.c.Color2,ariaLabel:e.props.intl.formatMessage({id:"component.colorSwatchDropdown.backgroundColor.label"}),textColor:t.titleColor,backgroundColor:t.backgroundColor},{id:qo.c.Color3,textColor:e.props.storyDesign.storyTheme.themeVariables.bodyColorLight,ariaLabel:e.props.intl.formatMessage({id:"component.textSwatchDropdown.transparentWithLightColor.label"}),backgroundColor:Xo.a.transparentWithLightColor},{id:qo.c.Color4,ariaLabel:e.props.intl.formatMessage({id:"component.textSwatchDropdown.transparentWithDarkColor.label"}),textColor:e.props.storyDesign.storyTheme.themeVariables.bodyColorDark,backgroundColor:Xo.a.transparentWithDarkColor}],onClick:e.props.updateSelectedTextColor,selectedStyle:e.props.selectedTextColor})}})),Object(h.a)(Object(l.a)(e),"getLineDashSwatchesItem",(function(){if("function"===typeof e.props.updateSelectedLineDash)return{label:e.props.intl.formatMessage({id:"builder.map.lineStyle"}),control:Qo(Ko.a,{icons:[{id:qo.a.Continuous,icon:Fo,ariaLabel:e.props.intl.formatMessage({id:"builder.map.lineStyle.solid"})},{id:qo.a.Large,icon:zo,ariaLabel:e.props.intl.formatMessage({id:"builder.map.lineStyle.dashedLarge"})},{id:qo.a.Small,icon:Yo,ariaLabel:e.props.intl.formatMessage({id:"builder.map.lineStyle.dashedSmall"})}],onClick:e.props.updateSelectedLineDash,selectedStyle:e.props.selectedLineDash})}})),e}return Object(c.a)(i,[{key:"render",value:function(){var e=this.props.storyDesign.storyTheme.themeVariables,t=[],n=this.getColorSwatchesItem(e);n&&t.push(n);var i=this.getTextSwatchesItem(e);i&&t.push(i);var a=this.getLineDashSwatchesItem();return a&&t.push(a),Qo(y.Fragment,null,Qo("div",{className:f.a.dynamic([["3085065964",[S.a.spacing.xxxs,S.a.spacing.xxxs,S.a.color.white,S.a.spacing.xxxs]]])+" panel-container"},Qo(Jo.a,{title:this.props.intl.formatMessage({id:"mixed"===this.props.annotationType?"builder.map.mixedAnnotations.title":"builder.map.annotationStyle"}),subtitle:"mixed"===this.props.annotationType?this.props.intl.formatMessage({id:"builder.map.mixedAnnotations.description"}):void 0,styleItems:"mixed"===this.props.annotationType?void 0:t})),Qo(f.a,{id:"3085065964",dynamic:[S.a.spacing.xxxs,S.a.spacing.xxxs,S.a.color.white,S.a.spacing.xxxs]},[".panel-container.__jsx-style-dynamic-selector{position:absolute;top:".concat(S.a.spacing.xxxs,";left:").concat(S.a.spacing.xxxs,";background-color:").concat(S.a.color.white,";z-index:2;}"),"html[dir='rtl'] .panel-container.__jsx-style-dynamic-selector{right:".concat(S.a.spacing.xxxs,";left:unset;}")]))}}]),i}(y.PureComponent),tr=Object(Ui.b)(Object(b.c)(er));function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ar=function e(t){var n=this;Object(s.a)(this,e),Object(h.a)(this,"payload",[]),Object(h.a)(this,"update",(function(e,t,i){switch(i){case qo.b.LineTypeId:n.updateLinedash(e,t);break;case qo.b.ThemeColorId:n.updateColorType(e,t)}})),Object(h.a)(this,"getState",(function(){return{drawings:n.drawings}})),Object(h.a)(this,"process",(function(){})),Object(h.a)(this,"getPayload",(function(){var e=n.payload;return{type:C.a.Style,payload:e}})),Object(h.a)(this,"updateColorType",(function(e,t){})),Object(h.a)(this,"updateLinedash",(function(e,t){var i=[];e.forEach((function(e){n.drawings[e].styles=ir({},n.drawings[e].styles,{lineDash:t});var a={id:e,style:ir({},n.drawings[e].styles,{lineDash:t})};i.push(a)})),n.payload=i})),this.drawings=t},or=n("i8u9"),rr=g.a.createElement;function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var pr=function(e){Object(d.a)(a,e);var t,n=(t=a,function(){var e,n=Object(u.a)(t);if(lr()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function a(e){var t;Object(s.a)(this,a),t=n.call(this,e),Object(h.a)(Object(l.a)(t),"__SHOULD_LOG",!1),Object(h.a)(Object(l.a)(t),"mapContainerId","map-designer"),Object(h.a)(Object(l.a)(t),"showOnboardingModal",(function(){t.setState({isShowingOnboardingModal:!0})})),Object(h.a)(Object(l.a)(t),"closeOnboardingModal",(function(){var e={isShowingOnboardingModal:!1};Go()||Object.assign(e,{shouldShowDrawNudge:!0}),t.setState(e),Ao()})),Object(h.a)(Object(l.a)(t),"renderDiscardUnsavedMapModal",(function(){return rr(k.a,{headerTitle:rr(v.a,{id:"builder.map.discardUnsavedMapModal.headerTitle"}),isShowingModal:t.state.isShowingDiscardUnsavedMapModal,primaryButtonTitle:rr(v.a,{id:"builder.map.discardUnsavedMapModal.primaryButtonTitle"}),onPrimaryButtonClick:t.props.onCancel,secondaryButtonTitle:rr(v.a,{id:"common.cancel"}),onSecondaryButtonClick:t.closeDiscardUnsavedMapModal,onCloseButtonClick:t.closeDiscardUnsavedMapModal,closeButtonLabel:t.props.intl.formatMessage({id:"common.close"})},rr(v.a,{id:"builder.map.discardUnsavedMapModal.content"}))})),Object(h.a)(Object(l.a)(t),"renderToolbar",(function(){return rr(Oo.a,null,rr(Ve,{drawingMode:t.state.drawingMode,onToolSelected:t.onDrawingToolSelected,undo:t.undo,redo:t.redo,canUndo:t.state.canUndo,canRedo:t.state.canRedo,shouldShowNudge:t.state.shouldShowDrawNudge,onNudgeClick:t.onDrawingNudgeClose,isDisabled:"undefined"===typeof t.state.isViewStationary}),t.getIsForOverriding()?t.renderMapSearch():t.renderMapSearchWithNudge())})),Object(h.a)(Object(l.a)(t),"renderMapSearch",(function(){return rr("div",{className:f.a.dynamic([["4245553459",[S.a.responsiveBreakpoints.extraLarge]]])},rr(wo.a,{onSearch:t.onSearch,fullWidth:!0}),rr(f.a,{id:"4245553459",dynamic:[S.a.responsiveBreakpoints.extraLarge]},["div.__jsx-style-dynamic-selector{max-width:32rem;}","@media (min-width:".concat(S.a.responsiveBreakpoints.extraLarge,"){div.__jsx-style-dynamic-selector{width:32rem;}}")]))})),Object(h.a)(Object(l.a)(t),"renderMapSearchWithNudge",(function(){var e=!t.definitelyNeverShowSearchNudge&&!No()&&t.state.shouldShowSearchNudge;return rr(I.a,{target:t.renderMapSearch(),title:t.props.intl.formatMessage({id:"builder.map.onboarding.nudge1.title"}),text:t.props.intl.formatMessage({id:"builder.map.onboarding.nudge1.text"}),placement:"bottom",isShowing:e,onClick:t.onSearchNudgeClose})})),Object(h.a)(Object(l.a)(t),"renderMap",(function(){return rr("div",{className:"jsx-3367644146 editor-container"},rr(_.a,{type:"expressMap",mapContainerId:t.mapContainerId,graphicsContainerId:t.getGraphicsContainerId(),setCustomGraphics:t.setCustomGraphics,visConfigs:t.state.visConfigs,setVisRenderer:t.setVisRenderer,setVisHistogram:t.setVisHistogram,supportEditing:!0,isScrollZoomingEnabled:!0,shouldDownScaleGraphics:!1,onMapLoad:t.onMapLoad,ariaLabel:t.props.ariaLabel,basemap:t.state.basemap,groupColors:Object(Do.c)(t.state.drawingCategories),shouldShowLocate:t.state.locate}),t.renderDrawingTexts(),t.renderPopups(),t.renderSearchPopup(),(t.state.isShowingLegend||t.state.idOfFullPopupBeingShown)&&t.renderLegendOrFullPopup(),t.state.search&&t.renderDisabledSearch(),t.renderAnnotationStylesPanel(),rr(f.a,{id:"3367644146"},[".editor-container.jsx-3367644146{overflow:hidden;position:relative;z-index:0;}"]))})),Object(h.a)(Object(l.a)(t),"renderAnnotationStylesPanel",(function(){var e=Po.b(t.state.currentlySelectedDrawingIds,t.state.drawings),n={};"arrow"===e?n={selectedArrowColor:t.state.currentlySelectedArrowColor?Po.c(t.state.currentlySelectedArrowColor,t.props.storyDesign.storyTheme.themeVariables):void 0,updateSelectedArrowColor:t.updateArrowAnnotationColor,selectedLineDash:t.state.currentlySelectedArrowType,updateSelectedLineDash:t.updateDashline}:"text"===e&&(n={selectedTextColor:t.state.currentlySelectedTextAnnotationColor,updateSelectedTextColor:t.updateTextAnnotationColor,selectedLineDash:t.state.currentlySelectedLeaderlineType,updateSelectedLineDash:t.updateTextLeaderline});return t.state.isShowingAnnotationStylePanel&&!!e&&rr(tr,Object(r.a)({annotationType:e},n))})),Object(h.a)(Object(l.a)(t),"updateTextAnnotationColor",(function(e){t.setState((function(t){return Po.k(e,t.drawings,t.currentlySelectedDrawingIds,t.currentlySelectedTextAnnotationColor)}),(function(){t.processStyles()}))})),Object(h.a)(Object(l.a)(t),"updateTextLeaderline",(function(e){t.setState((function(t){return Po.j(e,t.drawings,t.currentlySelectedDrawingIds,t.currentlySelectedLeaderlineType)}),(function(){t.processStyles()}))})),Object(h.a)(Object(l.a)(t),"updateArrowAnnotationColor",(function(e){t.setState((function(t){return Po.i(e,t.drawings,t.currentlySelectedDrawingIds,t.currentlySelectedArrowColor)}),(function(){var n=Po.d(e,t.props.storyDesign.storyTheme.themeVariables),i=t.state.currentlySelectedDrawingIds.map((function(e){return{id:e,style:cr({color:t.state.currentlySelectedArrowColor},n)}}));t.updateToCustomGraphics(C.a.Style,JSON.stringify(i))}))})),Object(h.a)(Object(l.a)(t),"updateDashline",(function(e){t.setState((function(n){return t.themeController=new ar(n.drawings),t.themeController.update(n.currentlySelectedDrawingIds,e,qo.b.LineTypeId),cr({},t.themeController.getState(),{currentlySelectedArrowType:e})}),(function(){t.customGraphics.pushAction(t.themeController.getPayload())}))})),Object(h.a)(Object(l.a)(t),"renderDisabledSearch",(function(){return rr(Bo.a,{tooltip:t.props.intl.formatMessage({id:"builder.map.search.disabled.tooltip"})})})),Object(h.a)(Object(l.a)(t),"renderSidePanel",(function(){var e=[{id:"layers",icon:function(e){return rr(P.a,{height:S.a.spacing.xxs,width:"auto",color:e,title:rr(v.a,{id:"builder.common.layers",tagName:"title"})})},content:rr(Qa,Object(r.a)({},t.state,{drawingCategoryVisibilities:t.getIsForOverriding()?t.state.drawingCategoryVisibilities||{}:void 0,removeDrawing:t.removeDrawings,updatePopup:t.updatePopup,onDrawingItemClick:t.onDrawingItemClickFromSidePanel,setVisField:t.setVisField,setVisType:t.setVisType,setVisColor:t.setVisColor,setVisRenderer:t.setVisRenderer,openDataBrowserModal:t.openDataBrowserModal,removeDrawingCategory:t.removeDrawingCategory,updateDrawingCategory:t.updateDrawingCategory,toggleDrawingCategory:t.toggleDrawingCategory,removeVisLayer:t.removeVisLayer,updateVisLayer:t.updateVisLayer,onVisLayerClick:t.onVisLayerClick,reorderVisLayers:t.reorderVisLayers}))},{id:"options",icon:function(e){return rr(R.a,{height:S.a.spacing.xxs,width:"auto",color:e,title:rr(v.a,{id:"builder.common.properties",tagName:"title"})})},content:rr(xo,Object(r.a)({},t.state,{isAllowingClustering:!!t.state.clustering,onToggleIsAllowingClustering:t.toggleClustering,isAllowingNavigation:!!t.state.navigation,onToggleIsAllowingNavigation:t.toggleNavigation,isShowingSearch:!!t.state.search,onToggleIsShowingSearch:t.toggleSearch,isShowingLocate:!!t.state.locate,onToggleIsShowingLocate:t.toggleLocate,onToggleIsShowingLegend:t.toggleIsShowingLegend,shouldShowLabUi:t.props.areLabFeaturesEnabled,onPickBasemap:t.onPickBasemap,toggleMapFilter:t.toggleMapFilter,shouldDisableAllMapConfigs:t.props.shouldDisableAllMapConfigs}))}];return rr(E.a,{items:e})})),Object(h.a)(Object(l.a)(t),"renderDrawingTexts",(function(){return t.state.idsOfDrawingTextsBeingShown.map((function(e){var n,i,a=t.state.drawings[e];if((null===a||void 0===a?void 0:a.type)!==C.j.TEXT_LEADERLINE)return null;var o=(null===(n=a.data)||void 0===n?void 0:n.content)||"",r=(null===(i=a.styles)||void 0===i?void 0:i.textColor)||"backgroundColor";return rr(Ue.a,{key:e,id:e,text:o,containerId:t.getGraphicsContainerId(),textColor:t.props.storyDesign.storyTheme.themeVariables[r],isBeingEdited:t.state.currentlyEditedDrawingTextId===e,updateDrawingTextContent:t.updateDrawingTextContent})}))})),Object(h.a)(Object(l.a)(t),"renderPopups",(function(){return rr(y.Fragment,null,t.state.idsOfPopupsBeingShown.filter((function(e){return e!==t.state.idOfFullPopupBeingShown})).map((function(e){return t.state.popups[e]})).map((function(e){return e&&rr(Fe.a,Object(r.a)({},e,{key:e.id,groupName:Ke.c(t.state.drawings,t.state.drawingCategories,e.id,t.props.intl.formatMessage),boundariesSelector:"#".concat(t.mapContainerId),onClickInPopupSummary:t.onClickInPopupSummary}))})))})),Object(h.a)(Object(l.a)(t),"renderSearchPopup",(function(){return t.state.idOfSearchPopupBeingShown&&t.state.searchResult&&rr(Wo.a,{id:t.state.idOfSearchPopupBeingShown,searchResult:t.state.searchResult,addSearchedDrawing:t.addSearchedDrawing,onClose:t.closeSearchPopup,boundariesSelector:"#".concat(t.mapContainerId)})})),Object(h.a)(Object(l.a)(t),"renderLegendOrFullPopup",(function(){return rr("div",{className:f.a.dynamic([["849556827",[S.a.spacing.sm,S.a.spacing.xs]]])},t.state.idOfFullPopupBeingShown?t.renderFullPopup():rr(y.Fragment,null,rr(J.b,{mapSize:J.a.Fullscreen,layerDefinitions:t.state.layerDefinitions,visConfigs:t.state.visConfigs,drawings:t.state.drawings,drawingCategories:t.state.drawingCategories,popups:t.state.popups,onSelectDrawing:t.onSelectDrawingFromLegend})),rr(f.a,{id:"849556827",dynamic:[S.a.spacing.sm,S.a.spacing.xs]},["div.__jsx-style-dynamic-selector{position:absolute;bottom:".concat(S.a.spacing.sm,";margin:0 ").concat(S.a.spacing.xs,";z-index:1;}")]))})),Object(h.a)(Object(l.a)(t),"renderFullPopup",(function(){var e=t.state.idOfFullPopupBeingShown,n=t.state.popups[e],i=t.state,a=i.drawings,o=i.drawingCategories,s=Ke.c(a,o,e,t.props.intl.formatMessage),c=t.state.idsOfPopupsBeingShown.indexOf(t.state.idOfFullPopupBeingShown)>-1;return n&&rr(Z.a,Object(r.a)({},n,{categoryName:s,onClose:t.closeFullPopup,shouldHighlight:c}))})),Object(h.a)(Object(l.a)(t),"toggleMapFilter",(function(e){t.setState({isShowingMapFilter:e},(function(){var e="".concat(t.state.isShowingMapFilter);t.updateToCustomGraphics(C.a.ToggleMapfilter,e)}))})),Object(h.a)(Object(l.a)(t),"toggleIsShowingLegend",(function(){t.setState((function(e){return{isShowingLegend:!e.isShowingLegend}}))})),Object(h.a)(Object(l.a)(t),"onSelectDrawingFromLegend",(function(e){if(t.setDrawingModeToDefault(),e in t.state.drawings){t.openFullPopup(e),t.hidePopupOnMap(e);var n=t.state.drawings[e];Io.b(n,t.mapView)}})),Object(h.a)(Object(l.a)(t),"toggleLocate",(function(){t.setState((function(e){return{locate:!e.locate}}))})),Object(h.a)(Object(l.a)(t),"toggleSearch",(function(){t.setState((function(e){return{search:!e.search}}))})),Object(h.a)(Object(l.a)(t),"toggleNavigation",(function(){t.setState((function(e){var t=e.navigation;return cr({navigation:!t},t&&{locate:!1,search:!1,clustering:!1})}),(function(){t.updateClusteringToCustomGraphics()}))})),Object(h.a)(Object(l.a)(t),"toggleClustering",(function(){t.setState((function(e){return{clustering:!e.clustering}}),(function(){t.updateClusteringToCustomGraphics()}))})),Object(h.a)(Object(l.a)(t),"updateClusteringToCustomGraphics",(function(){t.updateToCustomGraphics(C.a.ClusteringPoint,!!t.state.clustering,!0)})),Object(h.a)(Object(l.a)(t),"openDataBrowserModal",(function(){t.setState({isShowingDataBrowserModal:!0})})),Object(h.a)(Object(l.a)(t),"closeDataBrowserModal",(function(){t.setState({isShowingDataBrowserModal:!1})})),Object(h.a)(Object(l.a)(t),"addDataItem",(function(e){var n,i,a,r,s,c,l,p,u;return o.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(n=e.url,i=e.title,a=e.access,r=e.id,n){d.next=3;break}return d.abrupt("return");case 3:if(!(t.state.layerDefinitions.length>1)){d.next=5;break}return d.abrupt("return");case 5:return s="public"===a?void 0:t.props.storyItem.userSession||void 0,d.next=8,o.a.awrap(Et.e(n,s));case 8:return c=d.sent,d.next=11,o.a.awrap((h={url:c,authentication:s},Object(w.c)(Object(j.a)(h.url),h)));case 11:return l=d.sent,p=Et.f(l,{title:i,featureLayerUrl:c}),d.next=15,o.a.awrap(Et.d(p,r,0,s));case 15:u=d.sent,t.setState(Et.b(p,u));case 17:case"end":return d.stop()}var h}),null,null,null,Promise)})),Object(h.a)(Object(l.a)(t),"removeVisLayer",(function(e){var n=t.state.layerDefinitions.filter((function(t,n){return n!==e})),i=t.state.visConfigs.filter((function(t,n){return n!==e}));t.setState({layerDefinitions:n,visConfigs:i})})),Object(h.a)(Object(l.a)(t),"updateVisLayer",(function(e,n){var i=t.state.visConfigs[e];if(i){var a=cr({},i,{data:cr({},i.data,{},n)}),o=t.state.visConfigs.map((function(t,n){return n===e?a:t}));t.setState({visConfigs:o})}})),Object(h.a)(Object(l.a)(t),"onVisLayerClick",(function(e){t.setState({currentlyEditedVisIndex:e})})),Object(h.a)(Object(l.a)(t),"reorderVisLayers",(function(e,n){t.setState((function(t){var a=Object(i.a)(t.visConfigs);a.splice(n,0,a.splice(e,1)[0]);var o=Object(i.a)(t.layerDefinitions);return o.splice(n,0,o.splice(e,1)[0]),{visConfigs:a,layerDefinitions:o}}))})),Object(h.a)(Object(l.a)(t),"setVisRenderer",(function(e,n){t.setState(Et.m(e,n))})),Object(h.a)(Object(l.a)(t),"setVisHistogram",(function(e,n,i){t.setState(Et.l(e,n,i))})),Object(h.a)(Object(l.a)(t),"setVisField",(function(e,n,i){t.setState(Et.k(e,n,i))})),Object(h.a)(Object(l.a)(t),"setVisType",(function(e,n){t.setState(Et.n(e,n))})),Object(h.a)(Object(l.a)(t),"setVisColor",(function(e,n){t.setState(Et.j(e,n))})),Object(h.a)(Object(l.a)(t),"onSearch",(function(e){t.closePopupEditor();var n=Object(Co.a)(e.location,C.j.POINT_REGULAR);t.updateToCustomGraphics(C.a.InitGhost,JSON.stringify(Object(h.a)({},C.b.POINT_REGULAR,n))),t.setState({searchResult:e}),t.goToMapExtent(e.extent)})),Object(h.a)(Object(l.a)(t),"addSearchedDrawing",(function(e){var n=e.title,i=e.description;return function(){var e=C.j.POINT_REGULAR;t.updateToCustomGraphics(C.a.AddGhost,e);var a=t.state.ghostDrawingInfo;if("undefined"!==typeof a){var o={title:n||t.props.intl.formatMessage({id:"viewer.common.untitled"}),description:i,id:a[e]};t.updatePopup(o)}}})),Object(h.a)(Object(l.a)(t),"closeSearchPopup",(function(){t.updateToCustomGraphics(C.a.RemoveGhost,""),t.setState({idOfSearchPopupBeingShown:"",searchResult:void 0})})),Object(h.a)(Object(l.a)(t),"onUndoOrRedo",(function(e){t.setState(cr({},e))})),Object(h.a)(Object(l.a)(t),"onDrawingDataHistoryUpdate",(function(e){t.setState(cr({},e))})),Object(h.a)(Object(l.a)(t),"undo",(function(){t.xdo(t.drawingDataHistory.undo())})),Object(h.a)(Object(l.a)(t),"redo",(function(){t.xdo(t.drawingDataHistory.redo())})),Object(h.a)(Object(l.a)(t),"xdo",(function(e){t.setState({idsOfPopupsBeingShown:[],idOfFullPopupBeingShown:"",idsOfDrawingTextsBeingShown:[],currentlyEditedDrawingTextId:"",currentlyEditedPopupId:""},(function(){t.updateToCustomGraphics(C.a.Dump,JSON.stringify(e.drawings))}))})),Object(h.a)(Object(l.a)(t),"record",(function(){t.drawingDataHistory.record({drawings:t.state.drawings,drawingCategories:t.state.drawingCategories})})),Object(h.a)(Object(l.a)(t),"onDrawingToolSelected",(function(e){t.setDrawingMode(e),t.closePopupEditor(),e===C.b.POINT_ICON&&t.sendPlaceholderImageToCustomGraphics()})),Object(h.a)(Object(l.a)(t),"sendPlaceholderImageToCustomGraphics",(function(){var e;(e="/static/images/story-maps-logo.png",fetch(e).then((function(e){return e.blob()})).then((function(e){return new Promise((function(t,n){var i=new FileReader;i.onloadend=function(){return t(i.result)},i.onerror=n,i.readAsDataURL(e)}))}))).then((function(e){return Object(A.b)(e,"cover",He.j)})).then((function(e){var n=O()(e),i=Object(h.a)({},n,e);t.updateToCustomGraphics(C.a.AddIconBase64,JSON.stringify(i)),t.updateToCustomGraphics(C.a.SelectIconBase64,n)}))})),Object(h.a)(Object(l.a)(t),"setDrawingMode",(function(e){t.customGraphics&&t.setState({drawingMode:e},(function(){t.updateToCustomGraphics(C.a.SetDrawingMode,e)}))})),Object(h.a)(Object(l.a)(t),"setDrawingModeToDefault",(function(){t.setDrawingMode(C.b.SELECT)})),Object(h.a)(Object(l.a)(t),"startEditingDrawingText",(function(e){var n,i;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.a.awrap(t.endEditingDrawingText());case 2:(n=t.state.drawings[e])&&n.type===C.j.TEXT_LEADERLINE&&(t.setState({currentlyEditedDrawingTextId:e}),t.currentlyEditedDrawingTextContent=(null===(i=n.data)||void 0===i?void 0:i.content)||"");case 4:case"end":return a.stop()}}),null,null,null,Promise)})),Object(h.a)(Object(l.a)(t),"endEditingDrawingText",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t.state.currentlyEditedDrawingTextId)return Promise.resolve();var n=new Promise((function(e,n){var i=t.state.currentlyEditedDrawingTextId;t.setState({currentlyEditedDrawingTextId:""}),t.setState(Ke.v(i,t.currentlyEditedDrawingTextContent),(function(){t.currentlyEditedDrawingTextContent="",e(i)}))}));return n.then((function(n){if(!e){var i,a=t.state.drawings[n];if(a)t.updateToCustomGraphics(C.a.Update,{id:n,content:null===(i=a.data)||void 0===i?void 0:i.content})}}))})),Object(h.a)(Object(l.a)(t),"updateDrawingTextContent",(function(e){t.currentlyEditedDrawingTextContent=e})),Object(h.a)(Object(l.a)(t),"removeDrawingText",(function(e){t.setState(Ke.k(e),(function(){t.removeDrawings(e)}))})),Object(h.a)(Object(l.a)(t),"removeDrawings",(function(e){var n="string"===typeof e?[e]:e;t.updateToCustomGraphics(C.a.Remove,JSON.stringify(n))})),Object(h.a)(Object(l.a)(t),"removeDrawingCategory",(function(e){t.state.drawingCategories.filter((function(t){return e===t.type})).forEach((function(e){var n=e.drawingIds;t.removeDrawings(n)}))})),Object(h.a)(Object(l.a)(t),"updateDrawingCategory",(function(e,n){var i=t.state.drawingCategories.find((function(t){return t.type===e}));i&&(t.setState(Ke.u(e,n)),e===Ye.a.PointNumbered&&n.drawingIds&&n.drawingIds.length>1&&i.drawingIds.join()!==n.drawingIds.join()&&t.updateToCustomGraphics(C.a.ReorderNumberedPoints,JSON.stringify(n.drawingIds)))})),Object(h.a)(Object(l.a)(t),"toggleDrawingCategory",(function(e,n){var i,a;t.setState((function(t){var i=t.drawingCategoryVisibilities;return Ke.s({drawingCategoryVisibilities:i,type:e,visible:n})}));var o=JSON.stringify(null!==(i=null===(a=t.state.drawingCategories.find((function(t){return t.type===e})))||void 0===a?void 0:a.drawingIds)&&void 0!==i?i:[]);t.updateToCustomGraphics(n?C.a.Show:C.a.Hide,o)})),Object(h.a)(Object(l.a)(t),"setCustomGraphics",(function(e){t.customGraphics=e,t.customGraphics.bindActionEmitting(t.onCustomGraphicsUpdate),rt.j(Object(l.a)(t))})),Object(h.a)(Object(l.a)(t),"updateToCustomGraphics",(function(e,n,i){if(t.customGraphics){var a=i?{type:e,payload:n}:jo.c(e,n);t.__SHOULD_LOG&&(console.group("%cTO GRAPHICS: ","color: #F1508B"),console.debug("%c".concat(i?"ACTION_TYPE: ".concat(e,"\nPAYLOAD: ").concat(n):jo.c(e,n)),"background: #F1508B; color: white"),console.groupEnd()),t.customGraphics.pushAction(a)}})),Object(h.a)(Object(l.a)(t),"onCustomGraphicsUpdate",(function(e){t.__SHOULD_LOG&&(console.group("%cFROM GRAPHICS: ","color: #33aa00"),console.debug("%c".concat(e),"background: #33aa00; color: white"),console.groupEnd());var n=jo.b(e);if(n===C.a.SetDrawingMode){var i=jo.a(e,C.a.SetDrawingMode);i&&t.setState({drawingMode:i})}else if(n===C.a.Add){var a=JSON.parse(jo.a(e,n));t.setState(Ke.a(a),(function(){t.record(),t.setCurrentlyEditedPopupId(a.id)}))}else if(n===C.a.Remove){var o=JSON.parse(jo.a(e,n));o.length&&t.setState(Ke.o(o),t.record),t.setState((function(e){return{currentlySelectedDrawingIds:e.currentlySelectedDrawingIds.filter((function(e){return!o.includes(e)}))}}))}else if(n===C.a.Transform){var r=JSON.parse(jo.a(e,n));t.setState(Ke.t(r),t.record)}else if(n===C.a.ShowPopup){var s=jo.a(e,n);s in t.state.popups&&!t.state.idsOfPopupsBeingShown.includes(s)&&t.setState({idsOfPopupsBeingShown:[s]})}else if(n===C.a.HidePopup)0!==t.state.idsOfPopupsBeingShown.length&&t.setState({idsOfPopupsBeingShown:[]});else if(n===C.a.ShowText){var c=jo.a(e,n);t.setState(Ke.q(c))}else if(n===C.a.HideText){var l=jo.a(e,n);t.setState(Ke.k(l))}else if(n===C.a.StartEditingText){var p=jo.a(e,n);t.startEditingDrawingText(p)}else if(n===C.a.EndEditingText)t.endEditingDrawingText();else if(n===C.a.Update)t.record();else if(n===C.a.ShowGhostPopup){var u=JSON.parse(jo.a(e,n));t.setState(Ke.r(u.id,u.mapping))}else if(n===C.a.HideGhostPopup)t.setState(Ke.l());else if(n===C.a.PointerOut)t.setState({idOfFullPopupBeingShown:"",currentlyEditedPopupId:""}),t.endEditingDrawingText();else if(n===C.a.Select){var d=jo.a(e,n);t.setCurrentlyEditedPopupId(d),t.setState((function(e){return Po.h(d,e.drawings,e.currentlySelectedDrawingIds)}),(function(){t.setCurrentlySelectedTextAnnotationStyles(d),t.setCurrentlySelectedArrowStyles(d)}))}else if(n===C.a.Deselect){var h=jo.a(e,n);t.setState((function(e){return Po.g(h,e.drawings,e.currentlySelectedDrawingIds)}),(function(){t.setCurrentlySelectedTextAnnotationStyles(h),t.setCurrentlySelectedArrowStyles(h)}))}else t.__SHOULD_LOG&&console.debug("Unhandled action type in Editor: <".concat(n,">"))})),Object(h.a)(Object(l.a)(t),"setCurrentlySelectedArrowStyles",(function(e){var n,i,a=t.state.drawings,o=t.state.currentlySelectedDrawingIds;if(Po.a(o,a,[C.j.ARROW_DOUBLE,C.j.ARROW_SINGLE])&&o.length){var r,s=null===(r=a[o[0]])||void 0===r?void 0:r.styles;n=(null===s||void 0===s?void 0:s.color)||qo.d.TitleColor,i=(null===s||void 0===s?void 0:s.lineDash)||qo.a.Continuous;var c=o.every((function(e){var t;return((null===(t=a[e].styles)||void 0===t?void 0:t.color)||qo.d.TitleColor)===n})),l=o.every((function(e){var t;return((null===(t=a[e].styles)||void 0===t?void 0:t.lineDash)||qo.a.Continuous)===i}));t.setState({currentlySelectedArrowColor:c?n:void 0,currentlySelectedArrowType:l?i:void 0})}})),Object(h.a)(Object(l.a)(t),"setCurrentlySelectedTextAnnotationStyles",(function(e){var n,i,a=t.state.drawings,o=t.state.currentlySelectedDrawingIds;if(Po.a(o,a,[C.j.TEXT_LEADERLINE])&&o.length){var r,s=null===(r=a[o[0]])||void 0===r?void 0:r.styles;n=(null===s||void 0===s?void 0:s.textColor)||"backgroundColor",i=(null===s||void 0===s?void 0:s.lineDash)||qo.a.Continuous;var c=o.every((function(e){var t;return((null===(t=a[e].styles)||void 0===t?void 0:t.textColor)||"backgroundColor")===n})),l=o.every((function(e){var t;return((null===(t=a[e].styles)||void 0===t?void 0:t.lineDash)||qo.a.Continuous)===i}));t.setState({currentlySelectedTextAnnotationColor:c?Po.e(n):void 0,currentlySelectedLeaderlineType:l?i:void 0})}})),Object(h.a)(Object(l.a)(t),"updatePopup",(function(e){t.setState((function(t){var n=e.id,i=e.title,a=e.description,o=e.image;if(!i&&!a&&!o){var r=cr({},t.popups);return delete r[n],{popups:r}}return{popups:cr({},t.popups,Object(h.a)({},n,e))}}))})),Object(h.a)(Object(l.a)(t),"showPopupOnMap",(function(e,n){t.setDrawingModeToDefault(),t.updateToCustomGraphics(C.a.ShowPopup,e),n&&t.updateToCustomGraphics(C.a.ExclusiveSelect,e)})),Object(h.a)(Object(l.a)(t),"hidePopupOnMap",(function(e){t.setDrawingModeToDefault(),t.updateToCustomGraphics(C.a.HidePopup,e),t.updateToCustomGraphics(C.a.InclusiveDeselect,e)})),Object(h.a)(Object(l.a)(t),"setCurrentlyEditedPopupId",(function(e){var n=t.state.drawings[e],i=n&&n.type in He.g?e:"";t.state.currentlyEditedPopupId!==i&&t.setState({currentlyEditedPopupId:i})})),Object(h.a)(Object(l.a)(t),"closePopupEditor",(function(){t.setCurrentlyEditedPopupId("")})),Object(h.a)(Object(l.a)(t),"onDrawingItemClickFromSidePanel",(function(e){if(t.setCurrentlyEditedPopupId(e),e){t.showPopupOnMap(e,!0);var n=t.state.drawings[e];if(n){var i={x:n.nodes[0].long,y:n.nodes[0].lat};Io.a(Object(l.a)(t),i)}}})),Object(h.a)(Object(l.a)(t),"openFullPopup",(function(e){e in t.state.popups&&t.setState({idOfFullPopupBeingShown:e})})),Object(h.a)(Object(l.a)(t),"closeFullPopup",(function(e){t.setState({idOfFullPopupBeingShown:""}),t.showPopupOnMap(e,!1)})),Object(h.a)(Object(l.a)(t),"onClickInPopupSummary",(function(e){t.openFullPopup(e),t.hidePopupOnMap(e)})),Object(h.a)(Object(l.a)(t),"save",(function(){t.endEditingDrawingText(!0).then((function(){rt.h(Object(l.a)(t),t.getIsForOverriding())}));var e=Object(ko.i)(t.props.storyDesign.storyTheme.themeVariables.basemaps,t.state.basemap).id;N.a.trackEvent(N.a.Category.Builder,N.a.Action.Builder_ExpressMap_ChangeBasemap,e)})),Object(h.a)(Object(l.a)(t),"discard",(function(){var e,n=0===Object.keys((null===(e=t.props.data)||void 0===e?void 0:e.drawings)||{}).length,i=0===Object.keys(t.state.drawings).length;if(n&&i)t.props.onCancel();else{var a,o;t.getIsForOverriding()?(a=rt.b(t.props.data||{}),o=rt.f(Object(l.a)(t))):(a=t.props.data,o=rt.d(Object(l.a)(t)));var r={extent:void 0};O()(cr({},a,{},r))===O()(cr({},o,{},r))?t.props.onCancel():t.openDiscardUnsavedMapModal()}})),Object(h.a)(Object(l.a)(t),"onPickBasemap",(function(e){t.setState({basemap:cr({},e)})})),Object(h.a)(Object(l.a)(t),"onMapLoad",(function(e,n){t.mapView=e.mapView,t.home=e.home,t.mapView.watch("stationary",(function(e){t.setState({isViewStationary:e})})),"undefined"!==typeof(null===n||void 0===n?void 0:n.jsonUtils)&&(t.jsonUtils=n.jsonUtils)})),Object(h.a)(Object(l.a)(t),"goToMapExtent",(function(e){e&&Object(So.d)(t.mapView,t.jsonUtils.fromJSON(e))})),Object(h.a)(Object(l.a)(t),"openDiscardUnsavedMapModal",(function(){t.setState({isShowingDiscardUnsavedMapModal:!0})})),Object(h.a)(Object(l.a)(t),"closeDiscardUnsavedMapModal",(function(){t.setState({isShowingDiscardUnsavedMapModal:!1})})),Object(h.a)(Object(l.a)(t),"onDrawingNudgeClose",(function(){t.setState({shouldShowDrawNudge:!1}),_o()})),Object(h.a)(Object(l.a)(t),"onSearchNudgeClose",(function(){t.setState({shouldShowSearchNudge:!1}),Lo()})),Object(h.a)(Object(l.a)(t),"getGraphicsContainerId",(function(){return"".concat(t.mapContainerId,"-graphics")})),Object(h.a)(Object(l.a)(t),"setUserRegionOrCountry",(function(){var e;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.awrap(Object(L.g)(t.props.storyItem.userSession,t.props.config.PORTAL_HOST,!0,t.props.environment.isPortal));case 2:e=n.sent,t.setState({userRegionOrCountry:e});case 4:case"end":return n.stop()}}),null,null,null,Promise)})),Object(h.a)(Object(l.a)(t),"getIsForOverriding",(function(){return!!t.props.shouldSaveOverrides})),t.definitelyNeverShowSearchNudge=No();var c=!1;return document&&(c=!!Mo()),t.state=cr({},rt.e(),{drawingMode:C.b.SELECT,idsOfPopupsBeingShown:[],idOfFullPopupBeingShown:"",idsOfDrawingTextsBeingShown:[],currentlyEditedDrawingTextId:"",currentlyEditedPopupId:"",currentlyEditedVisIndex:void 0,idOfSearchPopupBeingShown:"",isShowingDiscardUnsavedMapModal:!1,canUndo:!1,canRedo:!1,isShowingOnboardingModal:!!t.props.shouldOpenOnboardingModal&&!c,shouldShowDrawNudge:!1,shouldShowSearchNudge:!1,hasTheFirstDrawingBeenAdded:!1,isShowingDataBrowserModal:!1,isShowingAnnotationStylePanel:!1,currentlySelectedTextAnnotationColor:qo.c.Color1,currentlySelectedLeaderlineType:qo.a.Continuous,currentlySelectedArrowColor:qo.d.TitleColor,currentlySelectedArrowType:qo.a.Continuous,currentlySelectedDrawingIds:[]}),t.drawingDataHistory=new Eo({drawings:e.data?e.data.drawings:t.state.drawings,drawingCategories:e.data?e.data.drawingCategories:t.state.drawingCategories},t.onUndoOrRedo,t.onDrawingDataHistoryUpdate),t}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setUserRegionOrCountry()}},{key:"componentDidUpdate",value:function(e,t){(e.data!==this.props.data&&console.debug("Express map data is updated. This should happen only if the user opens editor before the data (resource item) is fully fetched in builder."),this.state.hasTheFirstDrawingBeenAdded)||("undefined"===typeof this.props.data||0===Object.keys(this.props.data.drawings).length)&&0===Object.keys(t.drawings).length&&1===Object.keys(this.state.drawings).length&&this.setState({hasTheFirstDrawingBeenAdded:!0,shouldShowSearchNudge:!0})}},{key:"render",value:function(){return rr(y.Fragment,null,this.renderDiscardUnsavedMapModal(),rr(mo,{canAddPremiumAndSubscriptionLayers:this.props.storyItem.storyMapUserPrivileges.canAddPremiumAndSubscriptionLayers,isShowing:this.state.isShowingDataBrowserModal,userSession:this.props.storyItem.userSession,addDataItem:this.addDataItem,onClose:this.closeDataBrowserModal}),rr(X,{isForOverriding:this.getIsForOverriding(),showOnboardingModal:this.showOnboardingModal,toolbar:this.renderToolbar(),sidePanel:this.renderSidePanel(),map:this.renderMap(),onPrimaryButtonClick:this.save,onSecondaryButtonClick:this.discard,shouldDisablePrimaryButton:!this.state.isViewStationary}),rr(io,{onCloseButtonClick:this.closeOnboardingModal,isShowingModal:this.state.isShowingOnboardingModal}))}},{key:"processStyles",value:function(){var e=this,t=this.state.currentlySelectedDrawingIds.map((function(t){var n,i,a=e.state.currentlySelectedTextAnnotationColor||Po.e((null===(n=e.state.drawings[t].styles)||void 0===n?void 0:n.textColor)||void 0),o=e.state.currentlySelectedLeaderlineType||(null===(i=e.state.drawings[t].styles)||void 0===i?void 0:i.lineDash)||qo.a.Continuous,r=cr({},Object(Ro.b)(a),{lineDash:o});return{id:t,style:cr({},r,{},Po.f({color:a,lineType:o,themeVariables:e.props.storyDesign.storyTheme.themeVariables}))}}));this.updateToCustomGraphics(C.a.Style,JSON.stringify(t))}}]),a}(y.PureComponent);t.default=Object(G.c)(Object(D.b)(Object(T.d)(Object(M.c)(Object(Ui.b)(Object(b.c)(Object(Ze.a)(Object(or.b)(pr))))))))},"6pnf":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"check",path:"M15.379 3.566L5.74 13.203.8 8.262l1.767-1.768L5.74 9.668l7.871-7.87z",viewBox:"0 0 16 16"})}return c}(n("MEC2").a)},"7Mlx":function(e,t,n){"use strict";var i=n("cxan"),a=n("VtSi"),o=n.n(a),r=n("9fIP"),s=n("MMYH"),c=n("pWxA"),l=n("K/z8"),p=n("sRHE"),u=n("8K1b"),d=n("zjfJ"),h=n("yFcC"),m=n.n(h),f=n("ERkP"),y=n.n(f),g=n("O94r"),v=n.n(g),b=n("2SGB"),x=n("YQpL"),O=n("NX3A"),w=n("Z4N4"),j=n("sDPw"),C=n("tSRP"),k=n("Tfdo"),S=n("A7aE"),I=n("MmJo"),P=n("o31f"),R=n("HbGN"),E=n("AuFC"),D=y.a.createElement,T=Object(f.memo)(Object(E.c)((function(e){var t=e.showMobileOnly,n=void 0!==t&&t,i=Object(R.a)(e,["showMobileOnly"]);return D("div",{className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" preview"},D("img",{src:"".concat(i.config.BASE_URL,"/static/images/builder/focal-point/").concat(i.isDesktop?"desktop":"phone-portrait",".png"),alt:"",role:"presentation",className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" "+(v()("device-frame",{desktop:i.isDesktop&&!n,phone:!i.isDesktop&&!n,"phone-only":!i.isDesktop&&n})||"")}),D("div",{className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" "+(v()("device-content",{desktop:i.isDesktop,phone:!i.isDesktop})||"")},D("img",{src:i.url,alt:"",role:"presentation",className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" "+(v()("preview-media",{"is-fit":i.isFit,"is-full-screen":i.showFullScreen})||"")}),!i.showFullScreen&&D("div",{className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" placeholder-panel"},D("ul",{className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" placeholder-paragraph"},D("li",{className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" placeholder-text long"}),D("li",{className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" placeholder-text short"}),D("li",{className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" placeholder-text long"}),D("li",{className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" placeholder-text medium"})),D("ul",{className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" placeholder-paragraph"},D("li",{className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" placeholder-text medium"}),D("li",{className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" placeholder-text long"}),D("li",{className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" placeholder-text long"}),D("li",{className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" placeholder-text short"}),D("li",{className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" placeholder-text long"}),D("li",{className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" placeholder-text long"})),D("ul",{className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" placeholder-paragraph"},D("li",{className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" placeholder-text long"}),D("li",{className:m.a.dynamic([["196535078",[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]]])+" placeholder-text short"})))),D(m.a,{id:"196535078",dynamic:[O.a.spacing.sm,i.cropFocusX,i.cropFocusY,i.fitColor,O.a.color.white,O.a.spacing.xxxxs,O.a.spacing.xxxxs,O.a.spacing.xxxs,w.a.hexA(O.a.color.coolGrey,.2)]},[".preview.__jsx-style-dynamic-selector{position:relative;z-index:0;}",".preview.__jsx-style-dynamic-selector+.preview.__jsx-style-dynamic-selector{margin-top:".concat(O.a.spacing.sm,";}"),".device-frame.__jsx-style-dynamic-selector{position:relative;z-index:1;}",".device-frame.desktop.__jsx-style-dynamic-selector{width:16rem;height:auto;}",".device-frame.phone.__jsx-style-dynamic-selector{width:auto;height:10rem;}",".device-frame.phone-only.__jsx-style-dynamic-selector{width:auto;height:19rem;}",".device-content.__jsx-style-dynamic-selector{position:absolute;z-index:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;overflow:hidden;}",".device-content.phone.__jsx-style-dynamic-selector{top:4%;left:5%;width:91%;height:87%;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".device-content.desktop.__jsx-style-dynamic-selector{top:8%;left:11%;height:78%;width:78%;-webkit-flex-direction:row-reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;}",".preview-media.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;}",".preview-media.__jsx-style-dynamic-selector:not(.is-fit){object-fit:cover;object-position:".concat(i.cropFocusX," ").concat(i.cropFocusY,";}"),".preview-media.is-fit.__jsx-style-dynamic-selector{object-fit:contain;background-color:".concat(i.fitColor,";}"),".phone.__jsx-style-dynamic-selector .preview-media.__jsx-style-dynamic-selector{width:100%;height:40%;}",".phone.__jsx-style-dynamic-selector .preview-media.is-full-screen.__jsx-style-dynamic-selector{height:100%;}",".desktop.__jsx-style-dynamic-selector .preview-media.__jsx-style-dynamic-selector{height:100%;width:65%;}",".desktop.__jsx-style-dynamic-selector .preview-media.is-full-screen.__jsx-style-dynamic-selector{width:100%;}",".placeholder-panel.__jsx-style-dynamic-selector{background-color:".concat(O.a.color.white,";-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;padding:").concat(O.a.spacing.xxxxs,";}"),".desktop.__jsx-style-dynamic-selector .placeholder-panel.__jsx-style-dynamic-selector{padding:1.2rem ".concat(O.a.spacing.xxxxs,";}"),".placeholder-paragraph.__jsx-style-dynamic-selector+.placeholder-paragraph.__jsx-style-dynamic-selector{margin-top:".concat(O.a.spacing.xxxs,";}"),".placeholder-text.__jsx-style-dynamic-selector{background-color:".concat(w.a.hexA(O.a.color.coolGrey,.2),";height:0.2rem;margin-bottom:0.1rem;}"),".placeholder-text.short.__jsx-style-dynamic-selector{width:85%;}",".placeholder-text.medium.__jsx-style-dynamic-selector{width:90%;}",".placeholder-text.long.__jsx-style-dynamic-selector{width:98%;}"]))}))),M=n("7/Cc"),A=y.a.createElement;function N(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var L=function(e){Object(u.a)(a,e);var t,n=(t=a,function(){var e,n=Object(p.a)(t);if(N()){var i=Object(p.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(l.a)(this,e)});function a(e){var t;return Object(r.a)(this,a),t=n.call(this,e),Object(d.a)(Object(c.a)(t),"playMedia",(function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if("video"!==t.props.mediaType){e.next=9;break}return t.setState({isPlaying:!0}),e.prev=2,e.next=5,o.a.awrap(t.mainVideo.current.play());case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),null,null,[[2,7]],Promise)})),Object(d.a)(Object(c.a)(t),"pauseVideo",(function(){if("video"===t.props.mediaType&&4===t.mainVideo.current.readyState){var e=Object(k.a)(t.mainVideo,t.state.imageUrl);t.setState({imageUrl:e,isPlaying:!1}),t.mainVideo.current.pause()}})),Object(d.a)(Object(c.a)(t),"onMainMediaClicked",(function(e){t.onFocalPointSelected(e),t.pauseVideo()})),Object(d.a)(Object(c.a)(t),"onFocalPointSelected",(function(e){if("fit"!==t.props.placementType&&e.currentTarget&&t.referenceContainerNode.current){var n=t.referenceContainerNode.current.getBoundingClientRect(),i=e.clientX-n.left,a=e.clientY-n.top,o=i/e.currentTarget.clientWidth,r=a/e.currentTarget.clientHeight;o<0?o=0:o>1&&(o=1),r<0?r=0:r>1&&(r=1),t.props.onFocalPointUpdate({x:o,y:r})}})),Object(d.a)(Object(c.a)(t),"getFitColor",(function(){return t.props.storyDesign.storyTheme.themeVariables[t.props.fitColor]||t.props.fitColor})),t.state={isPlaying:"video"===t.props.mediaType,imageUrl:t.props.imageUrl},t.referenceContainerNode=Object(f.createRef)(),t.mainVideo=Object(f.createRef)(),t}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=O.a.spacing.xs,n=O.a.spacing.xl,a=Object(M.c)(this.props.focalPoint.x),o=Object(M.c)(this.props.focalPoint.y),r=this.getFitColor();return A("div",{className:m.a.dynamic([["3817382118",[a,o,w.a.hexA(O.a.color.white,.62),O.a.color.white,w.a.shadow.md(),t,t,n,n,O.a.spacing.sm,w.a.typography.body12(),w.a.typography.body12(),O.a.spacing.xxxs,O.a.color.cadet,w.a.typography.body16(),O.a.color.darkGreen,w.a.typography.body14(),O.a.color.coolGrey,O.a.spacing.xxs,O.a.spacing.xxxs]]])+" placement-editor"},A("div",{className:m.a.dynamic([["3817382118",[a,o,w.a.hexA(O.a.color.white,.62),O.a.color.white,w.a.shadow.md(),t,t,n,n,O.a.spacing.sm,w.a.typography.body12(),w.a.typography.body12(),O.a.spacing.xxxs,O.a.color.cadet,w.a.typography.body16(),O.a.color.darkGreen,w.a.typography.body14(),O.a.color.coolGrey,O.a.spacing.xxs,O.a.spacing.xxxs]]])+" "+(v()("placement-preview",{"mobile-only":this.props.showMobilePreviewOnly})||"")},A("div",{role:"button",ref:this.referenceContainerNode,onClick:this.onMainMediaClicked,onMouseLeave:this.playMedia,className:m.a.dynamic([["3817382118",[a,o,w.a.hexA(O.a.color.white,.62),O.a.color.white,w.a.shadow.md(),t,t,n,n,O.a.spacing.sm,w.a.typography.body12(),w.a.typography.body12(),O.a.spacing.xxxs,O.a.color.cadet,w.a.typography.body16(),O.a.color.darkGreen,w.a.typography.body14(),O.a.color.coolGrey,O.a.spacing.xxs,O.a.spacing.xxxs]]])+" reference-media-container"},"image"===this.props.mediaType&&A("img",{src:this.state.imageUrl,alt:this.props.intl.formatMessage({id:"component.focalPoint.imagePlaceholder"}),className:m.a.dynamic([["3817382118",[a,o,w.a.hexA(O.a.color.white,.62),O.a.color.white,w.a.shadow.md(),t,t,n,n,O.a.spacing.sm,w.a.typography.body12(),w.a.typography.body12(),O.a.spacing.xxxs,O.a.color.cadet,w.a.typography.body16(),O.a.color.darkGreen,w.a.typography.body14(),O.a.color.coolGrey,O.a.spacing.xxs,O.a.spacing.xxxs]]])+" "+(v()("reference-media",{disabled:"fit"===this.props.placementType})||"")}),"video"===this.props.mediaType&&A("video",{autoPlay:!0,muted:!0,loop:!0,crossOrigin:"use-credentials",ref:this.mainVideo,role:"presentation",poster:this.props.imageUrl,className:m.a.dynamic([["3817382118",[a,o,w.a.hexA(O.a.color.white,.62),O.a.color.white,w.a.shadow.md(),t,t,n,n,O.a.spacing.sm,w.a.typography.body12(),w.a.typography.body12(),O.a.spacing.xxxs,O.a.color.cadet,w.a.typography.body16(),O.a.color.darkGreen,w.a.typography.body14(),O.a.color.coolGrey,O.a.spacing.xxs,O.a.spacing.xxxs]]])+" "+(v()("reference-media",{disabled:"fit"===this.props.placementType})||"")},A("source",{src:this.props.videoUrl,type:"video/mp4",className:m.a.dynamic([["3817382118",[a,o,w.a.hexA(O.a.color.white,.62),O.a.color.white,w.a.shadow.md(),t,t,n,n,O.a.spacing.sm,w.a.typography.body12(),w.a.typography.body12(),O.a.spacing.xxxs,O.a.color.cadet,w.a.typography.body16(),O.a.color.darkGreen,w.a.typography.body14(),O.a.color.coolGrey,O.a.spacing.xxs,O.a.spacing.xxxs]]])})),A("span",{className:m.a.dynamic([["3817382118",[a,o,w.a.hexA(O.a.color.white,.62),O.a.color.white,w.a.shadow.md(),t,t,n,n,O.a.spacing.sm,w.a.typography.body12(),w.a.typography.body12(),O.a.spacing.xxxs,O.a.color.cadet,w.a.typography.body16(),O.a.color.darkGreen,w.a.typography.body14(),O.a.color.coolGrey,O.a.spacing.xxs,O.a.spacing.xxxs]]])+" "+(v()("focal-point-selector",{disabled:"fit"===this.props.placementType})||"")})),A("div",{className:m.a.dynamic([["3817382118",[a,o,w.a.hexA(O.a.color.white,.62),O.a.color.white,w.a.shadow.md(),t,t,n,n,O.a.spacing.sm,w.a.typography.body12(),w.a.typography.body12(),O.a.spacing.xxxs,O.a.color.cadet,w.a.typography.body16(),O.a.color.darkGreen,w.a.typography.body14(),O.a.color.coolGrey,O.a.spacing.xxs,O.a.spacing.xxxs]]])+" "+(v()("preview-container",{"mobile-only":this.props.showMobilePreviewOnly})||"")},A(T,{cropFocusX:a,cropFocusY:o,isFit:"fit"===this.props.placementType,fitColor:this.getFitColor(),url:this.state.imageUrl,isDesktop:!1,showFullScreen:this.props.showFullScreenPreview,showMobileOnly:this.props.showMobilePreviewOnly}),!this.props.showMobilePreviewOnly&&A(T,{cropFocusX:a,cropFocusY:o,isFit:"fit"===this.props.placementType,fitColor:this.getFitColor(),url:this.state.imageUrl,isDesktop:!0,showFullScreen:this.props.showFullScreenPreview}))),this.props.showMobilePreviewOnly&&A("div",{className:m.a.dynamic([["3817382118",[a,o,w.a.hexA(O.a.color.white,.62),O.a.color.white,w.a.shadow.md(),t,t,n,n,O.a.spacing.sm,w.a.typography.body12(),w.a.typography.body12(),O.a.spacing.xxxs,O.a.color.cadet,w.a.typography.body16(),O.a.color.darkGreen,w.a.typography.body14(),O.a.color.coolGrey,O.a.spacing.xxs,O.a.spacing.xxxs]]])+" remove-image-container"},A("span",{role:"button",tabIndex:0,onClick:this.props.onRemoveImageClicked,className:m.a.dynamic([["3817382118",[a,o,w.a.hexA(O.a.color.white,.62),O.a.color.white,w.a.shadow.md(),t,t,n,n,O.a.spacing.sm,w.a.typography.body12(),w.a.typography.body12(),O.a.spacing.xxxs,O.a.color.cadet,w.a.typography.body16(),O.a.color.darkGreen,w.a.typography.body14(),O.a.color.coolGrey,O.a.spacing.xxs,O.a.spacing.xxxs]]])+" remove-image"},A(b.a,{id:"builder.image.removeImage"}))),this.props.canFit?A("div",{className:m.a.dynamic([["3817382118",[a,o,w.a.hexA(O.a.color.white,.62),O.a.color.white,w.a.shadow.md(),t,t,n,n,O.a.spacing.sm,w.a.typography.body12(),w.a.typography.body12(),O.a.spacing.xxxs,O.a.color.cadet,w.a.typography.body16(),O.a.color.darkGreen,w.a.typography.body14(),O.a.color.coolGrey,O.a.spacing.xxs,O.a.spacing.xxxs]]])+" placement-type-toggle"},A(j.a,{name:"fit-fill-toggle",currentValue:this.props.placementType,onChange:this.props.onPlacementTypeUpdate},(function(s){return A(f.Fragment,null,A(j.b,Object(i.a)({className:"",value:"fill",id:"fill-option"},s),A("p",{className:m.a.dynamic([["3817382118",[a,o,w.a.hexA(O.a.color.white,.62),O.a.color.white,w.a.shadow.md(),t,t,n,n,O.a.spacing.sm,w.a.typography.body12(),w.a.typography.body12(),O.a.spacing.xxxs,O.a.color.cadet,w.a.typography.body16(),O.a.color.darkGreen,w.a.typography.body14(),O.a.color.coolGrey,O.a.spacing.xxs,O.a.spacing.xxxs]]])+" option-main"},A(b.a,{id:"builder.image.fillTitle"})),A("p",{className:m.a.dynamic([["3817382118",[a,o,w.a.hexA(O.a.color.white,.62),O.a.color.white,w.a.shadow.md(),t,t,n,n,O.a.spacing.sm,w.a.typography.body12(),w.a.typography.body12(),O.a.spacing.xxxs,O.a.color.cadet,w.a.typography.body16(),O.a.color.darkGreen,w.a.typography.body14(),O.a.color.coolGrey,O.a.spacing.xxs,O.a.spacing.xxxs]]])+" option-description fill"},A(b.a,{id:"video"===e.props.mediaType?"builder.video.fillDescription":"builder.image.fillDescription"}))),A(j.b,Object(i.a)({className:"",value:"fit",id:"fit-option"},s),A("p",{className:m.a.dynamic([["3817382118",[a,o,w.a.hexA(O.a.color.white,.62),O.a.color.white,w.a.shadow.md(),t,t,n,n,O.a.spacing.sm,w.a.typography.body12(),w.a.typography.body12(),O.a.spacing.xxxs,O.a.color.cadet,w.a.typography.body16(),O.a.color.darkGreen,w.a.typography.body14(),O.a.color.coolGrey,O.a.spacing.xxs,O.a.spacing.xxxs]]])+" option-main"},A(b.a,{id:"builder.image.fitTitle"})),A("p",{className:m.a.dynamic([["3817382118",[a,o,w.a.hexA(O.a.color.white,.62),O.a.color.white,w.a.shadow.md(),t,t,n,n,O.a.spacing.sm,w.a.typography.body12(),w.a.typography.body12(),O.a.spacing.xxxs,O.a.color.cadet,w.a.typography.body16(),O.a.color.darkGreen,w.a.typography.body14(),O.a.color.coolGrey,O.a.spacing.xxs,O.a.spacing.xxxs]]])+" option-description fit"},A(b.a,{id:"video"===e.props.mediaType?"builder.video.fitDescription":"builder.image.fitDescription"})),A(C.a,{target:A(I.a,{color:r,ariaLabel:e.props.intl.formatMessage({id:"builder.image.fitColor.dropdown.label"}),disabled:"fill"===e.props.placementType}),popper:A(P.b,{onStyleSelected:e.props.onFitColorUpdate,selectedStyle:r}),hideOnContentClick:!1})))}))):A("span",{className:m.a.dynamic([["3817382118",[a,o,w.a.hexA(O.a.color.white,.62),O.a.color.white,w.a.shadow.md(),t,t,n,n,O.a.spacing.sm,w.a.typography.body12(),w.a.typography.body12(),O.a.spacing.xxxs,O.a.color.cadet,w.a.typography.body16(),O.a.color.darkGreen,w.a.typography.body14(),O.a.color.coolGrey,O.a.spacing.xxs,O.a.spacing.xxxs]]])+" crop-hint"},A(b.a,{id:"video"===this.props.mediaType?"builder.video.fillDescription":"builder.image.fillDescription"})),A(m.a,{id:"3817382118",dynamic:[a,o,w.a.hexA(O.a.color.white,.62),O.a.color.white,w.a.shadow.md(),t,t,n,n,O.a.spacing.sm,w.a.typography.body12(),w.a.typography.body12(),O.a.spacing.xxxs,O.a.color.cadet,w.a.typography.body16(),O.a.color.darkGreen,w.a.typography.body14(),O.a.color.coolGrey,O.a.spacing.xxs,O.a.spacing.xxxs]},[".placement-preview.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".placement-preview.mobile-only.__jsx-style-dynamic-selector{-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;}",".reference-media-container.__jsx-style-dynamic-selector{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;line-height:0;max-height:100%;}",".reference-media.__jsx-style-dynamic-selector{cursor:crosshair;-webkit-user-drag:none;max-height:25rem;max-width:100%;}",".reference-media.disabled.__jsx-style-dynamic-selector{cursor:initial;}",".focal-point-selector.__jsx-style-dynamic-selector{position:absolute;z-index:1;left:".concat(a,";top:").concat(o,";-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background-color:").concat(w.a.hexA(O.a.color.white,.62),";border:0.3rem solid ").concat(O.a.color.white,";").concat(w.a.shadow.md()," border-radius:50%;height:2.6rem;width:2.6rem;cursor:crosshair;}"),".focal-point-selector.disabled.__jsx-style-dynamic-selector{display:none;}",".preview-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}","html:not([dir='rtl']) .preview-container.__jsx-style-dynamic-selector{margin-left:".concat(t,";}"),"html[dir='rtl'] .preview-container.__jsx-style-dynamic-selector{margin-right:".concat(t,";}"),"html:not([dir='rtl']) .preview-container.mobile-only.__jsx-style-dynamic-selector{margin-left:".concat(n,";}"),"html[dir='rtl'] .preview-container.mobile-only.__jsx-style-dynamic-selector{margin-right:".concat(n,";}"),".placement-type-toggle.__jsx-style-dynamic-selector{margin-top:".concat(O.a.spacing.sm,";}"),".remove-image-container.__jsx-style-dynamic-selector{".concat(w.a.typography.body12()," text-decoration:underline;}"),".remove-image.__jsx-style-dynamic-selector:hover{cursor:pointer;}",".crop-hint.__jsx-style-dynamic-selector{".concat(w.a.typography.body12(),";display:block;margin-top:").concat(O.a.spacing.xxxs,";color:").concat(O.a.color.cadet,";}"),".option-main.__jsx-style-dynamic-selector{".concat(w.a.typography.body16(),";color:").concat(O.a.color.darkGreen,";margin-top:-0.6rem;}"),".option-description.__jsx-style-dynamic-selector{".concat(w.a.typography.body14(),";color:").concat(O.a.color.coolGrey,";}"),".option-description.fill.__jsx-style-dynamic-selector{margin-bottom:".concat(O.a.spacing.xxs,";}"),".option-description.fit.__jsx-style-dynamic-selector{margin-bottom:".concat(O.a.spacing.xxxs,";}")]))}}]),a}(f.PureComponent);Object(d.a)(L,"defaultProps",{showMobilePreviewOnly:!1});t.a=Object(S.b)(Object(x.c)(L))},"7Vmz":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"error",path:"M30.845 27.305L18.182 2.99a1.844 1.844 0 0 0-3.268-.005L2.158 27.3A1.844 1.844 0 0 0 3.79 30h25.42a1.844 1.844 0 0 0 1.635-2.695zm-.915 1.29a.847.847 0 0 1-.72.405H3.79a.843.843 0 0 1-.746-1.235L15.799 3.45a.843.843 0 0 1 1.495.001l12.664 24.315a.848.848 0 0 1-.028.828zM17.5 25.5a1 1 0 1 1-1-1 1.002 1.002 0 0 1 1 1zM17 22h-1V11h1z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},"7Zgl":function(e,t,n){"use strict";n.d(t,"a",(function(){return D})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return M})),n.d(t,"d",(function(){return N})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return k})),n.d(t,"g",(function(){return P})),n.d(t,"h",(function(){return G})),n.d(t,"i",(function(){return c})),n.d(t,"j",(function(){return B}));var i=n("cxan"),a=n("pWxA");var o=n("+lMt");var r=function(e){var t,n;function i(t){var n;return n=e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/master/src/internalHelpers/errors.md#"+t+" for more information.")||this,Object(a.a)(n)}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i}(Object(o.a)(Error));var s=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function c(e,t){if("string"!==typeof e)return t?[e,void 0]:e;var n=e.match(s);return t?(console.warn("stripUnit's unitReturn functionality has been marked for deprecation in polished 4.0. It's functionality has been been moved to getUnitAndValue."),n?[parseFloat(e),n[2]]:[e,void 0]):n?parseFloat(e):e}var l=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function p(e){if("string"!==typeof e)return[e,""];var t=e.match(l);return t?[parseFloat(e),t[2]]:[e,void 0]}var u={minorSecond:1.067,majorSecond:1.125,minorThird:1.2,majorThird:1.25,perfectFourth:1.333,augFourth:1.414,perfectFifth:1.5,minorSixth:1.6,goldenSection:1.618,majorSixth:1.667,minorSeventh:1.778,majorSeventh:1.875,octave:2,majorTenth:2.5,majorEleventh:2.667,majorTwelfth:3,doubleOctave:4};function d(e,t,n){if(void 0===t&&(t="1em"),void 0===n&&(n=1.333),"number"!==typeof e)throw new r(42);if("string"===typeof n&&!u[n])throw new r(43);var i="string"===typeof t?p(t):[t,""],a=i[0],o=i[1],s="string"===typeof n?u[n]:n;if("string"===typeof a)throw new r(44,t);return""+a*Math.pow(s,e)+(o||"")}function h(e){return Math.round(255*e)}function m(e,t,n){return h(e)+","+h(t)+","+h(n)}function f(e,t,n,i){if(void 0===i&&(i=m),0===t)return i(n,n,n);var a=(e%360+360)%360/60,o=(1-Math.abs(2*n-1))*t,r=o*(1-Math.abs(a%2-1)),s=0,c=0,l=0;a>=0&&a<1?(s=o,c=r):a>=1&&a<2?(s=r,c=o):a>=2&&a<3?(c=o,l=r):a>=3&&a<4?(c=r,l=o):a>=4&&a<5?(s=r,l=o):a>=5&&a<6&&(s=o,l=r);var p=n-o/2;return i(s+p,c+p,l+p)}var y={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var g=/^#[a-fA-F0-9]{6}$/,v=/^#[a-fA-F0-9]{8}$/,b=/^#[a-fA-F0-9]{3}$/,x=/^#[a-fA-F0-9]{4}$/,O=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,w=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,j=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,C=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i;function k(e){if("string"!==typeof e)throw new r(3);var t=function(e){if("string"!==typeof e)return e;var t=e.toLowerCase();return y[t]?"#"+y[t]:e}(e);if(t.match(g))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(v)){var n=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:n}}if(t.match(b))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(x)){var i=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:i}}var a=O.exec(t);if(a)return{red:parseInt(""+a[1],10),green:parseInt(""+a[2],10),blue:parseInt(""+a[3],10)};var o=w.exec(t);if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10),alpha:parseFloat(""+o[4])};var s=j.exec(t);if(s){var c="rgb("+f(parseInt(""+s[1],10),parseInt(""+s[2],10)/100,parseInt(""+s[3],10)/100)+")",l=O.exec(c);if(!l)throw new r(4,t,c);return{red:parseInt(""+l[1],10),green:parseInt(""+l[2],10),blue:parseInt(""+l[3],10)}}var p=C.exec(t);if(p){var u="rgb("+f(parseInt(""+p[1],10),parseInt(""+p[2],10)/100,parseInt(""+p[3],10)/100)+")",d=O.exec(u);if(!d)throw new r(4,t,u);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:parseFloat(""+p[4])}}throw new r(5)}var S=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function I(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function P(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return S("#"+I(e)+I(t)+I(n));if("object"===typeof e&&void 0===t&&void 0===n)return S("#"+I(e.red)+I(e.green)+I(e.blue));throw new r(6)}function R(e,t,n,i){if("string"===typeof e&&"number"===typeof t){var a=k(e);return"rgba("+a.red+","+a.green+","+a.blue+","+t+")"}if("number"===typeof e&&"number"===typeof t&&"number"===typeof n&&"number"===typeof i)return i>=1?P(e,t,n):"rgba("+e+","+t+","+n+","+i+")";if("object"===typeof e&&void 0===t&&void 0===n&&void 0===i)return e.alpha>=1?P(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new r(7)}function E(e){return function e(t,n,i){return function(){var a=i.concat(Array.prototype.slice.call(arguments));return a.length>=n?t.apply(this,a):e(t,n,a)}}(e,e.length,[])}function D(e){if("transparent"===e)return 0;var t=k(e),n=Object.keys(t).map((function(e){var n=t[e]/255;return n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)})),i=n[0],a=n[1],o=n[2];return parseFloat((.2126*i+.7152*a+.0722*o).toFixed(3))}function T(e,t){var n=D(e),i=D(t);return parseFloat((n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)).toFixed(2))}function M(e,t){var n=T(e,t);return{AA:n>=4.5,AALarge:n>=3,AAA:n>=7,AAALarge:n>=4.5}}function A(e,t,n){if("transparent"===t)return n;if("transparent"===n)return t;if(0===e)return n;var a=k(t),o=Object(i.a)({},a,{alpha:"number"===typeof a.alpha?a.alpha:1}),r=k(n),s=Object(i.a)({},r,{alpha:"number"===typeof r.alpha?r.alpha:1}),c=o.alpha-s.alpha,l=2*parseFloat(e)-1,p=((l*c===-1?l:l+c)/(1+l*c)+1)/2,u=1-p;return R({red:Math.floor(o.red*p+s.red*u),green:Math.floor(o.green*p+s.green*u),blue:Math.floor(o.blue*p+s.blue*u),alpha:o.alpha*(parseFloat(e)/1)+s.alpha*(1-parseFloat(e)/1)})}var N=E(A);function L(e,t){return"transparent"===t?t:N(parseFloat(e),"rgb(0, 0, 0)",t)}var G=E(L);function _(e,t){return"transparent"===t?t:N(parseFloat(e),"rgb(255, 255, 255)",t)}var B=E(_)},"7faH":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var i=n("zjfJ");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var o=function(e,t,n){return e?e.reduce((function(e,o){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,Object(i.a)({},o[t],"undefined"===typeof n?o:o[n]||o))}),{}):{}},r=function(e,t){if(e===t)return!0;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var a=t.hasOwnProperty.bind(t),o=0;o<n.length;o+=1)if(!a(n[o])||e[n[o]]!==t[n[o]])return!1;return!0}},"7sDT":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return p}));var i=n("cxan"),a=n("HbGN"),o=n("ERkP"),r=n.n(o).a.createElement,s=Object(o.createContext)({canAccessEsri:!0,canAccessClassic:!0,canSwitchAccounts:!0,canReportAbuse:!0,canShareSocially:!0,canAccessLivingAtlasSite:!0,canAccessLivingAtlasContent:!0,canUseGuidedTours:!0,canUseSlideshows:!0,canUseExpressMaps:!0,canUseMapActions:!0,canUseEmbeds:!0,canUseLinkedMedia:!0,canHaveGoogleAnalytics:!0,TEMP_canPreviewCollections:!0,TEMP_canAddCollectionFiles:!0,TEMP_canAddCollectionLivingAtlas:!0,TEMP_canDuplicateExpressMap:!0,TEMP_canSwipeImages:!0}),c=function(e){var t=e.children,n=Object(a.a)(e,["children"]);return r(s.Provider,{value:n.featureDecisions},t)},l=function(e){return function(t){return r(s.Consumer,null,(function(n){return r(e,Object(i.a)({},t,{featureDecisions:n}))}))}},p=function(e){var t=e.config,n=e.portal;return{canAccessEsri:t.ENABLE_ESRI_ACCESS,canAccessClassic:t.ENABLE_CLASSIC_ACCESS,canSwitchAccounts:t.ENABLE_SWITCH_ACCOUNTS,canReportAbuse:t.ENABLE_REPORT_ABUSE,canShareSocially:t.ENABLE_SOCIAL_SHARING,canAccessLivingAtlasSite:t.ENABLE_LA_CALLOUT,canAccessLivingAtlasContent:t.ENABLE_LIVING_ATLAS&&n.livingAtlasGroupQuery,canUseExpressMaps:t.ENABLE_EXPRESS_MAPS&&n.livingAtlasGroupQuery,canUseGuidedTours:t.ENABLE_GUIDED_TOUR&&n.livingAtlasGroupQuery,canUseSlideshows:t.ENABLE_BETA_FEATURES,canUseMapActions:t.ENABLE_BETA_FEATURES,canUseEmbeds:t.ENABLE_LINKED_MEDIA,canUseLinkedMedia:t.ENABLE_LINKED_MEDIA&&!!t.EMBEDLY_API_KEY,canHaveGoogleAnalytics:t.ENABLE_GOOGLE_ANALYTICS,TEMP_canPreviewCollections:t.ENABLE_COLLECTION_PREVIEW,TEMP_canAddCollectionLivingAtlas:t.ENABLE_COLLECTION_TYPES_NEW,TEMP_canAddCollectionFiles:t.ENABLE_COLLECTION_TYPES_NEW,TEMP_canDuplicateExpressMap:t.ENABLE_EXPRESS_MAP_DUPLICATION,TEMP_canSwipeImages:t.ENABLE_SWIPE_IMAGES}}},"8DHD":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"hamburger",path:"M28 7H4V6h24zm0 9H4v1h24zm0 10H4v1h24z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},"8dId":function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("NX3A"),g=n("LuYe"),v=n("nylY"),b=n("DpQq"),x=n("Z4N4"),O=h.a.createElement;function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var j=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(w()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"setValue",(function(e,n){t.setState({value:e}),n&&t.onValueChange(e)})),Object(l.a)(Object(o.a)(t),"onClear",(function(){t.setValue("",!0)})),Object(l.a)(Object(o.a)(t),"onInputChange",(function(e){var n=e.target.value;t.setValue(n,!0)})),Object(l.a)(Object(o.a)(t),"onValueChange",(function(e){0===e.length?t.props.onClear():t.props.onChange(e)})),t.state={value:""},t}return Object(a.a)(p,[{key:"render",value:function(){var e;switch(this.props.size){case"large":e=y.a.spacing.lg;break;case"medium":e=y.a.spacing.md;break;case"small":default:e=y.a.spacing.sm}var t=y.a.spacing["small"===this.props.size?"xxxs":"xxs"],n="small"===this.props.size?y.a.spacing.sm:y.a.spacing.lg,i="0 ".concat(this.state.value?n:y.a.spacing.xxs,"\n      0.2rem ").concat(n),a={styles:O(u.a,{id:"434319200",dynamic:[i,y.a.color.coolGrey,y.a.color.platinum]},["input.__jsx-style-dynamic-selector{height:100%;padding:".concat(i,";-webkit-transition:background-color 0.2s;transition:background-color 0.2s;}"),"input.__jsx-style-dynamic-selector::-webkit-input-placeholder{color:".concat(y.a.color.coolGrey,";}"),"input.__jsx-style-dynamic-selector::-moz-placeholder{color:".concat(y.a.color.coolGrey,";}"),"input.__jsx-style-dynamic-selector:-ms-input-placeholder{color:".concat(y.a.color.coolGrey,";}"),"input.__jsx-style-dynamic-selector::placeholder{color:".concat(y.a.color.coolGrey,";}"),"input.__jsx-style-dynamic-selector:focus{background-color:".concat(y.a.color.platinum,";}"),"input.__jsx-style-dynamic-selector:not(:valid)~button.__jsx-style-dynamic-selector{display:none;}"]),className:u.a.dynamic([["434319200",[i,y.a.color.coolGrey,y.a.color.platinum]]])};return O("div",{className:u.a.dynamic([["3683421345",[e,this.props.disabled?"opacity: 0.5; cursor: not-allowed;":"",Object(x.c)(),t,y.a.color.coolGrey,t,y.a.spacing.xxs,y.a.color.cadet]]])+" "+(this.props.className||"")},O("label",{htmlFor:this.props.id,className:u.a.dynamic([["3683421345",[e,this.props.disabled?"opacity: 0.5; cursor: not-allowed;":"",Object(x.c)(),t,y.a.color.coolGrey,t,y.a.spacing.xxs,y.a.color.cadet]]])},this.props.label),O(g.a,null),O(b.a,{className:a.className,id:this.props.id,inputRef:this.props.searchInputRef,type:"text",required:!0,value:this.state.value,placeholder:this.props.placeholder,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onChange:this.onInputChange,onKeyDown:this.props.onKeydown,autoComplete:this.props.preventAutoComplete?"off":"on",disabled:this.props.disabled,title:""}),O("button",{type:"button",onClick:this.onClear,onBlur:this.props.onClearBtnBlur,"aria-label":this.props.clearBtnLabel,title:this.props.clearBtnLabel,className:u.a.dynamic([["3683421345",[e,this.props.disabled?"opacity: 0.5; cursor: not-allowed;":"",Object(x.c)(),t,y.a.color.coolGrey,t,y.a.spacing.xxs,y.a.color.cadet]]])+" "+(f()("clear-btn",a.className)||"")},O(v.a,null)),a.styles,O(u.a,{id:"3683421345",dynamic:[e,this.props.disabled?"opacity: 0.5; cursor: not-allowed;":"",Object(x.c)(),t,y.a.color.coolGrey,t,y.a.spacing.xxs,y.a.color.cadet]},["div.__jsx-style-dynamic-selector{position:relative;height:".concat(e,";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;").concat(this.props.disabled?"opacity: 0.5; cursor: not-allowed;":"",";}"),"label.__jsx-style-dynamic-selector{".concat(Object(x.c)(),";}"),"div.__jsx-style-dynamic-selector .icon-search{position:absolute;font-size:1.6rem;margin:0 ".concat(t,";color:").concat(y.a.color.coolGrey,";}"),".clear-btn.__jsx-style-dynamic-selector{padding:0 ".concat(t,";}"),"button.__jsx-style-dynamic-selector{position:absolute;line-height:0;height:100%;padding:0 ".concat(y.a.spacing.xxs,";right:0;font-size:1.2rem;color:").concat(y.a.color.cadet,";}"),"html[dir='rtl'] button.__jsx-style-dynamic-selector{right:auto;left:0;}"]))}}]),p}(d.PureComponent);Object(l.a)(j,"defaultProps",{size:"small"}),t.a=j},"8grN":function(e,t,n){"use strict";n.d(t,"d",(function(){return y})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return v}));var i=n("VtSi"),a=n.n(i),o=n("zjfJ"),r=n("HbGN"),s=n("JGeh"),c=n("hegE"),l=n("Tc8g"),p=n("ZcpU"),u=n("ADxc"),d=n("Z34l");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f,y=function(e){var t,n,i,o,c,l,p,u,d,h;return a.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:if(t=e.customSearchOptions,n=e.searchParams,i=Object(r.a)(e,["customSearchOptions","searchParams"]),n&&(i.params=n),!t||"groupItems"!==t.searchType){f.next=8;break}return f.next=5,a.a.awrap(b(t.groupId,i));case 5:o=f.sent,f.next=11;break;case 8:return f.next=10,a.a.awrap(Object(s.a)(i));case 10:o=f.sent;case 11:if(!((c=o.results).length>0)){f.next=25;break}return f.next=15,a.a.awrap(e.authentication.getUser());case 15:return l=f.sent,p=l.favGroupId,u=c.reduce((function(e,t,n){return"".concat(e," ").concat(0===n?'AND id:("'.concat(t.id,'"'):'OR "'.concat(t.id,'"')).concat(n===c.length-1?"))":"")}),'(group:"'.concat(p,'"')),f.next=20,a.a.awrap(Object(s.a)({authentication:e.authentication,q:u,params:{num:c.length}}));case 20:return d=f.sent,h=c.map((function(e){return m({},e,{isFavorite:d.results.findIndex((function(t){return t.id===e.id}))>=0})})),f.abrupt("return",m({},o,{results:h}));case 25:return f.abrupt("return",o);case 26:case"end":return f.stop()}}),null,null,null,Promise)};!function(e){e[e.stories=0]="stories",e[e.apps=1]="apps",e[e.files=2]="files",e[e.maps=3]="maps",e[e.webmaps=4]="webmaps"}(f||(f={}));var g=function(e,t,n){var i;return a.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!n){o.next=2;break}return o.abrupt("return",void 0);case 2:return o.next=4,a.a.awrap(Object(d.g)(e,t));case 4:if(!(i=o.sent)||"WO"===i){o.next=7;break}return o.abrupt("return","/Region/WO,/Region/".concat(i));case 7:return o.abrupt("return","/Region/WO");case 8:case"end":return o.stop()}}),null,null,null,Promise)},v=function(e){var t,n=(t={},Object(o.a)(t,f.stories,'(type:"StoryMap" AND typekeywords:("'.concat(u.ItemPublishStatus.published,'" OR "').concat(u.ItemPublishStatus.unpublishedChanges,'")) NOT typekeywords:"storymapcollection"')),Object(o.a)(t,f.apps,'type:("'.concat(u.PortalItemTypes.WebApp,'" OR "').concat(u.PortalItemTypes.Dashboard,'" OR "').concat(u.PortalItemTypes.WebExperience,'" OR "').concat(u.PortalItemTypes.InsightsPage,'" OR "').concat(u.PortalItemTypes.HubSiteApp,'" OR "').concat(u.PortalItemTypes.EnterpriseHubSiteApp,'")')),Object(o.a)(t,f.files,'type:("'.concat(u.PortalItemTypes.Image,'" OR "').concat(u.PortalItemTypes.PDF,'")')),Object(o.a)(t,f.maps,'(type:"Web Map" OR type:"Web Scene") -type:"'.concat(u.PortalItemTypes.StoryMap,'" -type:"').concat(u.PortalItemTypes.WebApp,'" -type:"CityEngine Web Scene"')),Object(o.a)(t,f.webmaps,'(type:"Web Map") -type:"'.concat(u.PortalItemTypes.StoryMap,'" -type:"').concat(u.PortalItemTypes.WebApp,'" -type:"CityEngine Web Scene"')),t);return[].concat(e).map((function(e){return"(".concat(n[e],")")})).join(" OR ")},b=function e(t,n){var i,a=Object.keys(n).filter((function(e){return"authentication"!==e&&"params"!==e})),o=Object(l.a)(n,a,{httpMethod:"GET"}),r="".concat(Object(c.a)(o),"/content/groups/").concat(t,"/search");if(null===o||void 0===o?void 0:null===(i=o.params)||void 0===i?void 0:i.paramStrArr){var s=Object.keys(o.params).reduce((function(e,t){if(o.params[t]||"boolean"===typeof o.params[t]){var n="paramStrArr"===t?o.params[t].join("&"):"".concat(t,"=").concat(o.params[t]);return e?"".concat(e,"&").concat(n):"".concat(n)}return e}),""),u=m({},o.authentication);return Object(p.c)("".concat(r,"?").concat(s),u).then((function(e){return e}))}return Object(p.c)(r,o).then((function(i){return i.nextStart&&-1!==i.nextStart&&(i.nextPage=function(){var a=Object.assign({},n,{start:i.nextStart});return e(t,a)}),i}))}},"8zWw":function(e,t,n){"use strict";var i=n("cxan"),a=n("zjfJ"),o=n("HbGN"),r=n("yFcC"),s=n.n(r),c=n("ERkP"),l=n.n(c),p=n("wWnZ"),u=n("NX3A"),d=n("Z4N4"),h=n("liFR"),m=l.a.createElement;function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var y=Object(c.memo)((function(e){var t={styles:m(s.a,{id:"3741781287"},[".button.jsx-3741781287{width:100%;box-sizing:border-box;text-align:center;}"]),className:"jsx-3741781287"},n=e.message,r=Object(o.a)(e,["message"]),c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.link?{type:"clear",color:"dark"}:{type:"default",color:"primary"},{},r),l=m(p.a,Object(i.a)({},c,{className:t.className})),y="function"===typeof e.renderWithNudge?e.renderWithNudge(l):l;return m("div",{className:s.a.dynamic([["3744545984",[u.a.spacing.xs,u.a.spacing.xs,d.a.hexA(u.a.color.haikuBlack,0),d.a.hexA(u.a.color.haikuBlack,1),u.a.spacing.xl,u.a.spacing.xl,u.a.color.cambridgeBlue,d.a.typography.body12(),u.a.font.weight.medium,u.a.spacing.xxs]]])+" bottom-button"},n&&m("p",{className:s.a.dynamic([["3744545984",[u.a.spacing.xs,u.a.spacing.xs,d.a.hexA(u.a.color.haikuBlack,0),d.a.hexA(u.a.color.haikuBlack,1),u.a.spacing.xl,u.a.spacing.xl,u.a.color.cambridgeBlue,d.a.typography.body12(),u.a.font.weight.medium,u.a.spacing.xxs]]])+" message"},n),e.tooltipContent?m(h.a,{placement:"left",usePositionFixed:!0,tooltipContent:e.tooltipContent},y):y,m(s.a,{id:"3744545984",dynamic:[u.a.spacing.xs,u.a.spacing.xs,d.a.hexA(u.a.color.haikuBlack,0),d.a.hexA(u.a.color.haikuBlack,1),u.a.spacing.xl,u.a.spacing.xl,u.a.color.cambridgeBlue,d.a.typography.body12(),u.a.font.weight.medium,u.a.spacing.xxs]},[".bottom-button.__jsx-style-dynamic-selector{padding:0 ".concat(u.a.spacing.xs," ").concat(u.a.spacing.xs,";position:relative;}"),".bottom-button.__jsx-style-dynamic-selector::before{pointer-events:none;content:'';background-image:linear-gradient( to bottom, ".concat(d.a.hexA(u.a.color.haikuBlack,0),", ").concat(d.a.hexA(u.a.color.haikuBlack,1)," );height:").concat(u.a.spacing.xl,";top:-").concat(u.a.spacing.xl,";left:0;right:0;position:absolute;}"),".message.__jsx-style-dynamic-selector{opacity:0.6;color:".concat(u.a.color.cambridgeBlue,";").concat(d.a.typography.body12(),";font-weight:").concat(u.a.font.weight.medium,";line-height:2rem;margin-bottom:").concat(u.a.spacing.xxs,";}")]),t.styles)}));t.a=y},"9ixP":function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("Z4N4"),f=n("NX3A"),y=h.a.createElement;function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(g()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"onToggle",(function(t){e.props.onToggle(t.target.checked)})),e}return Object(a.a)(p,[{key:"render",value:function(){var e=this.props,t=e.isOn,n=e.isDisabled,i=n?f.a.color.ashGrey:t?f.a.color.haikuGreen:f.a.color.coolGrey,a=n?"default":"pointer";return y("div",{className:u.a.dynamic([["4194603447",[i,f.a.color.white,n?"0.7":"initial",m.a.circle("var(--knob-size)"),m.a.shadow.xs(),t?1:-1,(t?"-":"")+"50%",(t?"":"-")+"50%",a]]])+" switch"},y(u.a,{id:"4194603447",dynamic:[i,f.a.color.white,n?"0.7":"initial",m.a.circle("var(--knob-size)"),m.a.shadow.xs(),t?1:-1,(t?"-":"")+"50%",(t?"":"-")+"50%",a]},[".switch.__jsx-style-dynamic-selector{--color:".concat(i,";--knob-size:12px;--knob-border-thickness:1px;--rail-padding:2px;--rail-height:calc(var(--knob-size) + 2 * var(--rail-padding));border-radius:calc(var(--rail-height) * 0.5);display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:var(--color);-webkit-transition:background-color 0.3s ease-in-out;transition:background-color 0.3s ease-in-out;position:relative;}"),".switch.__jsx-style-dynamic-selector::before{background-color:".concat(f.a.color.white,";content:'';position:absolute;-webkit-transition:-webkit-transform 0.3s ease-in-out;-webkit-transition:transform 0.3s ease-in-out;transition:transform 0.3s ease-in-out;opacity:").concat(n?"0.7":"initial",";").concat(m.a.circle("var(--knob-size)")," ").concat(m.a.shadow.xs(),";}"),'html[dir="rtl"] .switch.__jsx-style-dynamic-selector::before{-webkit-transform:translateX('.concat((t?"-":"")+"50%",");-ms-transform:translateX(").concat((t?"-":"")+"50%",");transform:translateX(").concat((t?"-":"")+"50%",");}"),"html:not([dir='rtl']) .switch.__jsx-style-dynamic-selector::before{-webkit-transform:translateX(".concat((t?"":"-")+"50%",");-ms-transform:translateX(").concat((t?"":"-")+"50%",");transform:translateX(").concat((t?"":"-")+"50%",");}"),".switch.__jsx-style-dynamic-selector:focus-within.__jsx-style-dynamic-selector::before{box-shadow:0 0 1px calc(var(--knob-border-thickness) + 1px) var(--color), 0 0 0 var(--knob-border-thickness) var(--color);}",".switch-checkbox.__jsx-style-dynamic-selector{cursor:".concat(a,";opacity:0;margin:0;width:calc(2 * var(--knob-size) + 2 * var(--rail-padding));height:var(--rail-height);}")]),y("input",{type:"checkbox","aria-checked":t,checked:t,onChange:this.onToggle,disabled:n,className:u.a.dynamic([["4194603447",[i,f.a.color.white,n?"0.7":"initial",m.a.circle("var(--knob-size)"),m.a.shadow.xs(),t?1:-1,(t?"-":"")+"50%",(t?"":"-")+"50%",a]]])+" switch-checkbox"}))}}]),p}(d.PureComponent),b=n("O94r"),x=n.n(b),O=n("liFR"),w=h.a.createElement;function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var C=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(j()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"getLabel",(function(){var t=e.props,n=t.icon,i=t.iconTooltip,a=t.label,o={styles:w(u.a,{id:"822088333",dynamic:[f.a.spacing.xxxs]},[".info-icon.__jsx-style-dynamic-selector{margin:2px ".concat(f.a.spacing.xxxs," 0;}")]),className:u.a.dynamic([["822088333",[f.a.spacing.xxxs]]])},r=o.styles,s=o.className;return n&&i?w("div",{className:"jsx-1734421743"},a,w(O.a,{tooltipContent:i,placement:"left",usePositionFixed:!0},w(n,{className:"jsx-1734421743 "+(x()("info-icon",s)||"")})),w(u.a,{id:"1734421743"},["div.jsx-1734421743{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;word-break:break-word;}"]),r):a})),e}return Object(a.a)(p,[{key:"render",value:function(){return w("label",{className:u.a.dynamic([["3923627567",["start"===this.props.switchPosition?"auto 1fr":"1fr auto",f.a.spacing.xxs,this.props.labelColor,m.a.typography.body12()]]])+" "+(x()(this.props.className,"labeled-switch")||"")},"start"===this.props.switchPosition?w(d.Fragment,null,this.props.switch,this.getLabel()):w(d.Fragment,null,this.getLabel(),this.props.switch),w(u.a,{id:"3923627567",dynamic:["start"===this.props.switchPosition?"auto 1fr":"1fr auto",f.a.spacing.xxs,this.props.labelColor,m.a.typography.body12()]},[".labeled-switch.__jsx-style-dynamic-selector{display:grid;grid-template-columns:".concat("start"===this.props.switchPosition?"auto 1fr":"1fr auto",";grid-column-gap:").concat(f.a.spacing.xxs,";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden;color:").concat(this.props.labelColor,";min-height:4rem;").concat(m.a.typography.body12(),";}")]))}}]),p}(d.PureComponent);Object(l.a)(C,"defaultProps",{labelColor:f.a.color.antiFlashWhite,switchPosition:"end"});var k=C;v.LabeledSwitch=k;t.a=v},"9pmT":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"play",path:"M9 5l16 10.502L9 26z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},ADNR:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"cursor",path:"M13.343 19.403L9 25.356V4.89l16.587 12.102h-7.078l4 7.985-5.065 2.548z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},ADUw:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("O94r"),h=n.n(d),m=n("NX3A"),f=n("Z4N4"),y=u.a.createElement;function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(g()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return y("div",{className:l.a.dynamic([["2560208614",[m.a.spacing.xs,m.a.spacing.xxs,m.a.color.darkGreen,f.a.typography.h5(),f.a.typography.form.label(),m.a.spacing.xs,m.a.spacing.xxxs,f.a.typography.body12(),m.a.spacing.xxxs,m.a.color.cadet]]])+" panel"},y("h5",{className:l.a.dynamic([["2560208614",[m.a.spacing.xs,m.a.spacing.xxs,m.a.color.darkGreen,f.a.typography.h5(),f.a.typography.form.label(),m.a.spacing.xs,m.a.spacing.xxxs,f.a.typography.body12(),m.a.spacing.xxxs,m.a.color.cadet]]])+" panel-heading"},this.props.title),this.props.subtitle&&y("p",{className:l.a.dynamic([["2560208614",[m.a.spacing.xs,m.a.spacing.xxs,m.a.color.darkGreen,f.a.typography.h5(),f.a.typography.form.label(),m.a.spacing.xs,m.a.spacing.xxxs,f.a.typography.body12(),m.a.spacing.xxxs,m.a.color.cadet]]])+" message"},this.props.subtitle),"undefined"!==typeof this.props.styleItems&&this.props.styleItems.map((function(e){return y(p.Fragment,{key:e.label},y("h6",{className:l.a.dynamic([["2560208614",[m.a.spacing.xs,m.a.spacing.xxs,m.a.color.darkGreen,f.a.typography.h5(),f.a.typography.form.label(),m.a.spacing.xs,m.a.spacing.xxxs,f.a.typography.body12(),m.a.spacing.xxxs,m.a.color.cadet]]])+" "+(h()("panel-style-heading",{disabled:e.isDisabled})||"")},e.label),e.control)})),y(l.a,{id:"2560208614",dynamic:[m.a.spacing.xs,m.a.spacing.xxs,m.a.color.darkGreen,f.a.typography.h5(),f.a.typography.form.label(),m.a.spacing.xs,m.a.spacing.xxxs,f.a.typography.body12(),m.a.spacing.xxxs,m.a.color.cadet]},[".panel.__jsx-style-dynamic-selector{padding:".concat(m.a.spacing.xs," ").concat(m.a.spacing.xxs,";color:").concat(m.a.color.darkGreen,";width:24rem;}"),".panel-heading.__jsx-style-dynamic-selector{".concat(f.a.typography.h5(),";}"),".panel-style-heading.__jsx-style-dynamic-selector{".concat(f.a.typography.form.label()," margin:").concat(m.a.spacing.xs," 0 ").concat(m.a.spacing.xxxs,";}"),".panel-style-heading.disabled.__jsx-style-dynamic-selector{opacity:0.5;}",".message.__jsx-style-dynamic-selector{".concat(f.a.typography.body12()," margin-top:").concat(m.a.spacing.xxxs,";color:").concat(m.a.color.cadet,";}")]))}}]),c}(p.PureComponent);t.a=v},AEMd:function(e,t,n){"use strict";n.d(t,"e",(function(){return C})),n.d(t,"b",(function(){return k})),n.d(t,"d",(function(){return I})),n.d(t,"n",(function(){return P})),n.d(t,"j",(function(){return R})),n.d(t,"k",(function(){return E})),n.d(t,"m",(function(){return D})),n.d(t,"l",(function(){return T})),n.d(t,"h",(function(){return M})),n.d(t,"f",(function(){return A})),n.d(t,"a",(function(){return L})),n.d(t,"i",(function(){return G})),n.d(t,"c",(function(){return _})),n.d(t,"o",(function(){return B})),n.d(t,"g",(function(){return W}));var i=n("zygG"),a=n("zjfJ"),o=n("fGyu"),r=n("VtSi"),s=n.n(r),c=n("ERkP"),l=n("dunV"),p=n("sCFI"),u=n("ZcpU"),d=n("QhVD"),h=n("D57K"),m=n("KA4O"),f=n("Tc8g");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var g=["sum","min","max","avg","stddev","var"],v=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong"],b=function(e){var t=e.features,n={};if(!t[0])return n;var o=t[0].attributes;return Object.keys(o).forEach((function(e){var t=e.split("@"),r=Object(i.a)(t,2),s=r[0],c=r[1];n[c]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n[c],Object(a.a)({},s,o[e]))})),n},x=function(e,t,n){return function(e){var t=Object(f.a)(e,["where","objectIds","relationParam","time","distance","units","outFields","geometry","geometryType","spatialRel","returnGeometry","maxAllowableOffset","geometryPrecision","inSR","outSR","gdbVersion","returnDistinctValues","returnIdsOnly","returnCountOnly","returnExtentOnly","orderByFields","groupByFieldsForStatistics","outStatistics","returnZ","returnM","multipatchOption","resultOffset","resultRecordCount","quantizationParameters","returnCentroid","resultType","historicMoment","returnTrueCurves","sqlFormat","returnExceededLimitFeatures","f"],{httpMethod:"GET",params:h.a({where:"1=1",outFields:"*"},e.params)});return Object(u.c)(Object(m.a)(e.url)+"/query",t)}({url:t,f:"json",where:"1=1",outStatistics:function(e,t,n){var i=[];return function(e,t){return e.filter((function(e){return t.indexOf(e.type)>-1})).map((function(e){return e.name}))}(e,t).forEach((function(e){n.forEach((function(t){i.push({statisticType:t,onStatisticField:e,outStatisticFieldName:"".concat(t).concat("@").concat(e)})}))})),i}(e,v,g),httpMethod:"POST",authentication:n,outFields:[]}).then(b).catch((function(e){return console.error(e),{}}))},O=n("nVDo");function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(e,t){var n,i,a;return s.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!/.*\/\d+$/.test(e)){o.next=2;break}return o.abrupt("return",e);case 2:return o.next=4,s.a.awrap(Object(u.c)(e,{authentication:t}));case 4:if(n=o.sent,i=n.layers,!(a=n.error)){o.next=10;break}return console.error(a),o.abrupt("return","");case 10:return o.abrupt("return",i&&i.length>0?"".concat(e,"/").concat(i[0].id):"");case 11:case"end":return o.stop()}}),null,null,null,Promise)},k=function(e,t){return function(n){return{layerDefinitions:[].concat(Object(o.a)(n.layerDefinitions),[e]),visConfigs:[].concat(Object(o.a)(n.visConfigs),[t]),currentlyEditedVisIndex:n.layerDefinitions.length}}},S=function(e){return(e||[]).find((function(e){var t=e.type;return O.a.includes(t)}))},I=function(e,t,n,i,o){var r,c,p,u,h,m;return s.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:return r=e.fields||[],f.next=3,s.a.awrap(x(r,e.featureLayerUrl,i));case 3:return c=f.sent,p=S(o?r:[]),u=M(e.geometryType,p?[p]:[])[0],h={colorIndex:n,visType:u,rendererConf:"new",fields:p?[p.name]:[]},m=Object(a.a)({stats:c,itemId:t,title:p&&(p.alias||p.name)||e.title,type:d.c.serviceUrl},d.c.serviceUrl,{url:e.featureLayerUrl,geometryType:e.geometryType}),f.abrupt("return",{isNewlyCreated:!0,data:m,dataSignature:Object(l.b)(),renderer:h,rendererSignature:N(h)});case 9:case"end":return f.stop()}}),null,null,null,Promise)},P=function(e,t){return function(n){var i=n.visConfigs,a=i[e];if(!a)return null;if(a.renderer.visType===t)return null;var o=j({},a.renderer,{visType:t,rendererConf:"new"}),r=j({},a,{renderer:o,rendererSignature:N(o)});return{visConfigs:i.map((function(t,n){return n===e?r:t}))}}},R=function(e,t){return function(n){var i=n.visConfigs,a=i[e];if(!a)return null;if(a.renderer.colorIndex===t)return null;var o=j({},a.renderer,{colorIndex:t,rendererConf:"new"}),r=j({},a,{renderer:o,rendererSignature:N(o)});return{visConfigs:i.map((function(t,n){return n===e?r:t}))}}},E=function(e,t,n){return function(i){var a=i.visConfigs,o=a[e];if(!o)return null;if(o.renderer.fields[0]===t)return null;var r=t?[t]:[],s=i.layerDefinitions[e],c=(s&&s.fields?s.fields:[]).filter((function(e){return e.name===t}))[0],l=j({},o.renderer,{fields:r,visType:n,rendererConf:"new"}),p=j({},o,{data:j({},o.data,{title:c&&c.alias?c.alias:t}),renderer:l,rendererSignature:N(l)});return{visConfigs:a.map((function(t,n){return n===e?p:t}))}}},D=function(e,t){return function(n){var i=n.visConfigs,a=j({},i[e],{renderer:j({},i[e].renderer,{rendererConf:t})});return delete a.isNewlyCreated,{visConfigs:i.map((function(t,n){return n===e?a:t}))}}},T=function(e,t,n){return function(i){var o=i.visConfigs,r=j({},o[e],{renderer:j({},o[e].renderer,{histogramResults:j({},o[e].renderer.histogramResults,Object(a.a)({},t,n))})});return{visConfigs:o.map((function(t,n){return n===e?r:t}))}}},M=function(e,t){if(!t.length||"esriFieldTypeGeometry"===t[0].type||"undefined"===typeof e)return[d.d.simpleLocation];var n=Object.keys(d.e).filter((function(n){if(!O.b.includes(n))return!1;var i=d.e[n];return!!i.geometryTypeAllowed.includes(e)&&(i.fieldTypesAllowed.length===t.length&&t.every((function(e,t){return i.fieldTypesAllowed[t].includes(e.type)})))})).map((function(e){return e}));return[].concat(Object(o.a)(n),[d.d.simpleLocation])},A=function(e,t){var n=function(t){return e[t]&&Object(a.a)({},t,e[t])};return j({},t,{},n("name"),{},n("id"),{},n("geometryType"),{fields:(e.fields||[]).filter((function(e){var t=e.type;return O.a.includes(t)}))})},N=function(e){var t=e.fields,n=e.visType,i=e.colorIndex;return[t.join()||"_",n,i].join("+")},L=["themeColor1","themeColor2","themeColor3","accentColor1"],G=function(){var e,t,n;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.awrap(Object(p.loadModules)(["esri/renderers/smartMapping/symbology/color"]));case 2:return e=a.sent,t=Object(i.a)(e,1),n=t[0],a.abrupt("return",n);case 6:case"end":return a.stop()}}),null,null,null,Promise)},_=[{r:0,g:0,b:0,a:0}],B=function(e){var t=Object(c.useState)(!1),n=t[0],i=t[1],a=Object(c.useRef)(void 0);return Object(c.useEffect)((function(){e?function(){var e;s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!==typeof a.current){t.next=5;break}return t.next=3,s.a.awrap(G());case 3:e=t.sent,a.current=function(t){var n=t.name,i=t.theme,a=t.reverse,o=e.getSchemeByName({basemap:"",theme:i,name:n,geometryType:"point"});return o?a?o.colors.reverse():o.colors:[]};case 5:i(!0);case 6:case"end":return t.stop()}}),null,null,null,Promise)}():i(!1)}),[e]),n?a.current:void 0},W=function(e){return"data:image/svg+xml;base64,".concat(btoa('<svg height="32" width="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><circle cx="16" cy="16" r="16" fill="'.concat(e.replace("#",encodeURIComponent("#")),'"/></svg>')))}},"AZ/v":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("VtSi"),a=n.n(i),o=n("/iEh"),r=n.n(o),s=n("8nAU"),c=function(e){var t,n,i,o,c,l,p,u,d,h,m;return a.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:if(!Object(s.a)()){f.next=2;break}return f.abrupt("return",{isEmbedSupported:!0,url:e.url});case 2:return t=e.url.replace("http://","https://"),f.prev=3,f.next=6,a.a.awrap(fetch("".concat(e.baseUrl,"/api/check-url"),{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})}));case 6:return n=f.sent,f.next=9,a.a.awrap(n.json());case 9:if(!(i=f.sent).success||!i.response.ok){f.next=21;break}return o=i.response.headers._headers,c=!0,l=!1,p=!1,u=!1,d=!1,Object.keys(o).forEach((function(e){var t=o[e][0],n=t.toLowerCase();if("x-frame-options"===e.toLowerCase()){var i=n;if(i.match(window.location.origin))return;if(i.match("deny")||i.match("sameorigin"))return void(c=!1)}if("content-security-policy"===e.toLowerCase()&&/frame-ancestors/i.test(t)){var a=!1;if(t.split(/frame-ancestors/i)[1].split(/\;/)[0].split(/\s/).filter((function(e){return!!e})).forEach((function(e){"self"!==e&&"none"!==e&&r()(window.location.href,e)&&(a=!0)})),!a)return void(c=!1)}"content-type"===e.toLowerCase()&&/video\/mp4/i.test(t)&&(l=!0),"content-type"===e.toLowerCase()&&(/audio\/mp3/i.test(t)||/audio\/mpeg/i.test(t)||/audio\/wav/i.test(t)||/audio\/wave/i.test(t)||/audio\/x-wav/i.test(t))&&(p=!0),"content-type"===e.toLowerCase()&&(/image\/jpeg/i.test(t)||/image\/png/i.test(t)||/image\/gif/i.test(t))&&(u=!0),("accept-ranges"===e.toLowerCase()&&/bytes/i.test(t)||"content-range"===e.toLowerCase()&&/bytes/i.test(t))&&(d=!0)})),f.abrupt("return",{isEmbedSupported:c,url:i.response.url,isSupportedVideoUrl:!(!l||!d),isSupportedAudioUrl:!(!p||!d),isSupportedImageUrl:u});case 21:if(!e.addedAsEmbedCode){f.next=30;break}return f.next=24,a.a.awrap(fetch("".concat(e.baseUrl,"/api/check-url"),{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t.replace("https://","http://")})}));case 24:return h=f.sent,f.next=27,a.a.awrap(h.json());case 27:if((m=f.sent).success&&m.response.ok){f.next=30;break}return f.abrupt("return",{isEmbedSupported:!0,url:e.url});case 30:return f.abrupt("return",{isEmbedSupported:!1,url:i.response&&i.response.url?i.response.url:e.url});case 33:return f.prev=33,f.t0=f.catch(3),f.abrupt("return",{isEmbedSupported:!1,url:e.url});case 36:case"end":return f.stop()}}),null,null,[[3,33]],Promise)}},ArZd:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("ERkP"),u=n.n(p),d=n("VtSi"),h=n.n(d),m={PATH_ADDON:"../../../../Addon",PATH_JSAPI:"",VERSION_JSAPI:"4.13",VERSION_APP:"7",HAS_ANIMATION:!1,LAB:!1};function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(f()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){var t;return Object(i.a)(this,a),(t=n.call(this,e)).InitImplementationGlobe(),t}return a}(function(){function e(t){Object(i.a)(this,e),Object(l.a)(this,"CONFIG",m),this.Init(t)}return Object(a.a)(e,[{key:"Init",value:function(e){this.param=e,this.needViewController=e.UI,this.needViewController=!1,e.isLab&&(this.CONFIG.LAB=e.isLab)}},{key:"InitImplementationGlobe",value:function(){}},{key:"InitImplementationViewer3D",value:function(){}},{key:"InitImplementationTerrain",value:function(){}},{key:"InitViewController",value:function(e){return h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),null,null,null,Promise)}},{key:"destroy",value:function(){}},{key:"pushAction",value:function(e){}},{key:"Resize",value:function(e,t){}}]),e}()),g=function(){function e(t){Object(i.a)(this,e);var n={element:t,UI:!0};this.app=new y(n)}return Object(a.a)(e,[{key:"destroy",value:function(){this.app.destroy()}}]),e}(),v=u.a.createElement;function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var x=function(e){Object(c.a)(u,e);var t,n=(t=u,function(){var e,n=Object(s.a)(t);if(b()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function u(e){var t;return Object(i.a)(this,u),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"initApp",(function(){t.ref.current&&(t.appConnector=new g(t.ref.current),t.props.setApp(t.appConnector))})),t.ref=Object(p.createRef)(),t}return Object(a.a)(u,[{key:"componentDidMount",value:function(){this.initApp()}},{key:"componentWillUnmount",value:function(){this.appConnector&&this.appConnector.destroy()}},{key:"render",value:function(){return v("div",null,v("div",{style:{backgroundColor:"black"},ref:this.ref}))}}]),u}(p.PureComponent);t.a=x},AtlR:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"chevron-left",path:"M18.293 25l-9-9 9-9h1.414l-9 9 9 9z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},Bcqe:function(e,t,n){var i=n("RNvQ"),a=n("tQYX"),o="Expected a function";e.exports=function(e,t,n){var r=!0,s=!0;if("function"!=typeof e)throw new TypeError(o);return a(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),i(e,t,{leading:r,maxWait:t,trailing:s})}},C5oz:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("ERkP"),u=n.n(p),d=n("YQpL"),h=n("txt0"),m=n("liFR"),f=n("Lf33"),y=n("NX3A"),g=n("XEYk"),v=n("ZjWX"),b=n("JmSK"),x=n("0OTU"),O=u.a.createElement;function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var j=function(e){Object(c.a)(u,e);var t,n=(t=u,function(){var e,n=Object(s.a)(t);if(w()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function u(){var e;Object(i.a)(this,u);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"embedData",{}),Object(l.a)(Object(o.a)(e),"renderButton",(function(){return"altButton"===e.props.mediaPickerUI?O(x.a,{item:e.props.item,onItemClick:e.onItemClick,isDisabled:e.props.isDisabled,disabledTooltipStr:e.props.disabledTooltipStr}):"dropdownMenuItem"===e.props.mediaPickerUI?e.props.isDisabled?O(m.a,{tooltipContent:e.props.disabledTooltipStr},e.renderDropDownMenuItem()):e.renderDropDownMenuItem():O(g.a,{item:e.props.item,onItemClick:e.onItemClick,isDisabled:e.props.isDisabled,disabledTooltipStr:e.props.disabledTooltipStr})})),Object(l.a)(Object(o.a)(e),"renderDropDownMenuItem",(function(){return O(f.a.Item,{isBold:!1,onClick:e.onItemClick,maxHeight:y.a.spacing.xl,isDisabled:e.props.isDisabled},e.props.item.titleAlt?e.props.item.titleAlt:e.props.item.title)})),Object(l.a)(Object(o.a)(e),"onEmbedInputChange",(function(t){t.target.value&&(e.embedData={url:t.target.value})})),Object(l.a)(Object(o.a)(e),"onSaveChanges",(function(){e.embedData.url&&(e.props.item.onClick({blockData:{type:"embed",data:e.embedData}}),e.props.onItemSelected(b.d.Embed),h.a.trackEvent(h.a.Category.Builder,h.a.Action.Builder_InsertEmbed,h.a.Name.Builder_Common_BlockPalette))})),Object(l.a)(Object(o.a)(e),"onItemClick",(function(){e.props.onItemExpanded(b.d.Embed)})),Object(l.a)(Object(o.a)(e),"onModalCancel",(function(){e.props.onItemCollapsed(b.d.Embed)})),e}return Object(a.a)(u,[{key:"render",value:function(){this.modalProperties=[{id:"embedLink",title:this.props.intl.formatMessage({id:"builder.blockInserter.embed.linkLabel"}),description:this.props.intl.formatMessage({id:"builder.blockInserter.embed.linkInstructions"}),inputType:"textarea",onChange:this.onEmbedInputChange}];var e=[{id:"embed-item-properties",modalProperties:this.modalProperties}];return O(p.Fragment,null,this.renderButton(),O(v.a,{isShowingModal:this.props.isExpanded,mediaTitle:this.props.intl.formatMessage({id:"builder.embed.add.title"}),tabs:e,onConfirm:this.onSaveChanges,onDiscard:this.onModalCancel}))}}]),u}(p.Component);t.a=Object(d.c)(j)},CBeR:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("HbGN"),p=n("ERkP"),u=n.n(p),d=u.a.createElement;function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var m=u.a.createContext(!1),f=function(e){var t=e.children,n=Object(l.a)(e,["children"]);return d(m.Provider,{value:n.isCoAuthor},t)};t.b=function(e){return function(t){Object(c.a)(p,t);var n,l=(n=p,function(){var e,t=Object(s.a)(n);if(h()){var i=Object(s.a)(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Object(r.a)(this,e)});function p(){return Object(a.a)(this,p),l.apply(this,arguments)}return Object(o.a)(p,[{key:"render",value:function(){var t=this;return d(m.Consumer,null,(function(n){return d(e,Object(i.a)({},t.props,{isCoAuthor:n}))}))}}]),p}(p.PureComponent)}},ClPg:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return p}));var i,a=n("fGyu"),o=n("zjfJ"),r=n("WXRn"),s={TYPE:{PARAGRAPH:"paragraph",H1:"h2",H2:"h3",H3:"h4",BULLET_LIST:"bullet-list",NUMBERED_LIST:"numbered-list",QUOTE:"quote"}},c=(i={},Object(o.a)(i,s.TYPE.PARAGRAPH,{tagName:"p",className:"text-viewer-paragraph"}),Object(o.a)(i,s.TYPE.H1,{tagName:"h2",className:"text-viewer-h1"}),Object(o.a)(i,s.TYPE.H2,{tagName:"h3",className:"text-viewer-h2"}),Object(o.a)(i,s.TYPE.H3,{tagName:"h4",className:"text-viewer-h3"}),Object(o.a)(i,s.TYPE.BULLET_LIST,{tagName:"ul",className:"text-viewer-bullet-list"}),Object(o.a)(i,s.TYPE.NUMBERED_LIST,{tagName:"ol",className:"text-viewer-numbered-list"}),Object(o.a)(i,s.TYPE.QUOTE,{tagName:"blockquote",className:"text-viewer-quote"}),i),l={ALL:{strong:["class"],em:["class"],a:["href","target","rel","class"],span:["class"]},ITALIC:{em:[]},NONE:{}},p=["theme-colors"].concat(Object(a.a)(Object(r.b)()?["accentColor1","themeColor3","themeColor2","themeColor1","clear-custom-color"]:["clear-custom-color","themeColor1","themeColor2","themeColor3","accentColor1"]),["divider","custom-text-color","custom-color"])},D6ti:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("Z4N4"),h=n("NX3A"),m=n("tAnR"),f=n("3Z5K"),y=n("5mn2"),g=n("l/Z4"),v=u.a.createElement;function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var x=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(b()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return this.props.printMode?this.renderPrintLayout():v("div",{className:l.a.dynamic([["2808653674",[d.a.center("column"),h.a.spacing.xxxxxl,h.a.responsiveBreakpoints.medium]]])+" mobile-container"},v(f.default,{isFirst:this.props.isFirst,isLast:this.props.isLast,onThresholdHit:this.props.onThresholdHit,setTopNode:this.props.setTopElement,isVisible:!0,isTransitionAnimated:!1,printMode:this.props.printMode},this.props.media&&v(m.default,{spacingTop:h.a.spacing.sm,spacingBottom:h.a.spacing.sm,size:"wide"},v("div",{className:l.a.dynamic([["2808653674",[d.a.center("column"),h.a.spacing.xxxxxl,h.a.responsiveBreakpoints.medium]]])+" media-container"},this.props.media)),this.props.content?this.props.content:this.props.content||this.props.media?void 0:v(y.a,null)),v(l.a,{id:"2808653674",dynamic:[d.a.center("column"),h.a.spacing.xxxxxl,h.a.responsiveBreakpoints.medium]},[".mobile-container.__jsx-style-dynamic-selector{".concat(d.a.center("column"),";-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;min-height:").concat(h.a.spacing.xxxxxl,";}"),".media-container.__jsx-style-dynamic-selector{height:23rem;}","@media (min-width:".concat(h.a.responsiveBreakpoints.medium,"){.media-container.__jsx-style-dynamic-selector{height:40rem;}}")]))}},{key:"renderPrintLayout",value:function(){var e,t;return v(p.Fragment,null,v("div",{className:l.a.dynamic([["664213665",[h.a.spacing.xs,h.a.spacing.xxxs]]])+" relative"},v("div",{className:l.a.dynamic([["664213665",[h.a.spacing.xs,h.a.spacing.xxxs]]])+" number-container"},v(g.a,{isSelected:!0,number:this.props.index+1,hasColor:this.props.hasFeature,color:this.props.accentColor,dimension:h.a.spacing.sm,borderColor:h.a.print.backgroundColor})),(null===(e=this.props.printContent)||void 0===e?void 0:e.title)||v("h3",{className:l.a.dynamic([["664213665",[h.a.spacing.xs,h.a.spacing.xxxs]]])+" dummy-title"},"\xa0")),this.props.media,null===(t=this.props.printContent)||void 0===t?void 0:t.text,v(l.a,{id:"664213665",dynamic:[h.a.spacing.xs,h.a.spacing.xxxs]},[".number-container.__jsx-style-dynamic-selector{position:absolute;left:1rem;bottom:0;}",".dummy-title.__jsx-style-dynamic-selector{margin:".concat(h.a.spacing.xs," 0 ").concat(h.a.spacing.xxxs,";}"),"html[dir='rtl'] .number-container.__jsx-style-dynamic-selector{left:auto;right:1rem;}",".relative.__jsx-style-dynamic-selector{position:relative;}"]))}}]),c}(p.PureComponent);t.a=x},DAN1:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("NX3A"),g=h.a.createElement;function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(v()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"renderButtons",(function(){var t={styles:g(u.a,{id:"152073098",dynamic:[e.props.borderRadius,e.props.borderRadius,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,e.props.borderRadius,e.props.borderRadius,e.props.borderRadius,e.props.borderRadius,e.props.borderRadius,e.props.borderRadius]},[".btn.button-group-button.__jsx-style-dynamic-selector{border-radius:0;}","html:not([dir='rtl']) .btn.button-group-button.__jsx-style-dynamic-selector:first-child{border-top-left-radius:".concat(e.props.borderRadius,";border-bottom-left-radius:").concat(e.props.borderRadius,";}"),"html:not([dir='rtl']) .btn.clear.button-group-button.__jsx-style-dynamic-selector:not(:last-child){box-shadow:inset 1px 0 0 ".concat(y.a.color.emeraldGreen,", inset 0 1px 0 ").concat(y.a.color.emeraldGreen,", inset 0 -1px 0 ").concat(y.a.color.emeraldGreen,";}"),"html:not([dir='rtl']) .btn.clear.button-group-button.__jsx-style-dynamic-selector:not(:last-child):hover:not(.disabled){box-shadow:inset 2px 0 0 ".concat(y.a.color.emeraldGreen,", inset 0 2px 0 ").concat(y.a.color.emeraldGreen,", inset 0 -2px 0 ").concat(y.a.color.emeraldGreen,", inset -1px 0 0 ").concat(y.a.color.emeraldGreen,";}"),"html[dir='rtl'] .btn.clear.button-group-button.__jsx-style-dynamic-selector:not(:last-child){box-shadow:inset -1px 0 0 ".concat(y.a.color.emeraldGreen,", inset 0 1px 0 ").concat(y.a.color.emeraldGreen,", inset 0 -1px 0 ").concat(y.a.color.emeraldGreen,";}"),"html[dir='rtl'] .btn.clear.button-group-button.__jsx-style-dynamic-selector:not(:last-child):hover:not(.disabled){box-shadow:inset 1px 0 0 ".concat(y.a.color.emeraldGreen,", inset 0 2px 0 ").concat(y.a.color.emeraldGreen,", inset 0 -2px 0 ").concat(y.a.color.emeraldGreen,", inset -2px 0 0 ").concat(y.a.color.emeraldGreen,";}"),"html:not([dir='rtl']) .btn.button-group-button.__jsx-style-dynamic-selector:last-child{border-top-right-radius:".concat(e.props.borderRadius,";border-bottom-right-radius:").concat(e.props.borderRadius,";}"),"html[dir='rtl'] .btn.button-group-button.__jsx-style-dynamic-selector:first-child{border-top-right-radius:".concat(e.props.borderRadius,";border-bottom-right-radius:").concat(e.props.borderRadius,";}"),"html[dir='rtl'] .btn.button-group-button.__jsx-style-dynamic-selector:last-child{border-top-left-radius:".concat(e.props.borderRadius,";border-bottom-left-radius:").concat(e.props.borderRadius,";}")]),className:u.a.dynamic([["152073098",[e.props.borderRadius,e.props.borderRadius,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,y.a.color.emeraldGreen,e.props.borderRadius,e.props.borderRadius,e.props.borderRadius,e.props.borderRadius,e.props.borderRadius,e.props.borderRadius]]])},n=t.className,i=t.styles,a=h.a.Children.map(e.props.children,(function(e){return e?h.a.cloneElement(e,{className:"".concat(e.props.className," ").concat(n," btn button-group-button")}):null}));return g(d.Fragment,null,i,a)})),e}return Object(a.a)(p,[{key:"render",value:function(){var e=f()("button-group",this.props.className);return g("div",{className:"jsx-2066497830 "+(e||"")},this.renderButtons(),g(u.a,{id:"2066497830"},[".button-group.jsx-2066497830{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}"]))}}]),p}(d.PureComponent);Object(l.a)(b,"defaultProps",{borderRadius:"0"})},DSo7:function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},DeSy:function(e,t,n){"use strict";var i,a;n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return s})),function(e){e.STORY_MAP="storymap",e.WEBMAP="webmap",e.WEBSCENE="webscene",e.MAP_LAYER="map-layer"}(i||(i={})),function(e){e.ARCGIS_STREAM_LAYER="ArcGISStreamLayer",e.BING_AERIAL_LAYER="BingMapsAerial",e.BING_ROAD_LAYER="BingMapsRoad",e.BING_HYBRID_LAYER="BingMapsHybrid",e.BUILDING_SCENE_LAYER="BuildingSceneLayer",e.CSV_LAYER="CSV",e.ELEVATION_LAYER="ArcGISTiledElevationServiceLayer",e.FEATURE_LAYER="ArcGISFeatureLayer",e.GEO_RSS_LAYER="GeoRSS",e.GROUP_LAYER="GroupLayer",e.IMAGE_SERVICE_LAYER="ArcGISImageServiceLayer",e.IMAGE_SERVICE_VECTOR_LAYER="ArcGISImageServiceVectorLayer",e.INTEGRATED_MESH_LAYER="IntegratedMeshLayer",e.KML_LAYER="KML",e.MAP_SERVICE_LAYER="ArcGISMapServiceLayer",e.OPEN_STREET_MAP_LAYER="OpenStreetMap",e.POINT_CLOUD_LAYER="PointCloudLayer",e.SCENE_LAYER="ArcGISSceneServiceLayer",e.TILED_IMAGE_SERVICE_LAYER="ArcGISTiledImageServiceLayer",e.TILED_MAP_SERVICE_LAYER="ArcGISTiledMapServiceLayer",e.VECTOR_TILE_LAYER="VectorTileLayer",e.WEB_FEATURE_SERVICE_LAYER="WFS",e.WEB_TILE_LAYER="WebTiledLayer",e.WMS_LAYER="WMS"}(a||(a={}));var o=new Error("The issue cannot be automatically fixed"),r=new Error("App cannot be registered. Registration must be provided"),s=new Error("No app proxy information provided")},DmvT:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));var i=n("Abkm"),a=n("gMe1"),o=n("nVDo"),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(i.g)(e||"").length>o.l},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.startsWith("https://")?t:Object(a.g)(e,t)}},ECJn:function(e,t,n){"use strict";n.r(t),n.d(t,"ImmersiveSlideViewer",(function(){return b}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("NX3A"),g=h.a.createElement;function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(v()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"audioRef",Object(d.createRef)()),Object(l.a)(Object(o.a)(e),"updateAudioPlay",(function(){var t,n,i;(null===(t=e.audioRef.current)||void 0===t?void 0:t.paused)&&e.props.isPlayingBackgroundAudio?null===(n=e.audioRef.current)||void 0===n||n.play().catch():null===(i=e.audioRef.current)||void 0===i||i.pause()})),e}return Object(a.a)(p,[{key:"componentDidUpdate",value:function(e){e.isPlayingBackgroundAudio!==this.props.isPlayingBackgroundAudio&&this.updateAudioPlay()}},{key:"render",value:function(){return this.props.printMode?g("div",{className:u.a.dynamic([["3577254988",[y.a.spacing.xxs]]])+" "+(f()("slide-wrapper",this.props.immersiveType)||"")},this.props.children,g(u.a,{id:"3577254988",dynamic:[y.a.spacing.xxs]},[".slide-wrapper.slideshow.__jsx-style-dynamic-selector{display:grid;margin-bottom:".concat(y.a.spacing.xxs,";-webkit-break-inside:avoid;break-inside:avoid;}")])):g(h.a.Fragment,null,this.props.children,this.props.backgroundAudioSrc&&g("audio",{src:this.props.backgroundAudioSrc,ref:this.audioRef,className:"jsx-2335458378"}),g(u.a,{id:"2335458378"},["audio.jsx-2335458378{display:none;}"]))}}]),p}(d.PureComponent);t.default=b},EP0r:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));var i=n("7xIC"),a=n.n(i),o=n("8nAU"),r=function(e){var t=e.ctx,n=e.href,i=e.asPath,o=e.isExternal;"undefined"!==typeof(null===t||void 0===t?void 0:t.res)?((n.indexOf("/error?errType=story-load")>-1||n.indexOf("/error?errType=story-inaccessible")>-1)&&t.res.setHeader("Cache-Control","public, max-age=300"),t.res.writeHead(302,{Location:i||n}),t.res.end()):o?window.location.href=n:a.a.push(n,i)},s=function(e,t){var n="".concat(t,"/stories");if(!e||t&&e&&!e.replace(t,""))return n;var i=t||"".replace(/\//,"\\/"),a=new RegExp("^".concat(i,"(?=/|$)")),r=e.replace(a,""),s=new RegExp(/^\/error($|[/?#])/).test(r);return""===r||"/"===r||s?n:Object(o.a)()?"".concat(t).concat(r):r}},EVM9:function(e,t,n){"use strict";n.r(t),n.d(t,"SlideshowViewer",(function(){return R}));var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("pWxA"),s=n("K/z8"),c=n("sRHE"),l=n("8K1b"),p=n("zjfJ"),u=n("yFcC"),d=n.n(u),h=n("ERkP"),m=n.n(h),f=n("O94r"),y=n.n(f),g=n("i3DM"),v=n("WXRn"),b=n("Wkul"),x=n("eCu0"),O=n("6LyH"),w=n("V+ka"),j=n("/t8o"),C=n("Xls9"),k=n("caza"),S=n("uYly"),I=m.a.createElement;function P(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var R=function(e){Object(l.a)(u,e);var t,n=(t=u,function(){var e,n=Object(c.a)(t);if(P()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function u(e){var t;return Object(a.a)(this,u),t=n.call(this,e),Object(p.a)(Object(r.a)(t),"onIntersection",(function(e){e.forEach((function(e){e.target===t.topInteractableSentinel.current&&t.props.setIsTopInteractableSentinelShowing(e.isIntersecting),e.target===t.bottomInteractableSentinel.current&&t.props.setIsBottomInteractableSentinelShowing(e.isIntersecting)}))})),Object(p.a)(Object(r.a)(t),"onNextArrowClicked",(function(){t.props.onNavArrowClicked("next")})),Object(p.a)(Object(r.a)(t),"onPreviousArrowClicked",(function(){t.props.onNavArrowClicked("previous")})),Object(p.a)(Object(r.a)(t),"onResetArrowClicked",(function(){t.props.onNavArrowClicked("beginning")})),Object(p.a)(Object(r.a)(t),"onNavArrowPulseComplete",(function(){t.setState({hasNavArrowPulsed:!0})})),Object(p.a)(Object(r.a)(t),"onArrowKeyPressed",(function(e){if(!(e.target&&e.target instanceof HTMLElement&&(Object(g.b)(e.target)||e.target.closest(".esri-view")))){var n=Object(v.b)();"ArrowLeft"===e.key?t.props.onNavArrowClicked(n?"next":"previous"):"ArrowRight"===e.key&&t.props.onNavArrowClicked(n?"previous":"next")}})),Object(p.a)(Object(r.a)(t),"onTouchStart",(function(e){var n=e.touches[0];n&&n.target instanceof HTMLElement&&"function"===typeof n.target.closest&&(Object(g.b)(n.target)||n.target.closest(".esri-view")||t.setState({isSwiping:!0,swipeOriginalX:n.clientX,swipeOriginalY:n.clientY}))})),Object(p.a)(Object(r.a)(t),"onTouchMove",(function(e){var n=e.touches[0];if(t.state.isSwiping&&n){var i=n.clientX-t.state.swipeOriginalX,a=Math.abs(i),o=Math.abs(n.clientY-t.state.swipeOriginalY);a>100&&a/o>2&&(i>0?t.props.onNavArrowClicked("previous"):t.props.onNavArrowClicked("next"),t.endSwipe(e))}})),Object(p.a)(Object(r.a)(t),"endSwipe",(function(e){var n=e.touches[0];t.setState({isSwiping:!1}),n&&t.setState({swipeOriginalX:n.clientX,swipeOriginalY:n.clientY})})),t.state={isSwiping:!1,swipeOriginalX:0,swipeOriginalY:0,hasNavArrowPulsed:!1},t.topInteractableSentinel=Object(h.createRef)(),t.bottomInteractableSentinel=Object(h.createRef)(),t}return Object(o.a)(u,[{key:"componentDidMount",value:function(){this.intersectionObserver=new IntersectionObserver(this.onIntersection,{threshold:0}),this.topInteractableSentinel.current&&this.intersectionObserver.observe(this.topInteractableSentinel.current),this.bottomInteractableSentinel.current&&this.intersectionObserver.observe(this.bottomInteractableSentinel.current)}},{key:"componentWillUnmount",value:function(){this.intersectionObserver.disconnect()}},{key:"render",value:function(){var e=this;if(this.props.printMode)return I("div",{className:"immersive-container"},this.props.children);var t,n=Object(C.b)({appOffset:this.props.appOffset.top,storyNavOffset:this.props.storyOffsetContext.storyOffset.navBarHeight}),a={styles:I(d.a,{id:"1483941185"},[".slideshow.jsx-1483941185{grid-template-rows:auto;grid-template-columns:auto;}"]),className:"jsx-1483941185"},o={styles:I(d.a,{id:"1813188779",dynamic:[n]},[".first-create-node.slideshow-sentinel.__jsx-style-dynamic-selector{top:calc(".concat(n," * -1);}")]),className:d.a.dynamic([["1813188779",[n]]])},r={styles:I(d.a,{id:"1958484003",dynamic:[n]},[".bottom-sentinel.slideshow-sentinel.__jsx-style-dynamic-selector{bottom:".concat(n,";}")]),className:d.a.dynamic([["1958484003",[n]]])},s=this.props.slidePointers.findIndex((function(t){return t.id===e.props.selectedSlideId})),c=s===this.props.slidePointers.length-1,l=0===s,p=this.props.selectedSlideDetailedMediaType;return this.props.isViewportMinWidth("medium")&&(p===S.a.WebMap||"expressmap"===p?t="34rem":p===S.a.WebScene&&(t="43rem")),I("div",{onTouchStart:this.props.isInteractable?this.onTouchStart:void 0,onTouchMove:this.props.isInteractable?this.onTouchMove:void 0,onTouchEnd:this.props.isInteractable?this.endSwipe:void 0,onTouchCancel:this.props.isInteractable?this.endSwipe:void 0,className:d.a.dynamic([["3187948949",[n]]])+" immersive-container"},I(k.a,Object(i.a)({},this.props,{className:y()("slideshow",a.className),navDotsOrientation:"horizontal",areNavDotsIntegrated:!1,firstCreateDockNodeClassName:y()("first-create-node","slideshow-sentinel",o.className),bottomDockedSentinelClassName:y()("bottom-sentinel","slideshow-sentinel",r.className),extraSentinels:I(m.a.Fragment,null,I("span",{ref:this.topInteractableSentinel,className:d.a.dynamic([["3187948949",[n]]])+" sentinel-top-interactable"}),I("span",{ref:this.bottomInteractableSentinel,className:d.a.dynamic([["3187948949",[n]]])+" sentinel-bottom-interactable"}))}),this.props.isInteractable&&I(m.a.Fragment,null,I(b.a,{triggerKey:["ArrowLeft","ArrowRight"],on:this.onArrowKeyPressed})),!l&&I(j.a,{direction:"previous",offsetTop:n,offsetBottom:this.props.bottomOffset,onClick:this.onPreviousArrowClicked,mediaOffset:t}),!c&&I(j.a,{direction:"next",offsetTop:n,offsetBottom:this.props.bottomOffset,mediaOffset:t,onClick:this.onNextArrowClicked,isDockable:l,shouldPulse:l&&this.props.isInteractable&&!this.state.hasNavArrowPulsed&&!this.props.hasNavigatedSlides,onPulseComplete:this.onNavArrowPulseComplete}),c&&this.props.slidePointers.length>=3&&I(j.a,{direction:"beginning",offsetTop:n,offsetBottom:this.props.bottomOffset,mediaOffset:t,onClick:this.onResetArrowClicked}),this.props.children),I(d.a,{id:"3187948949",dynamic:[n]},[".sentinel-top-interactable.__jsx-style-dynamic-selector,.sentinel-bottom-interactable.__jsx-style-dynamic-selector{position:absolute;z-index:0;left:0;right:0;height:0.1rem;}",".sentinel-top-interactable.__jsx-style-dynamic-selector{top:calc(".concat(n," * -1 - 12.5rem);}"),".sentinel-bottom-interactable.__jsx-style-dynamic-selector{bottom:-12.5rem;}"]),a.styles,o.styles,r.styles)}}]),u}(h.PureComponent);t.default=Object(O.a)(Object(w.b)(Object(x.c)(R)))},F4ML:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("ERkP"),u=function e(t){Object(i.a)(this,e)},d=n.n(p).a.createElement;function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){Object(c.a)(m,e);var t,n=(t=m,function(){var e,n=Object(s.a)(t);if(h()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function m(e){var t;return Object(i.a)(this,m),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"initApp",(function(){t.ref.current&&(t.appConnector=new u(t.ref.current),t.props.setApp(t.appConnector))})),t.ref=Object(p.createRef)(),t}return Object(a.a)(m,[{key:"componentDidMount",value:function(){this.initApp()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return d("div",null,d("div",{style:{backgroundColor:"black"},ref:this.ref}))}}]),m}(p.PureComponent);t.a=m},F6FI:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("NX3A"),c=n("Z4N4"),l=r.a.createElement;t.a=function(e){var t=e.themeVariables,n=e.children,i=t.blockQuoteStyle,o=t.titleColor,r=t.accentColor1;return"quote-left"===i?l("div",{"data-testid":"QuoteLeft",className:a.a.dynamic([["151318092",[r,s.a.spacing.xxxs,t.mixins.typography.title.size.stepUp8({weight:"light"}),s.a.responsiveBreakpoints.small]]])},l("div",{className:a.a.dynamic([["151318092",[r,s.a.spacing.xxxs,t.mixins.typography.title.size.stepUp8({weight:"light"}),s.a.responsiveBreakpoints.small]]])+" quote-left-decoration"},"\u201c"),l("div",{className:a.a.dynamic([["151318092",[r,s.a.spacing.xxxs,t.mixins.typography.title.size.stepUp8({weight:"light"}),s.a.responsiveBreakpoints.small]]])+" quote-left-container"},n),l(a.a,{id:"151318092",dynamic:[r,s.a.spacing.xxxs,t.mixins.typography.title.size.stepUp8({weight:"light"}),s.a.responsiveBreakpoints.small]},[".quote-left-decoration.__jsx-style-dynamic-selector{height:4rem;top:3rem;color:".concat(r,";font-style:italic;position:relative;left:-").concat(s.a.spacing.xxxs,";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;").concat(t.mixins.typography.title.size.stepUp8({weight:"light"}),";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:10.2rem;}"),".quote-left-container.__jsx-style-dynamic-selector{margin-left:-2rem;}","html[dir='rtl'] .quote-left-container.__jsx-style-dynamic-selector{margin-left:initial;margin-right:-2rem;}","@media (max-width:".concat(s.a.responsiveBreakpoints.small,"){.quote-left-decoration.__jsx-style-dynamic-selector{font-size:8rem;height:2.5rem;top:2.5rem;}}")])):l("div",{"data-testid":"SquareCenter",className:a.a.dynamic([["3742462656",[c.a.center(),r,t.mixins.typography.title.size.stepUp6({weight:"light"}),o,s.a.spacing.xxs,r]]])+" flex-container"},l("fieldset",{className:a.a.dynamic([["3742462656",[c.a.center(),r,t.mixins.typography.title.size.stepUp6({weight:"light"}),o,s.a.spacing.xxs,r]]])+" square-quote-border"},l("legend",{className:a.a.dynamic([["3742462656",[c.a.center(),r,t.mixins.typography.title.size.stepUp6({weight:"light"}),o,s.a.spacing.xxs,r]]])+" square-quote-decoration"},"\u201c"),n),l(a.a,{id:"3742462656",dynamic:[c.a.center(),r,t.mixins.typography.title.size.stepUp6({weight:"light"}),o,s.a.spacing.xxs,r]},[".flex-container.__jsx-style-dynamic-selector{".concat(c.a.center(),";}"),".square-quote-border.__jsx-style-dynamic-selector{padding:0;margin:0;border:0.2rem solid ".concat(r,";padding:1.4rem 0.6rem;").concat(t.mixins.typography.title.size.stepUp6({weight:"light"}),";}"),".square-quote-decoration.__jsx-style-dynamic-selector{--width:5.8rem;--half-width:calc(var(--width) / 2);font-style:italic;width:var(--width);height:3rem;text-align:center;color:".concat(o,";margin-left:calc(50% - var(--half-width));margin-right:calc(50% - var(--half-width));margin-bottom:-").concat(s.a.spacing.xxs,";position:relative;left:-0.2rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}"),".print .square-quote-decoration.__jsx-style-dynamic-selector{color:".concat(r,";}")]))}},F9qf:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("A7aE"),c=r.a.createElement;t.a=Object(s.b)((function(e){return c("div",{className:a.a.dynamic([["2113896353",[e.storyDesign.storyTheme.themeVariables.mixins.typography.title.size.baseline(),e.styleMixin||""]]])+" title"},e.text,c(a.a,{id:"2113896353",dynamic:[e.storyDesign.storyTheme.themeVariables.mixins.typography.title.size.baseline(),e.styleMixin||""]},[".title.__jsx-style-dynamic-selector{".concat(e.storyDesign.storyTheme.themeVariables.mixins.typography.title.size.baseline()," ").concat(e.styleMixin||"",";overflow-wrap:break-word;max-width:100%;}")]))}))},"GA+H":function(e,t,n){"use strict";var i=n("ERkP"),a=Object(i.createContext)({});t.a=a},GTld:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("ERkP"),l=n.n(c),p=n("2SGB"),u=n("YQpL"),d=n("AuFC"),h=n("1lKD"),m=l.a.createElement;function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(f()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return m(h.a,{isShowing:this.props.isShowing,optionGroupId:"sidecar-layout",selectedOptionId:this.props.selectedLayout,onCloseClicked:this.props.onCloseClicked,onOptionSelected:this.props.onLayoutSelected,title:this.props.intl.formatMessage({id:"builder.immersive.layoutSelector.title.sidecar"}),subtitle:this.props.intl.formatMessage({id:"builder.immersive.layoutSelector.subtitle.sidecar"}),options:[{id:"floating-panel",thumbnail:"".concat(this.props.config.BASE_URL,"/static/images/builder/immersive/layout-switch/sidecar-floating-panel.jpg"),alt:this.props.intl.formatMessage({id:"builder.immersive.layoutSelector.sidecar.floatingPanel.alt"}),title:m(p.a,{id:"builder.immersive.layoutSelector.sidecar.floatingPanel.title"}),subtitle:m(p.a,{id:"builder.immersive.layoutSelector.sidecar.floatingPanel.subtitle"})},{id:"docked-panel",thumbnail:"".concat(this.props.config.BASE_URL,"/static/images/builder/immersive/layout-switch/sidecar-docked-panel.jpg"),alt:this.props.intl.formatMessage({id:"builder.immersive.layoutSelector.sidecar.dockedPanel.alt"}),title:m(p.a,{id:"builder.immersive.layoutSelector.sidecar.dockedPanel.title"}),subtitle:m(p.a,{id:"builder.immersive.layoutSelector.sidecar.dockedPanel.subtitle"})}]})}}]),c}(c.PureComponent);t.a=Object(d.c)(Object(u.c)(y))},HW3u:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("NX3A"),f=n("Z4N4"),y=n("fSBn"),g=h.a.createElement;function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(v()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"renderTabBar",(function(){var e="overriding-from-tab-panel-group",n={styles:g(u.a,{id:"3371930347",dynamic:[e,t.props.items.length,m.a.color.warmBlack,e,e,f.a.center(),m.a.spacing.xs,e,m.a.color.haikuGreen]},[".".concat(e,".__jsx-style-dynamic-selector{border:0;display:grid;grid-template-columns:repeat(").concat(t.props.items.length,",1fr);box-shadow:0 -1px ").concat(m.a.color.warmBlack," inset;}"),".".concat(e,".__jsx-style-dynamic-selector .tab-bar-tab,html[dir='rtl'] .").concat(e,".__jsx-style-dynamic-selector .tab-bar-tab{").concat(f.a.center(),";margin:0;padding:").concat(m.a.spacing.xs,";}"),".".concat(e,".__jsx-style-dynamic-selector .tab-bar-tab.selected{border:0;box-shadow:0 -2px ").concat(m.a.color.haikuGreen," inset;}")]),className:u.a.dynamic([["3371930347",[e,t.props.items.length,m.a.color.warmBlack,e,e,f.a.center(),m.a.spacing.xs,e,m.a.color.haikuGreen]]])},i=n.className,a=n.styles;return g(h.a.Fragment,null,g(y.a,{className:"".concat(i," ").concat(e)},t.props.items.map((function(e,n){var i=n===t.state.currentTabIndex;return g(y.a.Tab,{key:e.id,isSelected:i,onClick:function(){t.switchTabTo(n)}},e.icon(i?m.a.color.platinum:m.a.color.cadet))}))),a)})),Object(l.a)(Object(o.a)(t),"switchTabTo",(function(e){e!==t.state.currentTabIndex&&t.setState({currentTabIndex:e})})),t.state={currentTabIndex:0},t}return Object(a.a)(p,[{key:"render",value:function(){return g("div",{className:u.a.dynamic([["2999938414",[m.a.color.white,m.a.spacing.xs]]])+" tab-panel-group"},this.props.items.length>1&&g("div",{className:u.a.dynamic([["2999938414",[m.a.color.white,m.a.spacing.xs]]])+" header"},this.renderTabBar()),g("div",{className:u.a.dynamic([["2999938414",[m.a.color.white,m.a.spacing.xs]]])+" content"},this.props.items[this.state.currentTabIndex].content),g(u.a,{id:"2999938414",dynamic:[m.a.color.white,m.a.spacing.xs]},[".tab-panel-group.__jsx-style-dynamic-selector{width:26rem;color:".concat(m.a.color.white,";height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}"),".header.__jsx-style-dynamic-selector{padding:0 ".concat(m.a.spacing.xs,";}"),".content.__jsx-style-dynamic-selector{overflow-y:auto;-webkit-overflow-scrolling:auto;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;overflow-wrap:break-word;height:100%;}"]))}}]),p}(d.Component)},"I/HP":function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return v}));var i=n("VtSi"),a=n.n(i),o=n("zjfJ"),r=n("HbGN"),s=n("79uv"),c=n("Z34l"),l=n("kO5H"),p=n("fQV3"),u=n("Bx5b");function d(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){return/^draft(?:_\d+)?.json$/.test(e)},g=function(e){return Object(l.a)({itemDetails:e,typekeywordId:u.a})||"draft.json"},v=function(e){var t,n,i,o,u,h,m,v,b;return a.a.async((function(x){for(;;)switch(x.prev=x.next){case 0:return t=e.itemDetails,n=Object(r.a)(e,["itemDetails"]),x.prev=1,i=g(t),x.next=5,a.a.awrap(Object(s.a)(f({},n,{itemId:e.itemDetails.id,resourceId:i})));case 5:return x.abrupt("return",x.sent);case 8:if(x.prev=8,x.t0=x.catch(1),!Object(l.b)(t)){x.next=15;break}return x.next=13,a.a.awrap(Object(p.b)(e.itemDetails.id,{authentication:e.userSession}));case 13:return o=x.sent,x.abrupt("return",f({},o,{title:t.title,snippet:t.snippet}));case 15:return x.next=17,a.a.awrap(Object(s.b)({userSession:e.userSession,username:e.itemDetails.owner,itemId:e.itemDetails.id,portal:Object(c.e)(e.portalHost,e.userSession)}));case 17:u=x.sent,h=u.filter((function(e){return y(e.resource)})).sort().reverse(),m=d(h),x.prev=20,m.s();case 22:if((v=m.n()).done){x.next=34;break}return b=v.value,x.prev=24,x.next=27,a.a.awrap(Object(s.a)(f({},n,{itemId:e.itemDetails.id,resourceId:b.resource})));case 27:return x.abrupt("return",x.sent);case 30:x.prev=30,x.t1=x.catch(24);case 32:x.next=22;break;case 34:x.next=39;break;case 36:x.prev=36,x.t2=x.catch(20),m.e(x.t2);case 39:return x.prev=39,m.f(),x.finish(39);case 42:throw x.t0;case 43:case"end":return x.stop()}}),null,null,[[1,8],[20,36,39,42],[24,30]],Promise)}},I0tp:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("YQpL"),f=n("O94r"),y=n.n(f),g=n("NX3A"),v=n("Z4N4"),b=n("DpQq"),x=h.a.createElement;function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var w=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(O()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"onKeyDownOnEditor",(function(e){"Enter"===e.key&&t.updateText(e.currentTarget.value)})),Object(l.a)(Object(o.a)(t),"onKeyDownOnViewer",(function(e){"Enter"!==e.key&&" "!==e.key||"undefined"===typeof t.props.startEditing||(e.preventDefault(),t.props.startEditing())})),Object(l.a)(Object(o.a)(t),"onBlur",(function(e){t.updateText(e.target.value)})),Object(l.a)(Object(o.a)(t),"updateText",(function(e){t.props.updateText(e.trim()),t.props.endEditing()})),t.inputRef=Object(d.createRef)(),t}return Object(a.a)(p,[{key:"componentDidUpdate",value:function(e){if(e.isEditing!==this.props.isEditing&&this.props.isEditing){var t=this.inputRef.current;t&&(t.focus(),t.select())}}},{key:"render",value:function(){var e={styles:x(u.a,{id:"284947301",dynamic:[g.a.color.cambridgeBlue,g.a.color.cambridgeBlue,this.props.textColor||g.a.color.antiFlashWhite,v.a.typography.body14()]},["input.__jsx-style-dynamic-selector{background-color:transparent;outline:none;}","input.__jsx-style-dynamic-selector::-webkit-input-placeholder{color:".concat(g.a.color.cambridgeBlue,";opacity:1;}"),"input.__jsx-style-dynamic-selector::-moz-placeholder{color:".concat(g.a.color.cambridgeBlue,";opacity:1;}"),"input.__jsx-style-dynamic-selector:-ms-input-placeholder{color:".concat(g.a.color.cambridgeBlue,";opacity:1;}"),"input.__jsx-style-dynamic-selector::placeholder{color:".concat(g.a.color.cambridgeBlue,";opacity:1;}"),"input.__jsx-style-dynamic-selector::-ms-input-placeholder{color:".concat(g.a.color.cambridgeBlue,";}"),".text.__jsx-style-dynamic-selector{padding:0;word-break:break-word;color:".concat(this.props.textColor||g.a.color.antiFlashWhite,";").concat(v.a.typography.body14(),";}")]),className:u.a.dynamic([["284947301",[g.a.color.cambridgeBlue,g.a.color.cambridgeBlue,this.props.textColor||g.a.color.antiFlashWhite,v.a.typography.body14()]]])},t=y()(e.className,"text"),n=this.props.intl.formatMessage({id:"builder.common.untitledLayer"});return x("div",{className:u.a.dynamic([["1915765449",[g.a.spacing.xxxs]]])+" editable-plain-text"},this.props.isEditing?x(b.a,{inputRef:this.inputRef,className:t,type:"text",maxLength:35,defaultValue:this.props.text,onKeyDown:this.onKeyDownOnEditor,onBlur:this.onBlur,placeholder:n}):x("span",{tabIndex:"undefined"===typeof this.props.startEditing?void 0:0,role:"undefined"===typeof this.props.startEditing?void 0:"button",onClick:this.props.startEditing,onKeyDown:this.onKeyDownOnViewer,className:u.a.dynamic([["1915765449",[g.a.spacing.xxxs]]])+" "+(t||"")},this.props.text||x("span",{className:u.a.dynamic([["1915765449",[g.a.spacing.xxxs]]])+" placeholder"},n),this.props.nonEditableText&&x("span",{className:u.a.dynamic([["1915765449",[g.a.spacing.xxxs]]])+" non-editable"},this.props.nonEditableText)),e.styles,x(u.a,{id:"1915765449",dynamic:[g.a.spacing.xxxs]},[".editable-plain-text.__jsx-style-dynamic-selector{min-width:0;overflow-wrap:break-word;}",".non-editable.__jsx-style-dynamic-selector{margin:0 ".concat(g.a.spacing.xxxs,";font-weight:initial;}")]))}}]),p}(d.PureComponent);t.a=Object(m.c)(w)},I9aa:function(e,t,n){"use strict";n.r(t),n.d(t,"GlobeViewer",(function(){return y}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("ERkP"),u=n.n(p),d=n("gZeU"),h=n("ArZd"),m=u.a.createElement;function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(f()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"setApp",(function(e){t.appConnector=e})),t}return Object(a.a)(p,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return m(d.a,{aspectRatio:16/9,caption:m("div",null,"Globe block")},m(h.a,{setApp:this.setApp}))}}]),p}(p.PureComponent);t.default=y},IXx0:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return u}));var i=n("9fIP"),a=n("zjfJ"),o=n("VtSi"),r=n.n(o),s=n("k5Cm"),c=n("WXRn"),l=n("UTGL"),p=function(e,t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:"undefined"!==typeof document&&("start"===t.type?document.body.classList.add("user-is-dragging"):"end"!==t.type&&"unchoose"!==t.type&&"update"!==t.type||document.body.classList.remove("user-is-dragging")),n.t0=t.type,n.next="update"===n.t0?4:"end"===n.t0?4:"start"===n.t0?7:10;break;case 4:return n.next=6,r.a.awrap(d.handleUpdate(e,t));case 6:return n.abrupt("break",11);case 7:return n.next=9,r.a.awrap(d.handleStart(e,t));case 9:case 10:return n.abrupt("break",11);case 11:case"end":return n.stop()}}),null,null,null,Promise)},u=function(e){if(e.id)return new s.a(e.element,{group:{name:e.id,put:"undefined"===typeof e.groupsToDropFrom||0!==e.groupsToDropFrom.length&&e.groupsToDropFrom},swapThreshold:.65,invertSwap:"boolean"===typeof e.shouldUseInvertedSwapZones&&e.shouldUseInvertedSwapZones,sort:"boolean"!==typeof e.canSortWithinGroup||e.canSortWithinGroup,forceFallback:"boolean"!==typeof e.setForceFallback||e.setForceFallback,delay:100,delayOnTouchOnly:!0,ghostClass:e.ghostClass,dragClass:e.dragClass,draggable:e.draggableItemSelector,handle:e.handleSelector,filter:e.filteredItemSelector,animation:150,easing:"cubic-bezier(1, 0, 0, 1)",setData:function(t,n){return r.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(t.setData("text/plain",""),"function"!==typeof e.setDataHandler){i.next=4;break}return i.next=4,r.a.awrap(e.setDataHandler(t,n));case 4:case"end":return i.stop()}}),null,null,null,Promise)},onStart:e.handler,onUpdate:e.handler,onEnd:e.handler,onChoose:e.handler,onUnchoose:e.handler,onMove:e.onMoveHandler,onChange:e.handler})},d=function e(){Object(i.a)(this,e)};Object(a.a)(d,"handleStart",(function(e,t){var n,i,a,o,s,c;return r.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(n=document.querySelector(".dnd-drag-block"),i=t.item.dataset.blockid,a=t.from.dataset.blockid,i&&n&&a){l.next=5;break}return l.abrupt("return");case 5:if(o=e.getNodeById(i),s=e.getNodeById(a),o&&s){l.next=9;break}return l.abrupt("return");case 9:if(c=t.item){l.next=12;break}return l.abrupt("return");case 12:if("immersive"!==o.type&&"tour"!==o.type){l.next=15;break}return l.next=15,r.a.awrap(o.do("onDragStart"));case 15:o.states.dnd.hasDraggedPlaceholder&&d.shrinkLargeBlocks({ghostElement:c,draggedElement:n,event:t,block:o}),d.setGhostElementWidth(c,o.getLayoutSize());case 17:case"end":return l.stop()}}),null,null,null,Promise)})),Object(a.a)(d,"handleUpdate",(function(e,t){var n,i,a,o,s,c,l,p,u,h,f,y;return r.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.item.dataset.blockid,i=t.from.dataset.blockid,a=t.to.dataset.blockid,n&&i&&a){r.next=5;break}return r.abrupt("return");case 5:if("end"===t.type&&(t.item.style.width=""),o=e.getNodeById(n),s=e.getNodeById(i),c=e.getNodeById(a),s&&o&&c){r.next=11;break}return r.abrupt("return");case 11:if("number"===typeof(l=t.newIndex)){r.next=14;break}return r.abrupt("return");case 14:s.do("hasFloatGroupAsChildren")&&(l=m(o,s,l)),"story"===c.type&&(null===(u=c.getChildNodeByIndex(1))||void 0===u?void 0:null===(p=u.config)||void 0===p?void 0:p.isHidden)&&l>=1&&l++,h={srcBlock:s,targetBlock:c,itemBlock:o,insertIndex:l},"float"===o.config.size&&(delete o.config.size,c.do("deleteFloatGroupById",n),(f=document.getElementById(n))&&(y=f.parentElement)&&y.removeChild(f)),d.updateBlocks(h);case 19:case"end":return r.stop()}}),null,null,null,Promise)})),Object(a.a)(d,"updateBlocks",(function(e){var t,n,i,a;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.srcBlock,n=e.targetBlock,i=e.itemBlock,a=e.insertIndex,"story"===t.type&&e.insertIndex===t.getChildrenNodes().length-1&&(a-=1),t.removeChildById(i.id),i.states.isAssembling=!0,o.next=7,r.a.awrap(n.upsertChild(i,a));case 7:if(i.states.isAssembling=!1,t===n){o.next=11;break}return o.next=11,r.a.awrap(t.update());case 11:return o.next=13,r.a.awrap(n.update());case 13:if("embed"!==i.type&&"webmap"!==i.type&&"expressmap"!==i.type&&"swipe"!==i.type){o.next=16;break}return o.next=16,r.a.awrap(i.updateBlockComponent());case 16:if("immersive"!==i.type&&"tour"!==i.type){o.next=19;break}return o.next=19,r.a.awrap(i.do("onDragEnd"));case 19:case"end":return o.stop()}}),null,null,null,Promise)})),Object(a.a)(d,"shrinkLargeBlocks",(function(e){var t=e.block,n=e.draggedElement,i=e.ghostElement,a=e.event,o="immersive"===t.type||"tour"===t.type,r=o?t.do("getDragHandleElement"):null,s=o?t.do("getImmersiveElement"):null,p=r?r.getBoundingClientRect().top:0,u=s?s.getBoundingClientRect().top:0;if(o){var d=p-u,h=u+window.pageYOffset;window.scrollTo(0,h-d)}n.classList.add("large-block");var m=a.originalEvent.clientX,f=a.originalEvent.clientY;Object(c.b)()?n.style.marginLeft=m-n.getBoundingClientRect().left-parseInt(l.b.replace("px",""),10)+"px":n.style.marginLeft=m-n.getBoundingClientRect().left+"px";var y=i.getBoundingClientRect().top;if(n.style.marginTop="".concat(o?f-u:f-y,"px"),"image"===t.type){var g=n.getElementsByTagName("img")[0];n.style.backgroundImage="url(".concat(g.getAttribute("src"),")")}for(var v=n.firstChild;v;)n.removeChild(v),v=n.firstChild;if("embed"===t.type||"video"===t.type)n.classList.add("embed-placeholder");else if("webmap"===t.type||"expressmap"===t.type)n.classList.add("map-placeholder");else if("immersive"===t.type){var b;"slideshow"===(null===(b=t.data)||void 0===b?void 0:b.type)?n.classList.add("slideshow-placeholder"):n.classList.add("sidecar-placeholder")}else"tour"===t.type?n.classList.add("tour-placeholder"):"swipe"===t.type&&n.classList.add("swipe-placeholder")})),Object(a.a)(d,"setGhostElementWidth",(function(e,t){var n=e.firstChild;"float"===t&&(n=e.parentElement);var i=h(t,n,16);i&&(e.style.width=i)}));var h=function(e,t,n){if(t){var i=t.clientWidth;return("float"===e?1.5*i:"standard"===e?.66*i:"wide"===e?i-2*n:i)+"px"}},m=function(e,t,n){var i=e.getIndex();if(0===n)return i;for(var a=n,o=t.getChildNodeByIndex(0),r=!1,s=0;s<n;s++){if(o.id===e.id&&(r=!0),o.states.isMedia&&"float"===o.config.size){var c=t.root().do("getFloatGroupById",o.id);if(c){var l=c.childrenIds.length;a=n-i===1&&n-s===1?o.getIndex()+l:o.getIndex()+l+1}}else a=o.getIndex()+1;r&&n-s===1&&n-i!==1&&(a-=1),o=t.getChildNodeByIndex(a)}return a}},IXzc:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("YQpL"),c=n("NX3A"),l=n("bAEK"),p=n("liFR"),u=n("A7aE"),d=n("ibgV"),h=n("ijbv"),m=r.a.createElement,f=Object(o.memo)((function(e){var t=e.onClick,n=e.offset,i=e.storyDesign,r=e.intl,s=Object(o.useState)(!Object(h.b)()),u=s[0],f=s[1],y="small"===n?"2.6rem":c.a.spacing.sm;return m("div",{className:a.a.dynamic([["3561731051",[i.storyTheme.themeVariables.bodyColor,d.a,y,y]]])+" offset-icon"},m(l.a,{target:m("div",{className:a.a.dynamic([["3561731051",[i.storyTheme.themeVariables.bodyColor,d.a,y,y]]])},m(p.a,{tooltipContent:r.formatMessage({id:"builder.mediaAction.resetView.tooltip"})},m(d.b,{onClick:t}))),title:r.formatMessage({id:"builder.mediaAction.resetView.nudge.title"}),text:r.formatMessage({id:"builder.mediaAction.resetView.nudge.text"}),placement:"right",isShowing:u,onClick:function(){f(!1),Object(h.d)()}}),m(a.a,{id:"3561731051",dynamic:[i.storyTheme.themeVariables.bodyColor,d.a,y,y]},[".offset-icon.__jsx-style-dynamic-selector{color:".concat(i.storyTheme.themeVariables.bodyColor,";position:absolute;top:calc(50% - 0.5 * ").concat(d.a,");right:-").concat(y,";}"),"html[dir='rtl'] .offset-icon.__jsx-style-dynamic-selector{right:unset;left:-".concat(y,";}")]))}));t.a=Object(s.c)(Object(u.b)(f))},J9Yr:function(e,t,n){"use strict";var i=n("zQIG"),a=n("N7I1"),o=n("8mBC"),r=n("cMav"),s=n("pSQP"),c=n("I/kN"),l=n("iN+R");function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0});var u=n("ERkP"),d=!1;t.default=function(){var e,t=new Set;function n(n){e=n.props.reduceComponentsToState(l(t),n.props),n.props.handleStateChange&&n.props.handleStateChange(e)}return function(l){c(m,l);var u,h=(u=m,function(){var e,t=s(u);if(p()){var n=s(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return r(this,e)});function m(e){var o;return i(this,m),o=h.call(this,e),d&&(t.add(a(o)),n(a(o))),o}return o(m,null,[{key:"rewind",value:function(){var n=e;return e=void 0,t.clear(),n}}]),o(m,[{key:"componentDidMount",value:function(){t.add(this),n(this)}},{key:"componentDidUpdate",value:function(){n(this)}},{key:"componentWillUnmount",value:function(){t.delete(this),n(this)}},{key:"render",value:function(){return null}}]),m}(u.Component)}},JZSJ:function(e,t,n){"use strict";n.r(t),n.d(t,"StoryViewer",(function(){return j}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("iSuU"),f=n("A7aE"),y=n("KO1s"),g=n("+L/X"),v=n("72yd"),b=n("AuFC"),x=n("NX3A"),O=h.a.createElement;function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var j=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(w()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"updateStoryLogo",(function(){if(t.props.storyLogo&&t.props.storyLogo.resource){var e=t.props.storyLogo.resource.getImageItemId(),n=e?t.props.storyItem.getItemResourceImageFullUrl(e,200):t.props.storyLogo.resource.getImageUrl();t.props.storyContext.updateStoryContext({storyLogo:{src:n,alt:t.props.storyLogo.altText,link:t.props.storyLogo.link}})}else t.props.storyContext.updateStoryContext({storyLogo:void 0})})),t.storyRef=Object(d.createRef)(),t}return Object(a.a)(p,[{key:"componentDidMount",value:function(){this.updateStoryLogo(),"function"===typeof this.props.setRef&&this.props.setRef(this.storyRef)}},{key:"componentDidUpdate",value:function(e){this.props.storyLogo!==e.storyLogo&&this.updateStoryLogo()}},{key:"render",value:function(){var e=m.b[this.props.themeVariables.titleFontId],t=m.b[this.props.themeVariables.bodyFontId],n=this.props.themeVariables,i=n.backgroundColor,a=n.background,o={storyTheme:{themeVariables:this.props.themeVariables}};return O(f.a.Provider,{value:o},O("article",{"data-blockid":this.props.blockId,ref:this.storyRef,className:u.a.dynamic([["872100298",[this.props.shouldHaveBottomSpacing?v.g:"0",this.props.themeVariables.mixins.getBackgroundCSS(a),i,this.props.themeVariables.accentColor1,x.a.print.textColor,x.a.print.backgroundColor]]])+" story"},O(e,{baseUrl:this.props.config.BASE_URL,key:"".concat(this.props.themeVariables.titleFontId,"-title"),className:u.a.dynamic([["872100298",[this.props.shouldHaveBottomSpacing?v.g:"0",this.props.themeVariables.mixins.getBackgroundCSS(a),i,this.props.themeVariables.accentColor1,x.a.print.textColor,x.a.print.backgroundColor]]])}),O(t,{baseUrl:this.props.config.BASE_URL,key:"".concat(this.props.themeVariables.bodyFontId,"-body"),className:u.a.dynamic([["872100298",[this.props.shouldHaveBottomSpacing?v.g:"0",this.props.themeVariables.mixins.getBackgroundCSS(a),i,this.props.themeVariables.accentColor1,x.a.print.textColor,x.a.print.backgroundColor]]])}),this.props.children,O(u.a,{id:"872100298",dynamic:[this.props.shouldHaveBottomSpacing?v.g:"0",this.props.themeVariables.mixins.getBackgroundCSS(a),i,this.props.themeVariables.accentColor1,x.a.print.textColor,x.a.print.backgroundColor]},[".story.__jsx-style-dynamic-selector{padding-bottom:".concat(this.props.shouldHaveBottomSpacing?v.g:"0",";}"),"body{".concat(this.props.themeVariables.mixins.getBackgroundCSS(a),";background-color:").concat(i,";}"),"*:focus{outline-color:".concat(this.props.themeVariables.accentColor1,";}"),"body.print{background-color:#f2f2f2;background:#f2f2f2;color:".concat(x.a.print.textColor,";}"),"@media print{body.print{background-color:".concat(x.a.print.backgroundColor,";}}")])))}}]),p}(d.Component);Object(l.a)(j,"defaultProps",{shouldHaveBottomSpacing:!1}),t.default=Object(b.c)(Object(g.a)(Object(y.a)(j)))},K16L:function(e,t,n){"use strict";var i,a,o,r;n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return r})),function(e){e.Small="small",e.Large="large",e.Continuous="continuous"}(i||(i={})),function(e){e.Color1="color1",e.Color2="color2",e.Color3="color3",e.Color4="color4"}(a||(a={})),function(e){e.ThemeColor1="themeColor1",e.ThemeColor2="themeColor2",e.ThemeColor3="themeColor3",e.BackgroundColor="backgroundColor",e.TitleColor="titleColor",e.AccentColor1="accentColor1"}(o||(o={})),function(e){e.LineTypeId="LineTypeId",e.ThemeColorId="ThemeColorId"}(r||(r={}))},K98y:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"arrow-right",path:"M22.41 18H3v-4h19.41l-6.797-6.797.202-.203h4.627l9 9-9 9h-4.627l-.202-.201z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},KMip:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var i=n("T+qs"),a=function(e,t){e.mapView.goTo({center:t},{duration:750,easing:"ease-in-out"})},o=function(e,t){var n=e.jsonUtils.fromJSON(t);(function(e,t){return e.mapView.extent.contains(t)})(e,n)||a(e,[t.x,t.y])},r=function(e,t){var n=Object(i.e)(e);a({mapView:t},n)}},KO1s:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("ERkP"),p=n.n(l),u=n("zbcS"),d=p.a.createElement;function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){return function(t){Object(c.a)(p,t);var n,l=(n=p,function(){var e,t=Object(s.a)(n);if(h()){var i=Object(s.a)(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Object(r.a)(this,e)});function p(){return Object(a.a)(this,p),l.apply(this,arguments)}return Object(o.a)(p,[{key:"render",value:function(){var t=this;return d(u.a.Consumer,null,(function(n){return d(e,Object(i.a)({},t.props,{storyContext:n}))}))}}]),p}(l.PureComponent)}},KaQd:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){var t=e.entries,n=e.node,i=e.callback;t.forEach((function(e){if(e.target===n){var t=e.boundingClientRect.bottom<=0,a=e.isIntersecting||t;i(a)}}))}},Kec5:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b"),s=n("ERkP"),c=n.n(s),l=n("MEC2"),p=c.a.createElement;function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var d=function(e){Object(r.a)(s,e);var t,n=(t=s,function(){var e,n=Object(o.a)(t);if(u()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function s(e){Object(i.a)(this,s);var t={iconName:"premium-content",path:"",viewBox:"0 0 15 16",children:function(){return p("g",null,p("path",{d:"M6.99666362 16c-.0938668 0-.18609791-.0245145-.26731062-.0714706C-.96919289 11.4932833.03803353 1.64038101.04872596 1.5401133c.0201949-.17274361.12354879-.32481497.2769338-.4074709.15383016-.08258738.33812807-.08616125.49505927-.0096001 1.97552219.82698005 4.25251248.43583939 5.83699472-1.00267708.199772-.16286841.48763917-.16017613.68431519.00640007 1.9428136 1.64268372 3.85034216 1.96695376 5.83485626.99414366.1564227-.07688346.3406017-.0728318.4934751.01085572.1528733.08368751.2552279.236493.274241.40941531.1393673 1.77378958.0154241 3.55838765-.3678194 5.296055-.0403014.18635167-.1771979.33709876-.3591219.39545629-.181924.05835754-.3812369.01545963-.5228596-.1125345-.1416226-.12799413-.2040391-.32163913-.1637377-.5079908.2966502-1.38847396.4283612-2.80696848.392412-4.22617722-2.0443958.71544641-4.31698391.26692093-5.93429578-1.17121216-1.67368359 1.30672147-3.87537294 1.7302833-5.91611866 1.13814515-.06094683 2.22508977.24699501 9.22782916 6.19091398 12.65079806.21067396.1202296.31372888.3669491.2509728.6008434-.06275608.2338943-.27557459.396268-.51828342.3954368z"}),p("path",{d:"M10.5 16C8.01471863 16 6 13.9852814 6 11.5 6 9.01471863 8.01471863 7 10.5 7c2.4852814 0 4.5 2.01471863 4.5 4.5-.0030992 2.4839965-2.0160035 4.4969008-4.5 4.5zm0-7.8c-1.82253967 0-3.3 1.47746033-3.3 3.3 0 1.8225397 1.47746033 3.3 3.3 3.3 1.8225397 0 3.3-1.4774603 3.3-3.3-.0018191-1.82178566-1.4782143-3.29818094-3.3-3.3z"}))}};return n.call(this,e,t)}return s}(l.a)},L5sG:function(e,t,n){"use strict";var i=n("ERkP"),a=n.n(i),o=n("Q2nK"),r=a.a.createElement;t.a=function(e){var t=e.visible,n=e.className;return t?r(o.a,{className:n}):null}},LJBs:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var i=n("t7DY"),a=n("K16L"),o=function(e){switch(e){case a.c.Color2:return{textColor:"titleColor",backgroundColor:"backgroundColor"};case a.c.Color3:return{textColor:"bodyColorLight",backgroundColor:"transparent"};case a.c.Color4:return{textColor:"bodyColorDark",backgroundColor:"transparent"};default:return{textColor:"backgroundColor",backgroundColor:"titleColor"}}},r=function(e){if(void 0!==e.styles){if(e.type===i.j.TEXT_LEADERLINE){var t=e.styles,n={};return t.textColor&&t.backgroundColor&&"backgroundColor"!==t.textColor&&"titleColor"!==t.backgroundColor&&(n.textColor=t.textColor,n.backgroundColor=t.backgroundColor),t.lineDash&&t.lineDash!==a.a.Continuous&&(n.lineDash=t.lineDash),n}if(e.type===i.j.ARROW_DOUBLE||e.type===i.j.ARROW_SINGLE){var o=e.styles,r={};return o.color&&o.color!==a.d.TitleColor&&(r.color=o.color),o.lineDash&&o.lineDash!==a.a.Continuous&&(r.lineDash=o.lineDash),r}}}},Lf33:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("NX3A"),g=n("Z4N4"),v=h.a.createElement;function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var x=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(b()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"getPadding",(function(){switch(e.props.padding){case"none":return"0";case"vertical":return"".concat(y.a.spacing.xxs," 0");case"horizontal":return"0 ".concat(y.a.spacing.xxs);default:return"".concat(y.a.spacing.xxs," ").concat(y.a.spacing.xxs)}})),e}return Object(a.a)(p,[{key:"render",value:function(){return v("div",{onBlur:this.props.onBlur,className:u.a.dynamic([["1302138593",[y.a.color.white,g.a.shadow.sm(),y.a.color.warmBlack]],["3774311883",[this.props.fullWidth?"100%":"fit-content",!this.props.fullWidth&&this.props.hasLimitedWidth?"300px":"none",this.getPadding(),this.props.maxHeight?"max-height: ".concat(this.props.maxHeight,"; overflow: auto;"):""]]])+" "+(f()("dropdown-menu",this.props.flavor,this.props.className)||"")},v(u.a,{id:"1302138593",dynamic:[y.a.color.white,g.a.shadow.sm(),y.a.color.warmBlack]},[".dropdown-menu.__jsx-style-dynamic-selector{min-width:21.2rem;word-break:break-word;background-color:".concat(y.a.color.white,";").concat(g.a.shadow.sm(),";}"),".dark.__jsx-style-dynamic-selector{background-color:".concat(y.a.color.warmBlack,";}")]),v(u.a,{id:"3774311883",dynamic:[this.props.fullWidth?"100%":"fit-content",!this.props.fullWidth&&this.props.hasLimitedWidth?"300px":"none",this.getPadding(),this.props.maxHeight?"max-height: ".concat(this.props.maxHeight,"; overflow: auto;"):""]},[".dropdown-menu.__jsx-style-dynamic-selector{width:".concat(this.props.fullWidth?"100%":"fit-content",";max-width:").concat(!this.props.fullWidth&&this.props.hasLimitedWidth?"300px":"none",";padding:").concat(this.getPadding(),";").concat(this.props.maxHeight?"max-height: ".concat(this.props.maxHeight,"; overflow: auto;"):"",";}")]),this.props.children)}}]),p}(d.PureComponent);Object(l.a)(x,"defaultProps",{hasLimitedWidth:!0,padding:"vertical",flavor:"light"});var O=x,w=h.a.createElement;function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var C=function(e){Object(c.a)(o,e);var t,n=(t=o,function(){var e,n=Object(s.a)(t);if(j()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function o(){return Object(i.a)(this,o),n.apply(this,arguments)}return Object(a.a)(o,[{key:"render",value:function(){return w("div",{className:u.a.dynamic([["2321707478",[g.d(),1===h.a.Children.count(this.props.children)?1:2,Math.ceil(h.a.Children.count(this.props.children)/2)]]])+" dropdown-menu-section"},w(u.a,{id:"2321707478",dynamic:[g.d(),1===h.a.Children.count(this.props.children)?1:2,Math.ceil(h.a.Children.count(this.props.children)/2)]},[".dropdown-menu-section.__jsx-style-dynamic-selector{margin:1.5rem 0;}",".dropdown-menu-section-title.__jsx-style-dynamic-selector{padding:0 0 1rem;".concat(g.d(),";}"),".dropdown-menu-section-content.__jsx-style-dynamic-selector{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:grid;grid-column-gap:2rem;grid-template-columns:repeat( ".concat(1===h.a.Children.count(this.props.children)?1:2,", 1fr );grid-template-rows:repeat( ").concat(Math.ceil(h.a.Children.count(this.props.children)/2),", 1fr );grid-auto-flow:column;}")]),this.props.title&&w("div",{className:u.a.dynamic([["2321707478",[g.d(),1===h.a.Children.count(this.props.children)?1:2,Math.ceil(h.a.Children.count(this.props.children)/2)]]])+" dropdown-menu-section-title"},this.props.title),w("div",{className:u.a.dynamic([["2321707478",[g.d(),1===h.a.Children.count(this.props.children)?1:2,Math.ceil(h.a.Children.count(this.props.children)/2)]]])+" dropdown-menu-section-content"},this.props.children))}}]),o}(d.PureComponent);Object(l.a)(C,"defaultProps",{title:""});var k=C,S=n("cxan"),I=n("txt0"),P=h.a.createElement;function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var E=function(e){Object(c.a)(o,e);var t,n=(t=o,function(){var e,n=Object(s.a)(t);if(R()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function o(e){var t;return Object(i.a)(this,o),(t=n.call(this,e)).element=Object(d.createRef)(),t}return Object(a.a)(o,[{key:"componentDidMount",value:function(){var e=this.props.trackingName&&this.props.trackingContent,t=this.props.link&&this.props.link.trackingName&&this.props.link.trackingContent;(e||t)&&this.element.current&&I.a.trackWithinElement(this.element.current)}},{key:"render",value:function(){var e=this.props.link||this.props.href?"a":"button",t=this.props.href?{href:this.props.href,onClick:this.props.onClick}:this.props.link?{href:this.props.href||this.props.link.href,rel:this.props.link.openInNewPage&&!this.props.link.allowUnsafeOpenerAccess?"noreferrer noopener":void 0,target:this.props.link.openInNewPage?"_blank":void 0,onClick:this.props.onClick}:{type:"button",onClick:this.props.onClick,disabled:this.props.isDisabled};this.props.link&&this.props.link.trackingName&&this.props.link.trackingContent?(t["data-track-content"]=!0,t["data-content-name"]=this.props.link.trackingName,t["data-content-piece"]=this.props.link.trackingContent):this.props.trackingName&&this.props.trackingContent&&(t["data-track-content"]=!0,t["data-content-name"]=this.props.trackingName,t["data-content-piece"]=this.props.trackingContent);var n=f()("dropdown-menu-item",this.props.flavor,{selected:this.props.isSelected,disabled:this.props.isDisabled,"full-width":this.props.isFullWidth},this.props.className),i=y.a.color,a=y.a.spacing;return P(e,Object(S.a)({onBlur:this.props.onBlur},t,{ref:this.element,className:u.a.dynamic([["2612384965",[y.a.spacing.xxxxs,a.xxxs,a.xxs,this.props.maxHeight,this.props.isBold?g.a.typography.h6():g.a.typography.body14(),this.props.isItalic?"italic":"normal",g.a.gapped("column",a.xxxs),i.coolGrey,i.darkGreen,i.warmBlack,Object(g.b)(),i.emeraldGreen,i.emeraldGreen,this.props.isDangerous?i.alertRed:this.props.isSelected?i.darkGreen:i.cadet,this.props.isDangerous?i.alertRed:i.antiFlashWhite]]])+" "+(t&&null!=t.className&&t.className||n||"")}),P(u.a,{id:"2612384965",dynamic:[y.a.spacing.xxxxs,a.xxxs,a.xxs,this.props.maxHeight,this.props.isBold?g.a.typography.h6():g.a.typography.body14(),this.props.isItalic?"italic":"normal",g.a.gapped("column",a.xxxs),i.coolGrey,i.darkGreen,i.warmBlack,Object(g.b)(),i.emeraldGreen,i.emeraldGreen,this.props.isDangerous?i.alertRed:this.props.isSelected?i.darkGreen:i.cadet,this.props.isDangerous?i.alertRed:i.antiFlashWhite]},[".dropdown-menu-item.__jsx-style-dynamic-selector{border:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;padding:calc(".concat(y.a.spacing.xxxxs," + ").concat(a.xxxs,") ").concat(a.xxs,";max-height:").concat(this.props.maxHeight,";background-color:transparent;position:relative;").concat(this.props.isBold?g.a.typography.h6():g.a.typography.body14(),";font-style:").concat(this.props.isItalic?"italic":"normal",";-webkit-transition:background-color 0.15s ease-out;transition:background-color 0.15s ease-out;text-align:left;-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"),"html[dir='rtl'] .dropdown-menu-item.__jsx-style-dynamic-selector{text-align:right;}","button.dropdown-menu-item.__jsx-style-dynamic-selector{width:100%;}",".full-width.__jsx-style-dynamic-selector{padding-left:0;padding-right:0;}",".__jsx-style-dynamic-selector:not(.full-width) .dropdown-menu-item-content.__jsx-style-dynamic-selector{".concat(g.a.gapped("column",a.xxxs)," justify-content:start;min-width:18rem;}"),".full-width.__jsx-style-dynamic-selector .dropdown-menu-item-content.__jsx-style-dynamic-selector{min-width:100%;}",".dropdown-menu-item-icon-wrapper.__jsx-style-dynamic-selector{width:20px;height:20px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".dropdown-menu-item.disabled.__jsx-style-dynamic-selector{opacity:0.5;cursor:not-allowed;}",".dropdown-menu-item.disabled.__jsx-style-dynamic-selector .dropdown-menu-item-text.__jsx-style-dynamic-selector{color:".concat(i.coolGrey,";}"),".dark.dropdown-menu-item.selected.__jsx-style-dynamic-selector{background-color:".concat(i.darkGreen,";box-shadow:inset 0 0 0 1px ").concat(i.warmBlack,";}"),".light.dropdown-menu-item.__jsx-style-dynamic-selector:hover{".concat(Object(g.b)(),";}"),".dark.dropdown-menu-item.__jsx-style-dynamic-selector:hover{background-color:".concat(i.emeraldGreen,";}"),".dark.dropdown-menu-item.__jsx-style-dynamic-selector:focus{outline:0;box-shadow:inset 0 0 0 2px ".concat(i.emeraldGreen,";}"),".light.__jsx-style-dynamic-selector .dropdown-menu-item-text.__jsx-style-dynamic-selector{color:".concat(this.props.isDangerous?i.alertRed:this.props.isSelected?i.darkGreen:i.cadet,";}"),".dark.__jsx-style-dynamic-selector .dropdown-menu-item-text.__jsx-style-dynamic-selector{color:".concat(this.props.isDangerous?i.alertRed:i.antiFlashWhite,";}")]),P("div",{className:u.a.dynamic([["2612384965",[y.a.spacing.xxxxs,a.xxxs,a.xxs,this.props.maxHeight,this.props.isBold?g.a.typography.h6():g.a.typography.body14(),this.props.isItalic?"italic":"normal",g.a.gapped("column",a.xxxs),i.coolGrey,i.darkGreen,i.warmBlack,Object(g.b)(),i.emeraldGreen,i.emeraldGreen,this.props.isDangerous?i.alertRed:this.props.isSelected?i.darkGreen:i.cadet,this.props.isDangerous?i.alertRed:i.antiFlashWhite]]])+" dropdown-menu-item-content"},this.props.icon&&P("div",{className:u.a.dynamic([["2612384965",[y.a.spacing.xxxxs,a.xxxs,a.xxs,this.props.maxHeight,this.props.isBold?g.a.typography.h6():g.a.typography.body14(),this.props.isItalic?"italic":"normal",g.a.gapped("column",a.xxxs),i.coolGrey,i.darkGreen,i.warmBlack,Object(g.b)(),i.emeraldGreen,i.emeraldGreen,this.props.isDangerous?i.alertRed:this.props.isSelected?i.darkGreen:i.cadet,this.props.isDangerous?i.alertRed:i.antiFlashWhite]]])+" dropdown-menu-item-icon-wrapper"},"string"===typeof this.props.icon?P("img",{src:this.props.icon,alt:"",role:"presentation",className:u.a.dynamic([["2612384965",[y.a.spacing.xxxxs,a.xxxs,a.xxs,this.props.maxHeight,this.props.isBold?g.a.typography.h6():g.a.typography.body14(),this.props.isItalic?"italic":"normal",g.a.gapped("column",a.xxxs),i.coolGrey,i.darkGreen,i.warmBlack,Object(g.b)(),i.emeraldGreen,i.emeraldGreen,this.props.isDangerous?i.alertRed:this.props.isSelected?i.darkGreen:i.cadet,this.props.isDangerous?i.alertRed:i.antiFlashWhite]]])}):this.props.icon),P("div",{className:u.a.dynamic([["2612384965",[y.a.spacing.xxxxs,a.xxxs,a.xxs,this.props.maxHeight,this.props.isBold?g.a.typography.h6():g.a.typography.body14(),this.props.isItalic?"italic":"normal",g.a.gapped("column",a.xxxs),i.coolGrey,i.darkGreen,i.warmBlack,Object(g.b)(),i.emeraldGreen,i.emeraldGreen,this.props.isDangerous?i.alertRed:this.props.isSelected?i.darkGreen:i.cadet,this.props.isDangerous?i.alertRed:i.antiFlashWhite]]])+" dropdown-menu-item-text"},this.props.children)))}}]),o}(d.PureComponent);Object(l.a)(E,"defaultProps",{isDangerous:!1,isBold:!1,isItalic:!1,maxHeight:"4rem",flavor:"light",isSelected:!1,isDisabled:!1,isFullWidth:!1});var D=E,T=h.a.createElement;function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var A=function(e){Object(c.a)(o,e);var t,n=(t=o,function(){var e,n=Object(s.a)(t);if(M()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function o(){return Object(i.a)(this,o),n.apply(this,arguments)}return Object(a.a)(o,[{key:"render",value:function(){return T("div",{className:u.a.dynamic([["2174101928",[y.a.spacing.xxxs,y.a.color.beauBlue]]])+" dropdown-menu-divider"},T(u.a,{id:"2174101928",dynamic:[y.a.spacing.xxxs,y.a.color.beauBlue]},[".dropdown-menu-divider.__jsx-style-dynamic-selector{position:relative;padding:".concat(y.a.spacing.xxxs,";}"),".dropdown-menu-divider.__jsx-style-dynamic-selector::after{position:absolute;content:'';top:50%;left:0;width:100%;height:1px;background-color:".concat(y.a.color.beauBlue,";opacity:0.3;}")]))}}]),o}(d.PureComponent);O.Section=k,O.Item=D,O.Divider=A;t.a=O},LqVs:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var i=n("cxan"),a=n("HbGN"),o=n("ERkP"),r=n.n(o).a.createElement,s=Object(o.createContext)(null),c=function(e){var t=e.children,n=Object(a.a)(e,["children"]);return r(s.Provider,{value:n},t)},l=function(e){return function(t){return r(s.Consumer,null,(function(n){return r(e,Object(i.a)({},t,n))}))}}},LuYe:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"search",path:"M29.385 27.97l-8.643-8.642a10 10 0 1 0-1.414 1.414l8.643 8.643zM7.343 18.656a8 8 0 1 1 11.314 0 8 8 0 0 1-11.314 0z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},M6On:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("zjfJ"),l=n("yFcC"),p=n.n(l),u=n("ERkP"),d=n.n(u),h=n("xWUc"),m=d.a.createElement;function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(f()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return m("div",{className:"jsx-1984071401 with-background-media-toolbar"},this.props.children,!this.props.isToolbarHidden&&m(h.b,this.props),m(p.a,{id:"1984071401"},[".with-background-media-toolbar.jsx-1984071401{position:relative;height:100%;width:100%;}"]))}}]),c}(u.PureComponent);Object(c.a)(y,"defaultProps",{isToolbarHidden:!1}),t.a=y},MHYw:function(e,t,n){"use strict";n.d(t,"d",(function(){return y})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return v}));var i=n("VtSi"),a=n.n(i),o=n("9fIP"),r=n("zjfJ"),s=n("7xIC"),c=n.n(s),l=n("x2Ad"),p=n("7sDT"),u=n("8nAU"),d=n("Z34l"),h=n("fd07"),m=n("EP0r"),f=n("s4SP"),y=function(e){var t=e.userSession,n=e.error,i=e.signInUrl,a=e.config,o=e.ctx,r=function(e){Object(m.b)({ctx:o,asPath:"".concat(a.BASE_URL).concat(e),href:e})};if(n&&n.code)switch(n.code){case"GWM_0003":t&&t.token?r("/error?errType=story-inaccessible"):Object(m.b)({ctx:o,href:i,isExternal:!0});break;case"CONT_0001":r("/error?errType=story-inaccessible");break;default:r("/error?errType=story-load")}else r("/error?errType=story-load")},g=function(e){var t=e.itemId,n=e.storyUrl,i=e.config,a=i.REPORT_ABUSE_EMAIL,o="I have concerns about the following StoryMap.\n\nStoryMap: ".concat(n,"\nItem page: https://").concat(i.PORTAL_HOST,"/home/item.html?id=").concat(t,"\n\n(Please describe your concerns with this StoryMap below.)");return"mailto:".concat(a,"?subject=").concat(encodeURIComponent("Concerns about a StoryMap"),"&body=").concat(encodeURIComponent(o))},v=function(e){var t=!!e.id;return e.isPortal?e.portalHostname:t&&e.customBaseUrl?e.customBaseUrl:e.portalHostname};t.a=function e(t){var n=this;Object(o.a)(this,e),Object(r.a)(this,"check",{browser:function(){var e="",t=n.getConfig();if(!t)throw new Error;var i=n.getNextPageCtx();if("undefined"!==typeof i){var a=i.req;a&&a.headers&&a.headers["user-agent"]&&(e=a.headers["user-agent"])}else e=window.navigator.userAgent;return"undefined"!==typeof i&&i.asPath&&i.asPath.includes("/unsupported-browser")||window.location.pathname.includes("/unsupported-browser")?{isUnsupported:!0,willRedirect:!1}:function(e){return!!e&&!!/Trident\/\d+/i.test(e)}(e)?(Object(m.b)({ctx:i,href:"/unsupported-browser",asPath:"".concat(t.BASE_URL,"/unsupported-browser")}),{isUnsupported:!0,willRedirect:!0}):{isUnsupported:!1,willRedirect:!1}},portal:function(){var e,t,i;return a.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e=n.getConfig()){o.next=3;break}throw new Error;case 3:if(t=n.getNextPageCtx(),n.getUserSession()){o.next=7;break}return o.abrupt("return",!0);case 7:if(i=n.getPortalSelfResponse(),o.t0=i,!o.t0){o.next=15;break}return o.t1=e.PORTAL_HOST,o.next=13,a.a.awrap(i);case 13:o.t2=o.sent.portalHostname,o.t0=o.t1!==o.t2;case 15:if(!o.t0){o.next=24;break}return o.t3=m.b,o.t4=t,o.next=20,a.a.awrap(n.getSignInUrl());case 20:return o.t5=o.sent,o.t6={ctx:o.t4,href:o.t5,isExternal:!0},(0,o.t3)(o.t6),o.abrupt("return",!1);case 24:return o.abrupt("return",!0);case 25:case"end":return o.stop()}}),null,null,null,Promise)},auth:function(){var e,t,i,o;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=n.getConfig()){r.next=3;break}throw new Error;case 3:if(t=n.getNextPageCtx(),i=n.getUserSession()){r.next=14;break}return r.t0=m.b,r.t1=t,r.next=10,a.a.awrap(n.getSignInUrl());case 10:return r.t2=r.sent,r.t3={ctx:r.t1,href:r.t2,isExternal:!0},(0,r.t0)(r.t3),r.abrupt("return",!1);case 14:return r.prev=14,r.next=17,a.a.awrap(h.h(i,e));case 17:return o=r.sent,r.next=20,a.a.awrap(n.check.portal());case 20:if(r.sent){r.next=30;break}return r.t4=m.b,r.t5=t,r.next=26,a.a.awrap(n.getSignInUrl());case 26:return r.t6=r.sent,r.t7={ctx:r.t5,href:r.t6,isExternal:!0},(0,r.t4)(r.t7),r.abrupt("return",!1);case 30:if(o){r.next=33;break}return Object(m.b)({ctx:t,href:"/error?errType=unsupported-account",asPath:"".concat(e.BASE_URL,"/error?errType=unsupported-account")}),r.abrupt("return",!1);case 33:r.next=39;break;case 35:return r.prev=35,r.t8=r.catch(14),Object(m.b)({ctx:t,href:"/error",asPath:"".concat(e.BASE_URL,"/error")}),r.abrupt("return",!1);case 39:return r.abrupt("return",!0);case 40:case"end":return r.stop()}}),null,null,[[14,35]],Promise)}}),Object(r.a)(this,"setPageData",(function(e){n.pageData=e})),Object(r.a)(this,"getPageData",(function(){return n.pageData})),Object(r.a)(this,"getPageContext",(function(){var e,t,i;return a.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=n.getConfig(),o.next=3,a.a.awrap(n.getPortalSelfResponse());case 3:return t=o.sent,o.next=6,a.a.awrap(n.getSignInUrl());case 6:return o.t0=o.sent,o.t1=e,o.t2=Object(f.b)().locale,o.t3=n.getUserSession(),o.next=12,a.a.awrap(n.getPrivileges());case 12:return o.t4=o.sent,o.t5=n.getAllQuery(),o.t6=n.getOrigin(),o.t7=Object(p.b)({config:e,portal:t}),o.t8={isPortal:!!t.isPortal,isStatic:Object(u.a)()},i={signInUrl:o.t0,config:o.t1,locale:o.t2,userSession:o.t3,storyMapUserPrivileges:o.t4,query:o.t5,origin:o.t6,featureDecisions:o.t7,environment:o.t8},o.abrupt("return",i);case 19:case"end":return o.stop()}}),null,null,null,Promise)})),Object(r.a)(this,"getConfig",(function(){if(!n.pageData.config)throw new Error("config not ready");return n.pageData.config})),Object(r.a)(this,"setConfig",(function(e){var t=function(e){return!0===e||"true"===e};n.pageData.config=e,n.pageData.config&&(n.pageData.config.SITE_ORIGIN||(n.pageData.config.SITE_ORIGIN=n.getOrigin()),Object(u.a)()&&(n.pageData.config.BASE_URL="",n.pageData.config.OAUTH_CLIENT_ID="arcgisstorymaps",n.pageData.config.COLLECTION_ITEM_LIMIT=parseInt(30,10),n.pageData.config.APP_VERSION="20.3.0",n.pageData.config.ESRI_OVERVIEW_LINK="https://www.esri.com/en-us/arcgis/products/arcgis-storymaps/overview",n.pageData.config.SITE_URL="https://storymapsdev.arcgis.com",n.pageData.config.REPORT_ABUSE_EMAIL="arcgisonline_feedback@esri.com",n.pageData.config.LIVING_ATLAS_MAP_GROUP_ID_FREE="d2f34a39a35b4d67b30f4cfa87d6d095",n.pageData.config.YOUTUBE_API_KEY="AIzaSyDevTFP16nz6sA-akiOVi6wWXiplJnQ4qw",n.pageData.config.IS_PORTAL=t(!1),n.pageData.config.ENABLE_LAB_FEATURES=t(!1),n.pageData.config.ENABLE_ESRI_ACCESS=t(!0),n.pageData.config.ENABLE_CLASSIC_ACCESS=t(!0),n.pageData.config.ENABLE_REPORT_ABUSE=t(!0),n.pageData.config.ENABLE_SWITCH_ACCOUNTS=t(!0),n.pageData.config.ENABLE_LA_CALLOUT=t(!0),n.pageData.config.ENABLE_SOCIAL_SHARING=t(!0),n.pageData.config.ENABLE_COLLECTION_PREVIEW=t(!0),n.pageData.config.ENABLE_COLLECTION_TYPES_NEW=t(!0),n.pageData.config.ENABLE_EXPRESS_MAP_DUPLICATION=t(!1),n.pageData.config.ENABLE_SWIPE_IMAGES=t(!1)))})),Object(r.a)(this,"setNextPageCtx",(function(e){n.pageData.ctx=e})),Object(r.a)(this,"getNextPageCtx",(function(){return n.pageData.ctx})),Object(r.a)(this,"getOrigin",(function(){var e=n.getNextPageCtx();if("undefined"!==typeof e){var t=e.req;if(t&&t.headers)return"https://".concat(t.headers.host)}return"https://".concat(window.location.host)})),Object(r.a)(this,"setRawCookie",(function(e){n.pageData.rawCookie=e})),Object(r.a)(this,"removeRawCookie",(function(){n.pageData.rawCookie=void 0})),Object(r.a)(this,"getRawCookie",(function(){if(n.pageData.rawCookie)return n.pageData.rawCookie;var e="",t=n.getNextPageCtx();if("undefined"!==typeof t){var i=t.req;i&&i.headers&&i.headers.cookie&&(e=i.headers.cookie)}return e||"undefined"===typeof document||(e=document.cookie),e})),Object(r.a)(this,"getPathname",(function(){var e=n.getNextPageCtx();return"undefined"!==typeof e?e.asPath:window.location.pathname})),Object(r.a)(this,"getAllQuery",(function(){var e=n.getNextPageCtx();if("undefined"!==typeof e)return e.query;var t=c.a.router;return t&&t.query?t.query:{}})),Object(r.a)(this,"getQuery",(function(e){var t=n.getNextPageCtx();if("undefined"!==typeof t)return t.query[e];var i=c.a.router;return i&&i.query?i.query[e]:""})),Object(r.a)(this,"getUserSession",(function(){if(n.hasAuthCookie()){if(n.pageData.userSession)return n.pageData.userSession;var e=h.g(n.getRawCookie()),t=n.getConfig();return n.pageData.userSession=e?h.a({userCookie:e,portalHost:t.PORTAL_HOST,isPortal:t.IS_PORTAL}):void 0,n.pageData.userSession}})),Object(r.a)(this,"getPortalSelfResponse",(function(){var e,t;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(!n.pageData.portalSelfResponse){i.next=2;break}return i.abrupt("return",n.pageData.portalSelfResponse);case 2:if(e=n.getConfig()){i.next=5;break}throw new Error;case 5:return t=e.PORTAL_HOST,i.next=8,a.a.awrap(Object(l.a)(Object(d.d)(t,n.getUserSession())));case 8:return n.pageData.portalSelfResponse=i.sent,i.abrupt("return",n.pageData.portalSelfResponse);case 10:case"end":return i.stop()}}),null,null,null,Promise)})),Object(r.a)(this,"getPrivileges",(function(){var e,t,i;return a.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!n.pageData.privileges){o.next=2;break}return o.abrupt("return",n.pageData.privileges);case 2:if(e=n.getUserSession(),t=n.getConfig()){o.next=6;break}throw new Error;case 6:return i=t.PORTAL_HOST,o.t0=a.a,o.t1=d.f,o.t2=e||null,o.t3=i,o.next=13,a.a.awrap(n.getPortalSelfResponse());case 13:return o.t4=o.sent,o.t5=(0,o.t1)(o.t2,o.t3,o.t4),o.next=17,o.t0.awrap.call(o.t0,o.t5);case 17:return n.pageData.privileges=o.sent,o.abrupt("return",n.pageData.privileges);case 19:case"end":return o.stop()}}),null,null,null,Promise)})),Object(r.a)(this,"getSignInUrl",(function(){var e,t,i,o,r,s,c;return a.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(!n.pageData.signInUrl){l.next=2;break}return l.abrupt("return",n.pageData.signInUrl);case 2:if(e=n.getConfig()){l.next=5;break}throw new Error;case 5:if(t=n.getOrigin(),i=Object(m.a)(n.getPathname(),n.getConfig().BASE_URL),o=n.getUserSession(),r=n.getQuery("urlKey"),!o&&!r){l.next=15;break}return l.t0=v,l.next=13,a.a.awrap(n.getPortalSelfResponse());case 13:l.t1=l.sent,s=(0,l.t0)(l.t1);case 15:return c="string"===typeof r&&"string"===typeof s?{customBaseUrl:s,urlKey:r}:void 0,n.pageData.signInUrl=h.e({origin:t,config:e,relativeUrl:i,urlKeyProps:c}),l.abrupt("return",n.pageData.signInUrl);case 18:case"end":return l.stop()}}),null,null,null,Promise)})),Object(r.a)(this,"hasAuthCookie",(function(){var e=n.getRawCookie();return!!e&&!!h.g(e)})),this.pageData={userSession:void 0,userCookie:void 0,signInUrl:void 0,portalSelfResponse:void 0,privileges:void 0,locale:"en-US"},t&&this.setNextPageCtx(t)}},MKkT:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"pin",path:"M15.5 0C10.806 0 7 1.817 7 6.543v16.901L15.5 32l8.5-8.556V6.543C24 1.817 20.194 0 15.5 0zm0 15.1a4.6 4.6 0 1 1 4.6-4.6 4.599 4.599 0 0 1-4.6 4.6z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},MmJo:function(e,t,n){"use strict";var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("Z4N4"),g=n("NX3A"),v=n("33+R"),b=n("0xoW"),x=n("X/3D"),O=h.a.createElement;function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var j=function(e){Object(c.a)(i,e);var t,n=(t=i,function(){var e,n=Object(s.a)(t);if(w()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function i(){return Object(a.a)(this,i),n.apply(this,arguments)}return Object(o.a)(i,[{key:"render",value:function(){var e={styles:O(u.a,{id:"2213561945"},[".full-height.jsx-2213561945{height:100%;}"]),className:"jsx-2213561945"};return O("button",{type:"button","aria-label":this.props.ariaLabel,disabled:this.props.disabled,ref:this.props.innerRef,className:u.a.dynamic([["18735578",[y.a.center(),this.props.backgroundColor,g.a.spacing.xxxs,g.a.spacing.xxs,g.a.spacing.xxxxs,g.a.spacing.xxxxs]]])+" "+(f()("style-swatch-dropdown-target","full-height",e.className,this.props.className)||"")},O("div",{className:u.a.dynamic([["18735578",[y.a.center(),this.props.backgroundColor,g.a.spacing.xxxs,g.a.spacing.xxs,g.a.spacing.xxxxs,g.a.spacing.xxxxs]]])+" swatch-wrapper"},"color"===this.props.styleType?O(b.a,{id:"",color:this.props.color,isSelected:!0,isSmall:!0}):O(x.b,{id:"",textColor:this.props.textColor,backgroundColor:this.props.color,isSelected:!0,isSmall:!0})),O(v.a,{height:g.a.spacing.xxs,width:"auto",color:g.a.color.cadet}),O(u.a,{id:"18735578",dynamic:[y.a.center(),this.props.backgroundColor,g.a.spacing.xxxs,g.a.spacing.xxs,g.a.spacing.xxxxs,g.a.spacing.xxxxs]},["button.__jsx-style-dynamic-selector{".concat(y.a.center(),";background-color:").concat(this.props.backgroundColor,";padding:").concat(g.a.spacing.xxxs," ").concat(g.a.spacing.xxs,";}"),"button.__jsx-style-dynamic-selector:disabled{opacity:0.4;cursor:initial;}",".swatch-wrapper.__jsx-style-dynamic-selector{line-height:0;}","html:not([dir='rtl']) .swatch-wrapper.__jsx-style-dynamic-selector{margin-right:".concat(g.a.spacing.xxxxs,";}"),"html[dir='rtl'] .swatch-wrapper.__jsx-style-dynamic-selector{margin-left:".concat(g.a.spacing.xxxxs,";}")]),e.styles)}}]),i}(d.PureComponent);Object(l.a)(j,"defaultProps",{disabled:!1,color:g.a.color.white,backgroundColor:g.a.color.platinum,styleType:"color",textColor:g.a.color.haikuBlack}),t.a=h.a.forwardRef((function(e,t){return O(j,Object(i.a)({innerRef:t},e))}))},"N/C+":function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("zjfJ"),l=n("yFcC"),p=n.n(l),u=n("ERkP"),d=n.n(u),h=n("YQpL"),m=n("O94r"),f=n.n(m),y=n("NX3A"),g=n("liFR"),v=n("xNfo"),b=n("eCu0"),x=n("A7aE"),O=d.a.createElement;function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var j=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(w()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){var e=this.props.forceDragHandleOutside||"standard"===this.props.size||this.props.isViewportMinWidth("extra-large")&&"full"!==this.props.size&&!this.props.isTouchDevice,t=this.props.backgroundColor||this.props.storyDesign.storyTheme.themeVariables.backgroundColor,n=this.props.textColor||this.props.storyDesign.storyTheme.themeVariables.bodyMutedColor;return O("div",{className:p.a.dynamic([["337969504",[y.a.spacing.xxxs,y.a.spacing.xxxs,t,n,y.a.spacing.xxxs,y.a.spacing.xxxxs,n||y.a.color.cadet]]])+" "+(f()("dnd-handle-container",{show:this.props.isShowing,"over-content":!e,"absolutely-positioned":!this.props.isStaticallyPositioned})||"")},O("div",{className:p.a.dynamic([["337969504",[y.a.spacing.xxxs,y.a.spacing.xxxs,t,n,y.a.spacing.xxxs,y.a.spacing.xxxxs,n||y.a.color.cadet]]])+" "+(f()("dnd-handle",{"over-content":!e})||"")},O(g.a,{tooltipContent:this.props.intl.formatMessage({id:"builder.common.drag"}),usePositionFixed:this.props.tooltipIsPositionFixed},O(v.a,{width:y.a.spacing.xxs,height:"auto"}))),O(p.a,{id:"337969504",dynamic:[y.a.spacing.xxxs,y.a.spacing.xxxs,t,n,y.a.spacing.xxxs,y.a.spacing.xxxxs,n||y.a.color.cadet]},[".dnd-handle-container.__jsx-style-dynamic-selector{opacity:0;}",".dnd-handle-container.absolutely-positioned.__jsx-style-dynamic-selector{position:absolute;top:0;left:0;z-index:4;height:100%;}",".dnd-handle-container.absolutely-positioned.__jsx-style-dynamic-selector:not(.over-content){-webkit-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);}",".dnd-handle-container.absolutely-positioned.over-content.__jsx-style-dynamic-selector{top:".concat(y.a.spacing.xxxs,";}"),"html[dir='rtl'] .dnd-handle-container.absolutely-positioned.__jsx-style-dynamic-selector{left:unset;right:0;}","html[dir='rtl'] .dnd-handle-container.absolutely-positioned.__jsx-style-dynamic-selector:not(.over-content){-webkit-transform:translateX(100%);-ms-transform:translateX(100%);transform:translateX(100%);}",".dnd-handle-container.show.__jsx-style-dynamic-selector,.dnd-handle-container.__jsx-style-dynamic-selector:hover{opacity:1;}",".dnd-handle.__jsx-style-dynamic-selector{padding:".concat(y.a.spacing.xxxs,";background-color:").concat(t,";color:").concat(n,";}"),".dnd-handle.over-content.__jsx-style-dynamic-selector{padding:".concat(y.a.spacing.xxxs," ").concat(y.a.spacing.xxxxs,";}"),".dnd-handle.__jsx-style-dynamic-selector:hover,.dnd-handle.__jsx-style-dynamic-selector:focus{color:".concat(n||y.a.color.cadet,";}")]))}}]),c}(u.PureComponent);Object(c.a)(j,"defaultProps",{size:"standard",isShowing:!1,forceDragHandleOutside:!1,tooltipIsPositionFixed:!1}),t.a=Object(h.c)(Object(x.b)(Object(b.c)(j)))},NAcO:function(e,t,n){"use strict";n.r(t),n.d(t,"CarouselViewer",(function(){return C}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("eCu0"),g=n("uEvS"),v=n("/t8o"),b=n("A7aE"),x=n("yyMi"),O=n("rwy9"),w=h.a.createElement;function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var C=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(j()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"renderCarousel",(function(){var t=e.props.children;return e.props.printMode&&e.props.children&&(t=h.a.Children.toArray(e.props.children)[0]),w("div",{className:"jsx-2291915810 "+(f()("carousel",{"fill-parent":e.props.shouldFillParent})||"")},t,!e.props.printMode&&w(h.a.Fragment,null,e.props.items.length>1&&w("div",{className:"jsx-2291915810 nav-arrows"},w(v.a,{onClick:e.handleLeftArrowClick,direction:"previous",offsetTop:e.props.isFullScreen?"0px":e.props.immersiveOffset.top,offsetBottom:"0",shouldFitContentHeight:e.props.isFullScreen||e.props.isViewportMinWidth("large")&&e.props.shouldFitContentHeight,canClickThrough:!0}),w(v.a,{onClick:e.handleRightArrowClick,direction:"next",offsetTop:e.props.isFullScreen?"0rem":e.props.immersiveOffset.top,offsetBottom:"0",shouldFitContentHeight:e.props.isFullScreen||e.props.isViewportMinWidth("large")&&e.props.shouldFitContentHeight,canClickThrough:!0})),w("div",{className:"jsx-2291915810 nav-dots"},w(x.default,{orientation:"horizontal",isIntegrated:!1,items:e.props.items.map((function(e){return{id:e.id,onClick:e.onClick}})),selectedItemId:e.props.selectedItemId,minimumItemCount:2,maximumItemCount:5,showOnSmallScreens:!0,showArrows:!1,isFullScreen:!1}))),w(u.a,{id:"2291915810"},[".nav-dots.jsx-2291915810{display:auto;}",".nav-arrows.jsx-2291915810{display:none;pointer-events:painted;}",".carousel.jsx-2291915810{display:grid;position:relative;}",".carousel.fill-parent.jsx-2291915810{height:100%;width:100%;grid-template-rows:minmax(0,1fr);grid-template-columns:minmax(0,1fr);}"]))})),Object(l.a)(Object(o.a)(e),"handleLeftArrowClick",(function(){var t=e.props.items.findIndex((function(t){return t.id===e.props.selectedItemId}));t>0&&e.props.items[t-1].onClick()})),Object(l.a)(Object(o.a)(e),"handleRightArrowClick",(function(){var t=e.props.items.findIndex((function(t){return t.id===e.props.selectedItemId}));t<e.props.items.length-1&&e.props.items[t+1].onClick()})),e}return Object(a.a)(p,[{key:"render",value:function(){var e={styles:w(u.a,{id:"1242667031"},[".wrapper.jsx-1242667031:hover .nav-dots{display:none;}",".wrapper.jsx-1242667031:hover .nav-arrows{display:block;}"]),className:"jsx-1242667031"},t=this.renderCarousel();return w(h.a.Fragment,null,0===this.props.items.length||this.props.printMode?t:w(O.a,{isExpanded:this.props.isFullScreen,onFullScreenButtonClick:this.props.onToggleFullScreen,fillParent:this.props.shouldFillParent,isCompact:!1,onTransitionEnd:this.props.onFullScreenTransitionEnd,className:f()(e.className,"wrapper")},t),e.styles)}}]),p}(d.PureComponent);t.default=Object(y.c)(Object(g.b)(Object(b.b)(C)))},NEj5:function(e,t,n){"use strict";n.r(t),n.d(t,"Editor",(function(){return _e}));var i=n("VtSi"),a=n.n(i),o=n("fGyu"),r=n("9fIP"),s=n("MMYH"),c=n("pWxA"),l=n("K/z8"),p=n("sRHE"),u=n("8K1b"),d=n("zjfJ"),h=n("yFcC"),m=n.n(h),f=n("ERkP"),y=n.n(f),g=n("2SGB"),v=n("YQpL"),b=n("fQV3"),x=n("bzXW"),O=n("NX3A"),w=n("MEC2");function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var C=function(e){Object(u.a)(i,e);var t,n=(t=i,function(){var e,n=Object(p.a)(t);if(j()){var i=Object(p.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(l.a)(this,e)});function i(e){Object(r.a)(this,i);return n.call(this,e,{iconName:"bookmarks",path:"M27 5.983v2.23a17.045 17.045 0 0 1 2 1.223v18.76a13.642 13.642 0 0 0-6.462-2.054 17.2 17.2 0 0 0-5.339.957H17V8.053a19.418 19.418 0 0 1 3-.86V5.277a23.452 23.452 0 0 0-4 1.1A20.295 20.295 0 0 0 9.276 5.02C5.138 5.02 1 8.265 1 8.265V31.02l.03-.02h29.94l.03.02V8.265a19.141 19.141 0 0 0-4-2.282zm-12 21.12h-.2a17.261 17.261 0 0 0-5.338-.953A13.679 13.679 0 0 0 3 28.195V9.51C3.952 8.826 6.745 7 9.462 7A16.668 16.668 0 0 1 15 8.132zM21 0h5v21l-2.5-2-2.5 2z",viewBox:"0 0 32 32"})}return i}(w.a),k=n("wwFW"),S=n("HW3u"),I=n("Z34l"),P=n("N8kh"),R=n("AuFC"),E=n("YbHY"),D=n("DeSy"),T=n("+L/X"),M=n("looe"),A=n("QOs2"),N=n("gMl6"),L=n("hG09"),G=n("20vC"),_=n("j4c8"),B=n("mJsu"),W=n("uYly"),V=n("cxan"),F=n("PSUV"),U=n("Z4N4"),z=n("liFR"),H=n("Kec5"),Y=y.a.createElement,K=Object(f.memo)((function(e){return Y("li",{role:e.onClick?"button":void 0,tabIndex:e.onClick?0:-1,onClick:e.onClick,className:m.a.dynamic([["407843746",[U.a.typography.body12(),e.onClick?"cursor: pointer;":"",O.a.color.platinum,O.a.font.weight.medium,O.a.spacing.xxxs,O.a.spacing.xxs,O.a.color.darkGreen]]])+" editor-side-panel-list-item"},e.children,Y(m.a,{id:"407843746",dynamic:[U.a.typography.body12(),e.onClick?"cursor: pointer;":"",O.a.color.platinum,O.a.font.weight.medium,O.a.spacing.xxxs,O.a.spacing.xxs,O.a.color.darkGreen]},[".editor-side-panel-list-item.__jsx-style-dynamic-selector{".concat(U.a.typography.body12(),";").concat(e.onClick?"cursor: pointer;":""," color:").concat(O.a.color.platinum,";font-weight:").concat(O.a.font.weight.medium,";padding:").concat(O.a.spacing.xxxs," ").concat(O.a.spacing.xxs,";-webkit-transition:background-color 0.2s;transition:background-color 0.2s;}"),".editor-side-panel-list-item.__jsx-style-dynamic-selector:hover{background-color:".concat(O.a.color.darkGreen,";}")]))})),X=n("I0tp"),J=n("O94r"),Z=n.n(J);function q(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Q=function(e){Object(u.a)(i,e);var t,n=(t=i,function(){var e,n=Object(p.a)(t);if(q()){var i=Object(p.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(l.a)(this,e)});function i(e){Object(r.a)(this,i);return n.call(this,e,{iconName:"eye",path:"M8 3.098c-3.068 0-5.763 2.39-7.613 4.901C2.237 10.51 4.925 12.9 8 12.9c3.068 0 5.763-2.39 7.613-4.901C13.763 5.488 11.075 3.098 8 3.098zm0 8.36c-2.623 0-4.976-2.336-5.956-3.46C3.021 6.873 5.366 4.54 8 4.54c2.623 0 4.976 2.335 5.956 3.46-.977 1.124-3.322 3.456-5.956 3.456zM8 10a2 2 0 1 1 2-2 2 2 0 0 1-2 2z",viewBox:"0 0 16 16"})}return i}(w.a),$=n("wHix"),ee=n("eCu0"),te=n("v7Aj"),ne=y.a.createElement,ie=Object(f.memo)((function(e){var t=e.hasVisibleData?Q:$.a,n=".".concat("visibility-icon-button"),i={styles:ne(m.a,{id:"1649550441",dynamic:[n,e.hasVisibleData&&!e.isTouchDevice?0:1,n,e.hoverSelector,n]},["".concat(n,".__jsx-style-dynamic-selector{opacity:").concat(e.hasVisibleData&&!e.isTouchDevice?0:1,";}"),"body.user-is-tabbing ".concat(n,".__jsx-style-dynamic-selector,").concat(e.hoverSelector,":hover ").concat(n,".__jsx-style-dynamic-selector{opacity:1;}")]),className:m.a.dynamic([["1649550441",[n,e.hasVisibleData&&!e.isTouchDevice?0:1,n,e.hoverSelector,n]]])};return ne(te.a,{onClick:e.onClick,className:Z()("visibility-icon-button",i.className,e.className)},ne(t,{height:O.a.spacing.xxs,width:"auto"}),i.styles)})),ae=Object(ee.c)(ie),oe=y.a.createElement;function re(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var se=function(e){Object(u.a)(i,e);var t,n=(t=i,function(){var e,n=Object(p.a)(t);if(re()){var i=Object(p.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(l.a)(this,e)});function i(e){var t;return Object(r.a)(this,i),t=n.call(this,e),Object(d.a)(Object(c.a)(t),"renderLayerItemName",(function(){var e=t.props,n=e.title,i=e.rename;return oe("div",{className:m.a.dynamic([["2577821704",[U.a.typography.body14()]]])+" layer-item-name"},"function"===typeof i?oe(X.a,{isEditing:t.state.isEditing,startEditing:t.startEditing,endEditing:t.endEditing,text:n,updateText:t.rename,textColor:"currentColor"}):oe("span",{className:m.a.dynamic([["2577821704",[U.a.typography.body14()]]])+" plain-text"},n),oe(m.a,{id:"2577821704",dynamic:[U.a.typography.body14()]},[".layer-item-name.__jsx-style-dynamic-selector{height:100%;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".plain-text.__jsx-style-dynamic-selector{padding:0;word-break:break-word;".concat(U.a.typography.body14(),";}")]))})),Object(d.a)(Object(c.a)(t),"startEditing",(function(){t.setState({isEditing:!0})})),Object(d.a)(Object(c.a)(t),"endEditing",(function(){t.setState({isEditing:!1})})),Object(d.a)(Object(c.a)(t),"rename",(function(e){"function"===typeof t.props.rename&&t.props.rename(t.props.id,e)})),Object(d.a)(Object(c.a)(t),"toggleLayer",(function(){t.props.toggle(t.props.id)})),t.state={isEditing:!1},t}return Object(s.a)(i,[{key:"render",value:function(){var e=this.props,t=e.premiumLayerIds,n=e.visible,a=e.id,o=n?O.a.color.antiFlashWhite:O.a.color.cambridgeBlue;return oe(K,null,oe("div",{className:m.a.dynamic([["3404911535",[O.a.spacing.xs,o]]])+" layer-item"},t&&t.includes(a)&&oe(z.a,{tooltipContent:this.props.intl.formatMessage({id:"builder.issueChecker.map.premiumContent"}),targetClassName:"premium-content-indicator ".concat(i.premiumTooltipStyles.className),placement:"right"},oe(H.a,{width:O.a.spacing.xxs,height:"auto"})),this.renderLayerItemName(),oe(ae,{hasVisibleData:this.props.visible,onClick:this.toggleLayer,hoverSelector:".layer-list > li"}),i.premiumTooltipStyles.styles,oe(m.a,{id:"3404911535",dynamic:[O.a.spacing.xs,o]},[".layer-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;-webkit-align-items:start;-webkit-box-align:start;-ms-flex-align:start;align-items:start;min-height:".concat(O.a.spacing.xs,";color:").concat(o,";}")])))}}]),i}(f.PureComponent);Object(d.a)(se,"premiumTooltipStyles",{styles:oe(m.a,{id:"1048452901",dynamic:[O.a.spacing.xxxs]},[".premium-content-indicator.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;}",".premium-content-indicator.__jsx-style-dynamic-selector::after{content:'';margin-right:".concat(O.a.spacing.xxxs,";}")]),className:m.a.dynamic([["1048452901",[O.a.spacing.xxxs]]])});var ce=Object(v.c)(se),le=n("bAEK"),pe=n("4S6s"),ue=n("azqN"),de=y.a.createElement,he=Object(v.c)(Object(f.memo)((function(e){var t=e.itemType,n=e.needNudge,i=e.intl,a=Object(f.useState)(n&&!Object(_.d)()),o=a[0],r=a[1],s=de("div",null,t===W.a.WebMap?i.formatMessage({id:"builder.map.mapLayers"}):t===W.a.WebScene?i.formatMessage({id:"builder.map.sceneLayers"}):"");return de(ue.a,null,de(le.a,{target:s,title:i.formatMessage({id:"builder.map.mediaAction.nudge.title"}),text:i.formatMessage({id:"builder.map.mediaAction.nudge.text"}),placement:"right",shouldFlipRTLPlacement:!0,isShowing:o,onClick:function(){r(!1),Object(_.f)()},delay:2*pe.a.CONTENT_TRANSITION_DURATION+pe.a.CONTENT_TRANSITION_DELAY}))}))),me=y.a.createElement;function fe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ye=function(e){Object(u.a)(i,e);var t,n=(t=i,function(){var e,n=Object(p.a)(t);if(fe()){var i=Object(p.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(l.a)(this,e)});function i(){var e;Object(r.a)(this,i);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),Object(d.a)(Object(c.a)(e),"toggleLayerHandlers",{}),Object(d.a)(Object(c.a)(e),"renderLayerList",(function(){return"undefined"===typeof e.props.storyMapLayers?me(F.a,null,me(g.a,{id:"builder.common.loading"})):e.props.storyMapLayers.length>0?me("ul",{className:m.a.dynamic([["3520221578",[O.a.spacing.xxxs]]])+" layer-list"},e.props.storyMapLayers.map((function(t){return me(ce,Object(V.a)({key:t.id},t,{premiumLayerIds:e.props.premiumLayerIds,toggle:e.toggleLayer(t.id),rename:e.props.isForMediaAction?void 0:e.props.renameLayer}))})),me(m.a,{id:"3520221578",dynamic:[O.a.spacing.xxxs]},[".layer-list.__jsx-style-dynamic-selector{padding:".concat(O.a.spacing.xxxs,";}")])):me(F.a,null,e.props.itemType===W.a.WebScene?me(g.a,{id:"builder.map.webSceneLayerTabEmptyState"}):me(g.a,{id:"builder.map.webMapLayerTabEmptyState"}))})),Object(d.a)(Object(c.a)(e),"toggleLayer",(function(t){return e.toggleLayerHandlers[t]||(e.toggleLayerHandlers[t]=function(n){e.props.toggleLayer&&e.props.toggleLayer(t)}),e.toggleLayerHandlers[t]})),e}return Object(s.a)(i,[{key:"render",value:function(){return me("div",{className:"jsx-3261943924 web-map-layers-tab"},me(he,{needNudge:!!this.props.isForMediaAction,itemType:this.props.itemType}),me("div",{className:"jsx-3261943924 layer-list-container"},this.renderLayerList()),this.props.tailpiece,me(m.a,{id:"3261943924"},[".web-map-layers-tab.jsx-3261943924{height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".layer-list-container.jsx-3261943924{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;overflow-y:auto;}"]))}}]),i}(f.Component),ge=y.a.createElement;function ve(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var be=function(e){Object(u.a)(i,e);var t,n=(t=i,function(){var e,n=Object(p.a)(t);if(ve()){var i=Object(p.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(l.a)(this,e)});function i(e){var t;return Object(r.a)(this,i),t=n.call(this,e),Object(d.a)(Object(c.a)(t),"goToBookmarkHandlers",{}),Object(d.a)(Object(c.a)(t),"goToBookmark",(function(e){return t.goToBookmarkHandlers[e.name]||(t.goToBookmarkHandlers[e.name]=function(n){n.stopPropagation(),t.props.goToBookmark&&t.props.goToBookmark(e)}),t.goToBookmarkHandlers[e.name]})),t}return Object(s.a)(i,[{key:"render",value:function(){return ge("div",{className:m.a.dynamic([["941918981",[O.a.spacing.xxxs]]])+" "+(Z()("web-map-bookmark",this.props.className)||"")},ge(ue.a,null,ge(g.a,{id:"builder.map.mapBookmarks"})),this.renderBookmarkList(),ge(m.a,{id:"941918981",dynamic:[O.a.spacing.xxxs]},[".webmap-bookmark.__jsx-style-dynamic-selector{width:100%;height:100%;overflow-y:auto;padding:".concat(O.a.spacing.xxxs," 0;}")]))}},{key:"renderBookmarkList",value:function(){var e=ge(F.a,null,ge(g.a,{id:"builder.map.webMapBookmarkTabEmptyState"}));if(!this.props.webmapBookmarks||!this.props.webmapBookmarks.length)return e;var t=this.props.webmapBookmarks.filter(Boolean);return t.length?this.renderValidBookmarks(t):e}},{key:"renderValidBookmarks",value:function(e){var t=this;return ge("ul",{className:m.a.dynamic([["959344962",[O.a.spacing.xxxs]]])+" bookmark-list"},e.map((function(e){return t.renderValidBookmark(e)})),ge(m.a,{id:"959344962",dynamic:[O.a.spacing.xxxs]},[".bookmark-list.__jsx-style-dynamic-selector{padding:0 ".concat(O.a.spacing.xxxs,";}")]))}},{key:"renderValidBookmark",value:function(e){var t=e.name,n=e.thumbnail,i=n&&n.url,a=i&&ge("div",null,ge("img",{src:i,alt:t})),o=this.props.currentBookmark&&this.props.currentBookmark.name===e.name;return ge(K,{key:e.name,onClick:this.goToBookmark(e)},ge("div",{className:m.a.dynamic([["391086921",[O.a.spacing.xs,o?1:.6]]])+" bookmark-list-item"},a,ge("span",{className:m.a.dynamic([["391086921",[O.a.spacing.xs,o?1:.6]]])},t),ge(m.a,{id:"391086921",dynamic:[O.a.spacing.xs,o?1:.6]},[".bookmark-list-item.__jsx-style-dynamic-selector{height:".concat(O.a.spacing.xs,";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;opacity:").concat(o?1:.6,";}")])))}}]),i}(f.Component),xe=y.a.createElement;function Oe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var we=function(e){Object(u.a)(i,e);var t,n=(t=i,function(){var e,n=Object(p.a)(t);if(Oe()){var i=Object(p.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(l.a)(this,e)});function i(e){var t;return Object(r.a)(this,i),t=n.call(this,e),Object(d.a)(Object(c.a)(t),"goToSlideHandlers",{}),Object(d.a)(Object(c.a)(t),"goToSlide",(function(e){return t.goToSlideHandlers[e.id]||(t.goToSlideHandlers[e.id]=function(n){n.stopPropagation(),t.props.goToSlide&&t.props.goToSlide(e)}),t.goToSlideHandlers[e.id]})),t}return Object(s.a)(i,[{key:"render",value:function(){return xe("div",{className:m.a.dynamic([["1973582013",[O.a.spacing.xxxs]]])+" "+(Z()("webscene-slide",this.props.className)||"")},xe(ue.a,null,xe(g.a,{id:"builder.map.sceneSlides"})),this.renderSlideList(),xe(m.a,{id:"1973582013",dynamic:[O.a.spacing.xxxs]},[".webscene-slide.__jsx-style-dynamic-selector{width:100%;height:100%;overflow-y:auto;padding:".concat(O.a.spacing.xxxs," 0;}")]))}},{key:"renderSlideList",value:function(){var e=xe(F.a,null,xe(g.a,{id:"builder.map.webSceneSlideTabEmptyState"}));if(!this.props.websceneSlides||!this.props.websceneSlides.length)return e;var t=this.props.websceneSlides.filter(Boolean);return t.length?this.renderValidSlides(t):e}},{key:"renderValidSlides",value:function(e){var t=this;return xe("ul",{className:m.a.dynamic([["1351228935",[O.a.spacing.xxxs]]])+" slide-list"},e.map((function(e){return t.renderValidSlide(e)})),xe(m.a,{id:"1351228935",dynamic:[O.a.spacing.xxxs]},[".slide-list.__jsx-style-dynamic-selector{padding:0 ".concat(O.a.spacing.xxxs,";}")]))}},{key:"renderValidSlide",value:function(e){var t=e.title,n=e.thumbnail,i=n&&n.url,a=this.props.currentSlide&&this.props.currentSlide.id===e.id;return xe(K,{key:e.id,onClick:this.goToSlide(e)},xe("div",{className:m.a.dynamic([["3303128587",[O.a.spacing.xxs,a?1:.6]]])+" slide-list-item"},i&&xe("div",{className:m.a.dynamic([["3303128587",[O.a.spacing.xxs,a?1:.6]]])},xe("img",{src:i,alt:t.text,className:m.a.dynamic([["3303128587",[O.a.spacing.xxs,a?1:.6]]])+" slide-img"})),xe("span",{className:m.a.dynamic([["3303128587",[O.a.spacing.xxs,a?1:.6]]])},t.text),xe(m.a,{id:"3303128587",dynamic:[O.a.spacing.xxs,a?1:.6]},[".slide-list-item.__jsx-style-dynamic-selector{padding-top:".concat(O.a.spacing.xxs,";margin-left:auto;margin-right:auto;text-align:left;opacity:").concat(a?1:.6,";}"),".slide-img.__jsx-style-dynamic-selector{width:21rem;}"])))}}]),i}(f.Component),je=n("g47E"),Ce=n("8zWw"),ke=y.a.createElement,Se=Object(f.memo)((function(e){var t=e.itemType,n=e.storyItem.userSession.portal.replace("/sharing/rest",""),i=t===W.a.WebMap?"webmap":"webscene",a={href:"".concat(n,"/home/").concat(i,"/viewer.html?").concat(i,"=").concat(e.portalItemId),openInNewPage:!0},o=t===W.a.WebScene?e.intl.formatMessage({id:"builder.map.webSceneEditingTips"}):e.intl.formatMessage({id:"builder.map.webMapEditingTips"}),r=t===W.a.WebScene?e.intl.formatMessage({id:"builder.map.editSceneArcGIS"}):e.intl.formatMessage({id:"builder.map.editMapArcGIS"});return ke(Ce.a,{link:a,message:o},r)})),Ie=Object(T.b)(Object(v.c)(Se)),Pe=n("W8gz"),Re=n("bXtg"),Ee=n("dsEC"),De=y.a.createElement,Te=Object(f.memo)((function(e){var t=function(t){return De(Pe.a,{title:De(g.a,{id:"builder.map.mapConfigurations"})},De(Ee.a.Navigation,{isOn:e.isAllowingNavigation,onToggle:e.onToggleIsAllowingNavigation,isDisabled:t}),"function"===typeof e.onToggleIsShowingSearch&&De(Ee.a.Search,{isOn:!!e.isShowingSearch,onToggle:e.onToggleIsShowingSearch,mapType:"webmap",isDisabled:!e.isAllowingNavigation||t}),"function"===typeof e.onToggleIsShowingLocate&&De(Ee.a.Locate,{isOn:!!e.isShowingLocate,onToggle:e.onToggleIsShowingLocate,mapType:"webmap",isDisabled:!e.isAllowingNavigation||t}),De(Ee.a.Legend,{isOn:e.isShowingLegend,onToggle:e.onToggleIsShowingLegend,isDisabled:t}))};return De(Re.a,null,e.shouldDisableAllMapConfigs?De(z.a,{tooltipContent:e.intl.formatMessage({id:"builder.swipe.map.mapControls.disabled"}),placement:"top"},t(!0)):t())})),Me=Object(v.c)(Te),Ae=y.a.createElement;function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ge(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var _e=function(e){Object(u.a)(i,e);var t,n=(t=i,function(){var e,n=Object(p.a)(t);if(Ge()){var i=Object(p.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(l.a)(this,e)});function i(e){var t,s;Object(r.a)(this,i),s=n.call(this,e),Object(d.a)(Object(c.a)(s),"renderMap",(function(){var e=s.props.itemType,t=e===W.a.WebMap?s.onMapLoad:s.onSceneLoad;return Ae("div",{className:"jsx-3367644146 editor-container"},s.state.mapVersion>0&&Ae(f.Fragment,null,Ae(M.a,{type:e,key:s.state.mapVersion,portalItemId:s.props.itemId,portal:Object(I.e)(s.props.config.PORTAL_HOST),jsApiCssUrl:s.props.config.ARCGIS_JS_API_CSS_URL,onLayerLoad:s.onArcGISLayersLoad,onMapLoad:t,onHomeLoad:s.onHomeLoad,onJsonUtilsLoad:s.onJsonUtilsLoad,isScrollZoomingEnabled:!0,ariaLabel:s.props.ariaLabel,legendAria:s.props.intl.formatMessage({id:"builder.common.legend"}),shouldShowLegend:s.state.isShowingLegend,shouldShowLocate:s.state.locate,shouldDockPopups:!0}),s.state.search&&Ae(G.b,{tooltip:s.props.intl.formatMessage({id:"builder.map.search.disabled.tooltip"})})),Ae(m.a,{id:"3367644146"},[".editor-container.jsx-3367644146{overflow:hidden;position:relative;z-index:0;}"]),Ae(je.a,{selector:".".concat("editor-container")}))})),Object(d.a)(Object(c.a)(s),"renderMapSidePanel",(function(){var e=[{id:"layers",icon:function(e){return Ae(x.a,{height:O.a.spacing.xxs,width:"auto",color:e,title:Ae(g.a,{id:"builder.common.layers",tagName:"title"})})},content:Ae(ye,{storyMapLayers:s.state.mapLayers,toggleLayer:s.toggleLayer,itemType:s.props.itemType,renameLayer:s.renameLayer,premiumLayerIds:s.state.premiumLayerIds,isForMediaAction:s.props.isForMediaAction,tailpiece:!s.props.isForMediaAction&&!s.state.isUserStoryteller&&s.state.canUserUpdate&&Ae(Ie,{portalItemId:s.props.itemId,itemType:s.props.itemType})})},{id:"bookmarks",icon:function(e){return Ae(C,{height:O.a.spacing.xxs,width:"auto",color:e,title:s.props.itemType===W.a.WebMap?Ae(g.a,{id:"builder.map.bookmarks",tagName:"title"}):Ae(g.a,{id:"builder.map.slides",tagName:"title"})})},content:s.props.itemType===W.a.WebMap?Ae(be,{currentBookmark:s.state.currentBookmark,webmapBookmarks:s.state.webMapBookmarks,goToBookmark:s.onBookmarkClick}):Ae(we,{currentSlide:s.state.currentSlide,websceneSlides:s.state.webSceneSlides,goToSlide:s.onSlideClick})}].concat(Object(o.a)(s.props.isForMediaAction?[]:[{id:"options",icon:function(e){return Ae(k.a,{height:O.a.spacing.xxs,width:"auto",color:e,title:Ae(g.a,{id:"builder.common.options",tagName:"title"})})},content:Ae(Me,{isAllowingNavigation:!!s.state.navigation,onToggleIsAllowingNavigation:s.toggleNavigation,isShowingLegend:!!s.state.isShowingLegend,onToggleIsShowingLegend:s.toggleIsShowingLegend,isShowingSearch:!!s.state.search,onToggleIsShowingSearch:!1===s.props.showSearchConfigInEditor?void 0:s.toggleSearch,isShowingLocate:!!s.state.locate,onToggleIsShowingLocate:!1===s.props.showLocateConfigInEditor?void 0:s.toggleLocate,shouldDisableAllMapConfigs:s.props.shouldDisableAllMapConfigs})}]));return Ae(S.a,{items:e})})),Object(d.a)(Object(c.a)(s),"save",(function(){var e=B.b(Object(c.a)(s));if(s.props.isForMediaAction){var t=Object(_.c)(s.props.unoverriddenData||{},e),n=t.viewpoint,i=t.mapLayers;s.props.onPlaceMap(n||i?{extent:e.extent,mapLayers:e.mapLayers,viewpoint:e.viewpoint}:{})}else if("undefined"===typeof s.props.resourceData){var a=Le({},s.default,{itemId:s.props.itemId,itemType:s.props.itemType,type:"default"}),o="r-".concat(s.props.itemId);s.props.onPlaceMap(Object(_.c)(s.default,e),a,{map:o,alt:"",caption:""})}else{var r=Object(_.a)(s.props.resourceData),l=Object(_.c)(r,e);s.props.onPlaceMap(l)}})),Object(d.a)(Object(c.a)(s),"loadPersistedData",(function(e,t){e.watch("updating",(function(e){s.setState({isViewUpdating:e})})),e.when((function(e){s.initialViewpoint=e.viewpoint.clone(),s.home&&(s.home.viewpoint=s.initialViewpoint.clone()),s.view=e})).then((function(){"undefined"===typeof s.props.resourceData&&(s.default=B.b(Object(c.a)(s),!0)),B.c(Object(c.a)(s))}))})),Object(d.a)(Object(c.a)(s),"onMapLoad",(function(e,t){s.loadPersistedData(t,e.portalItem),s.setUpdateStatus(e.portalItem.itemControl),s.setState({webMapBookmarks:e.bookmarks.toArray()})})),Object(d.a)(Object(c.a)(s),"onSceneLoad",(function(e,t){s.loadPersistedData(t,e.portalItem),s.setUpdateStatus(e.portalItem.itemControl),e.presentation.slides&&s.setState({webSceneSlides:e.presentation.slides.toArray()})})),Object(d.a)(Object(c.a)(s),"onHomeLoad",(function(e){s.home=e,s.initialViewpoint&&s.home&&(s.home.viewpoint=s.initialViewpoint.clone())})),Object(d.a)(Object(c.a)(s),"onJsonUtilsLoad",(function(e){s.jsonUtils=e})),Object(d.a)(Object(c.a)(s),"onArcGISLayersLoad",(function(e){s.layers=e,B.a(s.state.mapLayers,s.layers),s.setState({mapLayers:Object(_.e)(s.layers)})})),Object(d.a)(Object(c.a)(s),"toggleLayer",(function(e){if(s.layers){var t=s.layers.find((function(t){return t.id===e}));t&&(t.visible=!t.visible,s.setState({mapLayers:Object(_.e)(s.layers)}))}})),Object(d.a)(Object(c.a)(s),"renameLayer",(function(e,t){if(s.layers){var n=s.layers.find((function(t){return t.id===e}));n&&(n.title=t,s.setState({mapLayers:Object(_.e)(s.layers)},(function(){"group"===n.type&&s.view.goTo(s.view.viewpoint)})))}})),Object(d.a)(Object(c.a)(s),"onBookmarkClick",(function(e){s.view&&(Object(L.d)(s.view,e),s.setState({currentBookmark:e}))})),Object(d.a)(Object(c.a)(s),"onSlideClick",(function(e){s.view&&(e.applyTo(s.view),s.setState({currentSlide:e}),s.updateVisibleLayers(e.visibleLayers))})),Object(d.a)(Object(c.a)(s),"updateVisibleLayers",(function(e){e.forEach((function(e){var t=s.layers.find((function(t){return t.id===e.id}));t&&(t.visible=!0)})),s.setState({mapLayers:Object(_.e)(s.layers)})})),Object(d.a)(Object(c.a)(s),"toggleIsShowingLegend",(function(){s.setState((function(e){return{isShowingLegend:!e.isShowingLegend}}))})),Object(d.a)(Object(c.a)(s),"toggleSearch",(function(){s.setState((function(e){return{search:!e.search}}))})),Object(d.a)(Object(c.a)(s),"toggleLocate",(function(){s.setState((function(e){return{locate:!e.locate}}))})),Object(d.a)(Object(c.a)(s),"toggleNavigation",(function(){s.setState((function(e){var t=e.navigation;return Le({navigation:!t},t&&{locate:!1,search:!1})}))})),Object(d.a)(Object(c.a)(s),"onSearch",(function(e){var t=e.extent;s.goToMapExtent(t)})),Object(d.a)(Object(c.a)(s),"goToMapExtent",(function(e){e&&(s.props.itemType===W.a.WebMap?Object(L.d)(s.view,s.jsonUtils.fromJSON(e)):s.props.itemType===W.a.WebScene&&Object(L.g)(s.view,s.jsonUtils.fromJSON(e)))})),Object(d.a)(Object(c.a)(s),"onBrowserTabFocus",(function(){document.hidden||s.getMapModifiedDate()})),Object(d.a)(Object(c.a)(s),"getMapModifiedDate",(function(){var e;return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return s.state.mapVersion&&(s.tempDataStorage=B.b(Object(c.a)(s))),t.next=3,a.a.awrap(Object(b.a)(s.props.itemId,{authentication:s.props.storyItem.userSession}));case 3:(e=t.sent).modified>s.state.mapVersion&&s.setState({mapVersion:e.modified});case 5:case"end":return t.stop()}}),null,null,null,Promise)})),Object(d.a)(Object(c.a)(s),"checkForIssues",(function(){var e,t,n;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a.a.awrap(Object(E.a)({item:{itemId:s.props.itemId,type:s.props.itemType===W.a.WebMap?D.d.WEBMAP:D.d.WEBSCENE},rules:{sharing:{requiredSharingLevel:{access:P.a.PUBLIC}}},userSession:s.props.storyItem.userSession,portalHost:s.props.config.PORTAL_HOST,storyMapUserPrivileges:s.props.storyItem.storyMapUserPrivileges}));case 2:(e=i.sent)&&e.hasIssues&&(t=e.unfixableIssues.concat(e.fixableIssues),n=t.reduce((function(e,t){return"app-proxy-required"===t.issue.type&&t.issue.isPremiumContent&&t.item.type===D.d.MAP_LAYER&&t.item.itemInfo.mapLayerData?e.concat(t.item.itemInfo.mapLayerData.id):e}),[]),s.setState({premiumLayerIds:n}));case 4:case"end":return i.stop()}}),null,null,null,Promise)})),Object(d.a)(Object(c.a)(s),"setUpdateStatus",(function(e){s.setState({canUserUpdate:"admin"===e||"update"===e})}));var l=e.data;return s.state={mapVersion:0,webMapBookmarks:[],currentBookmark:void 0,webSceneSlides:[],currentSlide:void 0,isViewUpdating:void 0,isUserStoryteller:!1,canUserUpdate:!1,mapLayers:l?l.mapLayers:void 0,isShowingLegend:l&&l.isShowingLegend,search:l&&l.search,locate:l&&l.locate,navigation:null===(t=null===l||void 0===l?void 0:l.navigation)||void 0===t||t},s}return Object(s.a)(i,[{key:"componentDidMount",value:function(){var e;return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(L.i)({userSession:this.props.storyItem.userSession,clientId:this.props.config.OAUTH_CLIENT_ID,portalHost:this.props.config.PORTAL_HOST}),"undefined"!==typeof document&&(window.addEventListener("focus",this.onBrowserTabFocus,!1),document.addEventListener("visibilitychange",this.onBrowserTabFocus,!1)),this.checkForIssues(),this.getMapModifiedDate(),!this.props.storyItem.userSession){t.next=9;break}return t.next=7,a.a.awrap(Object(I.j)(this.props.storyItem.userSession));case 7:e=t.sent,this.setState({isUserStoryteller:e});case 9:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"componentDidUpdate",value:function(e,t){0!==t.mapVersion&&t.mapVersion!==this.state.mapVersion&&this.checkForIssues()}},{key:"componentWillUnmount",value:function(){"undefined"!==typeof document&&(window.removeEventListener("focus",this.onBrowserTabFocus),document.removeEventListener("visibilitychange",this.onBrowserTabFocus))}},{key:"render",value:function(){var e=this,t=this.props.isForMediaAction?Ae(g.a,{id:"builder.map.configureMapActionColon",values:{"action-name":function(){return e.props.actionName||Ae(g.a,{id:"builder.mediaAction.initialMapView"})}}}):this.props.itemType===W.a.WebMap?Ae(g.a,{id:"builder.map.adjustWebMapAppearance"}):this.props.itemType===W.a.WebScene?Ae(g.a,{id:"builder.map.adjustWebSceneAppearance"}):void 0,n=this.props.isForMediaAction?Ae(g.a,{id:"builder.map.saveMediaAction"}):this.props.itemType===W.a.WebMap?Ae(g.a,{id:"builder.map.placeMap"}):this.props.itemType===W.a.WebScene?Ae(g.a,{id:"builder.map.placeScene"}):void 0;return Ae(A.a,{heading:t,toolbar:Ae(N.a,{onSearch:this.onSearch}),sidePanel:this.renderMapSidePanel(),map:this.renderMap(),primaryButtonTitle:n,onPrimaryButtonClick:this.save,secondaryButtonTitle:Ae(g.a,{id:"common.cancel"}),onSecondaryButtonClick:this.props.onCancel,shouldDisablePrimaryButton:!1!==this.state.isViewUpdating})}}]),i}(f.PureComponent);t.default=Object(R.c)(Object(v.c)(Object(T.a)(_e)))},NFQk:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("NX3A"),h=n("V+ka"),m=u.a.createElement;function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(f()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return m(p.Fragment,null,m("div",{className:l.a.dynamic([["1000792104",[this.props.appOffset.top,d.a.print.pageHeightLetter,d.a.responsiveBreakpoints.large,this.props.appOffset.top]]])+" media-container"},this.props.children),m(l.a,{id:"1000792104",dynamic:[this.props.appOffset.top,d.a.print.pageHeightLetter,d.a.responsiveBreakpoints.large,this.props.appOffset.top]},[".media-container.__jsx-style-dynamic-selector{height:calc(0.3 * (100vh - ".concat(this.props.appOffset.top,"));width:100%;}"),"body.print .media-container.__jsx-style-dynamic-selector{min-height:0;height:calc(".concat(d.a.print.pageHeightLetter," / 4);}"),"@media (min-width:".concat(d.a.responsiveBreakpoints.large,"){.media-container.__jsx-style-dynamic-selector{min-height:40rem;height:calc(0.4 * (100vh - ").concat(this.props.appOffset.top,"));}}")]))}}]),c}(p.PureComponent);t.a=Object(h.b)(y)},"O+ht":function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("ERkP"),u=n.n(p),d=n("yFcC"),h=n.n(d),m=n("2SGB"),f=n("O94r"),y=n.n(f),g=n("WXRn"),v=n("7sDT"),b=n("Z4N4"),x=n("NX3A"),O=n("Qquf"),w=n("4wv1"),j=n("Xls9"),C=n("QSI2"),k=n("uEvS"),S=n("YQpL"),I=n("liFR"),P=n("33+R"),R=n("Lf33"),E=n("tSRP"),D=n("wwFW"),T=n("3Uv7"),M=n("N/C+"),A=n("ow/k"),N=u.a.createElement;function L(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var G=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(L()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"renderExpandButton",(function(){var e=t.props.intl.formatMessage({id:"builder.immersive.slidesPanel.".concat(t.props.isExpanded?"collapse":"expand")}),n={styles:N(h.a,{id:"609743598"},[".expand-tooltip.jsx-609743598:not(.expanded){height:100%;}"]),className:"jsx-609743598"};return N(I.a,{tooltipContent:e,targetClassName:y()("expand-tooltip",n.className,{expanded:t.props.isExpanded}),usePositionFixed:!0,placement:"top"},N("button",{onClick:t.props.onExpandToggleClicked,"aria-label":e,className:h.a.dynamic([["275564333",[x.a.spacing.xxs,x.a.spacing.xxxs,b.a.typography.blockReg(),x.a.color.platinum,x.a.color.auroMetalSaurus,x.a.color.splashedWhite,x.a.font.size.medium,x.a.spacing.xxxs,x.a.spacing.xxxs]]])+" "+(y()("expand-toggle",{expanded:t.props.isExpanded})||"")},N("h5",{className:h.a.dynamic([["275564333",[x.a.spacing.xxs,x.a.spacing.xxxs,b.a.typography.blockReg(),x.a.color.platinum,x.a.color.auroMetalSaurus,x.a.color.splashedWhite,x.a.font.size.medium,x.a.spacing.xxxs,x.a.spacing.xxxs]]])+" title"},N(m.a,{id:"builder.blockInserter.".concat("guided-tour"===t.props.immersiveType?"guidedTour":"slideshow"===t.props.immersiveType?"slideshow.beta":"sidecar")})),N("span",{className:h.a.dynamic([["275564333",[x.a.spacing.xxs,x.a.spacing.xxxs,b.a.typography.blockReg(),x.a.color.platinum,x.a.color.auroMetalSaurus,x.a.color.splashedWhite,x.a.font.size.medium,x.a.spacing.xxxs,x.a.spacing.xxxs]]])+" "+(y()("expand-icon",{expanded:t.props.isExpanded})||"")},N(P.a,null)),N(h.a,{id:"275564333",dynamic:[x.a.spacing.xxs,x.a.spacing.xxxs,b.a.typography.blockReg(),x.a.color.platinum,x.a.color.auroMetalSaurus,x.a.color.splashedWhite,x.a.font.size.medium,x.a.spacing.xxxs,x.a.spacing.xxxs]},[".expand-toggle.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".expand-toggle.__jsx-style-dynamic-selector:not(.expanded){padding:0 ".concat(x.a.spacing.xxs,";height:100%;}"),".expand-toggle.expanded.__jsx-style-dynamic-selector{padding:0 0 ".concat(x.a.spacing.xxxs,";}"),"body:not(.user-is-tabbing) .expand-toggle.__jsx-style-dynamic-selector:focus{outline:none;}",".title.__jsx-style-dynamic-selector{".concat(b.a.typography.blockReg()," color:").concat(x.a.color.platinum,";}"),".expand-icon.__jsx-style-dynamic-selector{background-color:".concat(x.a.color.auroMetalSaurus,";color:").concat(x.a.color.splashedWhite,";line-height:0;font-size:").concat(x.a.font.size.medium,";overflow:hidden;}"),'html:not([dir="rtl"]) .expand-icon.__jsx-style-dynamic-selector{margin-left:'.concat(x.a.spacing.xxxs,";}"),'html[dir="rtl"] .expand-icon.__jsx-style-dynamic-selector{margin-right:'.concat(x.a.spacing.xxxs,";}"),".expand-icon.__jsx-style-dynamic-selector:not(.expanded){-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg);}"]),n.styles))})),Object(l.a)(Object(o.a)(t),"renderSettingsDropdown",(function(e){return N(R.a,null,"function"===typeof t.props.onSwitchLayoutClicked&&N(R.a.Item,{isBold:!1,onClick:t.props.onSwitchLayoutClicked},N(m.a,{id:"builder.immersive.slidesPanel.changeLayout"})),N(R.a.Item,{isBold:!1,isDangerous:!0,onClick:t.openDeleteModal},N(m.a,{id:"builder.immersive.slidesPanel.delete.".concat(e)})))})),Object(l.a)(Object(o.a)(t),"renderDeleteModal",(function(e){return N(T.a,{title:N(m.a,{id:"builder.immersive.deleteTitle.".concat(e)}),description:N(m.a,{id:"builder.immersive.deleteDescription.".concat(e)}),isShowing:t.state.isDeleteModalShowing,onConfirm:t.onDeleteConfirm,onCancel:t.onDeleteCancel})})),Object(l.a)(Object(o.a)(t),"openDeleteModal",(function(){t.setState({isDeleteModalShowing:!0})})),Object(l.a)(Object(o.a)(t),"onDeleteConfirm",(function(){t.setState({isDeleteModalShowing:!1}),t.props.onDeleteClicked()})),Object(l.a)(Object(o.a)(t),"onDeleteCancel",(function(){t.setState({isDeleteModalShowing:!1})})),t.state={isDeleteModalShowing:!1},t}return Object(a.a)(p,[{key:"render",value:function(){var e="guided-tour"===this.props.immersiveType?"guidedTour":"slideshow"===this.props.immersiveType?"slideshow":"sidecar";return N("div",{className:h.a.dynamic([["2331744111",[x.a.spacing.xxs,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.xxxs,b.a.typography.body12(),x.a.color.antiFlashWhite,x.a.color.auroMetalSaurus,x.a.color.platinum,x.a.font.size.medium,x.a.spacing.xxxs]]])+" "+(y()("main-controls-container",{expanded:this.props.isExpanded})||"")},this.props.isExpanded&&N("div",{ref:this.props.setDragHandleElement,className:h.a.dynamic([["2331744111",[x.a.spacing.xxs,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.xxxs,b.a.typography.body12(),x.a.color.antiFlashWhite,x.a.color.auroMetalSaurus,x.a.color.platinum,x.a.font.size.medium,x.a.spacing.xxxs]]])},N(M.a,{size:"full",isShowing:!0,backgroundColor:x.a.color.auroMetalSaurus,textColor:x.a.color.white,isStaticallyPositioned:!0,tooltipIsPositionFixed:!0})),N("div",{className:h.a.dynamic([["2331744111",[x.a.spacing.xxs,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.xxxs,b.a.typography.body12(),x.a.color.antiFlashWhite,x.a.color.auroMetalSaurus,x.a.color.platinum,x.a.font.size.medium,x.a.spacing.xxxs]]])+" "+(y()("main-controls",{expanded:this.props.isExpanded})||"")},N("div",{className:h.a.dynamic([["2331744111",[x.a.spacing.xxs,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.xxxs,b.a.typography.body12(),x.a.color.antiFlashWhite,x.a.color.auroMetalSaurus,x.a.color.platinum,x.a.font.size.medium,x.a.spacing.xxxs]]])+" "+(y()("main",{expanded:this.props.isExpanded})||"")},N("div",{className:h.a.dynamic([["2331744111",[x.a.spacing.xxs,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.xxxs,b.a.typography.body12(),x.a.color.antiFlashWhite,x.a.color.auroMetalSaurus,x.a.color.platinum,x.a.font.size.medium,x.a.spacing.xxxs]]])+" "+(y()("title-container",{expanded:this.props.isExpanded})||"")},this.renderExpandButton()),this.props.isExpanded&&N("span",{className:h.a.dynamic([["2331744111",[x.a.spacing.xxs,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.xxxs,b.a.typography.body12(),x.a.color.antiFlashWhite,x.a.color.auroMetalSaurus,x.a.color.platinum,x.a.font.size.medium,x.a.spacing.xxxs]]])+" drag-prompt"},N(m.a,{id:"builder.immersive.slidesPanel.description"}))),this.props.isExpanded&&N("div",{className:h.a.dynamic([["2331744111",[x.a.spacing.xxs,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.xxxs,b.a.typography.body12(),x.a.color.antiFlashWhite,x.a.color.auroMetalSaurus,x.a.color.platinum,x.a.font.size.medium,x.a.spacing.xxxs]]])+" settings"},N(E.a,{target:N("div",{className:h.a.dynamic([["2331744111",[x.a.spacing.xxs,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.xxxs,b.a.typography.body12(),x.a.color.antiFlashWhite,x.a.color.auroMetalSaurus,x.a.color.platinum,x.a.font.size.medium,x.a.spacing.xxxs]]])},N(I.a,{tooltipContent:this.props.intl.formatMessage({id:"builder.common.options"}),usePositionFixed:!0,shouldFlipRTLPlacement:!0},N("button",{className:h.a.dynamic([["2331744111",[x.a.spacing.xxs,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.xxxs,b.a.typography.body12(),x.a.color.antiFlashWhite,x.a.color.auroMetalSaurus,x.a.color.platinum,x.a.font.size.medium,x.a.spacing.xxxs]]])+" options-button"},N(D.a,null)))),popper:this.renderSettingsDropdown(e),placement:"top-start",offset:[0,8]}),this.renderDeleteModal(e))),N(h.a,{id:"2331744111",dynamic:[x.a.spacing.xxs,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.lg,x.a.spacing.xxs,x.a.spacing.xxxs,b.a.typography.body12(),x.a.color.antiFlashWhite,x.a.color.auroMetalSaurus,x.a.color.platinum,x.a.font.size.medium,x.a.spacing.xxxs]},[".main-controls-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;max-width:33rem;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;}",".main-controls-container.expanded.__jsx-style-dynamic-selector{padding:".concat(x.a.spacing.xxs," 0;}"),".main-controls.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}",".main-controls.__jsx-style-dynamic-selector:not(.expanded){-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}","html:not([dir='rtl']) .main-controls.__jsx-style-dynamic-selector:not(.expanded){padding-right:".concat(x.a.spacing.xxxs,";}"),"html[dir='rtl'] .main-controls.__jsx-style-dynamic-selector:not(.expanded){padding-left:".concat(x.a.spacing.xxxs,";}"),"html:not([dir='rtl']) .main-controls.expanded.__jsx-style-dynamic-selector{padding-right:".concat(x.a.spacing.lg,";padding-left:").concat(x.a.spacing.xxs,";}"),"html[dir='rtl'] .main-controls.expanded.__jsx-style-dynamic-selector{padding-left:".concat(x.a.spacing.lg,";padding-right:").concat(x.a.spacing.xxs,";}"),".main.__jsx-style-dynamic-selector:not(.expanded){height:100%;}",".main.expanded.__jsx-style-dynamic-selector{margin-bottom:".concat(x.a.spacing.xxxs,";}"),".title-container.__jsx-style-dynamic-selector:not(.expanded){height:100%;}",".drag-prompt.__jsx-style-dynamic-selector{".concat(b.a.typography.body12(),";color:").concat(x.a.color.antiFlashWhite,";}"),".settings.__jsx-style-dynamic-selector{margin-top:auto;}",".options-button.__jsx-style-dynamic-selector{background-color:".concat(x.a.color.auroMetalSaurus,";color:").concat(x.a.color.platinum,";font-size:").concat(x.a.font.size.medium,";border-radius:50%;line-height:0;padding:").concat(x.a.spacing.xxxs,";}"),"body:not(.user-is-tabbing) .options-button.__jsx-style-dynamic-selector:focus{outline:none;}"]))}}]),p}(p.PureComponent),_=Object(A.b)(Object(S.c)(G)),B=n("bAEK"),W=u.a.createElement;function V(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var F=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(V()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"renderButtonWithNudge",(function(){var t=e.renderTarget(e.renderButton());return W(B.a,{title:e.props.intl.formatMessage({id:"builder.immersive.onboarding.nudge1.title"}),text:e.props.intl.formatMessage({id:"builder.".concat("guided-tour"===e.props.immersiveType?"tour":"immersive.".concat(e.props.immersiveType),".onboarding.nudge1.text")}),target:t,placement:"top",isShowing:e.props.shouldShowNudge,onClick:e.props.onNudgeClose})})),Object(l.a)(Object(o.a)(e),"renderButtonWithTooltip",(function(){var t=W(I.a,{tooltipContent:e.props.intl.formatMessage({id:"builder.immersive.slidesPanel.".concat(e.props.isDisabled?"newSlideDisabled":"newSlide")}),usePositionFixed:!0,placement:"left",shouldFlipRTLPlacement:!0},e.renderButton());return e.renderTarget(t)})),Object(l.a)(Object(o.a)(e),"renderButton",(function(){var t="1.4rem",n="0.2rem",i=e.props.intl.formatMessage({id:"builder.immersive.slidesPanel.addButtonAria"});return W("button",{"aria-label":i,onClick:e.props.onClick,disabled:e.props.isDisabled,className:h.a.dynamic([["777031823",["4.8rem","4.8rem",x.a.color.haikuGreen,x.a.color.ashGrey,x.a.color.pearlAqua,x.a.color.haikuGreen,"3.8rem","3.8rem",b.a.hexA(x.a.color.black,.3),x.a.color.white,t,n,t,n]]])+" add-button"},W("span",{className:h.a.dynamic([["777031823",["4.8rem","4.8rem",x.a.color.haikuGreen,x.a.color.ashGrey,x.a.color.pearlAqua,x.a.color.haikuGreen,"3.8rem","3.8rem",b.a.hexA(x.a.color.black,.3),x.a.color.white,t,n,t,n]]])+" focus-overlay"}),W("span",{className:h.a.dynamic([["777031823",["4.8rem","4.8rem",x.a.color.haikuGreen,x.a.color.ashGrey,x.a.color.pearlAqua,x.a.color.haikuGreen,"3.8rem","3.8rem",b.a.hexA(x.a.color.black,.3),x.a.color.white,t,n,t,n]]])+" line vertical-line"}),W("span",{className:h.a.dynamic([["777031823",["4.8rem","4.8rem",x.a.color.haikuGreen,x.a.color.ashGrey,x.a.color.pearlAqua,x.a.color.haikuGreen,"3.8rem","3.8rem",b.a.hexA(x.a.color.black,.3),x.a.color.white,t,n,t,n]]])+" line horizontal-line"}),W(h.a,{id:"777031823",dynamic:["4.8rem","4.8rem",x.a.color.haikuGreen,x.a.color.ashGrey,x.a.color.pearlAqua,x.a.color.haikuGreen,"3.8rem","3.8rem",b.a.hexA(x.a.color.black,.3),x.a.color.white,t,n,t,n]},[".add-button.__jsx-style-dynamic-selector{pointer-events:auto;height:".concat("4.8rem",";width:").concat("4.8rem",";position:relative;z-index:0;border-radius:50%;background-color:").concat(x.a.color.haikuGreen,";}"),".add-button.__jsx-style-dynamic-selector:disabled{background-color:".concat(x.a.color.ashGrey,";cursor:initial;}"),".add-button.__jsx-style-dynamic-selector:not(:disabled):hover{background-color:".concat(x.a.color.pearlAqua,";}"),"body:not(.user-is-tabbing) .add-button.__jsx-style-dynamic-selector:focus{outline:none;}",".add-button.__jsx-style-dynamic-selector:focus{background-color:".concat(x.a.color.haikuGreen,";}"),".focus-overlay.__jsx-style-dynamic-selector{display:none;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:1;width:".concat("3.8rem",";height:").concat("3.8rem",";border-radius:50%;background-color:").concat(b.a.hexA(x.a.color.black,.3),";}"),".add-button.__jsx-style-dynamic-selector:focus .focus-overlay.__jsx-style-dynamic-selector{display:block;}",".line.__jsx-style-dynamic-selector{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:2;background-color:".concat(x.a.color.white,";}"),".horizontal-line.__jsx-style-dynamic-selector{width:".concat(t,";height:").concat(n,";}"),".vertical-line.__jsx-style-dynamic-selector{height:".concat(t,";width:").concat(n,";}")]))})),Object(l.a)(Object(o.a)(e),"renderTarget",(function(t){return W("div",{className:h.a.dynamic([["4038261907",[b.a.center("column"),x.a.spacing.xxs,x.a.spacing.xxxs,b.a.hexA(x.a.color.darkGreen,0),x.a.color.darkGreen,b.a.hexA(x.a.color.darkGreen,0),x.a.color.darkGreen]]])+" "+(y()("add-button-container",{expanded:e.props.isExpanded})||"")},t,W(h.a,{id:"4038261907",dynamic:[b.a.center("column"),x.a.spacing.xxs,x.a.spacing.xxxs,b.a.hexA(x.a.color.darkGreen,0),x.a.color.darkGreen,b.a.hexA(x.a.color.darkGreen,0),x.a.color.darkGreen]},[".add-button-container.__jsx-style-dynamic-selector{position:absolute;z-index:2;pointer-events:none;".concat(b.a.center("column"),";-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;padding:0 ").concat(x.a.spacing.xxs,";}"),"html:not([dir='rtl']) .add-button-container.__jsx-style-dynamic-selector{right:0;}","html[dir='rtl'] .add-button-container.__jsx-style-dynamic-selector{left:0;}",".add-button-container.__jsx-style-dynamic-selector:not(.expanded){bottom:".concat(x.a.spacing.xxxs,";}"),".add-button-container.expanded.__jsx-style-dynamic-selector{top:0;bottom:0;width:19.5rem;}","html:not([dir='rtl']) .add-button-container.expanded.__jsx-style-dynamic-selector{background-image:linear-gradient( to right, ".concat(b.a.hexA(x.a.color.darkGreen,0),", ").concat(x.a.color.darkGreen," 100% );}"),"html[dir='rtl'] .add-button-container.expanded.__jsx-style-dynamic-selector{background-image:linear-gradient( to left, ".concat(b.a.hexA(x.a.color.darkGreen,0),", ").concat(x.a.color.darkGreen," 100% );}")]))})),e}return Object(a.a)(p,[{key:"render",value:function(){return this.props.shouldShowNudge?this.renderButtonWithNudge():this.renderButtonWithTooltip()}}]),p}(p.PureComponent);Object(l.a)(F,"defaultProps",{isDisabled:!1});var U=Object(A.b)(Object(S.c)(F)),z=n("cxan"),H=n("VtSi"),Y=n.n(H),K=n("MEC2");function X(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var J=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(X()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"music-note",path:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z",viewBox:"0 0 24 24"})}return a}(K.a),Z=n("yd9k"),q=n("LqVs"),Q=n("Z34l"),$=n("+L/X"),ee=n("dV92"),te=u.a.createElement,ne=Object(p.memo)((function(e){return te(ee.a,{headerTitle:e.title,isShowingModal:e.isShowing,primaryButtonTitle:te(m.a,{id:"builder.common.save"}),onPrimaryButtonClick:e.onConfirm,secondaryButtonTitle:te(m.a,{id:"common.cancel"}),onSecondaryButtonClick:e.onCancel,onDeleteButtonClick:e.onDelete,deleteButtonTitle:te(m.a,{id:"builder.common.delete"}),onCloseButtonClick:e.onCancel,closeButtonLabel:e.intl.formatMessage({id:"common.close"})},te("audio",{controls:!0,controlsList:"nodownload",src:e.backgroundAudioSrc,className:h.a.dynamic([["2581198798",[x.a.spacing.sm]]])}),te(h.a,{id:"2581198798",dynamic:[x.a.spacing.sm]},["audio.__jsx-style-dynamic-selector{width:100%;margin-bottom:".concat(x.a.spacing.sm,";}"),"body:not(.user-is-tabbing) audio.__jsx-style-dynamic-selector{outline:none;}"]))})),ie=Object(S.c)(ne),ae=n("wHix"),oe=n("AuFC"),re=n("ZaeZ"),se=n("ix8t"),ce=n("A7aE"),le=n("+d95"),pe=u.a.createElement;function ue(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var de=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(ue()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"maskStyles",{styles:pe(h.a,{id:"486327778",dynamic:[b.a.center()]},[".mask-tooltip-container.__jsx-style-dynamic-selector{".concat(b.a.center()," height:100%;width:100%;}")]),className:h.a.dynamic([["486327778",[b.a.center()]]])}),Object(l.a)(Object(o.a)(e),"renderMask",(function(){return pe("div",{className:h.a.dynamic([["3506792744",[b.a.hexA(x.a.color.darkGreen,.75),x.a.color.ashGrey,x.a.font.size.extraLarge]]])+" mask"},pe(I.a,{placement:"top",usePositionFixed:!0,targetClassName:y()("mask-tooltip-container",e.maskStyles.className),tooltipContent:e.props.intl.formatMessage({id:"builder.immersive.slidesPanel.slideHidden"})},pe(ae.a,null)),pe(h.a,{id:"3506792744",dynamic:[b.a.hexA(x.a.color.darkGreen,.75),x.a.color.ashGrey,x.a.font.size.extraLarge]},[".mask.__jsx-style-dynamic-selector{position:absolute;z-index:1;top:0;left:0;height:100%;width:100%;background-color:".concat(b.a.hexA(x.a.color.darkGreen,.75),";color:").concat(x.a.color.ashGrey,";font-size:").concat(x.a.font.size.extraLarge,";line-height:0;}")]),e.maskStyles.styles)})),Object(l.a)(Object(o.a)(e),"getImageUrlFromResourceId",(function(){var t=e.props,n=t.resourceId,i=t.storyItem;if(n&&n.length){var a=Object(re.b)({fileName:n,imageNodeWidth:150});return i.getItemResourceImageFullUrl(n,a)}})),e}return Object(a.a)(p,[{key:"render",value:function(){var e=this.props.url||this.getImageUrlFromResourceId(),t="".concat(this.props.config.BASE_URL,"/static/images/builder/immersive/slides-panel/empty.png");return pe("div",{className:h.a.dynamic([["4064378018",[this.props.storyDesign.storyTheme.themeVariables.backgroundColor]],["2946302440",[Object(le.a)(this.props.storyDesign.storyTheme.themeVariables,this.props.color)]]])+" thumbnail-container"},this.props.color?pe("span",{className:h.a.dynamic([["4064378018",[this.props.storyDesign.storyTheme.themeVariables.backgroundColor]],["2946302440",[Object(le.a)(this.props.storyDesign.storyTheme.themeVariables,this.props.color)]]])+" color thumbnail"}):e?pe("img",{src:e,alt:this.props.intl.formatMessage({id:"builder.immersive.slidesPanel.slidePlaceholder"}),className:h.a.dynamic([["4064378018",[this.props.storyDesign.storyTheme.themeVariables.backgroundColor]],["2946302440",[Object(le.a)(this.props.storyDesign.storyTheme.themeVariables,this.props.color)]]])+" image thumbnail"}):pe(se.a,{imageUrl:t}),this.props.hasMask&&this.renderMask(),pe(h.a,{id:"4064378018",dynamic:[this.props.storyDesign.storyTheme.themeVariables.backgroundColor]},[".thumbnail-container.__jsx-style-dynamic-selector{height:7.5rem;width:12rem;position:relative;background-color:".concat(this.props.storyDesign.storyTheme.themeVariables.backgroundColor,";}"),".thumbnail.__jsx-style-dynamic-selector{display:block;width:100%;height:100%;}",".image.__jsx-style-dynamic-selector{object-fit:cover;object-position:center center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}"]),pe(h.a,{id:"2946302440",dynamic:[Object(le.a)(this.props.storyDesign.storyTheme.themeVariables,this.props.color)]},[".color.__jsx-style-dynamic-selector{background-color:".concat(Object(le.a)(this.props.storyDesign.storyTheme.themeVariables,this.props.color),";}")]))}}]),p}(p.PureComponent),he=Object(oe.c)(Object($.b)(Object(ce.b)(Object(S.c)(de))));function me(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var fe=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(me()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"transparency",path:"M4 4v12h12V4zm11 11H5V5h10zM3 3v9H0V0h12v3zm9 3v6H6V6z",viewBox:"0 0 16 16"})}return a}(K.a),ye=u.a.createElement;function ge(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ve=function(e){Object(c.a)(u,e);var t,n=(t=u,function(){var e,n=Object(s.a)(t);if(ge()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function u(e){var t;return Object(i.a)(this,u),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"renderMenu",(function(){return ye(p.Fragment,null,ye(E.a,{target:ye("button",{disabled:t.props.isDisabled,className:h.a.dynamic([["3619234795",[t.props.isDisabled?x.a.color.cadet:x.a.color.ashGrey,x.a.font.size.small]]])+" transition-button"},ye(fe,null)),popper:ye(R.a,null,t.props.transitions.map((function(e){return ye(R.a.Item,{key:e.id,isBold:e.isSelected,onClick:e.onClick},ye(m.a,{id:e.labelId}))}))),placement:"top-end",offset:[0,8],popperOptions:{strategy:"fixed"}}),ye(h.a,{id:"3619234795",dynamic:[t.props.isDisabled?x.a.color.cadet:x.a.color.ashGrey,x.a.font.size.small]},[".transition-button.__jsx-style-dynamic-selector{color:".concat(t.props.isDisabled?x.a.color.cadet:x.a.color.ashGrey,";line-height:0;font-size:").concat(x.a.font.size.small,";}"),".transition-button.__jsx-style-dynamic-selector:disabled{cursor:initial;}"]))})),t.state={isMenuShowing:!1},t}return Object(a.a)(u,[{key:"render",value:function(){var e=this.renderMenu();return ye("div",{className:h.a.dynamic([["1827081162",[x.a.spacing.xs,x.a.spacing.xs]]])+" "+(y()("transition-container",{shown:this.props.isShown})||"")},this.props.isDisabled?ye(I.a,{tooltipContent:this.props.disabledLabel,usePositionFixed:!0,placement:"top"},e):e,ye(h.a,{id:"1827081162",dynamic:[x.a.spacing.xs,x.a.spacing.xs]},[".transition-container.__jsx-style-dynamic-selector{position:absolute;z-index:1;top:calc(50% - 0.8rem);opacity:0;}","html:not([dir='rtl']) .transition-container.__jsx-style-dynamic-selector{left:calc(".concat(x.a.spacing.xs," * -1);}"),"html[dir='rtl'] .transition-container.__jsx-style-dynamic-selector{right:calc(".concat(x.a.spacing.xs," * -1);}"),"@-webkit-keyframes fade-in-__jsx-style-dynamic-selector{0%{opacity:0;}100%{opacity:1;}}","@keyframes fade-in-__jsx-style-dynamic-selector{0%{opacity:0;}100%{opacity:1;}}",".transition-container.shown.__jsx-style-dynamic-selector{-webkit-animation:fade-in-__jsx-style-dynamic-selector 0.5s ease-in-out forwards;animation:fade-in-__jsx-style-dynamic-selector 0.5s ease-in-out forwards;}"]))}}]),u}(p.PureComponent),be=n("lMwr"),xe=u.a.createElement;function Oe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var we=function(e){Object(c.a)(u,e);var t,n=(t=u,function(){var e,n=Object(s.a)(t);if(Oe()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function u(e){var t;return Object(i.a)(this,u),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"onActionMenuButtonClicked",(function(e){e.stopPropagation()})),Object(l.a)(Object(o.a)(t),"renderActionDropdown",(function(){var e,n=xe(R.a.Item,{onClick:t.onDuplicateClicked,isDisabled:t.props.shouldDisableDuplicate},xe(m.a,{id:"builder.common.duplicate"})),i=xe(R.a.Item,{onClick:t.toggleHidden,isDisabled:"function"!==typeof t.props.onToggleHiddenClicked},xe(m.a,{id:"builder.common.".concat(t.props.isHidden?"show":"hide")})),a=xe(R.a.Item,{isDangerous:!0,isDisabled:"function"!==typeof t.props.onDeleteClicked,onClick:t.openDeleteModal},xe(m.a,{id:"builder.common.delete"}));return t.props.getInserterAudioItems&&!t.props.getBackgroundAudioSrc?e=xe(be.a,{mediaPickerUI:"dropdownMenuItem",items:t.props.getInserterAudioItems,source:"immersive-slide",isUploadByLinkDisabled:!0,isDisabled:t.state.isPublicUser}):t.props.getBackgroundAudioSrc&&(e=xe(R.a.Item,{onClick:t.openBackgroundAudioModal},xe(m.a,{id:"builder.immersive.slidesPanel.backgroundAudioOptions"}))),xe(R.a,null,t.state.isPublicUser?xe(I.a,{placement:"top",usePositionFixed:!0,tooltipContent:t.props.intl.formatMessage({id:"publicAccount.disabled"})},e):e,"function"===typeof t.props.onDuplicateClicked&&(t.props.shouldDisableDuplicate?xe(I.a,{placement:"top",usePositionFixed:!0,tooltipContent:t.props.intl.formatMessage({id:"builder.immersive.slidesPanel.duplicateExpressmapError.details"})},n):n),"function"!==typeof t.props.onToggleHiddenClicked?xe(I.a,{placement:"top",usePositionFixed:!0,tooltipContent:t.props.intl.formatMessage({id:"builder.immersive.slidesPanel.hideDisabled"})},i):i,"function"!==typeof t.props.onDeleteClicked?xe(I.a,{placement:"top",usePositionFixed:!0,tooltipContent:t.props.intl.formatMessage({id:"builder.immersive.slidesPanel.hideDisabled"})},a):a)})),Object(l.a)(Object(o.a)(t),"openDeleteModal",(function(e){t.setState({isDeleteModalShowing:!0})})),Object(l.a)(Object(o.a)(t),"onDeleteConfirm",(function(e){e.stopPropagation(),t.setState({isDeleteModalShowing:!1}),"function"===typeof t.props.onDeleteClicked&&t.props.onDeleteClicked()})),Object(l.a)(Object(o.a)(t),"onDeleteCancel",(function(e){e.stopPropagation(),t.setState({isDeleteModalShowing:!1})})),Object(l.a)(Object(o.a)(t),"openBackgroundAudioModal",(function(e){e.stopPropagation(),t.setState({isBackgroundAudioModalShowing:!0})})),Object(l.a)(Object(o.a)(t),"closeBackgroundAudioModal",(function(e){e.stopPropagation(),t.setState({isBackgroundAudioModalShowing:!1})})),Object(l.a)(Object(o.a)(t),"deleteBackgroundAudio",(function(e){t.setState({isDeleteBackgroundAudioModalShowing:!1}),"function"===typeof t.props.deleteBackgroundAudio&&t.props.deleteBackgroundAudio()})),Object(l.a)(Object(o.a)(t),"openDeleteBackgroundAudioModal",(function(e){t.setState({isDeleteBackgroundAudioModalShowing:!0,isBackgroundAudioModalShowing:!1})})),Object(l.a)(Object(o.a)(t),"closeDeleteBackgroundAudioModal",(function(e){t.setState({isDeleteBackgroundAudioModalShowing:!1})})),Object(l.a)(Object(o.a)(t),"onDuplicateClicked",(function(e){var n,i;null===(n=(i=t.props).onDuplicateClicked)||void 0===n||n.call(i)})),Object(l.a)(Object(o.a)(t),"toggleHidden",(function(e){"function"===typeof t.props.onToggleHiddenClicked&&t.props.onToggleHiddenClicked(!t.props.isHidden)})),Object(l.a)(Object(o.a)(t),"onTileClicked",(function(e){t.transitionContainerNode.current&&t.transitionContainerNode.current.contains(e.target)?e.stopPropagation():t.props.onClick()})),t.state={isDeleteModalShowing:!1,isBackgroundAudioModalShowing:!1,isDeleteBackgroundAudioModalShowing:!1,isPublicUser:!1},t.transitionContainerNode=Object(p.createRef)(),t}return Object(a.a)(u,[{key:"componentDidMount",value:function(){var e;return Y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.props.userSession){t.next=5;break}return t.next=3,Y.a.awrap(Object(Q.i)(this.props.userSession));case 3:e=t.sent,this.setState({isPublicUser:e});case 5:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"render",value:function(){var e="";return this.props.isHidden?e=this.props.intl.formatMessage({id:"builder.immersive.slidesPanel.transitionsDisabled.hidden"}):this.props.isReusingMedia&&(e=this.props.intl.formatMessage({id:"builder.immersive.slidesPanel.transitionsDisabled.reused"})),xe("div",{role:"button",onClick:this.props.isHidden?void 0:this.onTileClicked,"aria-disabled":this.props.isHidden?"true":"false",className:h.a.dynamic([["3086486505",[x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxs,x.a.color.warmBlack,x.a.color.coolGrey,x.a.spacing.xxxxs,x.a.spacing.xxxxs,b.a.typography.blockReg(),x.a.color.platinum,x.a.color.platinum,x.a.font.size.large]]])+" "+(y()("slide-tile",{active:this.props.isActive})||"")},!this.props.isFirstTile&&1!==this.props.index&&this.props.transitions.length>0&&xe("div",{ref:this.transitionContainerNode,className:h.a.dynamic([["3086486505",[x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxs,x.a.color.warmBlack,x.a.color.coolGrey,x.a.spacing.xxxxs,x.a.spacing.xxxxs,b.a.typography.blockReg(),x.a.color.platinum,x.a.color.platinum,x.a.font.size.large]]])},xe(ve,{isDisabled:this.props.isHidden||this.props.isReusingMedia,disabledLabel:e,isShown:this.props.isTransitionShown,transitions:this.props.transitions})),xe(he,Object(z.a)({},this.props.thumbnail,{hasMask:this.props.isHidden})),xe("div",{className:h.a.dynamic([["3086486505",[x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxs,x.a.color.warmBlack,x.a.color.coolGrey,x.a.spacing.xxxxs,x.a.spacing.xxxxs,b.a.typography.blockReg(),x.a.color.platinum,x.a.color.platinum,x.a.font.size.large]]])+" bottom-bar"},this.props.getBackgroundAudioSrc&&xe("button",{onClick:this.openBackgroundAudioModal,"aria-label":this.props.intl.formatMessage({id:"builder.immersive.slidesPanel.backgroundAudioOptions"}),className:h.a.dynamic([["3086486505",[x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxs,x.a.color.warmBlack,x.a.color.coolGrey,x.a.spacing.xxxxs,x.a.spacing.xxxxs,b.a.typography.blockReg(),x.a.color.platinum,x.a.color.platinum,x.a.font.size.large]]])+" "+(y()("actions-menu-button","background-audio")||"")},xe(J,null)),xe("span",{className:h.a.dynamic([["3086486505",[x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxs,x.a.color.warmBlack,x.a.color.coolGrey,x.a.spacing.xxxxs,x.a.spacing.xxxxs,b.a.typography.blockReg(),x.a.color.platinum,x.a.color.platinum,x.a.font.size.large]]])+" index"},"number"===typeof this.props.index?this.props.index:void 0),xe(E.a,{target:xe("button",{onClick:this.onActionMenuButtonClicked,className:h.a.dynamic([["3086486505",[x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxs,x.a.color.warmBlack,x.a.color.coolGrey,x.a.spacing.xxxxs,x.a.spacing.xxxxs,b.a.typography.blockReg(),x.a.color.platinum,x.a.color.platinum,x.a.font.size.large]]])+" actions-menu-button"},xe(Z.a,null)),popper:this.renderActionDropdown(),placement:"top-end",offset:[0,8],popperOptions:{strategy:"fixed",modifiers:[{name:"flip",options:{fallbackPlacements:["top-start","top-end"]}}]},stopClickPropagation:!0}),this.state.isDeleteModalShowing&&xe(T.a,{title:xe(m.a,{id:"builder.immersive.deleteSlideTitle"}),description:xe(m.a,{id:"builder.immersive.deleteSlideDescription"}),isShowing:this.state.isDeleteModalShowing,onConfirm:this.onDeleteConfirm,onCancel:this.onDeleteCancel}),this.state.isBackgroundAudioModalShowing&&xe(ie,{title:xe(m.a,{id:"builder.immersive.slidesPanel.backgroundAudioOptions"}),onConfirm:this.closeBackgroundAudioModal,isShowing:this.state.isBackgroundAudioModalShowing,onCancel:this.closeBackgroundAudioModal,onDelete:this.openDeleteBackgroundAudioModal,backgroundAudioSrc:this.props.getBackgroundAudioSrc}),this.state.isDeleteBackgroundAudioModalShowing&&xe(T.a,{isShowing:this.state.isDeleteBackgroundAudioModalShowing,onCancel:this.closeDeleteBackgroundAudioModal,onConfirm:this.deleteBackgroundAudio,title:xe(m.a,{id:"builder.backgroundAudioOptionsModal.deleteTitle"}),description:xe(m.a,{id:"builder.backgroundAudioOptionsModal.deleteDescription"})})),xe(h.a,{id:"3086486505",dynamic:[x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxs,x.a.color.warmBlack,x.a.color.coolGrey,x.a.spacing.xxxxs,x.a.spacing.xxxxs,b.a.typography.blockReg(),x.a.color.platinum,x.a.color.platinum,x.a.font.size.large]},[".slide-tile.__jsx-style-dynamic-selector{padding:".concat(x.a.spacing.xxxs," ").concat(x.a.spacing.xxxs," 0.2rem;margin:").concat(x.a.spacing.xxxs," ").concat(x.a.spacing.xxs,";border:1px solid transparent;cursor:move;position:relative;}"),".slide-tile.active.__jsx-style-dynamic-selector,.slide-tile.__jsx-style-dynamic-selector:not([aria-disabled='true']):hover{background-color:".concat(x.a.color.warmBlack,";}"),".slide-tile.active.__jsx-style-dynamic-selector{border-color:".concat(x.a.color.coolGrey,";}"),".bottom-bar.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;z-index:2;margin-top:".concat(x.a.spacing.xxxxs,";margin-bottom:").concat(x.a.spacing.xxxxs,";width:100%;}"),".index.__jsx-style-dynamic-selector{".concat(b.a.typography.blockReg(),";position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:0;color:").concat(x.a.color.platinum,";}"),".actions-menu-button.__jsx-style-dynamic-selector{color:".concat(x.a.color.platinum,";font-size:").concat(x.a.font.size.large,";line-height:0;}"),"body:not(.user-is-tabbing) .actions-menu-button.__jsx-style-dynamic-selector{outline:none;}",".background-audio.__jsx-style-dynamic-selector{margin-right:auto;margin-left:0;}","html[dir='rtl'] .background-audio.__jsx-style-dynamic-selector{margin-right:0;margin-left:auto;}"]))}}]),u}(p.PureComponent),je=Object(q.b)(Object($.b)(Object(S.c)(we))),Ce=n("sZnk"),ke=n("Pmyh"),Se=n("Ur6V"),Ie=u.a.createElement;function Pe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Re=function(e){Object(c.a)(o,e);var t,n=(t=o,function(){var e,n=Object(s.a)(t);if(Pe()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function o(){return Object(i.a)(this,o),n.apply(this,arguments)}return Object(a.a)(o,[{key:"render",value:function(){var e=this.props.isDisabled&&this.props.disabledLabel?this.props.disabledLabel:this.props.label,t=this.props.icon;return Ie(I.a,{tooltipContent:e,usePositionFixed:!0,placement:"top"},Ie("button",{disabled:this.props.isDisabled,onClick:this.props.onClick,"aria-label":this.props.label,className:h.a.dynamic([["175463900",[x.a.spacing.xxxs,this.props.isDisabled?x.a.color.cadet:x.a.color.ashGrey,x.a.font.size.medium]]])+" action-icon"},Ie(t,{className:h.a.dynamic([["175463900",[x.a.spacing.xxxs,this.props.isDisabled?x.a.color.cadet:x.a.color.ashGrey,x.a.font.size.medium]]])}),Ie(h.a,{id:"175463900",dynamic:[x.a.spacing.xxxs,this.props.isDisabled?x.a.color.cadet:x.a.color.ashGrey,x.a.font.size.medium]},[".action-icon.__jsx-style-dynamic-selector{padding:0 ".concat(x.a.spacing.xxxs,";color:").concat(this.props.isDisabled?x.a.color.cadet:x.a.color.ashGrey,";font-size:").concat(x.a.font.size.medium,";line-height:0;height:100%;}"),"body:not(.user-is-tabbing) .action-icon.__jsx-style-dynamic-selector:focus{outline:none;}"])))}}]),o}(p.PureComponent);Object(l.a)(Re,"defaultProps",{isDisabled:!1});var Ee=Re,De=u.a.createElement;function Te(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Me=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(Te()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"renderTransitionMenu",(function(){return De(R.a,null,t.props.transitions.map((function(e){return De(R.a.Item,{key:e.id,isBold:e.isSelected,onClick:e.onClick},De(m.a,{id:e.labelId}))})))})),Object(l.a)(Object(o.a)(t),"openDeleteModal",(function(){t.setState({isDeleteModalShowing:!0})})),Object(l.a)(Object(o.a)(t),"onDeleteModalConfirm",(function(){t.setState({isDeleteModalShowing:!1}),"function"===typeof t.props.onDeleteClicked&&t.props.onDeleteClicked()})),Object(l.a)(Object(o.a)(t),"onDeleteModalCancel",(function(){t.setState({isDeleteModalShowing:!1})})),Object(l.a)(Object(o.a)(t),"onToggleHiddenClicked",(function(){"function"===typeof t.props.onToggleHiddenClicked&&t.props.onToggleHiddenClicked(!0)})),t.state={isDeleteModalShowing:!1},t}return Object(a.a)(p,[{key:"render",value:function(){var e=this.props.transitions.find((function(e){return e.isSelected}));return De("div",{className:h.a.dynamic([["1675197866",[x.a.color.platinum,b.a.typography.body12(),x.a.font.size.medium,x.a.color.auroMetalSaurus,x.a.color.warmBlack,x.a.spacing.xxxs,x.a.spacing.xxxs,b.a.center(),b.a.typography.body12(),x.a.color.platinum,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxxs]]])+" "+(y()("collapsed-slide-tile",{shown:this.props.isShowing})||"")},De("span",{className:h.a.dynamic([["1675197866",[x.a.color.platinum,b.a.typography.body12(),x.a.font.size.medium,x.a.color.auroMetalSaurus,x.a.color.warmBlack,x.a.spacing.xxxs,x.a.spacing.xxxs,b.a.center(),b.a.typography.body12(),x.a.color.platinum,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxxs]]])+" divider"}),De("div",{className:h.a.dynamic([["1675197866",[x.a.color.platinum,b.a.typography.body12(),x.a.font.size.medium,x.a.color.auroMetalSaurus,x.a.color.warmBlack,x.a.spacing.xxxs,x.a.spacing.xxxs,b.a.center(),b.a.typography.body12(),x.a.color.platinum,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxxs]]])+" slide-info-actions"},De("div",{className:h.a.dynamic([["1675197866",[x.a.color.platinum,b.a.typography.body12(),x.a.font.size.medium,x.a.color.auroMetalSaurus,x.a.color.warmBlack,x.a.spacing.xxxs,x.a.spacing.xxxs,b.a.center(),b.a.typography.body12(),x.a.color.platinum,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxxs]]])+" slide-indicator"},De(m.a,{id:"builder.immersive.slidesPanel.slideNumber",values:{currentOfTotal:De("span",{className:h.a.dynamic([["1675197866",[x.a.color.platinum,b.a.typography.body12(),x.a.font.size.medium,x.a.color.auroMetalSaurus,x.a.color.warmBlack,x.a.spacing.xxxs,x.a.spacing.xxxs,b.a.center(),b.a.typography.body12(),x.a.color.platinum,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxxs]]])},this.props.index+1," / ",this.props.slidesCount)}})),De("div",{className:h.a.dynamic([["1675197866",[x.a.color.platinum,b.a.typography.body12(),x.a.font.size.medium,x.a.color.auroMetalSaurus,x.a.color.warmBlack,x.a.spacing.xxxs,x.a.spacing.xxxs,b.a.center(),b.a.typography.body12(),x.a.color.platinum,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxxs]]])+" action-icons"},"function"===typeof this.props.onDuplicateClicked&&De(Ee,{onClick:this.props.onDuplicateClicked,label:this.props.intl.formatMessage({id:"builder.common.duplicate"}),icon:Ce.a,isDisabled:this.props.shouldDisableDuplicate,disabledLabel:this.props.intl.formatMessage({id:"builder.immersive.slidesPanel.duplicateExpressmapError.details"})}),De(Ee,{onClick:this.onToggleHiddenClicked,label:this.props.intl.formatMessage({id:"builder.common.hide"}),icon:ae.a,isDisabled:"function"!==typeof this.props.onToggleHiddenClicked,disabledLabel:this.props.intl.formatMessage({id:"builder.immersive.slidesPanel.hideDisabled"})}),De(Ee,{onClick:this.openDeleteModal,label:this.props.intl.formatMessage({id:"builder.common.delete"}),icon:ke.a,isDisabled:"function"!==typeof this.props.onDeleteClicked,disabledLabel:this.props.intl.formatMessage({id:"builder.immersive.slidesPanel.hideDisabled"})}),De(T.a,{title:De(m.a,{id:"builder.immersive.deleteSlideTitle"}),description:De(m.a,{id:"builder.immersive.deleteSlideDescription"}),isShowing:this.state.isDeleteModalShowing,onConfirm:this.onDeleteModalConfirm,onCancel:this.onDeleteModalCancel}))),De("span",{className:h.a.dynamic([["1675197866",[x.a.color.platinum,b.a.typography.body12(),x.a.font.size.medium,x.a.color.auroMetalSaurus,x.a.color.warmBlack,x.a.spacing.xxxs,x.a.spacing.xxxs,b.a.center(),b.a.typography.body12(),x.a.color.platinum,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxxs]]])+" "+(y()("divider",{muted:!this.props.shouldShowTransition})||"")}),this.props.shouldShowTransition&&e&&De("div",{className:h.a.dynamic([["1675197866",[x.a.color.platinum,b.a.typography.body12(),x.a.font.size.medium,x.a.color.auroMetalSaurus,x.a.color.warmBlack,x.a.spacing.xxxs,x.a.spacing.xxxs,b.a.center(),b.a.typography.body12(),x.a.color.platinum,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxxs]]])+" slide-info-actions"},De(E.a,{target:De("button",{className:h.a.dynamic([["1675197866",[x.a.color.platinum,b.a.typography.body12(),x.a.font.size.medium,x.a.color.auroMetalSaurus,x.a.color.warmBlack,x.a.spacing.xxxs,x.a.spacing.xxxs,b.a.center(),b.a.typography.body12(),x.a.color.platinum,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxxs]]])+" transition-button"},De(m.a,{id:"builder.immersive.slidesPanel.currentTransition",values:{transition:De(m.a,{id:e.labelId})}}),De("span",{className:h.a.dynamic([["1675197866",[x.a.color.platinum,b.a.typography.body12(),x.a.font.size.medium,x.a.color.auroMetalSaurus,x.a.color.warmBlack,x.a.spacing.xxxs,x.a.spacing.xxxs,b.a.center(),b.a.typography.body12(),x.a.color.platinum,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxxs]]])+" dropdown-icon-container"},De(Se.a,{color:x.a.color.ashGrey}))),popper:this.renderTransitionMenu(),placement:"top-start",offset:[0,8]})),De(h.a,{id:"1675197866",dynamic:[x.a.color.platinum,b.a.typography.body12(),x.a.font.size.medium,x.a.color.auroMetalSaurus,x.a.color.warmBlack,x.a.spacing.xxxs,x.a.spacing.xxxs,b.a.center(),b.a.typography.body12(),x.a.color.platinum,x.a.spacing.xxxs,x.a.spacing.xxxs,x.a.spacing.xxxs]},[".collapsed-slide-tile.__jsx-style-dynamic-selector{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;display:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:".concat(x.a.color.platinum,";").concat(b.a.typography.body12(),";}"),".collapsed-slide-tile.shown.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".divider.__jsx-style-dynamic-selector{width:0.1rem;height:".concat(x.a.font.size.medium,";background-color:").concat(x.a.color.auroMetalSaurus,";}"),".divider.muted.__jsx-style-dynamic-selector{background-color:".concat(x.a.color.warmBlack,";}"),".slide-info-actions.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-self:stretch;-ms-flex-item-align:stretch;align-self:stretch;white-space:pre-wrap;margin:0 ".concat(x.a.spacing.xxxs,";}"),".slide-indicator.__jsx-style-dynamic-selector{margin:0 ".concat(x.a.spacing.xxxs,";}"),".action-icons.__jsx-style-dynamic-selector{".concat(b.a.center(),";-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-align-self:stretch;-ms-flex-item-align:stretch;align-self:stretch;}"),".transition-button.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;".concat(b.a.typography.body12(),";color:").concat(x.a.color.platinum,";padding:0 ").concat(x.a.spacing.xxxs,";overflow:hidden;}"),"body:not(.user-is-tabbing) .transition-button.__jsx-style-dynamic-selector:focus{outline:none;}","html:not([dir='rtl']) .dropdown-icon-container.__jsx-style-dynamic-selector{margin-left:".concat(x.a.spacing.xxxs,";}"),"html[dir='rtl'] .dropdown-icon-container.__jsx-style-dynamic-selector{margin-right:".concat(x.a.spacing.xxxs,";}")]))}}]),p}(p.PureComponent),Ae=Object(S.c)(Me),Ne=u.a.createElement;function Le(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ge=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(Le()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"onNudgeClose",(function(){t.setState({shouldShowAddBtnNudge:!1}),Object(j.h)(t.props.immersiveType)})),Object(l.a)(Object(o.a)(t),"hasSeenNudge",(function(){return Object(j.e)(t.props.immersiveType)})),Object(l.a)(Object(o.a)(t),"canDuplicateIfExpressMap",(function(e){return"expressmap"!==e||t.props.featureDecisions.TEMP_canDuplicateExpressMap})),t.state={shouldShowAddBtnNudge:!1},t.definitelyNeverShowNudge=t.hasSeenNudge(),t}return Object(a.a)(p,[{key:"componentDidUpdate",value:function(e,t){var n=this.props.slides,i=e.slides;this.definitelyNeverShowNudge||this.hasSeenNudge()||1===n.length&&1===i.length&&n[0]&&n[0].mediaPanelBlockType&&!i[0].mediaPanelBlockType&&this.setState({shouldShowAddBtnNudge:!0})}},{key:"render",value:function(){var e=this,t=this.props.slides.find((function(t){return t.id===e.props.selectedSlideId})),n=this.props.slides.filter((function(e){return!e.isHidden})),i=n.findIndex((function(t){return t.id===e.props.selectedSlideId})),a=Object(g.b)()?"right":"left",o=Object(g.b)()?"left":"right",r=[],s=1;this.props.slides.forEach((function(n,i){r.push({id:n.id,isDraggable:!0,node:Ne(je,{isActive:n.id===e.props.selectedSlideId,isHidden:n.isHidden,isReusingMedia:n.isReusingMedia,isFirstTile:0===i,index:n.isHidden?void 0:s,onDeleteClicked:n.delete,onDuplicateClicked:n.duplicate,shouldDisableDuplicate:t&&!e.canDuplicateIfExpressMap(t.mediaPanelBlockType),onToggleHiddenClicked:n.toggleHidden,onClick:n.onClick,transitions:n.transitions,isTransitionShown:!e.props.isDragging,thumbnail:n.thumbnail,getInserterAudioItems:n.getInserterAudioItems,deleteBackgroundAudio:n.deleteBackgroundAudio,getBackgroundAudioSrc:n.getBackgroundAudioSrc})}),n.isHidden||s++}));var c=r.concat({id:"filler",isDraggable:!1,node:Ne("div",{style:{width:"6rem"}})});return Ne("div",{className:h.a.dynamic([["3095308006",[this.props.immersiveOffset.top,this.props.height,b.a.center(),this.props.height,this.props.height,x.a.color.darkGreen,o,b.a.typography.body12(),x.a.color.antiFlashWhite,a,x.a.spacing.xxxs]]])+" container"},Ne("div",{className:h.a.dynamic([["3095308006",[this.props.immersiveOffset.top,this.props.height,b.a.center(),this.props.height,this.props.height,x.a.color.darkGreen,o,b.a.typography.body12(),x.a.color.antiFlashWhite,a,x.a.spacing.xxxs]]])+" "+(y()("slides-panel",this.props.immersiveType,{docked:this.props.isDocked})||"")},Ne(_,{onDeleteClicked:this.props.onDeleteClicked,isExpanded:this.props.isExpanded,onExpandToggleClicked:this.props.onExpandToggleClicked,onSwitchLayoutClicked:this.props.onSwitchLayoutClicked,setDragHandleElement:this.props.setDragHandleElement}),Ne(w.a,{isShowing:this.props.isExpanded,items:c,activeItemId:this.props.selectedSlideId,id:this.props.blockId,handleDragDrop:this.props.handleDragDrop,handleSetData:this.props.handleSetData,handleOnMove:this.props.handleOnMove}),Ne(Ae,{isShowing:!this.props.isExpanded,shouldShowTransition:0!==i&&!!t&&t.transitions.length>0&&!t.isReusingMedia,index:i,slidesCount:n.length,transitions:t?t.transitions:[],onDeleteClicked:t?t.delete:void 0,onDuplicateClicked:t?t.duplicate:void 0,shouldDisableDuplicate:t&&!this.canDuplicateIfExpressMap(t.mediaPanelBlockType),onToggleHiddenClicked:t?t.toggleHidden:void 0}),Ne("button",{onClick:this.props.onInfoClicked,className:h.a.dynamic([["3095308006",[this.props.immersiveOffset.top,this.props.height,b.a.center(),this.props.height,this.props.height,x.a.color.darkGreen,o,b.a.typography.body12(),x.a.color.antiFlashWhite,a,x.a.spacing.xxxs]]])+" "+(y()("info-button",{shown:!this.props.isExpanded})||"")},Ne(O.a,{className:"info-icon"}),Ne("span",{className:h.a.dynamic([["3095308006",[this.props.immersiveOffset.top,this.props.height,b.a.center(),this.props.height,this.props.height,x.a.color.darkGreen,o,b.a.typography.body12(),x.a.color.antiFlashWhite,a,x.a.spacing.xxxs]]])+" info-text"},Ne(m.a,{id:"builder.immersive.slidesPanel.onboardingPrompt.".concat("guided-tour"===this.props.immersiveType?"guidedTour":"slideshow"===this.props.immersiveType?"slideshow":"sidecar")}))),Ne(U,{onClick:this.props.onAddClicked,isExpanded:this.props.isExpanded,shouldShowNudge:this.state.shouldShowAddBtnNudge,onNudgeClose:this.onNudgeClose,isDisabled:this.props.isAddDisabled})),Ne(h.a,{id:"3095308006",dynamic:[this.props.immersiveOffset.top,this.props.height,b.a.center(),this.props.height,this.props.height,x.a.color.darkGreen,o,b.a.typography.body12(),x.a.color.antiFlashWhite,a,x.a.spacing.xxxs]},[".container.__jsx-style-dynamic-selector{position:absolute;left:0;top:calc(100vh - (".concat(this.props.immersiveOffset.top," + ").concat(this.props.height,"));right:0;bottom:0;z-index:11;pointer-events:none;}"),".slides-panel.__jsx-style-dynamic-selector{".concat(b.a.center(),";-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;height:").concat(this.props.height,";position:-webkit-sticky;position:sticky;top:calc(100vh - ").concat(this.props.height,");width:100%;background-color:").concat(x.a.color.darkGreen,";left:0;right:0;z-index:0;pointer-events:auto;}"),".ReactModal__Body--open .slides-panel.sidecar.docked.__jsx-style-dynamic-selector,.ReactModal__Body--open .slides-panel.guided-tour.docked.__jsx-style-dynamic-selector{position:fixed;top:auto;bottom:0;}",".info-button.__jsx-style-dynamic-selector{height:100%;margin-".concat(o,":9rem;").concat(b.a.typography.body12()," color:").concat(x.a.color.antiFlashWhite,";display:none;overflow:hidden;}"),".info-button.shown.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}","body:not(.user-is-tabbing) .info-button.__jsx-style-dynamic-selector:focus{outline:none;}",".info-text.__jsx-style-dynamic-selector{margin-".concat(a,":").concat(x.a.spacing.xxxs,";white-space:nowrap;text-overflow:ellipsis;overflow:hidden;}")]))}}]),p}(p.PureComponent),_e=Object(v.c)(Object(C.b)(Object(k.b)(Ge))),Be=n("mUgm"),We=u.a.createElement;function Ve(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Fe=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(Ve()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"openOnboardingModal",(function(){t.setState({isOnboardingModalShowing:!0})})),Object(l.a)(Object(o.a)(t),"closeOnboardingModal",(function(){t.setState({isOnboardingModalShowing:!1}),Object(j.g)(t.props.type)}));var a=!1;return document&&(a=Object(j.d)(t.props.type)),t.state={isOnboardingModalShowing:t.props.shouldOpenOnboardingModal&&!a},t}return Object(a.a)(p,[{key:"render",value:function(){return We(u.a.Fragment,null,this.props.children,We(_e,{blockId:this.props.id,slides:this.props.slides,selectedSlideId:this.props.selectedSlideId,immersiveType:this.props.type,height:this.props.bottomOffset,onDeleteClicked:this.props.delete,onExpandToggleClicked:this.props.toggleExpand,onAddClicked:this.props.addSlide,handleDragDrop:this.props.handleDragDrop,handleSetData:this.props.handleSetData,handleOnMove:this.props.handleOnMove,isDragging:this.props.isSlidesPanelDragging,isExpanded:this.props.isSlidesPanelExpanded,isAddDisabled:this.props.isAddSlideDisabled,onInfoClicked:this.openOnboardingModal,onSwitchLayoutClicked:this.props.onSwitchLayoutClicked,setDragHandleElement:this.props.setDragHandleElement}),We(Be.a,{onCloseButtonClick:this.closeOnboardingModal,isShowingModal:this.state.isOnboardingModalShowing,immersiveType:this.props.type}))}}]),p}(p.PureComponent);t.a=Fe},"O9+8":function(e,t,n){"use strict";var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("pWxA"),s=n("K/z8"),c=n("sRHE"),l=n("8K1b"),p=n("zjfJ"),u=n("yFcC"),d=n.n(u),h=n("ERkP"),m=n.n(h),f=n("O94r"),y=n.n(f),g=n("NX3A"),v=n("Z4N4"),b=n("nylY"),x=n("eCu0"),O=n("Abkm"),w=n("v7Aj"),j=n("A7aE"),C=n("F9qf"),k=n("rwCY"),S=n("4m8B"),I=n("4EqL"),P=n("0goI"),R=m.a.createElement;function E(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var D=function(e){Object(l.a)(u,e);var t,n=(t=u,function(){var e,n=Object(c.a)(t);if(E()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function u(){var e;Object(a.a)(this,u);for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return e=n.call.apply(n,[this].concat(o)),Object(p.a)(Object(r.a)(e),"renderText",(function(){return R("div",{className:d.a.dynamic([["3285251193",[g.a.spacing.xs,g.a.spacing.xxs,"small"===e.props.screenWidth?"12.8rem":g.a.spacing.xs,e.props.storyDesign.storyTheme.themeVariables.bodyColor,g.a.spacing.xxxs,g.a.spacing.xxs]]])+" full-popup-text"},e.props.categoryName&&R("div",{className:d.a.dynamic([["3285251193",[g.a.spacing.xs,g.a.spacing.xxs,"small"===e.props.screenWidth?"12.8rem":g.a.spacing.xs,e.props.storyDesign.storyTheme.themeVariables.bodyColor,g.a.spacing.xxxs,g.a.spacing.xxs]]])+" subtitle"},R(k.a,{text:e.props.categoryName})),e.props.title&&R("div",{className:d.a.dynamic([["3285251193",[g.a.spacing.xs,g.a.spacing.xxs,"small"===e.props.screenWidth?"12.8rem":g.a.spacing.xs,e.props.storyDesign.storyTheme.themeVariables.bodyColor,g.a.spacing.xxxs,g.a.spacing.xxs]]])+" title"},R(C.a,{text:e.props.title})),e.props.description&&Object(O.g)(e.props.description).replace(/\s+/g,"")&&R(S.a,{text:e.props.description}),R(d.a,{id:"3285251193",dynamic:[g.a.spacing.xs,g.a.spacing.xxs,"small"===e.props.screenWidth?"12.8rem":g.a.spacing.xs,e.props.storyDesign.storyTheme.themeVariables.bodyColor,g.a.spacing.xxxs,g.a.spacing.xxs]},[".full-popup-text.__jsx-style-dynamic-selector{padding:".concat(g.a.spacing.xs," ").concat(g.a.spacing.xxs," ").concat("small"===e.props.screenWidth?"12.8rem":g.a.spacing.xs,";color:").concat(e.props.storyDesign.storyTheme.themeVariables.bodyColor,";}"),".subtitle.__jsx-style-dynamic-selector{margin-bottom:".concat(g.a.spacing.xxxs,";}"),".title.__jsx-style-dynamic-selector{margin-bottom:".concat(g.a.spacing.xxs,";}")]))})),Object(p.a)(Object(r.a)(e),"renderCloseButton",(function(t){var n=e.props.storyDesign.storyTheme.themeVariables;return R("button",{onClick:e.onClose,className:d.a.dynamic([["713657409",[n.backgroundColor,v.a.circle(g.a.spacing.sm),v.a.shadow.xs(),v.a.shadow.sm()]]])+" "+(y()({"in-corner":t})||"")},R(b.a,{height:g.a.spacing.xxs,width:"auto",color:n.bodyColor}),R(d.a,{id:"713657409",dynamic:[n.backgroundColor,v.a.circle(g.a.spacing.sm),v.a.shadow.xs(),v.a.shadow.sm()]},["button.__jsx-style-dynamic-selector{background-color:".concat(n.backgroundColor,";-webkit-transition:box-shadow 0.3s;transition:box-shadow 0.3s;").concat(v.a.circle(g.a.spacing.sm)," ").concat(v.a.shadow.xs()," line-height:0;}"),"button.__jsx-style-dynamic-selector:hover{".concat(v.a.shadow.sm(),";}"),".in-corner.__jsx-style-dynamic-selector{position:absolute;z-index:1;right:0;-webkit-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);transform:translate(50%,-50%);}","html[dir='rtl'] .in-corner.__jsx-style-dynamic-selector{right:unset;left:0;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}"]))})),Object(p.a)(Object(r.a)(e),"renderControls",(function(){var t=e.props.storyDesign.storyTheme.themeVariables.backgroundColor;return R("div",{className:d.a.dynamic([["1078828153",[g.a.spacing.xl,g.a.spacing.xxs,g.a.spacing.sm,t,v.a.hexA(t,.94),v.a.hexA(t,0)]]])},e.renderArrowButton("prev"),e.renderCloseButton(!1),e.renderArrowButton("next"),R(d.a,{id:"1078828153",dynamic:[g.a.spacing.xl,g.a.spacing.xxs,g.a.spacing.sm,t,v.a.hexA(t,.94),v.a.hexA(t,0)]},["div.__jsx-style-dynamic-selector{position:fixed;width:100%;bottom:0;padding:".concat(g.a.spacing.xl," ").concat(g.a.spacing.xxs," ").concat(g.a.spacing.sm,";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-image:linear-gradient( 0deg, ").concat(t," 13%, ").concat(v.a.hexA(t,.94)," 55%, ").concat(v.a.hexA(t,0)," 98% );}")]))})),Object(p.a)(Object(r.a)(e),"renderArrowButton",(function(t){var n=e.getButtonPartialProps(t);return R(w.a,Object(i.a)({size:"3.2rem"},n),R(P.a,{color:e.props.storyDesign.storyTheme.themeVariables.themeColor1,height:"2rem",width:"auto",hasNaturalDirection:"next"===t}))})),Object(p.a)(Object(r.a)(e),"getButtonPartialProps",(function(t){var n=e.props,i=n.goToFullPopup,a=n.getNeighborPopupId,o={isDisabled:!0};if("function"===typeof i&&"function"===typeof a){var r=a(e.props.id,t);return"undefined"===typeof r?o:{onClick:function(){i(r)}}}return o})),Object(p.a)(Object(r.a)(e),"onClose",(function(){e.props.onClose(e.props.id)})),e}return Object(o.a)(u,[{key:"render",value:function(){var e=this.props.storyDesign.storyTheme.themeVariables.backgroundColor;return R(h.Fragment,null,"small"!==this.props.screenWidth&&this.renderCloseButton(!0),R("div",{className:d.a.dynamic([["3463890290",[e,this.props.image?"29.6rem":"20rem",v.a.shadow.md(),v.a.hexA(g.a.color.black,.5),v.a.hexA(g.a.color.bleuDeFrance,.5),v.a.hexA(g.a.color.black,.5)]]])+" "+(y()("full-popup",{highlighted:this.props.shouldHighlight,"on-small-screen":"small"===this.props.screenWidth})||"")},R(I.a,{src:this.props.image,styleMixin:"min-width:".concat("29.6rem",";")}),(this.props.title||this.props.description)&&this.renderText(),"small"===this.props.screenWidth&&this.renderControls(),R(d.a,{id:"3463890290",dynamic:[e,this.props.image?"29.6rem":"20rem",v.a.shadow.md(),v.a.hexA(g.a.color.black,.5),v.a.hexA(g.a.color.bleuDeFrance,.5),v.a.hexA(g.a.color.black,.5)]},[".full-popup.__jsx-style-dynamic-selector{background-color:".concat(e,";min-width:").concat(this.props.image?"29.6rem":"20rem",";max-width:32rem;position:relative;overflow:auto;-webkit-overflow-scrolling:touch;").concat(v.a.shadow.md(),";}"),".full-popup.highlighted.__jsx-style-dynamic-selector{-webkit-animation:highlighted-__jsx-style-dynamic-selector 1s ease-in-out;animation:highlighted-__jsx-style-dynamic-selector 1s ease-in-out;}","@-webkit-keyframes highlighted-__jsx-style-dynamic-selector{0%{box-shadow:0 2px 4px 0 ".concat(v.a.hexA(g.a.color.black,.5),";}5%{box-shadow:0 0 1rem 1rem ").concat(v.a.hexA(g.a.color.bleuDeFrance,.5),";}100%{box-shadow:0 2px 4px 0 ").concat(v.a.hexA(g.a.color.black,.5),";}}"),"@keyframes highlighted-__jsx-style-dynamic-selector{0%{box-shadow:0 2px 4px 0 ".concat(v.a.hexA(g.a.color.black,.5),";}5%{box-shadow:0 0 1rem 1rem ").concat(v.a.hexA(g.a.color.bleuDeFrance,.5),";}100%{box-shadow:0 2px 4px 0 ").concat(v.a.hexA(g.a.color.black,.5),";}}"),".on-small-screen.__jsx-style-dynamic-selector{width:100%;max-width:100%;height:100%;}"])))}}]),u}(h.PureComponent);t.a=Object(x.c)(Object(j.b)(D))},OGR5:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("NX3A"),g=h.a.createElement;function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(v()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"getPadding",(function(t){return e.props.isFullWidth?"0":"0 ".concat(t||e.props.spacing)})),e}return Object(a.a)(p,[{key:"render",value:function(){return g("div",{className:u.a.dynamic([["2291288237",[this.getPadding(this.props.spacingSm),this.props.isFullWidth?"none":this.props.maxWidth||y.a.responsiveBreakpoints.extraLarge,y.a.responsiveBreakpoints.medium,this.getPadding(this.props.spacingMd),y.a.responsiveBreakpoints.large,this.getPadding(this.props.spacingLg)]]])+" "+(f()("content-container",{"full-width":this.props.isFullWidth})||"")},this.props.children,g(u.a,{id:"2291288237",dynamic:[this.getPadding(this.props.spacingSm),this.props.isFullWidth?"none":this.props.maxWidth||y.a.responsiveBreakpoints.extraLarge,y.a.responsiveBreakpoints.medium,this.getPadding(this.props.spacingMd),y.a.responsiveBreakpoints.large,this.getPadding(this.props.spacingLg)]},[".content-container.__jsx-style-dynamic-selector{padding:".concat(this.getPadding(this.props.spacingSm),";max-width:").concat(this.props.isFullWidth?"none":this.props.maxWidth||y.a.responsiveBreakpoints.extraLarge,";margin:0 auto;width:100%;}"),"@media (min-width:".concat(y.a.responsiveBreakpoints.medium,"){.content-container.__jsx-style-dynamic-selector{padding:").concat(this.getPadding(this.props.spacingMd),";}}"),"@media (min-width:".concat(y.a.responsiveBreakpoints.large,"){.content-container.__jsx-style-dynamic-selector{padding:").concat(this.getPadding(this.props.spacingLg),";}}"),"body.print .content-container.__jsx-style-dynamic-selector{padding:0;}"]))}}]),p}(d.PureComponent);Object(l.a)(b,"defaultProps",{isFullWidth:!1,spacing:y.a.spacing.xxs}),t.b=b},OJn3:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("O94r"),h=n.n(d),m=n("NX3A"),f=n("aPTH"),y=n("V+ka"),g=u.a.createElement;function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(v()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return g("div",{className:l.a.dynamic([["220252204",[this.props.appOffset.top,m.a.spacing.xs,m.a.spacing.xxs,m.a.spacing.xxs,m.a.responsiveBreakpoints.large,m.a.spacing.sm,m.a.spacing.xs,m.a.spacing.xs,m.a.print.pageWidthLetter,m.a.print.aspectRatioStandard]]])+" "+(h()("full-cover-container",{end:"end"===this.props.titlePanelPosition})||"")},this.props.children,g("div",{className:l.a.dynamic([["220252204",[this.props.appOffset.top,m.a.spacing.xs,m.a.spacing.xxs,m.a.spacing.xxs,m.a.responsiveBreakpoints.large,m.a.spacing.sm,m.a.spacing.xs,m.a.spacing.xs,m.a.print.pageWidthLetter,m.a.print.aspectRatioStandard]]])+" icon-container"},g(f.a,{width:"auto",height:"4rem",color:m.a.color.white})),g(l.a,{id:"220252204",dynamic:[this.props.appOffset.top,m.a.spacing.xs,m.a.spacing.xxs,m.a.spacing.xxs,m.a.responsiveBreakpoints.large,m.a.spacing.sm,m.a.spacing.xs,m.a.spacing.xs,m.a.print.pageWidthLetter,m.a.print.aspectRatioStandard]},[".full-cover-container.__jsx-style-dynamic-selector{min-height:calc(100vh - ".concat(this.props.appOffset.top,");position:relative;z-index:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}"),".full-cover-container.end.__jsx-style-dynamic-selector{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}",".icon-container.__jsx-style-dynamic-selector{position:absolute;z-index:1;bottom:".concat(m.a.spacing.xs,";}"),"html:not([dir='rtl']) .icon-container.__jsx-style-dynamic-selector{left:".concat(m.a.spacing.xxs,";}"),"html[dir='rtl'] .icon-container.__jsx-style-dynamic-selector{right:".concat(m.a.spacing.xxs,";}"),"@media (min-width:".concat(m.a.responsiveBreakpoints.large,"){.icon-container.__jsx-style-dynamic-selector{bottom:").concat(m.a.spacing.sm,";}html:not([dir='rtl']) .icon-container.__jsx-style-dynamic-selector{left:").concat(m.a.spacing.xs,";}html[dir='rtl'] .icon-container.__jsx-style-dynamic-selector{right:").concat(m.a.spacing.xs,";}}"),"body.print .icon-container.__jsx-style-dynamic-selector{display:none;}","body.print .full-cover-container.__jsx-style-dynamic-selector{min-height:0;height:calc( ".concat(m.a.print.pageWidthLetter," / ").concat(m.a.print.aspectRatioStandard," );}")]))}}]),c}(p.PureComponent);t.a=Object(y.b)(b)},OQVe:function(e,t){e.exports={mode:"light",properties:{outlineHoverColor:[255,255,255,1],maskColor:[255,255,255,1],elasticScale:2,desaturationValue:-.3,timeTransitionA:.015,timeTransitionB:.015},graphics:{node:{sizeNode:8,sizeNodeMid:6},regularPoint:{url:"",color:[8,127,155,1],scale:1,shadowColor:"rgba(0 ,0 ,0 , 0.5)",shadowColorHover:"rgba(0 ,0 ,0 , 1.0)",shadowBlur:5},numberedPoint:{url:"",fontSize:10,fontFamily:"Avenir Next",fontWeight:"700",fontColor:[255,255,255,1],color:[8,127,155,1],scale:1,shadowColor:"rgba(0 ,0 ,0 , 0.5)",shadowColorHover:"rgba(0 ,0 ,0 , 1.0)",shadowBlur:5},iconPoint:{scale:1},line:{width:2,color:[255,0,0,1]},arrow:{width:2,color:[252,59,54,1],heightOfHead:4,dash:[0,0],heads:[!0,!1],scale:1},polygon:{width:2,color:[8,127,155,.9],fill:[8,127,155,.6]},selection:{width:2,color:[8,127,155,.9],fill:[8,127,155,.4]},textLeaderline:{width:2,color:[0,0,0,0],fill:[14,17,22,1],scale:1},textLeaderLineNew:{box:{width:2,color:[0,0,0,0],fill:[14,17,22,1],dash:[0,0]},leaderline:{width:2,color:[0,0,0,0],dash:[0,0]},anchorNode:{width:2,color:[8,127,155,.9],fill:[8,127,155,.6],size:5},handleNode:{width:2,color:[8,127,155,.9],fill:[8,127,155,.6],size:5},scale:1},textLeaderlineTemplate:[{width:2,color:[0,0,0,0],fill:[14,17,22,1],scale:1,fontSize:10,fontFamily:"Avenir Next",fontWeight:"700",lineDash:[10,10]},{width:2,color:[0,0,0,0],fill:[14,17,22,1],scale:1,fontSize:10,fontFamily:"Avenir Next",fontWeight:"700",lineDash:[10,10]},{width:2,color:[0,0,0,0],fill:[14,17,22,1],scale:1,fontSize:10,fontFamily:"Avenir Next",fontWeight:"700",lineDash:[10,10]}]},shortcut:[{select:{key:"",shift:!0,control:!1}},{selectRect:{key:"",shift:!0,control:!1}},{undo:{key:"",shift:!0,control:!1}},{redo:{key:"",shift:!0,control:!1}},{rPoint:{key:"p",shift:!0,control:!1}},{nPoint:{key:"",shift:!0,control:!1}},{polyline:{key:"l",shift:!0,control:!1}},{freehandPolyline:{key:"",shift:!0,control:!1}},{polygon:{key:"g",shift:!0,control:!1}},{freehandPolygon:{key:"",shift:!0,control:!1}},{textleaderline:{key:"",shift:!0,control:!1}},{singleArrow:{key:"",shift:!0,control:!1}},{doubleArrrow:{key:"",shift:!0,control:!1}}]}},OQoL:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"undo",path:"M29 13.5v9a4.505 4.505 0 0 1-4.5 4.5H7v-3h17.5a1.502 1.502 0 0 0 1.5-1.5v-9a1.502 1.502 0 0 0-1.5-1.5H9.043l4.157 4.157-2.122 2.121L3.3 10.5l7.778-7.778L13.2 4.843 9.043 9H24.5a4.505 4.505 0 0 1 4.5 4.5z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},PJBw:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("zjfJ"),l=n("yFcC"),p=n.n(l),u=n("ERkP"),d=n.n(u),h=n("y+Ko"),m=d.a.createElement;function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y={none:"none",fade:"opacity ".concat(Object(h.a)("fade"),"s ease-in-out, visibility ").concat(Object(h.a)("fade"),"s ease-in-out"),"fade-slow":"opacity ".concat(Object(h.a)("fade-slow"),"s ease-in-out, visibility ").concat(Object(h.a)("fade-slow"),"s ease-in-out")},g=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(f()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return m(u.Fragment,null,m("div",{className:p.a.dynamic([["1170463201",[this.props.isVisible?"visible":"hidden",this.props.isVisible?1:0,this.props.isTransitionAnimated?y[this.props.transition]:y.none,this.props.isVisible?"auto":"none"]]])+" pageable-item"},this.props.children),m(p.a,{id:"1170463201",dynamic:[this.props.isVisible?"visible":"hidden",this.props.isVisible?1:0,this.props.isTransitionAnimated?y[this.props.transition]:y.none,this.props.isVisible?"auto":"none"]},[".pageable-item.__jsx-style-dynamic-selector{position:relative;visibility:".concat(this.props.isVisible?"visible":"hidden",";opacity:").concat(this.props.isVisible?1:0,";-webkit-transition:").concat(this.props.isTransitionAnimated?y[this.props.transition]:y.none,";transition:").concat(this.props.isTransitionAnimated?y[this.props.transition]:y.none,";width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:").concat(this.props.isVisible?"auto":"none",";}"),"body.print .pageable-item.__jsx-style-dynamic-selector{visibility:visible;opacity:1;}"]))}}]),c}(u.PureComponent);Object(c.a)(g,"defaultProps",{transition:"fade",isTransitionAnimated:!0}),t.a=g},PSUV:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("Z4N4"),c=n("NX3A"),l=r.a.createElement,p=Object(o.memo)((function(e){var t=e.children;return l("p",{className:a.a.dynamic([["794686401",[s.a.typography.body16(),c.a.color.cambridgeBlue,c.a.spacing.xs,c.a.spacing.xs,c.a.spacing.xxxs]]])},t,l(a.a,{id:"794686401",dynamic:[s.a.typography.body16(),c.a.color.cambridgeBlue,c.a.spacing.xs,c.a.spacing.xs,c.a.spacing.xxxs]},["p.__jsx-style-dynamic-selector{".concat(s.a.typography.body16(),";color:").concat(c.a.color.cambridgeBlue,";padding:").concat(c.a.spacing.xs," ").concat(c.a.spacing.xs," ").concat(c.a.spacing.xxxs,";margin:0;}")]))}));t.a=p},Q1mh:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("D57K"),a=n("ZcpU"),o=n("11In");function r(e){var t=Object(o.a)(e);return Object(o.c)(e)?s(t,e):Object(o.d)(e).then((function(n){if(n)return s(t,e);throw Error("This item can not be shared by "+e.authentication.username+". They are neither the item owner nor an organization admin.")}))}function s(e,t){return t.params=i.a({org:!1,everyone:!1},t.params),"private"===t.access&&(t.params.groups=" "),"org"===t.access&&(t.params.org=!0),"public"===t.access&&(t.params.account=!0,t.params.everyone=!0),Object(a.c)(e,t)}},Q2nK:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("O94r"),c=n.n(s),l=n("NX3A"),p=n("liFR"),u=n("Z4N4"),d=r.a.createElement;t.a=function(e){var t=e.color,n=void 0===t?l.a.color.deepLilac:t,i=e.tooltipContent,o=e.className,r=d("div",{className:a.a.dynamic([["4282109831",[u.a.circle("1rem"),n]]])+" "+(c()("indicator-badge",o)||"")},d(a.a,{id:"4282109831",dynamic:[u.a.circle("1rem"),n]},[".indicator-badge.__jsx-style-dynamic-selector{".concat(u.a.circle("1rem"),";background-color:").concat(n,";}")]));return i?d(p.a,{tooltipContent:i},r):r}},Q56l:function(e){e.exports=JSON.parse('{"0215bd3c-4f18-4109-afb3-6c1bf326355c":{"id":"0215bd3c-4f18-4109-afb3-6c1bf326355c","type":"POLYLINE_BENDING","style":0,"isSelected":false,"isOver":false,"isHidden":false,"nodes":[{"sx":249.000460000025,"sy":280.00046000001294,"long":-130.53059238280233,"lat":47.92399307652024,"ele":0,"proX":-14530599.076997908,"proY":6094219.293080164,"proZ":0,"w":0},{"sx":261.50046000074167,"sy":178.0004600005194,"long":-129.43195957023744,"lat":53.58623909293265,"ele":0,"proX":-14408299.831734404,"proY":7092181.134366068,"proZ":0,"w":0},{"sx":374.00061000002074,"sy":222.0006100000146,"long":-119.54425107421169,"lat":51.227789121693185,"ele":0,"proX":-13307605.156844491,"proY":6661686.32347822,"proZ":0,"w":0},{"sx":409.5006100006656,"sy":152.00061000054984,"long":-116.42413388665383,"lat":54.921068156904504,"ele":0,"proX":-12960275.300310211,"proY":7346562.096907826,"proZ":0,"w":0},{"sx":477.0008200000193,"sy":166.00082000001578,"long":-110.49149824218281,"lat":54.20766928232396,"ele":0,"proX":-12299857.321305674,"proY":7209584.887598906,"proZ":0,"w":0},{"sx":571.0008200005852,"sy":170.0008200005293,"long":-102.22977949213342,"lat":54.001546188921274,"ele":0,"proX":-11380166.996972933,"proY":7170449.129111708,"proZ":0,"w":0},{"sx":581.0008500000172,"sy":214.00085000001638,"long":-101.35087060546653,"lat":51.66598704930345,"ele":0,"proX":-11282327.307255492,"proY":6739955.492296696,"proZ":0,"w":0},{"sx":543.0000000006007,"sy":232.50000000045839,"long":-104.69078906244391,"lat":50.646275840984075,"ele":0,"proX":-11654125.32917727,"proY":6558960.925661643,"proZ":0,"w":0},{"sx":505.0008500000188,"sy":251.0008500000124,"long":-108.03055810546473,"lat":49.60384718182334,"ele":0,"proX":-12025906.718413487,"proY":6377949.726338223,"proZ":0,"w":0},{"sx":447.5000000006503,"sy":265.0000000004268,"long":-113.08434374993733,"lat":48.79993742380207,"ele":0,"proX":-12588491.56293453,"proY":6240982.887995703,"proZ":0,"w":0},{"sx":390.0008500000206,"sy":279.000850000009,"long":-118.13797998046206,"lat":47.982833506051236,"ele":0,"proX":-13151059.774770984,"proY":6103999.416964249,"proZ":0,"w":0},{"sx":376.0000000006846,"sy":313.50000000038006,"long":-119.36852343743264,"lat":45.9132716442119,"ele":0,"proX":-13288043.245799942,"proY":5766461.816401913,"proZ":0,"w":0},{"sx":362.00000000002274,"sy":348.0000000000093,"long":-120.59899218749251,"lat":43.76349993166831,"ele":0,"proX":-13425018.400493644,"proY":5428915.899498403,"proZ":0,"w":0}],"data":{}},"ad2c7a57-03fc-4467-9fde-17f3dbd2285d":{"id":"ad2c7a57-03fc-4467-9fde-17f3dbd2285d","type":"POINT_NUMBERED","style":0,"isSelected":false,"isOver":false,"isHidden":false,"nodes":[{"sx":762.9999604119752,"sy":373.0000418017586,"long":-85.35485156250182,"lat":42.155608438214294,"ele":0,"proX":-9501658.612673154,"proY":5184317.408985885,"proZ":0,"w":0}],"data":{}},"9bf9b7f6-da4f-4443-a605-a70c01ba73d0":{"id":"9bf9b7f6-da4f-4443-a605-a70c01ba73d0","type":"POINT_NUMBERED","style":0,"isSelected":false,"isOver":false,"isHidden":false,"nodes":[{"sx":632.9999758111906,"sy":387.0000259914608,"long":-96.7806328124988,"lat":41.23686519465644,"ele":0,"proX":-10773570.763338149,"proY":5047342.254298886,"proZ":0,"w":0}],"data":{}},"0e6dfbf4-b456-4618-ac74-e22f88962927":{"id":"0e6dfbf4-b456-4618-ac74-e22f88962927","type":"POINT_NUMBERED","style":0,"isSelected":false,"isOver":false,"isHidden":false,"nodes":[{"sx":585.9999923856487,"sy":457.0000491482884,"long":-100.91149218749767,"lat":36.44817779144445,"ele":0,"proX":-11233415.925501645,"proY":4362466.48086389,"proZ":0,"w":0}],"data":{}},"0ff0cad3-511b-4cb2-989c-ac5803640f0f":{"id":"0ff0cad3-511b-4cb2-989c-ac5803640f0f","type":"POINT_NUMBERED","style":0,"isSelected":false,"isOver":false,"isHidden":false,"nodes":[{"sx":753.0000009074213,"sy":485.0000175276927,"long":-86.2337578125016,"lat":34.4435468873515,"ele":0,"proX":-9599498.008878155,"proY":4088516.1714898897,"proZ":0,"w":0}],"data":{}},"801b6223-5f2a-4ca3-9ec1-606bcfb86396":{"id":"801b6223-5f2a-4ca3-9ec1-606bcfb86396","type":"POINT_NUMBERED","style":0,"isSelected":false,"isOver":false,"isHidden":false,"nodes":[{"sx":817.9999932078135,"sy":437.00002793086384,"long":-80.52086718750311,"lat":37.84920421731994,"ele":0,"proX":-8963541.933545657,"proY":4558145.273273889,"proZ":0,"w":0}],"data":{}},"d87a4595-742a-4c82-b6af-138b36888e0c":{"id":"d87a4595-742a-4c82-b6af-138b36888e0c","type":"POINT_REGULAR","style":0,"isSelected":false,"isOver":false,"isHidden":false,"nodes":[{"sx":553.4999962354527,"sy":361.4999708319574,"long":-103.76793783086534,"lat":42.900459369064336,"ele":0,"proX":-11551393.999999998,"proY":5296832.999999999,"proZ":0,"w":0}],"data":{}},"6b67439d-47ea-4d54-a419-3e4af2e60c60":{"id":"6b67439d-47ea-4d54-a419-3e4af2e60c60","type":"POINT_REGULAR","style":0,"isSelected":false,"isOver":false,"isHidden":false,"nodes":[{"sx":500.4999757821886,"sy":317.50000592027675,"long":-108.42614275351427,"lat":45.66813386257346,"ele":0,"proX":-12069942.999999996,"proY":5727326,"proZ":0,"w":0}],"data":{}},"7c483200-7e57-480b-9940-3977a4a08f2e":{"id":"7c483200-7e57-480b-9940-3977a4a08f2e","type":"POINT_REGULAR","style":0,"isSelected":false,"isOver":false,"isHidden":false,"nodes":[{"sx":522.5000093421872,"sy":309.4999565499802,"long":-106.49254605390551,"lat":46.15733368174558,"ele":0,"proX":-11854695.999999996,"proY":5805598,"proZ":0,"w":0}],"data":{}},"f845a6f2-70ab-4d57-8e3d-1ebee670227b":{"id":"f845a6f2-70ab-4d57-8e3d-1ebee670227b","type":"POINT_REGULAR","style":0,"isSelected":false,"isOver":false,"isHidden":false,"nodes":[{"sx":690.5000240352467,"sy":468.50001790977285,"long":-91.72691976252726,"lat":35.630893316002,"ele":0,"proX":-10210993.999999996,"proY":4249951,"proZ":0,"w":0}],"data":{}},"27277812-a278-46ef-8360-abae44349a2a":{"id":"27277812-a278-46ef-8360-abae44349a2a","type":"POINT_REGULAR","style":0,"isSelected":false,"isOver":false,"isHidden":false,"nodes":[{"sx":540.5000182170377,"sy":479.49998358561385,"long":-104.91051402388977,"lat":34.84124612427703,"ele":0,"proX":-11678584.999999996,"proY":4142327.999999999,"proZ":0,"w":0}],"data":{}},"43614e75-a201-43bd-a141-97fdb5dead9d":{"id":"43614e75-a201-43bd-a141-97fdb5dead9d","type":"POINT_REGULAR","style":0,"isSelected":false,"isOver":false,"isHidden":false,"nodes":[{"sx":417.4999746069459,"sy":443.499965835913,"long":-115.72106473180514,"lat":37.39672249897388,"ele":0,"proX":-12882009.999999996,"proY":4494549.999999999,"proZ":0,"w":0}],"data":{}},"55e63b14-d424-42dc-be80-86644e0c85c7":{"id":"55e63b14-d424-42dc-be80-86644e0c85c7","type":"ARROW_SINGLE","style":0,"isSelected":false,"isOver":false,"isHidden":false,"nodes":[{"sx":126.00000000005184,"sy":438.0000000000204,"long":-141.34117968748478,"lat":37.779770631918765,"ele":0,"proX":-15734028.150931386,"proY":4548361.333653275,"proZ":0,"w":0},{"sx":244.00000000004866,"sy":537.0000000000155,"long":-130.97008593748765,"lat":30.59104225117384,"ele":0,"proX":-14579523.275712404,"proY":3579751.311223805,"proZ":0,"w":0},{"sx":362.00000000004434,"sy":636.0000000000114,"long":-120.59899218749061,"lat":22.827254272568712,"ele":0,"proX":-13425018.400493432,"proY":2611141.2887943294,"proZ":0,"w":0}],"data":{}},"63109de9-d630-428f-a293-c84e93c0d989":{"id":"63109de9-d630-428f-a293-c84e93c0d989","type":"ARROW_DOUBLE","style":0,"isSelected":false,"isOver":false,"isHidden":false,"nodes":[{"sx":606.5000000002076,"sy":520.0000000000846,"long":-99.10973437498161,"lat":31.868627598391537,"ele":0,"proX":-11032845.163279556,"proY":3746078.2847716324,"proZ":0,"w":0},{"sx":845.5000000001631,"sy":631.5000000000568,"long":-78.10387499999074,"lat":23.1912952798023,"ele":0,"proX":-8694483.593980458,"proY":2655169.0170861334,"proZ":0,"w":0},{"sx":1108.5000000001141,"sy":525.0000000000832,"long":-54.98864062500081,"lat":31.49466321139865,"ele":0,"proX":-6121307.473789407,"proY":3697158.586669144,"proZ":0,"w":0}],"data":{}},"bbfbc4a3-7261-469b-8a37-c84f5923b2fe":{"id":"bbfbc4a3-7261-469b-8a37-c84f5923b2fe","type":"ARROW_DOUBLE","style":0,"isSelected":false,"isOver":false,"isHidden":false,"nodes":[{"sx":178.50000000002547,"sy":398.0000000000104,"long":-136.72692187498825,"lat":40.50580420777867,"ele":0,"proX":-15220371.32085539,"proY":4939718.918473383,"proZ":0,"w":0},{"sx":362.0000000000223,"sy":522.0000000000075,"long":-120.59899218749254,"lat":31.719222653028435,"ele":0,"proX":-13425018.400493646,"proY":3726510.405531387,"proZ":0,"w":0},{"sx":679.5000000000173,"sy":428.0000000000097,"long":-92.69371874999993,"lat":38.47116226480211,"ele":0,"proX":-10318617.570984907,"proY":4646200.729858383,"proZ":0,"w":0}],"data":{}}}')},QOs2:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("NX3A"),g=n("Z4N4"),v=n("mvvZ"),b=h.a.createElement,x=Object(d.memo)((function(e){var t=e.delay,n=void 0===t?0:t,i=e.aspectRatio,a=e.parentRef,o=e.children,r=Object(d.useState)(a.current?a.current.getBoundingClientRect().width:0),s=r[0],c=r[1],l=Object(d.useState)(a.current?a.current.getBoundingClientRect().height:0),p=l[0],h=l[1],m=Object(d.useRef)(n>0);return Object(d.useEffect)((function(){var e=function(){if(a.current&&0!==i){var e,t,n=a.current.getBoundingClientRect(),o=n.width,r=n.height;if(0!==o&&0!==r)o/r>i?(t=r,e=i*r):(e=o,t=o/i),s!==e&&c(e),p!==t&&h(t)}};m.current?setTimeout((function(){m.current=!1,e()}),n):e();var t=Object(v.c)(e,100);return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[i]),b("div",{className:u.a.dynamic([["2183252744",[g.a.center(),s,p]]])+" aspect-ratio-sizer"},b("div",{className:u.a.dynamic([["2183252744",[g.a.center(),s,p]]])+" content-container"},s>0&&p>0&&o),b(u.a,{id:"2183252744",dynamic:[g.a.center(),s,p]},[".aspect-ratio-sizer.__jsx-style-dynamic-selector{position:relative;width:100%;height:100%;".concat(g.a.center(),";}"),".content-container.__jsx-style-dynamic-selector{width:".concat(s,"px;height:").concat(p,"px;-webkit-transition:width 0.1s ease-in-out,height 0.1s ease-in-out;transition:width 0.1s ease-in-out,height 0.1s ease-in-out;}"),".content-container.__jsx-style-dynamic-selector>*{height:100%;}"]))})),O=n("4S6s"),w=n("Y/5s"),j=n("Bsig"),C=n("A7aE"),k=n("wWnZ"),S=h.a.createElement,I=Object(d.memo)((function(e){var t={styles:S(u.a,{id:"579133735"},[".button.jsx-579133735{-webkit-transition:background-color 0.2s;transition:background-color 0.2s;}"]),className:"jsx-579133735"},n=Object(d.useState)(!1),i=n[0],a=n[1],o=Object(d.useRef)(!0);return S("footer",{className:u.a.dynamic([["748208618",[y.a.spacing.xxs,y.a.spacing.xs,y.a.color.platinum,y.a.color.antiFlashWhite,g.a.center(),y.a.spacing.xs,y.a.spacing.xs,y.a.color.beauBlue]]])},S("div",{className:u.a.dynamic([["748208618",[y.a.spacing.xxs,y.a.spacing.xs,y.a.color.platinum,y.a.color.antiFlashWhite,g.a.center(),y.a.spacing.xs,y.a.spacing.xs,y.a.color.beauBlue]]])+" left-container"},e.info),S("div",{className:u.a.dynamic([["748208618",[y.a.spacing.xxs,y.a.spacing.xs,y.a.color.platinum,y.a.color.antiFlashWhite,g.a.center(),y.a.spacing.xs,y.a.spacing.xs,y.a.color.beauBlue]]])+" right-container"},e.secondaryButtonTitle&&S(k.a,{onClick:e.onSecondaryButtonClick,type:"blank",color:"muted"},e.secondaryButtonTitle),S(k.a,{onClick:function(){o.current&&(o.current=!1,a(!0),e.onPrimaryButtonClick())},disabled:e.shouldDisablePrimaryButton||i,type:"default",color:"primary",className:t.className},e.primaryButtonTitle)),S(u.a,{id:"748208618",dynamic:[y.a.spacing.xxs,y.a.spacing.xs,y.a.color.platinum,y.a.color.antiFlashWhite,g.a.center(),y.a.spacing.xs,y.a.spacing.xs,y.a.color.beauBlue]},["footer.__jsx-style-dynamic-selector{padding:".concat(y.a.spacing.xxs," ").concat(y.a.spacing.xs,";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;box-shadow:0 0 1px 0 ").concat(y.a.color.platinum,";background-color:").concat(y.a.color.antiFlashWhite,";}"),".left-container.__jsx-style-dynamic-selector{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;position:relative;".concat(g.a.center()," padding-right:").concat(y.a.spacing.xs,";}"),"html[dir='rtl'] .left-container.__jsx-style-dynamic-selector{padding-right:0;padding-left:".concat(y.a.spacing.xs,";}"),".left-container.__jsx-style-dynamic-selector::after{content:'';position:absolute;width:0.1rem;height:2rem;background-color:".concat(y.a.color.beauBlue,";right:0;}"),"html[dir='rtl'] .left-container.__jsx-style-dynamic-selector::after{right:unset;left:0;}",".right-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}"]),t.styles)})),P=h.a.createElement;function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var E=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(R()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"renderSidePanel",(function(){return P("aside",{className:u.a.dynamic([["3472523840",[y.a.color.haikuBlack,y.a.color.beauBlue]]])+" side-panel"},t.props.sidePanel,P(u.a,{id:"3472523840",dynamic:[y.a.color.haikuBlack,y.a.color.beauBlue]},[".side-panel.__jsx-style-dynamic-selector{background-color:".concat(y.a.color.haikuBlack,";}"),"body.user-is-tabbing .side-panel.__jsx-style-dynamic-selector :focus{outline-color:".concat(y.a.color.beauBlue,";}"),"body:not(.user-is-tabbing) .side-panel.__jsx-style-dynamic-selector :focus{outline:none;}"]))})),Object(l.a)(Object(o.a)(t),"renderMain",(function(){return P("main",{className:"jsx-2018178594"},t.renderMapStage(),P(I,{primaryButtonTitle:t.props.primaryButtonTitle,onPrimaryButtonClick:t.props.onPrimaryButtonClick,secondaryButtonTitle:t.props.secondaryButtonTitle,onSecondaryButtonClick:t.props.onSecondaryButtonClick,shouldDisablePrimaryButton:t.props.shouldDisablePrimaryButton,info:t.props.info}),P(u.a,{id:"2018178594"},["main.jsx-2018178594{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}"]))})),Object(l.a)(Object(o.a)(t),"renderHeader",(function(){return P("header",{className:u.a.dynamic([["689398764",[y.a.color.white,y.a.spacing.xxs,y.a.spacing.xl,g.a.shadow.sm(),g.a.typography.h3(),y.a.color.darkGreen,y.a.responsiveBreakpoints.extraLarge,y.a.spacing.xs]]])+" header"},P("h3",{className:u.a.dynamic([["689398764",[y.a.color.white,y.a.spacing.xxs,y.a.spacing.xl,g.a.shadow.sm(),g.a.typography.h3(),y.a.color.darkGreen,y.a.responsiveBreakpoints.extraLarge,y.a.spacing.xs]]])},t.props.heading),t.props.toolbar,P(u.a,{id:"689398764",dynamic:[y.a.color.white,y.a.spacing.xxs,y.a.spacing.xl,g.a.shadow.sm(),g.a.typography.h3(),y.a.color.darkGreen,y.a.responsiveBreakpoints.extraLarge,y.a.spacing.xs]},[".header.__jsx-style-dynamic-selector{background:".concat(y.a.color.white,";position:relative;padding:0 ").concat(y.a.spacing.xxs,";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:").concat(y.a.spacing.xl,";").concat(g.a.shadow.sm(),";}"),"h3.__jsx-style-dynamic-selector{".concat(g.a.typography.h3()," color:").concat(y.a.color.darkGreen,";}"),"@media (min-width:".concat(y.a.responsiveBreakpoints.extraLarge,"){.header.__jsx-style-dynamic-selector{padding:0 ").concat(y.a.spacing.xs,";}}")]))})),Object(l.a)(Object(o.a)(t),"renderMapStage",(function(){return P("div",{className:u.a.dynamic([["4271583671",[t.props.shouldMainContentFill?0:y.a.spacing.xxs]]])+" stage"},P("div",{ref:t.mapContainer,className:u.a.dynamic([["4271583671",[t.props.shouldMainContentFill?0:y.a.spacing.xxs]]])+" main-content-container"},t.props.shouldMainContentFill?t.renderMainContent():P(x,{aspectRatio:16/9,parentRef:t.mapContainer,delay:O.a.CONTENT_TRANSITION_DELAY+O.a.CONTENT_TRANSITION_DURATION},t.renderMainContent())),P(u.a,{id:"4271583671",dynamic:[t.props.shouldMainContentFill?0:y.a.spacing.xxs]},[".stage.__jsx-style-dynamic-selector{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;position:relative;}",".main-content-container.__jsx-style-dynamic-selector{--padding:".concat(t.props.shouldMainContentFill?0:y.a.spacing.xxs,";position:absolute;top:var(--padding);bottom:var(--padding);right:var(--padding);left:var(--padding);}")]))})),Object(l.a)(Object(o.a)(t),"renderMainContent",(function(){return P("div",{className:u.a.dynamic([["1203680129",[t.props.storyDesign.storyTheme.themeVariables.backgroundColor,j.c[t.props.theme.id]]]])+" main-content"},t.props.map,P(u.a,{id:"1203680129",dynamic:[t.props.storyDesign.storyTheme.themeVariables.backgroundColor,j.c[t.props.theme.id]]},[".main-content.__jsx-style-dynamic-selector{height:100%;position:relative;background-color:".concat(t.props.storyDesign.storyTheme.themeVariables.backgroundColor,";}"),".main-content.__jsx-style-dynamic-selector::before{content:'';position:absolute;background-color:".concat(j.c[t.props.theme.id],";height:100%;width:100%;}"),".main-content.__jsx-style-dynamic-selector>*{height:100%;}"]))})),t.mapContainer=Object(d.createRef)(),t}return Object(a.a)(p,[{key:"render",value:function(){return P("div",{className:u.a.dynamic([["4120235364",[y.a.responsiveBreakpoints.large,y.a.spacing.xl]]])+" "+(f()("map-editor-layout",this.props.className)||"")},this.renderHeader(),P("div",{className:u.a.dynamic([["4120235364",[y.a.responsiveBreakpoints.large,y.a.spacing.xl]]])+" map-editor-layout-body"},this.props.sidePanel&&this.renderSidePanel(),this.renderMain()),P(u.a,{id:"4120235364",dynamic:[y.a.responsiveBreakpoints.large,y.a.spacing.xl]},[".map-editor-layout.__jsx-style-dynamic-selector{min-width:".concat(y.a.responsiveBreakpoints.large,";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}"),".map-editor-layout-body.__jsx-style-dynamic-selector{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;height:calc(100% - ".concat(y.a.spacing.xl,");display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}"),".user-is-tabbing .map-editor-layout.__jsx-style-dynamic-selector *:focus{outline-width:3px;}"]))}}]),p}(d.PureComponent);t.a=Object(C.b)(Object(w.d)(E))},QQI7:function(e,t,n){"use strict";var i=n("fGyu"),a=n("zygG"),o=n("9fIP"),r=n("MMYH"),s=n("pWxA"),c=n("K/z8"),l=n("sRHE"),p=n("8K1b"),u=n("zjfJ"),d=n("yFcC"),h=n.n(d),m=n("ERkP"),f=n.n(m),y=n("sCFI"),g=n("t7DY"),v=n("VtSi"),b=n.n(v),x=function(){function e(t){Object(o.a)(this,e),this.addon=t}return Object(r.a)(e,[{key:"InitMapticon",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),null,null,null,Promise)}},{key:"InitVisualizationJSAPI",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),null,null,null,Promise)}},{key:"InitVisualizationExternalGLJSAPI",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),null,null,null,Promise)}},{key:"InitDrawingBlock",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),null,null,null,Promise)}},{key:"InitMapfilter",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),null,null,null,Promise)}},{key:"InitQuickCommander",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),null,null,null,Promise)}},{key:"InitSmartCommander",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),null,null,null,Promise)}},{key:"InitSmartDrawing",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),null,null,null,Promise)}},{key:"InitVoiceController",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),null,null,null,Promise)}}]),e}(),O=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"_stopPropagation",!1),Object(u.a)(this,"_enablePan",!0),this.app=t,this.dynamicImport=new x(this)}return Object(r.a)(e,[{key:"MouseEventController",value:function(e){this.stopPropagation||(this.mapticon&&this.mapticon.MouseEventController(e),this.tourTool&&this.tourTool.MouseEventController(e))}},{key:"KeyboardEventController",value:function(e){}},{key:"TouchEventController",value:function(e){}},{key:"GestureEventController",value:function(e){}},{key:"Resize",value:function(e,t){this.mapfilter&&this.mapfilter.Resize(e,t)}},{key:"InitMapticon",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dynamicImport.InitMapticon());case 1:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"InitVisualizationJSAPI",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dynamicImport.InitVisualizationJSAPI());case 1:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"InitVisualizationExternalGLJSAPI",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dynamicImport.InitVisualizationExternalGLJSAPI());case 1:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"InitDrawingBlock",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dynamicImport.InitDrawingBlock());case 1:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"InitMapfilter",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dynamicImport.InitMapfilter());case 1:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"InitQuickCommander",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dynamicImport.InitQuickCommander());case 1:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"InitSmartCommander",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dynamicImport.InitSmartCommander());case 1:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"InitSmartDrawing",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dynamicImport.InitSmartDrawing());case 1:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"InitVoiceController",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dynamicImport.InitVoiceController());case 1:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"enablePan",get:function(){return this.mapticon&&(this._enablePan=this.mapticon.enablePan),this._enablePan},set:function(e){this._enablePan=e}},{key:"stopPropagation",get:function(){return this._stopPropagation},set:function(e){this._stopPropagation=e}}]),e}(),w=function(e){return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(e,{mode:"no-cors"}).then((function(e){return e.text()})).catch((function(e){console.log(e)})));case 1:case"end":return t.stop()}}),null,null,null,Promise)},j=function(e){var t,n,i;return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=new DOMParser,a.next=3,b.a.awrap(t.parseFromString(e,"text/xml"));case 3:return n=a.sent,i=C(n),a.abrupt("return",i);case 6:case"end":return a.stop()}}),null,null,null,Promise)},C=function e(t){var n=new Object;if(1===t.nodeType){if(t.attributes.length>0){n["@attributes"]={};for(var i=0;i<t.attributes.length;i++){var a=t.attributes.item(i);n["@attributes"][a.nodeName]=a.nodeValue}}}else 3===t.nodeType&&t.nodeValue&&(n=t.nodeValue);if(t.hasChildNodes())for(var o=0;o<t.childNodes.length;o++){var r=t.childNodes.item(o),s=r.nodeName;if("undefined"===typeof n[s])n[s]=e(r);else{if("undefined"===typeof n[s].push){var c=n[s];n[s]=[],n[s].push(c)}n[s].push(e(r))}}return n};function k(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var I=function e(){Object(o.a)(this,e),Object(u.a)(this,"pos",[])},P=function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,null,[{key:"GetObjectFromSVGXML",value:function(e){var t,n,i;return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=new DOMParser,a.next=3,b.a.awrap(t.parseFromString(e,"text/xml"));case 3:return n=a.sent,i=C(n),a.abrupt("return",i);case 6:case"end":return a.stop()}}),null,null,null,Promise)}},{key:"GetCanvaseShapePathFromString",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=["M8.5,0","C3.806,0","0,1.817","0,6.543","L0,23.444","L8.5,32","L17,23.444","L17,6.543","C17,1.817","13.194,0","8.5,0","Z","M8.5,15.1","C5.95949015,15.1","3.9,13.0405098","3.9,10.5","C3.9,7.95949015","5.95949015,5.9","8.5,5.9","C11.0405098,5.9","13.1,7.95949015","13.1,10.5","C13.1002653,11.7200772","12.6157091,12.8902593","11.7529842,13.7529842","C10.8902593,14.6157091","9.72007717,15.1002653","8.5,15.1","Z"],i=0,a=[],o=0;o<n.length;++o)if("M"!==n[o][0])if("C"!==n[o][0])if("L"!==n[o][0]){if("0"===n[o][0]||Number(n[o][0])){var r=n[o].split(",").map(Number);a[i+" C"].push(r[0],r[1])}}else a[(i=o)+" L"]=n[o].slice(1).split(",").map(Number);else a[(i=o)+" C"]=n[o].slice(1).split(",").map(Number);else a[o+" M"]=n[o].slice(1).split(",").map(Number);var s=new Path2D;Object.keys(a).map((function(e){var n=a[e];if(n){var i=e.split(" ")[1];"M"===i?s.moveTo(n[0]*t,n[1]*t):"C"===i?s.bezierCurveTo(n[0]*t,n[1]*t,n[2]*t,n[3]*t,n[4]*t,n[5]*t):"L"===i&&s.lineTo(n[0]*t,n[1]*t)}})),s.closePath();var c={type:"path",height:parseInt(e.svg["@attributes"].height,10)*t,width:parseInt(e.svg["@attributes"].width,10)*t,path:a,path2d:s};return c}},{key:"GetCanvaseShapePathFromStringWithScale",value:function(e,t){for(var n=0,i=[],a=0;a<e.length;++a)if("M"!==e[a][0])if("C"!==e[a][0])if("L"!==e[a][0]){if("0"===e[a][0]||Number(e[a][0])){var o=e[a].split(",").map(Number);i[n+" C"].push(o[0],o[1])}}else i[(n=a)+" L"]=e[a].slice(1).split(",").map(Number);else i[(n=a)+" C"]=e[a].slice(1).split(",").map(Number);else i[a+" M"]=e[a].slice(1).split(",").map(Number);var r=new Path2D;return Object.keys(i).map((function(e){var n=i[e];if(n){var a=e.split(" ")[1];"M"===a?r.moveTo(n[0]*t,n[1]*t):"C"===a?r.bezierCurveTo(n[0]*t,n[1]*t,n[2]*t,n[3]*t,n[4]*t,n[5]*t):"L"===a&&r.lineTo(n[0]*t,n[1]*t)}})),r.closePath(),r}},{key:"GetCanvaseShapePathFromSVGXML",value:function(e){e=JSON.parse(JSON.stringify(e));for(var t=[],n=e.svg.g.g.path["@attributes"].d.split(" "),i=0,a=0;a<n.length;++a)if("M"!==n[a][0])if("C"!==n[a][0])if("L"!==n[a][0]){if("0"===n[a][0]||Number(n[a][0])){var o=n[a].split(",").map(Number);t[i+" C"].push(o[0],o[1])}}else t[(i=a)+" L"]=n[a].slice(1).split(",").map(Number);else t[(i=a)+" C"]=n[a].slice(1).split(",").map(Number);else t[a+" M"]=n[a].slice(1).split(",").map(Number);var r=new Path2D;return Object.keys(t).map((function(e){var n=t[e];if(n){var i=e.split(" ")[1];"M"===i?r.moveTo(n[0],n[1]):"C"===i?r.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]):"L"===i&&r.lineTo(n[0],n[1])}})),r.closePath(),{type:"path",height:parseInt(e.svg["@attributes"].height,10),width:parseInt(e.svg["@attributes"].width,10),path:t,path2d:r}}},{key:"GetCanvaseShapePathFromOptiSVGXML",value:function(e){if((e=JSON.parse(JSON.stringify(e))).svg&&e.svg.path){var t,n=[],i=e.svg.path["@attributes"].d,a="",o=k(i);try{for(o.s();!(t=o.n()).done;){var r=t.value;"c"!==r.toLowerCase()&&"-"!==r||(a+=" "),"s"===r.toLowerCase()&&(a+=" "),a+=r}}catch(m){o.e(m)}finally{o.f()}i=a.split(" ");for(var s="",c=0;c<i.length;c+=2)s+="".concat(i[c],",").concat(i[c+1]," ");i=s.split(" ");for(var l=0,p=0;p<i.length;++p)try{if("M"===i[p][0]){n[p+" M"]=i[p].slice(1).split(",").map(Number);continue}if("C"===i[p][0]||"c"===i[p][0]||i[p].includes("c")){n[(l=p)+" C"]=i[p].slice(1).split(",").map(Number);continue}if("0"===i[p][0]||Number(i[p][0])){var u=i[p].split(",").map(Number);n[l+" C"].push(u[0],u[1])}}catch(f){}var d=new Path2D;return Object.keys(n).map((function(e){var t=n[e];if(t){var i=e.split(" ")[1];"M"===i?d.moveTo(t[0],t[1]):"C"===i?d.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]):"L"===i&&d.lineTo(t[0],t[1])}})),d.closePath(),{type:"path",height:parseInt(e.svg["@attributes"].height,10),width:parseInt(e.svg["@attributes"].width,10),path:n,path2d:d}}if(e.svg&&e.svg.circle){var h=new Path2D;return{type:"circle",height:parseInt(e.svg["@attributes"].height,10),width:parseInt(e.svg["@attributes"].width,10),path:[],path2d:h}}}},{key:"GetCanvaseShapePathFromOptiSVGXMLPath",value:function(e){if((e=JSON.parse(JSON.stringify(e))).svg&&e.svg.path)return e.svg.path["@attributes"].d}},{key:"GetCanvaseShapePathFromOptiSVGXMLStorymaps",value:function(e){if((e=JSON.parse(JSON.stringify(e))).svg&&e.svg.path){var t,n=e.svg.path["@attributes"].d,i="",a=k(n);try{for(a.s();!(t=a.n()).done;){var o=t.value;"c"!==o.toLowerCase()&&"-"!==o||(i+=" "),"s"===o.toLowerCase()&&(i+=" "),"l"===o.toLowerCase()&&(i+=" "),i+=o}}catch(v){a.e(v)}finally{a.f()}n=i.split(" ");for(var r=[],s=0;s<n.length;++s){if(n[s])if(n[s].includes("C")){var c=new I;c.type="C";var l=n[s].substr(1,n[s].length).split(",");c.pos.push(+l[0]),c.pos.push(+l[1]),l=n[++s].split(","),c.pos.push(+l[0]),c.pos.push(+l[1]),l=n[++s].split(","),c.pos.push(+l[0]),c.pos.push(+l[1]),r.push(c)}else if(n[s].includes("L")){var p=new I;p.type="L";var u=n[s].substr(1,n[s].length).split(",");p.pos.push(+u[0]),p.pos.push(+u[1]),r.push(p)}else if(n[s].includes("M")){var d=new I;d.type="M";var h=n[s].substr(1,n[s].length).split(",");d.pos.push(+h[0]),d.pos.push(+h[1]),r.push(d)}else if(n[s].includes("Z")){var m=new I;m.type="Z",r.push(m)}}var f=new Path2D;return Object.keys(r).map((function(e){var t=r[e];if(t){var n=e.split(" ")[1];"M"===n?f.moveTo(t[0],t[1]):"C"===n?f.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]):"L"===n&&f.lineTo(t[0],t[1])}})),f.closePath(),{type:"path",height:parseInt(e.svg["@attributes"].height,10),width:parseInt(e.svg["@attributes"].width,10),path:r,path2d:f}}if(e.svg&&e.svg.circle){var y=[],g=new Path2D;return Object.keys(y).map((function(e){var t=y[e];if(t){var n=e.split(" ")[1];"M"===n?g.moveTo(t[0],t[1]):"C"===n?g.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]):"L"===n&&g.lineTo(t[0],t[1])}})),g.closePath(),{type:"circle",height:parseInt(e.svg["@attributes"].height,10),width:parseInt(e.svg["@attributes"].width,10),path:y,path2d:g}}}},{key:"GetCanvaseShapePathFromSVGXMLIcon",value:function(e){e=JSON.parse(JSON.stringify(e));for(var t=[],n=e.svg.g.path["@attributes"].d.split(" "),i=0,a=0;a<n.length;++a)if("M"!==n[a][0])if("L"===n[a][0]||Number(n[a][0]))t[a+" L"]=n[a].slice(1).split(",").map(Number);else if("Z"===n[a][0]||Number(n[a][0]))t[a+" Z"]="";else if("C"!==n[a][0]){if("0"===n[a][0]||Number(n[a][0])){var o=n[a].split(",").map(Number);t[i+" C"].push(o[0],o[1])}}else t[(i=a)+" C"]=n[a].slice(1).split(",").map(Number);else t[a+" M"]=n[a].slice(1).split(",").map(Number);var r=new Path2D;return Object.keys(t).map((function(e){var n=t[e];if(n){var i=e.split(" ")[1];"M"===i?r.moveTo(n[0],n[1]):"C"===i?r.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]):"L"===i&&r.lineTo(n[0],n[1])}})),r.closePath(),{type:"path",height:parseInt(e.svg["@attributes"].height,10),width:parseInt(e.svg["@attributes"].width,10),path:t,path2d:r}}}]),e}(),R=n("Q56l"),E=n("OQVe"),D=function(){function e(t){Object(o.a)(this,e),this.model=t,this.ImportAssets()}return Object(r.a)(e,[{key:"ImportAssets",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.theme=E,this.dummyShape=R;case 2:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"ImportAsset",value:function(e){var t;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.a.awrap(j(e));case 2:return t=n.sent,n.abrupt("return",P.GetCanvaseShapePathFromSVGXML(t));case 4:case"end":return n.stop()}}),null,null,null,Promise)}}]),e}(),T=function e(){Object(o.a)(this,e),Object(u.a)(this,"isStandalone",!1),Object(u.a)(this,"compileMode",g.f.DEVELOPMENT)},M=function(){function e(t){Object(o.a)(this,e),this.div=t}return Object(r.a)(e,[{key:"Default",value:function(){this.div?this.div.style.cursor!==g.g.DEFAULT&&(this.div.style.cursor=g.g.DEFAULT):document.body.style.cursor!==g.g.DEFAULT&&(document.body.style.cursor=g.g.DEFAULT)}},{key:"Creating",value:function(){this.div?this.div.style.cursor!==g.g.CROSSHAIR&&(this.div.style.cursor=g.g.CROSSHAIR):document.body.style.cursor!==g.g.CROSSHAIR&&(document.body.style.cursor=g.g.CROSSHAIR)}},{key:"Dragging",value:function(){this.div?this.div.style.cursor!==g.g.MOVE&&(this.div.style.cursor=g.g.MOVE):document.body.style.cursor!==g.g.MOVE&&(document.body.style.cursor=g.g.MOVE)}},{key:"Hovering",value:function(){this.div?this.div.style.cursor!==g.g.POINTER&&(this.div.style.cursor=g.g.POINTER):document.body.style.cursor!==g.g.POINTER&&(document.body.style.cursor=g.g.POINTER)}},{key:"Texting",value:function(){this.div?this.div.style.cursor!==g.g.TEXT&&(this.div.style.cursor=g.g.TEXT):document.body.style.cursor!==g.g.TEXT&&(document.body.style.cursor=g.g.TEXT)}}]),e}(),A=function(){function e(){Object(o.a)(this,e),this.DetectBrowser(),this.DetectIsMoile()}return Object(r.a)(e,[{key:"DetectBrowser",value:function(){-1===navigator.userAgent.indexOf("Edge")?(-1!==(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))&&(this._type=g.d.OPERA),-1===navigator.userAgent.indexOf("Chrome")?-1===navigator.userAgent.indexOf("Safari")?-1===navigator.userAgent.indexOf("Firefox")?(-1!==navigator.userAgent.indexOf("MSIE")&&(this._type=g.d.IE),this._type=g.d.UNKNOWN):this._type=g.d.FIREFOX:this._type=g.d.SAFARI:this._type=g.d.CHROME):this._type=g.d.EDGE}},{key:"DetectIsMoile",value:function(){this._isMobile=!1,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(this._isMobile=!0)}},{key:"type",get:function(){return this._type}},{key:"isMobile",get:function(){return this._isMobile}}]),e}(),N=function e(){Object(o.a)(this,e),this.clickLeft=!0,this.clickMiddle=!0,this.clickRight=!0,this.clickDouble=!0,this.mouseDown=!0,this.mouseMove=!0,this.mouseDrag=!0,this.keyDown=!0},L=function(){function e(t){Object(o.a)(this,e),this.currentAccessibility=new N,this.drawing=new N,this.interactiveViewer=new N,this.viewer=new N,this.interactiveViewer.clickLeft=!0,this.interactiveViewer.clickMiddle=!1,this.interactiveViewer.clickRight=!1,this.interactiveViewer.clickDouble=!1,this.interactiveViewer.mouseDown=!0,this.interactiveViewer.mouseMove=!0,this.interactiveViewer.mouseDrag=!1,this.interactiveViewer.keyDown=!1,this.viewer.clickLeft=!1,this.viewer.clickMiddle=!1,this.viewer.clickRight=!1,this.viewer.clickDouble=!1,this.viewer.mouseDown=!1,this.viewer.mouseMove=!1,this.viewer.mouseDrag=!1,this.viewer.keyDown=!1,this.mode=t}return Object(r.a)(e,[{key:"SetAccessibility",value:function(e,t){e===g.k.DRAWING&&(this.drawing.clickLeft=t.clickLeft,this.drawing.clickMiddle=t.clickMiddle,this.drawing.clickRight=t.clickRight,this.drawing.clickDouble=t.clickDouble,this.drawing.mouseDown=t.mouseDown,this.drawing.mouseMove=t.mouseMove,this.drawing.mouseDrag=t.mouseDrag),e===g.k.INTERACTIVE_VIEWER&&(this.currentAccessibility=this.interactiveViewer),e===g.k.OBSERVE_VIEWER&&(this.currentAccessibility=this.viewer)}},{key:"mode",set:function(e){this._mode=e,e===g.k.DRAWING&&(this.currentAccessibility=this.drawing),e===g.k.INTERACTIVE_VIEWER&&(this.currentAccessibility=this.interactiveViewer),e===g.k.OBSERVE_VIEWER&&(this.currentAccessibility=this.viewer)},get:function(){return this._mode}}]),e}();function G(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var B=function(e,t){var n=e[0].x,i=e[1].x,a=t[0].x,o=t[1].x,r=e[0].y,s=e[1].y,c=t[0].y,l=t[1].y;return n<=o&&i>=a&&r<=l&&s>=c},W=function(e){var t=new Oe(e.x,e.y,e.z);return t.long=e.long,t.lat=e.lat,t.proX=e.proX,t.proY=e.proY,t.proZ=e.proZ,t},V=function(e,t){return new Oe(e.x-t.x,e.y-t.y,e.z-t.z)},F=function(){return new Oe(0,0,0)},U=function(e,t){return new Oe(e.x+t.x,e.y+t.y,e.z+t.z)},z=function(e,t){return new Oe(e.x*t,e.y*t,e.z*t)},H=function(e,t){return new Oe(e.x+.5*(t.x-e.x),e.y+.5*(t.y-e.y),e.z+.5*(t.z-e.z))},Y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;return e.long.toFixed(n)===t.long.toFixed(n)&&e.lat.toFixed(n)===t.lat.toFixed(n)},K=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z);return t<1e-4?new Oe(e.x,e.y,e.z):new Oe(e.x/t,e.y/t,e.z/t)},X=function(e){for(var t=0,n=0,i=e.length;n<i;n++){t+=e[n].x*e[n===e.length-1?0:n+1].y*.5,t-=e[n===e.length-1?0:n+1].x*e[n].y*.5}return Math.abs(t)},J=function(e){for(var t=0,n=0;n<e.length-1;n++)t+=(e[n].long-e[n+1].long)*(e[n].lat+e[n+1].lat);return t*=.5},Z=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)+(e.z-t.z)*(e.z-t.z))},q=function(e,t,n,i){return Math.sqrt((e-n)*(e-n)+(t-i)*(t-i))},Q=function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])+(e[2]-t[2])*(e[2]-t[2]))},$=function(e,t){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)+(e.z-t.z)*(e.z-t.z)},ee=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},te=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=[],a=(t.x-e.x)/n,o=(t.y-e.y)/n,r=(t.z-e.z)/n,s=0;s<n;++s){var c=e.x+a*s,l=e.y+o*s,p=e.z+r*s;i.push(new Oe(c,l,p))}return i},ne=function(e,t){var n=t.lat*Math.PI/180-e.lat*Math.PI/180,i=t.long*Math.PI/180-e.long*Math.PI/180,a=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e.lat*Math.PI/180)*Math.cos(t.lat*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6378.137*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))},ie=function(e,t){var n=t.y*Math.PI/180-e.y*Math.PI/180,i=t.x*Math.PI/180-e.x*Math.PI/180,a=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e.y*Math.PI/180)*Math.cos(t.y*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6378.137*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))},ae=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Oe(e,t,0),i=0,a=0;a<1e4;++a){var o=ie(n,new Oe(n.x+i,n.y,n.z));if(1<o&&o<1.001)return n.x+i;i+=1e-5}return-1},oe=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Oe(e,t,0),i=0,a=0;a<1e4;++a){var o=ie(n,new Oe(n.x,n.y+i,n.z));if(1<o&&o<1.001)return n.y+i;i+=1e-5}return-1},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ae(e,t),i=oe(e,t);return new Oe(n,i,0)},se=function(e,t){return Math.acos(function(e,t){return ee(K(e),K(t))}(e,t))},ce=function(e,t){return 180*se(e,t)/Math.PI},le=function(e,t){var n=t.Sub(e),i=new Oe(1,0,0);return n.y>0?-1*ce(i,n):ce(i,n)},pe=function(e){for(var t=[],n=0;n<e.length;++n)if(n<e.length-1){var i=new Oe(e[n].x,e[n].y,e[n].z),a=new Oe(e[n+1].x,e[n+1].y,e[n+1].z);a.x-=i.x,a.y-=i.y,a.z-=i.z;var o=ee(new Oe(1,0,0),K(a));t.push(o)}else{var r=new Oe(e[n].x,e[n].y,e[n].z),s=new Oe(e[0].x,e[0].y,e[0].z);s.x-=r.x,s.y-=r.y,s.z-=r.z;var c=ee(new Oe(1,0,0),K(s));t.push(c)}return t},ue=function(e){for(var t=xe(e),n=[],i=0;i<e.length;++i){var a=void 0,o=void 0;i<e.length-1?(a=new Oe(e[i].x-t.x,e[i].y-t.y,e[i].z-t.z),o=new Oe(e[i+1].x-t.x,e[i+1].y-t.y,e[i+1].z-t.z)):(a=new Oe(e[i].x-t.x,e[i].y-t.y,e[i].z-t.z),o=new Oe(e[0].x-t.x,e[0].y-t.y,e[0].z-t.z));var r=ee(K(a),K(o));n.push(r)}return n},de=function(e,t,n){t.x+=1e-5,t.y+=1e-5;var i=me(t,n),a=he(t,n,e.x,e.y,i,!0);return Z(e,a)},he=function(e,t,n,i,a){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],r=new Oe(e.x,e.y,e.z),s=new Oe(t.x,t.y,t.z),c=s.Sub(r),l=new Oe(n,i,0),p=l.Sub(r);c.Unitize();var u=r.Add(c.Mult(ee(p,c)));return o?ge(u,a)?u:Z(e,u)<Z(t,u)?new Oe(e.x,e.y,e.z):new Oe(t.x,t.y,t.z):u},me=function(e,t){var n=[],i=0,a=0,o=0;i=e.x<t.x?e.x:t.x,a=e.y<t.y?e.y:t.y,o=e.z<t.z?e.z:t.z;var r=new Oe(i,a,o);i=e.x>t.x?e.x:t.x,a=e.y>t.y?e.y:t.y,o=e.z>t.z?e.z:t.z;var s=new Oe(i,a,o);return n.push(new Oe(r.x,r.y,r.z)),n.push(new Oe(s.x,r.y,r.z)),n.push(new Oe(s.x,s.y,r.z)),n.push(new Oe(r.x,s.y,r.z)),n},fe=function(e){for(var t=[],n=Number.MAX_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,c=0;c<e.length;++c)n>e[c].x&&(n=e[c].x),i>e[c].y&&(i=e[c].y),a>e[c].z&&(a=e[c].z),o<e[c].x&&(o=e[c].x),r<e[c].y&&(r=e[c].y),s<e[c].z&&(s=e[c].z);return t.push(new Oe(n,i,a)),t.push(new Oe(o,r,s)),t},ye=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=[],i=0;i<e.length-1;++i){var a=e[i];if(!1!==a.d)for(var o=i+1;o<e.length;++o)Z(a,e[o])<t&&(e[o].d=!1)}for(var r=0;r<e.length;++r)!0===e[r].d&&n.push(e[r]);return n},ge=function(e,t){for(var n=e.x,i=e.y,a=!1,o=0,r=t.length-1;o<t.length;r=o++){var s=t[o].x,c=t[o].y,l=t[r].x,p=t[r].y;c>i!==p>i&&n<(l-s)*(i-c)/(p-c)+s&&(a=!a)}return a},ve=function(e,t,n,i){var a,o,r,s=0,c=0,l=!1,p=!1;a=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y);var u=new Oe(0,0,0);if(0!==a)return s=e.y-n.y,c=e.x-n.x,o=(i.x-n.x)*s-(i.y-n.y)*c,r=(t.x-e.x)*s-(t.y-e.y)*c,s=o/a,c=r/a,u.x=e.x+s*(t.x-e.x),u.y=e.y+s*(t.y-e.y),s>0&&s<1&&(l=!0),c>0&&c<1&&(p=!0),l&&p?u:void 0},be=function(e,t){return new Oe(e.x+t.x,e.y+t.y,e.z+t.z)},xe=function(e){for(var t=new Oe(0,0,0),n=0,i=e.length;n<i;++n)t.Add(e[n]);return t.Mult(1/e.length),t},Oe=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(o.a)(this,e),Object(u.a)(this,"x",0),Object(u.a)(this,"y",0),Object(u.a)(this,"z",0),Object(u.a)(this,"w",0),Object(u.a)(this,"long",0),Object(u.a)(this,"lat",0),Object(u.a)(this,"ele",0),Object(u.a)(this,"proX",0),Object(u.a)(this,"proY",0),Object(u.a)(this,"proZ",0),Object(u.a)(this,"alt",0),Object(u.a)(this,"d",!0),Object(u.a)(this,"isModified",!1),this.x=t,this.y=n,this.z=i}return Object(r.a)(e,[{key:"Mult",value:function(t){return this.x*=t,this.y*=t,this.z*=t,new e(this.x,this.y,this.z)}},{key:"DivByVal",value:function(t){return this.x/=t,this.y/=t,this.z/=t,new e(this.x,this.y,this.z)}},{key:"Add",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,new e(this.x,this.y,this.z)}},{key:"Sub",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,new e(this.x,this.y,this.z)}},{key:"Unitize",value:function(){return this.Normalize()}},{key:"Normalize",value:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return e<1e-4?this:(this.x=this.x/e,this.y=this.y/e,this.z=this.z/e,this)}}]),e}(),we=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"preX",0),Object(u.a)(this,"frame",0),Object(u.a)(this,"dirctionTo",0),Object(u.a)(this,"minVOther",new Oe(0,0,0)),Object(u.a)(this,"maxVOther",new Oe(0,0,0)),Object(u.a)(this,"offset",0),Object(u.a)(this,"_offsetNumber",40075016.72548127),this.mapViewCore=t,this.minV=new Oe(this.mapViewCore.mapView.extent.xmin,this.mapViewCore.mapView.extent.ymax),this.maxV=new Oe(this.mapViewCore.mapView.extent.xmax,this.mapViewCore.mapView.extent.ymin),this.cenV=new Oe(this.mapViewCore.mapView.center.x,this.mapViewCore.mapView.center.y)}return Object(r.a)(e,[{key:"Update",value:function(){if(this.mapViewCore.mapView.extent&&this.mapViewCore.mapView.center){if(this.mapViewCore.mapView.state&&this.mapViewCore.mapView.state.worldScreenWidth){this.offset=.5*this.mapViewCore.mapView.state.worldScreenWidth,this.minV.proX=this.mapViewCore.mapView.extent.xmin,this.minV.proY=this.mapViewCore.mapView.extent.ymax<2e7?this.mapViewCore.mapView.extent.ymax:2e7,this.UpdateProjection(this.minV),this.minV.x=this.cenV.x-this.offset;var e=this.mapViewCore.model.app.implementations.annotationCanvasInstance.geometryCommon.gcmdSupporting.ToMap(this.minV.x,this.minV.y);this.minV.proX=e[2],this.maxV.proX=this.mapViewCore.mapView.extent.xmax,this.maxV.proY=this.mapViewCore.mapView.extent.ymin>-2e7?this.mapViewCore.mapView.extent.ymin:-2e7,this.UpdateProjection(this.maxV),this.maxV.x=this.cenV.x+this.offset,e=this.mapViewCore.model.app.implementations.annotationCanvasInstance.geometryCommon.gcmdSupporting.ToMap(this.maxV.x,this.maxV.y),this.maxV.proX=e[2],this.cenV.proX=this.mapViewCore.mapView.center.x,this.cenV.proY=this.mapViewCore.mapView.center.y,this.UpdateProjection(this.cenV),this.minVOther.proX=this.minV.proX,this.minVOther.proY=this.maxV.proY,this.minVOther.x=this.cenV.x-this.offset,this.minVOther.y=this.maxV.y,this.maxVOther.proX=this.maxV.proX,this.maxVOther.proY=this.minV.proY,this.maxVOther.x=this.cenV.x+this.offset,this.maxVOther.y=this.minV.y;var t=.5*this.mapViewCore.model.app.implementations.annotationCanvasInstance.graphicsCoreWrapper.canvasWrapper.aCanvasMask.canvas.width-this.offset;this.mapViewCore.model.app.implementations.annotationCanvasInstance.graphicsCoreWrapper.canvasWrapper.aCanvasMask.width=t}this.UpdateFrameNumber(),this.UpdateDirection()}}},{key:"Print",value:function(){}},{key:"UpdateDeprecated",value:function(){this.mapViewCore.mapView.extent&&this.mapViewCore.mapView.center&&(this.minV.proX=this.mapViewCore.mapView.extent.xmin,this.minV.proY=this.mapViewCore.mapView.extent.ymax<2e7?this.mapViewCore.mapView.extent.ymax:2e7,this.maxV.proX=this.mapViewCore.mapView.extent.xmax,this.maxV.proY=this.mapViewCore.mapView.extent.ymin>-2e7?this.mapViewCore.mapView.extent.ymin:-2e7,this.mapViewCore.model.app.implementations.annotationCanvasInstance&&this.mapViewCore.model.app.implementations.annotationCanvasInstance.graphicsCoreWrapper.canvasWrapper.aCanvasMask.width>0&&this.UpdateProjectionBasedonMask(this.mapViewCore.model.app.implementations.annotationCanvasInstance.graphicsCoreWrapper.canvasWrapper.aCanvasMask.width),this.cenV.proX=this.mapViewCore.mapView.center.x,this.cenV.proY=this.mapViewCore.mapView.center.y,this.UpdateProjection(this.minV),this.UpdateProjection(this.maxV),this.UpdateProjection(this.cenV),this.minVOther.proX=this.minV.proX,this.minVOther.proY=this.maxV.proY,this.minVOther.x=this.minV.x,this.minVOther.y=this.maxV.y,this.maxVOther.proX=this.maxV.proX,this.maxVOther.proY=this.minV.proY,this.maxVOther.x=this.maxV.x,this.maxVOther.y=this.minV.y,this.UpdateFrameNumber(),this.UpdateDirection())}},{key:"Render",value:function(e){this.mapViewCore.model.app.implementations.annotationCanvasInstance&&this.mapViewCore.model.app.implementations.annotationCanvasInstance.activeCommandController.acProperties.isHiddenLog||(e.strokeStyle="#ff0000",e.lineWidth=2,e.beginPath(),e.arc(this.minV.x,this.minV.y,15,0,6.28),e.closePath(),e.stroke(),e.beginPath(),e.arc(this.minVOther.x,this.minVOther.y,15,0,6.28),e.closePath(),e.stroke(),e.beginPath(),e.arc(this.maxV.x,this.maxV.y,15,0,6.28),e.stroke(),e.beginPath(),e.arc(this.maxVOther.x,this.maxVOther.y,15,0,6.28),e.stroke(),e.beginPath(),e.arc(this.cenV.x,this.cenV.y,10,0,6.28),e.closePath(),e.stroke(),e.font="13px Arial",e.fillText("frame:"+this.frame.toString()+", dirctionTo: "+this.dirctionTo,this.cenV.x-15,this.cenV.y-15))}},{key:"UpdateWrappingProjectedPosPoint",value:function(e,t){for(var n=e,i=0;i<20;++i)if(n<this.mapViewCore.extent.minV.proX)return[n+=this._offsetNumber,t];n=e;for(var a=0;a<20;++a)if(this.mapViewCore.extent.maxV.proX<n)return[n-=this._offsetNumber,t];return[e,t]}},{key:"UpdateWrappingProjectedPos",value:function(e,t){if(0===this.dirctionTo&&(e<this.mapViewCore.extent.minV.proX&&(this.dirctionTo=1),e>this.mapViewCore.extent.minV.proX&&(this.dirctionTo=-1)),1===this.dirctionTo)for(;e<this.mapViewCore.extent.minV.proX;)e+=this._offsetNumber;else if(-1===this.dirctionTo)for(;this.mapViewCore.extent.maxV.proX<e;)e-=this._offsetNumber;return[e,t]}},{key:"WrappingProjectedPosForShape",value:function(e,t,n){return 0<n?e+=this._offsetNumber:e-=this._offsetNumber,[e,t]}},{key:"UpdateProjection",value:function(e){var t=this.mapViewCore.model.appCoreWrapper.arcGISWrapper.projectionController.ToScreenFromProjectedPos(e.proX,e.proY);e.x=t[0],e.y=t[1]}},{key:"UpdateProjectionBasedonMask",value:function(e){var t=this.mapViewCore.model.appCoreWrapper.arcGISWrapper.projectionController.ToMap(e,0);this.minV.proX=t[2],t=this.mapViewCore.model.appCoreWrapper.arcGISWrapper.projectionController.ToMap(this.mapViewCore.mapView.width-e,0),this.maxV.proX=t[2]}},{key:"UpdateFrameNumber",value:function(){this.frame=Math.floor(this.mapViewCore.extent.minV.proX/4e7)+1}},{key:"UpdateDirection",value:function(){Math.floor(this.preX)===Math.floor(this.minV.proX)?this.dirctionTo=0:this.preX<this.minV.proX?this.dirctionTo=1:this.dirctionTo=-1,this.preX=this.minV.proX}},{key:"offsetNumber",get:function(){return this._offsetNumber}}]),e}(),je=function(){function e(t,n,i){Object(o.a)(this,e),Object(u.a)(this,"enablePan",!0),Object(u.a)(this,"isTexTediting",!1),Object(u.a)(this,"isPanZoomByKeyboard",!1),Object(u.a)(this,"zoomLevel",0),Object(u.a)(this,"_isViewChanging",!1),this.model=t,n&&i&&(this.map=n.map,this.mapView=n,this.extent=new we(this),this.mapView.constraints={rotationEnabled:!1},this.mPoint=i,this.mPoint.spatialReference=this.mapView.extent.spatialReference,this.zoomLevel=n.zoom,this.AppendMapViewEvent())}return Object(r.a)(e,[{key:"InitPost",value:function(){this.mapView&&this.extent.Update()}},{key:"zoomShfit",value:function(e){this.zoomLevel=e,this.model.app.implementations&&this.model.app.implementations.annotationCanvasInstance&&(this.model.app.implementations.annotationCanvasInstance.activeCommandController.zoomLevelForMoving=e)}},{key:"AppendMapViewEvent",value:function(){var e=this;this.mapView&&(this.mapView.watch("extent",(function(){e.UpdateExtent()})),this.mapView.watch("stationary",(function(t){e.mapView&&(e.isViewChanging=!t,e.zoomShfit(e.mapView.zoom),e.UpdateExtent(),e.model.app.implementations&&e.model.app.implementations.annotationCanvasInstance&&e.model.app.implementations.annotationCanvasInstance.activeCommandController.acProperties.isPanning&&(e.model.app.implementations.annotationCanvasInstance.activeCommandController.acProperties.isPanning=!1),e.model.app.implementations&&e.model.app.implementations.annotationCanvasInstance&&(e.model.app.implementations.annotationCanvasInstance.activeCommandController.acProperties.extentChanging=e.isViewChanging,e.model.app.implementations.annotationCanvasInstance.activeCommandController.acProperties.isPanning||(e.isViewChanging?e.model.app.implementations.annotationCanvasInstance.activeCommandController.acProperties.isZooming=!0:e.model.app.implementations.annotationCanvasInstance.activeCommandController.acProperties.isZooming=!1)))})),this.mapView.on("pointer-enter",(function(){e.model.app.implementations.annotationCanvasInstance.activeCommandController.acProperties.insideMap=!0})),this.mapView.on("pointer-leave",(function(){e.model.app.implementations.annotationCanvasInstance.activeCommandController.acProperties.insideMap=!1})),this.mapView.watch("ready",(function(e){})),this.mapView.watch("zoom",(function(t){e.model.app.implementations&&e.model.app.implementations.annotationCanvasInstance&&(e.model.app.implementations.annotationCanvasInstance.activeCommandController.acProperties.isPanning=!1,e.zoomLevel=t)})),this.mapView.watch("size",(function(){e.mapView&&e.model.app.Resize(e.mapView.size[0],e.mapView.size[1])})))}},{key:"GetMapMargin",value:function(){if(!this.mapView)return 0;var e=this.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView;return e.content?.5*e.width-.5*e.content.worldScreenWidth:0}},{key:"ZoomProcessing",value:function(e){e>3||this.zoomLevel!==e&&(this.zoomLevel=e,this.model.app.implementations.annotationCanvasInstance&&this.mapView&&this.model.app.implementations.annotationCanvasInstance.graphicsCoreWrapper.ResizeCanvas(this.mapView.size[0],this.mapView.size[1]))}},{key:"UpdateExtent",value:function(){this.model.app.implementations&&this.model.app.implementations.annotationCanvasInstance&&this.mapView&&(this.model.app.implementations.annotationCanvasInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.canvasLoopController.stop=!1,this.ZoomProcessing(this.mapView.zoom),this.extent.Update(),this.model.app.implementations.annotationCanvasInstance.activeCommandController.acProperties.isPanning=!0),this.model.app.implementations.UpdateExtentSVG()}},{key:"isViewChanging",set:function(e){this._isViewChanging=e,this.model.app.implementations.isViewChanging=e},get:function(){return this._isViewChanging}}]),e}();function Ce(e){return function(){var t,n=Object(l.a)(e);if(ke()){var i=Object(l.a)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return Object(c.a)(this,t)}}function ke(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Se=function(){function e(t){Object(o.a)(this,e),this.projectionController=t}return Object(r.a)(e,[{key:"GetProjectionType",value:function(){return this.type}},{key:"RemapLong",value:function(e){return(e+180)*Math.PI*2/360*-1}},{key:"RemapLat",value:function(e){return(e+90)*Math.PI/180}}]),e}(),Ie=function(e){Object(p.a)(n,e);var t=Ce(n);function n(e){var i;return Object(o.a)(this,n),i=t.call(this,e),n.mercatorProjection=Object(s.a)(i),i.type=g.r.MERCATOR,i}return Object(r.a)(n,[{key:"ToMap",value:function(e,t){var n=this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mapView;if(!n)return[e,t,e,t];var i=n.toMap({x:e,y:t});return i?[i.longitude,i.latitude,i.x,i.y]:[e,t,e,t]}},{key:"ToScreen",value:function(e,t){if(!this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mPoint)return[e,t];if(!this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mapView)return[e,t];this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mPoint.longitude=e,this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mPoint.latitude=t;var n=this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.toScreen(this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mPoint);return[n.x,n.y]}},{key:"ToScreenFromGeoPos",value:function(e,t){if(!this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mapView)return[e,t];var n=this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.toMap({x:e,y:t});n.spatialReference=this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.spatialReference,(n=n.normalize()).longitude=e,n.latitude=t;var i=this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.toScreen(n);return[i.x,i.y]}},{key:"WrappingProjectedPos",value:function(e,t){return this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.extent.UpdateWrappingProjectedPos(e,t)}},{key:"WrappingProjectedPosForShape",value:function(e,t,n){return this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.extent.WrappingProjectedPosForShape(e,t,n)}},{key:"ToScreenFromProjectedPos",value:function(e,t){if(!this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mPoint)return[0,0];if(!this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mapView)return[0,0];var n=this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mPoint;n.spatialReference=this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.spatialReference,n.x=e,n.y=t;var i=this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.toScreen(n);return i?[i.x,i.y]:[0,0]}},{key:"ToScreenOld",value:function(e,t){if(!this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mapView)return[e,t];var n=this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.toMap({x:e,y:t});n.spatialReference=this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.spatialReference,n.longitude=e,n.latitude=t;var i=this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.toScreen(n);return[i.x,i.y]}},{key:"ToScreenWrapVec",value:function(e,t){return this.ToScreen(e,t)}},{key:"ToScreenWrapShape",value:function(e){if(!this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mapView)return[[[0,0],[0,0]],[[0,0],[0,0]]];var t={type:"polyline",paths:e};return this.projectionController.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.wrapAroundGeometry(t)}}]),n}(Se),Pe=function(e){Object(p.a)(n,e);var t=Ce(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).type=g.r.SPHERICALPROJECTION,i}return Object(r.a)(n,[{key:"ToMap",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=this.RemapLong(e),a=this.RemapLat(t),o=n*Math.cos(i)*Math.sin(a),r=n*Math.sin(i)*Math.sin(a),s=n*Math.cos(a);return[o,r,s]}},{key:"ToScreen",value:function(e,t){return[-1,-1]}},{key:"ToScreenFromGeoPos",value:function(e,t){return[-1,-1]}},{key:"ToScreenFromProjectedPos",value:function(e,t){return[-1,-1]}},{key:"ToScreenWrapVec",value:function(e,t){return[-1,-1]}},{key:"ToScreenWrapShape",value:function(e){return[[[0,0]]]}},{key:"WrappingProjectedPos",value:function(){return[-1,-1]}},{key:"WrappingProjectedPosForShape",value:function(){return[-1,-1]}}]),n}(Se),Re=function(){function e(t){Object(o.a)(this,e),this.appCoreWrapper=t,this.appCoreWrapper.appProperties.isStandalone?this.activeProjection=new Pe(this):this.activeProjection=new Ie(this)}return Object(r.a)(e,[{key:"ShiftProjection",value:function(e){}},{key:"ToMap",value:function(e,t){return this.activeProjection.ToMap(e,t)}},{key:"ToScreen",value:function(e,t){return this.activeProjection.ToScreen(e,t)}},{key:"ToScreenFromGeoPos",value:function(e,t){return this.activeProjection.ToScreenFromGeoPos(e,t)}},{key:"ToScreenFromProjectedPos",value:function(e,t){return this.activeProjection.ToScreenFromProjectedPos(e,t)}},{key:"ToScreenWrapVec",value:function(e,t){return this.activeProjection.ToScreenWrapVec(e,t)}},{key:"ToScreenWrapShape",value:function(e){return this.activeProjection.ToScreenWrapShape(e)}},{key:"WrappingProjectedPos",value:function(e,t){return this.activeProjection.WrappingProjectedPos(e,t)}},{key:"WrappingProjectedPosForShape",value:function(e,t,n){return this.activeProjection.WrappingProjectedPosForShape(e,t,n)}}]),e}(),Ee=function(){function e(t,n,i){Object(o.a)(this,e),Object(u.a)(this,"isCustomAPI",!1),this.appCoreWrapper=t,this.mapViewCore=new je(this.appCoreWrapper.model,n,i),this.projectionController=new Re(this.appCoreWrapper)}return Object(r.a)(e,[{key:"InitPost",value:function(){this.mapViewCore.InitPost()}}]),e}(),De=function(){function e(t,n,i,a,r){Object(o.a)(this,e),this.model=t,this.appProperties=new T,a||(this.appProperties.isStandalone=!0),this.appAccessibility=new L(i),this.browserUtility=new A,this.arcGISWrapper=new Ee(this,a,r)}return Object(r.a)(e,[{key:"InitPost",value:function(){this.arcGISWrapper.InitPost()}}]),e}(),Te=function(){function e(t){Object(o.a)(this,e),this.model=t}return Object(r.a)(e,[{key:"MouseEventController",value:function(e){this.model.app.implementations&&this.model.app.implementations.MouseEventController(e),this.model.app.addon&&this.model.app.addon.MouseEventController(e)}},{key:"KeyboardEventController",value:function(e){this.model.app.implementations&&this.model.app.implementations.KeyboardEventController(e),this.model.app.addon&&this.model.app.addon.KeyboardEventController(e)}},{key:"KeyboardEventControllerFromDocument",value:function(e){this.model.app.implementations&&this.model.app.implementations.KeyboardEventControllerFromDocument(e)}},{key:"TouchEventController",value:function(e){this.model.app.implementations&&this.model.app.implementations.TouchEventController(e)}},{key:"GestureEventController",value:function(e){this.model.app.implementations&&this.model.app.implementations.GestureEventController(e)}}]),e}(),Me=function(){function e(t,n){Object(o.a)(this,e),this.modelViewWrapper=t,this.Init(n)}return Object(r.a)(e,[{key:"Init",value:function(e){var t=document.createElement("div");this.divNGraphicsHost=t,t.style.position="absolute",t.style.top="0px",t.style.pointerEvents="none",t.id="ngraphics-host",this.div=document.createElement("div"),this.div.id="Annotation-V7",this.div.style.zIndex="1",t.appendChild(this.div);var n=document.getElementById(e);n&&(this.divHost=n,this.divHost.parentNode&&this.divHost.appendChild(t)),this.modelViewWrapper.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView?(this.div.style.width=this.modelViewWrapper.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.width+"px",this.div.style.height=this.modelViewWrapper.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.height+"px"):(this.div.style.width=this.divHost.clientWidth+"px",this.div.style.height=this.divHost.clientHeight+"px")}},{key:"RemoveDiv",value:function(){this.divHost.removeChild(this.divNGraphicsHost)}}]),e}(),Ae=function(){function e(t,n){Object(o.a)(this,e),this.model=t,this.viewWrapper=new Me(this,n),this.model.appCoreWrapper.appProperties.compileMode,g.f.PRODUCTION}return Object(r.a)(e,[{key:"InitPost",value:function(){}}]),e}(),Ne=function(){function e(t,n){Object(o.a)(this,e),this.Init(t,n)}return Object(r.a)(e,[{key:"Init",value:function(e,t){if("undefined"!==typeof document){var n={};e.forEach((function(e,t,i){n[t]=e}));var i=this.Encode(JSON.stringify(n,null,4)),a=new Blob([i],{type:"esri/drawingTool"}),o=URL.createObjectURL(a),r=document.createElement("a");r.setAttribute("href",o),r.setAttribute("download",t);var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(s)}}},{key:"Encode",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e.charCodeAt(n));return new Uint8Array(t)}},{key:"Dummy",value:function(){}}]),e}(),Le=function(){function e(t,n){Object(o.a)(this,e),this.Init(t,n)}return Object(r.a)(e,[{key:"Init",value:function(e,t){if("undefined"!==typeof document){var n=this.Encode(JSON.stringify(e,null,4)),i=new Blob([n],{type:"esri/drawingTool"}),a=URL.createObjectURL(i),o=document.createElement("a");o.setAttribute("href",a),o.setAttribute("download",t);var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(r)}}},{key:"Encode",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e.charCodeAt(n));return new Uint8Array(t)}},{key:"Dummy",value:function(){}}]),e}(),Ge=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"_frame",0),Object(u.a)(this,"_frameSkip",2),this.mouseInteraction=t}return Object(r.a)(e,[{key:"AppendEvent",value:function(){}}]),e}();function _e(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Be=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(_e()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).mouseInteraction.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView&&t.AppendEvent(),t}return Object(r.a)(i,[{key:"AppendEvent",value:function(){var e=this;this.mouseInteraction.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView&&(this.mouseInteraction.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.on("pointer-down",(function(t){if("touch"===t.pointerType)return e.mouseInteraction.model.app.implementations.isTouchEvent=!0,void e.mouseInteraction.MouseDownArcGIS(t);e.mouseInteraction.model.app.implementations.isTouchEvent=!1,e.mouseInteraction.MouseDownArcGIS(t)})),this.mouseInteraction.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.on("pointer-up",(function(t){if("touch"===t.pointerType)return e.mouseInteraction.model.app.implementations.isTouchEvent=!0,void e.mouseInteraction.MouseUpArcGIS(t);e.mouseInteraction.model.app.implementations.isTouchEvent=!1,e.mouseInteraction.MouseUpArcGIS(t)})),this.mouseInteraction.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.on("pointer-move",(function(t){if("touch"===t.pointerType)return e.mouseInteraction.model.app.implementations.isTouchEvent=!0,void e.mouseInteraction.MouseMoveArcGIS(t);e.mouseInteraction.model.app.implementations.isTouchEvent=!1,e.mouseInteraction.MouseMoveArcGIS(t)})),this.mouseInteraction.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.on("pointer-enter",(function(t){"touch"!==t.pointerType&&(e.mouseInteraction.model.appCoreWrapper.model.app.implementations.annotationCanvasInstance&&e.mouseInteraction.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView&&(e.mouseInteraction.model.appCoreWrapper.model.app.implementations.annotationCanvasInstance.activeCommandController.activeCommand.acs.type!==g.b.POINT_REGULAR&&e.mouseInteraction.model.appCoreWrapper.model.app.implementations.annotationCanvasInstance.activeCommandController.activeCommand.acs.type!==g.b.POINT_NUMBERED||e.mouseInteraction.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.focus()),e.mouseInteraction.model.app.implementations.isTouchEvent=!1,e.mouseInteraction.MouseEnterLeaveGIS(t,!0))})),this.mouseInteraction.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.on("pointer-leave",(function(t){"touch"!==t.pointerType&&(e.mouseInteraction.model.app.implementations.isTouchEvent=!1,e.mouseInteraction.MouseEnterLeaveGIS(t,!1))})),this.mouseInteraction.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.on("drag",(function(t){if("touch"===t.native.pointerType)return e.mouseInteraction.model.app.implementations.isTouchEvent=!0,e.mouseInteraction.MouseDragClickArcGIS(t),void(e.mouseInteraction.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan||t.stopPropagation());e.mouseInteraction.model.app.implementations.isTouchEvent=!1,e.mouseInteraction.MouseDragClickArcGIS(t),e.mouseInteraction.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan&&e.mouseInteraction.model.app.addon.enablePan||t.stopPropagation()})),this.mouseInteraction.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.on("drag",["Shift"],(function(e){})),this.mouseInteraction.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.on("click",(function(t){if("touch"===t.native.pointerType)return e.mouseInteraction.model.app.implementations.isTouchEvent=!0,void e.mouseInteraction.MouseClickLeftArcGIS(t);e.mouseInteraction.model.app.implementations.isTouchEvent=!1,0!==t.button?1!==t.button?2!==t.button||e.mouseInteraction.MouseClickRightArcGIS(t):e.mouseInteraction.MouseClickMiddleArcGIS(t):e.mouseInteraction.MouseClickLeftArcGIS(t)})),this.mouseInteraction.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.on("double-click",(function(t){if("touch"===t.native.pointerType)return e.mouseInteraction.model.app.implementations.isTouchEvent=!0,e.mouseInteraction.MouseDoubleClickArcGIS(t),void(e.mouseInteraction.isEnableZoomByDoubleClick||t.stopPropagation());e.mouseInteraction.model.app.implementations.isTouchEvent=!1,e.mouseInteraction.MouseDoubleClickArcGIS(t),e.mouseInteraction.isEnableZoomByDoubleClick||t.stopPropagation()})))}}]),i}(Ge);function We(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ve=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(We()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),t=n.call(this,e),Object(u.a)(Object(s.a)(t),"prevent",!1),Object(u.a)(Object(s.a)(t),"delay",100),t.AppendEvent(),t}return Object(r.a)(i,[{key:"AppendEvent",value:function(){var e=this,t=this.mouseInteraction.model.modelViewWrapper.viewWrapper.div;t.style.pointerEvents="auto",void 0===t||null===t?(document.onclick=function(t){e.timer=setTimeout((function(){e.prevent||e.mouseInteraction.MouseClick(t),e.prevent=!1}),e.delay)},document.ondblclick=function(t){clearTimeout(e.timer),e.prevent=!0,e.mouseInteraction.MouseDoubleClick(t)},document.onmousedown=function(t){e.mouseInteraction.MouseDown(t)},document.onmouseup=function(t){e.mouseInteraction.MouseUp(t)},document.onmousemove=function(t){e.mouseInteraction.MouseMove(t)}):(t.onclick=function(t){e.timer=setTimeout((function(){e.prevent||e.mouseInteraction.MouseClick(t),e.prevent=!1}),e.delay)},t.ondblclick=function(t){clearTimeout(e.timer),e.prevent=!0,e.mouseInteraction.MouseDoubleClick(t)},t.onmousedown=function(t){e.mouseInteraction.MouseDown(t)},t.onmouseup=function(t){e.mouseInteraction.MouseUp(t)},t.onmousemove=function(t){e.mouseInteraction.MouseMove(t)})}}]),i}(Ge),Fe=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"x",-1),Object(u.a)(this,"y",-1),Object(u.a)(this,"z",-1),Object(u.a)(this,"preX",-1),Object(u.a)(this,"preY",-1),Object(u.a)(this,"preZ",-1),Object(u.a)(this,"CLICK_TYPE",g.e.MOVE),Object(u.a)(this,"isDown",!1),Object(u.a)(this,"isDoubleClick",!1),Object(u.a)(this,"isMove",!1),Object(u.a)(this,"pressedShift",!1),Object(u.a)(this,"pressedAlt",!1),Object(u.a)(this,"pressedCtrl",!1),Object(u.a)(this,"lat",-1),Object(u.a)(this,"long",-1),Object(u.a)(this,"wheel",0),Object(u.a)(this,"preWheel",0),Object(u.a)(this,"isActive",!0),null!==t&&void 0!==t&&(this.app=t)}return Object(r.a)(e,[{key:"DeepCopy",value:function(){var t=new e(this.app);return t.x=this.x,t.y=this.y,t.z=this.z,t.preX=this.preX,t.preY=this.preY,t.preZ=this.preZ,t.pressedAlt=this.pressedAlt,t.pressedShift=this.pressedShift,t.pressedCtrl=this.pressedCtrl,t.isDoubleClick=this.isDoubleClick,t.isDown=this.isDown,t.isMove=this.isMove,t.lat=this.lat,t.long=this.long,t.wheel=this.wheel,t.preWheel=this.preWheel,t.yGLPicking=this.yGLPicking,t.CLICK_TYPE=this.CLICK_TYPE,t.command=this.command,t.native=this.native,t}}]),e}(),Ue=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"isEnable",!0),Object(u.a)(this,"_isEnableZoomByDoubleClick",!0),Object(u.a)(this,"click",!1),Object(u.a)(this,"prevent",!1),Object(u.a)(this,"delay",100),Object(u.a)(this,"down",!1),Object(u.a)(this,"_stopPropagation",!1),this.model=t,this.mouseEventDataPre=new Fe(t),this.model.appCoreWrapper.appProperties.isStandalone?this.mouseEvent=new Ve(this):this.mouseEvent=new Be(this),this.InitNativeMouseWheelEvent(this.model.modelViewWrapper.viewWrapper.div)}return Object(r.a)(e,[{key:"InitNativeMouseWheelEvent",value:function(e){var t=this;e.onwheel=function(e){t.MouseWheel(e,e.deltaY)}}},{key:"MouseDown",value:function(e){this.click=!0,this.down=!0;var t=this.CommonEventBuilder(e);t.CLICK_TYPE=g.e.DOWN,t.isDown=!0,this.MouseEvenEmitting(t)}},{key:"MouseClick",value:function(e){if(this.click){var t=this.CommonEventBuilder(e);0===e.button?t.CLICK_TYPE=g.e.LEFT:1===e.button?t.CLICK_TYPE=g.e.MIDDLE:2===e.button&&(t.CLICK_TYPE=g.e.RIGHT),this.MouseEvenEmitting(t)}}},{key:"MouseDoubleClick",value:function(e){var t=this.CommonEventBuilder(e);t.CLICK_TYPE=g.e.DOUBLE,this.MouseEvenEmitting(t)}},{key:"MouseDrag",value:function(e){this.click=!1;var t=this.CommonEventBuilder(e);t.CLICK_TYPE=g.e.DRAG,t.isDown=!0,1===e.buttons?t.CLICK_TYPE=g.e.DRAG:4===e.buttons?t.CLICK_TYPE=g.e.DRAG_MIDDLE:2===e.buttons&&(t.CLICK_TYPE=g.e.DRAG_RIGHT),this.MouseEvenEmitting(t)}},{key:"MouseMove",value:function(e){if(this.down)this.MouseDrag(e);else{var t=this.CommonEventBuilder(e);t.CLICK_TYPE=g.e.MOVE,t.isDown=!1,this.MouseEvenEmitting(t)}}},{key:"MouseUp",value:function(e){this.down=!1;var t=this.CommonEventBuilder(e);t.CLICK_TYPE=g.e.UP,t.isDown=!1,this.MouseEvenEmitting(t)}},{key:"MouseWheel",value:function(e,t){var n=this.CommonEventBuilder(e);n.wheel=t,n.CLICK_TYPE=g.e.WHEEL,this.MouseEvenEmitting(n)}},{key:"AppendDownEvent",value:function(e){}},{key:"AppendUpEvent",value:function(){var e=this;document.onmouseup=function(t){var n=e.CommonEventBuilder(t);0===t.button?n.CLICK_TYPE=g.e.LEFT:1===t.button?n.CLICK_TYPE=g.e.MIDDLE:2===t.button&&(n.CLICK_TYPE=g.e.RIGHT),n.isDown=!1,n.CLICK_TYPE=g.e.UP,e.MouseEvenEmitting(n)}}},{key:"MouseClickLeftArcGIS",value:function(e){var t=this.CommonEventBuilderArcGIS(e);t.CLICK_TYPE=g.e.LEFT,t.isDown=!0,this.MouseEvenEmitting(t)}},{key:"MouseClickMiddleArcGIS",value:function(e){var t=this.CommonEventBuilderArcGIS(e);t.CLICK_TYPE=g.e.MIDDLE,t.isDown=!0,this.MouseEvenEmitting(t)}},{key:"MouseClickRightArcGIS",value:function(e){var t=this.CommonEventBuilderArcGIS(e);t.CLICK_TYPE=g.e.RIGHT,t.isDown=!0,this.MouseEvenEmitting(t)}},{key:"MouseDoubleClickArcGIS",value:function(e){var t=this.CommonEventBuilderArcGIS(e);t.CLICK_TYPE=g.e.DOUBLE,t.isDown=!0,this.MouseEvenEmitting(t)}},{key:"MouseDragClickArcGIS",value:function(e){}},{key:"MouseMoveArcGIS",value:function(e){var t=this.CommonEventBuilderArcGIS(e);return t.CLICK_TYPE=g.e.MOVE,2===e.native.buttons?(t.CLICK_TYPE=g.e.DRAG_RIGHT,t.isDown=!0,t.isMove=!0,void this.MouseEvenEmitting(t)):1===e.native.buttons?(t.CLICK_TYPE=g.e.DRAG,t.isDown=!0,t.isMove=!0,void this.MouseEvenEmitting(t)):4===e.native.buttons?(t.CLICK_TYPE=g.e.DRAG_MIDDLE,t.isDown=!0,t.isMove=!0,void this.MouseEvenEmitting(t)):(t.isDown=!1,void this.MouseEvenEmitting(t))}},{key:"MouseEnterLeaveGIS",value:function(e,t){var n=this.CommonEventBuilderArcGIS(e);n.CLICK_TYPE=g.e.MOVE,n.isMove=!0}},{key:"MouseDownArcGIS",value:function(e){var t=this.CommonEventBuilderArcGIS(e);0===e.native.button?(t.CLICK_TYPE=g.e.DOWN,t.isDown=!0,this.MouseEvenEmitting(t)):1===e.native.button?(t.CLICK_TYPE=g.e.DOWN_MIDDLE,t.isDown=!0,this.MouseEvenEmitting(t)):(t.CLICK_TYPE=g.e.DOWN_RIGHT,t.isDown=!0,this.MouseEvenEmitting(t))}},{key:"MouseUpArcGIS",value:function(e){var t=this.CommonEventBuilderArcGIS(e);t.CLICK_TYPE=g.e.UP,t.isDown=!1,this.MouseEvenEmitting(t)}},{key:"CommonEventBuilderArcGIS",value:function(e){var t=new Fe(this.model);return t.preX=this.mouseEventDataPre.x,t.preY=this.mouseEventDataPre.y,t.x=e.x,t.y=e.y,t.yGLPicking=e.native.target.getBoundingClientRect().bottom-e.native.clientY,t.pressedShift=e.native.shiftKey,t.pressedAlt=e.native.altKey,t.pressedCtrl=e.native.ctrlKey,t.native=e.native,this.mouseEventDataPre=t,this.e=t,t}},{key:"CommonEventBuilder",value:function(e){var t=new Fe(this.model);return t.preX=this.mouseEventDataPre.x,t.preY=this.mouseEventDataPre.y,t.pressedShift=e.shiftKey,t.pressedAlt=e.altKey,t.pressedCtrl=e.ctrlKey,t.x=e.offsetX,t.y=e.offsetY,t.preWheel=this.mouseEventDataPre.wheel,t.wheel=0,t.native=e,this.mouseEventDataPre=t,this.e=t,t}},{key:"MouseEvenEmitting",value:function(e){this.model.appCoreWrapper.appAccessibility.mode!==g.k.OBSERVE_VIEWER&&(this.MouseEventEmittingForViewController(e),this._stopPropagation||this.MouseEventEmittingForModel(e))}},{key:"MouseEventEmittingForViewController",value:function(e){this.mouseInteractionUI&&this.mouseInteractionUI.MouseInteractionMenu(e)}},{key:"MouseEventEmittingForModel",value:function(e){e.app.controllerWrapper.MouseEventController(e)}},{key:"isEnableZoomByDoubleClick",get:function(){return this._isEnableZoomByDoubleClick},set:function(e){var t=this;e?this.timer=setTimeout((function(){t._isEnableZoomByDoubleClick=e}),1e3):this._isEnableZoomByDoubleClick=e}},{key:"stopPropagation",get:function(){return this._stopPropagation},set:function(e){this._stopPropagation=e}}]),e}(),ze=function e(t){Object(o.a)(this,e),this.model=t},He=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.h.JSAPI4X;Object(o.a)(this,e),this.KeyDown=this.KeyDown.bind(this),this.KeyUp=this.KeyUp.bind(this),this.model=t,this.type=n,this.isUp=!1,this.model.appCoreWrapper.appProperties.isStandalone?(this.Init(),this.MouseEventDataPre=new ze(this.model)):this.type===g.h.JSAPI4X&&this.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView&&(this.InitJSAPI4X(),this.Init(),this.MouseEventDataPre=new ze(this.model))}return Object(r.a)(e,[{key:"Init",value:function(){"undefined"!==typeof document&&(document.addEventListener("keydown",this.KeyDown),document.addEventListener("keyup",this.KeyUp))}},{key:"Destroy",value:function(){"undefined"!==typeof document&&(document.removeEventListener("keydown",this.KeyDown),document.removeEventListener("keyup",this.KeyUp))}},{key:"KeyDown",value:function(e){var t=this.CommonEventBuilder(e);t.PRESS_TYPE=g.q.DOWN,(t.hasShiftKey||t.hasCtrlKey)&&this.KeyEventFromDocument(t)}},{key:"KeyPress",value:function(e){var t=this.CommonEventBuilder(e);t.PRESS_TYPE=g.q.DOWN,this.KeyEvent(t)}},{key:"KeyUp",value:function(e){var t=this.CommonEventBuilder(e);t.PRESS_TYPE=g.q.UP,t.hasShiftKey&&t.hasCtrlKey||this.KeyEventFromDocument(t)}},{key:"InitJSAPI4X",value:function(){var e=this;this.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView&&(this.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.on("key-down",(function(t){e.model.appCoreWrapper.arcGISWrapper.mapViewCore.isPanZoomByKeyboard||("Arrow"!==t.key.slice(0,5)&&"-"!==t.key&&"="!==t.key||t.stopPropagation());e.KeyDownJSAPI4X(t.native)})),this.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.on("key-up",(function(t){e.KeyUpJSAPI4X(t.native)})))}},{key:"KeyDownJSAPI4X",value:function(e){var t=this.CommonEventBuilder(e);t.PRESS_TYPE=g.q.DOWN,this.KeyEvent(t)}},{key:"KeyUpJSAPI4X",value:function(e){var t=this.CommonEventBuilder(e);t.PRESS_TYPE=g.q.UP,this.KeyEvent(t)}},{key:"ActivateStopProp",value:function(){this.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView&&this.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.on("key-down",(function(e){e.stopPropagation()}))}},{key:"CommonEventBuilder",value:function(e){var t=new ze(this.model);return t.preEvent=this.MouseEventDataPre,t.model=this.model,t.key=e.key,t.keyCode=e.keyCode,t.code=e.code,t.hasCtrlKey=e.ctrlKey,t.hasShiftKey=e.shiftKey,t.hasAltKey=e.altKey,t.hasMetaCommand=e.metaKey,this.MouseEventDataPre=t,t}},{key:"KeyEvent",value:function(e){e.model.controllerWrapper.KeyboardEventController(e)}},{key:"KeyEventFromDocument",value:function(e){e.model.controllerWrapper.KeyboardEventControllerFromDocument(e)}}]),e}(),Ye=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"TOUCH_TYPE",g.t.MOVE),null!==t&&void 0!==t&&(this.model=t),this.eventList=[]}return Object(r.a)(e,[{key:"Build",value:function(e,t){for(var n=0;n<e.touches.length;++n){var i=new Ke;i.identifier=e.touches[n].identifier,i.TOUCH_TYPE=t,i.radiusX=e.touches[n].radiusX,i.radiusY=e.touches[n].radiusY,i.rotationAngle=e.touches[n].rotationAngle,i.x=e.touches[n].clientX,i.y=e.touches[n].clientY,i.force=e.touches[n].force,i.color=this.ColorForTouch(e.touches[n]),this.eventList.push(i)}}},{key:"DeepCopy",value:function(){}},{key:"ColorForTouch",value:function(e){var t=e.identifier%16,n=Math.floor(e.identifier/3)%16,i=Math.floor(e.identifier/7)%16;return"#"+t.toString(16)+n.toString(16)+i.toString(16)}}]),e}(),Ke=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"x",-1),Object(u.a)(this,"y",-1),Object(u.a)(this,"z",-1),Object(u.a)(this,"preX",-1),Object(u.a)(this,"preY",-1),Object(u.a)(this,"preZ",-1),Object(u.a)(this,"TOUCH_TYPE",g.t.MOVE)}return Object(r.a)(e,[{key:"DeepCopy",value:function(){var t=new e;return t.x=this.x,t.y=this.y,t.z=this.z,t.preX=this.preX,t.preY=this.preY,t.preZ=this.preZ,t.yGLPicking=this.yGLPicking,t.TOUCH_TYPE=this.TOUCH_TYPE,t.command=this.command,t}}]),e}();function Xe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Je,Ze,qe=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Xe()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).AppendEvent(),t}return Object(r.a)(i,[{key:"AppendEvent",value:function(){var e=this;this.touchInteraction.model.modelViewWrapper.viewWrapper.div.ontouchstart=function(t){e.touchInteraction.model.app.implementations.annotationCanvasInstance;var n=Qe.CommonEventBuilder(t,g.t.START);Qe.MouseEvent(n)},this.touchInteraction.model.modelViewWrapper.viewWrapper.div.ontouchend=function(t){e.touchInteraction.model.app.implementations.annotationCanvasInstance;var n=Qe.CommonEventBuilder(t,g.t.END);Qe.MouseEvent(n)},this.touchInteraction.model.modelViewWrapper.viewWrapper.div.ontouchmove=function(t){e.touchInteraction.model.app.implementations.annotationCanvasInstance;var n=Qe.CommonEventBuilder(t,g.t.MOVE);Qe.MouseEvent(n)},this.touchInteraction.model.modelViewWrapper.viewWrapper.div.ontouchcancel=function(t){e.touchInteraction.model.app.implementations.annotationCanvasInstance;var n=Qe.CommonEventBuilder(t,g.t.CANCEL);Qe.MouseEvent(n)}}}]),i}(function(){function e(t){Object(o.a)(this,e),this.touchInteraction=t}return Object(r.a)(e,[{key:"AppendEvent",value:function(){}}]),e}()),Qe=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"isEnable",!0),Object(u.a)(this,"click",!1),Object(u.a)(this,"prevent",!1),Object(u.a)(this,"delay",100),Object(u.a)(this,"down",!1),this.model=t,e.model=t,this.touchEvent=new qe(this)}return Object(r.a)(e,null,[{key:"CommonEventBuilder",value:function(e,t){var n=new Ye(this.model);return n.TOUCH_TYPE=t,n.Build(e,t),this.touchEventDataPre=n,n}},{key:"MouseEvent",value:function(e){e.model.controllerWrapper.TouchEventController(e)}}]),e}(),$e=function(){function e(t){Object(o.a)(this,e),this.ioWrapper=t,this.mouseInteraction=new Ue(this.ioWrapper.model),this.keyboardInteraction=new He(this.ioWrapper.model),this.touchInteraction=new Qe(this.ioWrapper.model)}return Object(r.a)(e,[{key:"isEnableZoomByDoubleClick",set:function(e){this.mouseInteraction.isEnableZoomByDoubleClick=e},get:function(){return this.mouseInteraction.isEnableZoomByDoubleClick}}]),e}(),et=function(){function e(t){Object(o.a)(this,e),this.model=t}return Object(r.a)(e,[{key:"PushAction",value:function(e){this.model.app.implementations.PushAction(e)}}]),e}(),tt=function(){function e(t){Object(o.a)(this,e),this.ioWrapper=t}return Object(r.a)(e,[{key:"EmitAction",value:function(e){this.ioWrapper.model.app.EmitAction&&this.ioWrapper.model.app.EmitAction(e)}},{key:"GetNumLayers",value:function(){this.ioWrapper.model.app.GetNumLayers&&this.ioWrapper.model.app.GetNumLayers()}},{key:"LocalizedString",value:function(e){this.ioWrapper.model.app.LocalizedString&&this.ioWrapper.model.app.LocalizedString(e)}}]),e}(),nt=function(){function e(t){Object(o.a)(this,e),this.model=t,this.emitAction=new tt(this),this.stateProcessing=new et(this.model)}return Object(r.a)(e,[{key:"InitPost",value:function(){this.InitEventInteraction()}},{key:"InitEventInteraction",value:function(){this.eventInteraction=new $e(this)}},{key:"Download",value:function(){if(this.model.app.implementations&&this.model.app.implementations.annotationCanvasInstance){var e=this.model.app.implementations.annotationCanvasInstance.renderer.SaveDrawingGeometries();if(e)new Ne(e,"AnnotationShapes.json").Dummy()}}},{key:"Destroy",value:function(){this.eventInteraction.keyboardInteraction.Destroy()}},{key:"Open",value:function(){var e=JSON.stringify(this.model.assets.dummyShape);this.model.app.pushAction("".concat(g.a.Dump,"@").concat(e))}}]),e}(),it=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.k.DRAWING,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;Object(o.a)(this,e),this.app=t,this.app.model=this,this.assets=new D(this),this.ioWrapper=new nt(this),this.appCoreWrapper=new De(this,n,i,a,r),this.modelViewWrapper=new Ae(this,n),this.controllerWrapper=new Te(this),this.Init()}return Object(r.a)(e,[{key:"Resize",value:function(e,t){this.modelViewWrapper.viewWrapper.div.style.width=e+"px",this.modelViewWrapper.viewWrapper.div.style.height=t+"px"}},{key:"InitPost",value:function(){this.modelViewWrapper.InitPost(),this.appCoreWrapper.InitPost(),this.ioWrapper.InitPost(),this.IsCustomAPI()}},{key:"Restart",value:function(){}},{key:"Destroy",value:function(){this.app.implementations.Destroy(),this.ioWrapper.Destroy(),this.modelViewWrapper.viewWrapper.RemoveDiv()}},{key:"PushAction",value:function(e){this.ioWrapper.stateProcessing.PushAction(e)}},{key:"pushTheme",value:function(e){this.app.implementations.pushTheme(e)}},{key:"Init",value:function(){}},{key:"IsCustomAPI",value:function(){this.appCoreWrapper.arcGISWrapper.mapViewCore.mapView&&this.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.wrapAroundGeometry?this.isCustomAPI=!0:this.isCustomAPI=!1}},{key:"isCustomAPI",set:function(e){this.appCoreWrapper.arcGISWrapper.isCustomAPI=e,this.app.implementations.isCustomAPI=e},get:function(){return this.appCoreWrapper.arcGISWrapper.isCustomAPI}}]),e}(),at=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(o.a)(this,e),this.content=t,this.font=n},ot=function e(t,n,i,a,r,s,c,l,p){Object(o.a)(this,e),this.sx=t,this.sy=n,this.long=i,this.lat=a,this.ele=r,this.proX=s,this.proY=c,this.proZ=l,this.w=p},rt=function(){function e(t,n,i,a,r){Object(o.a)(this,e),this.id=t,this.type=n,this.isSelected=i,this.isOver=a,this.isHidden=r,this.nodes=[],this.data={}}return Object(r.a)(e,[{key:"PushNode",value:function(e){this.nodes=[];for(var t=0;t<e.length;++t)this.nodes.push(new ot(e[t].x,e[t].y,e[t].long,e[t].lat,e[t].ele,e[t].proX,e[t].proY,e[t].proZ,e[t].w))}},{key:"PushData",value:function(e,t){this.data=new at(e,t)}},{key:"GetProjectedCoodrination",value:function(){return[this.nodes[0].proX,this.nodes[0].proY]}},{key:"GetGeographicCoordinate",value:function(){return[this.nodes[0].long,this.nodes[0].lat]}}]),e}(),st=function(){function e(t){Object(o.a)(this,e),this.io=t}return Object(r.a)(e,[{key:"PushActionTyped",value:function(e){switch(e.type){case g.a.Style:this.io.annotationInstance.geometryCommon.gcmdProcessing.UpdateStyleCustom(e.payload);break;case g.a.ClusteringPoint:this.io.annotationInstance.apiWrapper.environment.ToggleClusteringPoint(e.payload)}}},{key:"PushAction",value:function(e){"string"===typeof e?this.DoAction(e):"object"===typeof e&&this.PushActionTyped(e)}},{key:"DoAction",value:function(e){var t=this,n=e.split("@"),i=n[1],a=this.io.annotationInstance.scene.geometryList,o=this.io.annotationInstance.scene.geometryList.length;switch(n[0]){case"style":var r=JSON.parse(n[1]);this.io.annotationInstance.geometryCommon.gcmdProcessing.UpdateStyleCustom(r);break;case g.a.SetDrawingMode:var s=n[1];this.io.annotationInstance.activeCommandController.SetActiveCommand(this.io.MappingCommand(s)),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.ActiveColorId:this.io.annotationInstance.activeCommandController.SetActiveColor(n[1]);break;case g.a.ToggleMapfilter:this.io.annotationInstance.apiWrapper.environment.ToggleMapfilter(i),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.ToggleQuickActions:this.io.annotationInstance.apiWrapper.environment.ToggleActiveCommandChain(i),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.ChangeTheme:this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.ToggleDrawingTooltips:this.io.annotationInstance.apiWrapper.environment.ToggleDrawingTooltips(i),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.ToggleGrid:this.io.annotationInstance.apiWrapper.environment.ToggleGrid(i),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.ToggleMeasure:this.io.annotationInstance.apiWrapper.environment.ToggleMeasure(i),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.ShiftUnit:this.io.annotationInstance.apiWrapper.environment.ShiftUnit(),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.DumpIconsBase64s:this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForceMask(),this.io.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent.Update();var c=JSON.parse(n[1]);Object.keys(c).forEach((function(e){t.io.annotationInstance&&t.io.annotationInstance.activeCommandController.Base64Processing("addBase64",e,c[e])})),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.AddIconBase64:var l=JSON.parse(n[1]);Object.keys(l).forEach((function(e){t.io.annotationInstance.activeCommandController.Base64Processing(n[0],e,l[e])})),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.SelectIconBase64:this.io.annotationInstance.activeCommandController.Base64Processing(n[0],n[1]),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.InclusiveSelect:for(;o--;)if(a[o].id===i){a[o].IsSelected=!0;break}this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.InclusiveDeselect:for(;o--;)if(a[o].id===i){a[o].IsSelected=!1;break}this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.ExclusiveSelect:for(;o--;)a[o].id===i?a[o].IsSelected=!0:a[o].IsSelected&&(a[o].IsSelected=!1);this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.ExclusiveDeselect:for(;o--;)a[o].id!==i&&a[o].IsSelected&&(a[o].IsSelected=!1);this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.Remove:this.io.annotationInstance.geometryCommon.gcmdProcessing.RemoveByIDs(n[1]),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.RemoveSelected:this.io.annotationInstance.geometryCommon.gcmdProcessing.RemoveAllCapturedGeoGroup(),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.Update:this.io.annotationInstance.activeCommandController.ProcessingUpdate(JSON.parse(n[1]).id,n[1]),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.ReorderNumberedPoints:this.io.annotationInstance.geometryCommon.gcmdProcessing.ReorderNumberedPoints(JSON.parse(i)),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.ReorderNumberedTourPoints:this.io.annotationInstance.geometryCommon.gcmdProcessing.ReorderNumberedTourPoints(JSON.parse(i)),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.Enter:for(;o--;)a[o].id===i?(a[o].IsHover=!0,a[o].isHidden?(a[o].renderer.tOver=0,a[o].Visibility=.2):a[o].Visibility=1):a[o].IsHover&&(a[o].IsHover=!1,a[o].isHidden?a[o].Visibility=0:a[o].Visibility=1);this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.Leave:for(;o--;)a[o].IsHover=!1,a[o].isHidden&&(a[o].Visibility=0);this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.Show:this.io.annotationInstance.activeCommandController.Unhide(JSON.parse(n[1])),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.Hide:this.io.annotationInstance.activeCommandController.Hide(JSON.parse(n[1])),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.HidePopup:for(;o--;)a[o].id===i&&a[o].HidePopUpSummary();this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.ShowPopup:for(;o--;)a[o].id===i&&a[o].ShowPopupSummary();this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.Dump:this.io.annotationInstance.implementations.app.APP===g.c.ANNOTATION_MAP&&(this.io.annotationInstance.geometryCommon.gcmdProcessing.DeSelecteAllObjects(),this.io.annotationInstance.geometryCommon.gcmdProcessing.RemoveAllCapturedGeo()),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForceMask(),this.io.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent.Update();var p=new Map,u=JSON.parse(i);Object.keys(u).forEach((function(e){p.set(e,t.convertShapeToIOGeometry(u[e]))})),this.io.annotationInstance.activeCommandController.ReUndoProcessingStorymaps(p),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce(),this.io.annotationInstance.geometryCommon.gcmdSupporting.InitViewChangingForce();break;case g.a.InitGhost:var d=JSON.parse(n[1]),h=this.convertShapeToIOGeometry(d.POINT_NUMBERED_TOUR||d.POINT_REGULAR),m=[],f=d.POLYGON_MULTIPLE;if(f)for(var y=0;y<f.length;++y){var v=this.convertShapeToIOGeometry(f[y]);m.push(v)}this.io.annotationInstance.activeCommandController.InitGhost(h,m),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.EnterGhost:this.io.annotationInstance.activeCommandController.EnterGhost(n),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.LeaveGhost:this.io.annotationInstance.activeCommandController.LeaveGhost(n),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.AddGhost:this.io.annotationInstance.activeCommandController.AddGhost(n),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.RemoveGhost:this.io.annotationInstance.activeCommandController.RemoveGhost(),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.PolylineConstraintLength:this.io.annotationInstance.activeCommandController.SetupPolylineConstraintLength(parseFloat(i)),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.PolylineConstraintLengthPercentage:this.io.annotationInstance.activeCommandController.SetupPolylineConstraintLengthPercentage(parseFloat(i)),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.DisableExcept:var b=JSON.parse(n[1]);this.io.annotationInstance.activeCommandController.DisableExcept(b),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();break;case g.a.Highlight:this.io.annotationInstance.activeCommandController.Highlight(n[1]),this.io.annotationInstance.geometryCommon.gcmdSupporting.RenderForce()}}},{key:"GetProjectedBoundingVec",value:function(e){var t=Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER;return Object.keys(e).forEach((function(o){for(var r=0;r<e[o];++r)t>e[o][r].proX&&(t=e[o][r].proX),n>e[o][r].proY&&(n=e[o][r].proY),i<e[o][r].proX&&(i=e[o][r].proX),a<e[o][r].proY&&(a=e[o][r].proY)})),[t,n,i,a]}},{key:"convertShapeToIOGeometry",value:function(e){var t=this.io.MappingCommand(e.type),n=new rt(e.id,g.j[t],!1,!1,e.isHidden);return n.PushNode(e.nodes.map((function(e){return function(e,t,n,i,a,o,r,s){var c=new Oe(e,t,0);return c.long=n,c.lat=i,c.ele=a,c.proX=o,c.proY=r,c.proZ=s,c}(e.sx,e.sy,e.long,e.lat,e.ele,e.proX,e.proY,e.proZ)}))),void 0!==e.data&&(n.data=e.data),void 0!==e.styles&&(n.styles=e.styles),n}}]),e}(),ct=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"log",!1),this.io=t,this.Init()}return Object(r.a)(e,[{key:"Init",value:function(){this.numOfCommand=0}},{key:"ShiftCAMode",value:function(e){if(this.log&&console.log("active command stack"),!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone){var t="setDrawingMode@"+e.toString();this.io.EmitAction(t)}}},{key:"ShiftOptionStack",value:function(e,t){if(!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone){var n="".concat(e).concat("@").concat(t);this.io.EmitAction(n)}}},{key:"ModificationStack",value:function(e){this.log&&console.log("modification stack"),this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone}},{key:"AddGeometryStack",value:function(e){if(this.log&&console.log("add stack"),!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone&&e){var t="add@"+JSON.stringify(e);this.numOfCommand++,this.io.EmitAction(t)}}},{key:"SelectionStack",value:function(e){if(this.log&&console.log("selection stack"),!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone&&e)if(e.isSelected){var t="select@"+e.id;this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.compileMode!==g.f.PRODUCTION?(this.numOfCommand++,this.io.EmitAction(t)):this.io.EmitAction(t)}else{var n="deselect@"+e.id;this.numOfCommand++,this.io.EmitAction(n)}}},{key:"HideStack",value:function(e){if(this.log&&console.log("hide stack"),!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone&&e)if(e.isHidden){var t="hide@"+e.id;this.numOfCommand++,this.io.EmitAction(t)}else{var n="show@"+e.id;this.numOfCommand++,this.io.EmitAction(n)}}},{key:"HoverStack",value:function(e){if(this.log&&console.log("hover stack"),!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone&&e)if(e.isOver){var t="enter@"+e.id;this.numOfCommand++,this.io.EmitAction(t)}else{var n="leave@"+e.id;this.numOfCommand++,this.io.EmitAction(n)}}},{key:"HoverPostStack",value:function(e){if(this.log&&console.log("hoverPost stack"),!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone&&e&&e.isOver){var t="enterPost@"+e.id;this.numOfCommand++,this.io.EmitAction(t)}}},{key:"UpdateStack",value:function(e){var t;if(this.log&&console.log("update stack"),!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone&&e){var n="update@"+JSON.stringify({id:e.id,content:null===(t=e.data)||void 0===t?void 0:t.content});this.numOfCommand++,this.io.EmitAction(n)}}},{key:"ShowPopupStack",value:function(e){if(this.log&&console.log("show popup stack"),!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone&&e){var t="showPopup@"+JSON.parse(JSON.stringify(e)).id;this.numOfCommand++,this.io.EmitAction(t)}}},{key:"HidePopupStack",value:function(e){if(this.log&&console.log("hide popup stack"),!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone&&e){var t="hidePopup@"+JSON.parse(JSON.stringify(e)).id;this.numOfCommand++,this.io.EmitAction(t)}}},{key:"ShowTextStack",value:function(e){if(this.log&&console.log("show text stack"),!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone&&e){var t="showText@"+JSON.parse(JSON.stringify(e)).id;this.numOfCommand++,this.io.EmitAction(t)}}},{key:"HideTextStack",value:function(e){if(this.log&&console.log("hide text stack"),!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone&&e){var t="hideText@"+JSON.parse(JSON.stringify(e)).id;this.numOfCommand++,this.io.EmitAction(t)}}},{key:"StartEditingText",value:function(e){if(this.log&&console.log("start editing stack"),!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone&&e){var t="startEditingText@"+e.id;this.numOfCommand++,this.io.EmitAction(t)}}},{key:"EndEditingText",value:function(e){if(this.log&&console.log("end editing stack"),!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone&&e){var t="endEditingText@"+e.id;this.numOfCommand++,this.io.EmitAction(t)}}},{key:"InitGhostStack",value:function(e){if(this.log&&console.log("init ghost stack"),!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone&&e){var t="add@"+JSON.stringify(e);this.numOfCommand++,this.io.EmitAction(t)}}},{key:"ShowGhostPopupStack",value:function(e){if(this.log&&console.log("show ghost stack"),!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone&&e){var t="showGhostPopup@"+JSON.stringify({id:"ghost",mapping:e.data.content});this.numOfCommand++,this.io.EmitAction(t)}}},{key:"HideGhostPopupStack",value:function(){this.log&&console.log("hide ghost stack");this.io.EmitAction("hideGhostPopup")}},{key:"RemoveGeometryStackOld",value:function(e){if(this.log&&console.log("remove stack"),!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone&&e){var t="remove@"+e.id;this.numOfCommand++,this.io.EmitAction(t)}}},{key:"RemoveGeometryStack",value:function(e){if(this.log&&console.log("remove stack"),!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone&&e){var t="remove@",n=[];e.forEach((function(e){n.push(e.id)})),this.numOfCommand++,t+=JSON.stringify(n),this.io.EmitAction(t)}}},{key:"TransformStack",value:function(e){if(this.log&&console.log("transform stack"),!this.io.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone&&e){var t="transform@"+JSON.stringify(e);this.numOfCommand++,this.io.EmitAction(t)}}},{key:"PointerOutStack",value:function(){this.log&&console.log("pointer out stack");var e=g.a.PointerOut;this.io.EmitAction(e)}},{key:"GetActionString",value:function(e,t){return"".concat(e).concat("@").concat("string"===typeof t?t:JSON.stringify(t))}},{key:"AddBase64Stack",value:function(e,t){var n="addBase64".concat("@"+e+"@"+t);this.io.EmitAction(n)}},{key:"Base64Stack",value:function(e,t){var n="addBase64".concat("@"+e+"@"+t);this.io.EmitAction(n)}},{key:"SelectBase64",value:function(e){var t="selectBase64".concat("@").concat(e);this.io.EmitAction(t)}}]),e}(),lt=function(){function e(t){Object(o.a)(this,e),this.annotationInstance=t,this.stateProcessingAnnotation=new st(this),this.eventListenerAnnotation=new ct(this)}return Object(r.a)(e,[{key:"MappingCommand",value:function(e){return e===g.b.SMARTDRAWING?e=g.b.SMARTDRAWING_DEEPLEARNING:e===g.b.POLYGON?e=g.b.POLYGON_GRAPH:e===g.b.POLYGON_GRAPH?e=g.b.POLYGON:e===g.b.FREEHAND_POLYGON&&(e=g.b.FREEHAND_POLYGON_GRAPH),e}},{key:"EmitAction",value:function(e){this.annotationInstance.implementations.app.INSPECTION&&("transform"===e.split("@")[0]&&console.log("transform"),"remove"===e.split("@")[0]&&console.log("remove"),"select"===e.split("@")[0]&&console.log("select")),this.annotationInstance.implementations.app.model.ioWrapper.model.app.model.ioWrapper.emitAction.EmitAction(e)}},{key:"PushAction",value:function(e){this.stateProcessingAnnotation.PushAction(e)}}]),e}();!function(e){e.METER="METER",e.KILOMETER="KILOMETER",e.CENTIMETER="CENTIMETER",e.MILLIMETER="MILLIMETER",e.MICROMETER="MICROMETER",e.NANOMETER="NANOMETER",e.MILE="MILE",e.YARD="YARD",e.FOOT="FOOT",e.INCH="INCH"}(Je||(Je={})),function(e){e.METER="METER",e.KM="KM",e.MILE="MILE"}(Ze||(Ze={}));Math.PI,Math.PI;var pt=function(e,t,n){return[e*(n/t),n]},ut=function(e,t,n){return[n,t*(n/e)]},dt=function(e,t,n){return[e*(n/t),n]},ht=function(e){for(var t=0;t<e.length;++t)if(e[t]<0)return!0;return!1},mt=function(e){return.62137119*e},ft=function(e,t,n){return e+n*(t-e)},yt=function(e,t,n){return e+(t-e)*n},gt=function(e,t){var n=new Array,i=(e.length-1)/(t-1);n[0]=e[0];for(var a=1;a<t-1;a++){var o=a*i,r=+Math.floor(o).toFixed(),s=+Math.ceil(o).toFixed(),c=o-r;n[a]=yt(e[r],e[s],c)}return n[t-1]=e[e.length-1],n},vt=function e(){Object(o.a)(this,e)},bt=function(){function e(t){Object(o.a)(this,e),this.host=t}return Object(r.a)(e,[{key:"Update",value:function(e){this.host.scene.annotationInstance.implementations.app.INSPECTION&&(e.font="10px Arial",this.ShowStatus(e))}},{key:"Show",value:function(e){var t=this.host.vec;e.beginPath(),e.arc(t.x,t.y,5,0,6.28),e.closePath(),e.fillStyle="#ff0000",e.fill();var n="".concat(t.long," -- ").concat(t.proX);e.fillText(n,t.x,t.y-5),t=this.host.vec,e.beginPath(),e.arc(t.x,t.y,5,0,6.28),e.closePath(),e.fillStyle="#ff0000",e.fill(),n="".concat(t.long," -- ").concat(t.proX),e.fillText(n,t.x,t.y+10)}},{key:"ShowStatus",value:function(e){var t=this.host.vec;e.beginPath(),e.arc(t.x,t.y,5,0,6.28),e.closePath(),e.fillStyle="#ff0000",e.fill();var n="IsTransform: ".concat(this.host.IsTransform);e.fillText(n,t.x+10,t.y+10);var i="Type: ".concat(this.host.type);e.fillText(i,t.x+100,t.y+10);var a="scale: ".concat(this.host.scaleMap);e.fillText(a,t.x+10,t.y+25),e.fillStyle="#000000";var o="neighbors: ".concat(this.host.collision.neighborShapes.length);e.fillText(o,t.x+100,t.y+25)}}]),e}(),xt=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"neighborShapes",[]),Object(u.a)(this,"numOrder",-1),Object(u.a)(this,"offset",-2),Object(u.a)(this,"isVisited",!1),Object(u.a)(this,"isFixed",!1),Object(u.a)(this,"isRenderable",!0),Object(u.a)(this,"colA","rgba(0, 255, 0, 0.3)"),Object(u.a)(this,"colB","rgba(255, 0, 0, 0.3)"),Object(u.a)(this,"colC","rgba(0, 0, 0, 0.3)"),Object(u.a)(this,"optiLevel",.1),Object(u.a)(this,"cVec",new Oe(0,0)),Object(u.a)(this,"velocity",new Oe(0,0)),Object(u.a)(this,"isCollided",!1),Object(u.a)(this,"isCollidable",!0),Object(u.a)(this,"geoCollided",void 0),this.geo=t,this._minVec=new Oe(0,0),this._maxVec=new Oe(0,0)}return Object(r.a)(e,[{key:"Reset",value:function(){this.neighborShapes=[],this.numOrder=-1,this.geo.numVisit=0,this.isCollided=!1,this.isVisited=!1,this.geo.isCollapse=!1}},{key:"UpdateBBox",value:function(){}},{key:"Update",value:function(){this.isFixed||(this.cVec.x=this._minVec.x+.5*(this._maxVec.x-this._minVec.x),this.cVec.y=this._minVec.y+.5*(this._maxVec.y-this._minVec.y))}},{key:"Render",value:function(e){this.geo.scene.annotationInstance.implementations.app.INSPECTION&&this.isRenderable&&(this.isCollided?e.fillStyle=this.colB:e.fillStyle=this.colA,this.isFixed&&(e.fillStyle=this.colC),e.beginPath(),e.rect(this.minVec.x,this.minVec.y,this.maxVec.x-this.minVec.x,this.maxVec.y-this.minVec.y),e.closePath(),e.fill())}},{key:"minVec",set:function(e){this._minVec.x=e.x-this.offset,this._minVec.y=e.y-this.offset},get:function(){return this._minVec}},{key:"maxVec",set:function(e){this._maxVec.x=e.x+this.offset,this._maxVec.y=e.y+this.offset},get:function(){return this._maxVec}}]),e}();function Ot(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var wt=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Ot()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),t=n.call(this),Object(u.a)(Object(s.a)(t),"isFill",!1),Object(u.a)(Object(s.a)(t),"isGhost",!1),Object(u.a)(Object(s.a)(t),"_isTransform",!1),Object(u.a)(Object(s.a)(t),"needEmitRemoveByBlackhole",!0),Object(u.a)(Object(s.a)(t),"numVisit",0),Object(u.a)(Object(s.a)(t),"scaleMap",1),Object(u.a)(Object(s.a)(t),"scaleForRender",1),Object(u.a)(Object(s.a)(t),"isRenderCollapse",!1),Object(u.a)(Object(s.a)(t),"_disable",!1),Object(u.a)(Object(s.a)(t),"_textLeaderline",void 0),t.scene=e,t.scene.AddGeometry(Object(s.a)(t)),t.vec=F(),t.id=t.scene.GetUUID(),t.hashColor=t.scene.GetHashColor(Object(s.a)(t)),t.isRemove=!1,t.isHover=!1,t.isGeoPos=!1,t.isSelected=!1,t.isPin=!0,t.isSelectable=!0,t.isRenderable=!1,t.isMovable=!0,t.isDraggable=!1,t.isLeave=!1,t.isInsideExtent=!0,t.isHidden=!1,t.isHiddenPre=!1,t.isAniEasing=!1,t.isAniAccel=!1,t.isCaptured=!1,t.isMoved=!1,t.isUnderConstruction=!0,t.isVisited=!1,t.isGrayColor=!1,t.isDrop=!1,t.isDrag=!1,t.isSelected=!1,t.needEmitHoverPost=!0,t.isHover=!1,t.enableEdit=!1,t.hasSound=!1,t.vecsHistory=[],t.trajectoryVecs=[],t.zoomDisX=0,t.zoomDisY=0,t.isZoomStart=!0,t.needEmit=!0,t.isUndo=!0,t.ghostPopupOffset=5,t.visibility=1,t.needBlackhole=!1,t.inspector=new bt(Object(s.a)(t)),t.collision=new xt(Object(s.a)(t)),t.InitScale(),t}return Object(r.a)(i,[{key:"GetNode",value:function(){var e=[];return e.push(this.vec),e}},{key:"GetArea",value:function(){return Number.MAX_SAFE_INTEGER}},{key:"ToJSON",value:function(){var e=new rt(this.id,this.type,this.isSelected,this.isHover,this.isHidden);return e.PushNode(this.GetNode()),e}},{key:"IsSelectedByWindow",value:function(e){return ge(this.vec,e)}},{key:"IsSelectedByCrossing",value:function(e){return function(e,t,n,i){return!!ge(new Oe(e.x-.5*t,e.y-.5*n),i)||(!!ge(new Oe(e.x+.5*t,e.y-.5*n),i)||(!!ge(new Oe(e.x+.5*t,e.y+.5*n),i)||!!ge(new Oe(e.x-.5*t,e.y+.5*n),i)))}(this.vec,5,5,e)}},{key:"GetNodePopup",value:function(){}},{key:"GetBoundary",value:function(){return[this.vec]}},{key:"ShowPopupSummary",value:function(){var e=this;if(!this.hasPopup&&!this.isGhost){if(this.hasPopup=!0,this.popup=document.createElement("div"),this.popup.id="pa-"+this.id,this.popup.style.position="absolute",this.popup.style.zIndex="1000",this.popup.style.height="0px",this.popup.style.width="0px",this.popup.style.backgroundColor="red",this.scene.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.appendChild(this.popup),this.type===g.j.POLYLINE||this.type===g.j.POLYLINE_BENDING||this.type===g.j.POLYGON||this.type===g.j.RECTANGLE||this.type===g.j.CIRCLE){var t=this.GetNodePopup();this.popup.style.top=t.vec.y+"px",this.popup.style.left=t.vec.x+"px"}else this.popup.style.top=this.vec.y+"px",this.popup.style.left=this.vec.x+"px";setTimeout((function(){e.scene.annotationInstance.io.eventListenerAnnotation.ShowPopupStack(e.ToJSON())}),100)}}},{key:"GetVecs",value:function(){return[this.vec]}},{key:"HidePopUpSummary",value:function(){if(this.popup&&this.popup.parentNode){if(this.renderer.tOverPopupSummary=0,this.popup.parentNode.removeChild(this.popup),this.type===g.j.CNODE){var e=new rt(this.id,this.type,this.isSelected,this.isHover,this.isHidden);e.PushNode(this.GetNode()),this.scene.annotationInstance.io.eventListenerAnnotation.HidePopupStack(e)}else this.scene.annotationInstance.io.eventListenerAnnotation.HidePopupStack(this.ToJSON());this.hasPopupPre=!1,this.popup=void 0,this.hasPopup=!1}}},{key:"NeedSnapping",value:function(e){return[Z(this.vec,e),this.vec]}},{key:"GetVecForSnapping",value:function(){return this.vec}},{key:"Move",value:function(e,t){!this.isRemove&&this.isRenderable&&this.isHidden}},{key:"ActivateEasing",value:function(e,t){}},{key:"Easing",value:function(){}},{key:"Accelerating",value:function(){}},{key:"FindClosestNode",value:function(e,t){}},{key:"RenderPre",value:function(e){}},{key:"UpdateBoundingBox",value:function(){}},{key:"MouseDoubleClick",value:function(){}},{key:"OutExtent",value:function(){}},{key:"InExtent",value:function(){}},{key:"UpdateTheme",value:function(){}},{key:"UpdateStyle",value:function(e){}},{key:"UpdateStyleCustom",value:function(e){}},{key:"InitScale",value:function(e){this.scaleMap=e||this.scene.annotationInstance.activeCommandController.acProperties.mapScale}},{key:"UpdateScale",value:function(){var e=this.scaleMap/this.scene.annotationInstance.activeCommandController.acProperties.mapScale;this.scene.annotationInstance.activeCommandController.acProperties.isScaleDynamicRender?this.scaleForRender=e>1?1:e<.05?0:e:this.scaleForRender=1}},{key:"Render",value:function(e){this.RenderPre(e),Number.isNaN(this.vec.x)?this.OutExtent():this.InExtent(),!this.isRemove&&this.isRenderable&&(this.isHidden&&this.visibility<.01||(this.isAniEasing&&this.Easing(),this.isAniAccel&&this.Accelerating(),this.isUndo&&this.renderer&&(this.renderer.t=1,this.renderer.tDown1=1,this.renderer.tDown2=1),this.needBlackhole&&this.RemoveByBlackhole(),this.IsMoveUpdate(),this.UpdatePopup(),this.UpdateHoverPost(),this.scene.annotationInstance.activeCommandController.acProperties.needCollisionDetection,this.RenderPost(e)))}},{key:"UpdatePopup",value:function(){if(this.hasPopup&&void 0!==this.popup)if(this.hasGhostPopup)this.popup.style.top=this.vec.y-this.scene.annotationInstance.customization.themeCurrent.nPoint.height-this.ghostPopupOffset+"px",this.popup.style.left=this.vec.x+"px";else if(this.type===g.j.POLYLINE||this.type===g.j.POLYLINE_BENDING||this.type===g.j.POLYGON||this.type===g.j.RECTANGLE||this.type===g.j.CIRCLE){var e=this.GetNodePopup();this.popup.style.top=e.vec.y+"px",this.popup.style.left=e.vec.x+"px"}else this.popup.style.top=this.vec.y+"px",this.popup.style.left=this.vec.x+"px"}},{key:"UpdateHoverPost",value:function(){this.renderer.tOverPopupSummary>.2&&this.needEmitHoverPost&&(this.ShowPopupSummary(),this.EmitHoverPostStack(),this.needEmitHoverPost=!1)}},{key:"IsMoveUpdate",value:function(){this.type!==g.j.ANODE&&this.type!==g.j.ANODE_CIRCLE&&this.type!==g.j.ANODE_NGON&&this.type!==g.j.ANODE_RECT&&this.type!==g.j.ANODE_TEXT&&this.type!==g.j.AMIDPOINT&&(this.vecsHistory.length<1||(Y(this.vecsHistory[this.vecsHistory.length-1],this.vec,this.scene.annotationInstance.activeCommandController.zoomLevelForMoving)?this.IsMove=!1:(this.IsMove=!0,this.IsTransform=!0)))}},{key:"InitVecsHistory",value:function(){this.vecsHistory=[],this.vecsHistory.push(W(this.vec),W(this.vec),W(this.vec))}},{key:"UpdateVecsHistory",value:function(){var e=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(this.vec.x,this.vec.y);for(this.vec.long=e[0],this.vec.lat=e[1],this.vec.proX=e[2],this.vec.proY=e[3],this.vecsHistory.push(W(this.vec));this.vecsHistory.length>3;)this.vecsHistory.shift()}},{key:"DeepCopy",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"GoToBlackhole",value:function(){}},{key:"UpdatePostTransformation",value:function(){}},{key:"FromJSON",value:function(e){}},{key:"Dummy",value:function(){}},{key:"RemoveByBlackhole",value:function(){Q([this.scene.annotationInstance.renderer.blackhole.v.x,this.scene.annotationInstance.renderer.blackhole.v.y,this.scene.annotationInstance.renderer.blackhole.v.z],[this.vec.x,this.vec.y,this.vec.z])<10&&this.Remove(this.needEmitRemoveByBlackhole)}},{key:"MouseLeftClick",value:function(e,t){}},{key:"MouseRightClick",value:function(e){}},{key:"MouseUp",value:function(){}},{key:"EmitAddStack",value:function(){this.scene.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(this.ToJSON())}},{key:"EmitHoverPostStack",value:function(){this.scene.annotationInstance.io.eventListenerAnnotation.HoverPostStack(this.ToJSON())}},{key:"V",get:function(){return this.vec},set:function(e){this.vec=e}},{key:"IsHidden",get:function(){return this.isHidden},set:function(e){this.isHiddenPre=this.isHidden,this.isHidden=e,this.scene.annotationInstance.io.eventListenerAnnotation.HideStack(this.ToJSON())}},{key:"IsMovable",get:function(){return this.isMovable},set:function(e){this.isMovable=e}},{key:"IsHover",get:function(){return this.isHover},set:function(e){e||(this.needEmitHoverPost=!0),this.isHover=e}},{key:"Visibility",get:function(){return this.visibility},set:function(e){this.visibility=e}},{key:"isCollapse",set:function(e){this.isRenderCollapse=e},get:function(){return this.isRenderCollapse}},{key:"textLeaderline",get:function(){return this._textLeaderline},set:function(e){e!==this._textLeaderline&&(this._textLeaderline&&e&&this._textLeaderline.RemoveLeaderline(),this._textLeaderline=e)}},{key:"IsPin",get:function(){return this.isPin},set:function(e){this.isPin=e}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){this.isSelected=e}},{key:"IsCaptured",get:function(){return this.isCaptured},set:function(e){this.isCaptured=e}},{key:"IsEditiable",get:function(){return this.enableEdit},set:function(e){this.enableEdit=e}},{key:"HasPopup",get:function(){return this.hasPopup},set:function(e){this.hasPopup=e}},{key:"IsTransform",get:function(){return this._isTransform},set:function(e){this._isTransform=e}},{key:"IsMove",get:function(){return this.isMoved},set:function(e){this.isMoved=e}},{key:"disable",get:function(){return this._disable},set:function(e){this._disable=e}}]),i}(vt);function jt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}Object(u.a)(wt,"list",[]);var Ct=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(o.a)(this,e),Object(u.a)(this,"needWrappingToRight",!1),Object(u.a)(this,"needWrappingToLeft",!1),Object(u.a)(this,"vecSelected",[]),Object(u.a)(this,"vsOther",[]),Object(u.a)(this,"vs",[]),this.geometryBase=t,n.length>0&&(this.vs=n)}return Object(r.a)(e,[{key:"InitProjectionShapesFromJSON",value:function(e){this.vs=e;for(var t=this.geometryBase.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent,n=Math.abs(this.geometryBase.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent.frame)+1,i=0,a=0;a<n;++a){for(var o=!1,r=0;r<this.vs.length;++r){e[r].proX+t.offsetNumber*-a<t.maxV.proX&&(o=!0)}if(o)break;i-=1}if(0===i)for(var s=0;s<n;++s){for(var c=!1,l=0;l<this.vs.length;++l){e[l].proX+t.offsetNumber*s>t.minV.proX&&(c=!0)}if(c)break;i+=1}for(var p=0;p<this.vs.length;++p)e[p].proX+=t.offsetNumber*i;for(var u=0;u<this.vs.length;++u){var d=this.geometryBase.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(this.vs[u].proX,this.vs[u].proY);this.vs[u].x=d[0],this.vs[u].y=d[1]}if(this.CheckWrapping(e),this.needWrappingToRight)for(var h=0;h<this.vsOther.length;++h){var m=this.geometryBase.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(this.vsOther[h].proX,this.vsOther[h].proY);this.vs[h].x=m[0],this.vs[h].y=m[1]}else if(this.needWrappingToLeft)for(var f=0;f<this.vsOther.length;++f){var y=this.geometryBase.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(this.vsOther[f].proX,this.vsOther[f].proY);this.vs[f].x=y[0],this.vs[f].y=y[1]}}},{key:"UpdateProjectionPoint",value:function(e){var t=this.geometryBase.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent.UpdateWrappingProjectedPosPoint(e.proX,e.proY);this.vs[0].proX=t[0],this.vs[0].proY=t[1]}},{key:"UpdateProjectionShapes",value:function(e){this.vs=e;for(var t=this.geometryBase.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent,n=Math.abs(this.geometryBase.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent.frame)+1,i=0,a=0;a<n;++a){for(var o=!1,r=0;r<this.vs.length;++r){e[r].proX+t.offsetNumber*-a<t.maxV.proX&&(o=!0)}if(o)break;i-=1}if(0===i)for(var s=0;s<n;++s){for(var c=!1,l=0;l<this.vs.length;++l){e[l].proX+t.offsetNumber*s>t.minV.proX&&(c=!0)}if(c)break;i+=1}for(var p=0;p<this.vs.length;++p)e[p].proX+=t.offsetNumber*i;for(var u=0;u<this.vs.length;++u){var d=this.geometryBase.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(this.vs[u].proX,this.vs[u].proY);this.vs[u].x=d[0],this.vs[u].y=d[1]}if(this.CheckWrapping(e),this.needWrappingToRight)for(var h=0;h<this.vsOther.length;++h){var m=this.geometryBase.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(this.vsOther[h].proX,this.vsOther[h].proY);this.vs[h].x=m[0],this.vs[h].y=m[1]}else if(this.needWrappingToLeft)for(var f=0;f<this.vsOther.length;++f){var y=this.geometryBase.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(this.vsOther[f].proX,this.vsOther[f].proY);this.vs[f].x=y[0],this.vs[f].y=y[1]}}},{key:"UpdateProjection",value:function(e){if(this.geometryBase.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView){this.vs=e,this.CheckWrapping(e),this.isIntersectLeft?this.vsOther=this.ComputeWrappingDuplication(this.vs,1):this.isIntersectRight&&(this.vsOther=this.ComputeWrappingDuplication(this.vs,-1));var t=this.geometryBase.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent.dirctionTo;if(this.needWrappingToRight&&0<t)for(var n=0;n<this.vs.length;++n){var i=this.geometryBase.scene.annotationInstance.geometryCommon.gcmdSupporting.WrappingProjectedPosShape(this.vs[n].proX,this.vs[n].proY,1);this.vs[n].proX=i[0],this.vs[n].proY=i[1]}else if(this.needWrappingToLeft&&t<0)for(var a=0;a<this.vs.length;++a){var o=this.geometryBase.scene.annotationInstance.geometryCommon.gcmdSupporting.WrappingProjectedPosShape(this.vs[a].proX,this.vs[a].proY,-1);this.vs[a].proX=o[0],this.vs[a].proY=o[1]}if(this.needWrappingToRight)for(var r=0;r<this.vsOther.length;++r){var s=this.geometryBase.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(this.vsOther[r].proX,this.vsOther[r].proY);this.vs[r].x=s[0],this.vs[r].y=s[1]}else if(this.needWrappingToLeft)for(var c=0;c<this.vsOther.length;++c){var l=this.geometryBase.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(this.vsOther[c].proX,this.vsOther[c].proY);this.vs[c].x=l[0],this.vs[c].y=l[1]}this.needWrappingToLeft=!1,this.needWrappingToRight=!1}}},{key:"CheckWrapping",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.CheckIsIntersectWithMask(this.vs),this.CheckIsOutOfExtent(this.vs)}},{key:"CheckIsIntersectWithMask",value:function(e){this.isIntersectLeft=this.geometryBase.scene.annotationInstance.geometryCommon.gcmdSupporting.CheckBoundIntersection(e,this.geometryBase.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent.minV,this.geometryBase.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent.minVOther),this.isIntersectRight=this.geometryBase.scene.annotationInstance.geometryCommon.gcmdSupporting.CheckBoundIntersection(e,this.geometryBase.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent.maxV,this.geometryBase.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent.maxVOther)}},{key:"CheckIsOutOfExtent",value:function(e){for(var t=0,n=0,i=0;i<e.length;++i){var a=e[i];a.x<this.geometryBase.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent.minV.x&&t++,a.x>this.geometryBase.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent.maxV.x&&n++}t===e.length&&(this.needWrappingToRight=!0,this.needWrappingToLeft=!1),n===e.length&&(this.needWrappingToRight=!1,this.needWrappingToLeft=!0)}},{key:"IsOutOfExtent",value:function(e){for(var t=0;t<e.length;++t)if(e[t].x>this.geometryBase.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent.minV.x&&e[t].x<this.geometryBase.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent.maxV.x)return!1;return!0}},{key:"ComputeWrappingDuplication",value:function(e,t){for(var n=[],i=0;i<e.length;++i){var a=e[i],o=this.geometryBase.scene.annotationInstance.geometryCommon.gcmdSupporting.WrappingProjectedPosShape(a.proX,a.proY,t),r=new Oe(o[0],o[1]);r.proX=o[0],r.proY=o[1],r.long=e[i].long,r.lat=e[i].lat,o=this.geometryBase.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(r.proX,r.proY),r.x=o[0],r.y=o[1],n.push(r)}return n}}]),e}(),kt=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(jt()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(o.a)(this,i),t=n.call(this,e),a.length>0&&(t.vsArray=a),t}return i}(Ct);function St(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var It=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(St()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g.j.APOINT,p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;return Object(o.a)(this,i),t=n.call(this,e),Object(u.a)(Object(s.a)(t),"isLineNetwork",!1),t.vec=new Oe(a,r,c),t.UpdateGoeVec(),t.trajectoryVecs=[],t.edges=[],t.nodes=[],t.r=p,t.rOrigin=p,t.rTarget=p+10,t.weightLeft=0,t.weightRight=0,t.type=l,t.isMid=!1,t.isGeoPos=!0,t.isPointMid=!1,t.isAniUp=!0,t.hasPopup=!1,t.scene.AddBasePoint(Object(s.a)(t)),t.isUnderConstruction=!1,t.wrapping=new Ct(Object(s.a)(t),[t.vec]),t.visTrajector=!0,t.collision.isFixed=!0,t.UpdateBoundingBox(),t.InitVecsHistory(),t.InitScale(),t.Init(),t}return Object(r.a)(i,null,[{key:"MouseRightClick",value:function(e){}},{key:"MouseMiddleClick",value:function(e){}},{key:"MouseLeftClick",value:function(e,t){}},{key:"OnMouseMove",value:function(e){}},{key:"MouseDrag",value:function(e){}},{key:"MouseUp",value:function(e){}}]),Object(r.a)(i,[{key:"Init",value:function(){}},{key:"Update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e)return this.UpdateInitProjection(),void this.UpdatePostTransformation();(this.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.isViewChanging||1===this.scene.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.canvasLoopController.level)&&this.isPin&&(this.UpdateScreenVecForPan(),this.UpdatePostTransformation())}},{key:"UpdateInitProjection",value:function(){this.UpdateScreenVec()}},{key:"UpdateScreenVecForPan",value:function(){this.UpdateScreenVecByProjectedPos(),this.UpdateScale()}},{key:"UpdateScreenVec",value:function(){this.UpdateScreenVecByProjectedPos(),this.UpdateGoeVec(),this.HasPopup&&this.UpdateDivPos()}},{key:"UpdateScreenVecByProjectedPos",value:function(){var e=[0,0];if(this.type===g.j.POINT_ICON||this.type===g.j.POINT_NUMBERED||this.type===g.j.POINT_REGULAR||this.type===g.j.POINT_NUMBERED_TOUR||this.type===g.j.ANODE_TEXT||this.type===g.j.CPOINT||this.type===g.j.CPOINT_NUMBERED||this.type===g.j.CPOINT_REGULAR)if(this.wrapping.UpdateProjectionPoint(this.vec),this.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView&&this.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.animation){var t=this.scene.annotationInstance.geometryCommon.gcmdSupporting.WrappingProjectedPos(this.vec.proX,this.vec.proY);this.vec.proX=t[0],this.vec.proY=t[1],e=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(this.vec.proX,this.vec.proY)}else{var n=this.scene.annotationInstance.geometryCommon.gcmdSupporting.WrappingProjectedPos(this.vec.proX,this.vec.proY);this.vec.proX=n[0],this.vec.proY=n[1],e=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(this.vec.proX,this.vec.proY)}else e=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(this.vec.proX,this.vec.proY);Number.isNaN(e[0])||(this.vec.x=e[0],this.vec.y=e[1])}},{key:"UpdateGoeVec",value:function(){var e=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(this.vec.x,this.vec.y);this.vec.long=e[0],this.vec.lat=e[1],this.vec.proX=e[2],this.vec.proY=e[3]}},{key:"GetParentType",value:function(){return"APointBase"}},{key:"Distance",value:function(e,t){return Math.sqrt((this.vec.x-e)*(this.vec.x-e)+(this.vec.y-t)*(this.vec.y-t))}},{key:"AddEdge",value:function(e){-1===this.edges.indexOf(e)&&this.edges.push(e)}},{key:"RemoveEdge",value:function(e){}},{key:"ActivateEasing",value:function(e,t){this.scene.annotationInstance.scene.capture=void 0,this.tVec=new Oe(e.x,e.y,0),this.isAniEasing=!0}},{key:"Easing",value:function(){this.isAniEasing&&(this.vec=U(z(this.vec,.95),z(this.tVec,.05)),Z(this.vec,this.tVec)<1&&(this.isAniEasing=!1)),this.UpdateGoeVec()}},{key:"Accelerating",value:function(){this.vec=U(z(this.vec,.9),z(this.tVec,.1)),Z(this.vec,this.tVec)<1&&(this.isAniEasing=!1),this.renderer.t+=.01}},{key:"Remove",value:function(){}},{key:"Move",value:function(e,t){this.vec.x=e,this.vec.y=t}},{key:"IsMouseInside",value:function(e,t){return!(this.isRemove||!this.isRenderable||this.isHidden)&&this.Distance(e,t)<=this.r*this.scaleForRender+3*this.scaleForRender}},{key:"DeepCopy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.vec.x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.vec.y,n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.vec.z,new $t(this.scene,e,t,this.vec.z,!1,this.type,this.r));if(n)return n}},{key:"GetLog",value:function(){return"GUID : "+this.id+"/TYPE : "+this.type.toString()+"/Geo : lat:"+this.vec.long.toFixed(5).toString()+", Log:"+this.vec.lat.toFixed(5).toString()+"/Screen : /Projected : "+this.vec.proX.toFixed(5).toString()+", Log:"+this.vec.proY.toFixed(5).toString()+"/SIZE : "+this.r+" pixel/CONNE :"+this.edges.length.toString()+"/IsCap :"+this.isCaptured+"/IsSEL : "+this.isSelected+"/IsHid : "+this.isHidden+"/IsDeg : "+this.isDrag+"/isSelable : "+this.isSelectable+"/hasTextLeaderline : "+this.textLeaderline}},{key:"GetLogDOM",value:function(){return"Geometry ID : "+this.id+'<br>geometry Type : APointBase" <br>position : <br>size : '+this.r+" pixel<br>type : "+this.type+"<br>isSelected : "+this.isSelected+"<br>isSelectable : "+this.isSelectable+"<br>"}},{key:"GoToBlackhole",value:function(){this.needBlackhole=!0,this.tVec=this.scene.annotationInstance.renderer.blackhole.v,this.isAniAccel=!0}},{key:"Hide",value:function(){this.isSelectable=!1,this.isRenderable=!1}},{key:"TranslateByMouseEventData",value:function(e){this.isRemove||!this.isRenderable||this.isHidden||this.isGhost||(this.vec.x+=e.x-e.preX,this.vec.y+=e.y-e.preY,this.isDrag=!0,this.textLeaderline&&(this.textLeaderline.TranslateByMouseEventData(e),this.textLeaderline&&this.textLeaderline.leaderline&&(this.textLeaderline.leaderline.v2.x=this.vec.x,this.textLeaderline.leaderline.v2.y=this.vec.y)),this.UpdateGoeVec(),this.UpdatePostTransformation())}},{key:"Translate",value:function(e,t){}},{key:"GetNode",value:function(){var e=[];return e.push(this.vec),e}},{key:"ToJSON",value:function(){if(!this.isGhost&&this.type!==g.j.ANODE&&this.type!==g.j.ANODE_CIRCLE&&this.type!==g.j.AMIDPOINT&&this.type!==g.j.AN_GON&&this.type!==g.j.ANODE_RECT){var e=new rt(this.id,this.type,this.isSelected,this.isHover,this.isHidden);return e.PushNode(this.GetNode()),e}}},{key:"GetIOGeometry",value:function(){return this.ToJSON()}},{key:"VisTrajectory",value:function(e,t){this.trajectoryVecs.push(t),this.trajectoryVecs.length>6&&this.trajectoryVecs.shift()}},{key:"OutExtent",value:function(){this.isInsideExtent&&(this.HasPopup&&(this.HidePopUpSummary(),this.hasPopupPre=!0),this.isInsideExtent=!1)}},{key:"InExtent",value:function(){this.isInsideExtent||(this.hasPopupPre&&this.ShowPopupSummary(),this.isInsideExtent=!0)}},{key:"RenderPost",value:function(e){}},{key:"UpdateDivPos",value:function(){}},{key:"UpdatePostTransformation",value:function(){this.UpdateBoundingBox()}},{key:"IsPin",get:function(){return this.isPin},set:function(e){this.isPin=e,this.UpdateGoeVec(),this.UpdateScreenVec()}},{key:"V",get:function(){return this.vec},set:function(e){this.vec=e}},{key:"IsHover",get:function(){return this.isHover},set:function(e){this.isHover=e}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){this.isSelected=e}},{key:"disable",set:function(e){this._disable=e,this._disable?this.isSelected=!1:this.isSelected=!0}}]),i}(wt);function Pt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Rt=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Pt()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).vec=new Oe(0,0,0),t}return Object(r.a)(i,[{key:"UpdateGoeVec",value:function(){}},{key:"UpdateScreenVec",value:function(){}},{key:"UpdatePan",value:function(){}},{key:"UpdateZoom",value:function(){}},{key:"GetLog",value:function(){return""}},{key:"RenderPost",value:function(e){}},{key:"IsMouseInside",value:function(e,t){return!1}},{key:"TranslateByMouseEventData",value:function(e){}},{key:"Translate",value:function(e,t){}},{key:"Remove",value:function(){}},{key:"Hide",value:function(){}},{key:"V",get:function(){var e=(this.p0.vec.x+this.p1.vec.y+this.pm.vec.x)/3,t=(this.p0.vec.x+this.p1.vec.y+this.pm.vec.x)/3,n=(this.p0.vec.z+this.p1.vec.z+this.pm.vec.z)/3;return this.vec=new Oe(e,t,n),this.vec},set:function(e){this.vec=e}}]),i}(wt),Et=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;Object(o.a)(this,e),Object(u.a)(this,"numToFixed",2),this.geometryBase=t,this.numToFixed=n}return Object(r.a)(e,[{key:"Render",value:function(e,t,n){this.RenderLength(e,t,n),this.RenderDimTotal(e,n),this.RenderTotalArea(e,n)}},{key:"RenderLength",value:function(e,t,n){for(var i=0;i<n.length-1;++i)n[i].x<n[i+1].x?this.geometryBase.scene.annotationInstance.renderer.draw.shape.line.LineDim(e,this.geometryBase.styleComponent.renderStyle,n[i].x,n[i].y,n[i+1].x,n[i+1].y,At.DistancefromGeoV(n[i],n[i+1],this.geometryBase.scene.annotationInstance.activeCommandController.acProperties.unit)):this.geometryBase.scene.annotationInstance.renderer.draw.shape.line.LineDim(e,this.geometryBase.styleComponent.renderStyle,n[i+1].x,n[i+1].y,n[i].x,n[i].y,At.DistancefromGeoV(n[i],n[i+1],this.geometryBase.scene.annotationInstance.activeCommandController.acProperties.unit));if(t&&(n[n.length-1].x<n[0].x?this.geometryBase.scene.annotationInstance.renderer.draw.shape.line.LineDim(e,this.geometryBase.styleComponent.renderStyle,n[n.length-1].x,n[n.length-1].y,n[0].x,n[0].y,At.DistancefromGeoV(n[n.length-1],n[0],this.geometryBase.scene.annotationInstance.activeCommandController.acProperties.unit)):this.geometryBase.scene.annotationInstance.renderer.draw.shape.line.LineDim(e,this.geometryBase.styleComponent.renderStyle,n[0].x,n[0].y,n[n.length-1].x,n[n.length-1].y,At.DistancefromGeoV(n[n.length-1],n[0],this.geometryBase.scene.annotationInstance.activeCommandController.acProperties.unit))),t)for(var a=0;a<n.length;++a)a===n.length-1?this.geometryBase.scene.annotationInstance.renderer.draw.shape.line.LineDim(e,this.geometryBase.styleComponent.renderStyle,n[a].x,n[a].y,n[0].x,n[0].y,At.DistancefromGeoV(n[a],n[0],this.geometryBase.scene.annotationInstance.activeCommandController.acProperties.unit)):n[a].x<n[a+1].x?this.geometryBase.scene.annotationInstance.renderer.draw.shape.line.LineDim(e,this.geometryBase.styleComponent.renderStyle,n[a].x,n[a].y,n[a+1].x,n[a+1].y,At.DistancefromGeoV(n[a],n[a+1],this.geometryBase.scene.annotationInstance.activeCommandController.acProperties.unit)):this.geometryBase.scene.annotationInstance.renderer.draw.shape.line.LineDim(e,this.geometryBase.styleComponent.renderStyle,n[a+1].x,n[a+1].y,n[a].x,n[a].y,At.DistancefromGeoV(n[a],n[a+1],this.geometryBase.scene.annotationInstance.activeCommandController.acProperties.unit));else for(var o=0;o<n.length-1;++o)n[o].x<n[o+1].x?this.geometryBase.scene.annotationInstance.renderer.draw.shape.line.LineDim(e,this.geometryBase.styleComponent.renderStyle,n[o].x,n[o].y,n[o+1].x,n[o+1].y,At.DistancefromGeoV(n[o],n[o+1],this.geometryBase.scene.annotationInstance.activeCommandController.acProperties.unit)):this.geometryBase.scene.annotationInstance.renderer.draw.shape.line.LineDim(e,this.geometryBase.styleComponent.renderStyle,n[o+1].x,n[o+1].y,n[o].x,n[o].y,At.DistancefromGeoV(n[o],n[o+1],this.geometryBase.scene.annotationInstance.activeCommandController.acProperties.unit))}},{key:"RenderDimTotal",value:function(e,t){t.length>2&&this.geometryBase.type===g.j.POLYLINE&&this.RenderTotalLength(e,t)}},{key:"RenderTotalArea",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"RenderTotalLength",value:function(e,t){for(var n=0,i=0;i<t.length-1;++i)n+=Math.abs(At.DistancefromGeoV(t[i],t[i+1],this.geometryBase.scene.annotationInstance.activeCommandController.acProperties.unit));console.debug(n)}},{key:"RenderLengthCircle",value:function(e,t,n){}},{key:"RenderTotalAreaCircle",value:function(e,t,n){}},{key:"RenderLengthRect",value:function(e,t){}},{key:"RenderTotalAreaRect",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"RenderLengthCurve",value:function(e,t,n){}},{key:"RenderTotalLengthCurve",value:function(e,t,n){for(var i=0;i<t.length-1;++i);}},{key:"RenderRemainLengthByValue",value:function(e,t,n){}},{key:"RenderTotalAreaCurve",value:function(e,t,n){for(var i=0;i<t.length-1;++i);}},{key:"RenderTotalLengthInput",value:function(){}}]),e}();function Dt(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return Tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tt(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Mt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var At=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Mt()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e,t,a){var r,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g.j.ALINE;arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]&&arguments[6];Object(o.a)(this,i),r=n.call(this,e),Object(u.a)(Object(s.a)(r),"graphID",-1),Object(u.a)(Object(s.a)(r),"vecs",[]),Object(u.a)(Object(s.a)(r),"vecSelected",-1),r.isUndo=c,r.type=l,r.p0=t,r.p0.type=g.j.ANODE,r.p0.isLineNetwork=!0,r.p1=a,r.p1.type=g.j.ANODE,r.p1.isLineNetwork=!0;var p=H(r.p0.vec,r.p1.vec);return r.pm=new $t(r.scene,p.x,p.y,p.z),r.pm.isLineNetwork=!0,r.V=new Oe(p.x,p.y,p.z),r.pm.type=g.j.ANODE,r.InitLine(),r}return Object(r.a)(i,null,[{key:"InsertPoint",value:function(e,t){var n=this.FindAtPointByXY(e,t.x,t.y);if(n){var i=n.GetVecCloseToLine(t);this.needAttach&&n.SplitLineByVec(i)}}},{key:"SplitAllLinebyLine",value:function(e){for(var t=0;t<e.listALine.length;++t)for(var n=0;n<e.listALine.length;++n)e.listALine[n].SplitLineByLine(e.listALine[t])}},{key:"GetLengthSelection",value:function(e){for(var t=e.listALine.length,n=0;t--;)e.listALine[t].IsSelected&&(n+=1);return n}},{key:"UpdatePathFinding",value:function(){}},{key:"DistancefromGeoV",value:function(e,t,n){var i=ne(e,t);return n===Ze.METER?1e3*i:n===Ze.KM?i:n===Ze.MILE?mt(i):-1}},{key:"DistancefromV",value:function(e,t,n){var i=ie(e,t);return n===Ze.METER?1e3*i:n===Ze.KM?i:n===Ze.MILE?mt(i):-1}},{key:"GetLinesByVecs",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=[],o=i.needAttach;i.needAttach=n;for(var r=0;r<t.length-1;++r){var s=new i(e,new $t(e,t[r].x,t[r].y,t[r].z),new $t(e,t[r+1].x,t[r+1].y,t[r+1].z));s.IsSelectable=!0,s.isUnderConstruction=!1,r>0&&(a[r-1].p1.vec=s.p0.vec),a.push(s)}i.needAttach=o;for(var c=0;c<a.length;++c)e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(a[c].ToJSON());return a}},{key:"GetLinesByPts",value:function(e,t){for(var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=[],a=0;a<t.length;++a)i.push(new Oe(t[a].vec.x,t[a].vec.y,t[a].vec.z));return this.GetLinesByVecs(e,i,n)}},{key:"FindAtPoint",value:function(e,t){return this.FindAtPointByXY(e,t.x,t.y)}},{key:"FindAtPointByXY",value:function(e,t,n){for(var i=e.listALine.length-1;i>=0;--i){var a=!1;if(e.listALine[i].p0.Distance(t,n)<3&&(a=!0),e.listALine[i].p1.Distance(t,n)<3&&(a=!0),!a)if(e.listALine[i].Distance(t,n)<e.listALine[0].lineWidth)return e.listALine[i]}}},{key:"ComputeOver",value:function(e,t){var n=i.FindAtPoint(e,t);void 0!==n&&(n.isHover=!0)}},{key:"DrawShadow",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.j.ALINE;if(void 0===i.condition.geo){var a=new $t(e,t.x,t.y,0);a.isSelectable=!1,n===g.j.ALINE&&void 0!==i.condition.v0&&(i.condition.geo=new i(e,i.condition.v0,a)),void 0!==i.condition.geo&&(i.condition.geo.IsSelectable=!1)}else void 0!==i.condition.geo.p1&&i.condition.geo.p1.Move(t.x,t.y)}},{key:"GetLine",value:function(e,t){if(void 0!==i.condition.v0){if(void 0!==i.condition.v0){if(void 0===i.condition.geo)return;return i.condition.geo.IsSelectable=!0,i.condition.geo.isUnderConstruction=!1,i.condition.geo.IsHover=!1,e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(i.condition.geo.ToJSON()),i.condition.v0=void 0,i.condition.v1=void 0,void(i.condition.geo=void 0)}}else i.condition.v0=new $t(e,t.x,t.y)}},{key:"GetLinesByVec",value:function(e){}},{key:"GetLineByPt",value:function(e,t){return void 0===i.condition.v0&&void 0===i.condition.v1?(i.condition.v0=new $t(e,t.vec.x,t.vec.y,t.vec.z),void(i.needAttach?i.condition.v0.vec=t.vec:t.type===g.j.APOINT&&t.Remove())):(void 0!==i.condition.geo&&void 0!==i.condition.geo.p1&&i.condition.geo.p1.Move(t.vec.x,t.vec.y),void 0!==i.condition.geo&&(i.condition.geo.IsSelectable=!0,i.condition.geo.isUnderConstruction=!1,i.needAttach||t.Remove(),e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(i.condition.geo.ToJSON())),t.type===g.j.ANODE?i.needAttach&&void 0!==i.condition.geo&&(i.condition.geo.p1.vec=t.vec):t.type===g.j.APOINT&&(i.needAttach||t.Remove()),i.condition.v0=void 0,void(i.condition.geo=void 0))}},{key:"FromJSON",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=new i(e,$t.GetNodeFromJSON(e,t.nodes[0],n),$t.GetNodeFromJSON(e,t.nodes[1],n),n);o.type=g.j[t.type],o.style=t.style,o.id=a?e.GetUUID():t.id,o.IsSelectable=!0,o.isUnderConstruction=!1,o.IsHover=!1,o.isHidden=t.isHidden,t.isHidden?o.visibility=0:o.visibility=1,o.wrapping.InitProjectionShapesFromJSON(o.GetVecs()),n||e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(o.ToJSON())}},{key:"Cancel",value:function(){void 0!==i.condition.geo&&i.condition.geo.Remove(),i.condition.v0=void 0,i.condition.v1=void 0,i.condition.geo=void 0}},{key:"Remove",value:function(e,t){i.list.splice(i.list.indexOf(t),1),this.UpdatePathFinding()}},{key:"removeUn",value:function(){for(var e=0;e<this.list.length;++e);}},{key:"MouseDown",value:function(e,t){e.Capture=e.annotationInstance.geometryCommon.gcmdProcessing.FindAtPoint(t)}},{key:"MouseLeftClick",value:function(e,t){var n=e.Capture;if(void 0===n)i.GetLine(e,t);else{if(n.type===g.j.APOINT&&void 0!==n)i.GetLineByPt(e,n);else if(n.type===g.j.ALINE){var a=n.GetCloserNode(t.x,t.y);void 0!==a&&i.GetLineByPt(e,a)}n.isUnderConstruction=!1}}},{key:"MouseMove",value:function(e,t){void 0!==i.condition.v0&&i.DrawShadow(e,t)}},{key:"MouseUp",value:function(e,t){i.needAttach&&(i.SplitAllLinebyLine(e),$t.ComputeAllLineNetworkSnap(e)),this.removeUn(),e.annotationInstance.geometryCommon.gcmdProcessing.DeSelecteAllObjects()}}]),Object(r.a)(i,[{key:"Init",value:function(){}},{key:"InitLine",value:function(){this.wrapping=new Ct(this,this.GetVecs()),this.dimension=new Et(this),this.lineWidth=8,this.pm.AddEdge(this),this.pm.type=g.j.AMIDPOINT_ALINE,this.p0.AddEdge(this),this.p1.AddEdge(this),this.trajectoryVecs=[],this.ArrowScale=1.2,this.graphID=i.id++,this.scene.AddALine(this)}},{key:"ToSave",value:function(){}},{key:"ComputeDimPos",value:function(){}},{key:"UpdatePan",value:function(){}},{key:"ComputeLineAngle",value:function(){return le(W(this.p0.vec),W(this.p1.vec))}},{key:"GoToBlackhole",value:function(){this.isSelectable=!1,this.needBlackhole=!0,this.p0.GoToBlackhole(),this.pm.GoToBlackhole(),this.p1.GoToBlackhole()}},{key:"RemoveByBlackhole",value:function(){Q([this.scene.annotationInstance.renderer.blackhole.v.x,this.scene.annotationInstance.renderer.blackhole.v.y,this.scene.annotationInstance.renderer.blackhole.v.z],[this.pm.vec.x,this.pm.vec.y,this.pm.vec.z])<10&&this.Remove()}},{key:"FindClosestNode",value:function(e,t){return this.p0.IsMouseInside(e,t)?this.p0:this.p1.IsMouseInside(e,t)?this.p1:void 0}},{key:"SplitLineByPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Z(e,this.p0.vec)<this.p0.r)this.p0.MakeUnique();else{if(!(Z(e,this.p1.vec)<this.p1.r)){var n=new i(this.scene,new $t(this.scene,this.p0.vec.x,this.p0.vec.y,this.p0.vec.z),new $t(this.scene,e.x,e.y,e.z)),a=new i(this.scene,new $t(this.scene,e.x,e.y,e.z),new $t(this.scene,this.p1.vec.x,this.p1.vec.y,this.p1.vec.z));if(t||i.split){a.p0.vec=n.p1.vec;var o=this.p0,r=o.GetSharedNode(n.p0);void 0!==r&&(n.p0.vec=r.vec);var s=this.p1,c=s.GetSharedNode(a.p1);void 0!==c&&(a.p1.vec=c.vec)}return n.isUnderConstruction=!1,a.isUnderConstruction=!1,a.p0.IsSelected=!0,this.Remove(),n.p1}this.p1.MakeUnique()}}},{key:"GetLog",value:function(){return"GUID : "+this.id+"/TYPE : "+this.type.toString()+"/POS0: x= "+this.p0.vec.x.toFixed(2)+", "+this.p0.vec.y.toFixed(2)+", "+this.p0.vec.z.toFixed(2)+"/POS1: "+this.p1.vec.x.toFixed(2)+", "+this.p1.vec.y.toFixed(2)+", "+this.p1.vec.z.toFixed(2)+"/STYLE : "+this.style.toString()+"/IsSEL : "+this.isSelected+"/isSelable : "+this.isSelectable+"/length : "+this.GetLength().toFixed(2).toString()+"/"}},{key:"GetLogDOM",value:function(){return"Geometry ID : "+this.id+"<br>geometry Type : ALine<br>Length : "+this.GetLength()+"<br>p0 :"+this.p0.GetLog()+"<br>p1 :"+this.p1.GetLog()+"<br>"}},{key:"IsMouseInside",value:function(e,t){return this.IsMouseInsideOther(e,t)?(this.IsHover=!0,!0):this.Distance(e,t)<this.lineWidth?(this.IsHover=!0,!0):(this.IsHover=!1,!1)}},{key:"IsMouseInsideOther",value:function(e,t){var n=this.wrapping.vsOther;if(n){var i=new Oe(e,t),a=n.length;if(a>1){var o=H(n[0],n[1]);if(Z(o,i)<9)return this.vecSelected=2,!0;for(var r=0;r<n.length;++r){if(Z(i,n[r])<9)return this.vecSelected=r,!0;this.vecSelected=-1}a=n.length;for(var s=0;s<a-1;++s)if(de(i,n[s],n[s+1])<this.lineWidth)return!0}}return!1}},{key:"CheckNode",value:function(){(this.p0.isRemove||this.pm.isRemove||this.p1.isRemove)&&this.Remove()}},{key:"Remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isSelectable=!1,this.isRenderable=!1,this.p0&&this.p0.DeepRemove(),this.p1&&this.p1.DeepRemove(),this.pm&&this.pm.DeepRemove(),e){var t=this.ToJSON();t&&this.scene.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack([t])}this.scene.RemoveALine(this),this.scene.RemoveGeometry(this)}},{key:"TranslateByMouseEventData",value:function(e){if(0!==this.vecSelected)if(1!==this.vecSelected)if(2!==this.vecSelected){var t=e.x-e.preX,n=e.y-e.preY;this.p0.vec.x+=t,this.p0.vec.y+=n,this.p0.UpdateGoeVec(),this.p1.vec.x+=t,this.p1.vec.y+=n,this.p1.UpdateGoeVec(),this.wrapping.UpdateProjection(this.GetVecs())}else this.pm.TranslateByMouseEventData(e);else this.p1.TranslateByMouseEventData(e);else this.p0.TranslateByMouseEventData(e)}},{key:"Hide",value:function(){}},{key:"GetParentType",value:function(){return"ALine,ID:"+this.id}},{key:"ComputeMidPoint",value:function(){var e=H(this.p0.vec,this.p1.vec);this.pm.vec.x=e.x,this.pm.vec.y=e.y,this.pm.isPointMid=!0}},{key:"Distance",value:function(e,t){return de(new Oe(e,t),this.p0.vec,this.p1.vec)}},{key:"GetLength",value:function(){return Z(this.p0.vec,this.p1.vec)}},{key:"SplitLineByLine",value:function(e){}},{key:"GetVecCloseToLine",value:function(e){var t=this.p1.vec.x-this.p0.vec.x,n=this.p1.vec.y-this.p0.vec.y,i=((e.x-this.p0.vec.x)*t+(e.y-this.p0.vec.y)*n)/(t*t+n*n),a=ft(this.p0.vec.x,this.p1.vec.x,i),o=ft(this.p0.vec.y,this.p1.vec.y,i);return new Oe(a,o)}},{key:"GetCloserNode",value:function(e,t){var n;if(this.p0.r>Z(this.p0.vec,new Oe(e,t)))return this.p0;if(this.p1.r>Z(this.p1.vec,new Oe(e,t)))return this.p1;var a=this.GetCloserVecCurve(e,t);return void 0!==(n=i.needAttach?this.SplitLineByVec(a):new $t(this.scene,a.x,a.y,a.z))?n:void 0}},{key:"GetCloserVec",value:function(e,t){if(this.p0.r>Z(this.p0.vec,new Oe(e,t)))return this.p0.vec;if(this.p1.r>Z(this.p1.vec,new Oe(e,t)))return this.p1.vec;var n=this.GetCloserVecCurve(e,t);return void 0!==n?n:void 0}},{key:"GetCloserVecCurve",value:function(e,t){this.p0.vec.x+=1e-14,this.p1.vec.y+=1e-14;var n=me(this.p0.vec,this.p1.vec);return he(this.p0.vec,this.p1.vec,e,t,n,!0)}},{key:"SplitLineByVec",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.needAttach;if(Z(e,this.p0.vec)<this.p0.r)this.p0.MakeUnique();else if(Z(e,this.p1.vec)<this.p1.r)this.p1.MakeUnique();else{this.Remove();var t=new i(this.scene,new $t(this.scene,this.p0.vec.x,this.p0.vec.y,this.p0.vec.z),new $t(this.scene,e.x,e.y,e.z)),n=new i(this.scene,new $t(this.scene,e.x,e.y,e.z),new $t(this.scene,this.p1.vec.x,this.p1.vec.y,this.p1.vec.z));this.scene.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(t.ToJSON()),this.scene.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(n.ToJSON())}}},{key:"GeoToScreen",value:function(){}},{key:"HasOtherConnectivity",value:function(e){var t,n=Dt(e.edges);try{for(n.s();!(t=n.n()).done;){if(this!==t.value)return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"ToJSON",value:function(){var e=new rt(this.id,this.type,this.isSelected,this.isHover,this.isHidden);return e.PushNode(this.GetVecs()),e}},{key:"Move",value:function(){}},{key:"GetVecs",value:function(){var e=[];return e.push(this.p0.vec,this.p1.vec),this.vecs=e,e}},{key:"IsMoveUpdate",value:function(){}},{key:"RenderPost",value:function(e){this.CheckNode(),this.scene.annotationInstance.activeCommandController.acProperties.isPanning&&this.wrapping.UpdateProjection(this.GetVecs()),this.scene.annotationInstance.activeCommandController.acProperties.showUnit&&(this.isHover||this.isUnderConstruction)&&this.dimension.RenderLength(e,!1,this.GetVecs()),this.RenderPostGeometry(e),this.RenderPostGeometryDuplication(e),this.ComputeMidPoint()}},{key:"RenderPostGeometry",value:function(e){this.RenderPostLine(e,this.p0.vec,this.p1.vec)}},{key:"RenderPostGeometryDuplication",value:function(e){(this.wrapping.isIntersectLeft||this.wrapping.isIntersectRight)&&(this.RenderPostLine(e,this.wrapping.vsOther[0],this.wrapping.vsOther[1]),this.RenderPostLinePointDuplication(e,this.wrapping.vsOther[0],this.wrapping.vsOther[1]))}},{key:"RenderPostLine",value:function(e,t,n){this.isHover?this.scene.annotationInstance.renderer.draw.shape.line.Line(e,this.styleComponent.renderStyle,t.x,t.y,n.x,n.y,!0):this.scene.annotationInstance.renderer.draw.shape.line.Line(e,this.styleComponent.renderStyle,t.x,t.y,n.x,n.y,!1),(this.isUnderConstruction||this.isHover)&&this.scene.annotationInstance.renderer.draw.shape.line.LineDim(e,this.styleComponent.renderStyle,t.x,t.y,n.x,n.y,this.GetLength())}},{key:"RenderPostLinePointDuplication",value:function(e,t,n){this.isHover&&(this.scene.annotationInstance.renderer.draw.shape.node.Node(e,this.styleComponent.renderStyle,t.x,t.y,this.scaleForRender),this.scene.annotationInstance.renderer.draw.shape.node.Node(e,this.styleComponent.renderStyle,n.x,n.y,this.scaleForRender),this.scene.annotationInstance.renderer.draw.shape.node.NodeMidHover(e,this.styleComponent.renderStyle,t.x+.5*(n.x-t.x),t.y+.5*(n.y-t.y),this.scaleForRender,1,this.IsSelected))}},{key:"RenderPostGeometryDuplicationCustom",value:function(e){}},{key:"ComputeTrajectory",value:function(e,t,n){this.trajectoryVecs.push(t),this.trajectoryVecs.push(n),this.trajectoryVecs.length>10&&(this.trajectoryVecs.shift(),this.trajectoryVecs.shift()),this.scene.annotationInstance.renderer.draw.shape.line.LineTrajectory(e,this.styleComponent.renderStyle,this.trajectoryVecs)}},{key:"V",get:function(){var e=(this.p0.vec.x+this.p1.vec.y)/3,t=(this.p0.vec.x+this.p1.vec.y)/3,n=(this.p0.vec.z+this.p1.vec.z)/3;return this.vec=new Oe(e,t,n),this.vec},set:function(e){this.vec=e}},{key:"IsSelectable",get:function(){return this.isSelectable},set:function(e){this.isSelectable=e,this.p0.isSelectable=e,this.p1.isSelectable=e,this.pm.isSelectable=e}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){this.isSelected=e,this.scene.annotationInstance.io.eventListenerAnnotation.SelectionStack(this.ToJSON())}},{key:"IsHover",get:function(){return this.isHover},set:function(e){this.isUnderConstruction||(this.isHover=e,this.p0.isRenderable=e,this.p1.isRenderable=e,this.pm.isRenderable=e,this.isHover&&!this.isHoverPre?this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()):!this.isHover&&this.isHoverPre&&this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()),this.isHoverPre=this.isHover,e||(this.needEmitHoverPost=!0,this.HidePopUpSummary()))}}]),i}(Rt);Object(u.a)(At,"split",!0),Object(u.a)(At,"needAttach",!0),Object(u.a)(At,"id",0),Object(u.a)(At,"condition",new function e(){Object(o.a)(this,e)});var Nt,Lt,Gt=n("oGlf"),_t=function(){function e(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(o.a)(this,e),this.UpdateByRGBA(t,n,i,a)}return Object(r.a)(e,null,[{key:"FromHex",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=Object(Gt.d)(t,n);return new e(i[0],i[1],i[2],i[3])}},{key:"FromRGBA",value:function(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new e(t,n,i,a)}},{key:"ToHex",value:function(e){return Object(Gt.g)(e.r,e.g,e.b)}}]),Object(r.a)(e,[{key:"UpdateByRGBA",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this._r=e,this._g=t,this._b=n,this._a=i,this.UpdateString()}},{key:"Normaliz",value:function(){return this.r/=255,this.g/=255,this.b/=255,this}},{key:"DeepCopy",value:function(){return new e(this._r,this._g,this._b,this._a)}},{key:"GetArray",value:function(){return[this._r,this._g,this._b,this._a]}},{key:"ToRBGA_String",value:function(){return this._RGBAString}},{key:"UpdateString",value:function(){this._RGBAString="rgba(".concat(this._r,", ").concat(this._g,", ").concat(this._b,", ").concat(this._a,")")}},{key:"r",get:function(){return this._r},set:function(e){this._r=e,this.UpdateString()}},{key:"g",get:function(){return this._g},set:function(e){this._g=e,this.UpdateString()}},{key:"b",get:function(){return this._b},set:function(e){this._b=e,this.UpdateString()}},{key:"a",get:function(){return this._a},set:function(e){this._a=e,this.UpdateString()}}]),e}(),Bt=function(){function e(){Object(o.a)(this,e),Object(u.a)(this,"_lineCap",g.l.ROUND),Object(u.a)(this,"_dash",[0,0]),this._colorFillFirst=new _t(0,0,0),this._colorFillSecond=new _t(0,0,0),this._colorStrokeFirst=new _t(0,0,0),this._colorStrokeSecond=new _t(0,0,0),this._lineWidth=3}return Object(r.a)(e,null,[{key:"UpdateRenderStyleRPoint",value:function(e,t){var n=t.rPoint;e._colorFillFirst.UpdateByRGBA(n.fillStyleFirstArray[0],n.fillStyleFirstArray[1],n.fillStyleFirstArray[2],n.fillStyleFirstArray[3]),e._colorFillSecond.UpdateByRGBA(n.fillStyleSecondArray[0],t.rPoint.fillStyleSecondArray[1],t.rPoint.fillStyleSecondArray[2],t.rPoint.fillStyleSecondArray[3]),e._lineWidth=t.rPoint.lineWidth,e.InitInterpolation(t.properties.desaturationValue)}},{key:"UpdateRenderStyleNPoint",value:function(e,t){var n=t.nPoint;e._colorFillFirst.UpdateByRGBA(n.fillStyleFirstArray[0],n.fillStyleFirstArray[1],n.fillStyleFirstArray[2],n.fillStyleFirstArray[3]),e._colorFillSecond.UpdateByRGBA(n.fillStyleSecondArray[0],n.fillStyleSecondArray[1],n.fillStyleSecondArray[2],n.fillStyleSecondArray[3]),e._lineWidth=t.nPoint.lineWidth,e.InitInterpolation(t.properties.desaturationValue)}},{key:"UpdateRenderStylePolyline",value:function(e,t){var n=t.polyline;e._colorStrokeFirst.UpdateByRGBA(n.strokeStyleFirstArray[0],n.strokeStyleFirstArray[1],n.strokeStyleFirstArray[2],n.strokeStyleFirstArray[3]),e._colorStrokeSecond.UpdateByRGBA(n.strokeStyleSecondArray[0],n.strokeStyleSecondArray[1],n.strokeStyleSecondArray[2],n.strokeStyleSecondArray[3]),e._lineWidth=t.polyline.lineWidth,e.InitInterpolationStroke(t.properties.desaturationValue)}},{key:"UpdateRenderStylePolylineNode",value:function(e,t){var n=t.polyline;e._colorStrokeFirst.UpdateByRGBA(n.strokeStyleFirstArray[0],n.strokeStyleFirstArray[1],n.strokeStyleFirstArray[2],n.strokeStyleFirstArray[3]),e._colorStrokeSecond.UpdateByRGBA(n.strokeStyleSecondArray[0],n.strokeStyleSecondArray[1],n.strokeStyleSecondArray[2],n.strokeStyleSecondArray[3]),e._lineWidth=t.polyline.lineWidth,t.properties.isDarkBG?e._colorFillFirst.UpdateByRGBA(0,0,0,1):e._colorFillFirst.UpdateByRGBA(255,255,255,1),e.InitInterpolation(t.properties.desaturationValue)}},{key:"UpdateRenderStyleArrow",value:function(e,t){var n=t.arrow;e._colorFillFirst.UpdateByRGBA(n.fillStyleFirstArray[0],n.fillStyleFirstArray[1],n.fillStyleFirstArray[2],n.fillStyleFirstArray[3]),e._colorFillSecond.UpdateByRGBA(n.fillStyleSecondArray[0],n.fillStyleSecondArray[1],n.fillStyleSecondArray[2],n.fillStyleSecondArray[3]),e._colorStrokeFirst.UpdateByRGBA(n.strokeStyleFirstArray[0],n.strokeStyleFirstArray[1],n.strokeStyleFirstArray[2],n.strokeStyleFirstArray[3]),e._colorStrokeSecond.UpdateByRGBA(n.strokeStyleSecondArray[0],n.strokeStyleSecondArray[1],n.strokeStyleSecondArray[2],n.strokeStyleSecondArray[3]),e._lineWidth=n.lineWidth,e.InitInterpolationStroke(t.properties.desaturationValue)}},{key:"UpdateRenderStyleArrowNode",value:function(e,t){var n=t.arrow;e._colorStrokeFirst.UpdateByRGBA(n.strokeStyleFirstArray[0],n.strokeStyleFirstArray[1],n.strokeStyleFirstArray[2],n.strokeStyleFirstArray[3]),e._colorStrokeSecond.UpdateByRGBA(n.strokeStyleSecondArray[0],n.strokeStyleSecondArray[1],n.strokeStyleSecondArray[2],n.strokeStyleSecondArray[3]),e._lineWidth=n.lineWidth,t.properties.isDarkBG?e._colorFillFirst.UpdateByRGBA(0,0,0,1):e._colorFillFirst.UpdateByRGBA(255,255,255,1),e.InitInterpolation(t.properties.desaturationValue)}},{key:"UpdateRenderStyleArrowCustom",value:function(e,t,n){var i=n.colorRgba;e._colorFillFirst.UpdateByRGBA(i[0],i[1],i[2],i[3]),e._colorFillSecond.UpdateByRGBA(i[0],i[1],i[2],t.properties.opacity+.5),e._colorStrokeFirst.UpdateByRGBA(i[0],i[1],i[2],i[3]),e._colorStrokeSecond.UpdateByRGBA(i[0],i[1],i[2],t.properties.opacity),e._lineWidth=n.width,e.InitInterpolationStroke(t.properties.desaturationValue)}},{key:"UpdateRenderStyleArrowNodeCustom",value:function(e,t,n){var i=n.colorRgba;e._colorStrokeFirst.UpdateByRGBA(i[0],i[1],i[2],i[3]),e._colorStrokeSecond.UpdateByRGBA(i[0],i[1],i[2],i[3]),e._lineWidth=n.width,t.properties.isDarkBG?e._colorFillFirst.UpdateByRGBA(0,0,0,1):e._colorFillFirst.UpdateByRGBA(255,255,255,1),e.InitInterpolation(t.properties.desaturationValue)}},{key:"UpdateRenderStylePolygon",value:function(e,t){var n=t.polygon;e._colorFillFirst.UpdateByRGBA(n.fillStyleFirstArray[0],n.fillStyleFirstArray[1],n.fillStyleFirstArray[2],n.fillStyleFirstArray[3]),e._colorFillSecond.UpdateByRGBA(n.fillStyleSecondArray[0],n.fillStyleSecondArray[1],n.fillStyleSecondArray[2],n.fillStyleSecondArray[3]),e._colorStrokeFirst.UpdateByRGBA(n.strokeStyleFirstArray[0],n.strokeStyleFirstArray[1],n.strokeStyleFirstArray[2],n.strokeStyleFirstArray[3]),e._colorStrokeSecond.UpdateByRGBA(n.strokeStyleSecondArray[0],n.strokeStyleSecondArray[1],n.strokeStyleSecondArray[2],n.strokeStyleSecondArray[3]),e._lineWidth=n.lineWidth,e.InitInterpolation(t.properties.desaturationValue)}},{key:"UpdateRenderStylePolygonNode",value:function(e,t){var n=t.polygon;e._colorStrokeFirst.UpdateByRGBA(n.strokeStyleFirstArray[0],n.strokeStyleFirstArray[1],n.strokeStyleFirstArray[2],n.strokeStyleFirstArray[3]),e._colorStrokeSecond.UpdateByRGBA(n.strokeStyleSecondArray[0],n.strokeStyleSecondArray[1],n.strokeStyleSecondArray[2],n.strokeStyleSecondArray[3]),e._lineWidth=n.lineWidth,t.properties.isDarkBG?e._colorFillFirst.UpdateByRGBA(0,0,0,1):e._colorFillFirst.UpdateByRGBA(255,255,255,1),e.InitInterpolation(t.properties.desaturationValue)}},{key:"UpdateRenderStyleFH",value:function(e,t){var n=t.freehand;e._colorFillFirst.UpdateByRGBA(n.fillStyleFirstArray[0],n.fillStyleFirstArray[1],n.fillStyleFirstArray[2],n.fillStyleFirstArray[3]),e._colorStrokeFirst.UpdateByRGBA(n.strokeStyleFirstArray[0],n.strokeStyleFirstArray[1],n.strokeStyleFirstArray[2],n.strokeStyleFirstArray[3]),e._lineWidth=n.lineWidth,e.InitInterpolation(t.properties.desaturationValue)}},{key:"UpdateRenderStyleFHPolyline",value:function(e,t){var n=t.polyline,i=t.properties.opacity;e._colorStrokeFirst.UpdateByRGBA(n.strokeStyleFirstArray[0],n.strokeStyleFirstArray[1],n.strokeStyleFirstArray[2],i),e._colorStrokeSecond.UpdateByRGBA(n.strokeStyleSecondArray[0],n.strokeStyleSecondArray[1],n.strokeStyleSecondArray[2],i),e._lineWidth=t.polyline.lineWidth,e.InitInterpolation(t.properties.desaturationValue)}},{key:"UpdateRenderStyleFHPolylineNode",value:function(e,t){var n=t.polyline,i=t.properties.opacity;e._colorStrokeFirst.UpdateByRGBA(n.strokeStyleFirstArray[0],n.strokeStyleFirstArray[1],n.strokeStyleFirstArray[2],i),e._colorStrokeSecond.UpdateByRGBA(n.strokeStyleSecondArray[0],n.strokeStyleSecondArray[1],n.strokeStyleSecondArray[2],i),e._lineWidth=t.polyline.lineWidth,t.properties.isDarkBG?e._colorFillFirst.UpdateByRGBA(0,0,0,i):e._colorFillFirst.UpdateByRGBA(255,255,255,i),e.InitInterpolation(t.properties.desaturationValue)}},{key:"UpdateRenderStyleFHPolygon",value:function(e,t){var n=t.polygon,i=t.properties.opacity;e._colorFillFirst.UpdateByRGBA(n.fillStyleFirstArray[0],n.fillStyleFirstArray[1],n.fillStyleFirstArray[2],i),e._colorFillSecond.UpdateByRGBA(n.fillStyleSecondArray[0],n.fillStyleSecondArray[1],n.fillStyleSecondArray[2],i),e._colorStrokeFirst.UpdateByRGBA(n.strokeStyleFirstArray[0],n.strokeStyleFirstArray[1],n.strokeStyleFirstArray[2],i),e._colorStrokeSecond.UpdateByRGBA(n.strokeStyleSecondArray[0],n.strokeStyleSecondArray[1],n.strokeStyleSecondArray[2],i),e._lineWidth=n.lineWidth,e.InitInterpolation(t.properties.desaturationValue)}},{key:"UpdateRenderStyleFHPolygonNode",value:function(e,t){var n=t.polygon,i=t.properties.opacity;e._colorStrokeFirst.UpdateByRGBA(n.strokeStyleFirstArray[0],n.strokeStyleFirstArray[1],n.strokeStyleFirstArray[2],i),e._colorStrokeSecond.UpdateByRGBA(n.strokeStyleSecondArray[0],n.strokeStyleSecondArray[1],n.strokeStyleSecondArray[2],i),e._lineWidth=n.lineWidth,t.properties.isDarkBG?e._colorFillFirst.UpdateByRGBA(0,0,0,i):e._colorFillFirst.UpdateByRGBA(255,255,255,i),e.InitInterpolation(t.properties.desaturationValue)}},{key:"ShiftNodeStyle",value:function(e,t){t._colorFillFirst=e._colorStrokeFirst.DeepCopy(),t._colorStrokeFirst=e._colorFillFirst.DeepCopy()}},{key:"DeepCopy",value:function(e,t){t._colorFillFirst=e._colorFillFirst.DeepCopy(),t._colorFillSecond=e._colorFillSecond.DeepCopy(),t._colorStrokeFirst=e._colorStrokeFirst.DeepCopy(),t._colorStrokeSecond=e._colorStrokeSecond.DeepCopy(),t._lineCap=e._lineCap,t._lineWidth=e._lineWidth}}]),Object(r.a)(e,[{key:"InitInterpolation",value:function(e){this.colorInterpolated=this._colorFillFirst.DeepCopy(),this.colorA=this._colorFillFirst.DeepCopy(),this.colorB=this._colorFillSecond.DeepCopy();var t=Object(Gt.f)([this.colorB.r,this.colorB.g,this.colorB.b,this.colorB.a],0,e,0);this.colorB.r=t[0],this.colorB.g=t[1],this.colorB.b=t[2],this.colorB.a=t[3]}},{key:"InitInterpolationStroke",value:function(e){this.colorInterpolated=this._colorStrokeFirst.DeepCopy(),this.colorA=this._colorStrokeFirst.DeepCopy(),this.colorB=this._colorStrokeSecond.DeepCopy();var t=Object(Gt.f)([this.colorB.r,this.colorB.g,this.colorB.b,this.colorB.a],0,e,0);this.colorB.r=t[0],this.colorB.g=t[1],this.colorB.b=t[2],this.colorB.a=t[3]}},{key:"colorInterpolatedString",get:function(){return this.colorInterpolated.ToRBGA_String()}},{key:"colorFill",get:function(){return this._colorFillFirst.ToRBGA_String()}},{key:"colorFillHover",get:function(){return this._colorFillSecond.ToRBGA_String()}},{key:"colorStroke",get:function(){return this._colorStrokeFirst.ToRBGA_String()}},{key:"colorStrokeHover",get:function(){return this._colorStrokeSecond.ToRBGA_String()}},{key:"lineWidth",get:function(){return this._lineWidth}},{key:"lineCap",get:function(){return this._lineCap}},{key:"dash",get:function(){return this._dash},set:function(e){this._dash=e}}]),e}();!function(e){e.Small="small",e.Large="large",e.Continuous="continuous"}(Nt||(Nt={})),function(e){e.ThemeColor1="themeColor1",e.ThemeColor2="themeColor2",e.ThemeColor3="themeColor3",e.BackgroundColor="backgroundColor",e.TitleColor="titleColor",e.AccentColor1="accentColor1"}(Lt||(Lt={}));var Wt=function e(){Object(o.a)(this,e),Object(u.a)(this,"scale",1),Object(u.a)(this,"width",2),Object(u.a)(this,"themeColorId",Lt.TitleColor),Object(u.a)(this,"lineTypeId",Nt.Continuous)},Vt=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"isCustom",!1),this.geo=t,this.state=new Wt,this.renderStyle=new Bt,this.renderStyleNode=new Bt}return Object(r.a)(e,[{key:"UpdateStyle",value:function(){}},{key:"UpdateStyleCustom",value:function(e){}},{key:"ToJson",value:function(){}}]),e}();function Ft(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ut=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Ft()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).renderStyle=new Bt,t.renderStyleNode=new Bt,t.renderStyleOrigin=new Bt,t.renderStyleOpposite=new Bt,t.UpdateStyle(),t}return Object(r.a)(i,[{key:"UpdateStyle",value:function(){}},{key:"UpdateStyleForNode",value:function(e){this.renderStyle=e,Bt.DeepCopy(e,this.renderStyleOrigin),Bt.ShiftNodeStyle(e,this.renderStyleOpposite)}},{key:"ShiftNodeStyle",value:function(e){this.renderStyle=e?this.renderStyleOpposite:this.renderStyleOrigin}}]),i}(Vt),zt=function(){function e(t){Object(o.a)(this,e),this.host=t,this.incrementTimePopupSummary=.02}return Object(r.a)(e,[{key:"Update",value:function(){this.host.geo.isDrag?(this.host.tUp+=.5*this.host.geo.scene.annotationInstance.renderer.dt,this.host.tDown2=0):(this.host.geo.isSelected?(this.host.tOver+=this.host.geo.scene.annotationInstance.renderer.dt,this.host.tDown1=0,this.host.geo.isHover?this.host.tOverPopupSummary+=this.incrementTimePopupSummary:this.host.tOverPopupSummary=0,this.host.geo.isLeave=!0):this.host.geo.isHover?(this.host.tOver+=.5*this.host.geo.scene.annotationInstance.renderer.dt,this.host.tOverPopupSummary+=this.incrementTimePopupSummary,this.host.tDown1=0,this.host.geo.isLeave=!0):this.host.geo.isLeave&&!this.host.geo.isDrag?(this.host.tDown1+=this.host.geo.scene.annotationInstance.renderer.dt,this.host.tOver=this.host.tOverPopupSummary=0,this.host.tDown1>.15&&(this.host.geo.isLeave=!1)):this.host.geo.isDrag||(this.host.tDown1+=this.host.geo.scene.annotationInstance.renderer.dt,this.host.tOver=this.host.tOverPopupSummary=0),this.host.tUp=0,this.host.tDown2+=.01),this.host.t+=.01}},{key:"UpdatePopupSummery",value:function(){this.host.geo.isDrag||(this.host.geo.isSelected?this.host.geo.isHover?this.host.tOverPopupSummary+=this.incrementTimePopupSummary:this.host.tOverPopupSummary=0:this.host.geo.isHover?this.host.tOverPopupSummary+=this.incrementTimePopupSummary:this.host.geo.isLeave&&!this.host.geo.isDrag?(this.host.tOverPopupSummary=0,this.host.tDown1>.15&&(this.host.geo.isLeave=!1)):this.host.geo.isDrag||(this.host.tOverPopupSummary=0))}}]),e}(),Ht=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"t",0),Object(u.a)(this,"tOpacityA",0),Object(u.a)(this,"tOpacityB",0),this.host=t,this.host.styleComponent.renderStyle.colorInterpolated&&this.InterpolateColor()}return Object(r.a)(e,[{key:"Update",value:function(){this.InterpolateColor()}},{key:"InterpolateColor",value:function(){if(!this.host.scene.annotationInstance.renderer.needFocus||this.host.IsHover||this.host.IsSelected){if(this.tOpacityA+=this.host.scene.annotationInstance.customization.themeCurrent.properties.timeTransitionA,this.tOpacityB=0,this.tOpacityA<1){var e=Object(Gt.e)(this.host.styleComponent.renderStyle.colorInterpolated.GetArray(),this.host.styleComponent.renderStyle.colorA.GetArray(),this.tOpacityA);this.host.styleComponent.renderStyle.colorInterpolated.r=e[0],this.host.styleComponent.renderStyle.colorInterpolated.g=e[1],this.host.styleComponent.renderStyle.colorInterpolated.b=e[2],this.host.styleComponent.renderStyle.colorInterpolated.a=e[3],this.t=this.tOpacityA}}else if(this.tOpacityA=0,this.tOpacityB+=this.host.scene.annotationInstance.customization.themeCurrent.properties.timeTransitionB,this.tOpacityB<1){var t=Object(Gt.e)(this.host.styleComponent.renderStyle.colorInterpolated.GetArray(),this.host.styleComponent.renderStyle.colorB.GetArray(),this.tOpacityB);this.host.styleComponent.renderStyle.colorInterpolated.r=t[0],this.host.styleComponent.renderStyle.colorInterpolated.g=t[1],this.host.styleComponent.renderStyle.colorInterpolated.b=t[2],this.host.styleComponent.renderStyle.colorInterpolated.a=t[3],this.t=this.tOpacityB}}}]),e}(),Yt=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"t",0),Object(u.a)(this,"tOver",0),Object(u.a)(this,"tOverPopupSummary",0),Object(u.a)(this,"tDown1",0),Object(u.a)(this,"tDown2",0),Object(u.a)(this,"tUp",0),this.geo=t,this.timer=new zt(this),this.interpolateColor=new Ht(this.geo),this.geo.isRenderable=!0}return Object(r.a)(e,[{key:"RenderPost",value:function(e){}}]),e}();function Kt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Xt=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Kt()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).host=e,t}return Object(r.a)(i,[{key:"RenderPost",value:function(e){this.timer.Update(),e.lineCap=g.l.BUTT,this.host.scene.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode===g.k.DRAWING&&(this.host.IsMove&&this.host.UpdateGoeVec(),this.host.isUnderConstruction||this.host.type!==g.j.APOINT_PATH&&(this.host.scene.annotationInstance.activeCommandController.acProperties.pressESC&&this.host.isDrag&&(this.host.isDrag=!1),this.host.type===g.j.AMIDPOINT?1<this.tOver?this.host.scene.annotationInstance.renderer.draw.shape.node.NodeMidHover(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(2*this.tOver),this.host.isSelectedSole):this.host.isHover||this.host.isSelected?this.host.scene.annotationInstance.renderer.draw.shape.node.NodeMidHover(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(2*this.tOver),this.host.isSelectedSole):this.host.edges[0]&&(this.host.edges[0].type!==g.j.ARROW_SINGLE&&this.host.edges[0].type!==g.j.ARROW_DOUBLE||this.host.scene.annotationInstance.renderer.draw.shape.node.NodeMidHoverForArrow(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(2*this.tOver),this.host.isSelectedSole,this.host.edges[0].styleComponent.state.themeColorId)):1<this.tOver?this.host.isHover||this.host.isSelected?this.host.scene.annotationInstance.renderer.draw.shape.node.NodeHover(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(2*this.tOver)):this.host.scene.annotationInstance.renderer.draw.shape.node.Node(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender):this.host.edges[0]&&(this.host.edges[0].type===g.j.ARROW_SINGLE||this.host.edges[0].type===g.j.ARROW_DOUBLE)?this.host.scene.annotationInstance.renderer.draw.shape.node.NodeStart(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(2*this.tOver),this.host.edges[0].styleComponent.state.themeColorId):this.host.scene.annotationInstance.renderer.draw.shape.node.NodeStart(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(2*this.tOver)),this.host.isSelectedSole&&this.host.type===g.j.ANODE?(this.host.scene.annotationInstance.renderer.draw.shape.node.NodeSelected(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender),this.host.tSelectedSole+=.01):this.host.tSelectedSole=0,this.t+=this.host.scene.annotationInstance.renderer.dt))}}]),i}(Yt),Jt=function(){function e(t){Object(o.a)(this,e),this.host=t}return Object(r.a)(e,[{key:"Update",value:function(e){this.host.scene.annotationInstance.implementations.app.INSPECTION&&this.ShowStatus(e)}},{key:"Show",value:function(e){var t=this.host.vec;e.beginPath(),e.arc(t.x,t.y,5,0,6.28),e.closePath(),e.fillStyle="#ff0000",e.fill();var n="".concat(t.long," -- ").concat(t.proX);e.fillText(n,t.x,t.y-5),t=this.host.vec,e.beginPath(),e.arc(t.x,t.y,5,0,6.28),e.closePath(),e.fillStyle="#ff0000",e.fill(),n="".concat(t.long," -- ").concat(t.proX),e.fillText(n,t.x,t.y+10)}},{key:"ShowStatus",value:function(e){var t=this.host.vec;e.beginPath(),e.arc(t.x,t.y,5,0,6.28),e.closePath(),e.fillStyle="#ff0000",e.fill();var n="IsTransform: ".concat(this.host.IsTransform);e.fillText(n,t.x+10,t.y+10);var i="Type: ".concat(this.host.type);e.fillText(i,t.x+100,t.y+10)}}]),e}();function Zt(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qt(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Qt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var $t=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Qt()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g.j.ANODE;arguments.length>6&&void 0!==arguments[6]&&arguments[6];return Object(o.a)(this,i),t=n.call(this,e,a,r,c,p),Object(u.a)(Object(s.a)(t),"aEdges",[]),Object(u.a)(Object(s.a)(t),"nodeID",-1),Object(u.a)(Object(s.a)(t),"tSelectedSole",0),Object(u.a)(Object(s.a)(t),"_isSelectedSole",!1),t.InitComponent(),t.isUndo=l,t.aEdges=[],t.isConnected=!1,t.inspector=new Jt(Object(s.a)(t)),t.scene.AddAPoint(Object(s.a)(t)),t}return Object(r.a)(i,null,[{key:"ComputeAllLineNetworkSnap",value:function(e){for(var t=0;t<e.listAPoint.length-1;++t){e.listAPoint[t].UpdateGoeVec();for(var n=t+1;n<e.listAPoint.length;++n){Z(e.listAPoint[t].vec,e.listAPoint[n].vec)<5&&(e.listAPoint[n].vec=e.listAPoint[t].vec)}}}},{key:"ComputeLineNetworkSnap",value:function(e){}},{key:"GetVecs",value:function(e){for(var t=[],n=e.length;n--;)t.push(e[n].vec);return t}},{key:"TranslatePtOfRect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e.pts[t].vec.x+=n,e.pts[t].vec.y+=i,e.ComputeCenterVec(),e.UpdateGeoPos()}},{key:"GetIndexFromParent",value:function(e){var t=e.edges[0];return t.pts[0]===e?0:t.pts[1]===e?1:t.pts[2]===e?2:t.pts[3]===e?3:-1}},{key:"FindAtPoint",value:function(e,t,n){for(var i=e.listAPoint.length-1;i>=0;--i)if(e.listAPoint[i].isSelectable&&e.listAPoint[i].IsMouseInside(t,n))return e.listAPoint[i]}},{key:"RemoveAllCapturedGeo",value:function(e){for(var t=e.listAPoint,n=0;n<t.length;++n)!0===e.listAPoint[n].isSelected&&e.listAPoint[n].Remove()}},{key:"DeSelecteCaptureObjects",value:function(e){for(var t=0;t<e.listAPoint.length;++t)e.listAPoint[t].isSelected=!1}},{key:"MoveSelectedGeo",value:function(e,t){for(var n=0;n<e.listAPoint.length;++n)!0!==e.listAPoint[n].isSelected||e.listAPoint[n].isHover||e.listAPoint[n].TranslateByMouseEventData(t),!0===e.listAPoint[n].isHover&&e.listAPoint[n].TranslateByMouseEventData(t)}},{key:"GetNodeFromScreenPos",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(t.x,t.y)),o=new i(e,a[0],a[1],t.z,n);return o.vec.w=t.w,o.weightLeft=t.w,o.weightRight=t.w,o.isUnderConstruction=!1,o}},{key:"GetNodeFromJSON",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(t.proX,t.proY)),o=new i(e,a[0],a[1],0,n);return o.vec.w=t.w,o.weightLeft=t.w,o.weightRight=t.w,o.isUnderConstruction=!1,o}},{key:"GetNodeFromVec",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return i.GetNodeFromScreenPos(e,t,n,a)}},{key:"FromJSON",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=e.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(t.nodes[0].proX,t.nodes[0].proY),a=new i(e,n[0],n[1],0);a.type=g.j[t.type],a.UpdateScreenVecByProjectedPos()}},{key:"MouseRightClick",value:function(e){}},{key:"MouseMiddleClick",value:function(e){}},{key:"MouseLeftClick",value:function(e,t){void 0!==e.capture?e.capture.type===g.j.ALINE&&At.needAttach&&e.capture.SplitLineByVec(new Oe(t.x,t.y,0)):new i(e,t.x,t.y,0).Dummy()}}]),Object(r.a)(i,[{key:"Init",value:function(){this.isPointMid=!1}},{key:"InitComponent",value:function(){this.styleComponent=new Ut(this),this.renderer=new Xt(this)}},{key:"GetParentType",value:function(){return"APoint"}},{key:"AddEdge",value:function(e){-1===this.edges.indexOf(e)&&(this.type=g.j.ANODE,this.edges.push(e),this.edges[0]&&this.styleComponent.UpdateStyleForNode(this.edges[0].styleComponent.renderStyleNode))}},{key:"AddNode",value:function(e){-1===this.nodes.indexOf(e)&&(e.type=g.j.ANODE,this.nodes.push(e))}},{key:"GetSharedNode",value:function(e){var t,n=Zt(this.edges);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=Z(i.p0.vec,e.vec);if(a<.01)return i.p0;if((a=Z(i.p1.vec,e.vec))<.01)return i.p1}}catch(o){n.e(o)}finally{n.f()}}},{key:"RemoveEdge",value:function(e){this.edges.splice(this.edges.indexOf(e),1)}},{key:"RemoveAPolylineEdge",value:function(e){this.aEdges.splice(this.aEdges.indexOf(e),1)}},{key:"ActivateEasing",value:function(e,t){this.scene.capture=void 0,this.tVec=new Oe(e.x,e.y,0),this.isAniEasing=!0}},{key:"MakeUnique",value:function(){var e,t=Zt(this.edges);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.p0.id===this.id&&(n.p0.vec=new Oe(this.vec.x,this.vec.y,this.vec.z)),n.p1.id===this.id&&(n.p1.vec=new Oe(this.vec.x,this.vec.y,this.vec.z))}}catch(i){t.e(i)}finally{t.f()}}},{key:"Easing",value:function(){this.isAniEasing&&(this.vec=U(z(this.vec,.95),z(this.tVec,.05)),Z(this.vec,this.tVec)<1&&(this.isAniEasing=!1)),this.UpdateGoeVec()}},{key:"Accelerating",value:function(){this.vec=U(z(this.vec,.9),z(this.tVec,.1)),Z(this.vec,this.tVec)<1.5&&(this.isRenderable=!1,this.isAniEasing=!1),this.renderer.t+=.01}},{key:"Move",value:function(e,t){this.isRemove||!this.isRenderable||this.isHidden||(this.vec.x=e,this.vec.y=t,this.UpdateGoeVec())}},{key:"Add_AEdge",value:function(e){this.aEdges.push(e),this.aEdges[0]&&this.styleComponent.UpdateStyleForNode(this.aEdges[0].pGraph.styleComponent.renderStyleNode),this.isConnected=!0}},{key:"ShowPopupSummary",value:function(){this.edges[0]&&this.edges[0].ShowPopupSummary()}},{key:"HidePopUpSummary",value:function(){this.edges[0]&&this.edges[0].HidePopUpSummary()}},{key:"IsMouseInside",value:function(e,t){return this.Distance(e,t)<=this.r+6}},{key:"MergeTwoEdge",value:function(){var e,t;if(this.aEdges.length>1){if(this.aEdges[0].p0===this?(e=this.aEdges[0].p1,this.aEdges[0].pm.DeepRemove()):(e=this.aEdges[0].p0,this.aEdges[0].pm.DeepRemove()),this.aEdges[1].p0===this?(t=this.aEdges[1].p1,this.aEdges[1].pm.DeepRemove()):(t=this.aEdges[1].p0,this.aEdges[1].pm.DeepRemove()),e&&t){e.RemoveAPolylineEdge(this.aEdges[0]),t.RemoveAPolylineEdge(this.aEdges[1]);var n=this.aEdges[0].pGraph.AddEdge(e,t);this.aEdges[0].pGraph.edges.push(n),n.pGraph.RemoveEdge(this.aEdges[0]),n.pGraph.RemoveEdge(this.aEdges[1]),n.pGraph.CheckMinPt(),n.pGraph.ComputeCenterVec(),n.pGraph.InitVecsHistory()}}else this.aEdges[0].pm.Remove(),this.aEdges[0].pGraph.RemoveEdge(this.aEdges[0])}},{key:"Remove",value:function(){if(!this.isRemove){if(this.popup&&this.HidePopUpSummary(),this.aEdges[0]){if(this.type===g.j.ANODE&&this.aEdges.length>0&&!this.isRemove){if(this.scene.annotationInstance.activeCommandController.acProperties.pressKey&&this.aEdges[0].pGraph)if(3===this.aEdges[0].pGraph.GetVecs().length)this.aEdges[0].p0!==this&&this.aEdges[0].p0.DeepRemove(),this.aEdges[0].p1!==this&&this.aEdges[0].p1.DeepRemove(),this.DeepRemove(),this.aEdges[0].pGraph.Remove(!0),this.aEdges[0].pGraph.DeepRemove();else{this.aEdges[0].pGraph.Remove(!1);var e=this.aEdges[0].pGraph.ToJSON();e&&this.scene.annotationInstance.io.eventListenerAnnotation.TransformStack([e])}return}if(this.type===g.j.AMIDPOINT&&this.aEdges.length>0&&!this.isRemove){if(this.scene.annotationInstance.activeCommandController.acProperties.pressKey&&(this.isRemove=!0,this.aEdges[0].pGraph)){this.aEdges[0].pGraph.Remove();var t=this.aEdges[0].pGraph.ToJSON();t&&this.scene.annotationInstance.io.eventListenerAnnotation.TransformStack([t])}return}}if(this.edges[0]){if(this.type===g.j.ANODE&&this.edges.length>0&&!this.isRemove&&!this.edges[0].isUnderConstruction){this.isRemove=!0,this.edges[0].Remove();var n=this.edges[0].ToJSON();return void(n&&this.scene.annotationInstance.io.eventListenerAnnotation.TransformStack([n]))}if((this.type===g.j.ANODE||this.type===g.j.AMIDPOINT)&&this.edges.length>0&&(this.edges[0].type===g.j.ARROW_SINGLE||this.edges[0].type===g.j.ARROW_DOUBLE)){if(this.isRemove=!0,this.edges[0]){this.edges[0].Remove();var i=this.edges[0].ToJSON();i&&this.scene.annotationInstance.io.eventListenerAnnotation.TransformStack([i])}return}}this.DeepRemove()}}},{key:"DeepRemove",value:function(){this.isRemove||(this.textLeaderline&&(this.textLeaderline.RemoveByAttachedShape(),this.textLeaderline=void 0),this.isSelectable=!1,this.isRenderable=!1,this.isRemove=!0,this.scene.RemoveBasePoint(this),this.scene.RemoveAPoint(this),this.scene.RemoveGeometry(this))}},{key:"GoToBlackhole",value:function(){this.isSelectable=!1,this.tVec=this.scene.annotationInstance.renderer.blackhole.v,this.isAniAccel=!0}},{key:"Hide",value:function(){this.isSelectable=!1,this.isRenderable=!1}},{key:"TranslateByMouseEventData",value:function(e){if(!this.isRemove&&this.isRenderable&&!this.isHidden){e.x,e.preX,e.y,e.preY;if(this.textLeaderline&&this.textLeaderline.TranslateByMouseEventData(e),this.aEdges.length>0)this.TranslateForCurvedPolyline(e);else if(this.type!==g.j.ANODE_RECT)if(this.type!==g.j.ANODE_CIRCLE)if(this.type!==g.j.AMIDPOINT_ALINE)if(this.scene.annotationInstance.activeCommandController.acProperties.pressCtrlKey?this.SplitPointbyNewVec(e.x,e.y):(this.vec.x=e.x,this.vec.y=e.y,this.isDrag=!0,this.UpdateGoeVec()),this.type===g.j.ANODE&&this.edges[0]&&this.edges[0].type===g.j.POLYGON){var t=this.edges[0];t.wrapping.UpdateProjection(t.vecs)}else if(this.edges[0].type!==g.j.ARROW_SINGLE&&this.edges[0].type!==g.j.ARROW_DOUBLE)if(this.edges[0].type!==g.j.CURVE_OPEN&&this.edges[0].type!==g.j.CURVE_CLOSE){if(this.edges[0].type===g.j.ALINE){var n=this.edges[0];return n.wrapping.UpdateProjection(n.vecs),void At.UpdatePathFinding()}}else{var i=this.edges[0];i.wrapping.UpdateProjection(i.vecs)}else{var a=this.edges[0];a.wrapping.UpdateProjection(a.vecs)}else this.TranslateForLineMidPoint(e);else this.TranslateForCircle(e);else this.TranslateForRect(e)}}},{key:"Translate",value:function(e,t){}},{key:"SplitPointbyNewVec",value:function(e,t){for(var n=this.scene.listAPoint,i=0;i<n.length;++i)Z(n[i].vec,this.vec)<5&&(this.vec=new Oe(e,t),this.UpdateGoeVec(),this.scene.Capture=n[i],this.scene.annotationInstance.activeCommandController.acProperties.pressCtrlKey=!1)}},{key:"TranslateForCircle",value:function(e){var t=this.edges[0];if(t.pts[0]===this||t.pts[2]===this){if(this.vec.x+=e.x-e.preX,!t.isUnderConstruction)if(this.scene.annotationInstance.activeCommandController.acProperties.pressCtrlKey)t.R0=Math.abs(t.vec.x-this.vec.x);else{var n=Math.abs(t.vec.x-this.vec.x);t.R0=n,t.r1=n,t.UpdateCP()}}else if((t.pts[1]===this||t.pts[3]===this)&&(this.vec.y+=e.y-e.preY,!t.isUnderConstruction))if(this.scene.annotationInstance.activeCommandController.acProperties.pressCtrlKey)t.R1=Math.abs(t.vec.y-this.vec.y);else{var i=Math.abs(t.vec.y-this.vec.y);t.R0=i,t.r1=i,t.UpdateCP()}this.UpdateGoeVec(),t.wrapping.UpdateProjection(t.vecs)}},{key:"TranslateForRect",value:function(e){if(!this.isRemove&&this.isRenderable&&!this.isHidden){var t=i.GetIndexFromParent(this),n=this.edges[0],a=e.x-e.preX,o=e.y-e.preY;n.isConstraintRatio||this.scene.annotationInstance.activeCommandController.acProperties.pressCtrlKey?n.ComputeConstraintRatio(t,a,o):0===t?(i.TranslatePtOfRect(n,0,a,o),i.TranslatePtOfRect(n,3,a,0),i.TranslatePtOfRect(n,1,0,o)):1===t?(i.TranslatePtOfRect(n,1,a,o),i.TranslatePtOfRect(n,2,a,0),i.TranslatePtOfRect(n,0,0,o)):2===t?(i.TranslatePtOfRect(n,2,a,o),i.TranslatePtOfRect(n,1,a,0),i.TranslatePtOfRect(n,3,0,o)):3===t&&(i.TranslatePtOfRect(n,3,a,o),i.TranslatePtOfRect(n,0,a,0),i.TranslatePtOfRect(n,2,0,o)),this.UpdateGoeVec(),n.wrapping.UpdateProjection(n.vecs)}}},{key:"MouseLeftClick",value:function(){if(this.aEdges.length>0){if(!this.scene.annotationInstance.activeCommandController.acProperties.pressShift)for(var e=this.aEdges[0],t=0;t<e.pGraph.edges.length;++t)e.pGraph.edges[t].p0!==this&&e.pGraph.edges[t].p0.isSelectedSole&&(e.pGraph.edges[t].p0.isSelectedSole=!1),e.pGraph.edges[t].p1!==this&&e.pGraph.edges[t].p1.isSelectedSole&&(e.pGraph.edges[t].p1.isSelectedSole=!1),e.pGraph.edges[t].pm!==this&&e.pGraph.edges[t].pm.isSelectedSole&&(e.pGraph.edges[t].pm.isSelectedSole=!1);return this.isSelectedSole=!this.isSelectedSole,void(this.aEdges[0].pGraph.IsSelected=!0)}if(this.edges.length>0){if(!this.scene.annotationInstance.activeCommandController.acProperties.pressShift)for(var n=this.edges[0],i=0;i<n.pts.length;++i)n.pts[i]!==this&&n.pts[i].isSelectedSole&&(n.pts[i].isSelectedSole=!1);return this.isSelectedSole=!this.isSelectedSole,void(this.edges[0].IsSelected=!0)}}},{key:"TranslateForLineMidPoint",value:function(e){var t=this.edges[0].SplitLineByVec(new Oe(e.x,e.y),!0);this.scene.Capture=t;for(var n=this.scene.listAPoint,i=0;i<n.length-1;++i)for(var a=i+1;a<n.length;++a)Z(n[i].vec,n[a].vec)<5&&(n[i].vec=n[a].vec)}},{key:"SplitMidPointbyNewVec",value:function(e,t){return this.edges[0].SplitLineByVec(new Oe(e,t),!0)}},{key:"TranslateForCurvedPolyline",value:function(e){if(this.vec.x+=e.x-e.preX,this.vec.y+=e.y-e.preY,this.isDrag=!0,this.type===g.j.AMIDPOINT)if(this.scene.annotationInstance.activeCommandController.acProperties.pressCtrlKey)this.aEdges[0].CheckIsCurved();else{var t=this.aEdges[0].SplitEdge(this);t&&(t.IsSelected=!1,this.scene.Capture=t)}else for(var n=0;n<this.aEdges.length;++n)this.aEdges[n].MoveMidPt(e);this.UpdateGoeVec()}},{key:"DeepCopy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.vec.x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.vec.y;arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.vec.z;if(this.type!==g.j.AMIDPOINT&&this.type!==g.j.ANODE){var n=new i(this.scene,e,t,this.vec.z,!1,this.type,this.r);return n||void 0}}},{key:"MouseRightClick",value:function(e){}},{key:"RenderPost",value:function(e){this.inspector.Update(e),this.renderer.RenderPost(e)}},{key:"MouseUp",value:function(){}},{key:"V",get:function(){return this.vec},set:function(e){this.vec=e}},{key:"IsHover",get:function(){return this.isHover},set:function(e){this.edges[0]&&this.edges[0].type===g.j.POLYLINE_BENDING&&this.IsMouseInside(this.scene.annotationInstance.activeCommandController.m.x,this.scene.annotationInstance.activeCommandController.m.y)&&this.renderer.tOver>.9&&(this.renderer.tOver=0),this.isHover=e}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){this.isSelected=e,e||(this.isSelectedSole=e)}},{key:"isSelectedSole",get:function(){return this._isSelectedSole},set:function(e){this._isSelectedSole=e,this.styleComponent.ShiftNodeStyle(e)}}]),i}(It);function en(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}Object(u.a)($t,"id",0);var tn=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(en()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).host=e,t}return Object(r.a)(i,[{key:"RenderPost",value:function(e){}}]),i}(Yt);function nn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var an=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(nn()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).renderStyle=new Bt,t.renderStyleNode=new Bt,t.UpdateStyle(),t}return Object(r.a)(i,[{key:"UpdateStyle",value:function(){Bt.UpdateRenderStylePolygon(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent),Bt.UpdateRenderStylePolygonNode(this.renderStyleNode,this.geo.scene.annotationInstance.customization.themeCurrent)}}]),i}(Vt);function on(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var rn=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(on()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;arguments.length>6&&void 0!==arguments[6]&&arguments[6],arguments.length>7&&void 0!==arguments[7]&&arguments[7];Object(o.a)(this,i),t=n.call(this,e),Object(u.a)(Object(s.a)(t),"vecs",[]),Object(u.a)(Object(s.a)(t),"vecSelected",-1),t.isUndo=l,t.vec=new Oe(a,r,c);var d=t.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(a,r);return t.vec.long=d[0],t.vec.long=d[1],t.vec.proX=d[2],t.vec.proY=d[3],t.r0=p,t.r1=p,t.rOrigin=p,t.rTaget=p+10,t.pts=[],t.r=1,t.InitComponent(),t.pts[0]=new $t(t.scene,t.vec.x+.5*t.r,t.vec.y+.5*t.r,t.vec.z,t.isUndo),t.pts[2]=new $t(t.scene,t.vec.x+.5*t.r,t.vec.y+.5*t.r,t.vec.z+.5*t.r,t.isUndo),t.pts[1]=new $t(t.scene,t.vec.x,t.vec.y-.5*t.r,t.vec.z,t.isUndo),t.pts[3]=new $t(t.scene,t.vec.x+.5*t.r,t.vec.y+.5*t.r,t.vec.z+.5*t.r,t.isUndo),t.pts[0].AddEdge(Object(s.a)(t)),t.pts[1].AddEdge(Object(s.a)(t)),t.pts[2].AddEdge(Object(s.a)(t)),t.pts[3].AddEdge(Object(s.a)(t)),t.pts[0].type=g.j.ANODE_CIRCLE,t.pts[1].type=g.j.ANODE_CIRCLE,t.pts[2].type=g.j.ANODE_CIRCLE,t.pts[3].type=g.j.ANODE_CIRCLE,t.InitCircle(),t}return Object(r.a)(i,null,[{key:"FromJSON",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=$t.GetNodeFromJSON(e,t.nodes[0],n),r=new i(e,o.vec.x,o.vec.y,t.style,n);o.Remove();var s=$t.GetNodeFromJSON(e,t.nodes[1]),c=$t.GetNodeFromJSON(e,t.nodes[2]);return r.R0=s.vec.x-r.vec.x,r.R1=c.vec.y-r.vec.y,s.Remove(),c.Remove(),r.UpdateGeoPos(),r.type=g.j[t.type],r.IsSelectable=!0,r.isUnderConstruction=!1,r.isHidden=t.isHidden,t.isHidden?r.visibility=0:r.visibility=1,r.id=a?e.GetUUID():t.id,r.wrapping.InitProjectionShapesFromJSON(r.GetVecs()),r.wrapping.UpdateProjection(r.vecs),r.InitVecsHistory(),!n&&a?e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(r.ToJSON()):r.IsHover=!1,r}},{key:"Cancel",value:function(){void 0!==i.construction&&i.construction.Remove(),i.construction=void 0}},{key:"GetLengthSelection",value:function(e){for(var t=e.listACircle.length,n=0;t--;)e.listACircle[t].IsSelected&&(n+=1);return n}},{key:"DrawShadow",value:function(e){void 0!==i.construction&&(i.construction.R=i.construction.Distance(e.x,e.y),i.construction.UpdateCP())}},{key:"GetCircleFromVoice",value:function(e){var t=new Oe(.5*e.annotationInstance.geometryCommon.gcmdProcessing.width,.5*e.annotationInstance.geometryCommon.gcmdProcessing.height);this.GetCircleByVecs(e,[t,new Oe(t.x+100,t.y),new Oe(t.x,t.y+100)])}},{key:"GetCircleByVecs",value:function(e,t){var n=xe(t),a=function(e){for(var t=xe(e),n=0,i=0,a=e.length,o=0;o<a;++o)n+=Math.abs(e[o].x-t.x),i+=Math.abs(e[o].y-t.y);return[n/(a+=2),i/a]}(t),o=new i(e,n.x,n.y,0,!1,2*a[0]);o.UpdateCP(),o.IsSelectable=!0,o.isUnderConstruction=!1,e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(o.ToJSON())}},{key:"GetCircleByArea",value:function(e,t,n,a){var o=function(e){return Math.sqrt(e/Math.PI)}(t);o=e.annotationInstance.geometryCommon.gcmdProcessing.ToMapConvertGeoDis(n,a,o);var r=new i(e,n,a,0,!1,o);r.UpdateCP(),r.IsSelectable=!0,r.isUnderConstruction=!1,e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(r.ToJSON()),i.construction=r}},{key:"GetCircleByCircumference",value:function(e,t,n,a){var o=function(e){return e/Math.PI*.5}(t);o=e.annotationInstance.geometryCommon.gcmdProcessing.ToMapConvertGeoDis(n,a,o);var r=new i(e,n,a,0,!1,o);r.UpdateCP(),r.IsSelectable=!0,r.isUnderConstruction=!1,e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(r.ToJSON()),i.construction=r}},{key:"GetCircle",value:function(e,t){return void 0!==i.construction?(i.construction.r=i.construction.Distance(t.x,t.y),i.construction.IsSelectable=!0,i.construction.isUnderConstruction=!1,e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(i.construction.ToJSON()),void(i.construction=void 0)):(i.construction=new i(e,t.x,t.y),void(i.construction.IsSelectable=!1))}},{key:"MouseDown",value:function(e,t){void 0!==i.construction&&(i.GetCircle(e,t),i.construction=void 0,i.isDone=!0)}},{key:"OnMouseMiddleClick",value:function(e){}},{key:"OnMouseRightClick",value:function(e){}},{key:"OnMouseLeftClick",value:function(e,t){return e.annotationInstance.activeCommandController.IsTouchEvent?(this.GetCirlceByTouch(e,t),void e.annotationInstance.activeCommandController.SetActiveCommand(g.b.SELECT)):i.isDone?(i.isDone=!1,void e.annotationInstance.activeCommandController.GoToACMode()):void(void 0===e.capture&&void 0===i.construction&&i.GetCircle(e,t))}},{key:"OnMouseMove",value:function(e){void 0!==i.construction&&i.DrawShadow(e)}},{key:"GetCirlceByTouch",value:function(e,t){var n=new i(e,t.x,t.y,0,!1,50);n.UpdateCP(),n.IsSelectable=!0,n.isUnderConstruction=!1,n.IsSelected=!1,e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(n.ToJSON())}}]),Object(r.a)(i,[{key:"InitComponent",value:function(){this.styleComponent=new an(this),this.renderer=new tn(this)}},{key:"Init",value:function(){}},{key:"InitCircle",value:function(){this.wrapping=new Ct(this,this.GetVecs()),this.dimension=new Et(this),this.type=g.j.CIRCLE,this.scene.AddACircle(this),this.isRemove=!1,this.isHover=!1,this.isFill=!0,this.isSelectable=!0,this.isRenderable=!0,this.isDraggable=!1,this.isSelected=!1,this.isAniEasing=!1,this.isUnderConstruction=!0}},{key:"GetArea",value:function(){return Math.PI*this.r1*this.r0}},{key:"GetLog",value:function(){return"GUID : "+this.id+"/TYPE : "+this.type.toString()+"/Geo : lat:"+this.vec.long.toFixed(5).toString()+", Log:"+this.vec.lat.toFixed(5).toString()+"/Screen : /R1 : "+this.r0.toFixed(3).toString()+" pixel/R2 : "+this.r1.toFixed(3).toString()+" pixel/Area : "+this.GetArea().toFixed(3).toString()+" m2/IsSEL : "+this.isSelected+"/isSelable : "+this.isSelectable}},{key:"GetLogDOM",value:function(){return"Geometry ID : "+this.id+"<br>geometry Type : ACircle<br>position : <br>size : "+this.r+" pixel<br>"}},{key:"GetParentType",value:function(){return""}},{key:"GetType",value:function(){return"ACircle"}},{key:"GetVecs",value:function(){for(var e=[],t=0;t<this.pts.length;++t)e.push(this.pts[t].vec);return this.vecs=e,e}},{key:"UpdateCP",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.r0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.r1;this.r0=e,this.r1=t,this.pts[0].vec.x=this.vec.x+this.r0,this.pts[0].vec.y=this.vec.y,this.pts[0].UpdateGoeVec(),this.pts[2].vec.x=this.vec.x-this.r0,this.pts[2].vec.y=this.vec.y,this.pts[2].UpdateGoeVec(),this.pts[1].vec.x=this.vec.x,this.pts[1].vec.y=this.vec.y-this.r1,this.pts[1].UpdateGoeVec(),this.pts[3].vec.x=this.vec.x,this.pts[3].vec.y=this.vec.y+this.r1,this.pts[3].UpdateGoeVec()}},{key:"GetCenterVec",value:function(){this.vec=new Oe(0,0,0),this.vec=U(this.vec,this.pts[0].vec),this.vec=U(this.vec,this.pts[1].vec),this.vec=U(this.vec,this.pts[2].vec),this.vec=U(this.vec,this.pts[3].vec),this.vec.DivByVal(4),this.r0=Math.abs(this.pts[0].vec.x-this.vec.x),this.r1=Math.abs(this.pts[1].vec.y-this.vec.y);var e=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(this.vec.x,this.vec.y);return this.vec.long=e[0],this.vec.lat=e[1],this.vec.proX=e[2],this.vec.proY=e[3],this.vec}},{key:"GoToBlackhole",value:function(){this.isSelectable=!1,this.needBlackhole=!0,this.pts.forEach((function(e){e.GoToBlackhole()}))}},{key:"GetNodePopup",value:function(){return this.pts[0]}},{key:"IsMouseInside",value:function(e,t){if(this.isRemove||!this.isRenderable||this.isHidden)return!1;if(this.CheckDistanceForDuplication(e,t))return!0;var n=e-this.vec.x,i=t-this.vec.y;return n*n/(this.r0*this.r0)+i*i/(this.r1*this.r1)<=1.1}},{key:"Distance",value:function(e,t){return Math.sqrt((this.vec.x-e)*(this.vec.x-e)+(this.vec.y-t)*(this.vec.y-t))}},{key:"CheckDistanceForDuplication",value:function(e,t){if(this.wrapping.vsOther){if(this.wrapping.vsOther.length>1)for(var n=0;n<this.wrapping.vsOther.length;++n){if(Z(new Oe(e,t),this.wrapping.vsOther[n])<9)return this.vecSelected=n,!0;this.vecSelected=-1}var i=xe(this.wrapping.vsOther),a=e-i.x,o=t-i.y;return a*a/(this.r0*this.r0)+o*o/(this.r1*this.r1)<=1.1}return!1}},{key:"GeoToScreen",value:function(){}},{key:"ActivateEasing",value:function(e,t){this.tVec=new Oe(e.x,e.y,0),this.isAniEasing=!0,this.UpdateCP()}},{key:"Easing",value:function(){this.isAniEasing&&(this.vec=U(z(this.vec,.95),z(this.tVec,.05)),Z(this.vec,this.tVec)<1&&(this.isAniEasing=!1)),this.UpdateCP()}},{key:"Remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isRemove=!1,this.isRenderable=!1,this.pts[0].Remove(),this.pts[1].Remove(),this.pts[2].Remove(),this.pts[3].Remove(),e){var t=this.ToJSON();t&&this.scene.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack([t])}this.scene.RemoveACircle(this),this.scene.RemoveGeometry(this)}},{key:"Hide",value:function(){}},{key:"Move",value:function(e,t){this.isRemove||!this.isRenderable||this.isHidden||(this.vec.x=e,this.vec.y=t,this.UpdateCP())}},{key:"TranslateByMouseEventData",value:function(e){-1===this.vecSelected?this.isRemove||!this.isRenderable||this.isHidden||(this.vec.x+=e.x-e.preX,this.vec.y+=e.y-e.preY,this.UpdateCP(),this.wrapping.UpdateProjection(this.vecs)):this.pts[this.vecSelected].TranslateByMouseEventData(e)}},{key:"Translate",value:function(e,t){}},{key:"GetNode",value:function(){var e=[],t=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(this.vec.x,this.vec.y);return this.vec.long=t[0],this.vec.lat=t[1],this.vec.proX=t[2],this.vec.proY=t[3],e.push(this.vec),e.push(this.pts[0].vec),e.push(this.pts[1].vec),e.push(this.pts[2].vec),e.push(this.pts[3].vec),e}},{key:"ToJSON",value:function(){var e=new rt(this.id,this.type,this.isSelected,this.isHover,this.isHidden);return e.PushNode(this.GetNode()),e}},{key:"UpdateGeoPos",value:function(){for(var e=0;e<this.pts.length;++e)this.pts[e].UpdateGoeVec()}},{key:"DeepCopy",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=this.ToJSON();if(n){var a=i.FromJSON(this.scene,n,!0,!0);return a.Move(e,t),a.UpdateGeoPos(),a.EmitAddStack(),a}}},{key:"MouseRightClick",value:function(){this.isFill=!this.isFill}},{key:"RenderPost",value:function(e){this.GetCenterVec(),this.renderer.timer.UpdatePopupSummery(),this.scene.annotationInstance.activeCommandController.acProperties.isPanning&&this.wrapping.UpdateProjection(this.GetVecs()),this.scene.annotationInstance.activeCommandController.acProperties.showUnit&&(this.isHover||this.isUnderConstruction)&&(this.dimension.RenderLengthCircle(e,this.vec,this.vecs),this.dimension.RenderTotalAreaCircle(e,this.vec,this.vecs)),this.RenderPostGeometryDuplication(e),this.RenderPostGeometry(e)}},{key:"RenderPostGeometry",value:function(e){this.isHover||this.isSelected?(this.scene.annotationInstance.renderer.draw.shape.point.CenterPoint(e,this.vec.x,this.vec.y),this.scene.annotationInstance.renderer.draw.shape.area.EllipseHover(e,this.styleComponent.renderStyle,this.vec.x,this.vec.y,this.r0,this.r1,this.isGrayColor,this.visibility,this.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.renderer.tOver),this.isHover),this.scene.annotationInstance.renderer.draw.shape.area.Ellipse(e,this.styleComponent.renderStyle,this.vec.x,this.vec.y,this.r0,this.r1,this.isFill),this.renderer.tOver+=this.scene.annotationInstance.renderer.dt,this.renderer.tDown1=0,this.isLeave=!0):(this.scene.annotationInstance.renderer.draw.shape.area.Ellipse(e,this.styleComponent.renderStyle,this.vec.x,this.vec.y,this.r0,this.r1,this.isFill),this.renderer.tOver=0),(this.isUnderConstruction||this.isHover)&&this.scene.annotationInstance.renderer.draw.shape.area.EllipseDim(e,this.styleComponent.renderStyle,this.vec.x,this.vec.y,this.r0,this.r1,this.GetArea().toFixed(3).toString()),this.RenderPostGeometryOffScreen(this.vec)}},{key:"RenderPostGeometryDuplication",value:function(e){if((this.wrapping.isIntersectLeft||this.wrapping.isIntersectRight)&&this.wrapping.vsOther){this.vecOtherCenter=xe(this.wrapping.vsOther);var t=xe(this.wrapping.vsOther);this.isHover||this.isSelected?(this.scene.annotationInstance.renderer.draw.shape.area.EllipseHover(e,this.styleComponent.renderStyle,t.x,t.y,this.r0,this.r1,this.isGrayColor,this.visibility,this.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.renderer.tOver),this.isHover),this.scene.annotationInstance.renderer.draw.shape.area.Ellipse(e,this.styleComponent.renderStyle,t.x,t.y,this.r0,this.r1,this.isFill),this.scene.annotationInstance.renderer.draw.shape.area.EllipseByVecNode(e,this.styleComponent.renderStyle,this.wrapping.vsOther,this.scaleForRender,this.isGrayColor,this.visibility,this.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.renderer.tOver),this.isHover)):this.scene.annotationInstance.renderer.draw.shape.area.Ellipse(e,this.styleComponent.renderStyle,t.x,t.y,this.r0,this.r1,this.isFill),this.scene.annotationInstance.activeCommandController.acProperties.showUnit&&(this.type,g.j.POLYGON,(this.isHover||this.isUnderConstruction)&&this.dimension.RenderLengthCircle(e,this.vecOtherCenter,this.wrapping.vsOther)),this.RenderPostGeometryOffScreen(t)}}},{key:"RenderPostGeometryOffScreen",value:function(e){this.scene.annotationInstance.renderer.offscreen.EllipseOffScreen(this.scene.annotationInstance.renderer.ctxOffscreen,this.styleComponent.renderStyle,this.hashColor,e.x,e.y,this.r0,this.r1,this.isFill)}},{key:"Visibility",set:function(e){this.visibility=e;for(var t=0;t<this.pts.length;++t)this.pts[t].visibility=e}},{key:"IsHiddenChildren",set:function(e){this.isHiddenPre=this.isHidden,this.isHidden=e;for(var t=0;t<this.pts.length;++t)this.pts[t].isHidden=e}},{key:"IsHidden",set:function(e){this.isHiddenPre=this.isHidden,this.isHidden=e,this.IsHiddenChildren=e,this.scene.annotationInstance.io.eventListenerAnnotation.HideStack(this.ToJSON())}},{key:"R",set:function(e){this.r0=e,this.r1=e}},{key:"R0",set:function(e){this.r0=e,this.pts[0].vec.x=this.vec.x+this.r0,this.pts[0].vec.y=this.vec.y,this.pts[2].vec.x=this.vec.x-this.r0,this.pts[2].vec.y=this.vec.y}},{key:"R1",set:function(e){this.r1=e,this.pts[1].vec.x=this.vec.x,this.pts[1].vec.y=this.vec.y-this.r1,this.pts[3].vec.x=this.vec.x,this.pts[3].vec.y=this.vec.y+this.r1}},{key:"IsSelectable",set:function(e){this.isSelectable=e,this.pts[0].isSelectable=e,this.pts[1].isSelectable=e,this.pts[2].isSelectable=e,this.pts[3].isSelectable=e}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){this.isSelected=e,this.pts[0].isRenderable=e,this.pts[1].isRenderable=e,this.pts[2].isRenderable=e,this.pts[3].isRenderable=e,this.scene.annotationInstance.io.eventListenerAnnotation.SelectionStack(this.ToJSON())}},{key:"IsHover",get:function(){return this.isHover},set:function(e){this.isRemove||!this.isRenderable||this.isHidden||this.isUnderConstruction||(this.isHover=e,this.isHover&&!this.isHoverPre?this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()):!this.isHover&&this.isHoverPre&&this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()),this.isHoverPre=this.isHover,this.isSelected||(this.pts[0].isRenderable=e,this.pts[1].isRenderable=e,this.pts[2].isRenderable=e,this.pts[3].isRenderable=e),e||(this.needEmitHoverPost=!0,this.HidePopUpSummary()))}}]),i}(wt);function sn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}Object(u.a)(rn,"isDone",!1),Object(u.a)(rn,"construction",void 0);var cn=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(sn()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).host=e,t}return Object(r.a)(i,[{key:"RenderPost",value:function(e){}}]),i}(Yt);function ln(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var pn=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(ln()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).renderStyle=new Bt,t.renderStyleNode=new Bt,t.UpdateStyle(),t}return Object(r.a)(i,[{key:"UpdateStyle",value:function(){Bt.UpdateRenderStylePolygon(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent),Bt.UpdateRenderStylePolygonNode(this.renderStyleNode,this.geo.scene.annotationInstance.customization.themeCurrent)}}]),i}(Vt);function un(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dn(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function hn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var mn=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(hn()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e,t,a){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r,c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8;Object(o.a)(this,i),r=n.call(this,e),Object(u.a)(Object(s.a)(r),"vecSelected",-1),r.type=g.j.RECTANGLE,r.InitComponent(),r.pts=[],r.pts.push(new $t(e,t,a,0,c)),r.pts.push(new $t(e,t,a,0,c)),r.pts.push(new $t(e,t,a,0,c)),r.pts.push(new $t(e,t,a,0,c));for(var p=0;p<r.pts.length;++p)c&&(r.pts[p].isHover=!1),r.pts[p].type=g.j.ANODE_RECT;return r.lineWidth=l,r.ComputeRecPts(),r.isConstraintRatio=!1,r.InitRect(),r}return Object(r.a)(i,null,[{key:"GetRectangleFromVoice",value:function(e){var t=new Oe(.5*e.annotationInstance.geometryCommon.gcmdProcessing.width,.5*e.annotationInstance.geometryCommon.gcmdProcessing.height);this.GetRectByVecs(e,[new Oe(t.x-100,t.y-100),new Oe(t.x+100,t.y-100),new Oe(t.x+100,t.y+100),new Oe(t.x-100,t.y+100)])}},{key:"FindAtPoint",value:function(e){return null}},{key:"ComputeOver",value:function(e){i.FindAtPoint(e)}},{key:"GetRectByVecs",value:function(e,t){var n=fe(t),a=new i(e,n[0].x,n[0].y,0,!1),o=n[1].x-n[0].x,r=n[1].y-n[0].y;a.pts[1].vec.x+=o,a.pts[2].vec.x+=o,a.pts[2].vec.y+=r,a.pts[3].vec.y+=r,a.UpdateGeoPos(),a.IsSelectable=!0,a.isUnderConstruction=!1,a.UpdatePos(2,a.pts[1].vec.x+1,a.pts[3].vec.y+1,0),e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(a.ToJSON())}},{key:"GetLengthSelection",value:function(){for(var e=this.list.length,t=0;e--;)this.list[e].IsSelected&&(t+=1);return t}},{key:"GetRectByTouch",value:function(e,t){var n=new Oe(t.x,t.y,0);this.GetRectByVecs(e,[new Oe(n.x-100,n.y-100),new Oe(n.x+100,n.y-100),new Oe(n.x+100,n.y+100),new Oe(n.x-100,n.y+100)])}},{key:"GetRect",value:function(e,t){return void 0===i.construction?(i.construction=new i(e,t.x,t.y),void(i.construction.IsSelectable=!1)):(i.construction.isUnderConstruction=!1,i.construction.IsSelectable=!0,i.construction.UpdateGeoPos(),i.construction.UpdatePos(2,i.construction.pts[1].vec.x,i.construction.pts[3].vec.y+.1,0),e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(i.construction.ToJSON()),void(i.construction=void 0))}},{key:"GetRectByPt",value:function(e){}},{key:"DrawShadow",value:function(e,t){void 0===i.construction?new $t(e,t.x,t.y,0).isSelectable=!1:(i.construction.pts[2].TranslateByMouseEventData(t),i.construction.UpdateGeoVec())}},{key:"FromJSON",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=$t.GetNodeFromJSON(e,t.nodes[0],n),r=new i(e,o.vec.x,o.vec.y,0,n,t.style);o.Remove();for(var s=1;s<r.pts.length;++s){var c=$t.GetNodeFromJSON(e,t.nodes[s],n);r.pts[s].vec.x=c.vec.x,r.pts[s].vec.y=c.vec.y,r.pts[s].type=g.j.ANODE_RECT,c.Remove()}return r.UpdateGeoPos(),r.type=g.j[t.type],r.isHidden=t.isHidden,t.isHidden?r.Visibility=0:r.Visibility=1,r.id=a?e.GetUUID():t.id,r.IsSelectable=!0,r.isUnderConstruction=!1,r.IsHover=!1,r.wrapping.InitProjectionShapesFromJSON(r.GetVecs()),r.wrapping.UpdateProjection(r.vecs),r.InitVecsHistory(),n||e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(r.ToJSON()),r}},{key:"Cancel",value:function(){void 0!==i.construction&&i.construction.Remove(),i.construction=void 0}},{key:"MouseDown",value:function(e,t){void 0!==i.construction&&(i.GetRect(e,t),i.construction=void 0,i.isDone=!0)}},{key:"OnMouseLeftClick",value:function(e,t){return e.annotationInstance.activeCommandController.IsTouchEvent?(this.GetRectByTouch(e,t),void e.annotationInstance.activeCommandController.SetActiveCommand(g.b.SELECT)):i.isDone?(i.isDone=!1,void e.annotationInstance.activeCommandController.GoToACMode()):void(void 0===e.capture&&void 0===i.construction&&i.GetRect(e,t))}},{key:"OnMouseMiddleClick",value:function(e){}},{key:"OnMouseRightClick",value:function(e){}},{key:"OnMouseDoubleClick",value:function(e){}},{key:"OnMouseMove",value:function(e,t){void 0!==i.construction&&i.DrawShadow(e,t)}}]),Object(r.a)(i,[{key:"InitComponent",value:function(){this.styleComponent=new pn(this),this.renderer=new cn(this)}},{key:"InitRect",value:function(){this.dimension=new Et(this),this.wrapping=new Ct(this,this.GetVecs()),this.isFill=!0,this.scene.AddARectangle(this)}},{key:"ComputeCenterVec",value:function(){this.vec=xe([this.pts[0].vec,this.pts[1].vec,this.pts[2].vec,this.pts[3].vec]);var e=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(this.vec.x,this.vec.y);return this.vec.long=e[0],this.vec.lat=e[1],this.vec.proX=e[2],this.vec.proY=e[3],this.vec}},{key:"ComputeRecPts",value:function(){var e=this.pts[0].vec,t=this.pts[2].vec,n=0,i=0,a=0;n=e.x<t.x?e.x:t.x,i=e.y<t.y?e.y:t.y,a=e.z<t.z?e.z:t.z;var o=new Oe(n,i,a);n=e.x>t.x?e.x:t.x,i=e.y>t.y?e.y:t.y,a=e.z>t.z?e.z:t.z;var r=new Oe(n,i,a);this.UpdatePos(1,r.x,o.y,o.z),this.UpdatePos(3,o.x,r.y,o.z);for(var s=0;s<this.pts.length;++s)this.pts[s].AddEdge(this),this.pts[s].type=g.j.ANODE_RECT}},{key:"GetRelatedVec",value:function(){for(var e=[],t=0;t<this.pts.length;++t){var n=this.pts[t];e.push(new Oe(n.vec.x-this.vec.x,n.vec.y-this.vec.y,n.vec.z-this.vec.z))}}},{key:"UpdatePos",value:function(e,t,n,i){this.pts[e].vec.x=t,this.pts[e].vec.y=n,this.pts[e].vec.z=i,this.pts[e].UpdateGoeVec()}},{key:"UpdateGeoPos",value:function(){for(var e=0;e<this.pts.length;++e)this.pts[e].UpdateGoeVec()}},{key:"GetNodePopup",value:function(){return this.pts[this.pts.length-2]}},{key:"GetArea",value:function(){return(this.pts[1].vec.x-this.pts[0].vec.x)*(this.pts[2].vec.y-this.pts[0].vec.y)}},{key:"GetLog",value:function(){return"GUID : "+this.id+"/TYPE : "+this.type.toString()+"/Screen : /Area : "+this.GetArea().toFixed(3).toString()+" m2/IsSEL : "+this.isSelected+"/isSelable : "+this.isSelectable}},{key:"Move",value:function(e,t){if(!this.isRemove&&this.isRenderable&&!this.isHidden){for(var n=e-this.vec.x-.5*(this.pts[1].vec.x-this.pts[0].vec.x),i=t-this.vec.y-.5*(this.pts[2].vec.y-this.pts[0].vec.y),a=0;a<this.pts.length;++a)this.pts[a].vec.x+=n,this.pts[a].vec.y+=i,this.pts[a].UpdateGoeVec();this.ComputeCenterVec()}}},{key:"UpdateGeoVec",value:function(){for(var e=0;e<this.pts.length;++e)this.pts[e].UpdateGoeVec()}},{key:"GoToBlackhole",value:function(){this.isSelectable=!1,this.needBlackhole=!0,this.pts.forEach((function(e){e.GoToBlackhole()}))}},{key:"TranslateByMouseEventData",value:function(e){if(-1===this.vecSelected){if(!this.isRemove&&this.isRenderable&&!this.isHidden){for(var t=e.x-e.preX,n=e.y-e.preY,i=0;i<this.pts.length;++i)this.pts[i].vec.x+=t,this.pts[i].vec.y+=n,this.pts[i].UpdateGoeVec();this.ComputeCenterVec(),this.wrapping.UpdateProjection(this.GetVecs())}}else this.pts[this.vecSelected].TranslateByMouseEventData(e)}},{key:"Translate",value:function(e,t){}},{key:"ResizeConstraintRatio",value:function(){return[this.pts[1].vec.x-this.pts[0].vec.x,this.pts[2].vec.y-this.pts[1].vec.y]}},{key:"ComputeConstraintRatio",value:function(e,t,n){var i=this.ResizeConstraintRatio();if(0===e)if(Math.abs(t)>Math.abs(n)){var a=ut(i[0],i[1],i[0]+t);this.pts[e].vec.x+=t,this.pts[e].vec.y-=i[1]-a[1],this.pts[e+1].vec.y-=i[1]-a[1],this.pts[e+3].vec.x+=t}else{var o=dt(i[0],i[1],i[1]+n);this.pts[e].vec.x-=i[0]-o[0],this.pts[e].vec.y+=n,this.pts[e+1].vec.y+=n,this.pts[e+3].vec.x-=i[0]-o[0]}else if(1===e)if(Math.abs(t)>Math.abs(n)){this.pts[e].vec.x+=t;var r=ut(i[0],i[1],i[0]+t);this.pts[e].vec.y+=i[1]-r[1],this.pts[e+1].vec.x+=t,this.pts[e-1].vec.y+=i[1]-r[1]}else{var s=dt(i[0],i[1],i[1]+n);this.pts[e].vec.x+=i[0]-s[0],this.pts[e].vec.y+=n,this.pts[e+1].vec.x+=i[0]-s[0],this.pts[e-1].vec.y+=n}else if(2===e)if(Math.abs(t)>Math.abs(n)){var c=ut(i[0],i[1],i[0]+t);this.pts[e].vec.x+=t,this.pts[e].vec.y=this.pts[0].vec.y+c[1],this.pts[e-1].vec.x+=t,this.pts[e+1].vec.y=this.pts[0].vec.y+c[1]}else{var l=dt(i[0],i[1],i[1]+n);this.pts[e].vec.x=this.pts[0].vec.x+l[0],this.pts[e].vec.y+=n,this.pts[e-1].vec.x=this.pts[0].vec.x+l[0],this.pts[e+1].vec.y+=n}else if(3===e)if(Math.abs(t)>Math.abs(n)){var p=ut(i[0],i[1],i[0]+t);this.pts[e].vec.x+=t,this.pts[e].vec.y+=i[1]-p[1],this.pts[e-1].vec.y+=i[1]-p[1],this.pts[0].vec.x+=t}else{var u=dt(i[0],i[1],i[1]+n);this.pts[e].vec.x+=i[0]-u[0],this.pts[e].vec.y+=n,this.pts[e-1].vec.y+=n,this.pts[0].vec.x+=i[0]-u[0]}}},{key:"IsMouseInside",value:function(e,t){return!(this.isRemove||!this.isRenderable||this.isHidden)&&(!0!==this.isUnderConstruction&&void 0!==this.isUnderConstruction&&(this.CheckDistance(e,t)?(this.IsHover=!0,!0):(this.IsHover=!1,!1)))}},{key:"CheckDistance",value:function(e,t){for(var n=new Oe(e,t),i=this.pts.length,a=0;a<i;++a)if(a<i-1){if(de(n,this.pts[a].vec,this.pts[a+1].vec)<this.lineWidth)return!0}else if(de(n,this.pts[a].vec,this.pts[0].vec)<this.lineWidth)return!0;return!!this.CheckDistanceDuplication(n)||!(!this.isFill||!ge(n,this.vecs))}},{key:"CheckDistanceDuplication",value:function(e){if(this.wrapping.isIntersectLeft||this.wrapping.isIntersectRight){var t=this.wrapping.vsOther;if(t){var n=t.length;if(n>2){for(var i=0;i<t.length;++i){if(Z(e,t[i])<9)return this.vecSelected=i,!0;this.vecSelected=-1}n=t.length;for(var a=0;a<n;++a)if(a<n-1){if(de(e,t[a],t[a+1])<this.lineWidth)return!0}else if(de(e,this.pts[a].vec,this.pts[0].vec)<this.lineWidth)return!0;if(this.isFill&&ge(e,t))return!0}}}return!1}},{key:"GetVecs",value:function(){this.vecs=[];for(var e=0;e<this.pts.length;++e)this.vecs.push(this.pts[e].vec);return this.vecs}},{key:"Remove",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=0;t<this.pts.length;++t)this.pts[t].Remove();if(this.isSelectable=!1,this.isRenderable=!1,e){var n=this.ToJSON();n&&this.scene.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack([n])}this.scene.RemoveARectangle(this),this.scene.RemoveGeometry(this)}},{key:"GetParentType",value:function(){return"ARectangle,ID:"+this.id}},{key:"Hide",value:function(){throw new Error("Method not implemented.")}},{key:"GetNode",value:function(){for(var e=[],t=0;t<this.pts.length;++t)e.push(this.pts[t].vec);return e}},{key:"ToJSON",value:function(){var e=new rt(this.id,this.type,this.isSelected,this.isHover,this.isHidden);return e.PushNode(this.GetNode()),e}},{key:"DeepCopy",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=this.ToJSON(),a=i.FromJSON(this.scene,n,!0,!0);return a.Move(e,t),a.EmitAddStack(),a}},{key:"ComputeBoundingVecs",value:function(){this.vecs=[];for(var e=0;e<this.pts.length;++e)this.vecs.push(this.pts[e].vec)}},{key:"GetBoundary",value:function(){return this.GetVecs()}},{key:"GetVecsGeoAOA",value:function(){for(var e=[],t=0;t<this.pts.length;++t){var n=[this.pts[t].vec.long,this.pts[t].vec.lat];e.push(n)}return e}},{key:"ComputeVec",value:function(){this.ComputeCenterVec(),this.ComputeBoundingVecs()}},{key:"MouseRightClick",value:function(){this.isFill=!this.isFill,this.isConstraintRatio=!this.isConstraintRatio}},{key:"RenderPost",value:function(e){this.ComputeVec(),this.renderer.timer.UpdatePopupSummery(),this.scene.annotationInstance.activeCommandController.acProperties.isPanning&&this.wrapping.UpdateProjection(this.GetVecs()),this.scene.annotationInstance.activeCommandController.acProperties.showUnit&&this.isConstraintRatio&&this.isHover&&(e.textAlign="center",e.fillStyle="#ffffff",100<Math.abs(this.Width)&&e.fillText("constrained by ratio",this.vec.x,this.vec.y)),this.scene.annotationInstance.activeCommandController.acProperties.showUnit&&(this.isHover||this.isUnderConstruction)&&(this.dimension.RenderLengthRect(e,this.vecs),this.isConstraintRatio?this.dimension.RenderTotalAreaRect(e,this.vecs,", constrained by ratio"):this.dimension.RenderTotalAreaRect(e,this.vecs)),this.RenderPostGeometryDuplication(e,this.wrapping.vsOther),this.RenderPostGeometry(e,this.GetVecs())}},{key:"RenderPostGeometry",value:function(e,t){this.isHover||this.isSelected?(this.scene.annotationInstance.renderer.draw.shape.point.CenterPoint(e,this.vec.x,this.vec.y),this.scene.annotationInstance.renderer.draw.shape.area.RectangleHover(e,this.styleComponent.renderStyle,t,this.isGrayColor,this.visibility,this.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.renderer.tOver),this.isHover),this.renderer.tOver+=this.scene.annotationInstance.renderer.dt,this.renderer.tDown1=0,this.isLeave=!0,this.scene.annotationInstance.renderer.draw.shape.area.Rectangle(e,this.styleComponent.renderStyle,t,this.vec,this.isFill,this.isHover,this.isSelected)):(this.renderer.tOver=0,this.scene.annotationInstance.renderer.draw.shape.area.Rectangle(e,this.styleComponent.renderStyle,t,this.vec,this.isFill,this.isHover,this.isSelected)),this.renderer.t+=this.scene.annotationInstance.renderer.dt,this.RenderPostGeometryOffScreen(t)}},{key:"RenderPostGeometryOffScreen",value:function(e){this.scene.annotationInstance.renderer.offscreen.RectangleOffScreen(this.scene.annotationInstance.renderer.ctxOffscreen,this.hashColor,e)}},{key:"RenderPostGeometryDuplication",value:function(e,t){if(this.wrapping.isIntersectLeft||this.wrapping.isIntersectRight){var n=t;if(this.scene.annotationInstance.activeCommandController.acProperties.showUnit&&void 0!==n){var i=n;i.length>1&&(this.isHover||this.isUnderConstruction)&&(this.dimension.RenderLengthRect(e,i),this.isConstraintRatio?this.dimension.RenderTotalAreaRect(e,i,", constrained by ratio"):this.dimension.RenderTotalAreaRect(e,i))}n&&n.length>0&&(this.isHover||this.isSelected?(this.scene.annotationInstance.renderer.draw.shape.area.PolygonByVecHover(e,this.styleComponent.renderStyle,n,this.isGrayColor,this.visibility,this.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.renderer.tOver),this.isHover),this.scene.annotationInstance.renderer.draw.shape.area.PolygonByVec(e,this.styleComponent.renderStyle,n,this.isUndo,this.isGrayColor,this.visibility),this.scene.annotationInstance.renderer.draw.shape.area.PolygonByVecNode(e,this.styleComponent.renderStyle,n,this.scaleForRender,this.isGrayColor,this.visibility,this.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.renderer.tOver),this.isHover)):this.scene.annotationInstance.renderer.draw.shape.area.PolygonByVec(e,this.styleComponent.renderStyle,n,this.isUndo,this.isGrayColor,this.visibility)),this.RenderPostGeometryOffScreen(n)}}},{key:"Visibility",set:function(e){this.visibility=e;for(var t=0;t<this.pts.length;++t)this.pts[t].visibility=e}},{key:"IsHiddenChildren",set:function(e){this.isHiddenPre=this.isHidden,this.isHidden=e;for(var t=0;t<this.pts.length;++t)this.pts[t].isHidden=e}},{key:"IsHidden",set:function(e){this.isHiddenPre=this.isHidden,this.isHidden=e,this.IsHiddenChildren=e,this.scene.annotationInstance.io.eventListenerAnnotation.HideStack(this.ToJSON())}},{key:"IsSelectable",set:function(e){this.isSelectable=e;for(var t=0;t<this.pts.length;++t)this.pts[t].isSelectable=e},get:function(){return this.isSelectable}},{key:"IsRenderable",set:function(e){this.isRenderable=e;for(var t=0;t<this.pts.length;++t)this.pts[t].isRenderable=e}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){this.isSelected=e;var t,n=un(this.pts);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.isRenderable=e,i.isSelectable=e}}catch(a){n.e(a)}finally{n.f()}this.scene.annotationInstance.io.eventListenerAnnotation.SelectionStack(this.ToJSON())}},{key:"IsHover",get:function(){return this.isHover},set:function(e){if(!this.isUnderConstruction){if(this.isHover=e,this.isHover&&!this.isHoverPre?this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()):!this.isHover&&this.isHoverPre&&this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()),this.isHoverPre=this.isHover,!this.isSelected){var t,n=un(this.pts);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.isRenderable=e,i.isSelectable=e}}catch(a){n.e(a)}finally{n.f()}}e||(this.needEmitHoverPost=!0,this.HidePopUpSummary())}}},{key:"Width",get:function(){return this.pts[1].vec.x-this.pts[0].vec.x}},{key:"Height",get:function(){return this.pts[2].vec.y-this.pts[1].vec.y}}]),i}(wt);Object(u.a)(mn,"isDone",!1),Object(u.a)(mn,"list",[]),Object(u.a)(mn,"split",!1),Object(u.a)(mn,"isConstraintRatio",!1);var fn=function(){function e(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(o.a)(this,e),Object(u.a)(this,"theIndex",-1),this.geo=t,this.vecs=n,this.geoDistance=i,this.length=this.ComputeLength(this.vecs),this.dimension=new Et(this.geo)}return Object(r.a)(e,[{key:"ComputeLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.vecs=e,this.isClosed=t,this.length=[],this.totalLength=0,this.target=n,this.remain=n;var i=0;if(this.isClosed){for(var a=0;a<this.vecs.length-1;++a)i=this.geoDistance?ne(this.vecs[a],this.vecs[a+1]):Z(this.vecs[a],this.vecs[a+1]),this.totalLength+=i,this.length.push(i),this.remain>0&&(this.remain-=i,this.theIndex=a);i=this.geoDistance?ne(this.vecs[this.vecs.length],this.vecs[0]):Z(this.vecs[this.vecs.length],this.vecs[0]),this.remain>0&&(this.remain-=i,this.theIndex=0),this.totalLength+=i,this.length.push(i)}else for(var o=0;o<this.vecs.length-1;++o)i=this.geoDistance?ne(this.vecs[o],this.vecs[o+1]):Z(this.vecs[o],this.vecs[o+1]),this.totalLength+=i,this.length.push(i),this.remain>0&&(this.remain-=i,this.theIndex=o);return this.theIndex+=1,this.length}},{key:"ComputeLengthNormalized",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=0,a=0;a<this.vecs.length-1;++a)i+=Z(this.vecs[a],this.vecs[a+1]);this.vecs=e,this.isClosed=t,this.length=[],this.totalLength=0,this.target=i*n,this.remain=i*n;var o=0;if(this.isClosed);else for(var r=0;r<this.vecs.length-1;++r)o=Z(this.vecs[r],this.vecs[r+1]),this.totalLength+=o,this.length.push(o),this.remain>0&&(this.remain-=o,this.theIndex=r);return this.theIndex+=1,this.length}},{key:"RenderByConstraintTargetDistance",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;this.ComputeLength(t,n,i),this.remain,this.theIndex>0&&(this.isClosed||this.RenderGeometryByConstraintTargetDistance(e))}},{key:"RenderByConstraintTargetDistancePercentage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;this.ComputeLengthNormalized(t,n,i),this.remain,this.theIndex>0&&(this.isClosed||this.RenderGeometryByConstraintTargetDistancePercentage(e))}},{key:"RenderGeometryByConstraintTargetDistance",value:function(t){t.lineCap="round",t.lineWidth=this.geo.scene.annotationInstance.customization.themeCurrent.polyline.lineWidth;var n=this.geo.scene.annotationInstance.customization.themeCurrent.polyline.strokeStyleFirstArray;t.strokeStyle="rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(n[3],")"),t.beginPath(),t.moveTo(this.vecs[0].x,this.vecs[0].y);for(var i=1;i<this.theIndex;++i)t.lineTo(this.vecs[i].x,this.vecs[i].y);t.stroke();var a=W(this.vecs[this.theIndex-1]),o=W(this.vecs[this.theIndex]);if(this.remain<0){for(var r,s=Number.MAX_SAFE_INTEGER,c=te(a,o,200),l=0;l<c.length;++l){var p=this.geo.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(c[l].x,c[l].y);c[l].long=p[0],c[l].lat=p[1];var u=ne(o,c[l])+this.remain;Math.abs(u)<s&&(r=c[l],s=Math.abs(u))}r&&(t.moveTo(a.x,a.y),t.lineTo(r.x,r.y),t.stroke())}else if(e.isShowLineRemain){for(var d,h=V(o,a),m=K(h).Mult(-1e3),f=be(o,m),y=Number.MAX_SAFE_INTEGER,g=te(o,f,200),v=0;v<g.length;++v){var b=this.geo.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(g[v].x,g[v].y);g[v].long=b[0],g[v].lat=b[1];var x=ne(o,g[v])-this.remain;Math.abs(x)<y&&(d=g[v],y=Math.abs(x))}d&&(t.beginPath(),t.moveTo(a.x,a.y),t.lineTo(d.x,d.y),t.closePath(),t.stroke())}else t.beginPath(),t.moveTo(a.x,a.y),t.lineTo(o.x,o.y),t.closePath(),t.stroke();this.remain<0&&(this.remain=0)}},{key:"RenderGeometryByConstraintTargetDistancePercentage",value:function(t){t.lineCap="round",t.lineWidth=this.geo.scene.annotationInstance.customization.themeCurrent.polyline.lineWidth;var n=this.geo.scene.annotationInstance.customization.themeCurrent.polyline.strokeStyleFirstArray;t.strokeStyle="rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(n[3],")"),t.beginPath(),t.moveTo(this.vecs[0].x,this.vecs[0].y);for(var i=1;i<this.theIndex;++i)t.lineTo(this.vecs[i].x,this.vecs[i].y);t.stroke();var a=W(this.vecs[this.theIndex-1]),o=W(this.vecs[this.theIndex]);if(this.remain<0){for(var r,s=Number.MAX_SAFE_INTEGER,c=te(a,o,200),l=0;l<c.length;++l){var p=Z(o,c[l])+this.remain;Math.abs(p)<s&&(r=c[l],s=Math.abs(p))}r&&(t.moveTo(a.x,a.y),t.lineTo(r.x,r.y),t.stroke())}else if(e.isShowLineRemain){for(var u,d=V(o,a),h=K(d).Mult(-1e3),m=be(o,h),f=Number.MAX_SAFE_INTEGER,y=te(o,m,200),g=0;g<y.length;++g){var v=Z(o,y[g])-this.remain;Math.abs(v)<f&&(u=y[g],f=Math.abs(v))}u&&(t.beginPath(),t.moveTo(a.x,a.y),t.lineTo(u.x,u.y),t.closePath(),t.stroke())}else t.beginPath(),t.moveTo(a.x,a.y),t.lineTo(o.x,o.y),t.closePath(),t.stroke();this.remain<0&&(this.remain=0)}}]),e}();Object(u.a)(fn,"isShowLineRemain",!1);var yn=function(){function e(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(o.a)(this,e),Object(u.a)(this,"theIndex",-1),this.geo=t,this.vecs=n,this.goeDistance=i,this.areas=this.ComputeArea(this.vecs),this.dimension=new Et(this.geo)}return Object(r.a)(e,[{key:"ComputeArea",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=[],a=0;a<e.length;++a)i.push(new Oe(e[a].x,e[a].y)),i[a].lat=e[a].lat,i[a].long=e[a].long;this.vecs=i,this.isClosed=t,this.areas=[],this.areasVert=[],this.totalArea=0,this.target=n,this.remain=n,this.remainComputeNeeded=!0,this.areasVert=[];for(var o=[],r=0;r<this.vecs.length-2;++r){var s=[],c=3+r;if(c===this.vecs.length+1)break;for(var l=0;l<c;++l)s.push(this.vecs[l]);var p=Math.abs(X(s));if(!(p<this.target)){this.remainComputeNeeded=!0;break}o.push(p),this.areasVert.push(s),this.totalArea=p,this.remain=this.target-this.totalArea,this.remainComputeNeeded=!1,this.theIndex=s.length-1}return o}},{key:"Render",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;this.ComputeArea(t,n,i),this.remainComputeNeeded||this.theIndex--,this.remain,this.theIndex>0&&(this.isClosed||this.RenderGeometry(e))}},{key:"RenderGeometry",value:function(e){e.lineCap="round",e.lineWidth=this.geo.scene.annotationInstance.customization.themeCurrent.polygon.lineWidth;var t=this.geo.scene.annotationInstance.customization.themeCurrent.polygon.strokeStyleFirstArray;e.strokeStyle="rgba(".concat(t[0],", ").concat(t[1],", ").concat(t[2],", ").concat(t[3],")"),e.beginPath(),e.moveTo(this.vecs[0].x,this.vecs[0].y);for(var n=1;n<this.theIndex;++n)e.lineTo(this.vecs[n].x,this.vecs[n].y);e.stroke();var i=W(this.vecs[this.theIndex-1]),a=W(this.vecs[this.theIndex]);if(this.remain<0){for(var o,r=Number.MAX_SAFE_INTEGER,s=te(i,a,200),c=0;c<s.length;++c){var l=this.geo.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(s[c].x,s[c].y);s[c].long=l[0],s[c].lat=l[1];var p=ne(a,s[c])+this.remain;Math.abs(p)<r&&(o=s[c],r=Math.abs(p))}o&&(e.moveTo(i.x,i.y),e.lineTo(o.x,o.y),e.stroke())}this.remain<0&&(this.remain=0)}}]),e}();function gn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}Object(u.a)(yn,"isShowLineRemain",!1);var vn=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(gn()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).renderStyle=new Bt,t.renderStyleNode=new Bt,t.UpdateStyle(),t}return Object(r.a)(i,[{key:"UpdateStyle",value:function(){if(Bt.UpdateRenderStylePolyline(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent),Bt.UpdateRenderStylePolylineNode(this.renderStyleNode,this.geo.scene.annotationInstance.customization.themeCurrent),this.geo.pts)for(var e=0;e<this.geo.pts.length;++e)this.geo.pts[e].styleComponent.UpdateStyleForNode(this.renderStyleNode)}}]),i}(Vt);function bn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var xn=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(bn()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).host=e,t.InitRenderTheme(),t}return Object(r.a)(i,[{key:"InitRenderTheme",value:function(){}},{key:"RenderPost",value:function(e){(this.host.isConstraint&&this.host.isHover||this.host.IsSelected)&&(e.textAlign="center",e.fillStyle="#000000",e.fillText("Total constraint length: ".concat(this.host.constraintTargetDistance," Mile"),this.host.vecs[0].x,this.host.vecs[0].y-10)),this.host.scene.annotationInstance.activeCommandController.acProperties.showUnit&&(this.host.isConstraint||(this.host.type===g.j.POLYGON?(this.host.isHover||this.host.isUnderConstruction)&&(this.host.dimension.RenderLength(e,!0,this.host.vecs),this.host.dimension.RenderTotalArea(e,this.host.vecs)):(this.host.isHover||this.host.isUnderConstruction)&&(this.host.dimension.RenderLength(e,!1,this.host.vecs),this.host.dimension.RenderTotalLength(e,this.host.vecs)))),this.host.isConstraint?this.RenderPostGeometryConstraint(e):(this.RenderPostGeometry(e),this.RenderPostGeometryDuplication(e)),this.OffscreenRender(),this.host.renderer.t+=this.host.scene.annotationInstance.renderer.dt}},{key:"RenderPostGeometryDuplication",value:function(e){(this.host.wrapping.isIntersectLeft||this.host.wrapping.isIntersectRight)&&this.host.wrapping.vsOther[0]&&this.RenderPolygonOther(e,this.host.wrapping.vsOther)}},{key:"RenderPostGeometryConstraint",value:function(e){if(this.host.type===g.j.POLYLINE){if(this.host.isHover||this.host.isSelected||this.host.isUnderConstruction){e.lineDashOffset=-this.host.renderer.t,e.setLineDash([4,4]),e.strokeStyle=this.host.styleComponent.renderStyle.colorStroke,e.lineWidth=1,e.beginPath(),e.moveTo(this.host.vecs[0].x,this.host.vecs[0].y);for(var t=1;t<this.host.vecs.length;++t)e.lineTo(this.host.vecs[t].x,this.host.vecs[t].y);e.stroke(),e.setLineDash([0,0])}this.host.isConstraint&&(this.host.renderConstraintTargetDistance&&this.host.constraintDrawing.RenderByConstraintTargetDistance(e,this.host.vecs,!1,this.host.constraintTargetDistance),this.host.renderConstraintTargetDistancePercentage&&this.host.constraintDrawing.RenderByConstraintTargetDistancePercentage(e,this.host.vecs,!1,this.host.constraintTargetDistancePercentage)),(this.host.isHover||this.host.isUnderConstruction)&&this.host.dimension.RenderRemainLengthByValue(e,this.host.constraintDrawing.target,this.host.constraintDrawing.remain)}else this.host.type===g.j.POLYGON&&this.host.isConstraint&&this.host.constraintDrawingArea.Render(e,this.host.vecs,!1,this.host.constraintTargetArea)}},{key:"RenderPostGeometry",value:function(e){this.host.type===g.j.POLYLINE?this.host.isUnderConstruction?(this.RenderPolyline(e),this.host.scene.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode===g.k.DRAWING&&this.RenderMidVec(e)):this.host.isCurvedPolyline||(this.RenderPolyline(e),this.host.scene.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode===g.k.DRAWING&&this.RenderMidVec(e)):this.RenderPolygon(e,this.host.GetVecs())}},{key:"RenderPolyline",value:function(e){this.host.isHover||this.host.isSelected?(this.host.scene.annotationInstance.renderer.draw.shape.line.PolylineHover(e,this.host.styleComponent.renderStyle,this.host.GetVecs(),this.host.isGrayColor,this.host.visibility,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),this.host.isHover),this.tOver+=.015,this.tDown1=0,this.host.isLeave=!0,this.host.scene.annotationInstance.renderer.draw.shape.line.Polyline(e,this.host.styleComponent.renderStyle,this.host.GetVecs(),this.host.isGrayColor,this.host.visibility,this.host.isHover,this.host.isSelected)):(this.tOver=0,this.host.scene.annotationInstance.renderer.draw.shape.line.Polyline(e,this.host.styleComponent.renderStyle,this.host.GetVecs(),this.host.isGrayColor,this.host.visibility,this.host.isHover,this.host.isSelected))}},{key:"RenderPolygon",value:function(e,t){this.OffscreenRender(),this.host.isHover||this.host.isSelected?(this.host.scene.annotationInstance.renderer.draw.shape.area.PolygonHover(e,this.host.styleComponent.renderStyle,t,this.host.isGrayColor,this.host.visibility,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),this.host.isHover,this.host.isSelected),this.tOver+=.01,this.tDown1=0,this.host.isLeave=!0,this.host.scene.annotationInstance.renderer.draw.shape.area.Polygon(e,this.host.styleComponent.renderStyle,t,this.host.isUnderConstruction,this.host.isGrayColor,this.host.visibility,this.host.isFill,this.host.IsHover,this.host.isSelected)):(this.tOver=0,this.host.scene.annotationInstance.renderer.draw.shape.area.Polygon(e,this.host.styleComponent.renderStyle,t,this.host.isUnderConstruction,this.host.isGrayColor,this.host.visibility,this.host.isFill,this.host.IsHover,this.host.isSelected))}},{key:"RenderPolygonOther",value:function(e,t){this.host.isHover||this.host.isSelected?(this.host.scene.annotationInstance.renderer.draw.shape.area.PolygonHover(e,this.host.styleComponent.renderStyle,t,this.host.isGrayColor,this.host.visibility,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),this.host.isHover,this.host.isSelected),this.host.scene.annotationInstance.renderer.draw.shape.area.Polygon(e,this.host.styleComponent.renderStyle,t,this.host.isUnderConstruction,this.host.isGrayColor,this.host.visibility,this.host.isFill,this.host.IsHover,this.host.isSelected),this.host.scene.annotationInstance.interactionMode===g.k.DRAWING&&this.host.scene.annotationInstance.renderer.draw.shape.area.PolygonByVecNode(e,this.host.styleComponent.renderStyleNode,t,this.host.scaleForRender,this.host.isGrayColor,this.host.visibility,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),this.host.isHover)):this.host.scene.annotationInstance.renderer.draw.shape.area.Polygon(e,this.host.styleComponent.renderStyle,t,this.host.isUnderConstruction,this.host.isGrayColor,this.host.visibility,this.host.isFill,this.host.IsHover,this.host.isSelected),this.host.scene.annotationInstance.renderer.offscreen.PolygonOffScreenByVecs(this.host.scene.annotationInstance.renderer.ctxOffscreen,this.host.hashColor,this.host.wrapping.vsOther)}},{key:"RenderMidVec",value:function(e){if(this.host.isHover||this.host.isSelected||this.host.isUnderConstruction){this.host.UpdateMidVec();for(var t=this.host.vecMid.length;t--;)this.host.scene.annotationInstance.renderer.draw.shape.node.NodeMidHover(e,this.host.styleComponent.renderStyleNode,this.host.vecMid[t].x,this.host.vecMid[t].y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver))}}},{key:"OffscreenRender",value:function(){this.host.type===g.j.POLYGON&&this.OffscreenRenderPolygon()}},{key:"OffscreenRenderPolygon",value:function(){this.host.scene.annotationInstance.renderer.offscreen.PolygonOffScreen(this.host.scene.annotationInstance.renderer.ctxOffscreen,this.host.hashColor,this.host.GetVecs())}}]),i}(Yt);function On(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return wn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wn(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function jn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Cn=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(jn()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e,t){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(o.a)(this,i),a=n.call(this,e),Object(u.a)(Object(s.a)(a),"constraintTargetArea",340),Object(u.a)(Object(s.a)(a),"vecSelected",-1),Object(u.a)(Object(s.a)(a),"isPan",!1),Object(u.a)(Object(s.a)(a),"renderConstraintTargetDistancePercentage",!1),Object(u.a)(Object(s.a)(a),"renderConstraintTargetDistance",!1),Object(u.a)(Object(s.a)(a),"_constraintTargetDistancePercentage",.5),Object(u.a)(Object(s.a)(a),"_constraintTargetDistance",340),a.isFill=!1,a.pts=[],a.isUndo=r,a.isConstraint=c,a.lineWidth=8,a.isUnderConstruction=!0,a.vec=new Oe(t.vec.x,t.vec.y,t.vec.z),a.IsMove=!0,a.InitComponent(),a.AddPT(t),a.InitVecsHistory(),a.InitPolyline(),a.scene.annotationInstance.implementations.app.model.ioWrapper.eventInteraction.isEnableZoomByDoubleClick=!1,a}return Object(r.a)(i,null,[{key:"FindAtPoint",value:function(e,t){for(var n=e.listAPolylineWrapper.length-1;n>=0;--n)if(e.listAPolylineWrapper[n].isSelectable&&e.listAPolylineWrapper[n].IsMouseInside(t.x,t.y))return e.listAPolylineWrapper[n]}},{key:"GetLengthSelection",value:function(e){for(var t=e.listAPolylineWrapper.length,n=0;t--;)e.listAPolylineWrapper[t].IsSelected&&(n+=1);return n}},{key:"ComputeOver",value:function(e,t){var n=i.FindAtPoint(e,t);void 0!==n&&(n.isHover=!0)}},{key:"FromJSON",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!1;o=!!t.data.isConstraint;var r=new i(e,$t.GetNodeFromJSON(e,t.nodes[0],n),n,o);if(o&&(r.constraintTargetDistance=+t.data.constraintTargetDistance),n){r.isUndo=n;for(var s=1;s<t.nodes.length;++s)r.AddPT($t.GetNodeFromJSON(e,t.nodes[s],n))}else for(var c=1;c<t.nodes.length;++c)r.AddPT($t.GetNodeFromJSON(e,t.nodes[c]));return r.type=g.j[t.type],r.id=a?e.GetUUID():t.id,r.IsSelectable=!0,r.isUnderConstruction=!1,r.IsHover=!1,r.isHidden=t.isHidden,t.isHidden?r.visibility=0:r.visibility=1,r.wrapping.InitProjectionShapesFromJSON(r.GetVecs()),r.wrapping.UpdateProjection(r.vecs),r.InitVecsHistory(),n||e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(r.ToJSON()),r}},{key:"GetPolylineByVecs",value:function(e,t){for(var n=new i(e,new $t(e,t[0].x,t[0].y,0)),a=1;a<t.length;++a)n.AddPT(new $t(e,t[a].x,t[a].y,0));n.ComputeCenterVec(),n.IsSelectable=!0,n.isUnderConstruction=!1,e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(n.ToJSON())}},{key:"DrawShadow",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.j.ALINE;void 0!==i.construction&&i.construction.pts[i.construction.pts.length-1].Move(e.x,e.y)}},{key:"GetLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];void 0!==i.construction?i.construction.AddPT(new $t(e,t.x,t.y)):(i.construction=new i(e,new $t(e,t.x,t.y),!1,n),i.construction.pts[0].isSelectable=!0,i.construction.AddPT(new $t(e,t.x,t.y)))}},{key:"GetLineByPt",value:function(e){}},{key:"Undo",value:function(e,t){if(i.construction){var n=i.construction.pts.length-1;1!==n?(i.construction.RemovePT(i.construction.pts[--n]),i.construction.pts[n].vec.x=t.x,i.construction.pts[n].vec.y=t.y):i.Cancel(e)}}},{key:"Done",value:function(e){void 0!==i.construction&&(i.construction.IsSelectable=!0,i.construction.isUnderConstruction=!0,i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),Z(i.construction.pts[i.construction.pts.length-1].vec,i.construction.pts[0].vec)<3&&i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),i.construction.ComputeCenterVec(),i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),i.construction.isUnderConstruction=!1,e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(i.construction.ToJSON()),i.construction=void 0,e.annotationInstance.activeCommandController.GoToACMode()),e.annotationInstance.implementations.app.model.ioWrapper.eventInteraction.isEnableZoomByDoubleClick=!0}},{key:"DoneByKeyboard",value:function(e){void 0!==i.construction&&(i.construction.IsSelectable=!0,i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),i.construction.isUnderConstruction=!1,i.construction.ComputeCenterVec(),e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(i.construction.ToJSON()),i.construction=void 0,e.annotationInstance.activeCommandController.GoToACMode())}},{key:"Cancel",value:function(e){void 0!==i.construction&&(i.construction.needEmit=!1,i.construction.Remove(),i.construction=void 0)}},{key:"MouseDown",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.annotationInstance.activeCommandController.acProperties.isSmartSelectionWhenDrawing){var a=e.annotationInstance.geometryCommon.gcmdProcessing.FindAtPoint(t);i.construction&&(i.GetLine(e,t),a&&(i.construction.type=g.j.POLYGON,i.construction.isClosed=!0,i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),a.isSelected=!1,a.isHover=!1,a.isCaptured=!1,a.isSelectable=!1,i.construction.IsSelectable=!0,i.construction.isUnderConstruction=!1,i.construction.ComputeCenterVec(),i.construction.InitVecsHistory(),e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(i.construction.ToJSON()),i.construction=void 0))}else i.GetLine(e,t,n)}},{key:"MouseLeftClick",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0===e.capture)return void 0!==i.construction&&i.isDone?(i.construction.isSelected=!1,i.construction=void 0,void(i.isDone=!1)):void(void 0===i.construction&&i.GetLine(e,t,n))}},{key:"MouseMove",value:function(e){void 0!==i.construction&&i.DrawShadow(e)}},{key:"MouseDoubleClick",value:function(e,t){void 0!==i.construction&&i.Done(e)}}]),Object(r.a)(i,[{key:"InitComponent",value:function(){this.styleComponent=new vn(this),this.renderer=new xn(this)}},{key:"InitPolyline",value:function(){this.wrapping=new Ct(this,this.GetVecs()),this.constraintDrawing=new fn(this,this.vecs),this.constraintDrawingArea=new yn(this,this.vecs),this.dimension=new Et(this),this.isCurvedPolyline=!1,this.type=g.j.POLYLINE,this.scene.AddAPolylineWrapper(this)}},{key:"UpdateScreenVec",value:function(){}},{key:"UpdatePan",value:function(){}},{key:"UpdateZoom",value:function(){}},{key:"GetLog",value:function(){if(this.isRemove||!this.isRenderable||this.isHidden)return"";var e="";return this.type===g.j.POLYGON?e+="GUID : "+this.id+"/TYPE : "+this.type.toString()+"/Screen : /pos : "+this.pts.length+"/Area : "+this.GetArea().toFixed(3).toString()+" m2/IsSEL : "+this.isSelected+"/isSelable : "+this.isSelectable:this.type===g.j.POLYLINE?e+="GUID : "+this.id+"/TYPE : "+this.type.toString()+"/Screen : /pos : "+this.pts.length+"/length : "+this.GetArea().toFixed(3).toString()+" m2/IsSEL : "+this.isSelected+"/isSelable : "+this.isSelectable:e}},{key:"GetLogDOM",value:function(){return"Geometry ID : "+this.id+"<br>geometry Type : CCircle<br>position : <br>size : "+this.r+" pixel<br>"}},{key:"IsColse",value:function(){}},{key:"IsMouseInside",value:function(e,t){return!(this.isRemove||!this.isRenderable||this.isHidden)&&(!0!==this.isUnderConstruction&&void 0!==this.isUnderConstruction&&(this.CheckDistance(e,t)?(this.IsHover=!0,!0):(this.IsHover=!1,!1)))}},{key:"CheckDistance",value:function(e,t){for(var n=this.pts.length,i=0;i<n;++i)if(i<n-1){if(de(new Oe(e,t),this.pts[i].vec,this.pts[i+1].vec)<this.lineWidth)return!0}else if(this.type!==g.j.POLYLINE&&de(new Oe(e,t),this.pts[i].vec,this.pts[0].vec)<this.lineWidth)return!0;return!!this.CheckDistanceDuplicated(e,t,this.wrapping.vsOther)||!!this.scene.annotationInstance.geometryCommon.gcmdProcessing.IsMouseInsideByOffScreen(e,t,this.hashColor)}},{key:"CheckDistanceDuplicated",value:function(e,t,n){if(this.wrapping.isIntersectLeft||this.wrapping.isIntersectRight){var i=n.length;if(i>2){for(var a=0;a<n.length;++a){if(Z(new Oe(e,t),n[a])<9)return this.vecSelected=a,!0;this.vecSelected=-1}i=n.length;for(var o=0;o<i-1;++o)if(de(new Oe(e,t),n[o],n[o+1])<this.lineWidth)return!0}}return!1}},{key:"HasSamePtWtithCapture",value:function(){for(var e=0;e<this.pts.length;++e)if(this.pts[e]===this.scene.capture)return!0;return!1}},{key:"TranslateByMouseEventData",value:function(e){if(!this.HasSamePtWtithCapture()){if(-1!==this.vecSelected)return this.pts[this.vecSelected].TranslateByMouseEventData(e),void this.wrapping.UpdateProjection(this.vecs);if(!this.isRemove&&this.isRenderable&&!this.isHidden){for(var t=e.x-e.preX,n=e.y-e.preY,i=0;i<this.pts.length;++i)if(this.pts[i].vec.x+=t,this.pts[i].vec.y+=n,this.pts[i].UpdateGoeVec(),this.pts[i].textLeaderline){var a=this.pts[i];this.TranslateForTextLeaderline(e,a)}if(this.isCurvedPolyline&&this.mPts)for(var o=0;o<this.mPts.length;++o)this.mPts[o].vec.x+=t,this.mPts[o].vec.y+=n,this.mPts[o].UpdateGoeVec();this.wrapping.UpdateProjection(this.vecs)}}}},{key:"TranslateForTextLeaderline",value:function(e,t){return!(!t.textLeaderline||(t.textLeaderline.TranslateByMouseEventData(e),!t.textLeaderline.leaderline))&&(t.textLeaderline.leaderline.v2.x=t.vec.x,t.textLeaderline.leaderline.v2.y=t.vec.y,!0)}},{key:"Translate",value:function(e,t){}},{key:"Move",value:function(e,t){if(!this.isRemove&&this.isRenderable&&!this.isHidden){this.ComputeCenterVec();for(var n=e-this.vec.x,i=t-this.vec.y,a=0;a<this.pts.length;++a)this.pts[a].vec.x+=n,this.pts[a].vec.y+=i,this.pts[a].UpdateGoeVec()}}},{key:"Remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.isRemove&&this.isRenderable&&!this.isHidden){for(var t=0;t<this.pts.length;++t)this.pts[t].DeepRemove();if(this.isSelectable=!1,this.isRenderable=!1,this.HidePopUpSummary(),e){var n=this.ToJSON();n&&this.scene.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack([n])}this.scene.RemoveAPolylineWrapper(this),this.scene.RemoveGeometry(this)}}},{key:"Hide",value:function(){}},{key:"GetLength",value:function(){if(this.pts.length<2)return 0;for(var e=0,t=0;t<this.pts.length-1;++t)e+=At.DistancefromGeoV(this.pts[t].vec,this.pts[t+1].vec,this.scene.annotationInstance.activeCommandController.acProperties.unit);return Math.abs(e)}},{key:"FindClosestNode",value:function(e,t){for(var n=0;n<this.pts.length;++n)if(this.pts[n].IsMouseInside(e,t))return this.pts[n]}},{key:"RemoveByBlackhole",value:function(){this.ComputeCenterVec(),Q([this.scene.annotationInstance.renderer.blackhole.v.x,this.scene.annotationInstance.renderer.blackhole.v.y,this.scene.annotationInstance.renderer.blackhole.v.z],[this.vec.x,this.vec.y,this.vec.z])<10&&this.Remove(!0)}},{key:"GetArea",value:function(){this.vecs=[];for(var e=0;e<this.pts.length;++e)this.vecs.push(this.pts[e].vec);return function(e){for(var t=0,n=0;n<e.length-1;n++)t+=(e[n].x-e[n+1].x)*(e[n].y+e[n+1].y);return t*=.5,Math.abs(t)}(this.vecs)}},{key:"GetNodePopup",value:function(){for(var e=this.pts[0],t=1;t<this.pts.length;++t)this.pts[t].vec.x<e.vec.x&&(e=this.pts[t]);return e}},{key:"AddPT",value:function(e){this.type===g.j.POLYLINE?e.type=g.j.ANODE:this.type===g.j.POLYGON&&(e.type=g.j.AN_GON),e.isSelectable=!1,e.AddEdge(this),this.pts.push(e)}},{key:"ToJSON",value:function(){var e=new rt(this.id,this.type,this.isSelected,this.isHover,this.isHidden);return e.PushNode(this.GetVecs()),e.data.isConstraint=this.isConstraint,e.data.constraintTargetDistance=this.constraintTargetDistance,e}},{key:"GetVecsFromDivision",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.GetLength();for(var e=0;e<this.pts.length-1;++e){var t=this.pts[e].vec,n=re(t.x,t.y),i=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreen(n.x,n.y),a=.7*Z(new Oe(i[0],i[1]),this.pts[e].vec)*1,o=this.pts[e].vec,r=this.pts[e+1].vec,s=z(K(V(o,r)),a);s=U(o,s);var c=new $t(this.scene,s.x,s.y,s.z);c.Dummy()}}},{key:"GetVecsFromNumber",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,n=0;n<this.pts.length-1;++n){var i=this.pts[n].vec,a=this.pts[n+1].vec,o=te(i,a,t);o.forEach((function(t){new $t(e.scene,t.x,t.y,t.z).Dummy()}))}}},{key:"GetBoundary",value:function(){return this.GetVecs()}},{key:"ComputeVec",value:function(){this.ComputeCenterVec(),this.ComputeBoundingVecs()}},{key:"GoToBlackhole",value:function(){this.isSelectable=!1,this.needBlackhole=!0,this.pts.forEach((function(e){e.GoToBlackhole()}))}},{key:"UpdateMidVec",value:function(){if(this.vecMid=[],this.type===g.j.POLYLINE)for(var e=0;e<this.pts.length-1;++e)this.vecMid.push(H(this.pts[e].vec,this.pts[e+1].vec))}},{key:"ComputeMidPts",value:function(){for(var e=this.pts.length;e--;)if(this.pts[e].isMid){var t=this.pts[e];t.vec=H(t.nodes[0].vec,t.nodes[1].vec)}}},{key:"ComputeCenterVec",value:function(){for(var e=[],t=0;t<this.pts.length;++t)e.push(this.pts[t].vec);this.vec=xe(e);var n=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(this.vec.x,this.vec.y);return this.vec.long=n[0],this.vec.lat=n[1],this.vec.proX=n[2],this.vec.proY=n[3],this.vec}},{key:"ComputeBoundingVecs",value:function(){this.vecs=[];for(var e=0;e<this.pts.length;++e)this.vecs.push(this.pts[e].vec);this.vecsBound=function(e){var t,n=Number.MAX_VALUE,i=Number.MAX_VALUE,a=Number.MAX_VALUE,o=Number.MIN_VALUE,r=Number.MIN_VALUE,s=Number.MIN_VALUE,c=G(e);try{for(c.s();!(t=c.n()).done;){var l=t.value;n>l.x&&(n=l.x),i>l.y&&(i=l.y),a>l.z&&(a=l.z),o<l.x&&(o=l.x),r<l.y&&(r=l.y),s<l.z&&(s=l.z)}}catch(p){c.e(p)}finally{c.f()}return[new Oe(n,i,a),new Oe(o,r,s)]}(this.vecs)}},{key:"ComputeMidPT",value:function(e){if(!(this.pts.length<3)){var t=this.pts[e],n=H(this.pts[e-1].vec,this.pts[e+1].vec);t.vec=n}}},{key:"RemovePT",value:function(e){this.pts.splice(this.pts.indexOf(e),1),e.Remove()}},{key:"GetVecs",value:function(){for(var e=[],t=0;t<this.pts.length;++t)e.push(this.pts[t].vec);return this.vecs=e,e}},{key:"DeepCopy",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=this.ToJSON(),a=i.FromJSON(this.scene,n,!0,!0);return a.Move(e,t),a.isHover=!0,a.EmitAddStack(),a}},{key:"MouseLeftClick",value:function(){this.scene.annotationInstance.geometryCommon.gcmdProcessing.RemoveAllPopup(),this.ShowPopupSummary(),this.dimension.RenderTotalLengthInput()}},{key:"MouseRightClick",value:function(){}},{key:"GetVecsGeoAOA",value:function(){for(var e=[],t=0;t<this.pts.length;++t){var n=[this.pts[t].vec.long,this.pts[t].vec.lat];e.push(n)}return e}},{key:"Update",value:function(){if(this.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.isViewChanging)for(var e=0;e<this.pts.length;++e){var t=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(this.pts[e].vec.proX,this.pts[e].vec.proY);this.pts[e].vec.x=t[0],this.pts[e].vec.y=t[1]}}},{key:"RenderPost",value:function(e){this.Update(),this.ComputeVec(),this.renderer.timer.UpdatePopupSummery(),this.scene.annotationInstance.activeCommandController.acProperties.isPanning&&this.wrapping.UpdateProjectionShapes(this.vecs),this.renderer.RenderPost(e)}},{key:"constraintTargetDistance",get:function(){return this._constraintTargetDistance},set:function(e){this.renderConstraintTargetDistance=!0,this.renderConstraintTargetDistancePercentage=!1,this._constraintTargetDistance=e}},{key:"constraintTargetDistancePercentage",get:function(){return this._constraintTargetDistancePercentage},set:function(e){this.renderConstraintTargetDistance=!1,this.renderConstraintTargetDistancePercentage=!0,this._constraintTargetDistancePercentage=e<=0?.001:e}},{key:"IsHidden",get:function(){return this.isHidden},set:function(e){this.isHiddenPre=this.isHidden,this.isHidden=e;for(var t=0;t<this.pts.length;++t)this.pts[t].isHidden=e,this.pts[t].Visibility=0;this.scene.annotationInstance.io.eventListenerAnnotation.HideStack(this.ToJSON())}},{key:"IsSelectable",set:function(e){this.isSelectable=e;for(var t=0;t<this.pts.length;++t)this.pts[t].isSelectable=e},get:function(){return this.isSelectable}},{key:"V",get:function(){return this.vec}},{key:"v",set:function(e){this.vec=e}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){if(!this.isRemove&&this.isRenderable&&!this.isHidden){this.isSelected=e;var t,n=On(this.pts);try{for(n.s();!(t=n.n()).done;){t.value.isRenderable=e}}catch(i){n.e(i)}finally{n.f()}this.scene.annotationInstance.io.eventListenerAnnotation.SelectionStack(this.ToJSON())}}},{key:"IsHover",get:function(){return this.isHover},set:function(e){if(!this.isUnderConstruction){if(this.isHover=e,this.isHover&&!this.isHoverPre?this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()):!this.isHover&&this.isHoverPre&&this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()),this.isHoverPre=this.isHover,!this.isSelected){var t,n=On(this.pts);try{for(n.s();!(t=n.n()).done;){t.value.isRenderable=e}}catch(i){n.e(i)}finally{n.f()}}e||(this.needEmitHoverPost=!0,this.HidePopUpSummary())}}}]),i}(wt);function kn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}Object(u.a)(Cn,"split",!1),Object(u.a)(Cn,"isDone",!1);var Sn=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(kn()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).renderStyle=new Bt,t.renderStyleNode=new Bt,t.UpdateStyle(),t}return Object(r.a)(i,[{key:"UpdateStyle",value:function(){if(Bt.UpdateRenderStylePolygon(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent),Bt.UpdateRenderStylePolygonNode(this.renderStyleNode,this.geo.scene.annotationInstance.customization.themeCurrent),this.geo.pts)for(var e=0;e<this.geo.pts.length;++e)this.geo.pts[e].styleComponent.UpdateStyleForNode(this.renderStyleNode)}}]),i}(Vt);function In(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Pn=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(In()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e,t){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(o.a)(this,i),(a=n.call(this,e,t,r)).InitComponentPolygon(),t.styleComponent.UpdateStyleForNode(a.styleComponent.renderStyleNode),a.isConstraint=s,a.isFill=!0,e.annotationInstance.implementations.app.model.ioWrapper.eventInteraction.isEnableZoomByDoubleClick=!1,a.InitPolygon(),a}return Object(r.a)(i,null,[{key:"AddGhost",value:function(e,t){}},{key:"FindAtPoint",value:function(e,t){for(var n=e.listAPolygonWrapper.length-1;n>=0;--n)if(e.listAPolygonWrapper[n].isSelectable&&e.listAPolygonWrapper[n].IsMouseInside(t.x,t.y))return e.listAPolygonWrapper[n]}},{key:"ComputeOver",value:function(e,t){var n=e.annotationInstance.geometryCommon.gcmdProcessing.FindAtPoint(t);void 0!==n&&(n.isHover=!0)}},{key:"APolygonFromNGon",value:function(e,t){for(var n=new i(e,t.pts[0].DeepCopy()),a=1;a<t.pts.length;++a)n.AddPT(t.pts[a].DeepCopy());return n.type=g.j.POLYGON,n.id=t.id,n.IsSelectable=!0,n.isUnderConstruction=!1,n}},{key:"GetPolygonbyVecs",value:function(e,t){for(var n=new i(e,new $t(e,t[0].x,t[0].y)),a=1;a<t.length-1;++a)n.AddPT(new $t(e,t[a].x,t[a].y));return n.type=g.j.POLYGON,n.ComputeCenterVec(),n.InitVecsHistory(),e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(n.ToJSON()),n.IsSelectable=!0,n.isUnderConstruction=!1,n.IsHover=!1,n.visibility=1,n.isRenderable=!0,n}},{key:"FromJSON",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=new i(e,$t.GetNodeFromJSON(e,t.nodes[0],n));if(n){o.isUndo=n;for(var r=1;r<t.nodes.length;++r)o.AddPT($t.GetNodeFromJSON(e,t.nodes[r],n))}else for(var s=1;s<t.nodes.length;++s)o.AddPT($t.GetNodeFromJSON(e,t.nodes[s]));return o.type=g.j[t.type],o.id=a?e.GetUUID():t.id,o.IsSelectable=!0,o.isUnderConstruction=!1,o.IsHover=!1,o.isHidden=t.isHidden,t.isHidden?o.visibility=0:o.visibility=1,o.wrapping.InitProjectionShapesFromJSON(o.GetVecs()),o.wrapping.UpdateProjection(o.vecs),o.ComputeCenterVec(),o.InitVecsHistory(),n||e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(o.ToJSON()),o}},{key:"DrawShadow",value:function(e){void 0!==i.construction&&i.construction.pts[i.construction.pts.length-1].Move(e.x,e.y)}},{key:"GetLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];arguments.length>3&&void 0!==arguments[3]?arguments[3]:g.j.AN_GON;void 0!==i.construction?i.construction.AddPT(new $t(e,t.x,t.y,0,!1,g.j.ANODE_NGON)):(i.construction=new i(e,new $t(e,t.x,t.y),!1,n),i.construction.pts[0].isSelectable=!0,i.construction.AddPT(new $t(e,t.x,t.y,0,!1,g.j.ANODE_NGON)),i.construction.isUnderConstruction=!0)}},{key:"GetLineByPt",value:function(e){}},{key:"Undo",value:function(e,t){if(i.construction){var n=i.construction.pts.length-1;1!==n?(i.construction.RemovePT(i.construction.pts[--n]),i.construction.pts[n].vec.x=t.x,i.construction.pts[n].vec.y=t.y):i.Cancel(e)}}},{key:"Done",value:function(e){e.annotationInstance.activeCommandController.IsTouchEvent?this.DoneByTouch(e):this.DoneByMouseClick(e),e.annotationInstance.implementations.app.model.ioWrapper.eventInteraction.isEnableZoomByDoubleClick=!0}},{key:"DoneByTouch",value:function(e){void 0!==i.construction&&(i.construction.IsSelectable=!0,i.construction.RemovePT(i.construction.pts[0]),Z(i.construction.pts[i.construction.pts.length-1].vec,i.construction.pts[0].vec)<15&&i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),i.construction.ComputeCenterVec(),i.construction.InitVecsHistory(),i.construction.isUnderConstruction=!1,e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(i.construction.ToJSON()),i.construction.pts.length<2&&i.construction.Remove(),i.construction=void 0,e.annotationInstance.activeCommandController.GoToACMode())}},{key:"DoneByMouseClick",value:function(e){void 0!==i.construction&&(i.construction.IsSelectable=!0,i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),Z(i.construction.pts[i.construction.pts.length-1].vec,i.construction.pts[0].vec)<2&&i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),i.construction.ComputeCenterVec(),i.construction.isUnderConstruction=!1,e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(i.construction.ToJSON()),i.construction.pts.length<2&&i.construction.Remove(),i.construction=void 0,e.annotationInstance.activeCommandController.GoToACMode())}},{key:"DoneByKeyboard",value:function(e){void 0!==i.construction&&(i.construction.IsSelectable=!0,i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),i.construction.isUnderConstruction=!1,i.construction.ComputeCenterVec(),e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(i.construction.ToJSON()),i.construction.pts.length<2&&i.construction.Remove(),i.construction=void 0,e.annotationInstance.activeCommandController.GoToACMode())}},{key:"Cancel",value:function(e){void 0!==i.construction&&(i.construction.needEmit=!1,i.construction.Remove(),i.construction=void 0,e.annotationInstance.activeCommandController.GoToACMode())}},{key:"MouseDown",value:function(e,t){if(e.annotationInstance.activeCommandController.acProperties.isSmartSelectionWhenDrawing){var n=e.annotationInstance.geometryCommon.gcmdProcessing.FindAtPoint(t);i.construction&&(i.GetLine(e,t),n&&(i.construction.type=g.j.POLYGON,i.construction.isClosed=!0,i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),n.isSelected=!1,n.isHover=!1,n.isCaptured=!1,n.isSelectable=!1,i.construction.IsSelectable=!0,i.construction.isUnderConstruction=!1,i.construction.ComputeCenterVec(),e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(i.construction.ToJSON()),i.construction=void 0))}else i.GetLine(e,t)}},{key:"MouseLeftClick",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g.j.POLYGON;if(void 0===e.capture)return void 0!==i.construction&&i.isDone?(i.construction.isSelected=!1,i.construction=void 0,void(i.isDone=!1)):void(void 0===i.construction&&i.GetLine(e,t,n,a))}},{key:"MouseMove",value:function(e){if(void 0!==i.construction){if(i.construction.scene.annotationInstance.activeCommandController.acProperties.pressShift&&i.construction.pts.length>1){var t=i.construction.pts[i.construction.pts.length-2];Z(t.vec,new Oe(e.x,e.y))>20&&this.MouseDown(i.construction.scene,e)}i.DrawShadow(e)}}},{key:"MouseDoubleClick",value:function(e,t){void 0!==i.construction&&i.Done(e)}}]),Object(r.a)(i,[{key:"InitComponentPolygon",value:function(){this.styleComponent=new Sn(this)}},{key:"InitPolygon",value:function(){this.type=g.j.POLYGON,this.scene.AddAPolygonWrapper(this)}},{key:"GetLog",value:function(){return this.isRemove||!this.isRenderable||this.isHidden?"":"GUID : "+this.id+"/TYPE : "+this.type.toString()+"/Screen : /pos : "+this.pts.length+"/Area : "+this.GetArea().toFixed(3).toString()+" m2/IsSEL : "+this.isSelected+"/isSelable : "+this.isSelectable}},{key:"GetLogDOM",value:function(){return"Geometry ID : "+this.id+"<br>geometry Type : CCircle<br>position : <br>size : "+this.r+" pixel<br>"}},{key:"MouseRightClick",value:function(){}},{key:"FindClosestNode",value:function(e,t){if(!this.isRemove&&this.isRenderable&&!this.isHidden)for(var n=0;n<this.pts.length;++n)if(this.pts[n].IsMouseInside(e,t))return this.pts[n]}},{key:"Remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.isRemove&&this.isRenderable&&!this.isHidden){for(var t=0;t<this.pts.length;++t)this.pts[t].DeepRemove();if(this.isSelectable=!1,this.isRenderable=!1,this.HidePopUpSummary(),!this.isUnderConstruction&&e){var n=this.ToJSON();n&&this.scene.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack([n])}this.scene.RemoveAPolygonWrapper(this),this.scene.RemoveGeometry(this)}}},{key:"DeepCopy",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=this.ToJSON(),a=i.FromJSON(this.scene,n,!0,!0);return a.Move(e,t),a.isHover=!0,a.EmitAddStack(),a}},{key:"IsSelectable",set:function(e){this.isSelectable=e;for(var t=0;t<this.pts.length;++t)this.pts[t].isSelectable=e},get:function(){return this.isSelectable}},{key:"IsHidden",set:function(e){this.isHiddenPre=this.isHidden,this.isHidden=e;for(var t=0;t<this.pts.length;++t)this.pts[t].isHidden=e,this.pts[t].Visibility=0;this.scene.annotationInstance.io.eventListenerAnnotation.HideStack(this.ToJSON())},get:function(){return this.isHidden}}]),i}(Cn);function Rn(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return En(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function En(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Object(u.a)(Pn,"split",!1),Object(u.a)(Pn,"isDone",!1);var Dn=function(){function e(t,n,i,a,r){Object(o.a)(this,e),Object(u.a)(this,"detectionTolerance",10),Object(u.a)(this,"curveTolerance",3),Object(u.a)(this,"needBend",!0),this.scene=t,this.pGraph=n,this.tOver=0,this.tDown1=0,this.isLeave=!0,this.isHiddenPre=!1,this.isRemove=!1,this.visibility=1,i.Add_AEdge(this),a.Add_AEdge(this),r.Add_AEdge(this),this.p0=i,this.pm=a,this.p1=r,this.p0.type=g.j.ANODE,this.pm.type=g.j.AMIDPOINT,this.p1.type=g.j.ANODE,this.isCurved=!1,this.Init()}return Object(r.a)(e,null,[{key:"RenderEdge",value:function(e,t,n,i,a,o){arguments.length>6&&void 0!==arguments[6]&&arguments[6],arguments.length>7&&void 0!==arguments[7]&&arguments[7],arguments.length>8&&void 0!==arguments[8]&&arguments[8];for(var r=arguments.length>9?arguments[9]:void 0,s=0;s<i.length-2;s+=2){var c=[i[s].x,i[s].y,i[s+1].x,i[s+1].y,i[s+2].x,i[s+2].y],l=[.5,.5,.5,.5,.5,.5],p=this.GetControlPoints(i[s].x,i[s].y,i[s+1].x,i[s+1].y,i[s+2].x,i[s+2].y,.5);this.DrawSpline(e,t,n,c,p,l,a,o),this.OffscreenRender(e,n,r,c,p,c.length)}}},{key:"GetControlPoints",value:function(e,t,n,i,a,o,r){var s=Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2)),c=r*s/(s+Math.sqrt(Math.pow(a-n,2)+Math.pow(o-i,2))),l=r-c;return[n+c*(e-a),i+c*(t-o),n-l*(e-a),i-l*(t-o)]}},{key:"DrawSpline",value:function(e,t,n,i,a,o,r,s){var c=i,l=a,p=c.length;r||s?(e.annotationInstance.renderer.draw.shape.curve.EdgeCurveQuadraticHover(t,n,c[0],c[1],l[0],l[1],c[2],c[3],e.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),r,s),e.annotationInstance.renderer.draw.shape.curve.EdgeCurveQuadraticHover(t,n,c[p-2],c[p-1],l[2*p-10],l[2*p-9],c[p-4],c[p-3],e.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),r,s),this.tOver+=.015,this.tDown1=0,this.isLeave=!0):this.tOver=0,e.annotationInstance.renderer.draw.shape.curve.CurveQuadratic(t,n,c[0],c[1],l[0],l[1],c[2],c[3],r,s),e.annotationInstance.renderer.draw.shape.curve.CurveQuadratic(t,n,c[p-2],c[p-1],l[2*p-10],l[2*p-9],c[p-4],c[p-3],r,s)}},{key:"OffscreenRender",value:function(e,t,n,i,a,o){e.annotationInstance.renderer.offscreen.CurveQuadraticArrowOffScreen(e.annotationInstance.renderer.ctxOffscreen,t,n,i[0],i[1],a[0],a[1],i[2],i[3]),e.annotationInstance.renderer.offscreen.CurveQuadraticArrowOffScreen(e.annotationInstance.renderer.ctxOffscreen,t,n,i[o-2],i[o-1],a[2*o-10],a[2*o-9],i[o-4],i[o-3])}}]),Object(r.a)(e,[{key:"Init",value:function(){this.IsHidden=!1,this.IsRenderable=!0,this.IsSelectable=!0}},{key:"UpdateGoeVec",value:function(){this.p0.UpdateGoeVec(),this.pm.UpdateGoeVec(),this.p1.UpdateGoeVec()}},{key:"GetClosePt",value:function(e,t){return this.p0.Distance(e,t)<10?this.p0:this.p1.Distance(e,t)<10?this.p1:this.pm.Distance(e,t)<10?this.pm:void 0}},{key:"TranslateByMouseEventData",value:function(e){this.p0.isVisited||(this.p0.isVisited=!0,this.p0.TranslateByMouseEventData(e),this.p0.textLeaderline&&this.TranslateForTextLeaderline(e,this.p0)),this.p1.isVisited||(this.p1.isVisited=!0,this.p1.TranslateByMouseEventData(e),this.p1.textLeaderline&&this.TranslateForTextLeaderline(e,this.p1)),this.isCurved&&(this.pm.isVisited||(this.pm.isVisited=!0,this.pm.vec.x+=e.x-e.preX,this.pm.vec.y+=e.y-e.preY,this.pm.textLeaderline&&(this.pm.textLeaderline.TranslateByMouseEventData(e),this.TranslateForTextLeaderline(e,this.pm))))}},{key:"TranslateForTextLeaderline",value:function(e,t){return!(!t.textLeaderline||!t.textLeaderline.leaderline)&&(t.textLeaderline.leaderline.v2.x=t.vec.x,t.textLeaderline.leaderline.v2.y=t.vec.y,!0)}},{key:"SplitEdge",value:function(e){if(e.type===g.j.AMIDPOINT){e.UpdateGoeVec();var t=this.pGraph.edges.indexOf(this);this.pGraph.edges.splice(t,1);var n=new $t(this.scene,e.vec.x,e.vec.y,e.vec.z);n.type=g.j.ANODE;var i=this.pGraph.AddEdge(this.p0,n),a=this.pGraph.AddEdge(n,this.p1);return this.p0.aEdges.splice(this.p0.aEdges.indexOf(this),1),this.p1.aEdges.splice(this.p1.aEdges.indexOf(this),1),this.pGraph.edges.splice(t,0,a),this.pGraph.edges.splice(t,0,i),e.DeepRemove(),this.pGraph.ReBuildConnection(),n}}},{key:"ComputeCurve",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;this.ComputeVertex(e),this.ComputeWeight(e),this.ComputeControlPoint()}},{key:"CheckIsCurved",value:function(){var e=H(this.p0.vec,this.p1.vec);return Z(e,this.pm.vec)<this.curveTolerance?(this.pm.vec.x=e.x,this.pm.vec.y=e.y,this.isCurved=!1,this.pm.UpdateGoeVec(),!1):(this.isCurved=!0,this.pm.UpdateGoeVec(),!0)}},{key:"CheckIsSnapStraight",value:function(){this.isCurved?(this.needBend=!1,this.curveTolerance=3):(this.needBend=!0,this.curveTolerance=0)}},{key:"IsMouseInsideByCurve",value:function(e,t){return this.ComputeCurve(.3),this.IsInsideFirstAndLastCurves(e,t)?(this.IsHover=!0,!0):(this.IsHover=!1,!1)}},{key:"IsMouseInside",value:function(e,t){if(this.isCurved){if(this.IsMouseInsideByCurve(e,t))return!0}else if(this.Distance(e,t)<this.detectionTolerance)return!0;return!1}},{key:"GetOtherPt",value:function(e){return this.p0===e?this.p1:this.p0}},{key:"Distance",value:function(e,t){return de(new Oe(e,t),this.p0.vec,this.p1.vec)}},{key:"MoveMidPt",value:function(e){if(this.isCurved);else{var t=H(this.p0.vec,this.p1.vec);this.pm.vec.x=t.x,this.pm.vec.y=t.y}this.pm.UpdateGoeVec()}},{key:"Remove",value:function(){this.isRemove=!0,this.isRenderable=!1,this.p0.DeepRemove(),this.pm.DeepRemove(),this.p1.DeepRemove(),this.RemoveFromParent()}},{key:"GetCenVec",value:function(){return new Oe((this.p0.vec.x+this.pm.vec.x+this.p1.vec.x)/3,(this.p0.vec.y+this.pm.vec.y+this.p1.vec.y)/3,(this.p0.vec.z+this.pm.vec.z+this.p1.vec.z)/3)}},{key:"GetVecs",value:function(){return[this.p0.vec,this.pm.vec,this.p1.vec]}},{key:"DeepRemove",value:function(){}},{key:"RemoveFromParent",value:function(){this.pGraph.RemoveEdge(this)}},{key:"UpdateMidVec",value:function(){if(!this.isCurved){var e=H(this.p0.vec,this.p1.vec);this.pm.vec.x=e.x,this.pm.vec.y=e.y,this.UpdateGoeVec()}}},{key:"RenderPostHover",value:function(e){this.pGraph.isPath&&!this.isHover||(this.isCurved?(this.ComputeCurve(),this.DrawSplineHover(e,this.pGraph.styleComponent.renderStyle,this.arrayVertexs,this.arrayControlPoint,this.arrayWeight,this.isHover,this.isSelected)):this.DrawLineHover(e,this.pGraph.styleComponent.renderStyle,this.isHover,this.isSelected))}},{key:"RenderPost",value:function(t){if(!this.pGraph.isPath||this.isHover){if(this.isCurved)this.ComputeCurve(),this.DrawSpline(t,this.pGraph.styleComponent.renderStyle,this.arrayVertexs,this.arrayControlPoint,this.arrayWeight,this.isHover,this.isSelected),e.OffscreenRender(this.scene,this.pGraph.styleComponent.renderStyle,this.pGraph.hashColor,this.arrayVertexs,this.arrayControlPoint,this.arrayVertexs.length);else{this.DrawLine(t,this.pGraph.styleComponent.renderStyle,this.isHover,this.isSelected);var n=[this.p0.vec.x,this.p0.vec.y,this.pm.vec.x,this.pm.vec.y,this.p1.vec.x,this.p1.vec.y],i=e.GetControlPoints(this.p0.vec.x,this.p0.vec.y,this.pm.vec.x,this.pm.vec.y,this.p1.vec.x,this.p1.vec.y,.5);e.OffscreenRender(this.scene,this.pGraph.styleComponent.renderStyle,this.pGraph.hashColor,n,i,n.length)}if(!this.pGraph.scene.annotationInstance.activeCommandController.acProperties.isHiddenLog){var a=this.pGraph.edges.indexOf(this);t.font="30px Arial",t.fillText(a.toString(),this.pm.vec.x,this.pm.vec.y)}}}},{key:"DrawLine",value:function(e,t,n,i){this.scene.annotationInstance.renderer.draw.shape.line.EdgePolyline(e,this.pGraph.styleComponent.renderStyle,this.p0.vec.x,this.p0.vec.y,this.p1.vec.x,this.p1.vec.y,!1,!1,1,1,n,this.isSelected)}},{key:"DrawLineHover",value:function(e,t,n,i){n||i?(this.scene.annotationInstance.renderer.draw.shape.line.EdgePolylineHover(e,t,this.p0.vec.x,this.p0.vec.y,this.p1.vec.x,this.p1.vec.y,this.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),n,this.isSelected),this.tOver+=.015,this.tDown1=0,this.isLeave=!0):this.tOver=0}},{key:"DrawSplineHover",value:function(e,t,n,i,a,o,r){var s=n,c=i,l=s.length;o||r?(this.scene.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode===g.k.DRAWING&&this.scene.annotationInstance.renderer.draw.shape.line.ShadowMidPointForBending(e,t,H(this.p0.vec,this.p1.vec)),this.scene.annotationInstance.renderer.draw.shape.curve.EdgeCurveQuadraticHover(e,t,s[0],s[1],c[0],c[1],s[2],s[3],this.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),o,r),this.scene.annotationInstance.renderer.draw.shape.curve.EdgeCurveQuadraticHover(e,t,s[l-2],s[l-1],c[2*l-10],c[2*l-9],s[l-4],s[l-3],1,o,r),this.tOver+=.015,this.tDown1=0,this.isLeave=!0):this.tOver=0}},{key:"DrawSpline",value:function(e,t,n,i,a,o,r){var s=n,c=i,l=s.length;this.scene.annotationInstance.renderer.draw.shape.curve.CurveQuadratic(e,t,s[0],s[1],c[0],c[1],s[2],s[3],this.isHover,this.isSelected),this.scene.annotationInstance.renderer.draw.shape.curve.CurveQuadratic(e,t,s[l-2],s[l-1],c[2*l-10],c[2*l-9],s[l-4],s[l-3],this.isHover,this.isSelected)}},{key:"ComputeVertex",value:function(e){var t=[];this.p0.weightLeft=e,this.p0.weightRight=e,t.push(this.p0.vec.x,this.p0.vec.y),this.pm.weightLeft=e,this.pm.weightRight=e,t.push(this.pm.vec.x,this.pm.vec.y),this.p1.weightLeft=e,this.p1.weightRight=e,t.push(this.p1.vec.x,this.p1.vec.y),this.arrayVertexs=t}},{key:"ComputeWeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=[e,e,e];this.arrayWeight=t}},{key:"ComputeControlPoint",value:function(){var t,n=[],i=Rn(this.arrayVertexs);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.push(a)}}catch(s){i.e(s)}finally{i.f()}for(var o=[],r=0;r<n.length-4;r+=2)o=o.concat(e.GetControlPoints(n[r],n[r+1],n[r+2],n[r+3],n[r+4],n[r+5],this.arrayWeight[r]));this.arrayControlPoint=o}},{key:"IsInsideFirstAndLastCurves",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=this.arrayVertexs,a=this.arrayControlPoint,o=0;o<1;o+=.001){var r=Math.abs(Math.pow(1-o,3))*i[0]+3*Math.pow(1-o,2)*o*a[0]+3*Math.abs(1-o)*Math.pow(o,2)*a[0]+Math.abs(Math.pow(o,3))*i[2],s=Math.abs(Math.pow(1-o,3))*i[1]+3*Math.pow(1-o,2)*o*a[1]+3*Math.abs(1-o)*Math.pow(o,2)*a[1]+Math.abs(Math.pow(o,3))*i[3],c=Math.abs(Math.pow(1-o,3))*i[2]+3*Math.pow(1-o,2)*o*a[2]+3*Math.abs(1-o)*Math.pow(o,2)*a[2]+Math.abs(Math.pow(o,3))*i[4],l=Math.abs(Math.pow(1-o,3))*i[3]+3*Math.pow(1-o,2)*o*a[3]+3*Math.abs(1-o)*Math.pow(o,2)*a[3]+Math.abs(Math.pow(o,3))*i[5],p=$(new Oe(r,s),new Oe(e,t));if(p<n)return!0;var u=$(new Oe(c,l),new Oe(e,t));if(u<n)return!0}return!1}},{key:"IsHover",get:function(){return this.isHover},set:function(e){this.isHover=e,this.p0.IsHover=e,this.pm.IsHover=e,this.p1.IsHover=e}},{key:"IsRenderable",get:function(){return this.isRenderable},set:function(e){this.isRenderable=e,this.p0.isRenderable=e,this.pm.isRenderable=e,this.p1.isRenderable=e}},{key:"IsHidden",get:function(){return this.isHidden},set:function(e){this.isHiddenPre=this.isHidden,this.isHidden=e,this.p0.IsHidden=e,this.pm.IsHidden=e,this.p1.IsHidden=e}},{key:"Visibility",get:function(){return this.visibility},set:function(e){this.visibility=e,this.p0.Visibility=0,this.pm.Visibility=0,this.p1.Visibility=0}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){this.isSelected=e,this.p0.isRenderable=e,this.pm.isRenderable=e,this.p1.isRenderable=e}},{key:"IsSelectable",get:function(){return this.isSelectable},set:function(e){this.isSelectable=e,this.p0.isSelectable=e,this.pm.isSelectable=e,this.p1.isSelectable=e}}]),e}();function Tn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}Object(u.a)(Dn,"isLeave",!1),Object(u.a)(Dn,"tOver",0),Object(u.a)(Dn,"tDown1",0);var Mn=function(){function e(t,n,i){Object(o.a)(this,e),this.scene=t,this.type=g.j.APOINT,this.v=new Oe(n.x,n.y),this.UpdateGoeVec(),this.t=0,this.isRender=!1,this.renderStyleNode=new Bt,this.InitStyle(i)}return Object(r.a)(e,[{key:"InitStyle",value:function(e){e===g.j.POLYLINE_BENDING?Bt.UpdateRenderStylePolylineNode(this.renderStyleNode,this.scene.annotationInstance.customization.themeCurrent):e===g.j.POLYGON_GRAPH&&Bt.UpdateRenderStylePolygonNode(this.renderStyleNode,this.scene.annotationInstance.customization.themeCurrent)}},{key:"Move",value:function(e,t){this.v.x=e,this.v.y=t}},{key:"Update",value:function(){this.UpdateScreenVec()}},{key:"Render",value:function(e){this.isRender&&(this.t+=.01,this.Update(),this.RenderPost(e))}},{key:"RenderPost",value:function(e){this.scene.annotationInstance.renderer.draw.shape.node.NodeStart(e,this.renderStyleNode,this.v.x,this.v.y,1,this.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.t))}},{key:"UpdateGoeVec",value:function(){var e=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(this.v.x,this.v.y);this.v.long=e[0],this.v.lat=e[1],this.v.proX=e[2],this.v.proY=e[3]}},{key:"UpdateScreenVec",value:function(){var e=[];e=(this.scene.annotationInstance.implementations.versionJSAPI,this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(this.v.proX,this.v.proY)),this.v.x=e[0],this.v.y=e[1]}}]),e}(),An=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Tn()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e,t,a){var r;return Object(o.a)(this,i),(r=n.call(this,e,t,a)).type=g.j.AMIDPOINT,r}return Object(r.a)(i,[{key:"RenderPost",value:function(e){this.scene.annotationInstance.renderer.draw.shape.node.NodeMidStart(e,this.renderStyleNode,this.v.x,this.v.y,this.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.t))}}]),i}(Mn),Nn=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;Object(o.a)(this,e),this.scene=t,this.type=n,this.constraintLength=i,this.isConstraintDrawing=0!==i,this.ps=[],this.psMid=[],this.renderStyle=new Bt,this.InitStyle(n)}return Object(r.a)(e,[{key:"InitStyle",value:function(e){e===g.j.POLYLINE_BENDING?Bt.UpdateRenderStylePolyline(this.renderStyle,this.scene.annotationInstance.customization.themeCurrent):e===g.j.POLYGON_GRAPH&&Bt.UpdateRenderStylePolygon(this.renderStyle,this.scene.annotationInstance.customization.themeCurrent)}},{key:"GetVecs",value:function(){for(var e=[],t=1;t<this.ps.length;++t){var n=this.ps[t].v,i=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(n.x,n.y);n.long=i[0],n.lat=i[1],e.push(n)}var a=new Oe(this.MouseVec.x,this.MouseVec.y),o=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(a.x,a.y);return a.long=o[0],a.lat=o[1],e.push(a),ye(e,2)}},{key:"GetVecsVis",value:function(){for(var e=[],t=1;t<this.ps.length;++t){var n=this.ps[t].v;e.push(n)}return e}},{key:"Add",value:function(e){var t=new Mn(this.scene,new Oe(e.x,e.y),this.type);this.ps.push(t),this.ps.length>2?(this.ps[this.ps.length-1].isRender=!0,this.MouseVec=new Oe(this.ps[this.ps.length-1].v.x,this.ps[this.ps.length-1].v.y),this.AddMid(this.ps[this.ps.length-2].v,this.ps[this.ps.length-1].v)):(this.ps[0].isRender=!0,this.MouseVec=new Oe(this.ps[this.ps.length-1].v.x,this.ps[this.ps.length-1].v.y))}},{key:"MouseMove",value:function(e,t){this.MouseVec.x=e,this.MouseVec.y=t}},{key:"Undo",value:function(){if(this.ps.length<3)return this.scene.listAPolylineGraphShadow=void 0,void this.scene.annotationInstance.activeCommandController.SetActiveCommand(g.b.SELECT);this.ps.pop(),this.psMid.pop()}},{key:"Render",value:function(e){if(this.Update(),this.RenderPLine(e),this.RenderNode(e),this.scene.annotationInstance.activeCommandController.acProperties.showUnit){var t=this.GetVecs();t&&(this.dimension.RenderLength(e,!1,t),this.dimension.RenderTotalLength(e,t))}}},{key:"AddMid",value:function(e,t){var n=H(e,t),i=new An(this.scene,new Oe(n.x,n.y),this.type);i.isRender=!0,this.psMid.push(i)}},{key:"Update",value:function(){for(var e=this.ps.length;e--;)this.ps[e].Update();for(e=this.psMid.length;e--;)this.psMid[e].Update()}},{key:"RenderPLine",value:function(e){this.type===g.j.POLYLINE_BENDING?this.scene.annotationInstance.renderer.draw.shape.line.PolylineShadow(e,this.renderStyle,this.GetVecsVis(),this.MouseVec,this.type):this.type===g.j.POLYGON_GRAPH&&this.scene.annotationInstance.renderer.draw.shape.line.PolygonShadow(e,this.renderStyle,this.GetVecsVis(),this.MouseVec,this.type)}},{key:"RenderNode",value:function(e){for(var t=this.ps.length;t--;)this.ps[t].Render(e)}}]),e}();function Ln(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Gn=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Ln()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).renderStyle=new Bt,t.renderStyleNode=new Bt,t.UpdateStyle(),t}return Object(r.a)(i,[{key:"UpdateStyle",value:function(){if(Bt.UpdateRenderStylePolyline(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent),Bt.UpdateRenderStylePolylineNode(this.renderStyleNode,this.geo.scene.annotationInstance.customization.themeCurrent),this.geo.edges)for(var e=0;e<this.geo.edges.length;++e)this.geo.edges[e].p0.styleComponent.UpdateStyleForNode(this.renderStyleNode),this.geo.edges[e].pm.styleComponent.UpdateStyleForNode(this.renderStyleNode),this.geo.edges[e].p1.styleComponent.UpdateStyleForNode(this.renderStyleNode)}}]),i}(Vt);function _n(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Bn=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(_n()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).host=e,t}return Object(r.a)(i,[{key:"RenderPost",value:function(e){if(!this.host.isRemove&&this.host.isRenderable){if(this.interpolateColor.Update(),this.host.ComputeCenterVec(),this.timer.UpdatePopupSummery(),this.host.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.isViewChanging)for(var t=0;t<this.host.edges.length;++t)this.host.edges[t].UpdateGoeVec();this.host.UpdateProjection(),this.RenderPostGeometry(e),this.RenderPostGeometryDuplication(e)}}},{key:"RenderPostGeometry",value:function(e){this.host.scene.annotationInstance.activeCommandController.acProperties.showUnit&&(this.host.isHover||this.host.isUnderConstruction)&&this.host.dimension.RenderLength(e,!1,this.host.GetVecs());for(var t=this.host.edges.length,n=0;n<t;++n)this.host.edges[n].RenderPostHover(e);for(var i=0;i<t;++i)this.host.edges[i].RenderPost(e)}},{key:"RenderPostGeometryDuplication",value:function(e){if(this.host.vecOthers&&(this.host.wrapping.isIntersectLeft||this.host.wrapping.isIntersectRight)&&(this.host.scene.annotationInstance.activeCommandController.acProperties.showUnit&&this.host.vecOthers&&(this.host.isHover||this.host.isUnderConstruction)&&(this.host.dimension.RenderLength(e,!1,this.host.vecOthers),this.host.dimension.RenderTotalLength(e,this.host.vecOthers)),this.host.vecOthers&&this.host.vecOthers.length>0&&this.host.vecOthers.length>0&&(Dn.RenderEdge(this.host.scene,e,this.host.styleComponent.renderStyle,this.host.vecOthers,this.host.isHover,this.host.isSelected,this.host.isUndo,this.host.isGrayColor,this.host.visibility,this.host.hashColor),(this.host.isHover||this.host.isSelected||this.host.scene.annotationInstance.interactionMode)&&(this.host.scene.annotationInstance.interactionMode,g.k.DRAWING)),this.host.vecOthers&&this.host.vecOthers.length>0&&this.host.vecOthers.length>0&&(Dn.RenderEdge(this.host.scene,e,this.host.styleComponent.renderStyle,this.host.vecOthers,this.host.isHover,this.host.isSelected,this.host.isUndo,this.host.isGrayColor,this.host.visibility,this.host.hashColor),(this.host.isHover||this.host.isSelected)&&this.host.scene.annotationInstance.interactionMode===g.k.DRAWING))){for(var t=1;t<this.host.vecOthers.length;t+=2)this.host.scene.annotationInstance.renderer.draw.shape.node.NodeMidHover(e,this.host.styleComponent.renderStyleNode,this.host.vecOthers[t].x,this.host.vecOthers[t].y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver));for(var n=[],i=0;i<this.host.vecOthers.length-2;i+=2)n.push(this.host.vecOthers[i]);n.push(this.host.vecOthers[this.host.vecOthers.length-1]),this.host.scene.annotationInstance.renderer.draw.shape.area.PolygonByVecNode(e,this.host.styleComponent.renderStyleNode,n,this.host.scaleForRender,!1,1)}}}]),i}(Yt);function Wn(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return Vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vn(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Fn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Un=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Fn()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e,t){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.j.POLYLINE_BENDING,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];Object(o.a)(this,i),a=n.call(this,e),Object(u.a)(Object(s.a)(a),"torVisMidPt",10),Object(u.a)(Object(s.a)(a),"vecSelected",-1),a.type=r,a.isUnderConstruction=!1,a.isSelectable=!0,a.isRenderable=!0,a.isUndo=c,a.isPath=!1,a.InitComponent(),a.CheckIsClosed(t);var p=a.ComputeNode(t,l);return a.ComputeEdge(p),a.ComputeCenterVec(),a.InitVecsHistory(),a.isMoved=!0,a.InitPolylineGraph(),a}return Object(r.a)(i,null,[{key:"FindAtPoint",value:function(e,t){for(var n=e.listAPolylineGraphWrapper.length-1;n>=0;--n)if(e.listAPolylineGraphWrapper[n].isSelectable&&e.listAPolylineGraphWrapper[n].IsMouseInside(t.x,t.y))return e.listAPolylineGraphWrapper[n]}},{key:"GetLengthSelection",value:function(e){for(var t=e.listAPolylineGraphWrapper.length,n=0;t--;)e.listAPolylineGraphWrapper[t].IsSelected&&(n+=1);return n}},{key:"ComputeOver",value:function(e,t){var n=this.FindAtPoint(e,t);void 0!==n&&(n.isHover=!0)}},{key:"ComputeVectorsForBuild",value:function(){}},{key:"FromJSON",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[],r=0;r<t.nodes.length;r+=2){var s=e.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(t.nodes[r].proX,t.nodes[r].proY),c=new Oe(s[0],s[1]);c.proX=t.nodes[r].proX,c.proY=t.nodes[r].proY,c.proZ=t.nodes[r].proZ,c.lat=t.nodes[r].lat,c.long=t.nodes[r].long,c.ele=t.nodes[r].ele,o.push(c)}var l=new i(e,o,g.j.POLYLINE_BENDING,n,!0);l.type=g.j[t.type],l.id=a?e.GetUUID():t.id,l.IsSelectable=!0,l.isUnderConstruction=!1,l.IsHover=!1;for(var p=1,u=0;u<l.edges.length;++u){var d=t.nodes[p],h=e.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(d.proX,d.proY);l.edges[u].pm.vec.x=h[0],l.edges[u].pm.vec.y=h[1],l.edges[u].pm.UpdateGoeVec(),l.edges[u].pm.UpdateScreenVec(),l.edges[u].CheckIsCurved(),p+=2}return l.isHidden=t.isHidden,t.isHidden?l.visibility=0:l.visibility=1,l.wrapping.InitProjectionShapesFromJSON(l.GetVecs()),l.wrapping.UpdateProjection(l.GetVecs()),l.ComputeCenterVec(),l.InitVecsHistory(),n||e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(l.ToJSON()),l}},{key:"GetLine",value:function(e){}},{key:"GetLineByPt",value:function(e){}},{key:"MouseDown",value:function(e,t){void 0!==e.listAPolylineGraphShadow&&e.listAPolylineGraphShadow.ps.length>0&&e.listAPolylineGraphShadow.Add(new Oe(t.x,t.y))}},{key:"MouseLeftClick",value:function(e,t){void 0===e.capture&&(void 0===e.listAPolylineGraphShadow&&(e.listAPolylineGraphShadow=new Nn(e,g.j.POLYLINE_BENDING),e.listAPolylineGraphShadow.Add(new Oe(t.x,t.y)),e.listAPolylineGraphShadow.Add(new Oe(t.x,t.y))),e.annotationInstance.implementations.app.model.ioWrapper.eventInteraction.isEnableZoomByDoubleClick=!1)}},{key:"MouseMove",value:function(e,t){if(void 0!==e.listAPolylineGraphShadow){if(e.annotationInstance.activeCommandController.acProperties.pressShift){var n=e.listAPolylineGraphShadow.ps[e.listAPolylineGraphShadow.ps.length-1];Z(n.v,new Oe(t.x,t.y))>20&&e.listAPolylineGraphShadow.Add(new Oe(t.x,t.y))}e.listAPolylineGraphShadow.ps.length>1&&e.listAPolylineGraphShadow.MouseMove(t.x,t.y)}}},{key:"MouseDoubleClick",value:function(e,t){if(void 0!==e.listAPolylineGraphShadow){if(e.annotationInstance.activeCommandController.IsTouchEvent){if(e.listAPolylineGraphShadow.ps.length>1){var n=e.listAPolylineGraphShadow.GetVecs();n&&((n=n.slice(0,n.length-1))?(i.GetPolyline(e,n),e.listAPolylineGraphShadow=void 0,e.annotationInstance.activeCommandController.GoToACMode()):(e.listAPolylineGraphShadow=void 0,e.annotationInstance.activeCommandController.GoToACMode()))}}else if(e.listAPolylineGraphShadow.ps.length>1){var a=e.listAPolylineGraphShadow.GetVecs();a?(i.GetPolyline(e,a),e.listAPolylineGraphShadow=void 0,e.annotationInstance.activeCommandController.GoToACMode()):(e.listAPolylineGraphShadow=void 0,e.annotationInstance.activeCommandController.GoToACMode())}e.annotationInstance.implementations.app.model.ioWrapper.eventInteraction.isEnableZoomByDoubleClick=!0}}},{key:"Undo",value:function(e,t){void 0!==e.listAPolylineGraphShadow&&e.listAPolylineGraphShadow.Undo()}},{key:"DoneByKeyboard",value:function(e){if(void 0!==e.listAPolylineGraphShadow){var t=e.listAPolylineGraphShadow.GetVecs();t?(i.GetPolyline(e,t),e.listAPolylineGraphShadow=void 0,e.annotationInstance.activeCommandController.GoToACMode()):(e.listAPolylineGraphShadow=void 0,e.annotationInstance.activeCommandController.GoToACMode())}}},{key:"Cancel",value:function(e){void 0!==e.listAPolylineGraphShadow&&(e.listAPolylineGraphShadow=void 0)}},{key:"GetPolyline",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!(t.length<2)){if(!(n&&Z(t[0],t[t.length-1])<10))return e.listAPolylineGraphShadow=void 0,new i(e,t,g.j.POLYLINE_BENDING,!1,!0);Pn.GetPolygonbyVecs(e,t)}}}]),Object(r.a)(i,[{key:"InitPolylineGraph",value:function(){this.wrapping=new Ct(this,this.GetVecs()),this.dimension=new Et(this),this.isUndo||this.scene.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(this.ToJSON()),this.scene.AddAPolylineGraphWrapper(this)}},{key:"InitComponent",value:function(){this.styleComponent=new Gn(this),this.renderer=new Bn(this)}},{key:"Move",value:function(e,t){if(!this.isRemove&&this.isRenderable&&!this.isHidden){this.ComputeCenterVec();for(var n=e-this.vec.x,i=t-this.vec.y,a=0;a<this.edges.length;++a)this.edges[a].p0.vec.x+=n,this.edges[a].p0.vec.y+=i,this.edges[a].p0.UpdateGoeVec(),this.edges[a].pm.vec.x+=n,this.edges[a].pm.vec.y+=i,this.edges[a].pm.UpdateGoeVec(),this.edges[a].p1.vec.x+=n,this.edges[a].p1.vec.y+=i,this.edges[a].p1.UpdateGoeVec()}}},{key:"ComputeCenterVec",value:function(){for(var e=[],t=0;t<this.edges.length;++t)e.push(this.edges[t].p0.vec,this.edges[t].pm.vec,this.edges[t].p1.vec);this.vec=xe(e);var n=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(this.vec.x,this.vec.y);this.vec.long=n[0],this.vec.lat=n[1],this.vec.proX=n[2],this.vec.proY=n[3]}},{key:"ComputeEdge",value:function(e){this.edges=[];for(var t=0;t<e.length-1;++t)this.edges.push(this.AddEdge(e[t],e[t+1]))}},{key:"AddEdge",value:function(e,t){var n=H(e.vec,t.vec),i=new $t(this.scene,n.x,n.y,0,!1,g.j.AMIDPOINT);return new Dn(this.scene,this,e,i,t)}},{key:"GetNodePopup",value:function(){if(0!==this.edges.length){for(var e=this.edges[0].p0,t=Number.MAX_SAFE_INTEGER,n=0;n<this.edges.length;++n)this.edges[n].p0.vec.x<t&&(e=this.edges[n].p0,t=this.edges[n].p0.vec.x),this.edges[n].pm.vec.x<t&&(e=this.edges[n].pm,t=this.edges[n].pm.vec.x),this.edges[n].p1.vec.x<t&&(e=this.edges[n].p1,t=this.edges[n].p1.vec.x);return e}}},{key:"ComputeNode",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[];if(t)for(var i=0;i<e.length;++i){var a=new $t(this.scene,e[i].x,e[i].y);a.type=g.j.ANODE,a.edges.push(this),a.isUnderConstruction=!1,n.push(a)}else for(var o=0;o<e.length;++o){var r=$t.GetNodeFromScreenPos(this.scene,e[o]);r.type=g.j.ANODE,r.isUnderConstruction=!1,r.edges.push(this),n.push(r)}return n}},{key:"RemoveAndAppendEdge",value:function(e,t){var n=this.edges.indexOf(e);this.edges.splice(n,1);for(var i=0;i<t.length;++i)this.edges.splice(n,0,t[i])}},{key:"RemoveEdge",value:function(e){this.edges.splice(this.edges.indexOf(e),1)}},{key:"RemovePt",value:function(e){}},{key:"Remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.isRemove&&this.isRenderable&&!this.isHidden)if(this.scene.Capture&&this.scene.Capture.type===g.j.ANODE){var t=this.scene.Capture;if(t.aEdges[1]&&t.aEdges[0]){var n=t.aEdges[0].p0===t?t.aEdges[0].p1:t.aEdges[0].p0,i=t.aEdges[1].p0===t?t.aEdges[1].p1:t.aEdges[1].p0,a=[];n.aEdges.forEach((function(e){e.p0!==t&&e.p1!==t&&a.push(e)})),n.aEdges=a,a=[],i.aEdges.forEach((function(e){e.p0!==t&&e.p1!==t&&a.push(e)})),i.aEdges=a;var o=this.edges.lastIndexOf(t.aEdges[0]),r=this.edges.lastIndexOf(t.aEdges[1]),s=this.AddEdge(n,i),c=o<r?o:r;this.edges.splice(c,0,s),t.aEdges[0].pm.DeepRemove(),t.aEdges[1].pm.DeepRemove(),this.edges.splice(this.edges.indexOf(t.aEdges[0]),1),this.edges.splice(this.edges.indexOf(t.aEdges[1]),1)}else if(t.aEdges[0]){var l=t.aEdges[0].p0===t?t.aEdges[0].p1:t.aEdges[0].p0,p=[];l.aEdges.forEach((function(e){e.p0!==t&&e.p1!==t&&p.push(e)})),l.aEdges=p,t.aEdges[0].pm.DeepRemove(),this.edges.splice(this.edges.indexOf(t.aEdges[0]),1)}if(t.DeepRemove(),this.ReBuildConnection(),this.ComputeCenterVec(),this.InitVecsHistory(),e){var u=this.ToJSON();u&&this.scene.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack([u])}}else{for(var d=this.edges.length;d--;)this.edges[d].Remove();if(e){var h=this.ToJSON();h&&this.scene.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack([h])}this.DeepRemove()}}},{key:"DeepRemove",value:function(){this.isSelectable=!1,this.isRenderable=!1,this.HidePopUpSummary(),this.scene.RemoveAPolylineGraphWrapper(this),this.scene.RemoveGeometry(this)}},{key:"RemoveOrphanNode",value:function(){}},{key:"CheckMinPt",value:function(){}},{key:"UpdateGeometryByProjectedpos",value:function(e){}},{key:"GetLog",value:function(){return this.type}},{key:"GoToBlackhole",value:function(){this.isSelectable=!1,this.needBlackhole=!0,this.edges.forEach((function(e){e.p0.GoToBlackhole(),e.pm.GoToBlackhole(),e.p1.GoToBlackhole()}))}},{key:"IsMouseInside",value:function(e,t){for(var n=!1,i=0;i<this.edges.length;++i)this.edges[i].IsMouseInside(e,t)&&(n=!0);if(this.vecOthers)for(var a=this.vecOthers[0].x-this.edges[0].p0.vec.x,o=0;o<this.edges.length;++o)this.edges[o].IsMouseInside(e-a,t)&&(n=!0);for(var r=0;r<this.edges.length;++r)this.edges[r].IsHover=n;return n}},{key:"IsMouseInsideNode",value:function(e,t){return!1}},{key:"HasSamePtWtithCapture",value:function(){for(var e=0;e<this.edges.length;++e){if(this.edges[e].p0===this.scene.capture)return!0;if(this.edges[e].pm===this.scene.capture)return!0;if(this.edges[e].p1===this.scene.capture)return!0}return!1}},{key:"TranslateByMouseEventData",value:function(e){if(!this.HasSamePtWtithCapture()){this.ResetVisitPt();for(var t=0;t<this.edges.length;++t)this.edges[t].TranslateByMouseEventData(e)}}},{key:"TranslateByMouseEventDataForTextLeaderline",value:function(e){}},{key:"MouseLeftClick",value:function(){this.scene.annotationInstance.geometryCommon.gcmdProcessing.RemoveAllPopup(),this.ShowPopupSummary()}},{key:"Translate",value:function(e,t){}},{key:"GetVecForSnapping",value:function(){}},{key:"Hide",value:function(){}},{key:"UpdateProjection",value:function(){if(!this.isUnderConstruction){this.scene.annotationInstance.activeCommandController.acProperties.isPanning&&this.wrapping.UpdateProjectionShapes(this.GetVecs());var e=this.GetVecs();this.wrapping.isIntersectLeft?this.vecOthers=this.wrapping.ComputeWrappingDuplication(e,1):this.wrapping.isIntersectRight&&(this.vecOthers=this.wrapping.ComputeWrappingDuplication(e,-1));var t=this.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent.dirctionTo;if(this.ResetVisitPt(),this.wrapping.needWrappingToRight&&0<t)for(var n=0;n<this.edges.length;++n){var i=this.edges[n];this.WrappingProjectedPosShape(i.p0,1),this.WrappingProjectedPosShape(i.pm,1),this.WrappingProjectedPosShape(i.p1,1)}else if(this.wrapping.needWrappingToLeft&&t<0)for(var a=0;a<this.edges.length;++a){var o=this.edges[a];this.WrappingProjectedPosShape(o.p0,-1),this.WrappingProjectedPosShape(o.pm,-1),this.WrappingProjectedPosShape(o.p1,-1)}this.wrapping.needWrappingToLeft=!1,this.wrapping.needWrappingToRight=!1}}},{key:"WrappingProjectedPosShape",value:function(e,t){if(!e.isVisited){var n=this.scene.annotationInstance.geometryCommon.gcmdSupporting.WrappingProjectedPosShape(e.vec.proX,e.vec.proY,t);e.vec.proX=n[0],e.vec.proY=n[1],e.isVisited=!0}}},{key:"RenderPost",value:function(e){this.renderer.RenderPost(e)}},{key:"GetVecs",value:function(){for(var e=[],t=0;t<this.edges.length;++t)t===this.edges.length-1?(e.push(this.edges[t].p0.vec),e.push(this.edges[t].pm.vec),e.push(this.edges[t].p1.vec)):(e.push(this.edges[t].p0.vec),e.push(this.edges[t].pm.vec));return e}},{key:"CheckIsClosed",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?Z(e[0],e[e.length-1])<20&&(this.isClosed=!0,this.type=g.j.POLYGON):this.isClosed=!1}},{key:"GetNode",value:function(){for(var e=[],t=0;t<this.edges.length;++t)t===this.edges.length-1?(e.push(this.edges[t].p0.vec),e.push(this.edges[t].pm.vec),e.push(this.edges[t].p1.vec)):(e.push(this.edges[t].p0.vec),e.push(this.edges[t].pm.vec));return e}},{key:"ToJSON",value:function(){var e=new rt(this.id,this.type,this.isSelected,this.isHover,this.isHidden);return e.PushNode(this.GetNode()),e}},{key:"DeepCopy",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=this.ToJSON();if(n){var a=i.FromJSON(this.scene,n,!1,!0);return a.Move(e,t),a}}},{key:"ReBuildConnection",value:function(){this.edges.length>0&&(this.edges=this.ReorderEdges())}},{key:"UpdatePostTransformation",value:function(){for(var e=0;e<this.edges.length;++e)this.edges[e].UpdateMidVec()}},{key:"ResetVisitPt",value:function(){this.edges.forEach((function(e){e.p0.isVisited=!1,e.pm.isVisited=!1,e.p1.isVisited=!1}))}},{key:"ReorderEdges",value:function(){for(var e=[this.edges[0]],t=1e3,n=this.edges[0],i=1===this.edges[0].p0.aEdges.length?this.edges[0].p1:this.edges[0].p0;i&&2===i.aEdges.length&&(n=i.aEdges[0]===n?i.aEdges[1]:i.aEdges[0],e.push(n),i=i===n.p0?n.p1:n.p0,!(--t<0)););return e}},{key:"CheckAttachedTextleaderline",value:function(){var e,t=Wn(this.edges);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.p0.textLeaderline&&n.p0.textLeaderline.leaderline){if(Z(n.p0.vec,n.p0.textLeaderline.leaderline.v2)<5)return!0;n.p0.textLeaderline.attachedShape=void 0,n.p0.textLeaderline=void 0}if(n.pm.textLeaderline&&n.pm.textLeaderline.leaderline){if(Z(n.pm.vec,n.pm.textLeaderline.leaderline.v2)<5)return!0;n.pm.textLeaderline.attachedShape=void 0,n.pm.textLeaderline=void 0}if(n.p1.textLeaderline&&n.p1.textLeaderline.leaderline){if(Z(n.p1.vec,n.p1.textLeaderline.leaderline.v2)<5)return!0;n.p1.textLeaderline.attachedShape=void 0,n.p1.textLeaderline=void 0}}}catch(i){t.e(i)}finally{t.f()}return!1}},{key:"IsHidden",get:function(){return this.isHidden},set:function(e){this.isHiddenPre=this.isHidden,this.isHidden=e;for(var t=0;t<this.edges.length;++t)this.edges[t].IsHidden=e,this.edges[t].Visibility=0;this.scene.annotationInstance.io.eventListenerAnnotation.HideStack(this.ToJSON())}},{key:"IsHover",get:function(){return this.isHover},set:function(e){if(this.isHover=e,this.isHover&&!this.isHoverPre?this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()):!this.isHover&&this.isHoverPre&&this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()),this.isHoverPre=this.isHover,!this.isSelected)for(var t=this.edges.length;t--;)this.edges[t].IsRenderable=e,this.edges[t].IsHover=e;e||(this.needEmitHoverPost=!0,this.HidePopUpSummary())}},{key:"IsSelectable",get:function(){return this.isSelectable},set:function(e){this.isSelectable=e;for(var t=0;t<this.edges.length;++t)this.edges[t].IsSelectable=e}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){if(!this.isRemove&&!this.isHidden){this.isSelected=e;var t,n=Wn(this.edges);try{for(n.s();!(t=n.n()).done;){t.value.IsSelected=e}}catch(s){n.e(s)}finally{n.f()}var i,a=!0,o=Wn(this.edges);try{for(o.s();!(i=o.n()).done;){var r=i.value;if(r.p0.isSelected){a=!1;break}if(r.pm.isSelected){a=!1;break}if(r.p1.isSelected){a=!1;break}}}catch(s){o.e(s)}finally{o.f()}a&&this.scene.annotationInstance.io.eventListenerAnnotation.SelectionStack(this.ToJSON())}}}]),i}(wt);Object(u.a)(Un,"isSplit",!0);var zn=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"unit",Ze.KM),Object(u.a)(this,"unitEnumInt",0),Object(u.a)(this,"shiftDTMode",0),Object(u.a)(this,"isHiddenLog",!0),Object(u.a)(this,"isTextEditing",!1),Object(u.a)(this,"insideMap",!1),Object(u.a)(this,"needPostACMode",!0),Object(u.a)(this,"isReturn",!1),Object(u.a)(this,"isShortCutActive",!0),Object(u.a)(this,"showUnit",!1),Object(u.a)(this,"showTooltip",!0),Object(u.a)(this,"showActiveCommandChain",!0),Object(u.a)(this,"isDrawing",!1),Object(u.a)(this,"isSmartSelectionWhenDrawing",!1),Object(u.a)(this,"snap",!1),Object(u.a)(this,"hasMultiSel",!1),Object(u.a)(this,"activateCollsion",!1),Object(u.a)(this,"isDragging",!1),Object(u.a)(this,"isUp",!1),Object(u.a)(this,"isViewChanging",!1),Object(u.a)(this,"isDown",!1),Object(u.a)(this,"isClick",!1),Object(u.a)(this,"clickMenu",!1),Object(u.a)(this,"showTooltipPoint",!1),Object(u.a)(this,"hasHovering",!1),Object(u.a)(this,"isActivateSnapping",!1),Object(u.a)(this,"needDuplicateByAlt",!1),Object(u.a)(this,"deselectNeeded",!0),Object(u.a)(this,"needrePositionTextLeaderLine",!0),Object(u.a)(this,"needHideTextLeaderLine",!0),Object(u.a)(this,"needCollisionDetection",!0),Object(u.a)(this,"pressKey",!1),Object(u.a)(this,"pressShift",!1),Object(u.a)(this,"pressESC",!1),Object(u.a)(this,"pressAltKey",!1),Object(u.a)(this,"accentColor",!1),Object(u.a)(this,"isScaleDynamicRender",!0),Object(u.a)(this,"isActiveCluster",!1),Object(u.a)(this,"_needExecuteOptimizer",!1),Object(u.a)(this,"_optimizerTextleaderline",g.p.NONE),Object(u.a)(this,"_optimizerPoint",g.o.NONE),Object(u.a)(this,"_pressCtrlKey",!1),Object(u.a)(this,"_isPanning",!1),Object(u.a)(this,"_isZooming",!1),Object(u.a)(this,"_extentChanging",!1),this.activeCommandController=t}return Object(r.a)(e,[{key:"optimizerPoint",set:function(e){this._optimizerPoint=e,this.activeCommandController.annotationInstance.renderer.optimizer.typePoint=e},get:function(){return this._optimizerPoint}},{key:"optimizerTextleaderline",set:function(e){this._optimizerTextleaderline=e,this.activeCommandController.annotationInstance.renderer.optimizer.typeTextleaderline=e},get:function(){return this._optimizerTextleaderline}},{key:"pressCtrlKey",set:function(e){this._pressCtrlKey=e,!1===e&&this.activeCommandController.annotationInstance.geometryCommon.gcmdProcessing.PolygonGraphResetForSplit()},get:function(){return this._pressCtrlKey}},{key:"isPanning",set:function(e){this._isPanning=e},get:function(){return this._isPanning}},{key:"isZooming",set:function(e){this._isZooming=e,e||(this.needExecuteOptimizer=!0)},get:function(){return this._isZooming}},{key:"mapScale",get:function(){return this.activeCommandController.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.scale}},{key:"needExecuteOptimizer",set:function(e){this._needExecuteOptimizer=e},get:function(){return this._needExecuteOptimizer}},{key:"extentChanging",set:function(e){this.activeCommandController.ShiftRenderLoop(!e),this._extentChanging=e},get:function(){return this._extentChanging}},{key:"zoom",get:function(){if(this.activeCommandController.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView)return this.activeCommandController.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.zoom}}]),e}(),Hn=function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,null,[{key:"MouseDown",value:function(e,t){var n=e.annotationInstance.geometryCommon.gcmdProcessing.FindAtPoint(t);n&&n.Remove()}},{key:"MouseMove",value:function(e){}}]),e}(),Yn=function(){function e(t){Object(o.a)(this,e),this.scene=t,this.vecs=[],this.isWindow=!1,this.t=0,this.vecTooltip=new Oe(0,0)}return Object(r.a)(e,[{key:"ComputeRecPtsWithMouse",value:function(e,t){}},{key:"AddVecs",value:function(e,t){this.vecs.push(new Oe(e,t))}},{key:"Remove",value:function(){}},{key:"Cancel",value:function(){void 0!==e.construction&&e.construction.Remove(),e.construction=void 0}},{key:"DrawShadow",value:function(t){void 0===e.construction||e.construction.ComputeRecPtsWithMouse(t.x,t.y)}},{key:"MouseDown",value:function(t){this.v0=new Oe(t.x,t.y),this.vecTooltip.x=-100,this.vecTooltip.y=-100,e.isTooltipRenderable=!1}},{key:"MouseDrag",value:function(t){e.isLasso?this.AddVecs(t.x,t.y):this.v1=new Oe(t.x,t.y)}},{key:"MouseUp",value:function(t){if(this.scene.annotationInstance.geometryCommon.gcmdProcessing.DeSelecteCaptureObjects(),e.isLasso){if(this.vecs.length<1)return;this.scene.annotationInstance.geometryCommon.gcmdProcessing.SelecteObjectsByVecs(ye(this.vecs)),this.vecs=[]}else{if(void 0===this.v0||void 0===this.v1)return;this.scene.annotationInstance.geometryCommon.gcmdProcessing.SelecteObjectsByVecs(me(this.v0,this.v1),this.isWindow),this.v0=void 0,this.v1=void 0}}},{key:"MouseMove",value:function(e){this.vecTooltip.x=e.x,this.vecTooltip.y=e.y}},{key:"Render",value:function(t){if(e.isTooltipRenderable,e.isLasso){if(this.vecs.length<1)return;this.scene.annotationInstance.renderer.draw.shape.selection.SelectionLasso(t,this.vecs,!1,this.t)}else{if(void 0===this.v0||void 0===this.v1)return;this.v0.x>this.v1.x||this.v0.y>this.v1.y?this.isWindow=!0:this.isWindow=!1,this.scene.annotationInstance.renderer.draw.shape.selection.Selection(t,this.v0,this.v1,this.isWindow,this.t)}this.t+=.5}}]),e}();Object(u.a)(Yn,"isLasso",!1),Object(u.a)(Yn,"isTooltipRenderable",!1);var Kn=function(){function e(t){Object(o.a)(this,e),this.mc=t}return Object(r.a)(e,[{key:"MouseDownPre",value:function(e){}},{key:"MouseLeftClickPre",value:function(e){}},{key:"MouseMiddleClickPre",value:function(e){}},{key:"MouseRightClickPre",value:function(e){}},{key:"MouseUpPre",value:function(e){}},{key:"MouseDoubleClickPre",value:function(e){}},{key:"MouseMovePre",value:function(e){}},{key:"MouseDragPre",value:function(e){}},{key:"MouseWheelPre",value:function(e){}}]),e}();function Xn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Jn=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Xn()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),t=n.call(this,e),Object(u.a)(Object(s.a)(t),"_frameMove",0),t}return Object(r.a)(i,[{key:"MouseDownPre",value:function(e){this.mc.acWrapper.acs.type!==g.b.SELECT&&this.mc.acWrapper.acs.acProperties.isActivateSnapping&&this.mc.UpdatePosBySnapping(e);var t=this.mc.acWrapper.acs.annotationInstance,n=t.geometryCommon.gcmdSupporting.ToMap(e.x,e.y);if(this.mc.mDownPos.x=e.x,this.mc.mDownPos.y=e.y,this.mc.mDownPos.long=n[0],this.mc.mDownPos.lat=n[1],t.renderer.blackhole.stopRender=!1,t.activeCommandController.acProperties.isDown=!0,t.activeCommandController.acProperties.isUp=!1,this.mc.acWrapper.acs.acProperties.needExecuteOptimizer=!0,t.activeCommandController.acProperties.clickMenu)t.activeCommandController.acProperties.clickMenu=!1;else if(!this.mc.acWrapper.acs.acProperties.isReturn&&t.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.mouseDown)if(e.isDown=!0,t.geometryCommon.gcmdProcessing.ResetTranformation(),t.geometryCommon.gcmdProcessing.HasMultiSel(),t.activeCommandController&&(t.activeCommandController.acProperties.isTextEditing=!1,t.scene.captureText&&(t.io.eventListenerAnnotation.EndEditingText(t.scene.captureText.ToJSON()),t.scene.captureText=void 0)),t.implementations.app.model.appCoreWrapper.appAccessibility.mode!==g.k.INTERACTIVE_VIEWER){if(this.mc.acWrapper.acs.acProperties.isSmartSelectionWhenDrawing||!this.mc.acWrapper.acs.acProperties.isDrawing){var i=t.geometryCommon.gcmdProcessing.FindAtPoint(e),a=t.geometryCommon.gcmdProcessing.FindAtPointFromAPoint(e),o=t.geometryCommon.gcmdProcessing.FindAtPointFromPolygonGraph(e);o&&(a=o),i&&i.type===g.j.TEXT_LEADERLINE?t.implementations.app.model.ioWrapper.eventInteraction.isEnableZoomByDoubleClick=!1:t.implementations.app.model.ioWrapper.eventInteraction.isEnableZoomByDoubleClick=!0,void 0!==i&&i.type!==g.j.POLYGON_MULTIPLE?(i.type===g.j.TEXT_LEADERLINE&&a&&(i=a),t.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan=!1,t.scene.Capture&&(this.mc.acWrapper.acs.acProperties.pressShift||t.scene.Capture.IsSelected&&(t.scene.Capture.IsSelected=!1),t.scene.Capture.isCaptured=!1),t.scene.Capture=i,t.scene.Capture.isCaptured=!0):(t.scene.Capture&&(t.scene.Capture.isCaptured=!1),t.scene.Capture=void 0)}if(t.scene.Capture&&t.scene.Capture.type===g.j.AMIDPOINT){var r=t.scene.Capture;r.aEdges[0]&&r.aEdges[0].CheckIsSnapStraight()}this.mc.acWrapper.MouseDown(e)}else this.mc.acWrapper.acs.IsTouchEvent&&(this.mc.acWrapper.acs.type,g.b.SELECT)}},{key:"MouseLeftClickPre",value:function(e){if(this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isClick=!0,!this.mc.acWrapper.acs.acProperties.isReturn&&this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.clickLeft&&(e=this.mc.acWrapper.acs.CommonEvent(e),!this.mc.acWrapper.acs.annotationInstance.renderer.optimizer.MouseClick(e.x,e.y))){if(this.mc.acWrapper.acs.type===g.b.SELECT&&this.mc.acWrapper.acs.acProperties.isActivateSnapping&&this.mc.UpdatePosBySnapping(e),!this.mc.acWrapper.acs.acProperties.pressShift&&this.mc.acWrapper.acs.acProperties.deselectNeeded?this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.DeSelecteCaptureObjects():this.mc.acWrapper.acs.acProperties.deselectNeeded=!0,this.mc.acWrapper.acs.acProperties.isSmartSelectionWhenDrawing||!this.mc.acWrapper.acs.acProperties.isDrawing){var t=this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.FindAtPoint(e);t&&(this.mc.acWrapper.acs.annotationInstance.scene.Capture=t),this.mc.acWrapper.acs.type===g.b.APOINT||this.mc.acWrapper.acs.type===g.b.POINT_ICON||this.mc.acWrapper.acs.type===g.b.POINT_NUMBERED||this.mc.acWrapper.acs.type===g.b.POINT_REGULAR||this.mc.acWrapper.acs.type===g.b.TEXT?void 0!==this.mc.acWrapper.acs.annotationInstance.scene.capture&&(this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.POINT_ICON||this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.POINT_NUMBERED||this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.POINT_REGULAR||this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.TEXT||this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.APOINT||this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.CNODE?this.mc.acWrapper.acs.annotationInstance.scene.capture.IsSelected=!this.mc.acWrapper.acs.annotationInstance.scene.capture.IsSelected:(this.mc.acWrapper.acs.annotationInstance.scene.capture.isCaptured=!1,this.mc.acWrapper.acs.annotationInstance.scene.capture=void 0)):(void 0!==this.mc.acWrapper.acs.annotationInstance.scene.capture&&(this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.TEXT||(this.mc.acWrapper.acs.annotationInstance.scene.capture.IsSelected=!this.mc.acWrapper.acs.annotationInstance.scene.capture.IsSelected,this.mc.acWrapper.acs.annotationInstance.scene.capture.MouseLeftClick(e.x,e.y))),this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode===g.k.INTERACTIVE_VIEWER&&this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.ProcessSelectionViewerMode())}if(this.mc.acWrapper.acs.type!==g.b.NONE&&this.mc.acWrapper.acs.type!==g.b.SELECT&&this.mc.acWrapper.acs.type!==g.b.SELECT_LASSO&&this.mc.acWrapper.acs.type!==g.b.SELECT_RECT||this.mc.acWrapper.acs.annotationInstance.renderer.UpdateMouseHover(e),!this.mc.acWrapper.acs.annotationInstance.scene.capture)for(var n=0;n<this.mc.acWrapper.acs.annotationInstance.scene.listAPoint.length;++n)this.mc.acWrapper.acs.annotationInstance.scene.listAPoint[n].isSelectedSole=!1;this.mc.acWrapper.acs.annotationInstance.scene.Capture||this.mc.acWrapper.acs.type!==g.b.SELECT||this.mc.acWrapper.acs.annotationInstance.io.eventListenerAnnotation.PointerOutStack(),this.mc.acWrapper.MouseLeftClick(e)}}},{key:"MouseMiddleClickPre",value:function(e){this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.clickMiddle&&(e=this.mc.acWrapper.acs.CommonEvent(e),this.mc.acWrapper.MouseMiddleClick(e))}},{key:"MouseRightClickPre",value:function(e){this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.clickRight&&(e=this.mc.acWrapper.acs.CommonEvent(e),this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.RightClickOnHoverGeo(e),this.mc.acWrapper.MouseRightClick(e))}},{key:"MouseUpPre",value:function(e){if(this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan=!0,this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isDragging=!1,this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isUp=!0,this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isDown=!1,this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isClick=!1,e.isDown=!1,this.mc.acWrapper.acs.annotationInstance.scene.capture){var t=this.mc.acWrapper.acs.annotationInstance.scene.capture.GetVecForSnapping();t&&this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.AutoSnapping(t)}this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.DoneDragging(),this.mc.acWrapper.acs.annotationInstance.scene.Capture&&(this.mc.acWrapper.acs.annotationInstance.scene.Capture.type,g.j.ANODE),this.mc.acWrapper.acs.acProperties.isDrawing&&(this.mc.acWrapper.acs.annotationInstance.scene.Capture=void 0),this.mc.acWrapper.acs.annotationInstance.scene.Capture&&this.mc.acWrapper.acs.annotationInstance.scene.Capture.MouseUp(),this.mc.acWrapper.acs.annotationInstance.renderer.objectSnapping.UpdateGhostSnappingVec(void 0),this.mc.acWrapper.acs.ActiveCursor(),this.mc.acWrapper.MouseUp(e),this.MouseUpPost(e)}},{key:"MouseUpPost",value:function(e){this.mc.mDownPos.long!==e.long&&this.mc.mDownPos.lat!==e.lat&&this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.TransformStack()}},{key:"MouseDoubleClickPre",value:function(e){if(this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.clickDouble){e=this.mc.acWrapper.acs.CommonEvent(e);var t=this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.FindAtPoint(e);void 0!==t&&(t.type===g.j.TEXT_LEADERLINE||t.MouseDoubleClick()),this.mc.acWrapper.MouseDoubleClick(e)}}},{key:"MouseMovePre",value:function(e){this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.mouseMove&&(e.isDown?this.MouseDragPre(e):this._frameMove++%2===0&&(e=this.mc.acWrapper.acs.CommonEvent(e),this.mc.acWrapper.acs.acProperties.isDrawing||this.mc.acWrapper.acs.type!==g.b.SELECT&&this.mc.acWrapper.acs.type!==g.b.NONE||this.mc.acWrapper.acs.annotationInstance.renderer.UpdateMouseHover(e),3===this.mc.acWrapper.acs.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.canvasLoopController.level&&this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdSupporting.RenderForce(),this.mc.acWrapper.acs.ActiveCursor(),this.mc.acWrapper.MouseMove(e),this.mc.acWrapper.acs.annotationInstance.renderer.optimizer.MouseMove(e.x,e.y)))}},{key:"MouseDragPre",value:function(e){if(this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.mouseDrag){if(e=this.mc.acWrapper.acs.CommonEvent(e),this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isDragging=!0,!0===e.isDown&&!this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan){if(this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.MoveMidPoint(e),this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.MoveSelectedGeo(e),this.mc.acWrapper.acs.annotationInstance.scene.capture&&(this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.APOINT||this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.CNODE)){var t=this.mc.acWrapper.acs.annotationInstance.scene.capture;t.Move(e.x,e.y),t.UpdateGoeVec();for(var n=0;n<this.mc.acWrapper.acs.annotationInstance.scene.listAPoint.length;++n)t.vec===this.mc.acWrapper.acs.annotationInstance.scene.listAPoint[n].vec&&this.mc.acWrapper.acs.annotationInstance.scene.listAPoint[n].UpdateGoeVec()}this.mc.acWrapper.acs.acProperties.pressAltKey&&this.mc.acWrapper.acs.acProperties.needDuplicateByAlt&&(this.mc.acWrapper.acs.acProperties.needDuplicateByAlt=!1)}if(this.mc.acWrapper.acs.annotationInstance.scene.capture){var i=this.mc.acWrapper.acs.annotationInstance.scene.capture.GetVecForSnapping();i&&this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.AutoSnappingTracker(i)}3===this.mc.acWrapper.acs.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.canvasLoopController.level&&this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdSupporting.RenderForce(),this.mc.acWrapper.acs.activeCursor.Dragging(),this.mc.acWrapper.acs.acProperties.needExecuteOptimizer=!0,this.mc.acWrapper.MouseDrag(e)}}}]),i}(Kn);function Zn(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return qn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qn(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Qn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var $n=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Qn()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),t=n.call(this,e),Object(u.a)(Object(s.a)(t),"_frameMove",0),t}return Object(r.a)(i,[{key:"MouseDownPre",value:function(e){if(this.mc.acWrapper.acs.acProperties.isActivateSnapping&&this.mc.UpdatePosBySnapping(e),this.mc.mDownPos[0]=e.x,this.mc.mDownPos[1]=e.y,this.mc.acWrapper.acs.annotationInstance.renderer.blackhole.stopRender=!1,this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isDown=!0,this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isUp=!1,this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.clickMenu)this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.clickMenu=!1;else if(!this.mc.acWrapper.acs.acProperties.isReturn&&this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.mouseDown)if(e.isDown=!0,this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.HasMultiSel(),this.mc.acWrapper.acs.annotationInstance.activeCommandController&&(this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isTextEditing=!1,this.mc.acWrapper.acs.annotationInstance.scene.captureText&&(this.mc.acWrapper.acs.annotationInstance.io.eventListenerAnnotation.EndEditingText(this.mc.acWrapper.acs.annotationInstance.scene.captureText.ToJSON()),this.mc.acWrapper.acs.annotationInstance.scene.captureText=void 0)),this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode!==g.k.INTERACTIVE_VIEWER){if(this.mc.acWrapper.acs.acProperties.isSmartSelectionWhenDrawing||!this.mc.acWrapper.acs.acProperties.isDrawing){var t=this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.FindAtPoint(e),n=this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.FindAtPointFromAPoint(e),i=this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.FindAtPointFromPolygonGraph(e);i&&(n=i),t&&t.type===g.j.TEXT_LEADERLINE?this.mc.acWrapper.acs.annotationInstance.implementations.app.model.ioWrapper.eventInteraction.isEnableZoomByDoubleClick=!1:this.mc.acWrapper.acs.annotationInstance.implementations.app.model.ioWrapper.eventInteraction.isEnableZoomByDoubleClick=!0,void 0!==t&&t.type!==g.j.POLYGON_MULTIPLE?(t.type===g.j.TEXT_LEADERLINE&&n&&(t=n),this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan=!1,this.mc.acWrapper.acs.annotationInstance.scene.Capture&&(this.mc.acWrapper.acs.acProperties.pressShift||this.mc.acWrapper.acs.annotationInstance.scene.Capture.IsSelected&&(this.mc.acWrapper.acs.annotationInstance.scene.Capture.IsSelected=!1),this.mc.acWrapper.acs.annotationInstance.scene.Capture.isCaptured=!1),this.mc.acWrapper.acs.annotationInstance.scene.Capture=t,this.mc.acWrapper.acs.annotationInstance.scene.Capture.isCaptured=!0):(this.mc.acWrapper.acs.annotationInstance.scene.Capture&&(this.mc.acWrapper.acs.annotationInstance.scene.Capture.isCaptured=!1),this.mc.acWrapper.acs.annotationInstance.scene.Capture=void 0)}this.mc.acWrapper.MouseDown(e)}else this.mc.acWrapper.acs.IsTouchEvent&&(this.mc.acWrapper.acs.type,g.b.SELECT)}},{key:"MouseLeftClickPre",value:function(e){if(this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isClick=!0,!this.mc.acWrapper.acs.acProperties.isReturn&&this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.clickLeft){if(e=this.mc.acWrapper.acs.CommonEvent(e),this.mc.acWrapper.acs.type===g.b.SELECT&&this.mc.acWrapper.acs.acProperties.isActivateSnapping&&this.mc.UpdatePosBySnapping(e),this.mc.acWrapper.acs.acProperties.pressShift||this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.DeSelecteCaptureObjects(),this.mc.acWrapper.acs.acProperties.isSmartSelectionWhenDrawing||!this.mc.acWrapper.acs.acProperties.isDrawing){var t=this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.FindAtPoint(e);t&&(this.mc.acWrapper.acs.annotationInstance.scene.Capture=t),this.mc.acWrapper.acs.type===g.b.APOINT||this.mc.acWrapper.acs.type===g.b.POINT_ICON||this.mc.acWrapper.acs.type===g.b.POINT_NUMBERED||this.mc.acWrapper.acs.type===g.b.POINT_REGULAR||this.mc.acWrapper.acs.type===g.b.TEXT?void 0!==this.mc.acWrapper.acs.annotationInstance.scene.capture&&(this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.POINT_ICON||this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.POINT_NUMBERED||this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.POINT_REGULAR||this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.TEXT||this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.APOINT||this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.CNODE?this.mc.acWrapper.acs.annotationInstance.scene.capture.IsSelected=!this.mc.acWrapper.acs.annotationInstance.scene.capture.IsSelected:(this.mc.acWrapper.acs.annotationInstance.scene.capture.isCaptured=!1,this.mc.acWrapper.acs.annotationInstance.scene.capture=void 0)):void 0!==this.mc.acWrapper.acs.annotationInstance.scene.capture&&(this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.TEXT||(this.mc.acWrapper.acs.annotationInstance.scene.capture.IsSelected=!this.mc.acWrapper.acs.annotationInstance.scene.capture.IsSelected,this.mc.acWrapper.acs.annotationInstance.scene.capture.MouseLeftClick(e.x,e.y)))}if(this.mc.acWrapper.acs.type!==g.b.NONE&&this.mc.acWrapper.acs.type!==g.b.SELECT&&this.mc.acWrapper.acs.type!==g.b.SELECT_LASSO&&this.mc.acWrapper.acs.type!==g.b.SELECT_RECT||this.mc.acWrapper.acs.annotationInstance.renderer.UpdateMouseHover(e),!this.mc.acWrapper.acs.annotationInstance.scene.capture)for(var n=0;n<this.mc.acWrapper.acs.annotationInstance.scene.listAPoint.length;++n)this.mc.acWrapper.acs.annotationInstance.scene.listAPoint[n].isSelectedSole=!1;this.mc.acWrapper.acs.annotationInstance.scene.Capture||this.mc.acWrapper.acs.type!==g.b.SELECT||this.mc.acWrapper.acs.annotationInstance.io.eventListenerAnnotation.PointerOutStack(),this.mc.acWrapper.MouseLeftClick(e)}}},{key:"MouseMiddleClickPre",value:function(e){this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.clickMiddle&&(e=this.mc.acWrapper.acs.CommonEvent(e),this.mc.acWrapper.MouseMiddleClick(e))}},{key:"MouseRightClickPre",value:function(e){this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.clickRight&&(e=this.mc.acWrapper.acs.CommonEvent(e),this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.RightClickOnHoverGeo(e),this.mc.acWrapper.MouseRightClick(e))}},{key:"MouseUpPre",value:function(e){if(this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan=!0,this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isDragging=!1,this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isUp=!0,this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isDown=!1,this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isClick=!1,e.isDown=!1,this.mc.acWrapper.acs.annotationInstance.scene.capture){var t=this.mc.acWrapper.acs.annotationInstance.scene.capture.GetVecForSnapping();t&&this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.AutoSnapping(t)}if(this.mc.mDownPos[0]!==e.x&&this.mc.mDownPos[1]!==e.y&&this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.TransformStack(),this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.DoneDragging(),this.mc.acWrapper.acs.annotationInstance.scene.Capture&&(this.mc.acWrapper.acs.annotationInstance.scene.Capture.type,g.j.ANODE),this.mc.acWrapper.acs.acProperties.isDrawing&&(this.mc.acWrapper.acs.annotationInstance.scene.Capture=void 0),this.mc.acWrapper.acs.annotationInstance.scene.capture&&this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.TEXT_LEADERLINE){for(var n=0;n<this.mc.acWrapper.acs.annotationInstance.scene.listATextleaderlineWrapper.length;++n)this.mc.acWrapper.acs.annotationInstance.scene.listATextleaderlineWrapper[n].enableDrag=!0;if(this.mc.acWrapper.acs.annotationInstance.scene.Capture&&this.mc.acWrapper.acs.annotationInstance.scene.Capture.type===g.j.TEXT_LEADERLINE)this.mc.acWrapper.acs.annotationInstance.scene.Capture.MouseUp()}this.mc.acWrapper.acs.annotationInstance.renderer.objectSnapping.UpdateGhostSnappingVec(void 0),this.mc.acWrapper.acs.ActiveCursor(),this.mc.acWrapper.MouseUp(e)}},{key:"MouseDoubleClickPre",value:function(e){if(this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.clickDouble){e=this.mc.acWrapper.acs.CommonEvent(e);var t=this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.FindAtPoint(e);void 0!==t&&(t.type===g.j.TEXT_LEADERLINE||t.MouseDoubleClick()),this.mc.acWrapper.MouseDoubleClick(e)}}},{key:"MouseMovePre",value:function(e){this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.mouseMove&&(e.isDown?this.MouseDragPre(e):this._frameMove++%2===0&&(e=this.mc.acWrapper.acs.CommonEvent(e),this.mc.acWrapper.acs.acProperties.isDrawing||this.mc.acWrapper.acs.type!==g.b.SELECT&&this.mc.acWrapper.acs.type!==g.b.NONE||this.mc.acWrapper.acs.annotationInstance.renderer.UpdateMouseHover(e),3===this.mc.acWrapper.acs.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.canvasLoopController.level&&this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdSupporting.RenderForce(),this.mc.acWrapper.acs.ActiveCursor(),this.mc.acWrapper.MouseMove(e)))}},{key:"MouseDragPre",value:function(e){if(this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.mouseDrag){if(e=this.mc.acWrapper.acs.CommonEvent(e),this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isDragging=!0,!0===e.isDown&&!this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan){if(this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.MoveMidPoint(e),this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.MoveSelectedGeo(e),this.mc.acWrapper.acs.annotationInstance.scene.capture&&(this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.APOINT||this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.CNODE)){var t=this.mc.acWrapper.acs.annotationInstance.scene.capture;t.Move(e.x,e.y),t.UpdateGoeVec();for(var n=0;n<this.mc.acWrapper.acs.annotationInstance.scene.listAPoint.length;++n)t.vec===this.mc.acWrapper.acs.annotationInstance.scene.listAPoint[n].vec&&this.mc.acWrapper.acs.annotationInstance.scene.listAPoint[n].UpdateGoeVec()}if(this.mc.acWrapper.acs.acProperties.pressAltKey&&this.mc.acWrapper.acs.acProperties.needDuplicateByAlt){if(this.mc.acWrapper.acs.annotationInstance.scene.Capture){var i=this.mc.acWrapper.acs.annotationInstance.scene.Capture.DeepCopy(this.mc.acWrapper.acs.annotationInstance.scene.Capture.vec.x,this.mc.acWrapper.acs.annotationInstance.scene.Capture.vec.y);this.mc.acWrapper.acs.annotationInstance.scene.Capture.IsHover=!1,this.mc.acWrapper.acs.annotationInstance.scene.Capture.IsSelected=!1,i&&(i.IsHover=!0,this.mc.acWrapper.acs.annotationInstance.scene.Capture=i)}var a=this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.HasMultiSel();if(void 0!==a){var o,r=Zn(a);try{for(r.s();!(o=r.n()).done;){var s=o.value;s.IsSelected=!1,s.IsHover=!1;var c=s.DeepCopy(s.vec.x,s.vec.y);c&&(c.IsSelected=!0,c.IsHover=!0)}}catch(p){r.e(p)}finally{r.f()}}this.mc.acWrapper.acs.acProperties.needDuplicateByAlt=!1}}if(this.mc.acWrapper.acs.annotationInstance.scene.capture){var l=this.mc.acWrapper.acs.annotationInstance.scene.capture.GetVecForSnapping();l&&this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.AutoSnappingTracker(l)}3===this.mc.acWrapper.acs.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.canvasLoopController.level&&this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdSupporting.RenderForce(),this.mc.acWrapper.acs.activeCursor.Dragging(),this.mc.acWrapper.MouseDrag(e)}}}]),i}(Kn);function ei(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return ti(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ti(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ni(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ii=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(ni()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),t=n.call(this,e),Object(u.a)(Object(s.a)(t),"_frameMove",0),t}return Object(r.a)(i,[{key:"MouseDownPre",value:function(e){if(this.mc.mDownPos[0]=e.x,this.mc.mDownPos[1]=e.y,this.mc.acWrapper.acs.annotationInstance.renderer.blackhole.stopRender=!1,this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isDown=!0,this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isUp=!1,this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.clickMenu)this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.clickMenu=!1;else if(!this.mc.acWrapper.acs.acProperties.isReturn&&this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.mouseDown){if(e.isDown=!0,this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode===g.k.DRAWING){var t=this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.FindAtPointFromAPoint(e);t&&t.isSelected&&(this.mc.acWrapper.acs.annotationInstance.scene.Capture=t,this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan=!1)}this.mc.acWrapper.MouseDown(e)}}},{key:"MouseLeftClickPre",value:function(e){if(this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isClick=!0,!this.mc.acWrapper.acs.acProperties.isReturn&&this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.clickLeft){if(e=this.mc.acWrapper.acs.CommonEvent(e),this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode===g.k.DRAWING);else{if(this.mc.acWrapper.acs.acProperties.isSmartSelectionWhenDrawing||!this.mc.acWrapper.acs.acProperties.isDrawing){var t=this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.FindAtPoint(e);if(!t)return;this.mc.acWrapper.acs.annotationInstance.scene.Capture=t,this.mc.acWrapper.acs.type===g.b.APOINT||this.mc.acWrapper.acs.type===g.b.POINT_ICON||this.mc.acWrapper.acs.type===g.b.POINT_NUMBERED||this.mc.acWrapper.acs.type===g.b.POINT_REGULAR||this.mc.acWrapper.acs.type===g.b.TEXT?void 0!==this.mc.acWrapper.acs.annotationInstance.scene.capture&&(this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.POINT_ICON||this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.POINT_NUMBERED||this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.POINT_REGULAR||this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.TEXT||this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.APOINT||this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.CNODE?this.mc.acWrapper.acs.annotationInstance.scene.capture.IsSelected=!this.mc.acWrapper.acs.annotationInstance.scene.capture.IsSelected:(this.mc.acWrapper.acs.annotationInstance.scene.capture.isCaptured=!1,this.mc.acWrapper.acs.annotationInstance.scene.capture=void 0)):void 0!==this.mc.acWrapper.acs.annotationInstance.scene.capture&&(this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.TEXT||(this.mc.acWrapper.acs.annotationInstance.scene.capture.IsSelected=!this.mc.acWrapper.acs.annotationInstance.scene.capture.IsSelected,this.mc.acWrapper.acs.annotationInstance.scene.capture.MouseLeftClick(e.x,e.y)))}if(this.mc.acWrapper.acs.type!==g.b.NONE&&this.mc.acWrapper.acs.type!==g.b.SELECT&&this.mc.acWrapper.acs.type!==g.b.SELECT_LASSO&&this.mc.acWrapper.acs.type!==g.b.SELECT_RECT||this.mc.acWrapper.acs.annotationInstance.renderer.UpdateMouseHover(e),!this.mc.acWrapper.acs.annotationInstance.scene.capture)for(var n=0;n<this.mc.acWrapper.acs.annotationInstance.scene.listAPoint.length;++n)this.mc.acWrapper.acs.annotationInstance.scene.listAPoint[n].isSelectedSole=!1}this.mc.acWrapper.acs.annotationInstance.scene.Capture||this.mc.acWrapper.acs.type!==g.b.SELECT||this.mc.acWrapper.acs.annotationInstance.io.eventListenerAnnotation.PointerOutStack(),this.mc.acWrapper.MouseLeftClick(e)}}},{key:"MouseMiddleClickPre",value:function(e){this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.clickMiddle&&(e=this.mc.acWrapper.acs.CommonEvent(e),this.mc.acWrapper.MouseMiddleClick(e))}},{key:"MouseRightClickPre",value:function(e){this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.clickRight&&(e=this.mc.acWrapper.acs.CommonEvent(e),this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.RightClickOnHoverGeo(e),this.mc.acWrapper.MouseRightClick(e))}},{key:"MouseUpPre",value:function(e){if(this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan=!0,this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isDragging=!1,this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isUp=!0,this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isDown=!1,this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isClick=!1,e.isDown=!1,this.mc.mDownPos[0]!==e.x&&this.mc.mDownPos[1]!==e.y&&this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.TransformStack(),this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.DoneDragging(),this.mc.acWrapper.acs.annotationInstance.scene.Capture&&(this.mc.acWrapper.acs.annotationInstance.scene.Capture.type,g.j.ANODE),this.mc.acWrapper.acs.acProperties.isDrawing&&(this.mc.acWrapper.acs.annotationInstance.scene.Capture=void 0),this.mc.acWrapper.acs.annotationInstance.scene.capture&&this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.TEXT_LEADERLINE){for(var t=0;t<this.mc.acWrapper.acs.annotationInstance.scene.listATextleaderlineWrapper.length;++t)this.mc.acWrapper.acs.annotationInstance.scene.listATextleaderlineWrapper[t].enableDrag=!0,this.mc.acWrapper.acs.annotationInstance.scene.listATextleaderlineWrapper[t].EmitTransformationStackRightNode();if(this.mc.acWrapper.acs.annotationInstance.scene.Capture&&this.mc.acWrapper.acs.annotationInstance.scene.Capture.type===g.j.TEXT_LEADERLINE)this.mc.acWrapper.acs.annotationInstance.scene.Capture.MouseUp()}this.mc.acWrapper.acs.ActiveCursor(),this.mc.acWrapper.MouseUp(e)}},{key:"MouseDoubleClickPre",value:function(e){if(this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.clickDouble){e=this.mc.acWrapper.acs.CommonEvent(e);var t=this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.FindAtPoint(e);void 0!==t&&(t.type===g.j.TEXT_LEADERLINE||t.MouseDoubleClick()),this.mc.acWrapper.MouseDoubleClick(e)}}},{key:"MouseMovePre",value:function(e){this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.mouseMove&&(e.isDown?this.MouseDragPre(e):this._frameMove++%2===0&&(e=this.mc.acWrapper.acs.CommonEvent(e),this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode===g.k.DRAWING||this.mc.acWrapper.acs.acProperties.isDrawing||this.mc.acWrapper.acs.type!==g.b.SELECT&&this.mc.acWrapper.acs.type!==g.b.NONE||this.mc.acWrapper.acs.annotationInstance.renderer.UpdateMouseHover(e),3===this.mc.acWrapper.acs.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.canvasLoopController.level&&this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdSupporting.RenderForce(),this.mc.acWrapper.acs.ActiveCursor(),this.mc.acWrapper.MouseMove(e)))}},{key:"MouseDragPre",value:function(e){if(this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.mouseDrag){if(e=this.mc.acWrapper.acs.CommonEvent(e),this.mc.acWrapper.acs.annotationInstance.activeCommandController.acProperties.isDragging=!0,!0===e.isDown&&!this.mc.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan){if(this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.MoveMidPoint(e),this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.MoveSelectedGeo(e),this.mc.acWrapper.acs.annotationInstance.scene.capture&&(this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.APOINT||this.mc.acWrapper.acs.annotationInstance.scene.capture.type===g.j.CNODE)){var t=this.mc.acWrapper.acs.annotationInstance.scene.capture;t.Move(e.x,e.y),t.UpdateGoeVec();for(var n=0;n<this.mc.acWrapper.acs.annotationInstance.scene.listAPoint.length;++n)t.vec===this.mc.acWrapper.acs.annotationInstance.scene.listAPoint[n].vec&&this.mc.acWrapper.acs.annotationInstance.scene.listAPoint[n].UpdateGoeVec()}if(this.mc.acWrapper.acs.acProperties.pressAltKey&&this.mc.acWrapper.acs.acProperties.needDuplicateByAlt){if(this.mc.acWrapper.acs.annotationInstance.scene.Capture){var i=this.mc.acWrapper.acs.annotationInstance.scene.Capture.DeepCopy(this.mc.acWrapper.acs.annotationInstance.scene.Capture.vec.x,this.mc.acWrapper.acs.annotationInstance.scene.Capture.vec.y);this.mc.acWrapper.acs.annotationInstance.scene.Capture.IsHover=!1,this.mc.acWrapper.acs.annotationInstance.scene.Capture.IsSelected=!1,i&&(i.IsHover=!0,this.mc.acWrapper.acs.annotationInstance.scene.Capture=i)}var a=this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.HasMultiSel();if(void 0!==a){var o,r=ei(a);try{for(r.s();!(o=r.n()).done;){var s=o.value;s.IsSelected=!1,s.IsHover=!1;var c=s.DeepCopy(s.vec.x,s.vec.y);c&&(c.IsSelected=!0,c.IsHover=!0)}}catch(l){r.e(l)}finally{r.f()}}this.mc.acWrapper.acs.acProperties.needDuplicateByAlt=!1}}3===this.mc.acWrapper.acs.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.canvasLoopController.level&&this.mc.acWrapper.acs.annotationInstance.geometryCommon.gcmdSupporting.RenderForce(),this.mc.acWrapper.acs.activeCursor.Dragging(),this.mc.acWrapper.MouseDrag(e)}}}]),i}(Kn),ai=function(){function e(t){switch(Object(o.a)(this,e),Object(u.a)(this,"mDownPos",new Oe(-1,-1)),this.acWrapper=t,this.acWrapper.acs.annotationInstance.implementations.app.APP){case g.c.ANNOTATION_MAP:this.MouseEvent=new Jn(this);break;case g.c.EXPRESS_DRAWING:this.MouseEvent=new $n(this);break;case g.c.GUIDED_TOUR:this.MouseEvent=new ii(this)}}return Object(r.a)(e,[{key:"MouseEventController",value:function(e){if(!(this.acWrapper.acs.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.canvasLoopController.level<3)&&(4===this.acWrapper.acs.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.canvasLoopController.level&&(this.acWrapper.acs.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.canvasLoopController.stop=!1),this.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone||!this.IsOutsideExtent(e)))switch(e.CLICK_TYPE){case g.e.DOWN:this.MouseEvent.MouseDownPre(e),this.MouseDownPost(e);break;case g.e.UP:this.MouseEvent.MouseUpPre(e),this.MouseUpPost(e);break;case g.e.LEFT:this.MouseEvent.MouseLeftClickPre(e),this.MouseLeftClickPost(e);break;case g.e.MIDDLE:this.MouseEvent.MouseMiddleClickPre(e),this.MouseMiddleClickPost(e);break;case g.e.DOWN_RIGHT:this.MouseEvent.MouseRightClickPre(e),this.MouseRightClickPost(e);break;case g.e.DOUBLE:this.MouseEvent.MouseDoubleClickPre(e),this.MouseDoubleClickPost(e);break;case g.e.MOVE:this.MouseEvent.MouseMovePre(e),this.MouseMovePost(e);break;case g.e.DRAG:this.MouseEvent.MouseDragPre(e),this.MouseDragPost(e);break;case g.e.WHEEL:this.MouseEvent.MouseWheelPre(e),this.MouseWheelPost(e)}}},{key:"UpdatePosBySnapping",value:function(e){var t=this.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.GetPosBySnapping(e.x,e.y,20);e.x=t[0],e.y=t[1]}},{key:"IsOutsideExtent",value:function(e){var t=this.acWrapper.acs.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvasMask.width;return t>e.x||this.acWrapper.acs.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvasMask.canvas.width-t<e.x}},{key:"MouseDownPost",value:function(e){}},{key:"MouseUpPost",value:function(e){}},{key:"MouseLeftClickPost",value:function(e){}},{key:"MouseMiddleClickPost",value:function(e){}},{key:"MouseRightClickPost",value:function(e){}},{key:"MouseDoubleClickPost",value:function(e){}},{key:"MouseMovePost",value:function(e){this.acWrapper.acs.annotationInstance.implementations.app.addon}},{key:"MouseDragPost",value:function(e){}},{key:"MouseWheelPost",value:function(e){}}]),e}(),oi=function(){function e(t){Object(o.a)(this,e),this.acWrapper=t,this.shortcutExplict=new ri(this)}return Object(r.a)(e,[{key:"KeyboardEventController",value:function(e){switch(e.PRESS_TYPE){case g.q.DOWN:this.keydownPre(e);break;case g.q.UP:this.keyUpPre(e)}}},{key:"KeyboardEventControllerFromDocument",value:function(e){switch(e.PRESS_TYPE){case g.q.DOWN:this.keydownPreFromDocument(e);break;case g.q.UP:this.keyUpPreFromDocument(e)}}},{key:"keydownPre",value:function(e){if(this.acWrapper.acs.acProperties.pressKey=!0,e.hasCtrlKey&&(this.acWrapper.acs.acProperties.pressCtrlKey=!0),e.hasShiftKey&&e.hasCtrlKey&&76===e.keyCode)this.acWrapper.acs.annotationInstance.apiWrapper.environment.ShiftLog();else if(e.hasShiftKey&&e.hasCtrlKey&&32===e.keyCode)this.acWrapper.acs.annotationInstance.implementations.app.InitViewController();else if(!this.shortcutExplict.Keypress(e))if(this.acWrapper.acs.annotationInstance.implementations.app.PRODUCTION||!e.hasShiftKey||49!==e.keyCode)if(this.acWrapper.acs.annotationInstance.implementations.app.PRODUCTION||!e.hasShiftKey||50!==e.keyCode)if(this.acWrapper.acs.annotationInstance.implementations.app.PRODUCTION||!e.hasShiftKey||51!==e.keyCode)if(this.acWrapper.acs.annotationInstance.implementations.app.PRODUCTION||!e.hasShiftKey||52!==e.keyCode){if(e.hasShiftKey&&73===e.keyCode)this.acWrapper.acs.ActivecommandIconPoint();else if(49===e.keyCode?this.acWrapper.acs.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.SetLevel1():50===e.keyCode?this.acWrapper.acs.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.SetLevel2():51===e.keyCode?this.acWrapper.acs.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.SetLevel3():52===e.keyCode?this.acWrapper.acs.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.SetLevel4():53===e.keyCode?this.acWrapper.acs.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.SetLevel5():54===e.keyCode&&this.acWrapper.acs.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.SetLevel6(),this.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode===g.k.DRAWING)if(e.hasShiftKey&&8===e.keyCode||e.hasShiftKey&&e.keyCode&&46===e.keyCode)this.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.RemoveAll();else{if(8===e.keyCode||46===e.keyCode)return this.acWrapper.acs.type!==g.b.POLYLINE&&this.acWrapper.acs.type!==g.b.POLYGON&&this.acWrapper.acs.type!==g.b.CPOLYLINE&&this.acWrapper.acs.type!==g.b.CPOLYGON&&this.acWrapper.acs.type!==g.b.POLYLINE_BENDING&&this.acWrapper.acs.type!==g.b.POLYGON_GRAPH||this.acWrapper.acs.activeCommand.Undo(),this.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.RemoveAllCapturedGeoGroup(),void this.acWrapper.acs.annotationInstance.geometryCommon.gcmdSupporting.RenderForce();this.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.compileMode!==g.f.PRODUCTION&&(9===e.keyCode&&e.hasShiftKey&&(this.acWrapper.acs.acProperties.shiftDTMode++,this.acWrapper.acs.acProperties.shiftDTMode%3===0?this.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode=g.k.DRAWING:this.acWrapper.acs.acProperties.shiftDTMode%3===1?this.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode=g.k.INTERACTIVE_VIEWER:this.acWrapper.acs.acProperties.shiftDTMode%3===2&&(this.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode=g.k.OBSERVE_VIEWER),this.acWrapper.acs.SetActiveCommand(g.b.NONE),this.acWrapper.acs.annotationInstance.apiWrapper.environment.LogCommon(this.acWrapper.acs.m.x,this.acWrapper.acs.m.y)),e.hasShiftKey&&68===e.keyCode&&this.acWrapper.acs.annotationInstance.implementations.app.model.ioWrapper.Download(),e.hasShiftKey&&79===e.keyCode&&this.acWrapper.acs.annotationInstance.implementations.app.model.ioWrapper.Open(),85===e.keyCode&&this.acWrapper.acs.annotationInstance.apiWrapper.environment.ShiftUnit()),e.hasShiftKey&&(this.acWrapper.acs.acProperties.pressShift=!0),e.hasAltKey&&(this.acWrapper.acs.acProperties.pressAltKey=!0,this.acWrapper.acs.acProperties.needDuplicateByAlt=!0),(this.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode!==g.k.OBSERVE_VIEWER||this.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.keyDown)&&(71===e.keyCode&&this.acWrapper.acs.annotationInstance.apiWrapper.environment.ShiftGrid(),(this.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode!==g.k.INTERACTIVE_VIEWER||this.acWrapper.acs.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.currentAccessibility.keyDown)&&(77===e.keyCode&&this.acWrapper.acs.annotationInstance.apiWrapper.environment.ShiftMeasure(),70===e.keyCode&&this.acWrapper.acs.annotationInstance.apiWrapper.environment.ShiftMapfilter(),27===e.keyCode&&(this.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.DeSelecteCaptureObjects(),this.acWrapper.acs.acProperties.pressESC=!0,this.acWrapper.acs.GoToACMode()),83!==e.keyCode?49!==e.keyCode?(e.hasShiftKey&&65===e.keyCode&&this.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.SelecteAllObjects(),(e.hasAltKey||e.hasMetaCommand||e.hasCtrlKey)&&67===e.keyCode&&this.acWrapper.acs.annotationInstance.geometryCommon.gcmdProcessing.CopySelGeo(),((e.hasAltKey||e.hasMetaCommand||e.hasCtrlKey)&&90===e.keyCode||90===e.keyCode)&&this.acWrapper.acs.activeCommand.Undo(),(e.hasAltKey||e.hasMetaCommand||e.hasCtrlKey)&&86===e.keyCode&&(this.acWrapper.acs.annotationInstance.geometryCommon.gcmdAProcessing.PasteSelGeo(this.acWrapper.acs.annotationInstance.activeCommandController.m.x,this.acWrapper.acs.annotationInstance.activeCommandController.m.y),this.acWrapper.acs.SetActiveCommand(g.b.NONE)),this.acWrapper.keydown(e),this.acWrapper.acs.annotationInstance.geometryCommon.gcmdSupporting.RenderForce()):this.acWrapper.acs.annotationInstance.apiWrapper.environment.ToggleBorderFeaturePolygon():this.acWrapper.acs.annotationInstance.activeCommandController.acProperties.snap=!this.acWrapper.acs.annotationInstance.activeCommandController.acProperties.snap))}}else this.acWrapper.acs.annotationInstance.apiWrapper.environment.shiftActiveCluster();else this.acWrapper.acs.annotationInstance.apiWrapper.environment.ShiftScaleDynamicRender();else this.acWrapper.acs.annotationInstance.apiWrapper.environment.ShiftOptimizerTextleaderline();else this.acWrapper.acs.annotationInstance.apiWrapper.environment.ToggleDebuggerMode()}},{key:"keyUpPre",value:function(e){27===e.keyCode&&(this.acWrapper.acs.acProperties.pressESC=!1),16===e.keyCode&&(this.acWrapper.acs.acProperties.pressShift=!1),this.acWrapper.acs.acProperties.pressCtrlKey=!1,this.acWrapper.keyUp(e),this.acWrapper.acs.acProperties.pressKey=!1}},{key:"keydownPreFromDocument",value:function(e){this.acWrapper.acs.acProperties.pressShift=e.hasShiftKey,this.acWrapper.acs.acProperties.pressCtrlKey=e.hasCtrlKey}},{key:"keyUpPreFromDocument",value:function(e){this.acWrapper.acs.acProperties.pressShift=e.hasShiftKey,this.acWrapper.acs.acProperties.pressCtrlKey=e.hasCtrlKey}}]),e}(),ri=function(){function e(t){Object(o.a)(this,e),this.keyboardEventController=t}return Object(r.a)(e,[{key:"Keypress",value:function(e){var t=this.keyboardEventController.acWrapper.acs.annotationInstance.customization.shortcut.shortcutCommands[e.key.toUpperCase()];return void 0!==t&&e.hasCtrlKey===t.hasControl&&e.hasShiftKey===t.hasShift&&(this.keyboardEventController.acWrapper.acs.SetActiveCommand(t.ac),!0)}}]),e}(),si=function(){function e(t){Object(o.a)(this,e),this.acWrapper=t}return Object(r.a)(e,[{key:"TouchEventController",value:function(e){}}]),e}(),ci=function(){function e(t){Object(o.a)(this,e),this.acWrapper=t}return Object(r.a)(e,[{key:"GestureEventController",value:function(e){}}]),e}(),li=function(){function e(t){Object(o.a)(this,e),this.acs=t,this.mouseEventController=new ai(this),this.keyboardEventController=new oi(this),this.touchEventController=new si(this),this.gestureEventController=new ci(this)}return Object(r.a)(e,[{key:"MouseEventController",value:function(e){this.mouseEventController.MouseEventController(e)}},{key:"KeyboardEventController",value:function(e){this.keyboardEventController.KeyboardEventController(e)}},{key:"KeyboardEventControllerFromDocument",value:function(e){this.keyboardEventController.KeyboardEventControllerFromDocument(e)}},{key:"TouchEventController",value:function(e){this.touchEventController.TouchEventController(e)}},{key:"GestureEventController",value:function(e){this.gestureEventController.GestureEventController(e)}},{key:"MouseDown",value:function(e){}},{key:"MouseLeftClick",value:function(e){}},{key:"MouseMiddleClick",value:function(e){}},{key:"MouseRightClick",value:function(e){}},{key:"MouseDoubleClick",value:function(e){}},{key:"MouseUp",value:function(e){}},{key:"MouseMove",value:function(e){}},{key:"MouseDrag",value:function(e){}},{key:"keydown",value:function(e){}},{key:"keyUp",value:function(e){}},{key:"Undo",value:function(){}}]),e}();function pi(e){return function(){var t,n=Object(l.a)(e);if(ui()){var i=Object(l.a)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return Object(c.a)(this,t)}}function ui(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var di=function(e){Object(p.a)(n,e);var t=pi(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseLeftClick",value:function(e){}}]),n}(li),hi=function(e){Object(p.a)(n,e);var t=pi(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){Hn.MouseDown(this.acs.annotationInstance.scene,e)}},{key:"MouseMove",value:function(e){Hn.MouseMove(e)}}]),n}(li),mi=function(e){Object(p.a)(n,e);var t=pi(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){this.acs.annotationInstance.renderer.selection.MouseDown(e)}},{key:"MouseDrag",value:function(e){}},{key:"MouseUp",value:function(e){}}]),n}(li),fi=function(e){Object(p.a)(n,e);var t=pi(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){this.acs.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan=!1,this.acs.annotationInstance.geometryCommon.gcmdProcessing.DeSelecteAllObjects(),this.acs.annotationInstance.renderer.selection.MouseDown(e)}},{key:"MouseDrag",value:function(e){Yn.isLasso=!1,this.acs.annotationInstance.renderer.selection.MouseDrag(e)}},{key:"MouseUp",value:function(e){Yn.isLasso=!1,this.acs.annotationInstance.renderer.selection.MouseUp(e),this.acs.GoToACMode()}},{key:"MouseMove",value:function(e){this.acs.annotationInstance.renderer.selection.MouseMove(e)}}]),n}(li),yi=function(e){Object(p.a)(n,e);var t=pi(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){this.acs.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan=!1,this.acs.annotationInstance.geometryCommon.gcmdProcessing.DeSelecteAllObjects(),this.acs.annotationInstance.renderer.selection.MouseDown(e)}},{key:"MouseDrag",value:function(e){Yn.isLasso=!0,this.acs.annotationInstance.renderer.selection.MouseDrag(e)}},{key:"MouseUp",value:function(e){Yn.isLasso=!0,this.acs.annotationInstance.renderer.selection.MouseUp(e),this.acs.GoToACMode()}},{key:"MouseMove",value:function(e){this.acs.annotationInstance.renderer.selection.MouseMove(e)}}]),n}(fi),gi=function(e){Object(p.a)(n,e);var t=pi(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseLeftClick",value:function(e){var t=this.acs.annotationInstance.geometryCommon.gcmdProcessing.FindAtPoint(e);if(void 0===t)void 0===this.acs.annotationInstance.scene.captureForEasing||this.acs.annotationInstance.scene.captureForEasing.ActivateEasing(e,this.acs);else if(void 0===this.acs.annotationInstance.scene.captureForEasing)if(t.type===g.j.ALINE){var n=t.GetCloserNode(e.x,e.y);this.acs.annotationInstance.scene.captureForEasing=n?t:n}else this.acs.annotationInstance.scene.captureForEasing=t;else if(t.type===g.j.ALINE){var i=t.GetCloserNode(e.x,e.y);this.acs.annotationInstance.scene.captureForEasing=i?t:i}else this.acs.annotationInstance.scene.captureForEasing=t}}]),n}(li),vi=function(e){Object(p.a)(n,e);var t=pi(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseLeftClick",value:function(e){}},{key:"MouseMove",value:function(e){}}]),n}(li),bi=function(e){Object(p.a)(n,e);var t=pi(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseLeftClick",value:function(e){}},{key:"MouseMove",value:function(e){}}]),n}(li);function xi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Oi=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(xi()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).renderStyle=new Bt,t.renderStyleNode=new Bt,t.UpdateStyle(),t}return Object(r.a)(i,[{key:"UpdateStyle",value:function(){Bt.UpdateRenderStyleRPoint(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent)}}]),i}(Vt);function wi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ji=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(wi()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).host=e,t}return Object(r.a)(i,[{key:"RenderPost",value:function(e){if(this.host.inspector.Update(e),this.interpolateColor.Update(),this.host.scaleForRender=1,!this.host.isCollapse&&!(this.host.scaleForRender<.01)){var t=this.host.scene.annotationInstance.renderer.draw.shape.point;this.host.isDrag?(t.PointRegularDragBySVGPath(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tUp),!0,!0,this.host.isGrayColor,this.host.visibility,this.host.isPin,this.host.isHover,this.host.isSelected),this.tUp+=.015,this.tDown2=0):(this.host.isSelected?(t.ShadowRPoint(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.IsSelected,this.host.IsHover),t.PointRegularOverBoundingBySVGPathSelected(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),!0,!0,this.host.isGrayColor,this.host.visibility,this.host.isPin),this.tOver+=.015,this.tDown1=0,this.host.isHover?this.tOverPopupSummary+=this.host.scene.annotationInstance.renderer.dt:this.tOverPopupSummary=0,this.host.isLeave=!0):this.host.isHover?(t.ShadowRPointLight(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.host.IsSelected,this.host.IsHover),t.PointRegularOverBoundingBySVGPath(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),!0,!0,this.host.isGrayColor,this.host.visibility,this.host.isPin),this.tOver+=.015,this.tOverPopupSummary+=this.host.scene.annotationInstance.renderer.dt,this.tDown1=0,this.host.isLeave=!0):this.host.isLeave&&!this.host.isDrag?(t.PointRegularOverBoundingBySVGPath(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tDown1),!1,!0,this.host.isGrayColor,this.host.visibility,this.host.isPin),this.tDown1+=this.host.scene.annotationInstance.renderer.dt,this.tOver=this.tOverPopupSummary=0,this.tDown1>.15&&(this.host.isLeave=!1)):this.host.isDrag||(t.PointRegularOverBoundingBySVGPath(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tDown1),!1,!1,this.host.isGrayColor,this.host.visibility,this.host.isPin),this.tDown1+=this.host.scene.annotationInstance.renderer.dt,this.tOver=this.tOverPopupSummary=0),t.PointRegularDragBySVGPath(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tDown2),!1,!1,this.host.isGrayColor,this.host.visibility,this.host.isPin,this.host.isHover,this.host.isSelected),this.tUp=0,this.tDown2+=.5*this.host.scene.annotationInstance.renderer.dt),this.host.hasPopup&&this.host.IsMove&&this.host.UpdateDivPos(),this.t+=this.host.scene.annotationInstance.renderer.dt,this.OffScreenRender()}}},{key:"OffScreenRender",value:function(){this.host.scene.annotationInstance.renderer.offscreen.RPointOffscreen(this.host.scene.annotationInstance.renderer.ctxOffscreen,this.host.hashColor,this.host.vec,this.host.scaleForRender)}}]),i}(Yt),Ci=function(){function e(t){Object(o.a)(this,e),this.geo=t}return Object(r.a)(e,[{key:"TranslateByMouseEventData",value:function(e){}},{key:"Translate",value:function(e,t){}},{key:"Move",value:function(e,t){}}]),e}();function ki(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Si=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(ki()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).geo=e,t}return Object(r.a)(i,[{key:"TranslateByMouseEventData",value:function(e){if(this.geo.isDrag=!0,this.geo.scene.annotationInstance.activeCommandController.acProperties.pressShift){var t=this.geo.vec,n=se(new Oe(e.x-t.x,e.y-t.y).Normalize(),new Oe(1,0,0));0<n&&n<.8||2.45<n&&n<3.15?(this.geo.vec.x+=e.x-e.preX,this.geo.vec.y=t.y):(this.geo.vec.x=t.x,this.geo.vec.y+=e.y-e.preY)}else this.geo.vec.x+=e.x-e.preX,this.geo.vec.y+=e.y-e.preY;this.geo.UpdatePostTransformation()}},{key:"Translate",value:function(e,t){}}]),i}(Ci),Ii=function(){function e(t){Object(o.a)(this,e),this.geo=t}return Object(r.a)(e,[{key:"IsMouseInside",value:function(e,t){return!(this.geo.isRemove||!this.geo.isRenderable||this.geo.isHidden)&&(!this.geo.isCollapse&&this.geo.scene.annotationInstance.geometryCommon.gcmdProcessing.IsMouseInsideByOffScreen(e,t+0,this.geo.hashColor))}},{key:"GetLog",value:function(){return""}},{key:"Hide",value:function(){}}]),e}();function Pi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ri=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Pi()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,p=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g.j.POINT_REGULAR;arguments.length>6&&void 0!==arguments[6]&&arguments[6],arguments.length>7&&void 0!==arguments[7]&&arguments[7],arguments.length>8&&void 0!==arguments[8]&&arguments[8],arguments.length>9&&void 0!==arguments[9]?arguments[9]:g.l.ROUND;return Object(o.a)(this,i),(t=n.call(this,e,a,r,l,u)).isUndo=p,t.InitComponent(),e.AddRPoint(Object(s.a)(t)),t.isUndo?Object(c.a)(t):(e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(t.ToJSON()),t)}return Object(r.a)(i,null,[{key:"FindAtPoint",value:function(e,t,n){for(var i=e.listRPoint.length-1;i>=0;--i)if(e.listRPoint[i].isSelectable&&e.listRPoint[i].IsMouseInside(t,n))return e.listRPoint[i]}},{key:"GetLengthSelection",value:function(e){for(var t=e.listRPoint.length,n=0;t--;)e.listRPoint[t].IsSelected&&(n+=1);return n}},{key:"RemoveAllCapturedGeo",value:function(e){for(var t=e.listRPoint,n=0;n<t.length;++n)!0===e.listRPoint[n].isSelected&&e.listRPoint[n].Remove()}},{key:"DeSelecteCaptureObjects",value:function(e){for(var t=0;t<e.listRPoint.length;++t)e.listRPoint[t].isSelected=!1}},{key:"MoveSelectedGeo",value:function(e,t){for(var n=0;n<e.listRPoint.length;++n)!0!==e.listRPoint[n].isSelected||e.listRPoint[n].isHover||e.listRPoint[n].TranslateByMouseEventData(t),!0===e.listRPoint[n].isHover&&e.listRPoint[n].TranslateByMouseEventData(t)}},{key:"FromJSON",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(t.nodes[0].proX,t.nodes[0].proY),r=new i(e,o[0],o[1],0,n);return r.type=g.j[t.type],r.isHidden=t.isHidden,r.id=a?e.GetUUID():t.id,t.isHidden?r.visibility=0:r.visibility=1,t.data.scale&&r.InitScale(t.data.scale),r.UpdateScreenVecByProjectedPos(),r.InitVecsHistory(),r}},{key:"MouseRightClick",value:function(e){}},{key:"MouseMiddleClick",value:function(e){}},{key:"MouseLeftClick",value:function(e,t){void 0===e.capture&&(new i(e,t.x,t.y,0).Dummy(),e.annotationInstance.activeCommandController.acProperties.pressShift||e.annotationInstance.activeCommandController.GoToACMode())}},{key:"OnMouseMove",value:function(e){}},{key:"MouseDrag",value:function(e){}},{key:"MouseUp",value:function(e){At.UpdatePathFinding()}}]),Object(r.a)(i,[{key:"InitComponent",value:function(){this.styleComponent=new Oi(this),this.renderer=new ji(this),this.transformation=new Si(this),this.interaction=new Ii(this)}},{key:"Init",value:function(){this.isGeoPos=!0,this.edges=[],this.isPointMid=!1}},{key:"GetParentType",value:function(){return"ANNOTATION_POINT_REGULAR"}},{key:"RenderPost",value:function(e){isNaN(this.vec.x)||(this.renderer.RenderPost(e),this.scene.annotationInstance.implementations.app.INSPECTION&&this.collision.Render(e))}},{key:"IsMouseInside",value:function(e,t){return this.interaction.IsMouseInside(e,t)}},{key:"GetLog",value:function(){return this.interaction.GetLog()}},{key:"Hide",value:function(){this.interaction.Hide()}},{key:"TranslateByMouseEventData",value:function(e){this.isMovable&&(this.isRemove||!this.isRenderable||this.isHidden||(this.transformation.TranslateByMouseEventData(e),this.textLeaderline&&(this.textLeaderline.TranslateByMouseEventData(e),this.textLeaderline&&this.textLeaderline.leaderline&&(this.textLeaderline.leaderline.v2.x=this.vec.x,this.textLeaderline.leaderline.v2.y=this.vec.y)),this.UpdateGoeVec()))}},{key:"Translate",value:function(e,t){this.transformation.Translate(e,t)}},{key:"ShowPopupSummary",value:function(){var e=this;this.hasPopup||this.isGhost||(this.hasPopup=!0,this.popup=document.createElement("div"),this.popup.id="pa-"+this.id,this.popup.style.position="absolute",this.popup.style.pointerEvents="none",this.scene.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.appendChild(this.popup),1===this.scene.annotationInstance.customization.themeCurrent.nPoint.scale?(this.popup.style.height="33px",this.popup.style.width="18px",this.popup.style.top=this.vec.y-32+"px",this.popup.style.left=this.vec.x-10+"px"):(this.popup.style.height=32*this.scene.annotationInstance.customization.themeCurrent.nPoint.scale+"px",this.popup.style.width=18*this.scene.annotationInstance.customization.themeCurrent.nPoint.scale+"px",this.popup.style.top=this.vec.y-32*this.scene.annotationInstance.customization.themeCurrent.nPoint.scale+"px",this.popup.style.left=this.vec.x-10*this.scene.annotationInstance.customization.themeCurrent.nPoint.scale+1+"px"),setTimeout((function(){e.scene.annotationInstance.io.eventListenerAnnotation.ShowPopupStack(e.ToJSON())}),100))}},{key:"UpdatePopup",value:function(){this.hasPopup&&void 0!==this.popup&&(this.hasGhostPopup?(this.popup.style.top=this.vec.y-this.scene.annotationInstance.customization.themeCurrent.nPoint.height-this.ghostPopupOffset+"px",this.popup.style.left=this.vec.x+"px"):1===this.scene.annotationInstance.customization.themeCurrent.nPoint.scale?(this.popup.style.top=this.vec.y-32+"px",this.popup.style.left=this.vec.x-10+"px"):(this.popup.style.top=this.vec.y-32*this.scene.annotationInstance.customization.themeCurrent.nPoint.scale+"px",this.popup.style.left=this.vec.x-10*this.scene.annotationInstance.customization.themeCurrent.nPoint.scale+1+"px"))}},{key:"Remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isRenderable&&!this.isHidden){if(this.isRemove=!0,this.isSelectable=!1,this.isRenderable=!1,this.hasPopup&&this.HidePopUpSummary(),!this.isGhost&&e){var t=this.ToJSON();t&&this.scene.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack([t])}this.textLeaderline&&(this.textLeaderline.RemoveByAttachedShape(),this.textLeaderline=void 0),this.scene.RemoveBasePoint(this),this.scene.RemoveRPoint(this),this.scene.RemoveGeometry(this)}}},{key:"DeepCopy",value:function(e,t){return new i(this.scene,e,t,this.vec.z,!1,this.type,this.r)}},{key:"MouseLeftClick",value:function(){this.isGhost||(this.scene.annotationInstance.geometryCommon.gcmdProcessing.RemoveAllPopup(),this.ShowPopupSummary())}},{key:"UpdateDivPos",value:function(){this.popup&&(this.popup.style.top=this.vec.y-32+"px",this.popup.style.left=this.vec.x-10+"px")}},{key:"UpdateBoundingBox",value:function(){var e=this.scene.annotationInstance.customization.themeCurrent.textleaderline.scale,t=23*e*.5,n=32*e;this.collision.minVec=new Oe(this.vec.x-t,this.vec.y-n-1),this.collision.maxVec=new Oe(this.vec.x+t-2,this.vec.y+1)}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){this.isSelected=e,this.scene.annotationInstance.io.eventListenerAnnotation.SelectionStack(this.ToJSON())}},{key:"IsHover",get:function(){return this.isHover},set:function(e){this.isHover=e,this.isHover&&!this.isHoverPre?this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()):!this.isHover&&this.isHoverPre&&this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()),this.isHoverPre=this.isHover,e||(this.needEmitHoverPost=!0,this.HidePopUpSummary())}},{key:"IsPin",get:function(){return this.isPin},set:function(e){this.isPin=e,this.UpdateScreenVec(),this.UpdateGoeVec()}}]),i}(It);function Ei(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Di=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Ei()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).renderStyle=new Bt,t.renderStyleNode=new Bt,t.UpdateStyle(),t}return Object(r.a)(i,[{key:"UpdateStyle",value:function(){Bt.UpdateRenderStyleNPoint(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent)}}]),i}(Vt);function Ti(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Mi=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Ti()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).host=e,t}return Object(r.a)(i,[{key:"RenderPost",value:function(e){if(this.host.inspector.Update(e),this.interpolateColor.Update(),this.host.scaleForRender=1,!this.host.isCollapse&&!(this.host.scaleForRender<.01)){var t=this.host.scene.annotationInstance.renderer.draw.shape.point;this.host.isDrag?(t.PointNumberedDragByCircle(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tUp),!0,!0,this.host.isGrayColor,this.host.visibility,this.host.GetIndex(),this.host.isHover,this.host.isSelected),this.tUp+=.015,this.tDown2=0):(this.host.isSelected?(t.ShadowNPoint(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.host.IsSelected,this.host.IsHover),t.PointNumberedOverBoundingByCircleSelected(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),!0,!0,this.host.isGrayColor,this.host.visibility),this.tOver+=.015,this.tDown1=0,this.host.isHover?this.tOverPopupSummary+=this.host.scene.annotationInstance.renderer.dt:this.tOverPopupSummary=0,this.host.isLeave=!0):this.host.isHover?(t.ShadowNPointLight(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.host.IsSelected,this.host.IsHover),t.PointNumberedOverBoundingByCircle(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),!0,!0,this.host.isGrayColor,this.host.visibility),this.tOver+=.015,this.tOverPopupSummary+=this.host.scene.annotationInstance.renderer.dt,this.tDown1=0,this.host.isLeave=!0):this.host.isLeave&&!this.host.isDrag?(t.PointNumberedOverBoundingByCircle(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tDown1),!1,!0,this.host.isGrayColor,this.host.visibility),this.tDown1+=.015,this.tOver=this.tOverPopupSummary=0,this.tDown1>.15&&(this.host.isLeave=!1)):this.host.isDrag||(t.PointNumberedOverBoundingByCircle(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tDown1),!1,!1,this.host.isGrayColor,this.host.visibility),this.tDown1+=this.host.scene.annotationInstance.renderer.dt,this.tOver=this.tOverPopupSummary=0),t.PointNumberedDragByCircle(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.scaleForRender,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tDown2),!1,!1,this.host.isGrayColor,this.host.visibility,this.host.GetIndex(),this.host.isHover,this.host.isSelected),this.tUp=0,this.tDown2+=.5*this.host.scene.annotationInstance.renderer.dt,this.tDown2>.15&&(this.host.isDrop=!1)),this.host.hasPopup&&this.host.IsMove&&this.host.UpdateDivPos(),this.host.t+=this.host.scene.annotationInstance.renderer.dt}}}]),i}(Yt);function Ai(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ni=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Ai()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).geo=e,t}return Object(r.a)(i,[{key:"TranslateByMouseEventData",value:function(e){}},{key:"Translate",value:function(e,t){}}]),i}(Ci),Li=function(){function e(t){Object(o.a)(this,e),this.geo=t}return Object(r.a)(e,[{key:"IsMouseInside",value:function(e,t){return!1}},{key:"GetLog",value:function(){return""}},{key:"Hide",value:function(){}}]),e}();function Gi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var _i=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Gi()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,p=arguments.length>4&&void 0!==arguments[4]&&arguments[4],d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g.j.POINT_NUMBERED;arguments.length>6&&void 0!==arguments[6]&&arguments[6],arguments.length>7&&void 0!==arguments[7]&&arguments[7],arguments.length>8&&void 0!==arguments[8]&&arguments[8],arguments.length>9&&void 0!==arguments[9]?arguments[9]:g.l.ROUND;return Object(o.a)(this,i),t=n.call(this,e,a,r,l,d),Object(u.a)(Object(s.a)(t),"numberIndexNeeded",!0),Object(u.a)(Object(s.a)(t),"_numberIndex",-1),t.type=d,t.isUndo=p,t.numberIndex=t.scene.listNPoint.length+1,t.InitComponent(),e.AddNPoint(Object(s.a)(t)),t.isUndo?Object(c.a)(t):(e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(t.ToJSON()),t)}return Object(r.a)(i,null,[{key:"FindAtPoint",value:function(e,t,n){for(var i=e.listNPoint.length-1;i>=0;--i)if(e.listNPoint.length[i].isSelectable&&e.listNPoint.length[i].IsMouseInside(t,n))return e.listNPoint.length[i]}},{key:"GetLengthSelection",value:function(e){for(var t=e.listNPoint.length,n=0;t--;)e.listNPoint[t].IsSelected&&(n+=1);return n}},{key:"RemoveAllCapturedGeo",value:function(e){for(var t=e.listNPoint,n=0;n<t.length;++n)!0===e.listNPoint[n].isSelected&&e.listNPoint[n].Remove()}},{key:"DeSelecteCaptureObjects",value:function(e){for(var t=0;t<e.listNPoint.length;++t)e.listNPoint[t].isSelected=!1}},{key:"MoveSelectedGeo",value:function(e,t){for(var n=0;n<e.listNPoint.length;++n)!0!==e.listNPoint[n].isSelected||e.listNPoint[n].isHover||e.listNPoint[n].TranslateByMouseEventData(t),!0===e.listNPoint[n].isHover&&e.listNPoint[n].TranslateByMouseEventData(t)}},{key:"FromJSON",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(t.nodes[0].proX,t.nodes[0].proY),r=new i(e,o[0],o[1],0,n);return r.type=g.j[t.type],r.id=a?e.GetUUID():t.id,r.isHidden=t.isHidden,t.isHidden?r.visibility=0:r.visibility=1,t.data.scale&&r.InitScale(t.data.scale),r.UpdateScreenVecByProjectedPos(),r.InitVecsHistory(),r}},{key:"MouseRightClick",value:function(e){}},{key:"MouseMiddleClick",value:function(e){}},{key:"MouseLeftClick",value:function(e,t){void 0===e.capture&&(new i(e,t.x,t.y,0).Dummy(),e.annotationInstance.activeCommandController.acProperties.pressShift||e.annotationInstance.activeCommandController.GoToACMode())}}]),Object(r.a)(i,[{key:"InitComponent",value:function(){this.styleComponent=new Di(this),this.renderer=new Mi(this),this.transformation=new Ni(this),this.interaction=new Li(this)}},{key:"Init",value:function(){this.isGeoPos=!0,this.edges=[],this.isPointMid=!1,this.t=0}},{key:"IsMouseInside",value:function(e,t){return!(this.isRemove||!this.isRenderable||this.isHidden)&&(!this.isCollapse&&this.Distance(e,t+11*this.scaleForRender)<=this.r*this.scaleForRender+12*this.scaleForRender)}},{key:"GetParentType",value:function(){return"ANNOTATION.POINT_NUMBERED"}},{key:"Remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isSelectable=!1,this.isRenderable=!1,this.hasPopup&&this.HidePopUpSummary(),e){var t=this.ToJSON();t&&this.scene.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack([t])}this.textLeaderline&&(this.textLeaderline.RemoveByAttachedShape(),this.textLeaderline=void 0),this.scene.RemoveBasePoint(this),this.scene.RemoveNPoint(this),this.scene.RemoveGeometry(this)}},{key:"GetIndex",value:function(){return this.scene.listNPoint.indexOf(this)+1}},{key:"DeepCopy",value:function(e,t){return new i(this.scene,e,t,this.vec.z,!1,this.type,this.r)}},{key:"MouseLeftClick",value:function(){this.scene.annotationInstance.geometryCommon.gcmdProcessing.RemoveAllPopup(),this.ShowPopupSummary()}},{key:"UpdateDivPos",value:function(){this.popup&&(this.popup.style.top=this.vec.y-31*this.scene.annotationInstance.customization.themeCurrent.nPoint.scale+"px",this.popup.style.left=this.vec.x-17*this.scene.annotationInstance.customization.themeCurrent.nPoint.scale+"px")}},{key:"RenderPost",value:function(e){this.renderer.RenderPost(e),this.scene.annotationInstance.implementations.app.INSPECTION&&this.collision.Render(e)}},{key:"ToJSON",value:function(){if(this.type!==g.j.ANODE&&this.type!==g.j.ANODE_CIRCLE&&this.type!==g.j.AMIDPOINT&&this.type!==g.j.AN_GON&&this.type!==g.j.ANODE_RECT){var e=new rt(this.id,this.type,this.isSelected,this.isHover,this.isHidden);return e.PushNode(this.GetNode()),e}}},{key:"UpdateBoundingBox",value:function(){this.collision.minVec=new Oe(this.vec.x-16,this.vec.y-30),this.collision.maxVec=new Oe(this.vec.x+16,this.vec.y+2)}},{key:"ShowPopupSummary",value:function(){var e=this;this.hasPopup||this.popup||this.isGhost||(this.hasPopup=!0,this.popup=document.createElement("div"),this.popup.id="pa-"+this.id,this.popup.style.position="absolute",this.popup.style.pointerEvents="none",this.scene.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.appendChild(this.popup),this.popup.style.height=34*this.scene.annotationInstance.customization.themeCurrent.nPoint.scale+"px",this.popup.style.width=34*this.scene.annotationInstance.customization.themeCurrent.nPoint.scale+"px",this.popup.style.top=this.vec.y-31*this.scene.annotationInstance.customization.themeCurrent.nPoint.scale+"px",this.popup.style.left=this.vec.x-17*this.scene.annotationInstance.customization.themeCurrent.nPoint.scale+"px",setTimeout((function(){e.scene.annotationInstance.io.eventListenerAnnotation.ShowPopupStack(e.ToJSON())}),100))}},{key:"UpdatePopup",value:function(){this.hasPopup&&void 0!==this.popup&&(this.hasGhostPopup?(this.popup.style.top=this.vec.y-this.scene.annotationInstance.customization.themeCurrent.nPoint.height-this.ghostPopupOffset+"px",this.popup.style.left=this.vec.x+"px"):(this.popup.style.top=this.vec.y-31*this.scene.annotationInstance.customization.themeCurrent.nPoint.scale+"px",this.popup.style.left=this.vec.x-17*this.scene.annotationInstance.customization.themeCurrent.nPoint.scale+"px"))}},{key:"HidePopUpSummary",value:function(){if(this.popup&&this.popup.parentNode&&this.scene.annotationInstance.activeCommandController.acProperties.insideMap){if(this.renderer.tOverPopupSummary=0,this.popup.parentNode.removeChild(this.popup),this.type===g.j.CNODE){var e=new rt(this.id,this.type,this.isSelected,this.isHover,this.isHidden);e.PushNode(this.GetNode()),this.scene.annotationInstance.io.eventListenerAnnotation.HidePopupStack(e)}else this.scene.annotationInstance.io.eventListenerAnnotation.HidePopupStack(this.ToJSON());this.hasPopupPre=!1,this.popup=void 0,this.hasPopup=!1}}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){this.isSelected=e,this.scene.annotationInstance.io.eventListenerAnnotation.SelectionStack(this.ToJSON())}},{key:"IsHover",get:function(){return this.isHover},set:function(e){this.isHover=e,this.isHover&&!this.isHoverPre?this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()):!this.isHover&&this.isHoverPre&&this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()),this.isHoverPre=this.isHover,e||(this.needEmitHoverPost=!0,this.HidePopUpSummary())}},{key:"numberIndex",get:function(){return this._numberIndex},set:function(e){this._numberIndex=e}}]),i}(It);function Bi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Wi=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Bi()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).renderStyle=new Bt,t.renderStyleNode=new Bt,t.UpdateStyle(),t}return Object(r.a)(i,[{key:"UpdateStyle",value:function(){Bt.UpdateRenderStyleRPoint(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent)}}]),i}(Vt);function Vi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Fi=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Vi()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).host=e,t}return Object(r.a)(i,[{key:"RenderPost",value:function(e){this.host.isRenderable&&this.host.img&&(this.host.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.isViewChanging&&this.host.UpdteControlPoints(),this.timer.Update(),e.save(),e.translate(this.host.vec.x,this.host.vec.y),e.rotate(this.host.angle/180),this.t>.6?this.host.isHover||this.host.IsSelected&&this.host.type===g.j.POINT_ICON?(this.host.scene.annotationInstance.renderer.draw.shape.point.PointIcon(e,this.host.styleComponent.renderStyle,0,0,this.host.widthRender,this.host.heightRender,this.host.img,!0,this.host.isGrayColor,this.host.visibility,!0,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver)),this.tOver+=this.host.scene.annotationInstance.renderer.dt,this.tDown1=0,this.host.isLeave=!0,this.RenderBoundary(e),this.RenderControlPoint(e),this.RenderCP(e),this.host.needShadowBound&&this.RenderShadow(e)):(this.host.scene.annotationInstance.renderer.draw.shape.point.PointIcon(e,this.host.styleComponent.renderStyle,0,0,this.host.widthRender,this.host.heightRender,this.host.img,!1,this.host.isGrayColor,this.host.visibility,!1),this.tOver=0):this.host.scene.annotationInstance.renderer.draw.shape.point.PointIcon(e,this.host.styleComponent.renderStyle,0,0,this.host.widthRender,this.host.heightRender,this.host.img,!0,this.host.isGrayColor,this.host.visibility,!0,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.t)),e.restore())}},{key:"RenderIcon",value:function(e){}},{key:"RenderBoundary",value:function(e){for(var t=[],n=0;n<this.host.arrayCP.length;++n)t.push(this.host.arrayCP[n].vec);e.beginPath();var i=this.host.scene.annotationInstance.customization.themeCurrent.nPoint.fillStyleFirstArray;e.strokeStyle="rgba(".concat(i[0],", ").concat(i[1],", ").concat(i[2],", ").concat(i[3],")"),e.lineWidth=2,this.host.scene.annotationInstance.renderer.draw.shape.area.RoundedRect(e,this.host.styleComponent.renderStyle,t,0,0),e.closePath(),e.stroke()}},{key:"RenderCP",value:function(e){e.fillStyle="#ffffff";var t=this.host.scene.annotationInstance.customization.themeCurrent.nPoint.fillStyleFirstArray;e.strokeStyle="rgba(".concat(t[0],", ").concat(t[1],", ").concat(t[2],", ").concat(t[3],")"),e.beginPath(),e.arc(0,0,2.5,0,2*Math.PI),e.closePath(),e.fill(),e.stroke()}},{key:"RenderControlPoint",value:function(e){for(var t=0;t<this.host.arrayCP.length;++t)this.host.arrayCP[t].RenderPost(this.host.scene,e)}},{key:"RenderShadow",value:function(e){for(var t=0;t<this.host.sizes.length;++t){var n=pt(this.host.img.width,this.host.img.height,this.host.sizes[t]),i=0-.5*n[0],a=0-.5*n[1];e.globalAlpha=1,e.lineDashOffset=-this.t,e.beginPath(),e.lineWidth=.5,e.strokeStyle="#ffffff",e.setLineDash([2,2]),e.rect(i,a,n[0],n[1]),e.closePath(),e.stroke(),e.globalAlpha=1,e.lineDashOffset=-this.t-4,e.beginPath(),e.lineWidth=.5,e.strokeStyle="#000000",e.setLineDash([2,2]),e.rect(i,a,n[0],n[1]),e.closePath(),e.stroke(),e.setLineDash([0,0])}}}]),i}(Yt),Ui=function(){function e(t,n,i,a){Object(o.a)(this,e),Object(u.a)(this,"r",4),Object(u.a)(this,"strokeWith",2),this.vec=new Oe(n,i,a),this.index=t}return Object(r.a)(e,[{key:"RenderPost",value:function(e,t){t.lineWidth=this.strokeWith,t.fillStyle="#ffffff";var n=e.annotationInstance.customization.themeCurrent.nPoint.fillStyleFirstArray;t.strokeStyle="rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(n[3],")"),t.beginPath(),t.arc(this.vec.x,this.vec.y,this.r,0,2*Math.PI),t.closePath(),t.fill(),t.stroke()}}]),e}();function zi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Hi=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(zi()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,p=arguments.length>4&&void 0!==arguments[4]&&arguments[4],d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",m=arguments.length>7&&void 0!==arguments[7]?arguments[7]:g.j.POINT_ICON;arguments.length>8&&void 0!==arguments[8]&&arguments[8],arguments.length>9&&void 0!==arguments[9]?arguments[9]:g.l.ROUND;if(Object(o.a)(this,i),t=n.call(this,e,a,r,l,m),Object(u.a)(Object(s.a)(t),"widthRender",0),Object(u.a)(Object(s.a)(t),"heightRender",0),Object(u.a)(Object(s.a)(t),"indexControPointSelected",-1),Object(u.a)(Object(s.a)(t),"xOffset",-3),Object(u.a)(Object(s.a)(t),"yOffset",-3),Object(u.a)(Object(s.a)(t),"arrayCP",[]),Object(u.a)(Object(s.a)(t),"needRotation",!1),Object(u.a)(Object(s.a)(t),"angle",0),Object(u.a)(Object(s.a)(t),"needShadowBound",!1),Object(u.a)(Object(s.a)(t),"needEmitResizeTransform",!1),Object(u.a)(Object(s.a)(t),"sizes",[]),Object(u.a)(Object(s.a)(t),"sizesDis",[]),t.path=h,t.isUndo=p,t.isPointMid=!1,t.hasPopup=!1,t.isRenderable=!1,t.idBase64=d,t.InitComponent(),t.InitIcon()){if(e.AddIPoint(Object(s.a)(t)),t.isUndo)return Object(c.a)(t);e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(t.ToJSON())}return t}return Object(r.a)(i,null,[{key:"FromJSON",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3]}},{key:"MouseRightClick",value:function(e){}},{key:"MouseMiddleClick",value:function(e){}},{key:"MouseLeftClick",value:function(e,t){void 0===e.capture&&e.annotationInstance.renderer.draw.image.activeBase64ID&&(new i(e,t.x,t.y,0).Dummy(),e.annotationInstance.activeCommandController.acProperties.pressShift||e.annotationInstance.activeCommandController.GoToACMode())}},{key:"MouseDrag",value:function(e){}}]),Object(r.a)(i,[{key:"InitComponent",value:function(){this.styleComponent=new Wi(this),this.renderer=new Fi(this)}},{key:"InitIcon",value:function(){if(this.hasPopup&&this.AppendDiv(),!(this.idBase64.length<1))return!1;this.idBase64=this.scene.annotationInstance.renderer.draw.image.activeBase64ID,this.img=new Image,this.img.src=this.scene.annotationInstance.renderer.draw.image.activeBase64ID,this.isRenderable=!0,this.isUnderConstruction=!1;var e=pt(this.img.width,this.img.height,72);return this.widthRender=e[0],this.heightRender=e[1],this.midHeightImg=this.widthRender[0],this.midWidthImg=this.widthRender[1],this.xOffset=0,this.yOffset=0,this.arrayCP=[],this.arrayCP.push(new Ui(0,0-this.midWidthImg-this.xOffset,0-this.midHeightImg-this.yOffset,0)),this.arrayCP.push(new Ui(1,0+this.midWidthImg+this.xOffset,0-this.midHeightImg-this.yOffset,0)),this.arrayCP.push(new Ui(2,0+this.midWidthImg+this.xOffset,0+this.midHeightImg+this.yOffset,0)),this.arrayCP.push(new Ui(3,0-this.midWidthImg-this.xOffset,0+this.midHeightImg+this.yOffset,0)),this.sizes=[16,32,48,72],this.ComputeDistanceForSnap(),!0}},{key:"ComputeDistanceForSnap",value:function(){this.sizesDis=[];for(var e=0;e<this.sizes.length;++e){var t=pt(this.img.width,this.img.height,this.sizes[e]),n=0-.5*t[0],i=0-.5*t[1],a=Z(new Oe(0,0),new Oe(n,i));this.sizesDis.push(a)}}},{key:"GetParentType",value:function(){return"APointIconWrapper"}},{key:"AppendDiv",value:function(){this.divHeight=150,this.divWidth=100,this.div=document.createElement("div"),this.div.id="dt_icon_".concat(this.id.toString()),this.div.style.height=this.divHeight+"px",this.div.style.width=this.divWidth+"px",this.div.style.top=(this.vec.y-.5*this.divHeight).toString()+"px",this.div.style.left=(this.vec.x+50).toString()+"px",this.div.style.position="absolute",this.div.style.background="red",this.div.style.zIndex="999",this.div.style.visibility="hidden"}},{key:"TranslateDiv",value:function(){this.div.style.top=(this.vec.y-.5*this.divHeight).toString()+"px",this.div.style.left=(this.vec.x+50).toString()+"px"}},{key:"IsMouseInside",value:function(e,t){if(this.isRemove||!this.isRenderable||this.isHidden)return!1;var n=new Oe(e,t);this.needRotation=!1;for(var i=0;i<this.arrayCP.length;++i){var a=Z(n,new Oe(this.arrayCP[i].vec.x+this.vec.x,this.arrayCP[i].vec.y+this.vec.y));if(a<this.arrayCP[i].r+3)return this.indexControPointSelected=this.arrayCP[i].index,this.needRotation=!1,!0;this.arrayCP[0].r+3<a&&a<this.arrayCP[0].r+13&&(this.needRotation=!0)}return this.indexControPointSelected=-1,!!ge(n,[new Oe(this.arrayCP[0].vec.x+this.vec.x,this.arrayCP[0].vec.y+this.vec.y),new Oe(this.arrayCP[1].vec.x+this.vec.x,this.arrayCP[1].vec.y+this.vec.y),new Oe(this.arrayCP[2].vec.x+this.vec.x,this.arrayCP[2].vec.y+this.vec.y),new Oe(this.arrayCP[3].vec.x+this.vec.x,this.arrayCP[3].vec.y+this.vec.y)])||!!this.needRotation}},{key:"DeepCopy",value:function(e,t){var n=new i(this.scene,e,t,this.vec.z,!0,this.idBase64,this.path,this.type,this.r);return n.type=this.type,n.isHidden=this.isHidden,n.id=this.scene.GetUUID(),n.widthRender=this.widthRender,n.heightRender=this.heightRender,n.UpdateScreenVecByProjectedPos(),n.EmitAddStack(),n}},{key:"Translate",value:function(e,t){}},{key:"TranslateByMouseEventData",value:function(e){if(!this.isRemove&&this.isRenderable&&!this.isHidden&&!this.scene.annotationInstance.activeCommandController.acProperties.pressESC){var t=e.x-e.preX,n=e.y-e.preY;if(this.needRotation&&this.scene.annotationInstance.activeCommandController.acProperties.pressShift)this.angle+=t+n;else{if(this.indexControPointSelected>-1)return this.needEmitResizeTransform=!0,void(this.scene.annotationInstance.activeCommandController.acProperties.pressShift?this.TranslateControlPointForFreeform(t,n):(this.TranslateControlPointSnap(e),this.needShadowBound=!0));this.needShadowBound=!1,this.vec.x+=t,this.vec.y+=n,this.isDrag=!0,this.textLeaderline&&(this.textLeaderline.TranslateByMouseEventData(e),this.textLeaderline.leaderline&&(this.textLeaderline.leaderline.v2.x=this.vec.x,this.textLeaderline.leaderline.v2.y=this.vec.y)),this.UpdateGoeVec()}}}},{key:"TranslateControlPointSnap",value:function(e){for(var t=Z(this.vec,new Oe(e.x,e.y)),n=0;n<this.sizesDis.length;++n)if(t<this.sizesDis[n]){var i=pt(this.img.width,this.img.height,this.sizes[n]);this.widthRender=i[0],this.heightRender=i[1],this.arrayCP[0].vec.x=.5*-i[0],this.arrayCP[0].vec.y=.5*-i[1],this.arrayCP[1].vec.x=.5*+i[0],this.arrayCP[1].vec.y=.5*-i[1],this.arrayCP[2].vec.x=.5*+i[0],this.arrayCP[2].vec.y=.5*+i[1],this.arrayCP[3].vec.x=.5*-i[0],this.arrayCP[3].vec.y=.5*+i[1];break}}},{key:"TranslateControlPointSnapForEachPoint",value:function(e){var t=e.x-e.preX,n=e.y-e.preY;if(this.needShadowBound=!0,0===this.indexControPointSelected)this.arrayCP[0].vec.x+=t,this.arrayCP[0].vec.y+=n,this.arrayCP[1].vec.x-=t,this.arrayCP[1].vec.y+=n,this.arrayCP[2].vec.x-=t,this.arrayCP[2].vec.y-=n,this.arrayCP[3].vec.x+=t,this.arrayCP[3].vec.y-=n;else if(1===this.indexControPointSelected)for(var i=Z(this.vec,new Oe(e.x,e.y)),a=0;a<this.sizesDis.length;++a)if(i<this.sizesDis[a]){var o=pt(this.img.width,this.img.height,this.sizes[a]);this.widthRender=o[0],this.heightRender=o[1],this.arrayCP[0].vec.x=.5*-o[0],this.arrayCP[0].vec.y=.5*-o[1],this.arrayCP[1].vec.x=.5*+o[0],this.arrayCP[1].vec.y=.5*-o[1],this.arrayCP[2].vec.x=.5*+o[0],this.arrayCP[2].vec.y=.5*+o[1],this.arrayCP[3].vec.x=.5*-o[0],this.arrayCP[3].vec.y=.5*+o[1];break}this.widthRender=this.arrayCP[1].vec.x-this.arrayCP[0].vec.x,this.heightRender=this.arrayCP[3].vec.y-this.arrayCP[0].vec.y}},{key:"TranslateControlPointForFreeform",value:function(e,t){0===this.indexControPointSelected?(this.arrayCP[0].vec.x+=e,this.arrayCP[0].vec.y+=t,this.arrayCP[1].vec.x-=e,this.arrayCP[1].vec.y+=t,this.arrayCP[2].vec.x-=e,this.arrayCP[2].vec.y-=t,this.arrayCP[3].vec.x+=e,this.arrayCP[3].vec.y-=t):1===this.indexControPointSelected?(this.arrayCP[0].vec.x-=e,this.arrayCP[0].vec.y+=t,this.arrayCP[1].vec.x+=e,this.arrayCP[1].vec.y+=t,this.arrayCP[2].vec.x+=e,this.arrayCP[2].vec.y-=t,this.arrayCP[3].vec.x-=e,this.arrayCP[3].vec.y-=t):2===this.indexControPointSelected?(this.arrayCP[0].vec.x-=e,this.arrayCP[0].vec.y-=t,this.arrayCP[1].vec.x+=e,this.arrayCP[1].vec.y-=t,this.arrayCP[2].vec.x+=e,this.arrayCP[2].vec.y+=t,this.arrayCP[3].vec.x-=e,this.arrayCP[3].vec.y+=t):3===this.indexControPointSelected&&(this.arrayCP[0].vec.x+=e,this.arrayCP[0].vec.y-=t,this.arrayCP[1].vec.x-=e,this.arrayCP[1].vec.y-=t,this.arrayCP[2].vec.x-=e,this.arrayCP[2].vec.y+=t,this.arrayCP[3].vec.x+=e,this.arrayCP[3].vec.y+=t),this.widthRender=this.arrayCP[1].vec.x-this.arrayCP[0].vec.x,this.heightRender=this.arrayCP[3].vec.y-this.arrayCP[0].vec.y}},{key:"UpdteControlPoints",value:function(){this.midWidthImg=.5*this.widthRender,this.midHeightImg=.5*this.heightRender,this.arrayCP[0].vec.x=0-this.midWidthImg-this.xOffset,this.arrayCP[0].vec.y=0-this.midHeightImg-this.yOffset,this.arrayCP[1].vec.x=0+this.midWidthImg+this.xOffset,this.arrayCP[1].vec.y=0-this.midHeightImg-this.yOffset,this.arrayCP[2].vec.x=0+this.midWidthImg+this.xOffset,this.arrayCP[2].vec.y=0+this.midHeightImg+this.yOffset,this.arrayCP[3].vec.x=0-this.midWidthImg-this.xOffset,this.arrayCP[3].vec.y=0+this.midHeightImg+this.yOffset}},{key:"Remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isSelectable=!1,this.isRenderable=!1,this.hasPopup&&this.HidePopUpSummary(),this.textLeaderline&&(this.textLeaderline.RemoveByAttachedShape(),this.textLeaderline=void 0),this.isSelectable=!1,this.isRenderable=!1,this.isRemove=!0,e){var t=this.ToJSON();t&&this.scene.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack([t])}this.scene.RemoveBasePoint(this),this.scene.RemoveIPoint(this),this.scene.RemoveGeometry(this)}},{key:"ToJSON",value:function(){}},{key:"MouseUp",value:function(){this.needEmitResizeTransform&&this.scene.annotationInstance.io.eventListenerAnnotation.TransformStack([this.ToJSON()]),this.needEmitResizeTransform=!1}},{key:"RenderPost",value:function(e){this.renderer.RenderPost(e)}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){this.isSelected=e,this.scene.annotationInstance.io.eventListenerAnnotation.SelectionStack(this.ToJSON())}},{key:"IsHover",get:function(){return this.isHover},set:function(e){this.isHover=e,this.isHover&&!this.isHoverPre?this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()):!this.isHover&&this.isHoverPre&&this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()),this.isHoverPre=this.isHover,e||(this.needEmitHoverPost=!0,this.HidePopUpSummary())}}]),i}(It);function Yi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ki=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Yi()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).host=e,t}return Object(r.a)(i,[{key:"RenderPost",value:function(e){this.timer.Update(),this.host.ComputeBoundingVecsAndCenterVec(),this.host.scene.annotationInstance.activeCommandController.acProperties.isPanning&&this.host.wrapping.UpdateProjection(this.host.GetVecs()),this.host.scene.annotationInstance.activeCommandController.acProperties.showUnit&&(this.host.type===g.j.CURVE_CLOSE?(this.host.isHover||this.host.isUnderConstruction)&&this.host.dimension.RenderTotalAreaCurve(e,this.host.vecs,this.host.isClosed):(this.host.isHover||this.host.isUnderConstruction)&&this.host.dimension.RenderTotalLengthCurve(e,this.host.vecs,this.host.isClosed)),this.host.ComputeCurve(),this.RenderPostGeometry(e),this.RenderPostGeometryDuplication(e)}},{key:"RenderPostGeometry",value:function(e){this.RenderSpline(e,this.host.arrayVertexs,this.host.arrayControlPoint,this.host.arrayWeight,this.host.isHover,this.host.isSelected,this.host.isClosed),(this.host.isHover||this.host.isSelected)&&this.host.scene.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode===g.k.DRAWING&&(this.DrawControlLine(e,this.host.arrayControlPoint,this.host.arrayVertexs),this.DrawControPoint(e,this.host.arrayControlPoint))}},{key:"RenderPostGeometryDuplication",value:function(e){if((this.host.wrapping.isIntersectLeft||this.host.wrapping.isIntersectRight)&&this.host.wrapping.vsOther.length>0&&(this.host.ComputeVertexDuplication(this.host.wrapping.vsOther),this.RenderWrapping(e,this.host.arrayVertexs,this.host.arrayControlPoint,this.host.arrayWeight,this.host.isHover,this.host.isSelected,this.host.isClosed),(this.host.isHover||this.host.isSelected)&&(this.host.scene.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode===g.k.DRAWING&&(this.DrawControlLine(e,this.host.arrayControlPoint,this.host.arrayVertexs),this.DrawControPoint(e,this.host.arrayControlPoint)),this.host.isHover||this.host.isSelected)))for(var t=0;t<this.host.wrapping.vsOther.length;++t)this.host.scene.annotationInstance.renderer.draw.shape.node.Point(e,this.host.styleComponent.renderStyle,this.host.wrapping.vsOther[t].x,this.host.wrapping.vsOther[t].y,this.host.scaleForRender)}},{key:"RenderSpline",value:function(e,t,n,i,a,o,r){var s=t,c=n,l=s.length;if(r){if(this.host.isHover||this.host.isSelected)for(var p=2;p<l+2;p+=2)this.host.scene.annotationInstance.renderer.draw.shape.curve.CurveBezierClosedHoverPolygon(e,this.host.styleComponent.renderStyle,s[p],s[p+1],c[2*p-2],c[2*p-1],c[2*p],c[2*p+1],s[p+2],s[p+3],this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.host.renderer.tOver));for(var u=2;u<l+2;u+=2)this.host.scene.annotationInstance.renderer.draw.shape.curve.CurveBezierClosed(e,this.host.styleComponent.renderStyle,s[u],s[u+1],c[2*u-2],c[2*u-1],c[2*u],c[2*u+1],s[u+2],s[u+3],this.host.isHover,this.host.isSelected);this.host.isFill&&this.RenderCurveInfill(e,t,n)}else{if(this.host.isHover||this.host.isSelected){for(var d=2;d<s.length-5;d+=2)this.host.scene.annotationInstance.renderer.draw.shape.curve.CurveBezierHoverPolyline(e,this.host.styleComponent.renderStyle,s[d],s[d+1],c[2*d-2],c[2*d-1],c[2*d],c[2*d+1],s[d+2],s[d+3],this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.host.renderer.tOver));this.host.scene.annotationInstance.renderer.draw.shape.curve.CurveQuadraticHoverPolyline(e,this.host.styleComponent.renderStyle,s[0],s[1],c[0],c[1],s[2],s[3],this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.host.renderer.tOver)),this.host.scene.annotationInstance.renderer.draw.shape.curve.CurveQuadraticHoverPolyline(e,this.host.styleComponent.renderStyle,s[l-2],s[l-1],c[2*l-10],c[2*l-9],s[l-4],s[l-3],this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.host.renderer.tOver))}for(var h=2;h<s.length-5;h+=2)this.host.scene.annotationInstance.renderer.draw.shape.curve.CurveBezier(e,this.host.styleComponent.renderStyle,s[h],s[h+1],c[2*h-2],c[2*h-1],c[2*h],c[2*h+1],s[h+2],s[h+3],this.host.isHover,this.host.isSelected);this.host.scene.annotationInstance.renderer.draw.shape.curve.CurveQuadratic(e,this.host.styleComponent.renderStyle,s[0],s[1],c[0],c[1],s[2],s[3],this.host.isHover,this.host.isSelected),this.host.scene.annotationInstance.renderer.draw.shape.curve.CurveQuadratic(e,this.host.styleComponent.renderStyle,s[l-2],s[l-1],c[2*l-10],c[2*l-9],s[l-4],s[l-3],this.host.isHover,this.host.isSelected)}this.OffscreenRender(s,c,l,r)}},{key:"DrawControPoint",value:function(e,t){e.lineWidth=.5*this.host.styleComponent.renderStyleNode.lineWidth,e.fillStyle=this.host.styleComponent.renderStyleNode.colorFill,e.strokeStyle=this.host.styleComponent.renderStyleNode.colorStroke;for(var n=0;n<t.length-1;n+=2)e.beginPath(),e.arc(t[n],t[n+1],3*this.host.scaleForRender,0,2*Math.PI,!1),e.fill(),e.stroke()}},{key:"DrawControlLine",value:function(e,t,n){for(var i=2;i<n.length-5;i+=2)this.host.scene.annotationInstance.renderer.draw.shape.curve.DrawControlLine(e,this.host.styleComponent.renderStyle,n[i],n[i+1],t[2*i-2],t[2*i-1]),this.host.scene.annotationInstance.renderer.draw.shape.curve.DrawControlLine(e,this.host.styleComponent.renderStyle,n[i+2],n[i+3],t[2*i],t[2*i+1]);this.host.scene.annotationInstance.renderer.draw.shape.curve.DrawControlLine(e,this.host.styleComponent.renderStyle,n[2],n[3],t[0],t[1]),this.host.scene.annotationInstance.renderer.draw.shape.curve.DrawControlLine(e,this.host.styleComponent.renderStyle,n[n.length-4],n[n.length-3],t[2*n.length-10],t[2*n.length-9])}},{key:"RenderCurveInfill",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=t,a=n,o=i.length;this.host.scene.annotationInstance.renderer.needFocus&&!this.host.isHover?(e.strokeStyle=this.host.styleComponent.renderStyle.colorStrokeHover,e.fillStyle=this.host.styleComponent.renderStyle.colorFillHover):(e.strokeStyle=this.host.styleComponent.renderStyle.colorStroke,e.fillStyle=this.host.styleComponent.renderStyle.colorFill),this.host.isSelected&&(e.strokeStyle=this.host.styleComponent.renderStyle.colorStroke,e.fillStyle=this.host.styleComponent.renderStyle.colorFill);var r=2;e.beginPath(),e.moveTo(i[r],i[r+1]);for(var s=2;s<o+2;s+=2)this.host.scene.annotationInstance.renderer.draw.shape.curve.CurveBezierClosedFill(e,this.host.styleComponent.renderStyle,i[s],i[s+1],a[2*s-2],a[2*s-1],a[2*s],a[2*s+1],i[s+2],i[s+3]);e.closePath(),e.fill()}},{key:"RenderCurveInfillOffscreen",value:function(e,t,n,i){var a=n,o=i,r=a.length;e.save(),e.beginPath(),e.fillStyle=t;e.moveTo(a[2],a[3]);for(var s=2;s<r+2;s+=2)this.host.scene.annotationInstance.renderer.draw.shape.curve.CurveBezierClosedFill(e,this.host.styleComponent.renderStyle,a[s],a[s+1],o[2*s-2],o[2*s-1],o[2*s],o[2*s+1],a[s+2],a[s+3]);e.closePath(),e.fill(),e.restore()}},{key:"RenderWrapping",value:function(e,t,n,i,a,o,r){var s=t,c=n,l=s.length;if(this.OffscreenRender(s,c,l,r),r){if(this.host.isHover||this.host.isSelected)for(var p=2;p<l+2;p+=2)this.host.scene.annotationInstance.renderer.draw.shape.curve.CurveBezierClosedHoverPolygon(e,this.host.styleComponent.renderStyle,s[p],s[p+1],c[2*p-2],c[2*p-1],c[2*p],c[2*p+1],s[p+2],s[p+3],this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.host.renderer.tOver));e.fillStyle=this.host.styleComponent.renderStyle.colorFill;for(var u=2;u<l+2;u+=2)this.host.scene.annotationInstance.renderer.draw.shape.curve.CurveBezierClose(e,this.host.styleComponent.renderStyle,s[u],s[u+1],c[2*u-2],c[2*u-1],c[2*u],c[2*u+1],s[u+2],s[u+3]),this.host.isFill&&this.RenderCurveInfill(e,t,n,.04)}else{if(this.host.isHover||this.host.isSelected){for(var d=2;d<s.length-5;d+=2)this.host.scene.annotationInstance.renderer.draw.shape.curve.CurveBezierHoverPolyline(e,this.host.styleComponent.renderStyle,s[d],s[d+1],c[2*d-2],c[2*d-1],c[2*d],c[2*d+1],s[d+2],s[d+3],this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.host.renderer.tOver));this.host.scene.annotationInstance.renderer.draw.shape.curve.CurveQuadraticHoverPolyline(e,this.host.styleComponent.renderStyle,s[0],s[1],c[0],c[1],s[2],s[3],this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.host.renderer.tOver)),this.host.scene.annotationInstance.renderer.draw.shape.curve.CurveQuadraticHoverPolyline(e,this.host.styleComponent.renderStyle,s[l-2],s[l-1],c[2*l-10],c[2*l-9],s[l-4],s[l-3],this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.host.renderer.tOver))}for(var h=2;h<s.length-5;h+=2)this.host.scene.annotationInstance.renderer.draw.shape.curve.CurveBezier(e,this.host.styleComponent.renderStyle,s[h],s[h+1],c[2*h-2],c[2*h-1],c[2*h],c[2*h+1],s[h+2],s[h+3],this.host.isHover,this.host.isSelected);this.host.scene.annotationInstance.renderer.draw.shape.curve.CurveQuadratic(e,this.host.styleComponent.renderStyle,s[0],s[1],c[0],c[1],s[2],s[3],this.host.isHover,this.host.isSelected),this.host.scene.annotationInstance.renderer.draw.shape.curve.CurveQuadratic(e,this.host.styleComponent.renderStyle,s[l-2],s[l-1],c[2*l-10],c[2*l-9],s[l-4],s[l-3],this.host.isHover,this.host.isSelected)}}},{key:"OffscreenRender",value:function(e,t,n,i){if(i){for(var a=2;a<n+2;a+=2)this.host.scene.annotationInstance.renderer.offscreen.CurveBezierOffScreen(this.host.scene.annotationInstance.renderer.ctxOffscreen,this.host.styleComponent.renderStyle,this.host.hashColor,e[a],e[a+1],t[2*a-2],t[2*a-1],t[2*a],t[2*a+1],e[a+2],e[a+3]);this.RenderCurveInfillOffscreen(this.host.scene.annotationInstance.renderer.ctxOffscreen,this.host.hashColor,e,t)}else{for(var o=2;o<e.length-5;o+=2)this.host.scene.annotationInstance.renderer.offscreen.CurveBezierOffScreen(this.host.scene.annotationInstance.renderer.ctxOffscreen,this.host.styleComponent.renderStyle,this.host.hashColor,e[o],e[o+1],t[2*o-2],t[2*o-1],t[2*o],t[2*o+1],e[o+2],e[o+3]);this.host.scene.annotationInstance.renderer.offscreen.CurveQuadraticArrowOffScreen(this.host.scene.annotationInstance.renderer.ctxOffscreen,this.host.styleComponent.renderStyle,this.host.hashColor,e[0],e[1],t[0],t[1],e[2],e[3]),this.host.scene.annotationInstance.renderer.offscreen.CurveQuadraticArrowOffScreen(this.host.scene.annotationInstance.renderer.ctxOffscreen,this.host.styleComponent.renderStyle,this.host.hashColor,e[n-2],e[n-1],t[2*n-10],t[2*n-9],e[n-4],e[n-3])}}}]),i}(Yt);function Xi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ji=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Xi()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).renderStyle=new Bt,t.renderStyleNode=new Bt,t.UpdateStyle(),t}return Object(r.a)(i,[{key:"UpdateStyle",value:function(){Bt.UpdateRenderStylePolygon(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent),Bt.UpdateRenderStylePolygonNode(this.renderStyleNode,this.geo.scene.annotationInstance.customization.themeCurrent)}}]),i}(Vt);function Zi(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return qi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qi(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function qi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Qi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var $i=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Qi()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(o.a)(this,i),t=n.call(this,e),Object(u.a)(Object(s.a)(t),"vecSelected",-1),t.vec=new Oe(0,0,0),t.pts=[],t.InitComponent(),t.isClosed=a,t.isUndo=r,t.isUnderConstruction=!0,t.showDetails=!0,t.isClosed?(t.type=g.j.CURVE_CLOSE,t.isFill=!0):(t.type=g.j.CURVE_OPEN,t.isFill=!1),t.wrapping=new Ct(Object(s.a)(t),t.GetVecs()),t.dimension=new Et(Object(s.a)(t)),t.scene.AddACurve(Object(s.a)(t)),t.Init(),t}return Object(r.a)(i,null,[{key:"GetControlPoints",value:function(e,t,n,i,a,o,r){var s=Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2)),c=r*s/(s+Math.sqrt(Math.pow(a-n,2)+Math.pow(o-i,2))),l=r-c;return[n+c*(e-a),i+c*(t-o),n-l*(e-a),i-l*(t-o)]}},{key:"ComputeControlPoints",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=[];if(n){e.push(e[0],e[1],e[2],e[3]),e.unshift(e[e.length-1]),e.unshift(e[e.length-1]);for(var o=0;o<e.length;o+=2)a=a.concat(i.GetControlPoints(e[o],e[o+1],e[o+2],e[o+3],e[o+4],e[o+5],t));a=a.concat(a[0],a[1])}else for(var r=0;r<e.length-4;r+=2)a=a.concat(i.GetControlPoints(e[r],e[r+1],e[r+2],e[r+3],e[r+4],e[r+5],t));return a}},{key:"GetLength",value:function(e,t){for(var n=e.listACurve.length,i=0;n--;)t===e.listACurve[n].type&&(i+=1);return i}},{key:"GetLengthSelection",value:function(e,t){for(var n=e.listACurve.length,i=0;n--;)e.listACurve[n].IsSelected&&t===e.listACurve[n].type&&(i+=1);return i}},{key:"FromJSON",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=new i(e,o,n);if(n)for(var s=0;s<t.nodes.length;++s)r.AddPT($t.GetNodeFromJSON(e,t.nodes[s],n));else for(var c=0;c<t.nodes.length;++c)r.AddPT($t.GetNodeFromJSON(e,t.nodes[c]));return r.type=g.j[t.type],r.IsSelectable=!0,r.isUnderConstruction=!1,r.IsHover=!1,r.IsHidden=t.isHidden,r.id=a?e.GetUUID():t.id,t.isHidden?r.visibility=0:r.visibility=1,r.wrapping.InitProjectionShapesFromJSON(r.GetVecs()),r.wrapping.UpdateProjection(r.vecs),r.InitVecsHistory(),i.construction=void 0,r}},{key:"GetCurveByVecs",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=new i(e,n),o=0;o<t.length;++o)a.AddPT(new $t(e,t[o].x,t[o].y,0));return a.IsSelectable=!0,a.isUnderConstruction=!1,e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(a.ToJSON()),a}},{key:"DrawShadow",value:function(e){if(void 0!==i.construction)if(i.construction.pts.length<3){if(i.construction.isRemove)return;i.construction.pts[i.construction.pts.length-1].Move(e.x,e.y);var t=i.construction.pts[0],n=i.construction.pts[1],a=i.construction.pts[2];n.vec.x=.5*(t.vec.x+a.vec.x),n.vec.y=.5*(t.vec.y+a.vec.y)}else i.construction.pts[i.construction.pts.length-1].Move(e.x,e.y)}},{key:"GetCurveByPt",value:function(e,t){i.construction=new i(e),i.construction.AddPT(new $t(e,t.vec.x,t.vec.y)),i.construction.AddPT(new $t(e,t.vec.x,t.vec.y)),i.construction.AddPT(new $t(e,t.vec.x,t.vec.y)),t.Remove()}},{key:"GetCurve",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];void 0!==i.construction?i.construction.pts[0].Distance(t.x,t.y)<5?(i.construction.isClosed=n,i.construction.isClosed?(i.construction.RemovePT(i.construction.pts[0]),i.construction.RemovePT(i.construction.pts[0]),i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1])):(i.construction.RemovePT(i.construction.pts[0]),i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1])),i.construction.IsCapture=!1,i.construction=void 0):i.construction.AddPT(new $t(e,t.x,t.y)):(i.construction=new i(e,n),i.construction.AddPT(new $t(e,t.x,t.y)),i.construction.AddPT(new $t(e,t.x,t.y)),i.construction.AddPT(new $t(e,t.x,t.y)))}},{key:"Done",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0!==i.construction)if(i.construction.pts.length<5){var t=new $t(e,i.construction.pts[0].vec.x,i.construction.pts[0].vec.y,i.construction.pts[0].vec.z);t.Dummy(),i.construction.Remove(),i.construction=void 0,e.annotationInstance.activeCommandController.GoToACMode()}else i.construction.isClosed?(i.construction.RemovePT(i.construction.pts[0]),i.construction.RemovePT(i.construction.pts[0]),i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1])):(i.construction.RemovePT(i.construction.pts[0]),i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1])),i.construction.IsSelectable=!0,i.construction.isUnderConstruction=!1,e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(i.construction.ToJSON()),i.construction=void 0,e.annotationInstance.activeCommandController.GoToACMode()}},{key:"DoneByKeyboard",value:function(e){void 0!==i.construction&&(i.construction.pts.length<5?(new $t(e,i.construction.pts[0].vec.x,i.construction.pts[0].vec.y,i.construction.pts[0].vec.z).Dummy(),i.construction.Remove(),i.construction=void 0,e.annotationInstance.activeCommandController.GoToACMode()):(i.construction.RemovePT(i.construction.pts[0]),i.construction.RemovePT(i.construction.pts[1]),i.construction.RemovePT(i.construction.pts[i.construction.pts.length-1]),i.construction.IsSelectable=!0,i.construction.isUnderConstruction=!1,e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(i.construction.ToJSON()),i.construction=void 0,e.annotationInstance.activeCommandController.GoToACMode()))}},{key:"Undo",value:function(e){if(i.construction){var t=i.construction.pts.length-1;t<4?i.Cancel():(i.construction.RemovePT(i.construction.pts[--t]),i.construction.pts[t].vec.x=e.x,i.construction.pts[t].vec.y=e.y)}}},{key:"Cancel",value:function(){void 0!==i.construction&&(i.construction.isRemove=!0,i.construction.Remove(),i.construction=void 0)}},{key:"MouseDown",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.annotationInstance.activeCommandController.acProperties.isSmartSelectionWhenDrawing){var a=e.annotationInstance.geometryCommon.gcmdProcessing.FindAtPoint(t);i.construction&&(a===i.construction.pts[i.construction.pts.length-1]?void 0!==a&&a.type===g.j.ANODE&&void 0!==i.construction?(i.construction&&i.construction.AddPT(new $t(e,a.V.x,a.V.y,a.V.z)),a.Remove()):void 0!==a&&a.type===g.j.ANODE&&void 0===i.construction&&i.GetCurveByPt(e,a):i.GetCurve(e,t,n))}else i.GetCurve(e,t,n)}},{key:"MouseDoubleClick",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];void 0!==i.construction&&i.Done(e,n)}},{key:"MouseLeftClick",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];void 0===e.capture&&void 0===i.construction&&i.GetCurve(e,t,n)}},{key:"MouseMove",value:function(e){i.DrawShadow(e)}}]),Object(r.a)(i,[{key:"InitComponent",value:function(){this.styleComponent=new Ji(this),this.renderer=new Ki(this)}},{key:"Init",value:function(){}},{key:"GetLog",value:function(){return"GUID : "+this.id+"/TYPE : "+this.type.toString()+"/Screen : /Nodes : "+this.pts.length+"/IsSEL : "+this.isSelected+"/isSelable : "+this.isSelectable}},{key:"GetLogDOM",value:function(){return"Geometry ID : "+this.id+"<br>geometry Type : CCircle<br>position : size : "+this.r+" pixel<br>"}},{key:"GetVecs",value:function(){this.vecs=[];var e,t=Zi(this.pts);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.vecs.push(n.vec)}}catch(i){t.e(i)}finally{t.f()}return this.vecs}},{key:"ComputeVertex",value:function(){this.arrayVertexs=[];var e,t=Zi(this.pts);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.arrayVertexs.push(n.vec.x,n.vec.y)}}catch(i){t.e(i)}finally{t.f()}}},{key:"ComputeWeight",value:function(){this.arrayWeight=[];var e,t=Zi(this.pts);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.arrayWeight.push(n.weightLeft,n.weightRight)}}catch(i){t.e(i)}finally{t.f()}}},{key:"ComputeControlPoint",value:function(){var e,t=[],n=Zi(this.arrayVertexs);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push(a)}}catch(c){n.e(c)}finally{n.f()}var o=[];if(this.isClosed){t.push(t[0],t[1],t[2],t[3]),t.unshift(t[this.arrayVertexs.length-1]),t.unshift(t[this.arrayVertexs.length-1]);for(var r=0;r<this.arrayVertexs.length;r+=2)o=o.concat(i.GetControlPoints(t[r],t[r+1],t[r+2],t[r+3],t[r+4],t[r+5],this.arrayWeight[r]));return o=o.concat(o[0],o[1]),this.arrayControlPoint=o,void(this.arrayVertexs=t)}for(var s=0;s<t.length-4;s+=2)o=o.concat(i.GetControlPoints(t[s],t[s+1],t[s+2],t[s+3],t[s+4],t[s+5],this.arrayWeight[s]));this.arrayControlPoint=o}},{key:"GoToBlackhole",value:function(){this.isSelectable=!1,this.needBlackhole=!0,this.pts.forEach((function(e){e.GoToBlackhole()}))}},{key:"ComputeVertexDuplication",value:function(e){this.arrayVertexs=[];var t,n=Zi(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.arrayVertexs.push(a.x,a.y)}}catch(d){n.e(d)}finally{n.f()}var o,r=[],s=Zi(this.arrayVertexs);try{for(s.s();!(o=s.n()).done;){var c=o.value;r.push(c)}}catch(d){s.e(d)}finally{s.f()}var l=[];if(this.isClosed){r.push(r[0],r[1],r[2],r[3]),r.unshift(r[this.arrayVertexs.length-1]),r.unshift(r[this.arrayVertexs.length-1]);for(var p=0;p<this.arrayVertexs.length;p+=2)l=l.concat(i.GetControlPoints(r[p],r[p+1],r[p+2],r[p+3],r[p+4],r[p+5],this.arrayWeight[p]));return l=l.concat(l[0],l[1]),this.arrayControlPoint=l,void(this.arrayVertexs=r)}for(var u=0;u<r.length-4;u+=2)l=l.concat(i.GetControlPoints(r[u],r[u+1],r[u+2],r[u+3],r[u+4],r[u+5],this.arrayWeight[u]));this.arrayControlPoint=l}},{key:"ComputeCurve",value:function(){this.ComputeVertex(),this.ComputeWeight(),this.ComputeControlPoint()}},{key:"Remove",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.pts.length;t--;)this.pts[t].Remove();if(e){var n=this.ToJSON();n&&this.scene.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack([n])}this.scene.RemoveACurve(this),this.scene.RemoveGeometry(this)}},{key:"Hide",value:function(){}},{key:"AddPT",value:function(e){e.type=g.j.ANODE,e.vec.w=.5,e.weightLeft=e.vec.w,e.weightRight=0,e.isSelectable=!1,e.styleComponent.renderStyle=this.styleComponent.renderStyleNode,e.styleComponent.renderStyleNode=this.styleComponent.renderStyleNode,e.styleComponent.UpdateStyleForNode(this.styleComponent.renderStyleNode),e.edges.push(this),this.pts.push(e),this.pts.length>2&&this.ComputeCurve()}},{key:"RemovePT",value:function(e){this.pts.splice(this.pts.indexOf(e),1),e.Remove()}},{key:"DeepCopy",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n,a=this.ToJSON();if(a)return(n=a.type===g.j.CURVE_CLOSE?i.FromJSON(this.scene,a,!0,!0,!0):i.FromJSON(this.scene,a,!0,!0)).Move(e,t),n.isHover=!0,n.EmitAddStack(),n}},{key:"Move",value:function(e,t){if(!this.isRemove&&this.isRenderable&&!this.isHidden){this.ComputeBoundingVecsAndCenterVec();for(var n=e-this.vec.x,i=t-this.vec.y,a=0;a<this.pts.length;++a)this.pts[a].vec.x+=n,this.pts[a].vec.y+=i,this.pts[a].UpdateGoeVec()}}},{key:"IsMouseInside",value:function(e,t){return!0!==this.isUnderConstruction&&void 0!==this.isUnderConstruction&&(!!this.CheckDistance(e,t)||!!this.IsMouseInsideByOffScreen(e,t))}},{key:"CheckDistance",value:function(e,t){var n=this.wrapping.vecSelected;if(n&&n.length>2)for(var i=0;i<n.length;++i){if(Z(new Oe(e,t),n[i])<9)return this.vecSelected=i,!0;this.vecSelected=-1}return!1}},{key:"IsMouseInsideByOffScreen",value:function(e,t){return this.scene.annotationInstance.geometryCommon.gcmdProcessing.IsMouseInsideByOffScreen(e,t,this.hashColor)?(this.IsHover=!0,!0):(this.IsHover=!1,!1)}},{key:"TranslateByMouseEventData",value:function(e){if(-1!==this.vecSelected)return this.pts[this.vecSelected].TranslateByMouseEventData(e),void this.wrapping.UpdateProjection(this.GetVecs());for(var t=e.x-e.preX,n=e.y-e.preY,i=0;i<this.pts.length;++i)this.pts[i].vec.x+=t,this.pts[i].vec.y+=n,this.pts[i].UpdateGoeVec();this.wrapping.UpdateProjection(this.GetVecs())}},{key:"Translate",value:function(e,t){}},{key:"GetNode",value:function(){for(var e=[],t=0;t<this.pts.length;++t)e.push(this.pts[t].vec);return e}},{key:"UpdateStyleCustom",value:function(e){this.styleComponent.UpdateStyleCustom(e)}},{key:"MouseRightClick",value:function(){this.isClosed&&(this.isFill=!this.isFill)}},{key:"ToJSON",value:function(){var e=new rt(this.id,this.type,this.isSelected,this.isHover,this.isHidden);return e.PushNode(this.GetNode()),e}},{key:"GetVecsGeoAOA",value:function(){for(var e=[],t=0;t<this.pts.length;++t){var n=[this.pts[t].vec.long,this.pts[t].vec.lat];e.push(n)}return e}},{key:"RenderPost",value:function(e){this.renderer.RenderPost(e)}},{key:"ComputeBoundingVecsAndCenterVec",value:function(){this.vecs=[];for(var e=0;e<this.pts.length;++e)this.vecs.push(this.pts[e].vec);this.vec=xe(this.vecs)}},{key:"IsSelectable",set:function(e){this.isSelectable=e;for(var t=0;t<this.pts.length;++t)this.pts[t].isSelectable=e},get:function(){return this.isSelectable}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){this.isSelected=e;var t,n=Zi(this.pts);try{for(n.s();!(t=n.n()).done;){t.value.isRenderable=e}}catch(i){n.e(i)}finally{n.f()}this.scene.annotationInstance.io.eventListenerAnnotation.SelectionStack(this.ToJSON())}},{key:"IsHover",get:function(){return this.isHover},set:function(e){if(!this.isUnderConstruction&&!this.isSelected){var t,n=Zi(this.pts);try{for(n.s();!(t=n.n()).done;){t.value.isRenderable=e}}catch(a){n.e(a)}finally{n.f()}if(this.isHover=e,this.isHover&&!this.isHoverPre){for(var i=0;i<this.pts.length;++i)this.pts[i].renderer.t=0;this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON())}else!this.isHover&&this.isHoverPre&&this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON());this.isHoverPre=this.isHover,e||(this.needEmitHoverPost=!0,this.HidePopUpSummary())}}},{key:"IsCapture",get:function(){return this.isCaptured},set:function(e){for(var t=0;t<this.pts.length;++t)this.pts[t].isCaptured=e}}]),i}(wt);function ea(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}Object(u.a)($i,"construction",void 0);var ta=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(ea()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),t=n.call(this,e),Object(u.a)(Object(s.a)(t),"dash",[]),Object(u.a)(Object(s.a)(t),"tempColorRgba",[]),t.renderStyle=new Bt,t.renderStyleNode=new Bt,t.UpdateStyle(),t}return Object(r.a)(i,[{key:"UpdateStyle",value:function(){this.isCustom||(this.state.themeColorId=Lt.TitleColor,this.isCustom=!0,Bt.UpdateRenderStyleArrow(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent),Bt.UpdateRenderStyleArrowNode(this.renderStyleNode,this.geo.scene.annotationInstance.customization.themeCurrent),this.UpdateStyleNode())}},{key:"UpdateAccentColor",value:function(){}},{key:"UpdateStyleCustom",value:function(e){e.colorRgba&&(this.tempColorRgba=e.colorRgba),e.scale&&(this.state.scale=e.scale),e.width&&(this.state.width=e.width),void 0!==e.color&&(this.state.themeColorId=e.color),void 0!==e.lineDash&&(this.state.lineTypeId=e.lineDash,this.renderStyle.dash=function(e){switch(e){case Nt.Large:return[8,4];case Nt.Small:return[4,4];case Nt.Continuous:return[0,0];default:return[]}}(e.lineDash)),e.colorRgba.length>0&&(Bt.UpdateRenderStyleArrowCustom(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent,e),Bt.UpdateRenderStyleArrowNodeCustom(this.renderStyleNode,this.geo.scene.annotationInstance.customization.themeCurrent,e),this.UpdateStyleNode()),this.isCustom=!0}},{key:"UpdateStyleNode",value:function(){if(this.geo.pts)for(var e=0;e<this.geo.pts.length;++e)this.geo.pts[e].styleComponent.UpdateStyleForNode(this.renderStyleNode)}},{key:"ToJson",value:function(){if(this.isCustom){var e={width:this.state.width,scale:this.state.scale,colorRgba:this.tempColorRgba};return this.state.lineTypeId!==Nt.Continuous&&(e.lineDash=this.state.lineTypeId),this.state.themeColorId!==Lt.TitleColor&&(e.color=this.state.themeColorId),e}}}]),i}(Vt);function na(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ia=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(na()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),t=n.call(this,e),Object(u.a)(Object(s.a)(t),"_isDash",!1),t.host=e,t}return Object(r.a)(i,[{key:"RenderPost",value:function(e){this.host.ComputeCurve(),(this.host.scene.annotationInstance.activeCommandController.acProperties.isPanning||this.host.scene.annotationInstance.activeCommandController.acProperties.isViewChanging)&&(this.host.wrapping.UpdateProjection(this.host.vecs),this.host.wrapping.UpdateProjectionShapes(this.host.vecs),this.host.UpdateScale()),this.host.isUnderConstruction&&this.host.ComputeMidPoint(),this.RenderPostGeometry(e),this.RenderPostGeometryDuplication(e)}},{key:"RenderPostGeometry",value:function(e){this.DrawSpline(e,this.host.arrayVertexs,this.host.arrayControlPoint)}},{key:"RenderPostGeometryDuplication",value:function(e){if((this.host.wrapping.isIntersectLeft||this.host.wrapping.isIntersectRight)&&this.host.wrapping.vsOther){var t=this.host.ComputeVertex(this.host.wrapping.vsOther),n=this.host.ComputeControlPoint(t);this.DrawSpline(e,t,n),(this.host.isHover||this.host.isSelected)&&this.host.scene.annotationInstance.interactionMode===g.k.DRAWING&&this.DrawOthersCP(e,this.host.wrapping.vsOther)}}},{key:"DrawSpline",value:function(e,t,n){var i=t,a=n,o=i.length,r=[this.host.p0.vec,this.host.p1.vec,this.host.pm.vec];this.OffscreenRender(i,a,o);var s=this.host.scene.annotationInstance.renderer.draw.shape.curve;this.host.isHover||this.host.isSelected?(s.CurveQuadraticArrow(e,this.host.styleComponent.renderStyle,i[0],i[1],a[0],a[1],i[2],i[3],this.host.isHover,r,this.host.isGrayColor,this.host.visibility,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),this.host.isSelected,this.host.styleComponent.state.themeColorId,this._isDash,3),s.CurveQuadraticArrow(e,this.host.styleComponent.renderStyle,i[o-2],i[o-1],a[2*o-10],a[2*o-9],i[o-4],i[o-3],this.host.isHover,r,this.host.isGrayColor,this.host.visibility,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),this.host.isSelected,this.host.styleComponent.state.themeColorId,this._isDash),s.CArrowByTranslation(e,this.host.styleComponent.renderStyle,new Oe(i[4],i[5]),new Oe(a[2],a[3]),i[4],i[5],this.host.arrowScale,this.host.scaleForRender,this.host.isHover,this.host.isGrayColor,this.host.visibility,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),this.host.isSelected,this.host.styleComponent.state.themeColorId),this.host.type===g.j.ARROW_DOUBLE&&s.CArrowByTranslation(e,this.host.styleComponent.renderStyle,new Oe(i[0],i[1]),new Oe(a[0],a[1]),i[0],i[1],this.host.arrowScale,this.host.scaleForRender,!0,this.host.isGrayColor,this.host.visibility,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),this.host.isSelected,this.host.styleComponent.state.themeColorId),this.tOver+=this.host.scene.annotationInstance.renderer.dt,this.tDown1=0,this.host.isLeave=!0):(s.CurveQuadraticArrow(e,this.host.styleComponent.renderStyle,i[0],i[1],a[0],a[1],i[2],i[3],this.host.isHover,r,this.host.isGrayColor,this.host.visibility,1,this.host.isSelected,this.host.styleComponent.state.themeColorId,this._isDash,3),s.CurveQuadraticArrow(e,this.host.styleComponent.renderStyle,i[o-2],i[o-1],a[2*o-10],a[2*o-9],i[o-4],i[o-3],this.host.isHover,r,this.host.isGrayColor,this.host.visibility,1,this.host.isSelected,this.host.styleComponent.state.themeColorId,this._isDash),s.CArrowByTranslation(e,this.host.styleComponent.renderStyle,new Oe(i[4],i[5]),new Oe(a[2],a[3]),i[4],i[5],this.host.arrowScale,this.host.scaleForRender,this.host.isHover,this.host.isGrayColor,this.host.visibility,1,this.host.isSelected,this.host.styleComponent.state.themeColorId),this.host.type===g.j.ARROW_DOUBLE&&s.CArrowByTranslation(e,this.host.styleComponent.renderStyle,new Oe(i[0],i[1]),new Oe(a[0],a[1]),i[0],i[1],this.host.arrowScale,this.host.scaleForRender,!1,this.host.isGrayColor,this.host.visibility,1,this.host.isSelected,this.host.styleComponent.state.themeColorId),this.tOver=0)}},{key:"DrawOthersCP",value:function(e,t){this.host.scene.annotationInstance.renderer.draw.shape.curve.ArrowByVecNode(e,this.host.styleComponent.renderStyle,t,this.host.scaleForRender,this.host.isGrayColor,this.host.visibility,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),this.host.isHover)}},{key:"OffscreenRender",value:function(e,t,n){this.host.scene.annotationInstance.renderer.offscreen.CurveQuadraticArrowOffScreen(this.host.scene.annotationInstance.renderer.ctxOffscreen,this.host.styleComponent.renderStyle,this.host.hashColor,e[0],e[1],t[0],t[1],e[2],e[3]),this.host.scene.annotationInstance.renderer.offscreen.CurveQuadraticArrowOffScreen(this.host.scene.annotationInstance.renderer.ctxOffscreen,this.host.styleComponent.renderStyle,this.host.hashColor,e[n-2],e[n-1],t[2*n-10],t[2*n-9],e[n-4],e[n-3])}},{key:"isDash",get:function(){return this._isDash},set:function(e){this._isDash=e}}]),i}(Yt),aa=function(){function e(t){Object(o.a)(this,e),this.geo=t}return Object(r.a)(e,[{key:"IsMouseInside",value:function(e,t){return!1}},{key:"GetLog",value:function(){return""}},{key:"Hide",value:function(){}}]),e}();function oa(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ra=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(oa()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).host=e,t}return Object(r.a)(i,[{key:"IsMouseInside",value:function(e,t){return!0!==this.host.isUnderConstruction&&void 0!==this.host.isUnderConstruction&&(this.host.scene.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode===g.k.DRAWING&&(!!this.IsMouseInsideByMath(e,t)||!!this.IsMouseInsideByOffScreen(e,t)))}},{key:"IsMouseInsideByOffScreen",value:function(e,t){return this.host.scene.annotationInstance.geometryCommon.gcmdProcessing.IsMouseInsideByOffScreen(e,t,this.host.hashColor)?(this.host.IsHover=!0,!0):(this.host.IsHover=!1,!1)}},{key:"IsMouseInsideByMath",value:function(e,t){return this.host.ComputeCurve(.3),!(!this.host.wrapping.isIntersectLeft&&!this.host.wrapping.isIntersectRight||!this.IsInsideFirstAndLastCurvesDuplicated(e,t))||(this.IsInsideFirstAndLastCurves(e,t)?(this.host.IsHover=!0,!0):(this.host.IsHover=!1,!1))}},{key:"IsInsideFirstAndLastCurves",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=this.host.arrayVertexs,a=this.host.arrayControlPoint,o=0;o<1;o+=.001){var r=Math.abs(Math.pow(1-o,3))*i[0]+3*Math.pow(1-o,2)*o*a[0]+3*Math.abs(1-o)*Math.pow(o,2)*a[0]+Math.abs(Math.pow(o,3))*i[2],s=Math.abs(Math.pow(1-o,3))*i[1]+3*Math.pow(1-o,2)*o*a[1]+3*Math.abs(1-o)*Math.pow(o,2)*a[1]+Math.abs(Math.pow(o,3))*i[3],c=Math.abs(Math.pow(1-o,3))*i[2]+3*Math.pow(1-o,2)*o*a[2]+3*Math.abs(1-o)*Math.pow(o,2)*a[2]+Math.abs(Math.pow(o,3))*i[4],l=Math.abs(Math.pow(1-o,3))*i[3]+3*Math.pow(1-o,2)*o*a[3]+3*Math.abs(1-o)*Math.pow(o,2)*a[3]+Math.abs(Math.pow(o,3))*i[5],p=$(new Oe(r,s),new Oe(e,t));if(p<n)return!0;var u=$(new Oe(c,l),new Oe(e,t));if(u<n)return!0}return!1}},{key:"IsInsideFirstAndLastCurvesDuplicated",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=this.host.ComputeVertex(this.host.wrapping.vsOther),a=this.host.ComputeControlPoint(i),o=0;o<1;o+=.001){var r=Math.abs(Math.pow(1-o,3))*i[0]+3*Math.pow(1-o,2)*o*a[0]+3*Math.abs(1-o)*Math.pow(o,2)*a[0]+Math.abs(Math.pow(o,3))*i[2],s=Math.abs(Math.pow(1-o,3))*i[1]+3*Math.pow(1-o,2)*o*a[1]+3*Math.abs(1-o)*Math.pow(o,2)*a[1]+Math.abs(Math.pow(o,3))*i[3],c=Math.abs(Math.pow(1-o,3))*i[2]+3*Math.pow(1-o,2)*o*a[2]+3*Math.abs(1-o)*Math.pow(o,2)*a[2]+Math.abs(Math.pow(o,3))*i[4],l=Math.abs(Math.pow(1-o,3))*i[3]+3*Math.pow(1-o,2)*o*a[3]+3*Math.abs(1-o)*Math.pow(o,2)*a[3]+Math.abs(Math.pow(o,3))*i[5],p=$(new Oe(r,s),new Oe(e,t));if(p<n)return!0;var u=$(new Oe(c,l),new Oe(e,t));if(u<n)return!0}return!1}},{key:"TranslateByMouseEventData",value:function(e){if(!this.host.isRemove&&this.host.isRenderable&&!this.host.isHidden)if(this.host.TranslateForOther(e))this.host.wrapping.UpdateProjection(this.host.vecs);else{var t=e.x-e.preX,n=e.y-e.preY;this.host.p0.vec.x+=t,this.host.p0.vec.y+=n,this.host.p1.vec.x+=t,this.host.p1.vec.y+=n,this.host.pm.vec.x+=t,this.host.pm.vec.y+=n,this.host.UpdateGeoVec(),this.host.wrapping.UpdateProjection(this.host.vecs)}}},{key:"GetLog",value:function(){return"GUID : "+this.host.id+"/TYPE : "+this.host.type.toString()+"/POS : /SIZE : "+this.host.r+" pixel/IsSEL : "+this.host.isSelected+"/isSelable : "+this.host.isSelectable}},{key:"Hide",value:function(){}}]),i}(aa);function sa(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ca=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(sa()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).host=e,t}return Object(r.a)(i,[{key:"TranslateByMouseEventData",value:function(e){if(!this.host.isRemove&&this.host.isRenderable&&!this.host.isHidden)if(this.TranslateForOther(e))this.host.wrapping.UpdateProjection(this.host.vecs);else if(this.host.pm.isHover)this.host.pm.TranslateByMouseEventData(e);else{var t=e.x-e.preX,n=e.y-e.preY;this.host.p0.vec.x+=t,this.host.p0.vec.y+=n,this.TranslateForTextLeaderline(e,this.host.p0),this.host.p1.vec.x+=t,this.host.p1.vec.y+=n,this.TranslateForTextLeaderline(e,this.host.p1),this.host.pm.vec.x+=t,this.host.pm.vec.y+=n,this.TranslateForTextLeaderline(e,this.host.pm),this.host.UpdateGeoVec(),this.host.wrapping.UpdateProjection(this.host.vecs)}}},{key:"TranslateForTextLeaderline",value:function(e,t){return!(!t.textLeaderline||(t.textLeaderline.TranslateByMouseEventData(e),!t.textLeaderline.leaderline))&&(t.textLeaderline.leaderline.v2.x=t.vec.x,t.textLeaderline.leaderline.v2.y=t.vec.y,!0)}},{key:"TranslateForOther",value:function(e){if(!this.host.wrapping.isIntersectLeft||!this.host.wrapping.isIntersectLeft)return!1;for(var t=Number.MAX_SAFE_INTEGER,n=-1,i=new Oe(e.x,e.y),a=0;a<this.host.wrapping.vsOther.length;++a){var o=Z(this.host.wrapping.vsOther[a],i);o<t&&(t=o)<10&&(n=a)}if(n>0){var r=e.x-e.preX,s=e.y-e.preY;return 0===n&&(this.host.p0.vec.x+=r,this.host.p0.vec.y+=s),1===n&&(this.host.pm.vec.x+=r,this.host.pm.vec.y+=s),2===n&&(this.host.p1.vec.x+=r,this.host.p1.vec.y+=s),this.host.UpdateGeoVec(),!0}return!1}},{key:"Translate",value:function(e,t){}},{key:"Move",value:function(e,t){if(!this.host.isRemove&&this.host.isRenderable&&!this.host.isHidden){this.host.ComputeCenterVec();for(var n=e-this.host.vec.x,i=t-this.host.vec.y,a=0;a<this.host.pts.length;++a)this.host.pts[a].vec.x+=n,this.host.pts[a].vec.y+=i,this.host.pts[a].UpdateGoeVec()}}}]),i}(Vt);function la(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return pa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pa(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ua(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var da=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(ua()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e,t,a){var r,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=(arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5&&void 0!==arguments[5]?arguments[5]:g.j.ARROW_SINGLE);Object(o.a)(this,i),r=n.call(this,e),Object(u.a)(Object(s.a)(r),"vecSelected",-1),Object(u.a)(Object(s.a)(r),"numSelectionWhenConstruction",0),r.isUndo=c,r.type=l,r.p0=t,r.p1=a;var p=H(r.p0.vec,r.p1.vec);return r.pm=new $t(e,p.x,p.y,p.z),r.p0.type=g.j.ANODE,r.pm.type=g.j.ANODE,r.p1.type=g.j.ANODE,r.vecs=[r.p0.vec,r.pm.vec,r.p1.vec],r.IsMove=!0,r.tVec=new Oe(0,0,0),r.InitComponent(),r.InitAArow(),r}return Object(r.a)(i,null,[{key:"FindAtPoint",value:function(e,t){for(var n=e.listAArrow.length-1;n>=0;--n)if(e.listAArrow[n].isSelectable&&e.listAArrow[n].IsMouseInside(t.x,t.y))return e.listAArrow[n]}},{key:"ComputeOver",value:function(e,t){var n=i.FindAtPoint(e,t);void 0!==n&&(n.isHover=!0)}},{key:"GetLength",value:function(e,t){for(var n=e.listAArrow.length,i=0;n--;)e.listAArrow[n].type===t&&(i+=1);return i}},{key:"GetLengthSelection",value:function(e,t){for(var n=e.listAArrow.length,i=0;n--;)e.listAArrow[n].IsSelected&&e.listAArrow[n].type===t&&(i+=1);return i}},{key:"FromJSON",value:function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=$t.GetNodeFromJSON(e,t.nodes[0],a),c=$t.GetNodeFromJSON(e,t.nodes[1],a),l=$t.GetNodeFromJSON(e,t.nodes[2],a);s.type=g.j.ANODE,c.type=g.j.AMIDPOINT,l.type=g.j.ANODE,(n=new i(e,s,l,a||!1,t.style,r?g.j.ARROW_SINGLE:g.j.ARROW_DOUBLE)).pm.vec.x=c.vec.x,n.pm.vec.y=c.vec.y,c.Remove(),n.UpdateGeoVec(),n.id=o?e.GetUUID():t.id,n.isUnderConstruction=!1,n.numSelectionWhenConstruction=2,n.IsHover=!1,n.pm.type=g.j.AMIDPOINT,t.data.isDash&&(n.renderer.isDash=t.data.isDash),t.styles&&n.UpdateStyleCustom(t.styles),n.wrapping.InitProjectionShapesFromJSON(n.GetVecs()),n.wrapping.UpdateProjection(n.vecs),n.ComputeCenterVec(),n.InitVecsHistory(),a||e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(n.ToJSON()),i.condition.v0=void 0,i.condition.v1=void 0,i.condition.geo=void 0}},{key:"FromSmartDrawing",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.j.ARROW_SINGLE;i.GetRectByVecs(e,t,n)}},{key:"GetRectByVecs",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.j.ARROW_SINGLE,a=!1,o=t[0],r=t[t.length-1],s=new $t(e,o.x,o.y,0,a,g.j.ANODE),c=new $t(e,r.x,r.y,0,a,g.j.ANODE),l=new i(e,s,c,a,0,n);l.IsSelected=l.IsHover=l.isUnderConstruction=!1,e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(l.ToJSON())}},{key:"DrawShadow",value:function(e,t,n){if(void 0===i.condition.geo){var a=new $t(e,t.x,t.y,0);a.isSelectable=!1,n===g.j.ARROW_SINGLE&&void 0!==i.condition.v0&&(i.condition.geo=new i(e,i.condition.v0,a,!1,0,g.j.ARROW_SINGLE)),n===g.j.ARROW_DOUBLE&&void 0!==i.condition.v0&&(i.condition.geo=new i(e,i.condition.v0,a,!1,0,g.j.ARROW_DOUBLE)),void 0!==i.condition.geo&&(i.condition.geo.isSelectable=!1)}else void 0!==i.condition.geo.p1&&i.condition.geo.p1.Move(t.x,t.y)}},{key:"GetLine",value:function(e,t){arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.j.ARROW_SINGLE;if(void 0!==i.condition.v0){if(void 0!==i.condition.v0){if(void 0===i.condition.geo)return;return i.condition.geo.p1.Move(t.x,t.y),i.condition.geo.ComputeMidPoint(),i.condition.geo.isSelectable=!0,i.condition.geo.isUnderConstruction=!1,i.condition.geo.IsSelected=!1,i.condition.geo.IsCaptured=!1,void e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(i.condition.geo.ToJSON())}}else i.condition.v0=new $t(e,t.x,t.y)}},{key:"GetLineByPt",value:function(e,t){return void 0===i.condition.v0&&void 0===i.condition.v1?(i.condition.v0=new $t(e,t.vec.x,t.vec.y,t.vec.z),void(i.split?i.condition.v0.vec=t.vec:t.Remove())):(void 0!==i.condition.geo&&void 0!==i.condition.geo.p1&&i.condition.geo.p1.Move(t.vec.x,t.vec.y),void 0!==i.condition.geo&&(i.condition.geo.isSelectable=!0,i.condition.geo.isUnderConstruction=!1),void(t.type===g.j.CNODE?i.split&&void 0!==i.condition.geo&&(i.condition.geo.p1.vec=t.vec):t.type===g.j.APOINT&&t.Remove()))}},{key:"Cancel",value:function(){void 0!==i.condition.geo&&i.condition.geo.Remove(),i.condition.v0=void 0,i.condition.v1=void 0,i.condition.geo=void 0}},{key:"MouseDown",value:function(e,t,n){void 0!==i.condition.geo&&(void 0!==e.capture&&e.capture.type===g.j.APOINT?i.GetLineByPt(e,e.capture):i.GetLine(e,t,n),i.condition.geo.ComputeCenterVec(),i.condition.geo.isUnderConstruction=!1,e.Capture=i.condition.geo,i.condition.geo.IsSelected=!0,i.condition.v0=void 0,i.condition.v1=void 0,i.condition.geo=void 0,i.isDone=!1,e.annotationInstance.activeCommandController.acProperties.deselectNeeded=!1,e.annotationInstance.activeCommandController.GoToACMode()),i.condition.geo&&this.DrawShadow(e,t,n)}},{key:"MouseLeftClick",value:function(e,t,n){i.isDone?i.isDone=!1:(void 0!==e.capture&&e.capture.type===g.j.APOINT&&void 0!==e.capture&&(i.GetLineByPt(e,e.capture),i.isDone=!1),void 0===i.condition.geo&&(i.GetLine(e,t,n),i.isDone=!1),i.DrawShadow(e,t,n))}},{key:"MouseMove",value:function(e,t,n){void 0!==i.condition.v0&&i.DrawShadow(e,t,n)}},{key:"MouseUp",value:function(e){}}]),Object(r.a)(i,[{key:"InitComponent",value:function(){this.transformation=new ca(this),this.interaction=new ra(this),this.styleComponent=new ta(this),this.renderer=new ia(this)}},{key:"InitAArow",value:function(){this.ComputeCenterVec(),this.p0.AddEdge(this),this.pm.AddEdge(this),this.p1.AddEdge(this),this.pts=[this.p0,this.pm,this.p1],this.arrowScale=1,this.lineWidth=5,this.curveWeight=.5,this.wrapping=new Ct(this,this.GetVecs()),this.scene.AddAArrow(this)}},{key:"ComputeMidPoint",value:function(){var e=H(this.p0.vec,this.p1.vec);this.pm.vec.x=e.x,this.pm.vec.y=e.y,this.pm.UpdateGoeVec(),this.pm.isPointMid=!0,this.pm.type=g.j.AMIDPOINT}},{key:"ComputeVertex",value:function(e){var t,n=[],i=la(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.push(a.x,a.y)}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"ComputeWeight",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=[],n=0;n<this.pts.length;++n)t.push(e);this.arrayWeight=t}},{key:"ComputeControlPoint",value:function(e){var t,n=[],i=la(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.push(a)}}catch(s){i.e(s)}finally{i.f()}for(var o=[],r=0;r<n.length-4;r+=2)o=o.concat($i.GetControlPoints(n[r],n[r+1],n[r+2],n[r+3],n[r+4],n[r+5],this.arrayWeight[r]));return o}},{key:"FindClosestNode",value:function(e,t){if(!this.isRemove&&this.isRenderable&&!this.isHidden)return this.p0.IsMouseInside(e,t)?this.p0:this.p1.IsMouseInside(e,t)?this.p1:void 0}},{key:"ComputeCurve",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;this.arrayVertexs=this.ComputeVertex(this.GetVecs()),this.ComputeWeight(e),this.arrayControlPoint=this.ComputeControlPoint(this.arrayVertexs),this.ComputeCenterVec()}},{key:"ComputeCenterVec",value:function(){var e=[this.p0.vec,this.p1.vec,this.pm.vec];this.vec=xe(e);var t=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(this.vec.x,this.vec.y);return this.vec.long=t[0],this.vec.lat=t[1],this.vec.proX=t[2],this.vec.proY=t[3],this.vec}},{key:"GetLog",value:function(){return this.interaction.GetLog()}},{key:"DeepCopy",value:function(e,t){this.IsSelected=!1;var n=this.p0.DeepCopy(),a=this.p1.DeepCopy();if(n&&a){var o=new i(this.scene,n,a,!1,0,this.type);return o.pm.vec.x=this.pm.vec.x,o.pm.vec.y=this.pm.vec.y,o.isUnderConstruction=!1,o.Move(e,t),o.UpdateGeoVec(),o.EmitAddStack(),o}}},{key:"GoToBlackhole",value:function(){this.isSelectable=!1,this.needBlackhole=!0,this.p0.GoToBlackhole(),this.pm.GoToBlackhole(),this.p1.GoToBlackhole()}},{key:"Move",value:function(e,t){if(!this.isRemove&&this.isRenderable&&!this.isHidden){this.ComputeCenterVec();for(var n=e-this.vec.x,i=t-this.vec.y,a=0;a<this.pts.length;++a)this.pts[a].vec.x+=n,this.pts[a].vec.y+=i,this.pts[a].UpdateGoeVec()}}},{key:"GetVecs",value:function(){return[this.p0.vec,this.pm.vec,this.p1.vec]}},{key:"IsSelectedByWindow",value:function(e){return!!(ge(this.p0.vec,e)&&ge(this.pm.vec,e)&&ge(this.p1.vec,e))}},{key:"IsSelectedByCrossing",value:function(e){return!!ge(this.p0.vec,e)||(!!ge(this.pm.vec,e)||!!ge(this.p1.vec,e))}},{key:"IsMouseInside",value:function(e,t){return this.interaction.IsMouseInside(e,t)}},{key:"TranslateByMouseEventData",value:function(e){this.transformation.TranslateByMouseEventData(e)}},{key:"TranslateForOther",value:function(e){if(!this.wrapping.isIntersectLeft||!this.wrapping.isIntersectLeft)return!1;for(var t=Number.MAX_SAFE_INTEGER,n=-1,i=new Oe(e.x,e.y),a=0;a<this.wrapping.vsOther.length;++a){var o=Z(this.wrapping.vsOther[a],i);o<t&&(t=o)<10&&(n=a)}if(n>0){var r=e.x-e.preX,s=e.y-e.preY;return 0===n&&(this.p0.vec.x+=r,this.p0.vec.y+=s),1===n&&(this.pm.vec.x+=r,this.pm.vec.y+=s),2===n&&(this.p1.vec.x+=r,this.p1.vec.y+=s),this.UpdateGeoVec(),!0}return!1}},{key:"UpdateGeoVec",value:function(){this.p0.UpdateGoeVec(),this.p1.UpdateGoeVec(),this.pm.UpdateGoeVec()}},{key:"Remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isSelectable=!1,this.isRenderable=!1,this.isRemove=!0,this.p0.DeepRemove(),this.p1.DeepRemove(),this.pm.DeepRemove(),e){var t=this.ToJSON();t&&this.scene.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack([t])}this.scene.RemoveAArrow(this),this.scene.RemoveGeometry(this)}},{key:"Hide",value:function(){this.interaction.Hide()}},{key:"GetNode",value:function(){var e=[];return e.push(this.p0.vec),e.push(this.pm.vec),e.push(this.p1.vec),e}},{key:"UpdateStyleCustom",value:function(e){this.styleComponent.UpdateStyleCustom(e)}},{key:"RenderPost",value:function(e){this.renderer.RenderPost(e)}},{key:"MouseRightClick",value:function(){if(this.scene.annotationInstance.implementations.app.CONFIG.LAB){this.renderer.isDash=!this.renderer.isDash;var e=this.ToJSON();e&&this.scene.annotationInstance.io.eventListenerAnnotation.TransformStack([e])}}},{key:"MouseUp",value:function(){}},{key:"ToJSON",value:function(){var e=new rt(this.id,this.type,this.isSelected,this.isHover,this.isHidden);e.PushNode(this.GetNode());var t={isDash:this.renderer.isDash};e.data=t;var n=this.styleComponent.ToJson();return n&&(e.styles=n),e}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){1!==this.numSelectionWhenConstruction++&&(this.scene.capture===this&&this.IsMouseInside(this.scene.annotationInstance.activeCommandController.m.x,this.scene.annotationInstance.activeCommandController.m.y)?(this.isSelected=!0,this.p0.isRenderable=!0,this.p1.isRenderable=!0,this.pm.isRenderable=!0):(this.isSelected=e,this.p0.isRenderable=e,this.p1.isRenderable=e,this.pm.isRenderable=e),this.scene.annotationInstance.io.eventListenerAnnotation.SelectionStack(this.ToJSON()))}},{key:"IsHover",get:function(){return this.isHover},set:function(e){this.isRemove||!this.isRenderable||this.isHidden||this.isUnderConstruction||(this.isHover=e,this.isHover&&!this.isHoverPre?this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()):!this.isHover&&this.isHoverPre&&this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()),this.isHoverPre=this.isHover,this.isSelected||(this.p0.isRenderable=e,this.p1.isRenderable=e,this.pm.isRenderable=e),e||(this.needEmitHoverPost=!0,this.HidePopUpSummary()))}},{key:"IsHidden",get:function(){return this.isHidden},set:function(e){this.isHidden=e,this.p0.isHidden=e,this.p0.Visibility=0,this.pm.isHidden=e,this.pm.Visibility=0,this.p1.isHidden=e,this.p1.Visibility=0,this.scene.annotationInstance.io.eventListenerAnnotation.HideStack(this.ToJSON())}},{key:"IsCaptured",get:function(){return this.isCaptured},set:function(e){this.isCaptured=this.p0.isCaptured=this.pm.isCaptured=this.p1.isCaptured=e}}]),i}(Rt);Object(u.a)(da,"isDone",!1),Object(u.a)(da,"split",!1),Object(u.a)(da,"condition",new function e(){Object(o.a)(this,e)});var ha=function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,null,[{key:"SimplifyPath",value:function(e,t){var n=this.ComputeDouglasPeucker(e,t);return n.push(e[e.length-1]),n}},{key:"ComputeDouglasPeucker",value:function(e,t){if(e.length<=2)return[e[0]];for(var n,i=[],a=new ma(e[0],e[e.length-1]),o=0,r=0,s=1;s<=e.length-2;s++){var c=a.DistanceToPoint(e[s]);c>o&&(o=c,r=s)}return o>=t?(n=e[r],a.DistanceToPoint(n),i=(i=i.concat(this.ComputeDouglasPeucker(e.slice(0,r+1),t))).concat(this.ComputeDouglasPeucker(e.slice(r,e.length),t))):(n=e[r],a.DistanceToPoint(n),i=[e[0]]),i}}]),Object(r.a)(e,[{key:"SimplifyPath",value:function(e,t){var n=this.ComputeDouglasPeucker(e,t);return n.push(e[e.length-1]),n}},{key:"ComputeDouglasPeucker",value:function(e,t){if(e.length<=2)return[e[0]];for(var n,i=[],a=new ma(e[0],e[e.length-1]),o=0,r=0,s=1;s<=e.length-2;s++){var c=a.DistanceToPoint(e[s]);c>o&&(o=c,r=s)}return o>=t?(n=e[r],a.DistanceToPoint(n),i=(i=i.concat(this.ComputeDouglasPeucker(e.slice(0,r+1),t))).concat(this.ComputeDouglasPeucker(e.slice(r,e.length),t))):(n=e[r],a.DistanceToPoint(n),i=[e[0]]),i}}]),e}(),ma=function(){function e(t,n){Object(o.a)(this,e),this.p0=t,this.p1=n}return Object(r.a)(e,[{key:"DistanceToPoint",value:function(e){var t=(this.p1.y-this.p0.y)/(this.p1.x-this.p0.x),n=this.p0.y-t*this.p0.x,i=[];return i.push(Math.abs(e.y-t*e.x-n)/Math.sqrt(Math.pow(t,2)+1)),i.push(Math.sqrt(Math.pow(e.x-this.p0.x,2)+Math.pow(e.y-this.p0.y,2))),i.push(Math.sqrt(Math.pow(e.x-this.p1.x,2)+Math.pow(e.y-this.p1.y,2))),i.sort((function(e,t){return e-t}))[0]}}]),e}(),fa=function(){function e(t,n){Object(o.a)(this,e),this.p0=t,this.p1=n}return Object(r.a)(e,[{key:"PointCloseToLine",value:function(e){var t=this.p1.long-this.p0.long,n=this.p1.lat-this.p0.lat,i=((e.long-this.p0.long)*t+(e.lat-this.p0.lat)*n)/(t*t+n*n);return[ft(this.p0.long,this.p1.long,i),ft(this.p0.lat,this.p1.lat,i)]}},{key:"DistanceToPoint",value:function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var t=(this.p1.lat-this.p0.lat)/(this.p1.long-this.p0.long),n=this.p0.lat-t*this.p0.long,i=[];return i.push(Math.abs(e.lat-t*e.long-n)/Math.sqrt(Math.pow(t,2)+1)),i.push(Math.sqrt(Math.pow(e.long-this.p0.long,2)+Math.pow(e.lat-this.p0.lat,2))),i.push(Math.sqrt(Math.pow(e.long-this.p1.long,2)+Math.pow(e.lat-this.p1.lat,2))),i.sort((function(e,t){return e-t}))[0]}}]),e}(),ya=function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,null,[{key:"SimplifyPathGeoMultPolygon",value:function(t,n){for(var i=[],a=0;a<t.length;a++){var o=e.SimplifyPath(t[a],n);i.push(o)}return i}},{key:"SimplifyPath",value:function(e,t){for(var n=[],i=0;i<e.length;++i){var a=new Oe(0,0,0);a.long=e[i].long,a.lat=e[i].lat,a.proX=e[i].proX,a.proY=e[i].proY,n.push(a)}var o=this.ComputeDouglasPeucker(n,t);return o.push(n[n.length-1]),o}},{key:"ComputeDouglasPeucker",value:function(e,t){if(e.length<=2)return[e[0]];for(var n,i=[],a=new fa(e[0],e[e.length-1]),o=0,r=0,s=1;s<=e.length-2;s++){var c=a.DistanceToPoint(e[s]);c>o&&(o=c,r=s)}return o>=t?(n=e[r],a.DistanceToPoint(n,!0),i=(i=i.concat(this.ComputeDouglasPeucker(e.slice(0,r+1),t))).concat(this.ComputeDouglasPeucker(e.slice(r,e.length),t))):(n=e[r],a.DistanceToPoint(n,!0),i=[e[0]]),i}}]),Object(r.a)(e,[{key:"SimplifyPath",value:function(e,t){var n=this.ComputeDouglasPeucker(e,t);return n.push(e[e.length-1]),n}},{key:"ComputeDouglasPeucker",value:function(e,t){if(e.length<=2)return[e[0]];for(var n,i=[],a=new fa(e[0],e[e.length-1]),o=0,r=0,s=1;s<=e.length-2;s++){var c=a.DistanceToPoint(e[s]);c>o&&(o=c,r=s)}return o>=t?(n=e[r],a.DistanceToPoint(n,!0),i=(i=i.concat(this.ComputeDouglasPeucker(e.slice(0,r+1),t))).concat(this.ComputeDouglasPeucker(e.slice(r,e.length),t))):(n=e[r],a.DistanceToPoint(n,!0),i=[e[0]]),i}}]),e}();function ga(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var va=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(ga()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).geo=e,t}return Object(r.a)(i,[{key:"UpdateProjectionDuplication",value:function(){(this.geo.wrapping.isIntersectLeft||this.geo.wrapping.isIntersectRight)&&this.geo.wrapping.UpdateProjection(this.geo.graphCore.GetVecs())}},{key:"RenderPost",value:function(e){this.interpolateColor.Update(),this.timer.Update(),this.geo.inspector.Update(e),this.geo.UpdateCenVec(),(this.geo.scene.annotationInstance.activeCommandController.acProperties.isPanning||this.geo.scene.annotationInstance.activeCommandController.acProperties.isZooming)&&(this.geo.wrapping.UpdateProjectionShapes(this.geo.graphCore.GetVecs()),this.UpdateProjectionDuplication(),this.geo.UpdateScale()),this.RenderPolygon(e,this.geo.graphCore.vs),this.RenderPolygonDuplication(e)}},{key:"RenderPostNodes",value:function(e){this.geo.scene.annotationInstance.interactionMode===g.k.DRAWING&&((this.geo.isHover||this.geo.isSelected)&&this.RenderNodes(e,this.geo.graphCore.vs,this.geo.scaleForRender),(this.geo.wrapping.isIntersectLeft||this.geo.wrapping.isIntersectRight)&&this.geo.wrapping.vsOther[0]&&(this.geo.isHover||this.geo.isSelected)&&this.RenderNodes(e,this.geo.wrapping.vsOther,this.geo.scaleForRender),this.RenderSelectedVec(e))}},{key:"RenderPolygonDuplication",value:function(e){(this.geo.wrapping.isIntersectLeft||this.geo.wrapping.isIntersectRight)&&this.geo.wrapping.vsOther[0]&&this.RenderPolygon(e,this.geo.wrapping.vsOther)}},{key:"RenderPolygon",value:function(e,t){this.OffscreenRenderPolygon(t),this.geo.isHover||this.geo.isSelected?(this.geo.scene.annotationInstance.renderer.draw.shape.area.PolygonHover(e,this.geo.styleComponent.renderStyle,t,this.geo.isGrayColor,this.geo.visibility,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),this.geo.isHover,this.geo.isSelected),this.tOver+=.01,this.tDown1=0,this.geo.isLeave=!0,this.geo.scene.annotationInstance.renderer.draw.shape.area.Polygon(e,this.geo.styleComponent.renderStyle,t,this.geo.isUnderConstruction,this.geo.isGrayColor,this.geo.visibility,this.geo.isFill,this.geo.IsHover,this.geo.isSelected)):(this.tOver=0,this.geo.scene.annotationInstance.renderer.draw.shape.area.Polygon(e,this.geo.styleComponent.renderStyle,t,this.geo.isUnderConstruction,this.geo.isGrayColor,this.geo.visibility,this.geo.isFill,this.geo.IsHover,this.geo.isSelected))}},{key:"RenderSelectedVec",value:function(e){this.geo.graphCore.selectedVec&&this.geo.scene.annotationInstance.renderer.draw.shape.node.NodeSelected(e,this.geo.styleComponent.renderStyleNodeSelected,this.geo.graphCore.selectedVec.x,this.geo.graphCore.selectedVec.y,this.geo.scaleForRender)}},{key:"RenderNodes",value:function(e,t,n){for(var i=0;i<t.length-1;++i)this.geo.scene.annotationInstance.renderer.draw.shape.node.NodeMidHover(e,this.geo.styleComponent.renderStyleNode,t[i].x+.5*(t[i+1].x-t[i].x),t[i].y+.5*(t[i+1].y-t[i].y),n,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),!1),this.geo.scene.annotationInstance.renderer.draw.shape.node.NodeStart(e,this.geo.styleComponent.renderStyleNode,t[i].x,t[i].y,n,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver));this.geo.scene.annotationInstance.renderer.draw.shape.node.NodeMidHover(e,this.geo.styleComponent.renderStyleNode,t[t.length-1].x+.5*(t[0].x-t[t.length-1].x),t[t.length-1].y+.5*(t[0].y-t[t.length-1].y),n,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),!1),this.geo.scene.annotationInstance.renderer.draw.shape.node.NodeStart(e,this.geo.styleComponent.renderStyleNode,t[t.length-1].x,t[t.length-1].y,n,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver))}},{key:"OffscreenRenderPolygon",value:function(e){this.geo.scene.annotationInstance.renderer.offscreen.PolygonOffScreen(this.geo.scene.annotationInstance.renderer.ctxOffscreen,this.geo.hashColor,e)}}]),i}(Yt),ba=function(){function e(t){Object(o.a)(this,e),this.geo=t}return Object(r.a)(e,[{key:"MouseLeftClick",value:function(){this.geo.graphCore.selVec?this.geo.graphCore.selectedVec=this.geo.graphCore.selVec:(this.geo.graphCore.selectedVec=void 0,this.geo.scene.annotationInstance.geometryCommon.gcmdProcessing.RemoveAllPopup(),this.geo.ShowPopupSummary())}},{key:"MouseRightClick",value:function(){}},{key:"MouseMiddleClick",value:function(e){}},{key:"MouseMoveClick",value:function(e){}}]),e}(),xa=function(){function e(t){Object(o.a)(this,e),this.geo=t}return Object(r.a)(e,[{key:"ToJSON",value:function(){var e=new rt(this.geo.id,g.j[this.geo.scene.annotationInstance.io.MappingCommand(g.j[this.geo.type])],this.geo.isSelected,this.geo.isHover,this.geo.isHidden);return e.PushNode(this.GetNode()),e}},{key:"GetNode",value:function(){for(var e=[],t=0;t<this.geo.graphCore.vs.length;++t)e.push(this.geo.graphCore.vs[t]);return e}},{key:"Remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e){var t=this.ToJSON();t&&this.geo.scene.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack([t])}this.geo.DeepRemove()}}]),e}(),Oa=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"xOff",5),Object(u.a)(this,"yOff",5),this.geo=t}return Object(r.a)(e,[{key:"IsMouseInside",value:function(e,t){return-1!==this.geo.graphCore.IsMouseInside(e,t)||!!this.geo.scene.annotationInstance.geometryCommon.gcmdProcessing.IsMouseInsideByOffScreen(e+this.xOff,t+this.yOff,this.geo.hashColor)}},{key:"GetLog",value:function(){return this.geo.isRemove||!this.geo.isRenderable||this.geo.isHidden?"":"GUID : "+this.geo.id+"/TYPE : "+this.geo.type.toString()+"/Screen : /pos : "+this.geo.graphCore.vs.length+"/Area : "+this.geo.GetArea().toFixed(3).toString()+" m2/IsSEL : "+this.geo.isSelected+"/isSelable : "+this.geo.isSelectable}},{key:"Hide",value:function(){}},{key:"ShowPopupSummary",value:function(){var e=this;this.geo.hasPopup||this.geo.isGhost||(this.geo.hasPopup=!0,this.geo.popup=document.createElement("div"),this.geo.popup.id="pa-"+this.geo.id,this.geo.popup.style.position="absolute",this.geo.popup.style.zIndex="1000",this.geo.popup.style.height="0px",this.geo.popup.style.width="0px",this.geo.popup.style.backgroundColor="red",this.geo.scene.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.appendChild(this.geo.popup),this.geo.popup.style.top=this.geo.vec.y+"px",this.geo.popup.style.left=this.geo.vec.x+"px",setTimeout((function(){e.geo.scene.annotationInstance.io.eventListenerAnnotation.ShowPopupStack(e.geo.ToJSON())}),100))}},{key:"NeedSnapping",value:function(e){for(var t=15,n=t,i=new Oe(-100,-100),a=0;a<this.geo.graphCore.vs.length-1;++a)(n=Z(this.geo.graphCore.vs[a],e))<t&&(t=n,i=this.geo.graphCore.vs[a]),(n=q(e.x,e.y,this.geo.graphCore.vs[a+1].x-this.geo.graphCore.vs[a].x,this.geo.graphCore.vs[a+1].y-this.geo.graphCore.vs[a].y))<t&&(t=n,i.x=this.geo.graphCore.vs[a+1].x-this.geo.graphCore.vs[a].x,i.y=this.geo.graphCore.vs[a+1].y-this.geo.graphCore.vs[a].y);return(n=Z(this.geo.graphCore.vs[this.geo.graphCore.vs.length-1],e))<t&&(t=n,i=this.geo.graphCore.vs[this.geo.graphCore.vs.length-1]),(n=q(e.x,e.y,this.geo.graphCore.vs[this.geo.graphCore.vs.length-1].x-this.geo.graphCore.vs[0].x,this.geo.graphCore.vs[this.geo.graphCore.vs.length-1].y-this.geo.graphCore.vs[0].y))<t&&(t=n,i.x=this.geo.graphCore.vs[this.geo.graphCore.vs.length-1].x-this.geo.graphCore.vs[0].x,i.y=this.geo.graphCore.vs[this.geo.graphCore.vs.length-1].y-this.geo.graphCore.vs[0].y),[t,i]}}]),e}(),wa=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"_tempProjection",[]),Object(u.a)(this,"_needCtrlKey",!0),this.geo=t}return Object(r.a)(e,[{key:"PolygonGraphResetForSplit",value:function(){this._needCtrlKey=!0}},{key:"TranslateByMouseEventData",value:function(e){if(!this.geo.isRemove&&this.geo.isRenderable&&!this.geo.isHidden){var t=e.x-e.preX,n=e.y-e.preY;if(this.geo.graphCore.selVec){if(this.geo.scene.annotationInstance.activeCommandController.acProperties.pressCtrlKey&&this._needCtrlKey&&(this.geo.graphCore.SplitNodeVec(),this._needCtrlKey=!1),this.geo.graphCore.selVec.x+=t,this.geo.graphCore.selVec.y+=n,this._tempProjection=this.geo.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(this.geo.graphCore.selVec.x,this.geo.graphCore.selVec.y),this.geo.graphCore.selVec.long=this._tempProjection[0],this.geo.graphCore.selVec.lat=this._tempProjection[1],this.geo.graphCore.selVec.proX=this._tempProjection[2],this.geo.graphCore.selVec.proY=this._tempProjection[3],this.geo.wrapping.UpdateProjectionShapes(this.geo.graphCore.GetVecs()),this.geo.wrapping.UpdateProjection(this.geo.graphCore.GetVecs()),this.geo.UpdateProjectionDuplication(),this.geo.skipTranslationForLeaderline)return;if(this.geo.textLeaderline&&(this.geo.textLeaderline.TranslateByMouseEventData(e),this.geo.textLeaderline&&this.geo.textLeaderline.leaderline)){this.geo.textLeaderline.leaderline.v2.x+=t,this.geo.textLeaderline.leaderline.v2.y+=n;var i=this.geo.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(this.geo.textLeaderline.leaderline.v2.x,this.geo.textLeaderline.leaderline.v2.y);this.geo.textLeaderline.leaderline.v2.long=i[0],this.geo.textLeaderline.leaderline.v2.lat=i[1],this.geo.textLeaderline.leaderline.v2.proX=i[2],this.geo.textLeaderline.leaderline.v2.proY=i[3]}this.geo.isSelectedNode=!0}else{if(this.geo.graphCore.selMidVec)return this.geo.graphCore.InsertMidVec(),this.geo.wrapping.UpdateProjectionShapes(this.geo.graphCore.GetVecs()),this.geo.wrapping.UpdateProjection(this.geo.graphCore.GetVecs()),this.geo.UpdateProjectionDuplication(),void(this.geo.isSelectedNode=!0);this.geo.isSelectedNode=!1;for(var a=0;a<this.geo.graphCore.vs.length;++a)this.geo.graphCore.vs[a].x+=t,this.geo.graphCore.vs[a].y+=n,this._tempProjection=this.geo.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(this.geo.graphCore.vs[a].x,this.geo.graphCore.vs[a].y),this.geo.graphCore.vs[a].long=this._tempProjection[0],this.geo.graphCore.vs[a].lat=this._tempProjection[1],this.geo.graphCore.vs[a].proX=this._tempProjection[2],this.geo.graphCore.vs[a].proY=this._tempProjection[3],this.geo.wrapping.UpdateProjectionShapes(this.geo.graphCore.GetVecs()),this.geo.wrapping.UpdateProjection(this.geo.graphCore.GetVecs()),this.geo.UpdateProjectionDuplication();if(this.geo.textLeaderline&&(this.geo.textLeaderline.TranslateByMouseEventData(e),this.geo.textLeaderline.leaderline)){this.geo.textLeaderline.leaderline.v2.x+=t,this.geo.textLeaderline.leaderline.v2.y+=n;var o=this.geo.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(this.geo.textLeaderline.leaderline.v2.x,this.geo.textLeaderline.leaderline.v2.y);this.geo.textLeaderline.leaderline.v2.long=o[0],this.geo.textLeaderline.leaderline.v2.lat=o[1],this.geo.textLeaderline.leaderline.v2.proX=o[2],this.geo.textLeaderline.leaderline.v2.proY=o[3]}}}}},{key:"Translate",value:function(e,t){}}]),e}();function ja(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ca=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(ja()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).renderStyle=new Bt,t.renderStyleNode=new Bt,t.renderStyleNodeSelected=new Bt,t.UpdateStyle(),t}return Object(r.a)(i,[{key:"UpdateStyle",value:function(){Bt.UpdateRenderStylePolygon(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent),Bt.UpdateRenderStylePolygonNode(this.renderStyleNode,this.geo.scene.annotationInstance.customization.themeCurrent),Bt.ShiftNodeStyle(this.renderStyleNode,this.renderStyleNodeSelected)}}]),i}(Vt),ka=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"selVec",void 0),Object(u.a)(this,"selMidVec",void 0),Object(u.a)(this,"selectedVec",void 0),Object(u.a)(this,"selVecForTextLeaderline",void 0),Object(u.a)(this,"vs",[]),Object(u.a)(this,"mouseV",new Oe(0,0,0)),Object(u.a)(this,"mouseR",10),Object(u.a)(this,"index",-1),this.host=t,this.index=-1}return Object(r.a)(e,[{key:"InitByVec",value:function(e){this.vs=e}},{key:"GetVecs",value:function(){return this.vs}},{key:"RemoveSelVec",value:function(){this.selVec=void 0,this.selMidVec=void 0,this.selectedVec=void 0,this.vs.length<4?this.host.Remove():this.vs.splice(this.vs.indexOf(this.vs[this.index]),1)}},{key:"GetCenVec",value:function(){this.cVec=xe(this.vs);var e=this.host.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(this.cVec.x,this.cVec.y);return this.cVec.long=e[0],this.cVec.lat=e[1],this.cVec.proX=e[2],this.cVec.proY=e[3],this.cVec}},{key:"GetclosestVec",value:function(e,t){for(var n=-1,i=Number.MAX_SAFE_INTEGER,a=0;a<this.vs.length;++a){var o=Z(e,this.vs[a]);o<t&&o<i&&(i=o,n=a)}if(n>-1)return this.selVec=this.vs[n],this.selVecForTextLeaderline=this.vs[n],this.vs[n];this.selVec=void 0,this.selVecForTextLeaderline=void 0}},{key:"IsMouseInside",value:function(e,t){if(this.mouseV.x=e,this.mouseV.y=t,this.host.wrapping.isIntersectLeft||this.host.wrapping.isIntersectRight){for(var n=0;n<this.host.wrapping.vsOther.length-1;++n){if(Z(this.mouseV,this.host.wrapping.vsOther[n])<this.mouseR*this.host.scaleForRender)return this.selVec=this.vs[n],this.selMidVec=void 0,this.index=n,n;var i=this.host.wrapping.vsOther[n].x+.5*(this.host.wrapping.vsOther[n+1].x-this.host.wrapping.vsOther[n].x),a=this.host.wrapping.vsOther[n].y+.5*(this.host.wrapping.vsOther[n+1].y-this.host.wrapping.vsOther[n].y);if(this.selMidVec=new Oe(i,a,0),Z(this.mouseV,this.selMidVec)<this.mouseR*this.host.scaleForRender)return this.selVec=void 0,this.selMidVec.x=this.vs[n].x+.5*(this.vs[n+1].x-this.vs[n].x),this.selMidVec.y=this.vs[n].y+.5*(this.vs[n+1].y-this.vs[n].y),this.UpdateGeoVec(this.selMidVec),this.index=n,n;this.selMidVec=void 0}if(Z(this.mouseV,this.host.wrapping.vsOther[this.host.wrapping.vsOther.length-1])<this.mouseR*this.host.scaleForRender)return this.selVec=this.vs[this.vs.length-1],this.selMidVec=void 0,this.index=this.vs.length-1,this.vs.length-1;var o=this.host.wrapping.vsOther[this.host.wrapping.vsOther.length-1].x+.5*(this.host.wrapping.vsOther[0].x-this.host.wrapping.vsOther[this.host.wrapping.vsOther.length-1].x),r=this.host.wrapping.vsOther[this.host.wrapping.vsOther.length-1].y+.5*(this.host.wrapping.vsOther[0].y-this.host.wrapping.vsOther[this.host.wrapping.vsOther.length-1].y);if(this.selMidVec=new Oe(o,r,0),Z(this.mouseV,this.selMidVec)<this.mouseR*this.host.scaleForRender)return this.selVec=void 0,this.index=this.vs.length-1,this.selMidVec.x=this.vs[this.host.wrapping.vsOther.length-1].x+.5*(this.vs[0].x-this.vs[this.host.wrapping.vsOther.length-1].x),this.selMidVec.y=this.vs[this.host.wrapping.vsOther.length-1].y+.5*(this.vs[0].y-this.vs[this.host.wrapping.vsOther.length-1].y),this.UpdateGeoVec(this.selMidVec),this.index=this.host.wrapping.vsOther.length-1,this.host.wrapping.vsOther.length-1}for(var s=0;s<this.vs.length-1;++s){if(Z(this.mouseV,this.vs[s])<this.mouseR*this.host.scaleForRender)return this.selVec=this.vs[s],this.selMidVec=void 0,this.index=s,s;var c=this.vs[s].x+.5*(this.vs[s+1].x-this.vs[s].x),l=this.vs[s].y+.5*(this.vs[s+1].y-this.vs[s].y);if(this.selMidVec=new Oe(c,l,0),this.UpdateGeoVec(this.selMidVec),Z(this.mouseV,this.selMidVec)<this.mouseR*this.host.scaleForRender)return this.selVec=void 0,this.index=s,s;this.selMidVec=void 0}if(Z(this.mouseV,this.vs[this.vs.length-1])<this.mouseR*this.host.scaleForRender)return this.selVec=this.vs[this.vs.length-1],this.selMidVec=void 0,this.index=this.vs.length-1,this.vs.length-1;var p=this.vs[this.vs.length-1].x+.5*(this.vs[0].x-this.vs[this.vs.length-1].x),u=this.vs[this.vs.length-1].y+.5*(this.vs[0].y-this.vs[this.vs.length-1].y);return this.selMidVec=new Oe(p,u,0),Z(this.mouseV,this.selMidVec)<this.mouseR*this.host.scaleForRender?(this.selVec=void 0,this.UpdateGeoVec(this.selMidVec),this.index=this.vs.length-1,this.vs.length-1):(this.selVec=void 0,this.selMidVec=void 0,this.index=-1,-1)}},{key:"InsertMidVec",value:function(){this.selMidVec&&(this.vs.splice(this.index+1,0,this.selMidVec),this.selVec=this.selMidVec,this.selMidVec=void 0)}},{key:"SplitNodeVec",value:function(){var e=this.vs[this.index],t=this.vs[this.index+1],n=this.vs[this.index-1];this.index>0&&this.index<this.vs.length-1?(t=this.vs[this.index+1],n=this.vs[this.index-1]):this.index===this.vs.length-1?(t=this.vs[0],n=this.vs[this.index-1]):0===this.index&&(n=this.vs[this.vs.length-1]);var i=H(e,t),a=this.host.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(i.x,i.y);i.long=a[0],i.lat=a[1],i.proX=a[2],i.proY=a[3],this.vs.splice(this.index+1,0,i),i=H(e,n),a=this.host.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(i.x,i.y),i.long=a[0],i.lat=a[1],i.proX=a[2],i.proY=a[3],this.vs.splice(this.index,0,i)}},{key:"UpdateGeoVec",value:function(e){var t=this.host.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(e.x,e.y);e.long=t[0],e.lat=t[1],e.proX=t[2],e.proY=t[3]}}]),e}();function Sa(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ia=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Sa()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e,t){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.j.POLYGON_GRAPH,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return Object(o.a)(this,i),a=n.call(this,e),Object(u.a)(Object(s.a)(a),"isSelectedNode",!1),Object(u.a)(Object(s.a)(a),"torVisMidPt",10),Object(u.a)(Object(s.a)(a),"skipTranslationForLeaderline",!1),a.type=r,a.isUnderConstruction=!1,a.isSelectable=!0,a.isRenderable=!0,a.isFill=!0,a.isUndo=c,a.InitComponent(),a.InitGraph(t),a.UpdateCenVec(),a.InitVecsHistory(),a.wrapping=new Ct(Object(s.a)(a),a.graphCore.GetVecs()),a.wrapping.UpdateProjection(a.graphCore.GetVecs()),a.InitComponent(),a.isUndo||a.scene.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(a.ToJSON()),a.scene.AddAPolygonGraphWrapper(Object(s.a)(a)),a}return Object(r.a)(i,null,[{key:"Cancel",value:function(e){void 0!==e.listAPolylineGraphShadow&&(e.listAPolylineGraphShadow=void 0)}},{key:"DoneByKeyboard",value:function(e){if(void 0!==e.listAPolylineGraphShadow){var t=e.listAPolylineGraphShadow.GetVecs();t?(i.GetPolygon(e,t),e.listAPolylineGraphShadow=void 0,e.annotationInstance.activeCommandController.GoToACMode()):(e.listAPolylineGraphShadow=void 0,e.annotationInstance.activeCommandController.GoToACMode())}}},{key:"Undo",value:function(e,t){void 0!==e.listAPolylineGraphShadow&&e.listAPolylineGraphShadow.Undo()}},{key:"MouseDown",value:function(e,t){void 0!==e.listAPolylineGraphShadow&&e.listAPolylineGraphShadow.ps.length>0&&e.listAPolylineGraphShadow.Add(new Oe(t.x,t.y))}},{key:"MouseLeftClick",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g.j.POLYGON_GRAPH;void 0===e.capture&&(void 0===e.listAPolylineGraphShadow&&(e.listAPolylineGraphShadow=new Nn(e,n),e.listAPolylineGraphShadow.Add(new Oe(t.x,t.y)),e.listAPolylineGraphShadow.Add(new Oe(t.x,t.y))),e.annotationInstance.implementations.app.model.ioWrapper.eventInteraction.isEnableZoomByDoubleClick=!1)}},{key:"MouseMove",value:function(e,t){if(void 0!==e.listAPolylineGraphShadow){if(e.annotationInstance.activeCommandController.acProperties.pressShift){var n=e.listAPolylineGraphShadow.ps[e.listAPolylineGraphShadow.ps.length-1];Z(n.v,new Oe(t.x,t.y))>20&&e.listAPolylineGraphShadow.Add(new Oe(t.x,t.y))}e.listAPolylineGraphShadow.ps.length>1&&e.listAPolylineGraphShadow.MouseMove(t.x,t.y)}}},{key:"MouseDoubleClick",value:function(e,t){if(void 0!==e.listAPolylineGraphShadow){if(e.annotationInstance.activeCommandController.IsTouchEvent){if(e.listAPolylineGraphShadow.ps.length>1){var n=e.listAPolylineGraphShadow.GetVecs();n&&((n=n.slice(0,n.length-1))?(i.GetPolygon(e,n),e.listAPolylineGraphShadow=void 0,e.annotationInstance.activeCommandController.GoToACMode()):(e.listAPolylineGraphShadow=void 0,e.annotationInstance.activeCommandController.GoToACMode()))}}else if(e.listAPolylineGraphShadow.ps.length>1){var a=e.listAPolylineGraphShadow.GetVecs();a?(i.GetPolygon(e,a),e.listAPolylineGraphShadow=void 0,e.annotationInstance.activeCommandController.GoToACMode()):(e.listAPolylineGraphShadow=void 0,e.annotationInstance.activeCommandController.GoToACMode())}e.annotationInstance.implementations.app.model.ioWrapper.eventInteraction.isEnableZoomByDoubleClick=!0}}},{key:"GetPolygonbyVecs",value:function(e,t){return this.GetPolygon(e,t)}},{key:"GetPolygon",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var n=0;n<t.length;++n){var a=e.annotationInstance.geometryCommon.gcmdSupporting.ToMap(t[n].x,t[n].y);t[n].long=a[0],t[n].lat=a[1],t[n].proX=a[2],t[n].proY=a[3]}return e.listAPolylineGraphShadow=void 0,new i(e,t,g.j.POLYGON_GRAPH,!1,!0)}},{key:"FromJSON",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[],r=0;r<t.nodes.length;++r){var s=e.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(t.nodes[r].proX,t.nodes[r].proY),c=new Oe(s[0],s[1]);c.proX=t.nodes[r].proX,c.proY=t.nodes[r].proY,c.proZ=t.nodes[r].proZ,c.lat=t.nodes[r].lat,c.long=t.nodes[r].long,c.ele=t.nodes[r].ele,o.push(c)}var l=new i(e,o,g.j.POLYGON_GRAPH,!0);return l.type=g.j[t.type],l.id=a?e.GetUUID():t.id,l.isUnderConstruction=!1,l.IsHover=!1,l.isHidden=t.isHidden,t.isHidden?l.visibility=0:l.visibility=1,t.data.scale&&l.InitScale(t.data.scale),l.InitVecsHistory(),n||e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(l.ToJSON()),l}}]),Object(r.a)(i,[{key:"InitComponent",value:function(){this.styleComponent=new Ca(this),this.mouseEventComponent=new ba(this),this.ioComponent=new xa(this),this.interactionComponent=new Oa(this),this.transformationComponent=new wa(this),this.renderer=new va(this)}},{key:"InitGraph",value:function(e){this.graphCore=new ka(this),this.graphCore.InitByVec(e)}},{key:"UpdateProjectionDuplication",value:function(){this.renderer.UpdateProjectionDuplication()}},{key:"UpdateCenVec",value:function(){this.vec=this.graphCore.GetCenVec()}},{key:"PolygonGraphResetForSplit",value:function(){this.transformationComponent.PolygonGraphResetForSplit()}},{key:"NeedSnapping",value:function(e){return this.interactionComponent.NeedSnapping(e)}},{key:"GetVecForSnapping",value:function(){return this.graphCore.selVec}},{key:"GetVecs",value:function(){return this.graphCore.vs}},{key:"GoToBlackhole",value:function(){this.needBlackhole=!0,this.tVec=this.scene.annotationInstance.renderer.blackhole.v,this.isAniAccel=!0}},{key:"IsMoveUpdate",value:function(){this.vecsHistory.length<1||(Y(this.vecsHistory[this.vecsHistory.length-1],this.vec,this.scene.annotationInstance.activeCommandController.zoomLevelForMoving)?(this.IsMove=!1,this.IsTransform=!1):(this.IsMove=!0,this.IsTransform=!0))}},{key:"Remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.isRemove&&this.isRenderable&&!this.isHidden)return this.graphCore.selectedVec?(this.graphCore.RemoveSelVec(),void this.scene.annotationInstance.io.eventListenerAnnotation.TransformStack([this.ToJSON()])):void this.ioComponent.Remove(e)}},{key:"DeepRemove",value:function(){this.isSelectable=!1,this.isRenderable=!1,this.HidePopUpSummary(),this.scene.RemoveAPolygonGraphWrapper(this),this.scene.RemoveGeometry(this)}},{key:"IsMouseInside",value:function(e,t){return this.interactionComponent.IsMouseInside(e,t)}},{key:"GetLog",value:function(){return this.interactionComponent.GetLog()}},{key:"Hide",value:function(){this.interactionComponent.Hide()}},{key:"TranslateByMouseEventData",value:function(e){this.transformationComponent.TranslateByMouseEventData(e)}},{key:"Translate",value:function(e,t){this.transformationComponent.Translate(e,t)}},{key:"ToJSON",value:function(){return this.ioComponent.ToJSON()}},{key:"MouseLeftClick",value:function(){this.mouseEventComponent.MouseLeftClick()}},{key:"MouseRightClick",value:function(){this.mouseEventComponent.MouseRightClick()}},{key:"RenderPost",value:function(e){this.renderer.RenderPost(e)}},{key:"RenderPostNodes",value:function(e){this.renderer.RenderPostNodes(e)}},{key:"GetBoundary",value:function(){return[this.vec]}},{key:"ShowPopupSummary",value:function(){this.interactionComponent.ShowPopupSummary()}},{key:"GetclosestNode",value:function(e,t){if(this.graphCore.GetclosestVec(e,t))return this}},{key:"FindClosestVec",value:function(e){return this.graphCore.GetclosestVec(e,20)}},{key:"UpdatePopup",value:function(){this.hasPopup&&void 0!==this.popup&&(this.hasGhostPopup?(this.popup.style.top=this.vec.y-this.scene.annotationInstance.customization.themeCurrent.nPoint.height-this.ghostPopupOffset+"px",this.popup.style.left=this.vec.x+"px"):(this.popup.style.top=this.vec.y+"px",this.popup.style.left=this.vec.x+"px"))}},{key:"CheckAttachedTextleaderline",value:function(){if(!this.textLeaderline||!this.textLeaderline.leaderline)return!1;if(this.graphCore.selVec&&this.textLeaderline&&this.textLeaderline.leaderline){if(Z(this.graphCore.selVec,this.textLeaderline.leaderline.v2)>5)return this.skipTranslationForLeaderline=!0,!1;this.skipTranslationForLeaderline=!1}for(var e=!1,t=0;t<this.graphCore.vs.length;++t)Z(this.graphCore.vs[t],this.textLeaderline.leaderline.v2)<5&&(e=!0);return!!e||(this.textLeaderline.attachedShape=void 0,this.textLeaderline=void 0,!1)}},{key:"IsHidden",get:function(){return this.isHidden},set:function(e){this.isHiddenPre=this.isHidden,this.isHidden=e,this.scene.annotationInstance.io.eventListenerAnnotation.HideStack(this.ToJSON())}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){this.isRemove||!this.isRenderable||this.isHidden||this.graphCore.selVec||(this.isSelected=e,e||(this.graphCore.selectedVec=void 0),this.scene.annotationInstance.io.eventListenerAnnotation.SelectionStack(this.ToJSON()))}},{key:"IsHover",get:function(){return this.isHover},set:function(e){this.isUnderConstruction||(this.isHover=e,this.isHover&&!this.isHoverPre?this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()):!this.isHover&&this.isHoverPre&&this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()),this.isHoverPre=this.isHover,e||(this.needEmitHoverPost=!0,this.HidePopUpSummary()))}}]),i}(wt);function Pa(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}Object(u.a)(Ia,"isSplit",!0);var Ra=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Pa()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).host=e,t}return Object(r.a)(i,[{key:"RenderPost",value:function(e){this.timer.Update(),Aa.isTooltipRenderable,this.host.vecs.length<2||(this.host.isFreehandDrawing?this.host.scene.annotationInstance.renderer.draw.shape.freeHand.FreeHandbyVecs(e,this.host.styleComponent.renderStyle,this.host.vecs,this.host.isClosed):this.host.Remove())}}]),i}(Yt);function Ea(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Da=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Ea()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).renderStyle=new Bt,t.renderStyleNode=new Bt,t.UpdateStyle(),t}return Object(r.a)(i,[{key:"UpdateStyle",value:function(){Bt.UpdateRenderStyleFH(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent),Bt.UpdateRenderStyleFH(this.renderStyleNode,this.geo.scene.annotationInstance.customization.themeCurrent)}},{key:"UpdateStyleByFHType",value:function(e){e===g.i.PGON?(Bt.UpdateRenderStyleFHPolygon(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent),Bt.UpdateRenderStyleFHPolygonNode(this.renderStyleNode,this.geo.scene.annotationInstance.customization.themeCurrent)):e===g.i.PLINE_BENDING&&(Bt.UpdateRenderStyleFHPolyline(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent),Bt.UpdateRenderStyleFHPolylineNode(this.renderStyleNode,this.geo.scene.annotationInstance.customization.themeCurrent))}}]),i}(Vt);function Ta(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ma,Aa=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Ta()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e,t){var a;return Object(o.a)(this,i),a=n.call(this,e),Object(u.a)(Object(s.a)(a),"vecs",[]),a.typeFreehand=t,a.typeFreehand===g.i.PGON||a.typeFreehand===g.i.POLYGON||a.typeFreehand===g.i.POLYGON_GRAPH?a.isClosed=!0:a.isClosed=!1,a.direction=0,a.isFreehandDrawing=!0,a.optimizer=g.n.DOUGLAS_PEUCKER,a.InitComponent(),i.geo=Object(s.a)(a),a.Init(),a}return Object(r.a)(i,null,[{key:"Cancel",value:function(){void 0!==i.construction&&i.construction.Remove(),i.construction=void 0}},{key:"MouseDown",value:function(e,t,n){e.annotationInstance.geometryCommon.gcmdProcessing.DeSelecteAllObjects(),i.isTooltipRenderable=!1}},{key:"MouseDrag",value:function(e,t,n){void 0===i.construction&&this.MouseMove(e,t,n),i.isTooltipRenderable=!1,i.construction&&i.construction.AddVecs(t.x,t.y)}},{key:"MouseUp",value:function(e,t){if(void 0!==i.construction){if(i.construction.vecs.length<2)return;i.construction.ComputeVector(),i.construction.isFreehandDrawing=!1,e.annotationInstance.activeCommandController.GoToACMode(),i.construction=void 0}}},{key:"MouseMove",value:function(e,t,n){void 0===i.geo&&(void 0===e.annotationInstance.geometryCommon.gcmdProcessing.FindAtPoint(t)&&(i.construction=new i(e,n),i.construction.styleComponent.UpdateStyleByFHType(n)));i.vecTooltip[0]=t.x,i.vecTooltip[1]=t.y}}]),Object(r.a)(i,[{key:"InitComponent",value:function(){this.styleComponent=new Da(this),this.renderer=new Ra(this)}},{key:"Init",value:function(){this.scene.AddAFreehand(this)}},{key:"AddVecs",value:function(e,t){this.vecs.push(new Oe(e,t))}},{key:"CheckDotProduct",value:function(e){var t=[];t.push(e[0]);for(var n=0;n<e.length-5;++n){var i=V(e[n],e[n+1]);i=K(i);var a=V(e[n],e[n+2]);a=K(a);var o=V(e[n],e[n+3]);a=K(o);var r=V(e[n],e[n+4]);r=K(r);var s=V(e[n],e[n+5]);s=K(s);var c=ee(i,a),l=ee(i,o),p=ee(i,o);(isNaN(c)||isNaN(l)||isNaN(p))&&t.push(e[n])}return t.push(e[e.length-1]),t}},{key:"DivVecs",value:function(e){return e}},{key:"GetPtByVs",value:function(e){for(var t=e.length;t--;){new $t(this.scene,e[t].x,e[t].y).Dummy()}}},{key:"ComputeVector",value:function(){var e=this.vecs;if(this.typeFreehand===g.i.SMDRAWING)e=this.CheckDotProduct(e),e=this.DivVecs(e),this.GetPtByVs(e);else{if(this.optimizer===g.n.DOUGLAS_PEUCKER?e=ha.SimplifyPath(e,2):this.optimizer===g.n.REGULAR&&(e=ye(e,30)),e.length<2)return;this.typeFreehand===g.i.CURVE_CLOSED&&$i.GetCurveByVecs(this.scene,e,!0),this.typeFreehand===g.i.CURVE&&$i.GetCurveByVecs(this.scene,e),this.typeFreehand===g.i.PLINE_BENDING&&Un.GetPolyline(this.scene,e),this.typeFreehand===g.i.PLINE&&Cn.GetPolylineByVecs(this.scene,e),this.typeFreehand===g.i.PGON&&Pn.GetPolygonbyVecs(this.scene,e),this.typeFreehand===g.i.POLYGON_GRAPH&&Ia.GetPolygonbyVecs(this.scene,e),this.Remove()}}},{key:"GetLog",value:function(){return""}},{key:"IsMouseInside",value:function(e,t){return!1}},{key:"TranslateByMouseEventData",value:function(e){}},{key:"Translate",value:function(e,t){}},{key:"Hide",value:function(){}},{key:"Remove",value:function(){i.geo=void 0,this.scene.RemoveGeometry(this),this.scene.RemoveAFreehand(this)}},{key:"ToJSON",value:function(){}},{key:"RenderPost",value:function(e){this.renderer.RenderPost(e)}}]),i}(wt);function Na(e){return function(){var t,n=Object(l.a)(e);if(La()){var i=Object(l.a)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return Object(c.a)(this,t)}}function La(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}Object(u.a)(Aa,"isClose",!1),Object(u.a)(Aa,"isTooltipRenderable",!1),Object(u.a)(Aa,"vecTooltip",[0,0]),function(e){e.CIRCLE="CIRCLE",e.DIAMOND="DIAMOND",e.LEFT="LEFT",e.RIGHT="RIGHT"}(Ma||(Ma={}));var Ga=function(){function e(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ma.CIRCLE;Object(o.a)(this,e),Object(u.a)(this,"r",6),Object(u.a)(this,"diaHeight",6.5),Object(u.a)(this,"diaWidth",6.5),Object(u.a)(this,"isConnected",!0),this.caText=t,this.type=a,this.vec=new Oe(n,i)}return Object(r.a)(e,[{key:"IsMouseInside",value:function(e,t){return Z(new Oe(e,t),this.vec)<this.r+5}},{key:"UpdatePos",value:function(e,t){this.vec.x=e,this.vec.y=t}},{key:"Render",value:function(e){this.caText.scene.annotationInstance.renderer.draw.shape.text.RenderNodeDia(e,this.caText.styleComponent,this.vec.x,this.vec.y,this.diaWidth,this.diaHeight)}}]),e}(),_a=function(e){Object(p.a)(n,e);var t=Na(n);function n(e,i,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ma.CIRCLE;return Object(o.a)(this,n),t.call(this,e,i,a,r)}return n}(Ga),Ba=function(e){Object(p.a)(n,e);var t=Na(n);function n(e,i,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ma.DIAMOND;return Object(o.a)(this,n),t.call(this,e,i,a,r)}return n}(Ga),Wa=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"offsetForTextDiv",10),this.wrapper=t,this.ShowTextDiv();var n=[255,0,0,1];this.textCol="rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(n[3],")")}return Object(r.a)(e,[{key:"UpdateDiv",value:function(){if(this.divText){var e=this.wrapper.scene.annotationInstance.customization.themeCurrent.textleaderline.scale,t=.5*((this.wrapper.v1.x-this.wrapper.v0.x)*e);this.divText.style.left=1===e?this.wrapper.vecOffset.x+this.offsetForTextDiv*e-t+"px":this.wrapper.vecOffset.x-t+"px",this.divText.style.top=this.wrapper.vUp.vec.y+Math.abs(this.wrapper.v1.y-this.wrapper.v0.y)-.5*Math.abs(this.wrapper.v1.y-this.wrapper.v0.y)+"px",this.divText.style.top=this.wrapper.v0.y+this.offsetForTextDiv+"px",this.divText.style.width=(this.wrapper.width-2*this.offsetForTextDiv)*e+"px"}this.divTextAnchor&&(this.divTextAnchor.style.top=this.wrapper.v0.y-this.wrapper.offsetForTextEditor+"px",this.divTextAnchor.style.left=this.wrapper.v0.x+"px")}},{key:"HideTextDiv",value:function(){this.wrapper.scene.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.removeChild(this.divText),this.wrapper.scene.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.removeChild(this.divTextAnchor),this.divText=void 0,this.divTextAnchor=void 0,this.wrapper.scene.annotationInstance.io.eventListenerAnnotation.HideTextStack(this.wrapper.ToJSON())}},{key:"ShowTextDiv",value:function(){this.GetDivBaseContainer(),this.GetDivAnchor(),this.wrapper.isUnderConstruction||this.wrapper.scene.annotationInstance.io.eventListenerAnnotation.ShowTextStack(this.wrapper.ToJSON())}},{key:"FoucsOnTextDiv",value:function(){document.getElementById("text-editor-"+this.wrapper.id)&&(this.wrapper.scene.annotationInstance.io.eventListenerAnnotation.StartEditingText(this.wrapper.ToJSON()),this.wrapper.scene.annotationInstance.activeCommandController.IsTextEditing=!0)}},{key:"GetDivAnchor",value:function(){var e=document.createElement("div");return e.id="text-toolbar-"+this.wrapper.id,e.style.position="absolute",e.style.height="0px",e.style.width="0px",e.style.backgroundColor="#00ff00",e.style.top=this.wrapper.v0.y-this.wrapper.offsetForTextEditor+"px",e.style.left=this.wrapper.v0.x+"px",this.divTextAnchor=e,this.wrapper.scene.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.insertBefore(this.divTextAnchor,this.wrapper.scene.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvasMask.canvas),e}},{key:"GetDivBaseContainer",value:function(){var e=this,t=document.createElement("div");return t.id="text-editor-"+this.wrapper.id,t.style.position="absolute",t.style.textOverflow="false",t.style.minWidth=this.wrapper.widthMin-2*this.offsetForTextDiv+"px",t.style.width=this.wrapper.width-2*this.offsetForTextDiv+"px",t.style.left=this.wrapper.v0.x+this.offsetForTextDiv+"px",t.style.top=this.wrapper.v0.y+this.offsetForTextDiv+"px",t.onmousedown=function(){e.wrapper.scene.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode===g.k.DRAWING&&(e.wrapper.scene.annotationInstance.activeCommandController.IsTextEditing=!0)},t.addEventListener("keydown",(function(n){e.wrapper&&t.clientHeight&&(e.wrapper.height=t.clientHeight,e.wrapper.UpdateBoundingBox()),t.textContent,e.wrapper.scene.annotationInstance.graphicsCoreWrapper.RenderForce()})),this.wrapper.scene.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.insertBefore(t,this.wrapper.scene.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvasMask.canvas),this.divText=t,t}},{key:"textCol",set:function(e){this.divText.style.color="black"}}]),e}(),Va=function(){function e(t){Object(o.a)(this,e),this.wrapper=t}return Object(r.a)(e,[{key:"ToJSON",value:function(){var e=new rt(this.wrapper.id,g.j.TEXT_LEADERLINE,this.wrapper.isSelected,this.wrapper.isHover,this.wrapper.isHidden);0!==this.wrapper.widthOffset||0!==this.wrapper.heightOffset?e.PushNode([this.wrapper.vec,new Oe(this.wrapper.widthOffset,this.wrapper.heightOffset)]):e.PushNode([this.wrapper.vec]),e.data={content:this.wrapper.contentHtmltemp,width:this.wrapper.width,height:this.wrapper.height,version:2,zoom:this.wrapper.renderer.zoomLevel};var t=this.wrapper.styleComponent.ToJson();return t&&(e.styles=t),e}},{key:"GetLog",value:function(){return"GUID : "+this.wrapper.id+"/TYPE : "+this.wrapper.type.toString()+"/Geo : lat:"+this.wrapper.vec.long.toFixed(5).toString()+", Log:"+this.wrapper.vec.lat.toFixed(5).toString()+"/Screen : SIZE : "+this.wrapper.r+" pixel/IsCap :"+this.wrapper.isCaptured+"/IsSEL : "+this.wrapper.isSelected+"/IsHid : "+this.wrapper.isHidden+"/IsDeg : "+this.wrapper.isDrag+"/isSelable : "+this.wrapper.isSelectable+"/hasLeaderline : "+this.wrapper.leaderline}},{key:"ProcessingUpdate",value:function(e){var t=JSON.parse(e);t.content&&(this.wrapper.contentHtmltemp=t.content),this.wrapper.scene.annotationInstance.io.eventListenerAnnotation.UpdateStack(this.ToJSON())}},{key:"DeepCopy",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=this.ToJSON();if(n){var i=go.FromJSON(this.wrapper.scene,n,!0,!0);return i.Move(e,t),i.IsHover=!1,i.EmitAddStack(),i}}},{key:"Remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.wrapper.scene.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.drawing){if(this.wrapper.attachedShape&&(this.wrapper.attachedShape.textLeaderline=void 0),this.wrapper.isSelectedReaderlineByClick)return this.wrapper.leaderline=void 0,this.wrapper.IsSelected=!1,void this.wrapper.scene.annotationInstance.io.eventListenerAnnotation.TransformStack([this.ToJSON()]);if(!this.wrapper.scene.annotationInstance.activeCommandController.acProperties.isTextEditing){if(this.wrapper.RemoveDiv(),e){var t=this.ToJSON();t&&(this.wrapper.scene.annotationInstance.io.eventListenerAnnotation.HideTextStack(t),this.wrapper.scene.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack([t]))}this.wrapper.scene.RemoveATextleaderlineWrapper(this.wrapper),this.wrapper.scene.RemoveGeometry(this.wrapper)}}}},{key:"RemoveByAttachedShape",value:function(){this.wrapper.projection.UpdateGoeVec(),this.wrapper.leaderline=void 0,this.wrapper.attachedShape&&(this.wrapper.attachedShape.textLeaderline=void 0,this.wrapper.attachedShape=void 0),this.ResetAnchorVec(),this.wrapper.scene.annotationInstance.io.eventListenerAnnotation.TransformStack([this.ToJSON()])}},{key:"RemoveLeaderline",value:function(){this.wrapper.leaderline=void 0,this.wrapper.attachedShape&&(this.wrapper.attachedShape.textLeaderline=void 0,this.wrapper.attachedShape=void 0),this.ResetAnchorVec(),this.wrapper.scene.annotationInstance.io.eventListenerAnnotation.TransformStack([this.ToJSON()])}},{key:"RemoveDiv",value:function(){try{this.wrapper.scene.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div&&(this.wrapper.scene.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.removeChild(this.wrapper.txtDiv.divText),this.wrapper.scene.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.removeChild(this.wrapper.txtDiv.divTextAnchor))}catch(e){console.error(e)}}},{key:"ResetAnchorVec",value:function(){this.wrapper.widthOffset=0,this.wrapper.heightOffset=0,this.wrapper.vUp.isConnected&&(this.wrapper.vecOffset.y+=this.wrapper.height),this.wrapper.vec.x=this.wrapper.vecOffset.x,this.wrapper.vec.y=this.wrapper.vecOffset.y;var e=this.wrapper.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(this.wrapper.vec.x,this.wrapper.vec.y);this.wrapper.vec.long=e[0],this.wrapper.vec.lat=e[1],this.wrapper.vec.proX=e[2],this.wrapper.vec.proY=e[3],this.wrapper.UpdateVecs()}}]),e}(),Fa=function(){function e(t){Object(o.a)(this,e),this.wrapper=t}return Object(r.a)(e,[{key:"OutExtent",value:function(){this.wrapper.UpdateScreenVecForPan(),this.wrapper.isInsideExtent&&(this.wrapper.txtDiv.HideTextDiv(),this.wrapper.isInsideExtent=!1)}},{key:"InExtent",value:function(){this.wrapper.isInsideExtent||(this.wrapper.txtDiv.ShowTextDiv(),this.wrapper.isInsideExtent=!0)}},{key:"UpdateScreenVecByProjectedPos",value:function(){var e=this.wrapper.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(this.wrapper.vec.proX,this.wrapper.vec.proY);this.wrapper.vec.x=e[0],this.wrapper.vec.y=e[1]}},{key:"UpdateGoeVec",value:function(){var e=this.wrapper.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(this.wrapper.vec.x,this.wrapper.vec.y);this.wrapper.vec.long=e[0],this.wrapper.vec.lat=e[1],this.wrapper.vec.proX=e[2],this.wrapper.vec.proY=e[3]}}]),e}(),Ua=function(){function e(t,n){Object(o.a)(this,e),Object(u.a)(this,"isHover",!0),Object(u.a)(this,"t",0),Object(u.a)(this,"r",2.5),Object(u.a)(this,"isDrag",!1),Object(u.a)(this,"isMouseClick",!1),Object(u.a)(this,"isUpperDia",!1),this.caText=t,this.v0=n.vec,this.vecOffset=new Oe(0,0),this.v1=new Oe(this.v0.x,this.v0.y),this.v1Render=new Oe(this.v0.x,this.v0.y),this.v2=new Oe(this.v0.x,this.v0.y),this.vecsHistory=[this.v2]}return Object(r.a)(e,[{key:"IsMouseInside",value:function(e,t){var n=new Oe(e,t);return de(n,this.v0,this.v1)<10||de(n,this.v1,this.v2)<10}},{key:"UpdateMidV",value:function(){this.v1.x=this.v0.x,this.v1.y=this.v2.y,this.v1Render.x=this.caText.vecOffset.x,this.v1Render.y=this.caText.vec.y}},{key:"UpdateTransformationStack",value:function(){Z(this.v2,new Oe(this.caText.mouseX,this.caText.mouseY))<this.r&&(this.caText.scene.annotationInstance.activeCommandController.acProperties.isDown||this.isMouseClick||(this.caText.scene.annotationInstance.io.eventListenerAnnotation.TransformStack([this.caText.ToJSON()]),this.isMouseClick=!0),this.caText.scene.annotationInstance.activeCommandController.acProperties.isDown&&(this.isMouseClick=!1))}},{key:"RenderLeaderLine",value:function(e){this.v0=this.caText.vecOffset,this.v2=this.caText.vec,this.isDrag&&(this.isDrag=!1,this.v2=W(this.vecsHistory[this.vecsHistory.length-1])),this.UpdateMidV(),this.caText.wrapping.IsOutOfExtent(this.caText.GetVecs())||(this.caText.scene.annotationInstance.renderer.draw.shape.text.RenderLeaderLine(e,this.caText.styleComponent,this.caText.vecOffset,this.v1Render,this.v2,this.t,this.isUpperDia,this.caText.isHover,this.caText.isSelected),this.t+=.1)}},{key:"v2",get:function(){return this._v2},set:function(e){this._v2=e}}]),e}();function za(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ha=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(za()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),t=n.call(this,e),Object(u.a)(Object(s.a)(t),"_isSelectedReaderline",!1),t.wrapper=e,t}return Object(r.a)(i,[{key:"TranslateByMouseEventData",value:function(e){if(this.wrapper.mouseX=e.x,this.wrapper.mouseY=e.y,this.wrapper.isRenderable&&!this.wrapper.isHidden&&!this.wrapper.enableEdit&&this.wrapper.enableDrag)if(this.wrapper.isRenderCollapse)this.TranslateByMouseEventDataCollapse(e);else{var t=e.x-e.preX,n=e.y-e.preY,i=!1;if(this.wrapper.nodeSelected){if(this.wrapper.width=this.wrapper.v1.x-this.wrapper.v0.x,this.wrapper.nodeSelected.type===Ma.LEFT?(this.wrapper.width-t>this.wrapper.widthMin+2?this.wrapper.v0.x+=t:this.wrapper.v0.x-=2,i=!0):this.wrapper.nodeSelected.type===Ma.RIGHT&&(this.wrapper.width+t>this.wrapper.widthMin+2?this.wrapper.v1.x+=t:this.wrapper.v1.x+=2,i=!0),this.wrapper.nodeSelected.type===Ma.DIAMOND){if(this.wrapper.attachedShape&&(this.wrapper.attachedShape.textLeaderline&&(this.wrapper.attachedShape.textLeaderline=void 0),this.wrapper.attachedShape=void 0),this.wrapper.LeadlineInteraction(e.x,e.y),this.wrapper.leaderline){var a=this.wrapper.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(this.wrapper.vec.x,this.wrapper.vec.y);this.wrapper.vec.long=a[0],this.wrapper.vec.lat=a[1],this.wrapper.vec.proX=a[2],this.wrapper.vec.proY=a[3],this.wrapper.vUp.isConnected&&(this.wrapper.vecOffset.x=this.wrapper.v0.x+.5*(this.wrapper.v1.x-this.wrapper.v0.x),this.wrapper.vecOffset.y=this.wrapper.v1.y,this.wrapper.widthOffset=this.wrapper.vecOffset.x-this.wrapper.vec.x,this.wrapper.heightOffset=this.wrapper.vecOffset.y-this.wrapper.vec.y)}return this.wrapper.ComputeCenterVec(),void this.wrapper.UpdateBoundingBox()}}else{if(this.wrapper.nodeTargetLeaderLine)return this.UpdateLeaderlineTarget(e.x,e.y),this.wrapper.vecOffset.x=this.wrapper.v0.x+.5*(this.wrapper.v1.x-this.wrapper.v0.x),this.wrapper.vecOffset.y=this.wrapper.v0.y+.5*(this.wrapper.v1.y-this.wrapper.v0.y),this.wrapper.widthOffset=this.wrapper.vecOffset.x-this.wrapper.vec.x,this.wrapper.heightOffset=this.wrapper.vecOffset.y-this.wrapper.vec.y+.5*this.wrapper.height,this.wrapper.ComputeCenterVec(),this.wrapper.UpdateVecsBox(),void this.wrapper.UpdateBoundingBox();this.wrapper.v0.x+=t,this.wrapper.v0.y+=n,this.wrapper.v1.x+=t,this.wrapper.v1.y+=n}i?this.wrapper.leaderline?(this.wrapper.vecOffset.x=this.wrapper.v0.x+.5*(this.wrapper.v1.x-this.wrapper.v0.x),this.wrapper.widthOffset=this.wrapper.vecOffset.x-this.wrapper.vec.x):(this.wrapper.vec.x=this.wrapper.v0.x+.5*(this.wrapper.v1.x-this.wrapper.v0.x),this.wrapper.vecOffset.x=this.wrapper.v0.x+.5*(this.wrapper.v1.x-this.wrapper.v0.x),this.wrapper.widthOffset=0,this.wrapper.heightOffset=0):this.wrapper.leaderline?(this.wrapper.vecOffset.x=this.wrapper.v0.x+.5*(this.wrapper.v1.x-this.wrapper.v0.x),this.wrapper.vecOffset.y=this.wrapper.v0.y+.5*(this.wrapper.v1.y-this.wrapper.v0.y),this.wrapper.widthOffset=this.wrapper.vecOffset.x-this.wrapper.vec.x,this.wrapper.heightOffset=this.wrapper.vecOffset.y-this.wrapper.vec.y+.5*this.wrapper.height,this.wrapper.UpdateVecsBox()):(this.wrapper.vec.x+=t,this.wrapper.vec.y+=n,this.wrapper.vecOffset.x+=this.wrapper.vec.x,this.wrapper.vecOffset.y+=this.wrapper.vec.y,this.wrapper.widthOffset=0,this.wrapper.heightOffset=0,this.wrapper.UpdateVecsBox()),this.wrapper.ComputeCenterVec(),this.wrapper.projection.UpdateGoeVec(),this.wrapper.txtDiv.UpdateDiv(),this.UpdateSideNodes(),this.UpdateConectNodes(),this.wrapper.UpdateBoundingBox()}}},{key:"TranslateByMouseEventDataCollapse",value:function(e){var t=e.x-e.preX,n=e.y-e.preY;this.wrapper.leaderline?(this.wrapper.vecOffset.x+=t,this.wrapper.vecOffset.y+=n,this.wrapper.widthOffset+=t,this.wrapper.heightOffset+=n,this.UpdateSideNodes()):(this.wrapper.widthOffset=0,this.wrapper.heightOffset=0,this.wrapper.vecOffset.x+=t,this.wrapper.vecOffset.y+=n,this.wrapper.vec.x+=t,this.wrapper.vec.y+=n),this.wrapper.UpdateVecsBox(),this.wrapper.UpdateBoundingBox()}},{key:"MouseLeftClick",value:function(e,t){if(this.wrapper.scene.captureText=this.wrapper,this.wrapper.isCollapse)return this.wrapper.collision.isCollided=!1,this.wrapper.isCollapse=!1,void this.wrapper.txtDiv.FoucsOnTextDiv();this.wrapper.IsSelectedReaderline?this.wrapper.isSelectedReaderlineByClick=!0:this.wrapper.isSelectedReaderlineByClick=!1,this.wrapper.isSelectedReaderlineByClick||this.wrapper.IsMouseInsideDiv(e,t)&&this.wrapper.txtDiv.FoucsOnTextDiv()}},{key:"MouseUp",value:function(){this.wrapper.SnapForPoint()}},{key:"MouseDoubleClick",value:function(){this.wrapper.IsEditiable=!this.wrapper.IsEditiable}},{key:"IsMouseInside",value:function(e,t){return this.wrapper.isRenderCollapse?Z(new Oe(e,t),this.geo.vec)<15?(this.wrapper.IsHover=!0,!0):(this.wrapper.IsHover=!1,!1):this.wrapper.scene.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode===g.k.DRAWING&&(this.IsMouseInsideLeaderline(e,t)?(this.wrapper.IsSelectedReaderline=!0,this.wrapper.IsHover=!0,!0):this.IsMouseInsideNodes(e,t)?(this.wrapper.IsSelectedReaderline=!0,this.wrapper.IsHover=!0,!0):(this.wrapper.IsSelectedReaderline=!1,function(e,t,n){var i=e.x,a=e.y;return t.x<i&&i<n.x&&t.y<a&&a<n.y}(new Oe(e,t),this.wrapper.v0,this.wrapper.v1)?(this.wrapper.IsHover=!0,!0):(this.wrapper.IsHover=!1,!1)))}},{key:"IsMouseInsideDiv",value:function(e,t){if(this.wrapper.isRenderCollapse)return!1;var n=[new Oe(this.wrapper.v0.x+this.wrapper.offDiv,this.wrapper.v0.y+this.wrapper.offDiv),new Oe(this.wrapper.v0.x+this.wrapper.width-this.wrapper.offDiv,this.wrapper.v0.y+this.wrapper.offDiv),new Oe(this.wrapper.v0.x+this.wrapper.width-this.wrapper.offDiv,this.wrapper.v0.y+this.wrapper.height-this.wrapper.offDiv),new Oe(this.wrapper.v0.x+this.wrapper.offDiv,this.wrapper.v0.y+this.wrapper.height-this.wrapper.offDiv)];return!!ge(new Oe(e,t,0),n)}},{key:"UpdateLeaderlineTarget",value:function(e,t){if(void 0!==this.wrapper.nodeTargetLeaderLine){this.wrapper.nodeTargetLeaderLine.x=e,this.wrapper.nodeTargetLeaderLine.y=t;var n=this.wrapper.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(e,t);this.wrapper.nodeTargetLeaderLine.long=n[0],this.wrapper.nodeTargetLeaderLine.lat=n[1],this.wrapper.nodeTargetLeaderLine.proX=n[2],this.wrapper.nodeTargetLeaderLine.proY=n[3],this.wrapper.nodeTargetLeaderLine.x=e,this.wrapper.nodeTargetLeaderLine.y=t}}},{key:"IsMouseInsideLeaderline",value:function(e,t){if(this.wrapper.leaderline){if(this.wrapper.leaderline.IsMouseInside(e,t))return this.wrapper.nodeTargetLeaderLine=this.wrapper.leaderline.v2,this.wrapper.leaderline.isHover=!0,!0;this.wrapper.leaderline.isHover=!1}return this.wrapper.nodeTargetLeaderLine=void 0,!1}},{key:"UpdateSideNodes",value:function(){this.wrapper.vLeft.UpdatePos(this.wrapper.v0.x,this.wrapper.v0.y+.5*this.wrapper.height),this.wrapper.vRight.UpdatePos(this.wrapper.v1.x,this.wrapper.v0.y+.5*this.wrapper.height)}},{key:"UpdateConectNodes",value:function(){this.wrapper.vUp.UpdatePos(this.wrapper.v0.x+.5*this.wrapper.width,this.wrapper.v0.y),this.wrapper.vDown.UpdatePos(this.wrapper.v0.x+.5*this.wrapper.width,this.wrapper.v1.y)}},{key:"IsMouseInsideNodes",value:function(e,t){this.wrapper.nodeSelected=void 0;for(var n=0;n<this.wrapper.nodes.length;++n)if(this.wrapper.nodes[n].IsMouseInside(e,t))return this.wrapper.nodeSelected=this.wrapper.nodes[n],!0;return!1}},{key:"LeadlineInteraction",value:function(e,t){this.wrapper.leaderline?(this.wrapper.vec.x=e,this.wrapper.vec.y=t,this.wrapper.widthOffset=this.wrapper.vecOffset.x-this.wrapper.vec.x,this.wrapper.heightOffset=this.wrapper.vecOffset.y-this.wrapper.vec.y):this.wrapper.leaderline=new Ua(this.wrapper,this.wrapper.GetClosestNodeDia(e,t))}},{key:"IsSelected",get:function(){return this.wrapper.isSelected},set:function(e){this.wrapper.isSelected=e,this.wrapper.scene.annotationInstance.io.eventListenerAnnotation.SelectionStack(this.wrapper.ToJSON())}},{key:"IsSelectedReaderline",get:function(){return this._isSelectedReaderline},set:function(e){this._isSelectedReaderline=e}},{key:"IsHover",get:function(){return this.wrapper.isHover},set:function(e){this.wrapper.isRemove||!this.wrapper.isRenderable||this.wrapper.isHidden||(this.wrapper.isHover=e,this.wrapper.leaderline&&(this.wrapper.leaderline.isHover=e),this.wrapper.isHover&&!this.wrapper.isHoverPre?this.wrapper.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.wrapper.ToJSON()):!this.wrapper.isHover&&this.wrapper.isHoverPre&&this.wrapper.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.wrapper.ToJSON()),this.wrapper.isHoverPre=this.wrapper.isHover,e||(this.wrapper.needEmitHoverPost=!0,this.wrapper.HidePopUpSummary()))}}]),i}(aa),Ya=function e(){Object(o.a)(this,e),Object(u.a)(this,"width",32),Object(u.a)(this,"height",32),Object(u.a)(this,"scale",1),Object(u.a)(this,"fillStyleFirstArray",[0,0,0,0]),Object(u.a)(this,"fillStyleSecondArray",[0,0,0,0]),Object(u.a)(this,"lineWidth",1),Object(u.a)(this,"shadowColor","rgba(0 ,0 ,0 , 0.5)"),Object(u.a)(this,"shadowColorHover","rgba(0 ,0 ,0 , 1.0)"),Object(u.a)(this,"shadowBlur",5)},Ka=function e(){Object(o.a)(this,e),Object(u.a)(this,"width",32),Object(u.a)(this,"height",32),Object(u.a)(this,"fontSize",9),Object(u.a)(this,"fontColorArray",[0,0,0,0]),Object(u.a)(this,"scale",1),Object(u.a)(this,"fillStyleFirstArray",[0,0,0,0]),Object(u.a)(this,"fillStyleSecondArray",[0,0,0,0]),Object(u.a)(this,"strokeStyleFirstArray",[0,0,0,0]),Object(u.a)(this,"lineWidth",1),Object(u.a)(this,"shadowColor","rgba(0 ,0 ,0 , 0.5)"),Object(u.a)(this,"shadowColorHover","rgba(0 ,0 ,0 , 1.0)"),Object(u.a)(this,"shadowBlur",5)},Xa=function e(){Object(o.a)(this,e),Object(u.a)(this,"scale",1),Object(u.a)(this,"fillStyleFirstArray",[0,0,0,0]),Object(u.a)(this,"fillStyleSecondArray",[0,0,0,0]),Object(u.a)(this,"strokeStyleFirstArray",[0,0,0,0]),Object(u.a)(this,"lineWidth",1)},Ja=function e(){Object(o.a)(this,e),Object(u.a)(this,"fillStyleFirstArray",[0,0,0,0]),Object(u.a)(this,"fillStyleSecondArray",[0,0,0,0]),Object(u.a)(this,"strokeStyleFirstArray",[0,0,0,0]),Object(u.a)(this,"strokeStyleSecondArray",[0,0,0,0]),Object(u.a)(this,"lineWidth",1),Object(u.a)(this,"lineDash",[0,0]),Object(u.a)(this,"scale",1)},Za=function e(){Object(o.a)(this,e),Object(u.a)(this,"strokeStyleFirstArray",[0,0,0,0]),Object(u.a)(this,"strokeStyleSecondArray",[0,0,0,0]),Object(u.a)(this,"lineWidth",1)},qa=function e(){Object(o.a)(this,e),Object(u.a)(this,"fillStyleFirstArray",[0,0,0,0]),Object(u.a)(this,"fillStyleSecondArray",[0,0,0,0]),Object(u.a)(this,"strokeStyleFirstArray",[0,0,0,0]),Object(u.a)(this,"strokeStyleSecondArray",[0,0,0,0]),Object(u.a)(this,"lineWidth",1)},Qa=function(){function e(){Object(o.a)(this,e),Object(u.a)(this,"strokeStyle",[0,0,0,1]),Object(u.a)(this,"lineWidth",2),Object(u.a)(this,"_dash",[0,0])}return Object(r.a)(e,[{key:"dash",get:function(){return this._dash},set:function(e){this._dash=e}}]),e}(),$a=function e(){Object(o.a)(this,e),Object(u.a)(this,"fillStyle",[0,0,0,1]),Object(u.a)(this,"strokeStyle",[0,0,0,1]),Object(u.a)(this,"lineWidth",2),Object(u.a)(this,"radius",5),Object(u.a)(this,"dash",[0,0])},eo=function e(){Object(o.a)(this,e),Object(u.a)(this,"fillStyle",[0,0,0,1]),Object(u.a)(this,"strokeStyle",[100,100,100,1]),Object(u.a)(this,"lineWidth",2),Object(u.a)(this,"dash",[0,0])},to=function e(){Object(o.a)(this,e),Object(u.a)(this,"fillStyle",[20,20,20,1]),Object(u.a)(this,"strokeStyle",[0,0,0,1]),Object(u.a)(this,"lineWidth",2),Object(u.a)(this,"dash",[0,0])},no=function e(){Object(o.a)(this,e),Object(u.a)(this,"fillStyleFirstArray",[0,0,0,0]),Object(u.a)(this,"fillStyleSecondArray",[0,0,0,0]),Object(u.a)(this,"strokeStyleFirstArray",[0,0,0,0]),Object(u.a)(this,"handleNode",new eo),Object(u.a)(this,"box",new to),Object(u.a)(this,"anchorNode",new $a),Object(u.a)(this,"leaderline",new Qa),Object(u.a)(this,"scale",1)},io=function e(){Object(o.a)(this,e),Object(u.a)(this,"size",8),Object(u.a)(this,"lineWidth",6),Object(u.a)(this,"sizeMid",2),Object(u.a)(this,"lineWidthMid",2)},ao=function e(){Object(o.a)(this,e),Object(u.a)(this,"elasticScale",3.5),Object(u.a)(this,"pointBoundOffset",8),Object(u.a)(this,"outlineHoverColorArray",[0,0,0,0]),Object(u.a)(this,"outlineHoverColorRGBAString","rgba(255,255,255,1.0)"),Object(u.a)(this,"maskColor","#000000"),Object(u.a)(this,"isDarkBG",!1),Object(u.a)(this,"opacity",.6),Object(u.a)(this,"opacityHover",.7),Object(u.a)(this,"desaturationValue",-.3),Object(u.a)(this,"timeTransitionA",.015),Object(u.a)(this,"timeTransitionB",.015)},oo=function e(){Object(o.a)(this,e),Object(u.a)(this,"fillStyleFirstArray",[0,0,0,0]),Object(u.a)(this,"strokeStyleFirstArray",[0,0,0,0])},ro=function e(){Object(o.a)(this,e),Object(u.a)(this,"fillStyleFirstArray",[0,0,0,0]),Object(u.a)(this,"strokeStyleFirstArray",[0,0,0,0]),Object(u.a)(this,"lineWidth",1)},so=function(){function e(){Object(o.a)(this,e),this.rPoint=new Ya,this.nPoint=new Ka,this.iPoint=new Xa,this.arrow=new Ja,this.polyline=new Za,this.polygon=new qa,this.properties=new ao,this.selection=new oo,this.freehand=new ro,this.node=new io,this.textleaderline=new no}return Object(r.a)(e,[{key:"ToJson",value:function(){return JSON.parse(JSON.stringify(this))}},{key:"DownloadJson",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"AnnotationTheme.json",t=new Le(this.ToJson(),e);t.Dummy()}}]),e}();function co(e){return function(){var t,n=Object(l.a)(e);if(lo()){var i=Object(l.a)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return Object(c.a)(this,t)}}function lo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var po=function(e){Object(p.a)(n,e);var t=co(n);function n(){var e;Object(o.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),Object(u.a)(Object(s.a)(e),"textColor",Lt.BackgroundColor),Object(u.a)(Object(s.a)(e),"backgroundColor",Lt.TitleColor),e}return n}(Wt),uo=function(e){Object(p.a)(n,e);var t=co(n);function n(e){var i;return Object(o.a)(this,n),i=t.call(this,e),Object(u.a)(Object(s.a)(i),"tempColorRgba",[]),i.state=new po,i.geoHost=e,i.renderStyle=new Bt,i.renderStyleNode=new Bt,i.UpdateStyle(),i}return Object(r.a)(n,[{key:"UpdateStyle",value:function(){var e=this.geo.scene.annotationInstance.customization.themeCurrent.textleaderline;this.styleBox||(this.styleBox=new to,this.styleBox.dash=[0,0],this.styleBox.fillStyle=e.box.fillStyle,this.styleBox.lineWidth=e.box.lineWidth,this.styleBox.strokeStyle=e.box.strokeStyle),this.styleAnchorNode||(this.styleAnchorNode=new $a,this.styleAnchorNode.dash=[0,0],this.styleAnchorNode.fillStyle=e.anchorNode.fillStyle,this.styleAnchorNode.lineWidth=e.anchorNode.lineWidth,this.styleAnchorNode.strokeStyle=e.anchorNode.strokeStyle),this.styleHandleNode||(this.styleHandleNode=new eo,this.styleHandleNode.dash=[0,0],this.styleHandleNode.fillStyle=e.handleNode.fillStyle,this.styleHandleNode.lineWidth=e.handleNode.lineWidth,this.styleHandleNode.strokeStyle=e.handleNode.strokeStyle),this.styleLeaderline||(this.styleLeaderline=new Qa,this.styleLeaderline.dash=[0,0],this.styleLeaderline.lineWidth=e.leaderline.lineWidth,this.styleLeaderline.strokeStyle=e.leaderline.strokeStyle)}},{key:"UpdateStyleCustom",value:function(e){var t=!1;void 0!==e.box&&(this.styleBox.dash=e.box.dash?e.box.dash:this.styleBox.dash,this.styleBox.fillStyle=e.box.fill?e.box.fill:this.styleBox.fillStyle,this.styleBox.lineWidth=e.box.width?e.box.width:this.styleBox.lineWidth,this.styleBox.strokeStyle=e.box.strokeStyle?e.box.strokeStyle:this.styleBox.strokeStyle,t=!0),void 0!==e.anchorNode&&(this.styleAnchorNode.dash=e.anchorNode.dash?e.anchorNode.dash:this.styleAnchorNode.dash,this.styleAnchorNode.fillStyle=e.anchorNode.fill?e.anchorNode.fill:this.styleAnchorNode.fillStyle,this.styleAnchorNode.lineWidth=e.anchorNode.width?e.anchorNode.width:this.styleAnchorNode.lineWidth,this.styleAnchorNode.strokeStyle=e.anchorNode.strokeStyle?e.anchorNode.strokeStyle:this.styleAnchorNode.strokeStyle,t=!0),void 0!==e.handleNode&&(this.styleHandleNode.dash=e.handleNode.dash?e.handleNode.dash:this.styleHandleNode.dash,this.styleHandleNode.fillStyle=e.handleNode.fill?e.handleNode.fill:this.styleHandleNode.fillStyle,this.styleHandleNode.lineWidth=e.handleNode.width?e.handleNode.width:this.styleHandleNode.lineWidth,this.styleHandleNode.strokeStyle=e.handleNode.strokeStyle?e.handleNode.strokeStyle:this.styleHandleNode.strokeStyle,t=!0),void 0!==e.leaderline&&(this.styleLeaderline.dash=e.leaderline.dash?e.leaderline.dash:this.styleLeaderline.dash,this.styleLeaderline.lineWidth=e.leaderline.width?e.leaderline.width:this.styleLeaderline.lineWidth,this.styleLeaderline.strokeStyle=e.leaderline.strokeStyle?e.leaderline.strokeStyle:this.styleLeaderline.strokeStyle,t=!0),this.state.width=e.width||this.state.width,this.tempColorRgba=e.colorRgba||this.tempColorRgba,this.state.scale=e.scale||this.state.scale,void 0!==e.textColor&&(this.state.textColor=e.textColor),void 0!==e.backgroundColor&&(this.state.backgroundColor=e.backgroundColor),e.lineDash&&(this.state.lineTypeId=e.lineDash),this.isCustom=!0,t&&!this.geoHost.isUnderConstruction&&(this.geoHost.IsTransform=!0)}},{key:"ToJson",value:function(){if(this.isCustom){var e={box:{dash:this.styleBox.dash,fill:this.styleBox.fillStyle,width:this.styleBox.lineWidth,strokeStyle:this.styleBox.strokeStyle},anchorNode:{dash:this.styleAnchorNode.dash,fill:this.styleAnchorNode.fillStyle,width:this.styleAnchorNode.lineWidth,strokeStyle:this.styleAnchorNode.strokeStyle},handleNode:{dash:this.styleHandleNode.dash,fill:this.styleHandleNode.fillStyle,width:this.styleHandleNode.lineWidth,strokeStyle:this.styleHandleNode.strokeStyle},leaderline:{dash:this.styleLeaderline.dash,width:this.styleLeaderline.lineWidth,strokeStyle:this.styleLeaderline.strokeStyle},width:this.state.width,scale:this.state.scale,colorRgba:this.tempColorRgba};return this.state.backgroundColor!==Lt.TitleColor&&(e.backgroundColor=this.state.backgroundColor),this.state.textColor!==Lt.BackgroundColor&&(e.textColor=this.state.textColor),this.state.lineTypeId!==Nt.Continuous&&(e.lineDash=this.state.lineTypeId),e}}}]),n}(Vt);function ho(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var mo=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(ho()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),t=n.call(this,e),Object(u.a)(Object(s.a)(t),"zoomLevel",0),Object(u.a)(Object(s.a)(t),"zoomDifference",0),Object(u.a)(Object(s.a)(t),"hasSnippet",!1),Object(u.a)(Object(s.a)(t),"scaleRuntime",0),Object(u.a)(Object(s.a)(t),"widthRuntime",0),Object(u.a)(Object(s.a)(t),"heightRuntime",0),Object(u.a)(Object(s.a)(t),"v0Runtime",new Oe(0,0,0)),t.wrapper=e,t}return Object(r.a)(i,[{key:"RenderPost",value:function(e){this.scaleRuntime=1,this.widthRuntime=(this.wrapper.v1.x-this.wrapper.v0.x)*this.scaleRuntime,this.heightRuntime=Math.abs(this.wrapper.v1.y-this.wrapper.v0.y),this.v0Runtime.x=this.wrapper.vecOffset.x-.5*this.widthRuntime,this.v0Runtime.y=this.wrapper.vUp.vec.y,this.wrapper.isRenderCollapse?this.RenderSnippet(e,this.widthRuntime,this.heightRuntime):(this.wrapper.scene.annotationInstance.renderer.draw.shape.text.RoundedRectACTextStoryMapByWidth(e,this.wrapper.styleComponent,this.v0Runtime,this.widthRuntime,this.heightRuntime,3,0,0,this.wrapper.isHover,this.wrapper.isSelected),this.wrapper.scene.annotationInstance.interactionMode===g.k.DRAWING&&(this.wrapper.IsHover||this.wrapper.IsSelected)&&this.RenderNodes(e))}},{key:"RenderSnippet",value:function(e,t,n){this.wrapper.IsHover?(this.wrapper.txtDiv.divText.hidden&&(this.wrapper.txtDiv.divText.hidden=!1),this.hasSnippet=!0,this.wrapper.leaderline&&(this.wrapper.FindClosestNodeDia(),this.wrapper.leaderline.RenderLeaderLine(e)),this.wrapper.scene.annotationInstance.renderer.draw.shape.text.RoundedRectACTextStoryMapByWidth(e,this.wrapper.styleComponent,this.v0Runtime,t,n,3,0,0,this.wrapper.isHover,this.wrapper.isSelected)):(this.wrapper.txtDiv.divText.hidden||(this.wrapper.txtDiv.divText.hidden=!0),this.hasSnippet=!1)}},{key:"RenderLeadline",value:function(e){this.wrapper.isRenderCollapse?this.RenderMarker(e):this.wrapper.leaderline&&(this.wrapper.FindClosestNodeDia(),this.wrapper.leaderline.RenderLeaderLine(e))}},{key:"RenderNodes",value:function(e){this.wrapper.vLeft.Render(e),this.wrapper.vRight.Render(e),this.wrapper.vUp.Render(e),this.wrapper.vDown.Render(e)}},{key:"RenderMarker",value:function(e){if(!this.hasSnippet){var t=this.wrapper.vec;e.beginPath(),e.arc(t.x,t.y,7,0,6.28),e.closePath();var n=this.wrapper.styleComponent.styleAnchorNode.fillStyle;e.fillStyle="rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(n[3],")"),e.fill(),e.lineWidth=this.wrapper.styleComponent.styleAnchorNode.lineWidth,n=this.wrapper.styleComponent.styleAnchorNode.strokeStyle,e.strokeStyle="rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(n[3],")"),e.stroke()}}}]),i}(Yt),fo=function(){function e(t){Object(o.a)(this,e),this.host=t}return Object(r.a)(e,[{key:"Update",value:function(e){this.host.scene.annotationInstance.implementations.app.INSPECTION&&(e.font="10px Arial",this.host.collision.isRenderable=!0,this.ShowStatus(e),this.ShowVecOffset(e),this.ShowVecBound(e),this.ShowLeaderlineInfo(e),this.host.collision.Render(e))}},{key:"Show",value:function(e){var t=this.host.v0;e.beginPath(),e.arc(t.x,t.y,5,0,6.28),e.closePath(),e.fillStyle="#ff0000",e.fill();var n="".concat(t.long," -- ").concat(t.proX);e.fillText(n,t.x,t.y-5),t=this.host.v1,e.beginPath(),e.arc(t.x,t.y,5,0,6.28),e.closePath(),e.fillStyle="#ff0000",e.fill(),n="".concat(t.long," -- ").concat(t.proX),e.fillText(n,t.x,t.y+10)}},{key:"ShowStatus",value:function(e){var t=this.host.v1;e.beginPath(),e.arc(t.x,t.y,5,0,6.28),e.closePath(),e.fillStyle="#ff0000",e.fill();var n="IsTransform: ".concat(this.host.IsTransform);e.fillText(n,t.x+10,t.y-10),n=", Zoom: ".concat(this.host.renderer.zoomLevel),e.fillText(n,t.x+100,t.y-10)}},{key:"ShowVecCenter",value:function(e){var t=this.host.vecCenter;e.beginPath(),e.arc(t.x,t.y,5,0,6.28),e.closePath(),e.fillStyle="#fff000",e.fill();var n="".concat(t.x," == ").concat(t.long," == ").concat(t.proX),i="".concat(t.y," == ").concat(t.lat," == ").concat(t.proY);e.fillText(n,t.x,t.y+10),e.fillText(i,t.x,t.y+24)}},{key:"ShowVecBound",value:function(e){var t=this.host.v0;e.beginPath(),e.arc(t.x,t.y,5,0,6.28),e.closePath(),e.fillStyle="#00ff00",e.fill();var n="".concat(t.x," == ").concat(t.long," == ").concat(t.proX),i="".concat(t.y," == ").concat(t.lat," == ").concat(t.proY);e.fillText(n,t.x,t.y+10),e.fillText(i,t.x,t.y+24);var a=this.host.v1;e.beginPath(),e.arc(a.x,a.y,5,0,6.28),e.closePath(),e.fillStyle="#00ff00",e.fill(),n="".concat(a.x," == ").concat(a.long," == ").concat(a.proX),i="".concat(a.y," == ").concat(a.lat," == ").concat(a.proY),e.fillText(n,a.x,a.y+10),e.fillText(i,a.x,a.y+24)}},{key:"ShowVecAnchor",value:function(e){var t=this.host.vec;e.beginPath(),e.arc(t.x,t.y,2.5,0,6.28),e.closePath(),e.fillStyle="#ff0000",e.fill();var n="".concat(t.x," == ").concat(t.long," == ").concat(t.proX),i="".concat(t.y," == ").concat(t.lat," == ").concat(t.proY);e.fillText(n,t.x,t.y+10),e.fillText(i,t.x,t.y+24)}},{key:"ShowVecOffset",value:function(e){var t=this.host.vecOffset;e.beginPath(),e.arc(t.x,t.y,2.5,0,6.28),e.closePath(),e.fillStyle="#0000ff",e.fill();var n="".concat(t.x," == ").concat(t.long," == ").concat(t.proX),i="".concat(t.y," == ").concat(t.lat," == ").concat(t.proY);e.fillText(n,t.x,t.y+10),e.fillText(i,t.x,t.y+24)}},{key:"ShowLeaderlineInfo",value:function(e){var t=this.host.v1;e.beginPath(),e.closePath(),e.fillStyle="#ff0000",e.fill();var n="".concat(this.host.leaderline);e.fillText(n,t.x,t.y-60),this.host.attachedShape?e.fillText(this.host.attachedShape.type,t.x,t.y-50):e.fillText("None",t.x,t.y-50)}}]),e}();function yo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var go=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(yo()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e,t,a){var r,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:170,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:40,d=arguments.length>5&&void 0!==arguments[5]&&arguments[5];arguments.length>6&&void 0!==arguments[6]&&arguments[6];return Object(o.a)(this,i),r=n.call(this,e),Object(u.a)(Object(s.a)(r),"widthOffset",0),Object(u.a)(Object(s.a)(r),"heightOffset",0),Object(u.a)(Object(s.a)(r),"widthMin",80),Object(u.a)(Object(s.a)(r),"offDiv",10),Object(u.a)(Object(s.a)(r),"isSelectedReaderlineByClick",!1),Object(u.a)(Object(s.a)(r),"isHover",!1),Object(u.a)(Object(s.a)(r),"enableDrag",!0),Object(u.a)(Object(s.a)(r),"nodeSelected",void 0),Object(u.a)(Object(s.a)(r),"leaderline",void 0),Object(u.a)(Object(s.a)(r),"nodeTargetLeaderLine",void 0),Object(u.a)(Object(s.a)(r),"offsetForTextEditor",20),Object(u.a)(Object(s.a)(r),"lineWidthForCheck",5),Object(u.a)(Object(s.a)(r),"mouseX",0),Object(u.a)(Object(s.a)(r),"mouseY",0),Object(u.a)(Object(s.a)(r),"numToggleTheme",0),Object(u.a)(Object(s.a)(r),"attachedShape",void 0),Object(u.a)(Object(s.a)(r),"isRenderCollapse",!1),r.inspector=new fo(Object(s.a)(r)),r.isUndo=d,r.type=g.j.TEXT_LEADERLINE,r.vec=new Oe(t,a),r.vecOffset=new Oe(r.vec.x,r.vec.y),r.v0=new Oe(r.vec.x-.5*r.width,r.vec.y-r.height),r.v1=new Oe(r.vec.x+.5*r.width,r.vec.y),r.InitComponent(),r.InitZoomLevel(),r.projection.UpdateGoeVec(),r.ComputeCenterVec(),r.txtDiv=new Wa(Object(s.a)(r)),r._heightPre=r.txtDiv.divText.clientHeight,r.width=l,r.height=p,r.vLeft=new _a(Object(s.a)(r),r.v0.x,r.v0.y+.5*r.height,Ma.LEFT),r.vRight=new _a(Object(s.a)(r),r.v1.x,r.v0.y+.5*r.height,Ma.RIGHT),r.vUp=new Ba(Object(s.a)(r),r.v0.x+.5*r.width,r.v0.y,Ma.DIAMOND),r.vDown=new Ba(Object(s.a)(r),r.v0.x+.5*r.width,r.v0.y+r.height,Ma.DIAMOND),r.nodes=[r.vLeft,r.vRight,r.vUp,r.vDown],r.trajectoryVecs=[],r.InitVecsHistory(),r.visTrajector=!0,r.isDrop=!1,r.isDrag=!1,r.isSelected=!1,r.isLeave=!0,r.isHover=!1,r.isGeoPos=!0,r.isUnderConstruction=!1,r.collision.offset=1,r.UpdateVecs(),r.UpdateBoundingBox(),r.wrapping=new Ct(Object(s.a)(r)),r.scene.AddATextleaderlineWrapper(Object(s.a)(r)),r.isUndo?r:(r.scene.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(r.ToJSON()),r.txtDiv.HideTextDiv(),r.txtDiv.ShowTextDiv(),r.txtDiv.FoucsOnTextDiv(),Object(c.a)(r))}return Object(r.a)(i,null,[{key:"FromSmartDrawing",value:function(e,t){var n=t[t.length-1],a=t[0],o=new i(e,n.x,n.y,170,40,!1);if(o.LeadlineInteraction(a.x,a.y),o.LeadlineInteraction(a.x,a.y),o.leaderline){var r=e.annotationInstance.geometryCommon.gcmdSupporting.ToMap(o.leaderline.v2.x,o.leaderline.v2.y);o.leaderline.v2.long=r[0],o.leaderline.v2.lat=r[1],o.leaderline.v2.proX=r[2],o.leaderline.v2.proY=r[3]}o.IsHover=!1,o.projection.UpdateGoeVec(),o.interaction.UpdateSideNodes(),o.interaction.UpdateConectNodes(),o.txtDiv.UpdateDiv()}},{key:"FromJSONAdapter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(t.nodes[0].proX,t.nodes[0].proY),r=e.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(t.nodes[1].proX,t.nodes[1].proY),s=void 0,c=void 0,l=t.data.width,p=r[1]-o[1],u=o[0]+.5*(r[0]-o[0]),d=r[1],h=t.data.content;t.nodes[2]?(s=e.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(t.nodes[2].proX,t.nodes[2].proY),(c=new i(e,s[0],s[1],l,p,n,h)).InitLeaderlineOffset(u-s[0],d-s[1])):c=new i(e,u,d,l,p,n,h),c.contentHtmltemp=h;var m=e.annotationInstance.activeCommandController.acProperties.zoom;return m&&c.InitZoomLevel(m),c.isUnderConstruction=!0,t.styles&&c.UpdateStyleCustom(t.styles),c.isUnderConstruction=!1,c.id=a?e.GetUUID():t.id,c.txtDiv.divText.id="text-editor-".concat(c.id),c.isHidden=t.isHidden,t.isHidden?c.visibility=0:c.visibility=1,c.projection.UpdateGoeVec(),c.ComputeCenterVec(),c.txtDiv.UpdateDiv(),c.UpdateVecs(),n&&e.annotationInstance.io.eventListenerAnnotation.ShowTextStack(c.ToJSON()),c.IsSelected=!1,c.IsHover=!1,c.IsTransform=!1,c.InitVecsHistory(),c.InitHeightFromJSON(p),c}},{key:"FromJSON",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(t.nodes[0].proX,t.nodes[0].proY),r=t.data.content,s=t.data.width?t.data.width:170,c=t.data.height?t.data.height:40,l=o[0],p=o[1],u=new i(e,l,p,s,c,n,r);return t.nodes[1]&&u.InitLeaderlineOffset(t.nodes[1].sx,t.nodes[1].sy),u.contentHtmltemp=r,t.data.zoom&&u.InitZoomLevel(t.data.zoom),u.isUnderConstruction=!0,t.styles&&u.UpdateStyleCustom(t.styles),u.isUnderConstruction=!1,u.id=a?e.GetUUID():t.id,u.txtDiv.divText.id="text-editor-".concat(u.id),u.isHidden=t.isHidden,t.isHidden?u.visibility=0:u.visibility=1,u.projection.UpdateGoeVec(),u.ComputeCenterVec(),u.txtDiv.UpdateDiv(),u.UpdateVecs(),n&&e.annotationInstance.io.eventListenerAnnotation.ShowTextStack(u.ToJSON()),u.IsSelected=!1,u.IsHover=!1,u.IsTransform=!1,u.InitVecsHistory(),u.InitHeightFromJSON(c),u}},{key:"MouseLeftClick",value:function(e,t){if(void 0===e.capture){e.annotationInstance.activeCommandController.GoToACMode();var n=new i(e,t.x,t.y);n.IsSelected=!0,e.Capture=n,n.Dummy()}}},{key:"MouseDrag",value:function(e){}},{key:"MouseMove",value:function(e){}},{key:"MouseDouble",value:function(e){}},{key:"ESC",value:function(){}}]),Object(r.a)(i,[{key:"EmitTransformationStackRightNode",value:function(){for(var e=0;e<this.nodes.length;++e)this.nodes[e].type,Ma.RIGHT}},{key:"UpdateVecsBox",value:function(){this.leaderline?(this.renderer.zoomDifference,this.vecOffset.x=this.vec.x+this.widthOffset,this.vecOffset.y=this.vec.y+this.heightOffset):(this.vecOffset.x=this.vec.x,this.vecOffset.y=this.vec.y),this.v0.x=this.vecOffset.x-.5*this.width,this.v0.y=this.vecOffset.y-this.height,this.v1.x=this.vecOffset.x+.5*this.width,this.v1.y=this.vecOffset.y,this.interaction.UpdateSideNodes(),this.interaction.UpdateConectNodes()}},{key:"InitComponent",value:function(){this.io=new Va(this),this.projection=new Fa(this),this.interaction=new Ha(this),this.styleComponent=new uo(this),this.renderer=new mo(this)}},{key:"InitZoomLevel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.zoom;this.renderer.zoomLevel=e}},{key:"Remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.io.Remove(e)}},{key:"InitVecsHistory",value:function(){this.vecsHistory=[],this.vecsHistory.push(W(this.vecCenter),W(this.vecCenter),W(this.vecCenter))}},{key:"RemoveByAttachedShape",value:function(){this.io.RemoveByAttachedShape()}},{key:"RemoveLeaderline",value:function(){this.io.RemoveLeaderline()}},{key:"RemoveDiv",value:function(){this.io.RemoveDiv()}},{key:"Hide",value:function(){}},{key:"DeepCopy",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.io.DeepCopy(e,t,n)}},{key:"UpdateStyleCustom",value:function(e){this.styleComponent.UpdateStyleCustom(e)}},{key:"UpdateScreenVecForPan",value:function(){this.projection.UpdateScreenVecByProjectedPos()}},{key:"OutExtent",value:function(){this.projection.OutExtent()}},{key:"InExtent",value:function(){this.projection.InExtent()}},{key:"UpdateScreenVec",value:function(){this.projection.UpdateGoeVec()}},{key:"InitLeaderlineOffset",value:function(e,t){this.widthOffset=e,this.heightOffset=t,this.interaction.LeadlineInteraction(e,t),this.UpdateVecs()}},{key:"MouseLeftClick",value:function(e,t){this.interaction.MouseLeftClick(e,t)}},{key:"MouseDoubleClick",value:function(){this.interaction.MouseDoubleClick()}},{key:"MouseUp",value:function(){this.interaction.MouseUp()}},{key:"IsMouseInside",value:function(e,t){return this.interaction.IsMouseInside(e,t)}},{key:"IsMouseInsideDiv",value:function(e,t){return this.interaction.IsMouseInsideDiv(e,t)}},{key:"Translate",value:function(e,t){}},{key:"TranslateByMouseEventData",value:function(e){this.interaction.TranslateByMouseEventData(e)}},{key:"LeadlineInteraction",value:function(e,t){this.interaction.LeadlineInteraction(e,t)}},{key:"ToJSON",value:function(){return this.io.ToJSON()}},{key:"GetLog",value:function(){return this.io.GetLog()}},{key:"ProcessingUpdate",value:function(e){this.io.ProcessingUpdate(e)}},{key:"UpdateVecsHistory",value:function(){for(this.vecCenter=this.ComputeCenterVec(),this.vecsHistory.push(W(this.vecCenter));this.vecsHistory.length>3;)this.vecsHistory.shift()}},{key:"UpdateOptimizer",value:function(){}},{key:"Update",value:function(){(this.scene.annotationInstance.activeCommandController.acProperties.isPanning||this.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.isViewChanging)&&(this.wrapping.UpdateProjectionShapes(this.GetVecs()),this.UpdateVecs()),this.UpdateDivHeight(),this.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.isViewChanging||this.projection.UpdateGoeVec()}},{key:"RenderLeadline",value:function(e){this.Update(),this.renderer.RenderLeadline(e)}},{key:"RenderPost",value:function(e){this.renderer.RenderPost(e),this.inspector.Update(e)}},{key:"GetNode",value:function(){return[this.vec,this.vecOffset]}},{key:"UpdateVecs",value:function(){this.UpdateScreenVecForPan(),this.UpdateVecsBox(),this.interaction.UpdateSideNodes(),this.interaction.UpdateConectNodes(),this.txtDiv.UpdateDiv(),this.UpdateBoundingBox()}},{key:"GetClosestNodeDia",value:function(e,t){return Z(new Oe(e,t),this.vUp.vec)<Z(new Oe(e,t),this.vDown.vec)?(this.vUp.isConnected=!0,this.vDown.isConnected=!1,this.vUp):(this.vUp.isConnected=!1,this.vDown.isConnected=!0,this.vDown)}},{key:"FindClosestNodeDia",value:function(){this.leaderline&&(Z(this.leaderline.v1,this.vUp.vec)<Z(this.leaderline.v1,this.vDown.vec)?(this.vUp.isConnected=!0,this.vDown.isConnected=!1,this.leaderline.v0.x=this.vUp.vec.x,this.leaderline.v0.y=this.vUp.vec.y,this.leaderline.v0.z=this.vUp.vec.z):(this.vUp.isConnected=!1,this.vDown.isConnected=!0,this.leaderline.v0.x=this.vDown.vec.x,this.leaderline.v0.y=this.vDown.vec.y,this.leaderline.v0.z=this.vDown.vec.z))}},{key:"ComputeCenterVec",value:function(){this.vecCenter=xe(this.GetVecs());var e=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(this.vecCenter.x,this.vecCenter.y);return this.vecCenter.long=e[0],this.vecCenter.lat=e[1],this.vecCenter.proX=e[2],this.vecCenter.proY=e[3],this.vecCenter}},{key:"GetVecs",value:function(){return[this.v0,this.v1,this.vec]}},{key:"IsMoveUpdate",value:function(){this.vecsHistory.length<1||(Y(this.vecsHistory[this.vecsHistory.length-1],this.vecCenter,this.scene.annotationInstance.activeCommandController.zoomLevelForMoving)?this.IsMove=!1:(this.IsMove=!0,this.IsTransform=!0))}},{key:"SnapForPoint",value:function(){var e=this.scene.annotationInstance.geometryCommon.gcmdProcessing.GetclosestNodeForSnapping(this.vec.x,this.vec.y,25);if(e){if(this.leaderline){this.attachedShape&&(this.attachedShape.textLeaderline=void 0,this.attachedShape=void 0),e.textLeaderline=this;var t=e.GetVecForSnapping();t&&(this.vec.x=this.leaderline.v2.x=t.x,this.vec.y=this.leaderline.v2.y=t.y,this.vec.z=this.leaderline.v2.z=t.z,this.vec.lat=this.leaderline.v2.lat=t.lat,this.vec.long=this.leaderline.v2.long=t.long,this.vec.proX=this.leaderline.v2.proX=t.proX,this.vec.proY=this.leaderline.v2.proY=t.proY,this.attachedShape=e)}}else this.attachedShape&&(this.attachedShape.textLeaderline=void 0,this.attachedShape=void 0)}},{key:"SnapForPointForUndo",value:function(){var e=this.scene.annotationInstance.geometryCommon.gcmdProcessing.GetclosestNodeForSnapping(this.vec.x,this.vec.y,25);if(void 0!==e){e.textLeaderline=this;var t=e.GetVecForSnapping();t&&(this.vec.x=t.x,this.vec.y=t.y,this.vec.z=t.z,this.vec.lat=t.lat,this.vec.long=t.long,this.vec.proX=t.proX,this.vec.proY=t.proY,this.attachedShape=e,this.IsTransform=!0)}}},{key:"InitHeightFromJSON",value:function(e){var t=(e-=20)+2*this.txtDiv.offsetForTextDiv;this._height=t,this.v0.y=this.v1.y-t,this.Update(),this.scene.annotationInstance.activeCommandController.acProperties.needExecuteOptimizer=!0}},{key:"UpdateDivHeight",value:function(){this._heightPre!==this.txtDiv.divText.clientHeight&&(this._heightPre=this.txtDiv.divText.clientHeight,this.height=this.txtDiv.divText.clientHeight,this.interaction.UpdateSideNodes(),this.interaction.UpdateConectNodes(),this.txtDiv.UpdateDiv())}},{key:"UpdateBoundingBox",value:function(){var e=1*(this.v1.x-this.v0.x),t=Math.abs(this.v1.y-this.v0.y);this.collision.minVec=new Oe(this.vecOffset.x-.5*e,this.vecOffset.y-t),this.collision.maxVec=new Oe(this.vecOffset.x+.5*e,this.vecOffset.y)}},{key:"IsSelected",get:function(){return this.interaction.IsSelected},set:function(e){this.interaction.IsSelected=e}},{key:"IsSelectedReaderline",get:function(){return this.interaction.IsSelectedReaderline},set:function(e){this.interaction.IsSelectedReaderline=e}},{key:"IsHover",get:function(){return this.interaction.IsHover},set:function(e){this.interaction.IsHover=e}},{key:"height",get:function(){return this._height},set:function(e){if(0!==e){!this.renderer.hasSnippet&&this.isCollapse&&(e+=20),this._height=e;var t=e+2*this.txtDiv.offsetForTextDiv;this._height=t,this.v0.y=this.v1.y-t}}},{key:"isCollapse",set:function(e){e?(this.isRenderCollapse=!0,this.txtDiv.divText.hidden||(this.txtDiv.divText.hidden=!0)):(this.isRenderCollapse=!1,this.txtDiv.divText.hidden&&(this.txtDiv.divText.hidden=!1))},get:function(){return this.isRenderCollapse}}]),i}(wt);function vo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var bo=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(vo()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).host=e,t}return Object(r.a)(i,[{key:"RenderPost",value:function(e){this.timer.Update(),jo.isTooltipRenderable,this.host.vecs.length<2||(this.host.isFreehandDrawing?this.host.scene.annotationInstance.renderer.draw.shape.freeHand.FreeHandbyVecs(e,this.host.styleComponent.renderStyle,this.host.vecs,this.host.isClosed):this.host.Remove())}}]),i}(Yt);function xo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Oo=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(xo()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).renderStyle=new Bt,t.renderStyleNode=new Bt,t.UpdateStyle(),t}return Object(r.a)(i,[{key:"UpdateStyle",value:function(){Bt.UpdateRenderStyleFH(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent),Bt.UpdateRenderStyleFH(this.renderStyleNode,this.geo.scene.annotationInstance.customization.themeCurrent)}}]),i}(Vt);function wo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var jo=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(wo()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e,t){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.m.NONE;Object(o.a)(this,i),a=n.call(this,e),Object(u.a)(Object(s.a)(a),"vecs",[]),a.modelType=r,a.typeFreehand=t,a.direction=0,a.isFreehandDrawing=!0,a.isClosed=i.isClose,a.optimizer=g.n.DOUGLAS_PEUCKER;var c=a.scene.annotationInstance.customization.themeCurrent.freehand.strokeStyleFirstArray;return a.col="rgba(".concat(c[0],", ").concat(c[1],", ").concat(c[2],", 0.5}"),a.InitComponent(),i.construction=Object(s.a)(a),a.Init(),a}return Object(r.a)(i,null,[{key:"Cancel",value:function(){void 0!==i.construction&&i.construction.Remove(),i.construction=void 0}},{key:"MouseDown",value:function(e,t){e.annotationInstance.geometryCommon.gcmdProcessing.DeSelecteAllObjects(),i.isTooltipRenderable=!1}},{key:"MouseDrag",value:function(e){i.isTooltipRenderable=!1,i.construction&&i.construction.AddVecs(e.x,e.y)}},{key:"MouseUp",value:function(e,t){if(void 0!==i.construction){if(i.construction.vecs.length<2)return;i.construction.ComputeVector(),i.construction.isFreehandDrawing=!1,i.construction=void 0,e.annotationInstance.activeCommandController.GoToACMode()}}},{key:"MouseMove",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g.m.NONE;if(void 0===i.construction){var o=e.annotationInstance.geometryCommon.gcmdProcessing.FindAtPoint(t);void 0===o&&(i.construction=new i(e,n,a))}i.vecTooltip[0]=t.x,i.vecTooltip[1]=t.y}}]),Object(r.a)(i,[{key:"InitComponent",value:function(){this.styleComponent=new Oo(this),this.renderer=new bo(this)}},{key:"Init",value:function(){this.scene.AddAFreehandSmartDrawing(this)}},{key:"AddVecs",value:function(e,t){this.vecs.push(new Oe(e,t))}},{key:"CheckDotProduct",value:function(e){var t=[];t.push(e[0]);for(var n=0;n<e.length-5;++n){var i=V(e[n],e[n+1]);i=K(i);var a=V(e[n],e[n+2]);a=K(a);var o=V(e[n],e[n+3]);a=K(o);var r=V(e[n],e[n+4]);r=K(r);var s=V(e[n],e[n+5]);s=K(s);var c=ee(i,a),l=ee(i,o),p=ee(i,o);(isNaN(c)||isNaN(l)||isNaN(p))&&t.push(e[n])}return t.push(e[e.length-1]),t}},{key:"DivVecs",value:function(e){return e}},{key:"GetPtByVs",value:function(e){for(var t=e.length;t--;){new $t(this.scene,e[t].x,e[t].y).Dummy()}}},{key:"ComputeVector",value:function(){var e,t,n,i;return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=this.vecs,this.DotProductProcess(e),this.modelType!==g.m.DEEP_LEARNING){a.next=10;break}if(!this.scene.annotationInstance.implementations.app.addon||!this.scene.annotationInstance.implementations.app.addon.smartDrawing){a.next=10;break}return t=pe(e),n=this.PredictDrawingShape(t)[0],this.GetShapeFromPrediction(n,e),a.abrupt("return");case 10:if(this.typeFreehand!==g.i.SMDRAWING){a.next=16;break}e=this.CheckDotProduct(e),e=this.DivVecs(e),this.GetPtByVs(e),a.next=29;break;case 16:if(this.optimizer===g.n.DOUGLAS_PEUCKER&&(e=ha.SimplifyPath(e,10)),i=ue(e),Z(e[0],e[e.length-1])<10&&(e.pop(),i.pop()),!(e.length<2)){a.next=21;break}return a.abrupt("return");case 21:if(!(4<e.length&&e.length<15)||ht(i)){a.next=24;break}return rn.GetCircleByVecs(this.scene,e),a.abrupt("return");case 24:if(!(3<e.length&&e.length<8)){a.next=27;break}return mn.GetRectByVecs(this.scene,e),a.abrupt("return");case 27:Pn.GetPolygonbyVecs(this.scene,e),this.Remove();case 29:case"end":return a.stop()}}),null,this,null,Promise)}},{key:"DotProductProcess",value:function(e){var t=ha.SimplifyPath(e,5),n=pe(t);(n=gt(n,500)).push(.1*t.length),i.dotArrayForTrainSimplify.push(n);for(var a=[],o=0;o<t.length;++o)a.push(t[o].x,t[o].y);i.dotVecArrayForTrainSimplify.push(a),n=pe(e),(n=gt(n,500)).push(.1*t.length),i.dotArrayForTrainOrigin.push(n),a=[];for(var r=0;r<e.length;++r)a.push(e[r].x,e[r].y);i.dotVecArrayForTrainOrigin.push(a)}},{key:"PredictDrawingShape",value:function(e){var t=gt(e,501),n=this.scene.annotationInstance.implementations.app.addon.smartDrawing.PredictByLogisticRegression(t);return[this.scene.annotationInstance.implementations.app.addon.smartDrawing.PredictByMultiClassification(t),n]}},{key:"GetShapeFromPrediction",value:function(e,t){switch(e){case"CIRCLE":rn.GetCircleByVecs(this.scene,t);break;case"TRI-GON":t=ha.SimplifyPath(t,50),Pn.GetPolygonbyVecs(this.scene,t);break;case"ARROW_SINGLE":da.FromSmartDrawing(this.scene,t,g.j.ARROW_SINGLE);break;case"ARROW_DOUBLE":da.FromSmartDrawing(this.scene,t,g.j.ARROW_DOUBLE);break;case"RECTANGLE":mn.GetRectByVecs(this.scene,t);break;case"TEXT_LEADERLINE":go.FromSmartDrawing(this.scene,t);break;case"CURVE":t=ha.SimplifyPath(t,10),$i.GetCurveByVecs(this.scene,t)}}},{key:"GetLog",value:function(){return""}},{key:"IsMouseInside",value:function(e,t){return!1}},{key:"TranslateByMouseEventData",value:function(e){}},{key:"Translate",value:function(e,t){}},{key:"Hide",value:function(){}},{key:"Remove",value:function(){this.scene.RemoveGeometry(this),this.scene.RemoveAFreehandSmartDrawing(this)}},{key:"ToJSON",value:function(){}},{key:"RenderPost",value:function(e){i.isTooltipRenderable,this.vecs.length<2||(this.isFreehandDrawing?this.scene.annotationInstance.renderer.draw.shape.freeHand.FreeHandbyVecs(e,this.styleComponent.renderStyle,this.vecs,this.isClosed):this.Remove())}}]),i}(wt);function Co(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}Object(u.a)(jo,"isClose",!1),Object(u.a)(jo,"dotArrayForTrainOrigin",[]),Object(u.a)(jo,"dotVecArrayForTrainOrigin",[]),Object(u.a)(jo,"dotArrayForTrainSimplify",[]),Object(u.a)(jo,"dotVecArrayForTrainSimplify",[]),Object(u.a)(jo,"isTooltipRenderable",!1),Object(u.a)(jo,"vecTooltip",[0,0]);var ko=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Co()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e,t){var a;return Object(o.a)(this,i),(a=n.call(this,e)).vecs=[],a.isUndo=t,a.isUndo||a.scene.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(a.ToJSON()),a.scene.AddALineGraph(Object(s.a)(a)),a.scene.AddGeometry(Object(s.a)(a)),a}return Object(r.a)(i,null,[{key:"MouseDown",value:function(e){}},{key:"MouseLeftClick",value:function(e,t){this.temp?this.temp.AddVec(new Oe(t.x,t.y)):(this.temp=new i(e,!1),this.temp.AddVec(new Oe(t.x,t.y)))}},{key:"MouseMove",value:function(e){}},{key:"MouseDoubleClick",value:function(e){}},{key:"Undo",value:function(e){}},{key:"DoneByKeyboard",value:function(){}},{key:"Cancel",value:function(){}}]),Object(r.a)(i,[{key:"IsMouseInside",value:function(e,t){return!1}},{key:"GetLog",value:function(){return"line graph log"}},{key:"AddVec",value:function(e){this.vecs.push(e)}},{key:"RenderPost",value:function(e){if(!(this.vecs.length<1))for(var t=0;t<this.vecs.length-1;t+=2)e.beginPath(),e.moveTo(this.vecs[t].x,this.vecs[t].y),e.lineTo(this.vecs[t+1].x,this.vecs[t+1].y),e.closePath(),e.stroke()}},{key:"TranslateByMouseEventData",value:function(e){}},{key:"Translate",value:function(e,t){}},{key:"Remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e){var t=this.ToJSON();t&&this.scene.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack([t])}i.list.splice(i.list.indexOf(this),1)}},{key:"Hide",value:function(){}},{key:"IsHidden",get:function(){return this.isHidden},set:function(e){this.isHiddenPre=this.isHidden,this.isHidden=e,this.scene.annotationInstance.io.eventListenerAnnotation.HideStack(this.ToJSON())}},{key:"IsHover",get:function(){return this.isHover},set:function(e){this.isHover=e,this.isHover&&!this.isHoverPre?this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()):!this.isHover&&this.isHoverPre&&this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()),this.isHoverPre=this.isHover,this.isSelected,e||(this.needEmitHoverPost=!0,this.HidePopUpSummary())}},{key:"IsSelectable",get:function(){return this.isSelectable},set:function(e){this.isSelectable=e}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){this.isRemove||this.isHidden||(this.isSelected=e,this.scene.annotationInstance.io.eventListenerAnnotation.SelectionStack(this.ToJSON()))}}]),i}(wt);function So(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Io=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(So()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).renderStyle=new Bt,t.renderStyleNode=new Bt,t.UpdateStyle(),t}return Object(r.a)(i,[{key:"UpdateStyle",value:function(){if(Bt.UpdateRenderStylePolygon(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent),Bt.UpdateRenderStylePolygonNode(this.renderStyleNode,this.geo.scene.annotationInstance.customization.themeCurrent),this.geo.pts)for(var e=0;e<this.geo.pts.length;++e)this.geo.pts[e].styleComponent.UpdateStyleForNode(this.renderStyleNode)}}]),i}(Vt);function Po(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return Ro(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ro(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function Ro(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Eo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Do=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Eo()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e,t,a){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g.j.CN_GON,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i.nNumber;return Object(o.a)(this,i),(r=n.call(this,e)).pts=[],r.vec=new Oe(t,a),r.type=s,r.n=c,r.InitComponent(),r.Init(),r}return Object(r.a)(i,null,[{key:"FindAtPoint",value:function(e){for(var t=i.list.length-1;t>=0;--t)if(i.list[t].isSelectable&&i.list[t].IsMouseInside(e.x,e.y))return i.list[t]}},{key:"ComputeOver",value:function(e){var t=i.FindAtPoint(e);void 0!==t&&(t.isHover=!0)}},{key:"FromJSON",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];var n=$t.GetNodeFromJSON(e,t.nodes[0]),a=new i(e,n.vec.x,n.vec.y);a.type=g.j[t.type],n.Remove();for(var o=1;o<a.pts.length;++o){var r=$t.GetNodeFromJSON(e,t.nodes[o]);a.pts[o].vec.x=r.vec.x,a.pts[o].vec.y=r.vec.y,a.pts[o].type=g.j.CNODE}a.UpdateGeoPos(),a.id=t.id,a.IsSelectable=!0,a.isUnderConstruction=!1,e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(a.ToJSON()),i.construction=void 0}},{key:"GetLine",value:function(e,t,n){void 0!==i.construction?i.construction.type===g.j.CN_GON?(i.construction.IsSelectable=!0,i.construction.isUnderConstruction=!1,Pn.APolygonFromNGon(e,i.construction),i.construction.Remove(),e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(i.construction.ToJSON()),i.construction=void 0):i.construction.type===g.j.CN_STAR&&(i.construction.numClick++,2===i.construction.numClick&&(i.construction.IsSelectable=!0,i.construction.isUnderConstruction=!1,e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(i.construction.ToJSON()),Pn.APolygonFromNGon(e,i.construction),i.construction.Remove(),i.construction=void 0)):(i.construction=new i(e,t.x,t.y,0,n),i.construction.ShiftNGon(),i.construction.isUnderConstruction=!0,i.construction.IsSelectable=!1)}},{key:"GetLineByPt",value:function(e){}},{key:"Cancel",value:function(){void 0!==i.construction&&(i.construction.IsSelectable=!0,i.construction.isUnderConstruction=!1,i.construction.Remove(),i.construction=void 0)}},{key:"DrawShadow",value:function(e){void 0!==i.construction&&i.construction.UpdateGeo(e.x,e.y)}},{key:"Add",value:function(e){i.list.push(e)}},{key:"Remove",value:function(e,t){var n=t.ToJSON();n&&(e.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack([n]),i.list.splice(i.list.indexOf(t),1))}},{key:"MouseDown",value:function(e,t,n){void 0!==i.construction&&(n===g.j.CN_GON?(i.GetLine(e,t,n),i.construction=void 0,i.isDone=!0,e.annotationInstance.activeCommandController.GoToACMode()):n===g.j.CN_STAR&&(i.GetLine(e,t,n),i.numClick++>0&&(i.construction=void 0,i.isDone=!0,i.numClick=0,e.annotationInstance.activeCommandController.GoToACMode())))}},{key:"MouseLeftClick",value:function(e,t,n){i.isDone?i.isDone=!1:void 0===e.annotationInstance.scene.capture&&void 0===i.construction&&i.GetLine(e,t,n)}},{key:"MouseMove",value:function(e){void 0!==i.construction&&i.DrawShadow(e)}}]),Object(r.a)(i,[{key:"InitComponent",value:function(){this.styleComponent=new Io(this)}},{key:"Init",value:function(){this.r1=10,this.lineWidth=8,this.numClick=0,this.vecs=[],i.Add(this)}},{key:"UpdateVecs",value:function(){this.vecs=[];for(var e=0;e<this.pts.length;++e)this.vecs.push(this.pts[e].vec);return this.vecs}},{key:"GetLog",value:function(){var e=0;return this.type===g.j.CN_GON?e=this.n:this.type===g.j.CN_STAR&&(e=Math.trunc(.5*this.n)),"GUID : "+this.id+"/TYPE : "+this.type.toString()+"/N num : "+e+"/Screen : /IsSEL : "+this.isSelected+"/isSelable : "+this.isSelectable}},{key:"Translate",value:function(e,t){}},{key:"TranslateByMouseEventData",value:function(e){for(var t=e.x-e.preX,n=e.y-e.preY,i=0;i<this.pts.length;++i)this.pts[i].vec.x+=t,this.pts[i].vec.y+=n,this.pts[i].UpdateGoeVec()}},{key:"Remove",value:function(){for(var e=0;e<this.pts.length;++e)this.pts[e].Remove();this.isSelectable=!1,this.isRenderable=!1,i.Remove(this.scene,this)}},{key:"Hide",value:function(){}},{key:"IsMouseInside",value:function(e,t){return!0!==this.isUnderConstruction&&void 0!==this.isUnderConstruction&&(this.CheckDistance(e,t)?(this.IsHover=!0,!0):(this.IsHover=!1,!1))}},{key:"CheckDistance",value:function(e,t){if(ge(new Oe(e,t),this.GetVecs()))return!0;for(var n=0;n<this.pts.length-1;++n)if(de(new Oe(e,t),this.pts[n].vec,this.pts[n+1].vec)<this.lineWidth)return!0;return!1}},{key:"GetVecs",value:function(){for(var e=[],t=0;t<this.pts.length;++t)e.push(this.pts[t].vec);return e}},{key:"ComputeCenterVec",value:function(){for(var e=[],t=0;t<this.pts.length;++t)e.push(this.pts[t].vec);this.vec=xe(e)}},{key:"Distance",value:function(e,t){return Math.sqrt((this.vec.x-e)*(this.vec.x-e)+(this.vec.y-t)*(this.vec.y-t))}},{key:"UpdateGeoPos",value:function(){for(var e=0;e<this.pts.length;++e)this.pts[e].UpdateGoeVec()}},{key:"DeepCopy",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"UpdateNGonByScale",value:function(e){this.UpdateNGon(this.vec.x+e,this.vec.y)}},{key:"UpdateNGon",value:function(e,t){this.r1=this.Distance(e,t);var n=new Oe(this.vec.x-e,this.vec.y-t).Normalize(),i=W(this.vec).Normalize(),a=ce(i,n)*(Math.PI/180);V(n,i).x<0&&(a*=-1);for(var o=2*Math.PI/this.n,r=this.n;r--;){var s=this.vec.x+this.r1*Math.cos(a),c=this.vec.y+this.r1*Math.sin(a);a+=o,this.pts[r].vec.x=s,this.pts[r].vec.y=c,this.pts[r].UpdateGoeVec()}}},{key:"UpdateNStar",value:function(e,t){0===this.numClick?this.r1=this.Distance(e,t):1===this.numClick&&(this.r2=this.Distance(e,t));var n=new Oe(this.vec.x-e,this.vec.y-t).Normalize(),i=W(this.vec).Normalize(),a=ce(i,n)*(Math.PI/180);V(n,i).x<0&&(a*=-1);for(var o=2*Math.PI/this.n,r=this.n;r--;)if(0===this.numClick){var s=void 0,c=void 0;r%2===0?(s=this.vec.x+this.r1*Math.cos(a),c=this.vec.y+this.r1*Math.sin(a)):(s=this.vec.x+(this.r1-5)*Math.cos(a),c=this.vec.y+(this.r1-5)*Math.sin(a)),a+=o,this.pts[r].vec.x=s,this.pts[r].vec.y=c,this.pts[r].UpdateGoeVec()}else{var l=void 0,p=void 0;r%2===0?(l=this.vec.x+this.r1*Math.cos(a),p=this.vec.y+this.r1*Math.sin(a)):(l=this.vec.x+this.r2*Math.cos(a),p=this.vec.y+this.r2*Math.sin(a)),a+=o,this.pts[r].vec.x=l,this.pts[r].vec.y=p,this.pts[r].UpdateGoeVec()}}},{key:"UpdateGeo",value:function(e,t){this.type===g.j.CN_GON?this.UpdateNGon(e,t):this.type===g.j.CN_STAR&&this.UpdateNStar(e,t)}},{key:"ComputeNGon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.n;if(this.pts.length>0){for(var t=this.pts.length;t--;)this.pts[t].Remove();this.pts=[]}this.type===g.j.CN_STAR&&(this.n=2*e);for(var n=0,i=2*Math.PI/this.n,a=this.n;a--;){var o=this.vec.x+this.r1*Math.cos(n),r=this.vec.y+this.r1*Math.sin(n);n+=i;var s=new $t(this.scene,o,r);s.AddEdge(this),s.type=g.j.CNODE,s.isSelectable=!1,this.pts.push(s)}}},{key:"ShiftNGon",value:function(){this.isUnderConstruction||this.ComputeCenterVec(),this.ComputeNGon()}},{key:"GetNode",value:function(){for(var e=[],t=0;t<this.pts.length;++t)e.push(this.pts[t].vec);return e}},{key:"ToJSON",value:function(){var e=new rt(this.id,this.type,this.isSelected,this.isHover,this.isHidden);return e.PushNode(this.GetNode()),e}},{key:"RenderPost",value:function(e){this.pts.length<3||(this.type===g.j.CN_GON?this.scene.annotationInstance.renderer.draw.shape.ngon.NGon(e,this.pts,this.isHover,this.isSelected):this.type===g.j.CN_STAR&&this.scene.annotationInstance.renderer.draw.shape.ngon.NStart(e,this.pts,this.isHover,this.isSelected))}},{key:"Scale",set:function(e){this.UpdateNGonByScale(e)}},{key:"V",get:function(){return this.vec},set:function(e){this.vec=e}},{key:"R",get:function(){return this.r},set:function(e){this.r=e}},{key:"IsSelectable",set:function(e){this.isSelectable=e;for(var t=0;t<this.pts.length;++t)this.pts[t].isSelectable=e},get:function(){return this.isSelectable}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){this.isSelected=e,this.scene.annotationInstance.io.eventListenerAnnotation.SelectionStack(this.ToJSON())}},{key:"IsHover",get:function(){return this.isHover},set:function(e){if(!this.isUnderConstruction&&(this.isHover=e,!this.isUnderConstruction)){var t,n=Po(this.pts);try{for(n.s();!(t=n.n()).done;){t.value.isRenderable=e}}catch(i){n.e(i)}finally{n.f()}this.isHover&&!this.isHoverPre?this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()):!this.isHover&&this.isHoverPre&&this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()),this.isHoverPre=this.isHover}}}]),i}(wt);function To(e){return function(){var t,n=Object(l.a)(e);if(Mo()){var i=Object(l.a)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return Object(c.a)(this,t)}}function Mo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}Object(u.a)(Do,"list",[]),Object(u.a)(Do,"isDone",!1),Object(u.a)(Do,"numClick",0),Object(u.a)(Do,"split",!1),Object(u.a)(Do,"nNumber",5);var Ao=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseLeftClick",value:function(e){$t.MouseLeftClick(this.acs.annotationInstance.scene,e)}},{key:"MouseMiddleClick",value:function(e){$t.MouseMiddleClick(e)}},{key:"MouseRightClick",value:function(e){$t.MouseRightClick(e)}},{key:"MouseMove",value:function(e){}},{key:"MouseDrag",value:function(e){}}]),n}(li),No=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseLeftClick",value:function(e){Ri.MouseLeftClick(this.acs.annotationInstance.scene,e)}}]),n}(Ao),Lo=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseLeftClick",value:function(e){_i.MouseLeftClick(this.acs.annotationInstance.scene,e)}}]),n}(Ao),Go=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseLeftClick",value:function(e){Hi.MouseLeftClick(this.acs.annotationInstance.scene,e)}}]),n}(Ao),_o=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){da.MouseDown(this.acs.annotationInstance.scene,e,g.j.ARROW_SINGLE)}},{key:"MouseLeftClick",value:function(e){da.MouseLeftClick(this.acs.annotationInstance.scene,e,g.j.ARROW_SINGLE)}},{key:"MouseMove",value:function(e){da.MouseMove(this.acs.annotationInstance.scene,e,g.j.ARROW_SINGLE)}},{key:"MouseUp",value:function(e){da.MouseUp(e)}},{key:"keydown",value:function(e){"Escape"!==e.key&&81!==e.keyCode&&13!==e.keyCode||da.Cancel()}}]),n}(li),Bo=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){da.MouseDown(this.acs.annotationInstance.scene,e,g.j.ARROW_DOUBLE)}},{key:"MouseLeftClick",value:function(e){da.MouseLeftClick(this.acs.annotationInstance.scene,e,g.j.ARROW_DOUBLE)}},{key:"MouseMove",value:function(e){void 0!==da.condition.v0&&da.DrawShadow(this.acs.annotationInstance.scene,e,g.j.ARROW_DOUBLE)}}]),n}(_o),Wo=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){$i.MouseDown(this.acs.annotationInstance.scene,e)}},{key:"MouseLeftClick",value:function(e){$i.MouseLeftClick(this.acs.annotationInstance.scene,e)}},{key:"MouseDoubleClick",value:function(e){$i.MouseDoubleClick(this.acs.annotationInstance.scene,e)}},{key:"MouseMove",value:function(e){$i.MouseMove(e)}},{key:"keydown",value:function(e){27===e.keyCode&&$i.Cancel(),81!==e.keyCode&&13!==e.keyCode||$i.DoneByKeyboard(this.acs.annotationInstance.scene)}},{key:"Undo",value:function(){$i.Undo(this.acs.m)}}]),n}(li),Vo=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseLeftClick",value:function(e){$i.MouseLeftClick(this.acs.annotationInstance.scene,e,!0)}},{key:"MouseDoubleClick",value:function(e){$i.MouseDoubleClick(this.acs.annotationInstance.scene,e,!0)}},{key:"MouseDown",value:function(e){$i.MouseDown(this.acs.annotationInstance.scene,e,!0)}},{key:"MouseMove",value:function(e){$i.MouseMove(e)}}]),n}(Wo),Fo=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){this.acs.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan=!1,Aa.MouseDown(this.acs.annotationInstance.scene,e,g.i.PLINE)}},{key:"MouseDrag",value:function(e){Aa.MouseDrag(this.acs.annotationInstance.scene,e,g.i.PLINE)}},{key:"MouseUp",value:function(e){Aa.MouseUp(this.acs.annotationInstance.scene,e)}},{key:"keydown",value:function(e){27===e.keyCode&&Aa.Cancel()}},{key:"MouseMove",value:function(e){Aa.MouseMove(this.acs.annotationInstance.scene,e,g.i.PLINE)}}]),n}(li),Uo=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){this.acs.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan=!1,Aa.MouseDown(this.acs.annotationInstance.scene,e,g.i.PLINE_BENDING)}},{key:"MouseDrag",value:function(e){Aa.MouseDrag(this.acs.annotationInstance.scene,e,g.i.PLINE_BENDING)}},{key:"MouseUp",value:function(e){Aa.MouseUp(this.acs.annotationInstance.scene,e)}},{key:"keydown",value:function(e){27===e.keyCode&&Aa.Cancel()}},{key:"MouseMove",value:function(e){Aa.MouseMove(this.acs.annotationInstance.scene,e,g.i.PLINE_BENDING)}}]),n}(li),zo=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){this.acs.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan=!1,Aa.MouseDown(this.acs.annotationInstance.scene,e,g.i.PGON)}},{key:"MouseDrag",value:function(e){Aa.MouseDrag(this.acs.annotationInstance.scene,e,g.i.PGON)}},{key:"MouseUp",value:function(e){Aa.MouseUp(this.acs.annotationInstance.scene,e)}},{key:"keydown",value:function(e){27===e.keyCode&&Aa.Cancel()}},{key:"MouseMove",value:function(e){Aa.MouseMove(this.acs.annotationInstance.scene,e,g.i.PGON)}}]),n}(li),Ho=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){this.acs.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan=!1,Aa.MouseDown(this.acs.annotationInstance.scene,e,g.i.POLYGON_GRAPH)}},{key:"MouseDrag",value:function(e){Aa.MouseDrag(this.acs.annotationInstance.scene,e,g.i.POLYGON_GRAPH)}},{key:"MouseUp",value:function(e){Aa.MouseUp(this.acs.annotationInstance.scene,e)}},{key:"keydown",value:function(e){27===e.keyCode&&Aa.Cancel()}},{key:"MouseMove",value:function(e){Aa.MouseMove(this.acs.annotationInstance.scene,e,g.i.POLYGON_GRAPH)}}]),n}(li),Yo=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){this.acs.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan=!1,Aa.MouseDown(this.acs.annotationInstance.scene,e,g.i.CURVE)}},{key:"MouseMove",value:function(e){Aa.MouseMove(this.acs.annotationInstance.scene,e,g.i.CURVE)}}]),n}(Fo),Ko=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){this.acs.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan=!1,Aa.MouseDown(this.acs.annotationInstance.scene,e,g.i.CURVE_CLOSED)}},{key:"MouseMove",value:function(e){Aa.MouseMove(this.acs.annotationInstance.scene,e,g.i.CURVE_CLOSED)}}]),n}(Fo),Xo=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){mn.MouseDown(this.acs.annotationInstance.scene,e)}},{key:"MouseLeftClick",value:function(e){mn.OnMouseLeftClick(this.acs.annotationInstance.scene,e)}},{key:"MouseMiddleClick",value:function(e){}},{key:"MouseRightClick",value:function(e){mn.OnMouseRightClick(e)}},{key:"MouseMove",value:function(e){mn.OnMouseMove(this.acs.annotationInstance.scene,e)}},{key:"MouseDrag",value:function(e){}},{key:"keydown",value:function(e){"Escape"!==e.key&&81!==e.keyCode&&13!==e.keyCode||mn.Cancel()}}]),n}(li),Jo=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){rn.MouseDown(this.acs.annotationInstance.scene,e)}},{key:"MouseLeftClick",value:function(e){rn.OnMouseLeftClick(this.acs.annotationInstance.scene,e)}},{key:"MouseMiddleClick",value:function(e){}},{key:"MouseRightClick",value:function(e){rn.OnMouseRightClick(e)}},{key:"MouseMove",value:function(e){rn.OnMouseMove(e)}},{key:"MouseDrag",value:function(e){}},{key:"keydown",value:function(e){27===e.keyCode&&rn.Cancel()}}]),n}(li),Zo=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){rn.GetCircleByArea(this.acs.annotationInstance.scene,5e5,e.x,e.y)}},{key:"MouseLeftClick",value:function(e){rn.construction&&(rn.construction.IsSelected=!1,rn.construction=void 0),this.acs.annotationInstance.activeCommandController.GoToACMode()}},{key:"MouseMiddleClick",value:function(e){}},{key:"MouseRightClick",value:function(e){rn.OnMouseRightClick(e)}},{key:"MouseMove",value:function(e){rn.OnMouseMove(e)}},{key:"MouseDrag",value:function(e){}},{key:"keydown",value:function(e){27===e.keyCode&&rn.Cancel()}}]),n}(li),qo=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){rn.GetCircleByCircumference(this.acs.annotationInstance.scene,500,e.x,e.y)}},{key:"MouseLeftClick",value:function(e){rn.construction&&(rn.construction.IsSelected=!1,rn.construction=void 0),this.acs.annotationInstance.activeCommandController.GoToACMode()}},{key:"MouseMiddleClick",value:function(e){}},{key:"MouseRightClick",value:function(e){rn.OnMouseRightClick(e)}},{key:"MouseMove",value:function(e){rn.OnMouseMove(e)}},{key:"MouseDrag",value:function(e){}},{key:"keydown",value:function(e){27===e.keyCode&&rn.Cancel()}}]),n}(li),Qo=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseLeftClick",value:function(e){Cn.MouseLeftClick(this.acs.annotationInstance.scene,e)}},{key:"MouseMove",value:function(e){Cn.MouseMove(e)}},{key:"MouseDoubleClick",value:function(e){Cn.MouseDoubleClick(this.acs.annotationInstance.scene,e)}},{key:"MouseDown",value:function(e){Cn.MouseDown(this.acs.annotationInstance.scene,e)}},{key:"keydown",value:function(e){27===e.keyCode&&Cn.Cancel(this.acs.annotationInstance.scene),81!==e.keyCode&&13!==e.keyCode||Cn.DoneByKeyboard(this.acs.annotationInstance.scene)}},{key:"Undo",value:function(){Cn.Undo(this.acs.annotationInstance.scene,this.acs.m)}}]),n}(li),$o=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseLeftClick",value:function(e){Un.MouseLeftClick(this.acs.annotationInstance.scene,e)}},{key:"MouseMove",value:function(e){Un.MouseMove(this.acs.annotationInstance.scene,e)}},{key:"MouseDoubleClick",value:function(e){Un.MouseDoubleClick(this.acs.annotationInstance.scene,e)}},{key:"MouseDown",value:function(e){Un.MouseDown(this.acs.annotationInstance.scene,e)}},{key:"keydown",value:function(e){27===e.keyCode&&Un.Cancel(this.acs.annotationInstance.scene),81!==e.keyCode&&13!==e.keyCode||Un.DoneByKeyboard(this.acs.annotationInstance.scene)}},{key:"Undo",value:function(){Un.Undo(this.acs.annotationInstance.scene,this.acs.m)}}]),n}(li),er=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseLeftClick",value:function(e){ko.MouseLeftClick(this.acs.annotationInstance.scene,e)}},{key:"MouseMove",value:function(e){ko.MouseMove(e)}},{key:"MouseDoubleClick",value:function(e){ko.MouseDoubleClick(e)}},{key:"MouseDown",value:function(e){ko.MouseDown(e)}},{key:"keydown",value:function(e){27===e.keyCode&&ko.Cancel(),81!==e.keyCode&&13!==e.keyCode||ko.DoneByKeyboard()}},{key:"Undo",value:function(){ko.Undo(this.acs.m)}}]),n}(li),tr=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseLeftClick",value:function(e){Cn.MouseLeftClick(this.acs.annotationInstance.scene,e,!0)}},{key:"MouseMove",value:function(e){Cn.MouseMove(e)}},{key:"MouseDoubleClick",value:function(e){Cn.MouseDoubleClick(this.acs.annotationInstance.scene,e)}},{key:"MouseDown",value:function(e){Cn.MouseDown(this.acs.annotationInstance.scene,e,!0)}},{key:"keydown",value:function(e){27===e.keyCode&&Cn.Cancel(this.acs.annotationInstance.scene),81!==e.keyCode&&13!==e.keyCode||Cn.DoneByKeyboard(this.acs.annotationInstance.scene)}},{key:"Undo",value:function(){Cn.Undo(this.acs.annotationInstance.scene,this.acs.m)}}]),n}(li),nr=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseLeftClick",value:function(e){Pn.MouseLeftClick(this.acs.annotationInstance.scene,e)}},{key:"MouseMove",value:function(e){Pn.MouseMove(e)}},{key:"MouseDoubleClick",value:function(e){Pn.MouseDoubleClick(this.acs.annotationInstance.scene,e)}},{key:"MouseDown",value:function(e){Pn.MouseDown(this.acs.annotationInstance.scene,e)}},{key:"keydown",value:function(e){27===e.keyCode&&Pn.Cancel(this.acs.annotationInstance.scene),81!==e.keyCode&&13!==e.keyCode||Pn.DoneByKeyboard(this.acs.annotationInstance.scene)}},{key:"Undo",value:function(){Pn.Undo(this.acs.annotationInstance.scene,this.acs.m)}}]),n}(li),ir=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseLeftClick",value:function(e){Ia.MouseLeftClick(this.acs.annotationInstance.scene,e)}},{key:"MouseMove",value:function(e){Ia.MouseMove(this.acs.annotationInstance.scene,e)}},{key:"MouseDoubleClick",value:function(e){Ia.MouseDoubleClick(this.acs.annotationInstance.scene,e)}},{key:"MouseDown",value:function(e){Ia.MouseDown(this.acs.annotationInstance.scene,e)}},{key:"keydown",value:function(e){27===e.keyCode&&Ia.Cancel(this.acs.annotationInstance.scene),81!==e.keyCode&&13!==e.keyCode||Ia.DoneByKeyboard(this.acs.annotationInstance.scene)}},{key:"Undo",value:function(){Ia.Undo(this.acs.annotationInstance.scene,this.acs.m)}}]),n}(li),ar=function(e){Object(p.a)(n,e);var t=To(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return n}(li),or=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseLeftClick",value:function(e){Pn.MouseLeftClick(this.acs.annotationInstance.scene,e,!0)}},{key:"MouseMove",value:function(e){Pn.MouseMove(e)}},{key:"MouseDoubleClick",value:function(e){Pn.MouseDoubleClick(this.acs.annotationInstance.scene,e)}},{key:"MouseDown",value:function(e){Pn.MouseDown(this.acs.annotationInstance.scene,e)}},{key:"keydown",value:function(e){27===e.keyCode&&Pn.Cancel(this.acs.annotationInstance.scene),81!==e.keyCode&&13!==e.keyCode||Pn.DoneByKeyboard(this.acs.annotationInstance.scene)}},{key:"Undo",value:function(){Pn.Undo(this.acs.annotationInstance.scene,this.acs.m)}}]),n}(li),rr=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseLeftClick",value:function(e){this.acs.annotationInstance.activeCommandController.IsTextEditing=!0,go.MouseLeftClick(this.acs.annotationInstance.scene,e)}},{key:"MouseMove",value:function(e){go.MouseMove(e)}}]),n}(li),sr=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){this.acs.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan=!1,jo.MouseDown(this.acs.annotationInstance.scene,e)}},{key:"MouseDrag",value:function(e){jo.MouseDrag(e)}},{key:"MouseUp",value:function(e){jo.MouseUp(this.acs.annotationInstance.scene,e)}},{key:"keydown",value:function(e){27===e.keyCode&&jo.Cancel()}},{key:"MouseMove",value:function(e){jo.MouseMove(this.acs.annotationInstance.scene,e,g.i.PLINE)}}]),n}(li),cr=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){this.acs.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan=!1,jo.MouseDown(this.acs.annotationInstance.scene,e)}},{key:"MouseDrag",value:function(e){jo.MouseDrag(e)}},{key:"MouseUp",value:function(e){jo.MouseUp(this.acs.annotationInstance.scene,e)}},{key:"keydown",value:function(e){27===e.keyCode&&jo.Cancel()}},{key:"MouseMove",value:function(e){jo.MouseMove(this.acs.annotationInstance.scene,e,g.i.PLINE,g.m.DEEP_LEARNING)}}]),n}(sr),lr=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){At.MouseDown(this.acs.annotationInstance.scene,e)}},{key:"MouseLeftClick",value:function(e){At.MouseLeftClick(this.acs.annotationInstance.scene,e)}},{key:"MouseMove",value:function(e){At.MouseMove(this.acs.annotationInstance.scene,e)}},{key:"MouseUp",value:function(e){At.MouseUp(this.acs.annotationInstance.scene,e)}},{key:"keydown",value:function(e){27===e.keyCode&&At.Cancel()}}]),n}(li),pr=function(e){Object(p.a)(n,e);var t=To(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"MouseDown",value:function(e){Do.MouseDown(this.acs.annotationInstance.scene,e,g.j.CN_STAR)}},{key:"MouseLeftClick",value:function(e){Do.MouseLeftClick(this.acs.annotationInstance.scene,e,g.j.CN_STAR)}},{key:"MouseMove",value:function(e){Do.MouseMove(e)}},{key:"keydown",value:function(e){27===e.keyCode&&Do.Cancel()}}]),n}(li);function ur(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var dr=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(ur()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).renderStyle=new Bt,t.renderStyleNode=new Bt,t.UpdateStyle(),t}return Object(r.a)(i,[{key:"UpdateStyle",value:function(){Bt.UpdateRenderStyleNPoint(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent),this.geo.IsSelected||(this.renderStyle.colorInterpolated.r=this.renderStyle.colorB.r,this.renderStyle.colorInterpolated.g=this.renderStyle.colorB.g,this.renderStyle.colorInterpolated.b=this.renderStyle.colorB.b,this.renderStyle.colorInterpolated.a=this.renderStyle.colorB.a)}}]),i}(Vt);function hr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var mr=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(hr()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).InterpolateColor(),t}return Object(r.a)(i,[{key:"Update",value:function(){this.InterpolateColor()}},{key:"InterpolateColor",value:function(){if(this.host.IsSelected||this.host.IsHover){if(this.tOpacityA+=this.host.scene.annotationInstance.customization.themeCurrent.properties.timeTransitionA,this.tOpacityB=0,this.tOpacityA<1){var e=Object(Gt.e)(this.host.styleComponent.renderStyle.colorInterpolated.GetArray(),this.host.styleComponent.renderStyle.colorA.GetArray(),this.tOpacityA);this.host.styleComponent.renderStyle.colorInterpolated.r=e[0],this.host.styleComponent.renderStyle.colorInterpolated.g=e[1],this.host.styleComponent.renderStyle.colorInterpolated.b=e[2],this.host.styleComponent.renderStyle.colorInterpolated.a=e[3]}}else if(this.tOpacityA=0,this.tOpacityB+=this.host.scene.annotationInstance.customization.themeCurrent.properties.timeTransitionB,this.tOpacityB<1){var t=Object(Gt.e)(this.host.styleComponent.renderStyle.colorInterpolated.GetArray(),this.host.styleComponent.renderStyle.colorB.GetArray(),this.tOpacityB);this.host.styleComponent.renderStyle.colorInterpolated.r=t[0],this.host.styleComponent.renderStyle.colorInterpolated.g=t[1],this.host.styleComponent.renderStyle.colorInterpolated.b=t[2],this.host.styleComponent.renderStyle.colorInterpolated.a=t[3]}}}]),i}(Ht);function fr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var yr=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(fr()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).host=e,t.interpolateColor=new mr(t.host),t}return Object(r.a)(i,[{key:"RenderPost",value:function(e){this.interpolateColor.Update();var t=this.host.scene.annotationInstance.renderer.draw.shape.guidedTour;this.host.isDrag?(t.PointNumberedDragByCircle(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tUp),!0,!0,this.host.isGrayColor,this.host.visibility,this.host.GetIndex(),this.host.isHover,this.host.isSelected),this.tUp+=.015,this.tDown2=0):(this.host.isSelected?(t.ShadowNPoint(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.IsSelected,this.host.IsHover),t.PointNumberedOverBoundingByCircleSelected(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),!0,!0,this.host.isGrayColor,this.host.visibility),this.tOver+=.015,this.tDown1=0,this.host.isHover?this.tOverPopupSummary+=this.host.scene.annotationInstance.renderer.dt:this.tOverPopupSummary=0,this.host.isLeave=!0):this.host.isHover?(t.ShadowNPointLight(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.host.IsSelected,this.host.IsHover),t.PointNumberedOverBoundingByCircle(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tOver),!0,!0,this.host.isGrayColor,this.host.visibility),this.tOver+=.015,this.tOverPopupSummary+=this.host.scene.annotationInstance.renderer.dt,this.tDown1=0,this.host.isLeave=!0):this.host.isLeave&&!this.host.isDrag?(t.PointNumberedOverBoundingByCircle(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tDown1),!1,!0,this.host.isGrayColor,this.host.visibility),this.tDown1+=.015,this.tOver=this.tOverPopupSummary=0,this.tDown1>.15&&(this.host.isLeave=!1)):this.host.isDrag||(t.PointNumberedOverBoundingByCircle(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tDown1),!1,!1,this.host.isGrayColor,this.host.visibility),this.tDown1+=this.host.scene.annotationInstance.renderer.dt,this.tOver=this.tOverPopupSummary=0),t.PointNumberedDragByCircle(e,this.host.styleComponent.renderStyle,this.host.vec.x,this.host.vec.y,this.geo.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.tDown2),!1,!1,this.host.isGrayColor,this.host.visibility,this.host.GetIndex(),this.host.isHover,this.host.isSelected),this.tUp=0,this.tDown2+=.5*this.host.scene.annotationInstance.renderer.dt,this.tDown2>.15&&(this.host.isDrop=!1)),this.host.hasPopup&&this.host.IsMove&&this.host.UpdateDivPos(),this.host.t+=this.host.scene.annotationInstance.renderer.dt}}]),i}(Yt);function gr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var vr=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(gr()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).geo=e,t}return Object(r.a)(i,[{key:"TranslateByMouseEventData",value:function(e){}},{key:"Translate",value:function(e,t){}}]),i}(Ci),br=function(){function e(t){Object(o.a)(this,e),this.geo=t}return Object(r.a)(e,[{key:"IsMouseInside",value:function(e,t){return!1}},{key:"GetLog",value:function(){return""}},{key:"Hide",value:function(){}}]),e}();function xr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Or=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(xr()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,p=arguments.length>4&&void 0!==arguments[4]&&arguments[4],d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g.j.POINT_NUMBERED_TOUR;arguments.length>6&&void 0!==arguments[6]&&arguments[6],arguments.length>7&&void 0!==arguments[7]&&arguments[7],arguments.length>8&&void 0!==arguments[8]&&arguments[8],arguments.length>9&&void 0!==arguments[9]?arguments[9]:g.l.ROUND;return Object(o.a)(this,i),t=n.call(this,e,a,r,l,d),Object(u.a)(Object(s.a)(t),"numberIndexNeeded",!0),Object(u.a)(Object(s.a)(t),"_numberIndex",-1),t.type=d,t.isUndo=p,t.numberIndex=t.scene.listNPoint.length+1,t.InitComponent(),e.AddGuidedTourNPoint(Object(s.a)(t)),t.isUndo?Object(c.a)(t):(e.annotationInstance.io.eventListenerAnnotation.AddGeometryStack(t.ToJSON()),t)}return Object(r.a)(i,null,[{key:"FindAtPoint",value:function(e,t,n){for(var i=e.listNPoint.length-1;i>=0;--i)if(e.listNPoint.length[i].isSelectable&&e.listNPoint.length[i].IsMouseInside(t,n))return e.listNPoint.length[i]}},{key:"GetLengthSelection",value:function(e){for(var t=e.listNPoint.length,n=0;t--;)e.listNPoint[t].IsSelected&&(n+=1);return n}},{key:"RemoveAllCapturedGeo",value:function(e){for(var t=e.listNPoint,n=0;n<t.length;++n)!0===e.listNPoint[n].isSelected&&e.listNPoint[n].Remove()}},{key:"DeSelecteCaptureObjects",value:function(e){for(var t=0;t<e.listNPoint.length;++t)e.listNPoint[t].isSelected=!1}},{key:"MoveSelectedGeo",value:function(e,t){for(var n=0;n<e.listNPoint.length;++n)!0!==e.listNPoint[n].isSelected||e.listNPoint[n].isHover||e.listNPoint[n].TranslateByMouseEventData(t),!0===e.listNPoint[n].isHover&&e.listNPoint[n].TranslateByMouseEventData(t)}},{key:"FromJSON",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(t.nodes[0].proX,t.nodes[0].proY),r=new i(e,o[0],o[1],0,n);return r.type=g.j[t.type],r.id=a?e.GetUUID():t.id,r.isHidden=t.isHidden,t.isHidden?r.visibility=0:r.visibility=1,r.UpdateScreenVecByProjectedPos(),r.InitVecsHistory(),r}},{key:"MouseRightClick",value:function(e){}},{key:"MouseMiddleClick",value:function(e){}},{key:"MouseLeftClick",value:function(e,t){void 0===e.capture&&(new i(e,t.x,t.y,0).Dummy(),e.annotationInstance.activeCommandController.acProperties.pressShift||e.annotationInstance.activeCommandController.GoToACMode())}}]),Object(r.a)(i,[{key:"InitComponent",value:function(){this.styleComponent=new dr(this),this.renderer=new yr(this),this.transformation=new vr(this),this.interaction=new br(this)}},{key:"Init",value:function(){this.isGeoPos=!0,this.edges=[],this.isPointMid=!1,this.t=0}},{key:"IsMouseInside",value:function(e,t){return!(this.isRemove||!this.isRenderable||this.isHidden)&&this.Distance(e,t+11)<=this.r+12}},{key:"GetParentType",value:function(){return"ANNOTATION.POINT_NUMBERED"}},{key:"Remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isSelectable=!1,this.isRenderable=!1,this.hasPopup&&this.HidePopUpSummary(),e){var t=this.ToJSON();t&&this.scene.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack([t])}this.textLeaderline&&this.textLeaderline.RemoveByAttachedShape(),this.scene.RemoveBasePoint(this),this.scene.RemoveGuidedTourNPoint(this),this.scene.RemoveGeometry(this)}},{key:"GetIndex",value:function(){return this.numberIndex+1}},{key:"DeepCopy",value:function(e,t){return new i(this.scene,e,t,this.vec.z,!1,this.type,this.r)}},{key:"MouseLeftClick",value:function(){this.IsSelected=!0,this.scene.annotationInstance.geometryCommon.gcmdProcessing.RemoveAllPopup(),this.ShowPopupSummary()}},{key:"UpdateDivPos",value:function(){this.popup&&(this.popup.style.left="".concat(this.vec.x,"px"),this.popup.style.top="".concat(this.vec.y,"px"))}},{key:"ShowPopupSummary",value:function(){}},{key:"HidePopupSummary",value:function(){}},{key:"RenderPost",value:function(e){this.renderer.RenderPost(e)}},{key:"ToJSON",value:function(){if(this.type!==g.j.ANODE&&this.type!==g.j.ANODE_CIRCLE&&this.type!==g.j.AMIDPOINT&&this.type!==g.j.AN_GON&&this.type!==g.j.ANODE_RECT){var e=new rt(this.id,this.type,this.isSelected,this.isHover,this.isHidden);return e.PushNode(this.GetNode()),e}}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){this.isSelected=e,this.scene.annotationInstance.io.eventListenerAnnotation.SelectionStack(this.ToJSON())}},{key:"IsHover",get:function(){return this.isHover},set:function(e){this.isHover=e,this.isHover&&!this.isHoverPre?this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()):!this.isHover&&this.isHoverPre&&this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()),this.isHoverPre=this.isHover,e||(this.needEmitHoverPost=!0,this.HidePopUpSummary())}},{key:"numberIndex",get:function(){return this._numberIndex},set:function(e){this._numberIndex=e}}]),i}(It);function wr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var jr=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(wr()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){return Object(o.a)(this,i),n.call(this,e)}return Object(r.a)(i,[{key:"MouseLeftClick",value:function(e){Or.MouseLeftClick(this.acs.annotationInstance.scene,e)}}]),i}(Ao),Cr=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"sanpValue",10),Object(u.a)(this,"type",g.b.NONE),Object(u.a)(this,"activeBase64img",""),Object(u.a)(this,"_isTouchEvent",!1),Object(u.a)(this,"_zoomLevelForMoving",2),this.acProperties=new zn(this),this.annotationInstance=t,this.commands={POINT_REGULAR:new No(this),POINT_NUMBERED:new Lo(this),POINT_ICON:new Go(this),ARROW_SINGLE:new _o(this),ARROW_DOUBLE:new Bo(this),CURVE_OPEN:new Wo(this),CURVE_CLOSE:new Vo(this),POLYLINE:new Qo(this),POLYLINE_CONSTRAINT:new tr(this),POLYLINE_BENDING:new $o(this),LINE_GRAPH:new er(this),POLYGON:new nr(this),POLYGON_GRAPH:new ir(this),POLYGON_CONSTRAINT:new or(this),POLYGON_MULTIPLE:new ar(this),TEXT_LEADERLINE:new rr(this),FREEHAND_POLYLINE:new Fo(this),FREEHAND_POLYLINE_BENDING:new Uo(this),FREEHAND_POLYGON:new zo(this),FREEHAND_POLYGON_GRAPH:new Ho(this),FREEHAND_CURVE:new Yo(this),FREEHAND_CURVE_CLOSED:new Ko(this),SMARTDRAWING:new sr(this),SMARTDRAWING_DEEPLEARNING:new cr(this),LINE:new lr(this),POINT_NUMBERED_TOUR:new jr(this),NONE:new di(this),SELECT:new mi(this),REMOVE:new hi(this),SELECT_RECT:new fi(this),SELECT_LASSO:new yi(this),MOVE_EASEING:new gi(this),UNDO:new vi(this),REDO:new bi(this),RECTANGLE:new Xo(this),STAR:new pr(this),CIRCLE:new Jo(this),CIRCLE_CONSTRAINT_AREA:new Zo(this),CIRCLE_CONSTRAINT_CIRCUMFERENCE:new qo(this)},this.type=g.b.SELECT,this.m=new Fe,this.mNoSnap=this.m.DeepCopy(),this.InitActiveCursor(),this.activeCommand=new di(this),this.postACMode=g.b.SELECT}return Object(r.a)(e,[{key:"InitActiveCursor",value:function(){this.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView?this.activeCursor=new M(this.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.container):this.activeCursor=new M(this.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div)}},{key:"SetActiveColor",value:function(e){}},{key:"SetActiveCommand",value:function(e){(e=this.RemapActiveCommandVersion(e))===g.b.SMARTDRAWING_DEEPLEARNING&&(this.annotationInstance.implementations.app.addon.smartDrawing||this.annotationInstance.implementations.app.addon.InitSmartDrawing()),this.acProperties.pressShift=!1,this.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode===g.k.DRAWING?(e===g.b.SELECT||e===g.b.NONE?this.acProperties.isDrawing=!1:this.acProperties.isDrawing=!0,this.CancelAC(),this.activeCommand=this.commands[e],this.type=e,this.type===g.b.TEXT?document.body.style.cursor="text":document.body.style.cursor="auto",this.type===g.b.POINT_REGULAR||this.type===g.b.POINT_ICON||this.type===g.b.POINT_NUMBERED||this.type===g.b.LINE?this.acProperties.showTooltipPoint=!0:this.acProperties.showTooltipPoint=!1):this.activeCommand=this.commands[e]}},{key:"GoToACMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.postACMode;this.acProperties.needPostACMode&&(this.SetActiveCommand(e),this.annotationInstance.io.eventListenerAnnotation.ShiftCAMode(e))}},{key:"SetDrawingToolMode",value:function(e){this.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode=e}},{key:"SmartDrawing",value:function(e){}},{key:"UpdateLocale",value:function(){}},{key:"ResizeCanvas",value:function(e,t){}},{key:"CancelAC",value:function(){this.acProperties.pressShift=!1,this.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode!==g.k.OBSERVE_VIEWER&&(Un.Cancel(this.annotationInstance.scene),Pn.Cancel(this.annotationInstance.scene),Cn.Cancel(this.annotationInstance.scene))}},{key:"GetCircleFromVoice",value:function(){rn.GetCircleFromVoice(this.annotationInstance.scene)}},{key:"GetRectangleFromVoice",value:function(){mn.GetRectangleFromVoice(this.annotationInstance.scene)}},{key:"ReUndoProcessing",value:function(e){this.annotationInstance.geometryCommon.gcmdProcessing.ReUndoProcessing(e)}},{key:"ReUndoProcessingStorymaps",value:function(e){this.annotationInstance.geometryCommon.gcmdProcessing.ReUndoProcessingStorymaps(e)}},{key:"RepopulateGeometries",value:function(e){this.annotationInstance.geometryCommon.gcmdProcessing.RepopulateGeometries(e)}},{key:"Base64DumpIcon",value:function(e,t,n){this.Base64Processing(e,t,n)}},{key:"RemoveSelShape",value:function(){this.annotationInstance.geometryCommon.gcmdProcessing.RemoveAllCapturedGeoGroup()}},{key:"Base64Processing",value:function(e,t,n){e===g.a.AddIconBase64&&void 0!==n&&this.annotationInstance.renderer.draw.image.AddBase64(t,n),e===g.a.SelectIconBase64&&this.annotationInstance.renderer.draw.image.ActiveBase64(t)}},{key:"MousePostProcess",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.sanpValue;return this.acProperties.snap?(e.x=Math.floor(e.x/t)*t,e.y=Math.floor(e.y/t)*t,e):e}},{key:"ProcessingUpdate",value:function(e,t){this.annotationInstance.geometryCommon.gcmdProcessing.ProcessingUpdate(e,t)}},{key:"RemoveByIDs",value:function(e){this.annotationInstance.geometryCommon.gcmdProcessing.RemoveByIDs(e)}},{key:"RemoveAllShapes",value:function(){this.annotationInstance.geometryCommon.gcmdProcessing.SelecteAllObjects(),this.annotationInstance.geometryCommon.gcmdProcessing.RemoveAllGeo(),this.annotationInstance.geometryCommon.gcmdProcessing.RemoveAll()}},{key:"CommonEvent",value:function(e){return this.mNoSnap=e.DeepCopy(),e=this.MousePostProcess(e),this.annotationInstance.apiWrapper.environment.LogCommon(e.x,e.y),this.m=e,e}},{key:"InitGhost",value:function(e,t){this.annotationInstance.scene.InitGhost(e,t)}},{key:"InitGhostPolygon",value:function(e){this.annotationInstance.scene.InitGhostPolygon(e)}},{key:"EnterGhost",value:function(e){this.annotationInstance.scene.EnterGhost(e)}},{key:"LeaveGhost",value:function(e){this.annotationInstance.scene.LeaveGhost(e)}},{key:"AddGhost",value:function(e){this.annotationInstance.scene.AddGhost(e)}},{key:"RemoveGhost",value:function(){this.annotationInstance.scene.RemoveGhost()}},{key:"Hide",value:function(e){this.annotationInstance.geometryCommon.gcmdProcessing.Hide(e)}},{key:"Unhide",value:function(e){this.annotationInstance.geometryCommon.gcmdProcessing.Unhide(e)}},{key:"SetupPolylineConstraintLength",value:function(e){this.annotationInstance.geometryCommon.gcmdProcessing.SetupPolylineConstraintLength(e)}},{key:"SetupPolylineConstraintLengthPercentage",value:function(e){this.annotationInstance.geometryCommon.gcmdProcessing.SetupPolylineConstraintLengthPercentage(e)}},{key:"DisableExcept",value:function(e){this.annotationInstance.geometryCommon.gcmdProcessing.DisableExcept(e)}},{key:"Highlight",value:function(e){this.annotationInstance.geometryCommon.gcmdProcessing.Highlight(e)}},{key:"ActiveCursor",value:function(){this.type===g.b.SELECT||this.type===g.b.NONE||this.type===g.b.SELECT_LASSO||this.type===g.b.SELECT_RECT?(this.acProperties.hasHovering?this.activeCursor.Hovering():this.activeCursor.Default(),this.ActiveCursorForText()):this.activeCursor.Creating()}},{key:"ActiveCursorForText",value:function(){for(var e=0;e<this.annotationInstance.scene.listATextleaderlineWrapper.length;++e)this.annotationInstance.scene.listATextleaderlineWrapper[e].IsMouseInsideDiv(this.m.x,this.m.y)&&this.activeCursor.Texting()}},{key:"ShiftProjectionByAPI",value:function(){this.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.isCustomAPI=!this.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.isCustomAPI}},{key:"DownloadShapes",value:function(){this.annotationInstance.implementations.app.model.ioWrapper.Download()}},{key:"DownloadTheme",value:function(){this.annotationInstance.customization.DownloadTheme()}},{key:"Pause",value:function(){this.annotationInstance.implementations.app.pause()}},{key:"Resume",value:function(){this.annotationInstance.implementations.app.resume()}},{key:"RemapActiveCommandVersion",value:function(e){return e}},{key:"ShiftRenderLoop",value:function(e){!e&&this.annotationInstance.scene.listATextleaderlineWrapper.length>0?this.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.IsRenderSkip=!1:this.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.IsRenderSkip=!0}},{key:"ActivecommandIconPoint",value:function(){this.SetActiveCommand(g.b.POINT_ICON)}},{key:"zoomLevelForMoving",set:function(e){this._zoomLevelForMoving=2+Math.floor(e/4)},get:function(){return this._zoomLevelForMoving}},{key:"postACMode",get:function(){return this._postACMode},set:function(e){this._postACMode=e}},{key:"IsTouchEvent",get:function(){return this._isTouchEvent},set:function(e){this._isTouchEvent=e}},{key:"IsTextEditing",set:function(e){this.acProperties.isTextEditing=e},get:function(){return this.acProperties.isTextEditing}}]),e}();function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ir=function(){function e(t){Object(o.a)(this,e),this.gcmd=t}return Object(r.a)(e,[{key:"UpdateStyle",value:function(){for(var e=this.gcmd.annotationInstance.scene.geometryList.length;e--;)this.gcmd.annotationInstance.scene.geometryList[e].styleComponent.UpdateStyle();this.RenderForce()}},{key:"InitViewChangingForce",value:function(){}},{key:"ViewChangingForce",value:function(){this.gcmd.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.isViewChanging=!0}},{key:"RenderForce",value:function(){this.gcmd.annotationInstance.graphicsCoreWrapper.RenderForce()}},{key:"RenderForceMask",value:function(){this.gcmd.annotationInstance.graphicsCoreWrapper.RenderForceMask()}},{key:"UpdateExtent",value:function(){this.gcmd.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView&&this.gcmd.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent.Update()}},{key:"CheckBoundIntersection",value:function(e,t,n){return!!function(e,t,n){for(var i=0;i<e.length-1;++i)if(ve(e[i],e[i+1],t,n))return!0;return!1}(e,t,n)}},{key:"PushThemeJSON",value:function(e){this.gcmd.annotationInstance.customization.themeRenderStyle.PushThemeJSON(e)}},{key:"ToScreen",value:function(e,t){return this.gcmd.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.projectionController.ToScreen(e,t)}},{key:"ToScreenFromGeoPos",value:function(e,t){return this.gcmd.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.projectionController.ToScreenFromGeoPos(e,t)}},{key:"WrappingProjectedPos",value:function(e,t){return this.gcmd.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.projectionController.WrappingProjectedPos(e,t)}},{key:"WrappingProjectedPosShape",value:function(e,t,n){return this.gcmd.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.projectionController.WrappingProjectedPosForShape(e,t,n)}},{key:"ToScreenFromProjectedPos",value:function(e,t){return this.gcmd.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.projectionController.ToScreenFromProjectedPos(e,t)}},{key:"ToScreenWrapVec",value:function(e,t){return this.gcmd.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.projectionController.ToScreenWrapVec(e,t)}},{key:"ToMap",value:function(e,t){return this.gcmd.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.projectionController.ToMap(e,t)}},{key:"GotoExtent",value:function(e){var t=this.GetExtent(e),n=this.gcmd.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.extent.clone();n.xmin=t.xmin,n.ymin=t.ymin,n.xmax=t.xmax,n.ymax=t.ymax,this.gcmd.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.goTo(n)}},{key:"GetExtent",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n={xmin:Number.MAX_SAFE_INTEGER,ymin:Number.MAX_SAFE_INTEGER,xmax:Number.MIN_SAFE_INTEGER,ymax:Number.MIN_SAFE_INTEGER},i=0;i<e.length;++i)n.xmin=e[i].vec.proX<n.xmin?e[i].vec.proX:n.xmin,n.ymin=e[i].vec.proY<n.ymin?e[i].vec.proY:n.ymin,n.xmax=e[i].vec.proX>n.xmax?e[i].vec.proX:n.xmax,n.ymax=e[i].vec.proY>n.ymax?e[i].vec.proY:n.ymax;if(t>0){var a=n.xmax-n.xmin,o=n.ymax-n.ymin,r=a*t,s=o*t;n.xmax+=r,n.xmin-=r,n.ymax+=s,n.ymin-=s}return Sr({},n,{spatialReference:{latestWkid:3857,wkid:102100}})}}]),e}();function Pr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Rr=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Pr()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).host=e,t}return Object(r.a)(i,[{key:"RenderPost",value:function(e){this.timer.Update(),this.timer.UpdatePopupSummery(),this.host.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.zoomLevel>10?this.host.vecs=this.host.vecsOptimized[this.host.vecsOptimized.length-1]:this.host.vecs=this.host.vecsOptimized[this.host.theResIndex[Math.floor(this.host.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.zoomLevel)]],this.host.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.isViewChanging?this.host.UpdateVecByViewChangingComputeByProjected()&&(this.RenderPolygon(e),this.host.needRender=!0):this.host.needRender&&(console.log(this.host.vecs),this.RenderPolygon(e),this.host.needRender=!1),this.OffscreenRender()}},{key:"RenderPolygon",value:function(e){this.host.isHover||this.host.isSelected,this.host.scene.annotationInstance.renderer.draw.shape.area.PolygonMultiple(e,this.host.styleComponent.renderStyle,this.host.vecs,this.host.areas,this.host.minAreaToCompute,this.host.visibility,this.host.isHover,this.host.isFill)}},{key:"RenderMask",value:function(e){this.host.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.zoomLevel>10?this.host.vecs=this.host.vecsOptimized[this.host.vecsOptimized.length-1]:this.host.vecs=this.host.vecsOptimized[this.host.theResIndex[Math.floor(this.host.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.zoomLevel)]],this.host.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.isViewChanging?this.host.UpdateVecByViewChangingComputeByProjected()?(this.host.scene.annotationInstance.renderer.draw.shape.area.PolygonMultipleMask(e,this.host.styleComponent.renderStyle,this.host.vecs,this.host.areas,this.host.minAreaToCompute,this.host.visibility,this.host.isHover,this.host.isFill),this.host.needRender=!0,this.host.outOfExtend=!1):this.host.outOfExtend=!0:this.host.needRender&&(this.host.scene.annotationInstance.renderer.draw.shape.area.PolygonMultipleMask(e,this.host.styleComponent.renderStyle,this.host.vecs,this.host.areas,this.host.minAreaToCompute,this.host.visibility,this.host.isHover,this.host.isFill),this.host.needRender=!1)}},{key:"OffscreenRender",value:function(){this.host.scene.annotationInstance.renderer.draw.featurePreset.PolygonOffScreenByVecsOfVecs(this.host.hashColor,this.host.vecs)}},{key:"RenderWrapping",value:function(e){}}]),i}(Yt);function Er(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Dr=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Er()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).renderStyle=new Bt,t.renderStyleNode=new Bt,t.UpdateStyle(),t}return Object(r.a)(i,[{key:"UpdateStyle",value:function(){}}]),i}(Vt);function Tr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Mr=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Tr()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e,t){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(o.a)(this,i),a=n.call(this,e),Object(u.a)(Object(s.a)(a),"vecSelected",-1),Object(u.a)(Object(s.a)(a),"vecsBound",[]),Object(u.a)(Object(s.a)(a),"needComputeProjection",!1),Object(u.a)(Object(s.a)(a),"needWrapCompute",!0),Object(u.a)(Object(s.a)(a),"needWrappingDuplicate",!1),Object(u.a)(Object(s.a)(a),"needWrapping",!1),Object(u.a)(Object(s.a)(a),"isLeft",!1),Object(u.a)(Object(s.a)(a),"isRight",!1),a.vecsOrigin=t;a.needRender=!0;performance.now();for(var l=0;l<t.length;++l)for(var p=0;p<t[l].length;++p){var d=t[l][p],h=a.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromGeoPos(d.long,d.lat);d.x=h[0],d.y=h[1];var m=a.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.projectionController.ToMap(h[0],h[1]);d.proX=m[2],d.proY=m[3],t[l][p]=d}var f=[.15,.05,.03,.015,.01];a.theResIndex=[0,0,0,1,2,2,2,3,4,4,4],a.vecsOptimized=[];for(var y=0;y<f.length;++y)if(c){var g=ya.SimplifyPathGeoMultPolygon(t,f[y]);a.vecsOptimized.push(g)}else a.vecsOptimized.push(t);performance.now();return a.vecsOptimized.push(t),a.vecs=a.vecsOptimized[0],a.wrapping=new kt(Object(s.a)(a),a.GetVecsMultiPolygon()),a.isUndo=r,a.lineWidth=8,a.IsMove=!0,a.outOfExtend=!1,a.fillColor=Object(Gt.c)("#ff0000",.2),a.minAreaToCompute=.001,a.vecsBound=[new Oe(0,0,0),new Oe(2e3,2e3,2e3)],a.InitComponent(),a.InitPolygonMultple(),a}return Object(r.a)(i,null,[{key:"UpdateVecByViewChanging",value:function(){}},{key:"FindAtPoint",value:function(e){for(var t=i.list.length-1;t>=0;--t)if(i.list[t].isSelectable&&i.list[t].IsMouseInside(e.x,e.y))return i.list[t]}},{key:"ComputeOver",value:function(e){var t=i.FindAtPoint(e);void 0!==t&&(t.isHover=!0)}},{key:"FromJSON",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var n=[],a=0;a<t.data.vertforPolygonMultiple.length;++a){for(var o=[],r=0;r<t.data.vertforPolygonMultiple[a].length;r+=2){var s=new Oe(0,0,0);s.long=t.data.vertforPolygonMultiple[a][r],s.lat=t.data.vertforPolygonMultiple[a][r+1],o.push(s)}n.push(o)}var c=new i(e,n);return e.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.isViewChanging=!0,e.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvasFeature.RenderForce(),c}},{key:"GetPolylineByIgeometry",value:function(e,t){for(var n=[],a=0;a<t.length;++a){for(var o=[],r=0;r<t[a].nodes.length;++r){var s=new Oe(0,0,0);s.long=t[a].nodes[r].long,s.lat=t[a].nodes[r].lat,o.push(s)}n.push(o)}var c=new i(e,n);return c.UpdateVecByViewChangingCompute(),c}},{key:"DoneByKeyboard",value:function(){}},{key:"Cancel",value:function(){}},{key:"GetLengthSelection",value:function(){for(var e=this.list.length,t=0;e--;)this.list[e].IsSelected&&(t+=1);return t}},{key:"MouseDown",value:function(e){}},{key:"MouseLeftClick",value:function(e,t){if(void 0===e.capture)return void 0!==i.construction&&i.isDone?(i.construction.isSelected=!1,i.construction=void 0,void(i.isDone=!1)):void i.construction}},{key:"MouseMove",value:function(e){}},{key:"MouseDoubleClick",value:function(e){}}]),Object(r.a)(i,[{key:"InitComponent",value:function(){this.renderer=new Rr(this),this.styleComponent=new Dr(this)}},{key:"InitPolygonMultple",value:function(){this.isFill=!0,this.isCurvedPolyline=!1,this.type=g.j.POLYGON_MULTIPLE,this.ComputeArea(),this.isUnderConstruction=!1,this.visibility=.1,this.scene.AddAPolygonMultple(this)}},{key:"UpdateVec",value:function(){for(var e=0;e<this.vecs.length;++e)if(this.vecs[e].length>3)for(var t=0;t<this.vecs[e].length;++t){var n=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromGeoPos(this.vecs[e][t].long,this.vecs[e][t].lat);this.vecs[e][t].x=n[0],this.vecs[e][t].y=n[1]}}},{key:"UpdatePan",value:function(){}},{key:"UpdateZoom",value:function(){}},{key:"GetLog",value:function(){if(this.isRemove||!this.isRenderable||this.isHidden)return"";var e="";return e+="GUID : "+this.id+"/TYPE : "+this.type.toString()+"/Screen : /pos : "+this.vecs.length+"/Area : "+this.GetArea().toFixed(3).toString()+" m2/IsSEL : "+this.isSelected+"/isSelable : "+this.isSelectable}},{key:"GetLogDOM",value:function(){return"Geometry ID : "+this.id+"<br>geometry Type : multi-polygon feature<br>position : <br>size : "+this.r+" pixel<br>"}},{key:"IsMouseInside",value:function(e,t){return!(this.isRemove||!this.isRenderable||this.isHidden)&&(this.CheckDistance(e,t)?(this.IsHover=!0,!0):(this.IsHover=!1,!1))}},{key:"CheckDistance",value:function(e,t){return!!this.scene.annotationInstance.geometryCommon.gcmdProcessing.IsMouseInsideByOffScreenFeature(e,t,this.hashColor)}},{key:"TranslateByMouseEventData",value:function(e){}},{key:"Translate",value:function(e,t){}},{key:"Remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.isRemove&&this.isRenderable&&!this.isHidden){if(this.isSelectable=!1,this.isRenderable=!1,e){var t=this.ToJSON();t&&this.scene.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack([t])}this.scene.RemoveAPolygonMultple(this),this.scene.RemoveGeometry(this),this.scene.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvasFeature.RenderForce()}}},{key:"Hide",value:function(){}},{key:"MouseDoubleClick",value:function(){this.ConvertPolygon()}},{key:"GetLength",value:function(){if(this.vecs.length<2)return 0;for(var e=0;e<this.vecs.length-1;++e);return Math.abs(0)}},{key:"FindClosestNode",value:function(e,t){for(var n=0;n<this.vecs.length;++n);}},{key:"ToJSON",value:function(){this.type=g.j.POLYGON_MULTIPLE;var e=new rt(this.id,this.type,this.isSelected,this.isHover,this.isHidden);return e.data.vertforPolygonMultiple=this.GetVecs(),e}},{key:"GetVecsFromDivision",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.GetLength()}},{key:"ConvertPolygon",value:function(){var e=this;return this.vecs.map((function(t){return Pn.GetPolygonbyVecs(e.scene,t)}))}},{key:"GetVecsFromNumber",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"ComputeVec",value:function(){this.ComputeCenterVec()}},{key:"ComputeMidPts",value:function(){for(var e=this.vecs.length;e--;);}},{key:"ComputeCenterVec",value:function(){this.vec=xe([])}},{key:"GetVecsMultiPolygon",value:function(){for(var e=[],t=0;t<this.vecsOrigin.length;++t){for(var n=[],i=0;i<this.vecsOrigin[t].length;++i)n.push(this.vecsOrigin[t][i].long,this.vecsOrigin[t][i].lat);e.push(n)}return e}},{key:"DeepCopy",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],this.ToJSON()}},{key:"OutExtent",value:function(){}},{key:"InExtent",value:function(){}},{key:"ComputeArea",value:function(){this.areas=[];for(var e=0;e<this.vecs.length;++e)this.areas.push(Math.abs(J(this.vecs[e])))}},{key:"MouseRightClick",value:function(){this.isFill=!this.isFill}},{key:"UpdateVecByViewChangingCompute",value:function(){for(var e=0;e<this.vecs.length;++e)if(this.vecs[e].length>3&&this.areas[e]>this.minAreaToCompute)for(var t=0;t<this.vecs[e].length;t+=1){var n=this.vecs[e][t];if(-1<n.x&&n.x<this.scene.annotationInstance.geometryCommon.gcmdProcessing.width&&-1<n.y&&n.y<this.scene.annotationInstance.geometryCommon.gcmdProcessing.height){var i=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromGeoPos(n.long,n.lat);n.x=i[0],n.y=i[1]}else n.x=0,n.y=0}}},{key:"UpdateVecByViewChangingComputeByProjected",value:function(){for(var e=this.vecs.length,t=0,n=0,i=0,a=0,o=0,r=0;r<e;++r)if(this.vecs[r].length>3&&this.areas[r]>this.minAreaToCompute)for(var s=0;s<this.vecs[r].length;s+=1){var c=this.vecs[r][s],l=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromProjectedPos(c.proX,c.proY);c.x=l[0],c.y=l[1],l[0]<0&&a++,l[0]>this.scene.annotationInstance.geometryCommon.gcmdProcessing.width&&o++,l[1]<0&&n++,l[1]>this.scene.annotationInstance.geometryCommon.gcmdProcessing.height&&i++,t++}return!(n+i+a+o>.8*t)}},{key:"RenderPost",value:function(e){this.renderer.RenderPost(e)}},{key:"RenderMask",value:function(e){this.renderer.RenderMask(e)}},{key:"CheckWrapping",value:function(){this.CheckWrappingForWrapping()}},{key:"CheckWrappingForWrapping",value:function(){if(this.needWrapping=!1,!this.scene.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvasMask.width&&void 0!==this.vecsBound){var e=Math.floor(this.vecsBound[0].x+30);(Math.floor(this.vecsBound[1].x-30)<0||this.scene.annotationInstance.geometryCommon.gcmdProcessing.width<e)&&(this.needWrapping=!0)}}},{key:"IsHidden",get:function(){return this.isHidden},set:function(e){this.isHiddenPre=this.isHidden,this.isHidden=e,this.scene.annotationInstance.io.eventListenerAnnotation.HideStack(this.ToJSON())}},{key:"IsSelectable",set:function(e){this.isSelectable=e},get:function(){return this.isSelectable}},{key:"V",get:function(){return this.vec}},{key:"v",set:function(e){this.vec=e}},{key:"IsSelected",get:function(){return this.isSelected},set:function(e){this.isRemove||!this.isRenderable||this.isHidden||(this.isSelected=e,this.scene.annotationInstance.io.eventListenerAnnotation.SelectionStack(this.ToJSON()))}},{key:"IsHover",get:function(){return this.isHover},set:function(e){this.isUnderConstruction||(this.isHover=e,this.isHover&&!this.isHoverPre?this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()):!this.isHover&&this.isHoverPre&&this.scene.annotationInstance.io.eventListenerAnnotation.HoverStack(this.ToJSON()),this.isHoverPre=this.isHover,this.isSelected)}}]),i}(wt);function Ar(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return Nr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nr(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function Nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Object(u.a)(Mr,"list",[]),Object(u.a)(Mr,"split",!1),Object(u.a)(Mr,"isDone",!1);var Lr=function(){function e(t){Object(o.a)(this,e),this.gcmd=t}return Object(r.a)(e,[{key:"RightClickOnHoverGeo",value:function(e){for(var t=this.gcmd.annotationInstance.scene.geometryList.length;t--;)if(this.gcmd.annotationInstance.scene.geometryList[t].IsHover)return this.gcmd.annotationInstance.scene.geometryList[t].MouseRightClick(e),!0;return!1}},{key:"UpdatePopup",value:function(){}},{key:"MoveSelectedGeoPreSmartVersionBetweenGeometryAndNodes",value:function(e){}},{key:"MoveSelectedGeo",value:function(e){for(var t=0;t<this.gcmd.annotationInstance.scene.geometryList.length;++t)if(this.gcmd.annotationInstance.scene.geometryList[t].isCaptured||this.gcmd.annotationInstance.scene.geometryList[t].IsSelected&&this.gcmd.annotationInstance.scene.geometryList[t].type!==g.j.CNODE&&this.gcmd.annotationInstance.scene.geometryList[t].type!==g.j.CNODE_CIRCLE){var n=this.gcmd.annotationInstance.scene.geometryList[t].FindClosestNode(e.x,e.y);void 0!==n&&null!==n?(n.TranslateByMouseEventData(e),this.gcmd.annotationInstance.scene.Capture=n):this.gcmd.annotationInstance.scene.geometryList[t].TranslateByMouseEventData(e)}}},{key:"MoveMidPoint",value:function(e){for(var t=this.gcmd.annotationInstance.scene.listAPoint.length;t--;)if(this.gcmd.annotationInstance.scene.listAPoint[t].isHover&&this.gcmd.annotationInstance.scene.listAPoint[t].type===g.j.CMIDPOINT){var n=this.gcmd.annotationInstance.scene.listAPoint[t],i=n.edges[0].SplitLineByPoint(new Oe(n.vec.x,n.vec.y,n.vec.z),!0);this.gcmd.annotationInstance.scene.Capture=i}}},{key:"RemoveAllGeo",value:function(){var e=It.list.length;if(0!==e){for(;e--;)It.list[e].Remove();var t=this.gcmd.annotationInstance.scene.geometryList.length;if(0!==t)for(;t--;)this.gcmd.annotationInstance.scene.geometryList[t].Remove()}}},{key:"ResetTranformation",value:function(){var e=this.gcmd.annotationInstance.scene.geometryList.length;if(0!==e)for(;e--;)this.gcmd.annotationInstance.scene.geometryList[e].IsTransform=!1}},{key:"CheckAttachedTextleaderline",value:function(e){return e.type===g.j.POLYGON_GRAPH?e.CheckAttachedTextleaderline():e.type===g.j.POLYLINE_BENDING?e.CheckAttachedTextleaderline():!(e.textLeaderline&&e.textLeaderline.leaderline&&Z(e.textLeaderline.leaderline.v2,e.vec)>5)||(e.textLeaderline.attachedShape=void 0,e.textLeaderline=void 0,!1)}},{key:"SelecteObjectsByVecs",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var t=this.gcmd.annotationInstance.scene.geometryList.length;t--;)this.gcmd.annotationInstance.scene.geometryList[t].type!==g.j.CBLACKHOLE&&this.gcmd.annotationInstance.scene.geometryList[t].type!==g.j.CNODE&&this.gcmd.annotationInstance.scene.geometryList[t].type!==g.j.ANODE&&this.gcmd.annotationInstance.scene.geometryList[t].type!==g.j.ANODE_CIRCLE&&this.gcmd.annotationInstance.scene.geometryList[t].type!==g.j.AMIDPOINT&&this.gcmd.annotationInstance.scene.geometryList[t].type!==g.j.ANODE_RECT&&this.gcmd.annotationInstance.scene.geometryList[t].type!==g.j.AN_GON&&this.gcmd.annotationInstance.scene.geometryList[t].type!==g.j.ANODE_TEXT&&this.gcmd.annotationInstance.scene.geometryList[t].IsSelectedByWindow(e)&&(this.gcmd.annotationInstance.scene.geometryList[t].IsSelected=!0)}},{key:"ProcessSelectionViewerMode",value:function(){var e=this.gcmd.annotationInstance.scene.geometryList.length;if(this.gcmd.annotationInstance.scene.capture)for(;e--;)this.gcmd.annotationInstance.scene.capture===this.gcmd.annotationInstance.scene.geometryList[e]?this.gcmd.annotationInstance.scene.geometryList[e].isSelected=!0:this.gcmd.annotationInstance.scene.geometryList[e].isSelected=!1;else for(;e--;)this.gcmd.annotationInstance.scene.geometryList[e].isSelected=!1}},{key:"PolygonGraphResetForSplit",value:function(){for(var e=this.gcmd.annotationInstance.scene.listAPolygonGraphWrapper.length;e--;)this.gcmd.annotationInstance.scene.listAPolygonGraphWrapper[e].PolygonGraphResetForSplit()}},{key:"CopySelGeo",value:function(){this.gcmd.annotationInstance.scene.copyPasteGeo=[];for(var e=this.gcmd.annotationInstance.scene.geometryList.length;e--;)(this.gcmd.annotationInstance.scene.geometryList[e].IsSelected||this.gcmd.annotationInstance.scene.geometryList[e].isHover)&&this.gcmd.annotationInstance.scene.copyPasteGeo.push(this.gcmd.annotationInstance.scene.geometryList[e]);this.gcmd.annotationInstance.activeCommandController.SetActiveCommand(g.b.NONE)}},{key:"ToMapConvertGeoDis",value:function(e,t,n){var i=this.gcmd.gcmdSupporting.ToMap(e,t),a=this.gcmd.gcmdSupporting.ToMap(e+1,t),o=n/function(e,t,n,i){var a=new Oe(0,0);a.long=e,a.lat=t;var o=new Oe(0,0);return o.long=n,o.lat=i,ne(a,o)}(i[0],i[1],a[0],a[1]),r=this.gcmd.gcmdSupporting.ToMap(e+o,t);return this.gcmd.gcmdSupporting.ToScreenFromGeoPos(r[0],r[1])[0]-e}},{key:"SetCaptureHovered",value:function(e){e!==this.gcmd.annotationInstance.scene.captureHovered&&(this.gcmd.annotationInstance.scene.captureHovered=e)}},{key:"GetHashColor",value:function(e){for(;;){var t=Object(Gt.b)();if(!this.gcmd.annotationInstance.scene.listHashColor[t])return this.gcmd.annotationInstance.scene.listHashColor[t]=e,t}}},{key:"GetShapeByHashCol",value:function(e){return this.gcmd.annotationInstance.scene.listHashColor[e]}},{key:"IsMouseInsideByOffScreen",value:function(e,t,n){var i=this.PickColorOffscreen(e,t);return!(!this.GetShapeByHashCol(i)||i!==n)}},{key:"GetclosestNodeForSnapping",value:function(e,t,n){for(var i=new Oe(e,t),a=this.gcmd.annotationInstance.scene.listBasePoint.length,o=-1;a--;)if(!this.gcmd.annotationInstance.scene.listBasePoint[a].isCollapse){if(this.gcmd.annotationInstance.scene.listBasePoint[a].type===g.j.AMIDPOINT){var r=this.gcmd.annotationInstance.scene.listBasePoint[a];if(r.aEdges[0]&&r.aEdges[0].pGraph.type===g.j.POLYLINE_BENDING)continue}var s=Z(this.gcmd.annotationInstance.scene.listBasePoint[a].vec,i);s<n&&(n=s,o=a)}if(o>-1)return this.gcmd.annotationInstance.scene.listBasePoint[o];for(a=this.gcmd.annotationInstance.scene.listAPolygonGraphWrapper.length;a--;){var c=this.gcmd.annotationInstance.scene.listAPolygonGraphWrapper[a].GetclosestNode(i,n);if(c)return c}}},{key:"PickColorOffscreen",value:function(e,t){var n=this.gcmd.annotationInstance.renderer.ctxOffscreen.getImageData(e,t,1,1).data;return"rgb(".concat(n[0],",").concat(n[1],",").concat(n[2],")")}},{key:"IsMouseInsideByOffScreenFeature",value:function(e,t,n){var i=this.gcmd.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvasFeature.offScreen.GetColorByPos(e,t);return!(!this.GetShapeByHashCol(i)||i!==n)}},{key:"GetSelGeo",value:function(){for(var e=[],t=this.gcmd.annotationInstance.scene.geometryList.length;t--;)this.gcmd.annotationInstance.scene.geometryList[t].IsSelected&&e.push(this.gcmd.annotationInstance.scene.geometryList[t]);return e}},{key:"DeSelecteCaptureObjects",value:function(){for(var e=this.gcmd.annotationInstance.scene.geometryList.length;e--;)this.gcmd.annotationInstance.scene.geometryList[e].isCaptured||(this.gcmd.annotationInstance.scene.geometryList[e].type===g.j.TEXT?this.gcmd.annotationInstance.scene.geometryList[e].IsEditiable=!1:this.gcmd.annotationInstance.scene.geometryList[e].IsSelected&&(this.gcmd.annotationInstance.scene.geometryList[e].IsSelected=!1,this.gcmd.annotationInstance.scene.geometryList[e].IsHover=!1));this.gcmd.annotationInstance.scene.Capture=void 0}},{key:"DeSelecteAllObjects",value:function(){for(var e=this.gcmd.annotationInstance.scene.geometryList.length;e--;)this.gcmd.annotationInstance.scene.geometryList[e].IsCaptured=!1,this.gcmd.annotationInstance.scene.geometryList[e].IsSelected=!1,this.gcmd.annotationInstance.scene.geometryList[e].IsHover=!1;this.gcmd.annotationInstance.scene.Capture=void 0}},{key:"SelecteAllObjects",value:function(){for(var e=this.gcmd.annotationInstance.scene.geometryList.length;e--;)this.gcmd.annotationInstance.scene.geometryList[e].type!==g.j.APOINT&&this.gcmd.annotationInstance.scene.geometryList[e].type!==g.j.AMIDPOINT&&this.gcmd.annotationInstance.scene.geometryList[e].type!==g.j.ANODE&&this.gcmd.annotationInstance.scene.geometryList[e].type!==g.j.ANODE_CIRCLE&&this.gcmd.annotationInstance.scene.geometryList[e].type!==g.j.ANODE_NGON&&this.gcmd.annotationInstance.scene.geometryList[e].type!==g.j.ANODE_RECT&&this.gcmd.annotationInstance.scene.geometryList[e].type!==g.j.ANODE_TEXT&&this.gcmd.annotationInstance.scene.geometryList[e].type!==g.j.CBLACKHOLE&&this.gcmd.annotationInstance.scene.geometryList[e].type!==g.j.CNODE&&this.gcmd.annotationInstance.scene.geometryList[e].type!==g.j.CNODE_RECT&&(this.gcmd.annotationInstance.scene.geometryList[e].IsSelected||(this.gcmd.annotationInstance.scene.geometryList[e].IsSelected=!0))}},{key:"GetGeoById",value:function(e){for(var t=this.gcmd.annotationInstance.scene.geometryList.length;t--;)if(this.gcmd.annotationInstance.scene.geometryList[t].id===e)return this.gcmd.annotationInstance.scene.geometryList[t]}},{key:"DuplicateByDragging",value:function(){if(this.gcmd.annotationInstance.scene.Capture){var e=this.gcmd.annotationInstance.scene.Capture.DeepCopy(this.gcmd.annotationInstance.scene.Capture.vec.x,this.gcmd.annotationInstance.scene.Capture.vec.y);this.gcmd.annotationInstance.scene.Capture.IsHover=!1,this.gcmd.annotationInstance.scene.Capture.IsSelected=!1,e&&(e.IsHover=!0,this.gcmd.annotationInstance.scene.Capture=e)}var t=this.HasMultiSel();if(void 0!==t){var n,i=Ar(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.IsSelected=!1,a.IsHover=!1;var o=a.DeepCopy(a.vec.x,a.vec.y);o&&(o.IsSelected=!0,o.IsHover=!0)}}catch(r){i.e(r)}finally{i.f()}}}},{key:"ProcessingUpdate",value:function(e,t){var n=this.GetGeoById(e);n&&n.type===g.j.TEXT_LEADERLINE&&n.ProcessingUpdate(t)}},{key:"RemoveByIDs",value:function(e){var t=this,n=[];JSON.parse(e).forEach((function(e){var i=t.GetGeoById(e);if(i){var a=i.ToJSON();a&&(n.push(a),i.Remove(!1))}})),this.gcmd.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack(n),this.gcmd.gcmdSupporting.RenderForce()}},{key:"ReUndoProcessing",value:function(e){var t=this;this.RemoveAll(),e.forEach((function(e){t.GetGeoByIOGeometry(e,!0)})),this.UpdateConnectionTextleaderlines(),this.gcmd.annotationInstance.activeCommandController.acProperties.needExecuteOptimizer=!0,this.gcmd.gcmdSupporting.RenderForce()}},{key:"ReUndoProcessingStorymaps",value:function(e){for(var t=this,n=this.gcmd.annotationInstance.scene.listATextleaderlineWrapper.length;n--;)this.gcmd.annotationInstance.scene.listATextleaderlineWrapper[n]&&this.gcmd.annotationInstance.scene.listATextleaderlineWrapper[n].RemoveDiv();this.RemoveAllDiv(),this.ResetGeometryList(),this.RemovePolygonFeatures(),e.forEach((function(e){t.GetGeoByIOGeometry(e,!0)})),this.UpdateConnectionTextleaderlines(),this.gcmd.annotationInstance.activeCommandController.acProperties.needExecuteOptimizer=!0,this.gcmd.gcmdSupporting.RenderForce()}},{key:"Hide",value:function(e){for(var t=e.length;t--;)for(var n=0;n<this.gcmd.annotationInstance.scene.geometryList.length;++n)this.gcmd.annotationInstance.scene.geometryList[n].id===e[t]&&(this.gcmd.annotationInstance.scene.geometryList[n].isRenderable=!1,this.gcmd.annotationInstance.scene.geometryList[n].IsHidden=!0,this.gcmd.annotationInstance.scene.geometryList[n].Visibility=0)}},{key:"Unhide",value:function(e){for(var t=e.length;t--;)for(var n=0;n<this.gcmd.annotationInstance.scene.geometryList.length;++n)this.gcmd.annotationInstance.scene.geometryList[n].id===e[t]&&(this.gcmd.annotationInstance.scene.geometryList[n].isRenderable=!0,this.gcmd.annotationInstance.scene.geometryList[n].IsHidden=!1,this.gcmd.annotationInstance.scene.geometryList[n].Visibility=1)}},{key:"SetupPolylineConstraintLength",value:function(e){if(this.gcmd.annotationInstance.scene.capture&&this.gcmd.annotationInstance.scene.capture.type===g.j.POLYLINE){var t=50*(e+1);this.gcmd.annotationInstance.scene.capture.constraintTargetDistance=t}}},{key:"SetupPolylineConstraintLengthPercentage",value:function(e){this.gcmd.annotationInstance.scene.capture&&this.gcmd.annotationInstance.scene.capture.type===g.j.POLYLINE&&(this.gcmd.annotationInstance.scene.capture.constraintTargetDistancePercentage=e)}},{key:"DisableExcept",value:function(e){for(var t=[],n=0;n<e.length;++n)t.push(this.GetGeoById(e[n]));for(var i=0;i<t.length;++i)for(var a=0;a<this.gcmd.annotationInstance.scene.geometryList.length;++a)this.gcmd.annotationInstance.scene.geometryList[a]===t[i]?this.gcmd.annotationInstance.scene.geometryList[a].disable=!1:this.gcmd.annotationInstance.scene.geometryList[a].disable=!0}},{key:"Highlight",value:function(e){this.gcmd.annotationInstance.renderer.needFocus=!0;for(var t=0;t<this.gcmd.annotationInstance.scene.geometryList.length;++t)this.gcmd.annotationInstance.scene.geometryList[t].id===e?(this.gcmd.annotationInstance.scene.geometryList[t].IsSelected=!0,this.gcmd.annotationInstance.scene.geometryList[t].IsHover=!0):(this.gcmd.annotationInstance.scene.geometryList[t].IsSelected=!1,this.gcmd.annotationInstance.scene.geometryList[t].IsHover=!1)}},{key:"AutoSnappingTracker",value:function(e){this.gcmd.annotationInstance.renderer.objectSnapping.AutoSnappingTracker(e)}},{key:"AutoSnapping",value:function(e){return!!this.gcmd.annotationInstance.renderer.objectSnapping.AutoSnapping(e)}},{key:"GetPosBySnapping",value:function(e,t,n){for(var i=15,a=new Oe(e,t),o=new Oe(e,t),r=this.gcmd.annotationInstance.scene.geometryList.length;r--;){var s=this.gcmd.annotationInstance.scene.geometryList[r].NeedSnapping(o);s[0]&&s[1]&&s[0]>0&&s[0]<i&&(i=s[0],a=s[1])}return i<n&&(e=a.x,t=a.y),[e,t]}},{key:"RepopulateGeometries",value:function(e){for(var t in this.RemoveAll(),e)if(e[t]){var n=e[t];this.GetGeoByIOGeometry(n,!1,!0)}this.UpdateConnectionTextleaderlines(),this.gcmd.gcmdSupporting.RenderForce()}},{key:"RemoveAll",value:function(){for(var e=this.gcmd.annotationInstance.scene.geometryList.length;e--;)this.gcmd.annotationInstance.scene.geometryList[e]&&this.gcmd.annotationInstance.scene.geometryList[e].Remove();this.RemoveAllDiv(),this.ResetGeometryList(),this.RemovePolygonFeatures(),this.gcmd.gcmdSupporting.RenderForce()}},{key:"RemoveAllDiv",value:function(){for(var e=0;e<this.gcmd.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.childElementCount;++e)this.gcmd.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.lastChild&&this.gcmd.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.lastChild instanceof HTMLDivElement&&this.gcmd.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.lastChild.remove()}},{key:"RemoveAllPopup",value:function(){for(var e=0;e<this.gcmd.annotationInstance.scene.geometryList.length;++e)this.gcmd.annotationInstance.scene.geometryList[e].hasPopup&&this.gcmd.annotationInstance.scene.geometryList[e].HidePopUpSummary()}},{key:"UpdateConnectionTextleaderlines",value:function(){for(var e=this.gcmd.annotationInstance.scene.listATextleaderlineWrapper.length;e--;)void 0!==this.gcmd.annotationInstance.scene.listATextleaderlineWrapper[e].leaderline&&this.gcmd.annotationInstance.scene.listATextleaderlineWrapper[e].SnapForPointForUndo()}},{key:"ResetGeometryList",value:function(){this.gcmd.annotationInstance.scene.geometryList=[],this.gcmd.annotationInstance.scene.listATextleaderlineWrapper=[],this.gcmd.annotationInstance.scene.listBasePoint=[],this.gcmd.annotationInstance.scene.listAArrow=[],this.gcmd.annotationInstance.scene.listIPoint=[],this.gcmd.annotationInstance.scene.listRPoint=[],this.gcmd.annotationInstance.scene.listNPoint=[],this.gcmd.annotationInstance.scene.listAPoint=[],this.gcmd.annotationInstance.scene.listALine=[],this.gcmd.annotationInstance.scene.listACircle=[],this.gcmd.annotationInstance.scene.listARectangle=[],this.gcmd.annotationInstance.scene.listAPolylineWrapper=[],this.gcmd.annotationInstance.scene.listAPolygonGraphWrapper=[],this.gcmd.annotationInstance.scene.listAPolygonWrapper=[],this.gcmd.annotationInstance.scene.listAPolygonMultple=[],this.gcmd.annotationInstance.scene.listAPolylineGraphWrapper=[],this.gcmd.annotationInstance.scene.listACurve=[],this.gcmd.annotationInstance.scene.listGuidedTourNPoint=[]}},{key:"RemovePolygonFeatures",value:function(){this.gcmd.annotationInstance.scene.listAPolygonMultple=[],this.gcmd.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvasFeature.Clear(),this.gcmd.gcmdSupporting.RenderForce()}},{key:"RemoveCapturedTextLeaderline",value:function(){for(var e=this.gcmd.annotationInstance.scene.listATextleaderlineWrapper.length;e--;)this.gcmd.annotationInstance.scene.listATextleaderlineWrapper[e].IsSelected&&this.gcmd.annotationInstance.scene.listATextleaderlineWrapper[e].Remove();this.gcmd.gcmdSupporting.RenderForce()}},{key:"GetGeoByIOGeometry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.type===g.j.POINT_REGULAR?Ri.FromJSON(this.gcmd.annotationInstance.scene,e,t,n):e.type===g.j.POINT_NUMBERED?_i.FromJSON(this.gcmd.annotationInstance.scene,e,t,n):e.type===g.j.POINT_NUMBERED_TOUR?Or.FromJSON(this.gcmd.annotationInstance.scene,e,t,n):e.type===g.j.CIRCLE?rn.FromJSON(this.gcmd.annotationInstance.scene,e,t,n):e.type===g.j.RECTANGLE?mn.FromJSON(this.gcmd.annotationInstance.scene,e,t,n):e.type===g.j.POLYLINE?Cn.FromJSON(this.gcmd.annotationInstance.scene,e,t,n):e.type===g.j.POLYLINE_BENDING?Un.FromJSON(this.gcmd.annotationInstance.scene,e,t,n):e.type===g.j.POLYGON?Pn.FromJSON(this.gcmd.annotationInstance.scene,e,t,n):e.type===g.j.POLYGON_GRAPH?Ia.FromJSON(this.gcmd.annotationInstance.scene,e,t,n):e.type===g.j.POLYGON_MULTIPLE?Mr.FromJSON(this.gcmd.annotationInstance.scene,e,t,n):e.type===g.j.POINT_ICON?Hi.FromJSON(this.gcmd.annotationInstance.scene,e,t,n):e.type===g.j.ARROW_SINGLE?da.FromJSON(this.gcmd.annotationInstance.scene,e,t,n,!0):e.type===g.j.ARROW_DOUBLE?da.FromJSON(this.gcmd.annotationInstance.scene,e,t,n,!1):e.type===g.j.CURVE_OPEN?$i.FromJSON(this.gcmd.annotationInstance.scene,e,t,n):e.type===g.j.CURVE_CLOSE?$i.FromJSON(this.gcmd.annotationInstance.scene,e,t,n,!0):e.type===g.j.TEXT_LEADERLINE?e.data.version&&2===e.data.version?go.FromJSON(this.gcmd.annotationInstance.scene,e,t,n):go.FromJSONAdapter(this.gcmd.annotationInstance.scene,e,t,n):e.type===g.j.ALINE&&At.FromJSON(this.gcmd.annotationInstance.scene,e,t,n)}},{key:"HasMultiSel",value:function(){for(var e=this.gcmd.annotationInstance.scene.geometryList.length,t=[];e--;)this.gcmd.annotationInstance.scene.geometryList[e].isUnderConstruction||this.gcmd.annotationInstance.scene.geometryList[e].isSelected&&t.push(this.gcmd.annotationInstance.scene.geometryList[e]);if(t)return this.gcmd.annotationInstance.scene.captureMultiple=t,t;this.gcmd.annotationInstance.scene.captureMultiple=void 0}},{key:"UpdateStyleCustom",value:function(e){for(var t=[],n=0;n<e.length;++n)for(var i=0;i<this.gcmd.annotationInstance.scene.geometryList.length;++i){var a=this.gcmd.annotationInstance.scene.geometryList[i];a.id===e[n].id&&(a.UpdateStyleCustom(e[n].style),t.push(a.ToJSON()))}t.length>0&&this.gcmd.annotationInstance.io.eventListenerAnnotation.TransformStack(t),this.gcmd.gcmdSupporting.RenderForce()}},{key:"FindAtPointFromAPoint",value:function(e){for(var t=this.gcmd.annotationInstance.scene.listBasePoint.length-1;t>=0;--t)if(this.gcmd.annotationInstance.scene.listBasePoint[t].isSelectable&&this.gcmd.annotationInstance.scene.listBasePoint[t].IsMouseInside(e.x,e.y))return this.gcmd.annotationInstance.scene.listBasePoint[t]}},{key:"FindAtPointFromPolygonGraph",value:function(e){for(var t=this.gcmd.annotationInstance.scene.listAPolygonGraphWrapper.length-1;t>=0;--t)if(this.gcmd.annotationInstance.scene.listAPolygonGraphWrapper[t].isSelectable){if(void 0!==this.gcmd.annotationInstance.scene.listAPolygonGraphWrapper[t].GetVecForSnapping())return this.gcmd.annotationInstance.scene.listAPolygonGraphWrapper[t];this.gcmd.annotationInstance.scene.listAPolygonGraphWrapper[t].graphCore.selVec=void 0,this.gcmd.annotationInstance.scene.listAPolygonGraphWrapper[t].graphCore.selectedVec=void 0,this.gcmd.annotationInstance.scene.listAPolygonGraphWrapper[t].graphCore.selVecForTextLeaderline=void 0}}},{key:"FindAtPoint",value:function(e){for(var t=[],n=this.gcmd.annotationInstance.scene.geometryList.length-1;n>=0;--n)if(this.gcmd.annotationInstance.scene.geometryList[n].type===g.j.POINT_REGULAR){if(this.gcmd.annotationInstance.scene.geometryList[n].isSelectable&&this.gcmd.annotationInstance.scene.geometryList[n].isHover||this.gcmd.annotationInstance.scene.geometryList[n].IsMouseInside(e.x,e.y)){if(this.gcmd.annotationInstance.scene.geometryList[n].type!==g.j.POLYGON&&this.gcmd.annotationInstance.scene.geometryList[n].type!==g.j.POLYGON_GRAPH&&this.gcmd.annotationInstance.scene.geometryList[n].type!==g.j.CIRCLE&&this.gcmd.annotationInstance.scene.geometryList[n].type!==g.j.CCURVE_CLOSED&&this.gcmd.annotationInstance.scene.geometryList[n].type!==g.j.CRECTANGLE&&this.gcmd.annotationInstance.scene.geometryList[n].type!==g.j.CN_GON&&this.gcmd.annotationInstance.scene.geometryList[n].type!==g.j.CN_STAR&&this.gcmd.annotationInstance.scene.geometryList[n].type!==g.j.POLYGON_MULTIPLE)return this.gcmd.annotationInstance.scene.geometryList[n];t.push(this.gcmd.annotationInstance.scene.geometryList[n])}}else if(this.gcmd.annotationInstance.scene.geometryList[n].isSelectable&&this.gcmd.annotationInstance.scene.geometryList[n].IsMouseInside(e.x,e.y)){if(this.gcmd.annotationInstance.scene.geometryList[n].type!==g.j.POLYGON&&this.gcmd.annotationInstance.scene.geometryList[n].type!==g.j.POLYGON_GRAPH&&this.gcmd.annotationInstance.scene.geometryList[n].type!==g.j.CIRCLE&&this.gcmd.annotationInstance.scene.geometryList[n].type!==g.j.CCURVE_CLOSED&&this.gcmd.annotationInstance.scene.geometryList[n].type!==g.j.CRECTANGLE&&this.gcmd.annotationInstance.scene.geometryList[n].type!==g.j.CN_GON&&this.gcmd.annotationInstance.scene.geometryList[n].type!==g.j.CN_STAR&&this.gcmd.annotationInstance.scene.geometryList[n].type!==g.j.POLYGON_MULTIPLE)return this.gcmd.annotationInstance.scene.geometryList[n];t.push(this.gcmd.annotationInstance.scene.geometryList[n])}var i=!1;if(t.length>1)for(var a=0;a<t.length;++a)t[a].type!==g.j.CIRCLE&&t[a].type!==g.j.RECTANGLE&&t[a].type!==g.j.POLYLINE&&t[a].type!==g.j.POLYGON&&t[a].type!==g.j.POLYGON_GRAPH&&t[a].type!==g.j.CN_GON&&t[a].type!==g.j.CN_STAR||(i=!0);var o=[];if(i){for(var r=0;r<t.length;++r)o.push(Math.abs(t[r].GetArea()));return t[function(e){for(var t=1,n=0;t<e.length;)e[t]>e[n]||(n=t),t+=1;return n}(o)]}for(var s=0;s<t.length;++s)if(t[s].isSelectable&&t[s].IsMouseInside(e.x,e.y))return t[s]}},{key:"HasSelectedOvered",value:function(){for(var e=this.gcmd.annotationInstance.scene.geometryList.length;e--;)if(this.gcmd.annotationInstance.scene.geometryList[e].IsSelected||this.gcmd.annotationInstance.scene.geometryList[e].isHover)return!0;return!1}},{key:"DoneDragging",value:function(){for(var e=this.gcmd.annotationInstance.scene.geometryList.length;e--;)!0===this.gcmd.annotationInstance.scene.geometryList[e].isDrag&&(this.gcmd.annotationInstance.scene.geometryList[e].isDrag=!1)}},{key:"RemoveAllCapturedGeo",value:function(){for(var e=this.gcmd.annotationInstance.scene.listBasePoint.length;e--;)this.gcmd.annotationInstance.scene.listBasePoint[e]&&!0===this.gcmd.annotationInstance.scene.listBasePoint[e].IsSelected&&this.gcmd.annotationInstance.scene.listBasePoint[e].Remove();var t=this.gcmd.annotationInstance.scene.geometryList.length;if(0!==t){for(;t--;)void 0!==this.gcmd.annotationInstance.scene.geometryList[t]&&null!==this.gcmd.annotationInstance.scene.geometryList[t]&&!0===this.gcmd.annotationInstance.scene.geometryList[t].IsSelected&&(this.gcmd.annotationInstance.scene.geometryList[t].type,g.j.CLINE,this.gcmd.annotationInstance.scene.geometryList[t].Remove());var n,i=Ar(this.gcmd.annotationInstance.scene.geometryList);try{for(i.s();!(n=i.n()).done;){var a=n.value;!0===a.IsSelected&&(a.IsSelected=!1)}}catch(o){i.e(o)}finally{i.f()}this.gcmd.gcmdSupporting.RenderForce()}}},{key:"ReorderNumberedPoints",value:function(e){for(var t=0;t<this.gcmd.annotationInstance.scene.listNPoint.length;++t)this.gcmd.annotationInstance.scene.listNPoint[t].numberIndexNeeded=!0;for(var n=[],i=1;e.length;){var a=e[0];e.shift();for(var o=0;o<this.gcmd.annotationInstance.scene.listNPoint.length;++o)this.gcmd.annotationInstance.scene.listNPoint[o].numberIndexNeeded&&this.gcmd.annotationInstance.scene.listNPoint[o].id===a&&(this.gcmd.annotationInstance.scene.listNPoint[o].numberIndexNeeded=!1,this.gcmd.annotationInstance.scene.listNPoint[o].numberIndex=i++,n.push(this.gcmd.annotationInstance.scene.listNPoint[o]))}this.gcmd.annotationInstance.scene.listNPoint=n}},{key:"ReorderNumberedTourPoints",value:function(e){this.gcmd.annotationInstance.scene.listGuidedTourNPoint=this.gcmd.annotationInstance.scene.listGuidedTourNPoint.map((function(t){return t.numberIndex=e.indexOf(t.id),t})).sort((function(e,t){return e.numberIndex-t.numberIndex}))}},{key:"RemoveAllCapturedGeoGroup",value:function(){if(this.gcmd.annotationInstance.scene.capture){if(this.gcmd.annotationInstance.scene.capture.type&&this.gcmd.annotationInstance.scene.capture.type===g.j.POLYGON_GRAPH)if(this.gcmd.annotationInstance.scene.capture.graphCore.selVec)return void this.gcmd.annotationInstance.scene.capture.Remove(!1);if(this.gcmd.annotationInstance.scene.capture.type&&this.gcmd.annotationInstance.scene.capture.type===g.j.ANODE)return void this.gcmd.annotationInstance.scene.capture.Remove()}var e=this.HasMultiSel();if(this.gcmd.annotationInstance.scene.capture&&this.gcmd.annotationInstance.scene.capture.type===g.j.TEXT_LEADERLINE){var t=this.gcmd.annotationInstance.scene.capture;if(t.isSelectedReaderlineByClick&&t.leaderline)return void(t.IsSelectedReaderline&&t.RemoveLeaderline())}var n=[];e&&e.forEach((function(e){if(e.type===g.j.POLYGON_GRAPH){var t=e;if(t.graphCore.selVec)t.Remove(!1);else{var i=e.ToJSON();i&&(n.push(i),e.Remove(!1))}}else{var a=e.ToJSON();a&&(n.push(a),e.Remove(!1))}})),this.gcmd.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack(n),this.gcmd.gcmdSupporting.RenderForce()}},{key:"TransformStack",value:function(){if(this.gcmd.annotationInstance.implementations.app.model.appCoreWrapper.appAccessibility.mode===g.k.DRAWING&&!this.gcmd.annotationInstance.activeCommandController.acProperties.isPanning){for(var e=[],t=[],n=this.gcmd.annotationInstance.scene.geometryList.length;n--;){var i=this.gcmd.annotationInstance.scene.geometryList[n];if(i.IsSelected||i.isCaptured||i.IsTransform){if(i.isUnderConstruction)continue;if(i.IsTransform)if(i.type===g.j.TEXT_LEADERLINE){if(i.attachedShape){var a=i.ToJSON();a&&(t.push(a),i.IsTransform=!1)}else{var o=i.ToJSON();o&&(e.push(o),t.push(o),i.IsTransform=!1)}}else{var r=i.ToJSON();r&&(e.push(r),t.push(r)),i.IsTransform=!1}if(i.UpdateVecsHistory(),i.type===g.j.ALINE){var s=i.ToJSON();s&&e.push(s)}}}if(this.gcmd.annotationInstance.renderer.blackhole.isActive)if(Z(this.gcmd.annotationInstance.renderer.blackhole.v,new Oe(this.gcmd.annotationInstance.activeCommandController.m.x,this.gcmd.annotationInstance.activeCommandController.m.y,0))<this.gcmd.annotationInstance.renderer.blackhole.radius)return void this.gcmd.annotationInstance.renderer.blackhole.RemoveSelectedShapesByBlackhole(e);for(t.length>0&&this.gcmd.annotationInstance.io.eventListenerAnnotation.TransformStack(t),n=this.gcmd.annotationInstance.scene.geometryList.length;n--;)this.gcmd.annotationInstance.scene.geometryList[n].IsTransform=!1}}},{key:"width",get:function(){return this.gcmd.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView?this.gcmd.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.width:+this.gcmd.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.divHost.style.width.split("px")[0]}},{key:"height",get:function(){return this.gcmd.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView?this.gcmd.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.height:+this.gcmd.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.divHost.style.height.split("px")[0]}}]),e}();Object(u.a)(Lr,"capture",void 0),Object(u.a)(Lr,"captureMultiple",void 0),Object(u.a)(Lr,"captureHovered",void 0),Object(u.a)(Lr,"captureForEasing",void 0),Object(u.a)(Lr,"list",[]),Object(u.a)(Lr,"copyPasteGeo",[]),Object(u.a)(Lr,"listHashColor",{});var Gr=function(){function e(t){Object(o.a)(this,e),this.gcmd=t}return Object(r.a)(e,[{key:"ComputeBoundaryFromGeos",value:function(e){for(var t=[],n=0;n<e.length;++n)for(var i=e[n].GetBoundary(),a=0;a<i.length;++a)t.push(i[a]);return fe(t)}},{key:"PasteSelGeoInPlace",value:function(e,t){var n=this.gcmd.annotationInstance.scene.copyPasteGeo.length;if(0!==n)if(1!==n){for(;n--;)if(this.gcmd.annotationInstance.scene.copyPasteGeo[n]){var i=this.gcmd.annotationInstance.scene.copyPasteGeo[n];i.isSelected=!1;var a=this.gcmd.annotationInstance.scene.copyPasteGeo[n].DeepCopy(i.V.x+e,i.V.y+t);if(a){var o=a;o.IsSelected=!0,o.IsHover=!0}}this.gcmd.annotationInstance.activeCommandController.SetActiveCommand(g.b.NONE)}else this.gcmd.annotationInstance.scene.copyPasteGeo[0].DeepCopy(this.gcmd.annotationInstance.scene.copyPasteGeo[0].vec.x+e,this.gcmd.annotationInstance.scene.copyPasteGeo[0].vec.y+t)}},{key:"PasteSelGeo",value:function(e,t){var n=this.gcmd.annotationInstance.scene.copyPasteGeo.length;if(0!==n)if(1!==n){for(var i=F();n--;)i.Add(this.gcmd.annotationInstance.scene.copyPasteGeo[n].V);for(n=this.gcmd.annotationInstance.scene.copyPasteGeo.length,i.x=e-i.x/n,i.y=t-i.y/n;n--;)if(this.gcmd.annotationInstance.scene.copyPasteGeo[n]){var a=this.gcmd.annotationInstance.scene.copyPasteGeo[n];a.isSelected=!1;var o=this.gcmd.annotationInstance.scene.copyPasteGeo[n].DeepCopy(a.V.x+i.x,a.V.y+i.y);if(o)o.IsSelected=!0}this.gcmd.gcmdProcessing.DeSelecteCaptureObjects()}else this.gcmd.annotationInstance.scene.copyPasteGeo[0].DeepCopy(e,t)}}]),e}(),_r=function e(t){Object(o.a)(this,e),this.annotationInstance=t,this.gcmdSupporting=new Ir(this),this.gcmdProcessing=new Lr(this),this.gcmdAProcessing=new Gr(this)},Br=function(){function e(){Object(o.a)(this,e),Object(u.a)(this,"t",0)}return Object(r.a)(e,[{key:"Scale",value:function(e){return.2*(Math.sin(this.t)+5)*e}},{key:"EaseInElastic",value:function(e){return(.04-.04/e)*Math.sin(25*e)+1}},{key:"easeOutElastic2",value:function(e){return Math.pow(2,-10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)+1}}]),e}(),Wr=function(){function e(t){Object(o.a)(this,e),this.shape=t}return Object(r.a)(e,[{key:"PointRegularOverBoundingBySVGPath",value:function(e,t,n,i,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,r=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=(arguments.length>8&&arguments[8],arguments.length>9&&arguments[9],arguments.length>10&&arguments[10],this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.pointBoundOffset);if(this.shape.draw.renderer.hasAni||(r=!1),r?c*=o:c-=c*o,s){e.lineWidth=.5+o*t.lineWidth*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.elasticScale;var l=n-.5*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.width+6,p=i-this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.height+0;if(this.shape.draw.renderer.annotationInstance.implementations.app.model.appCoreWrapper.browserUtility.type===g.d.EDGE)return void this.PointRegularOverBoundingBySVGPathEdgeSupport(e,t,l,p);var u=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.width,d=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.height,h=.25*u;e.save(),e.translate(l+1.25*(h-h*a),p+(d-d*a)),e.scale(a,a),e.strokeStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.outlineHoverColorRGBAString,this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG&&e.stroke(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG.path2d),e.restore()}}},{key:"PointRegularOverBoundingBySVGPathSelected",value:function(e,t,n,i,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,r=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=(arguments.length>8&&arguments[8],arguments.length>9&&arguments[9],arguments.length>10&&arguments[10],this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.pointBoundOffset);if(this.shape.draw.renderer.hasAni||(r=!1),r?c*=o:c-=c*o,s){e.lineWidth=.5+o*t.lineWidth*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.elasticScale;var l=n-.5*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.width+6,p=i-this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.height+0;if(this.shape.draw.renderer.annotationInstance.implementations.app.model.appCoreWrapper.browserUtility.type===g.d.EDGE)return void this.PointRegularOverBoundingBySVGPathEdgeSupport(e,t,l,p);e.save(),e.translate(l-1.5,p-1.75),e.scale(1.2,1.125),e.strokeStyle=t.colorInterpolatedString,this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG&&e.stroke(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG.path2d),e.restore(),e.save(),e.translate(l,p),e.strokeStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.outlineHoverColorRGBAString,this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG&&e.stroke(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG.path2d),e.restore()}}},{key:"PointRegularDragBySVGPath",value:function(e,t,n,i,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,r=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=(arguments.length>8&&arguments[8],arguments.length>9&&arguments[9],arguments.length>10&&arguments[10],arguments.length>11?arguments[11]:void 0),l=arguments.length>12?arguments[12]:void 0,p=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.pointBoundOffset;if(this.shape.draw.renderer.hasAni||(r=!1,o=1),r?p*=o:p-=p*o,i-=1.8*p,s){var u=2.5*p;u<0&&(u=0)}this.shape.draw.renderer.annotationInstance.implementations.app.model.appCoreWrapper.browserUtility.type!==g.d.EDGE?this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG&&this.PointRagularSVGRender(e,t,n-.5*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.width+6,i-this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.height+0,a,c,l):this.PointRagularSVGRenderEdgeSupport(e,t,n-.5*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.width+6,i-this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.height+0,c,l)}},{key:"PointRagularSVGRender",value:function(e,t,n,i,a,o,r){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.width,l=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.height;this.shape.draw.renderer.needFocus,e.fillStyle=t.colorInterpolatedString,r&&(e.fillStyle=t.colorInterpolatedString);var p=.25*c;e.save(),e.translate(n+1.25*(p-p*a),i+(l-l*a)),e.scale(a,a),e.strokeStyle=t.colorStroke,e.fill(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG.path2d,"evenodd"),e.lineWidth=0,s&&e.stroke(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG.path2d),e.restore()}},{key:"PointRegularOverBounding",value:function(e,t,n,i,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,r=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];arguments.length>8&&arguments[8],arguments.length>9&&arguments[9],arguments.length>10&&arguments[10];if(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG){var c=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.pointBoundOffset;if(r?c*=o:c-=c*o,s){var l=2.5*c;l<0&&(l=0),e.fillStyle=t.colorFillHover,e.strokeStyle=t.colorStroke,e.lineWidth=t.lineWidth,e.beginPath(),e.arc(n,i-.5*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.height,l,0,2*Math.PI,!1),e.closePath(),e.fill(),e.stroke()}}}},{key:"PointRegularDrag",value:function(e,t,n,i){var a=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=(arguments.length>7&&arguments[7],arguments.length>8?arguments[8]:void 0),l=arguments.length>9?arguments[9]:void 0;if(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG){var p=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.pointBoundOffset;if(r?p*=o:p-=p*o,e.fillStyle=Object(Gt.c)("#000000",.3),e.beginPath(),r?e.ellipse(n,i,7,2.5,0,0,2*Math.PI,!1):e.ellipse(n,i+2,4,2,0,0,2*Math.PI,!1),e.closePath(),e.fill(),i-=1.8*p,s){var u=2.5*p;u<0&&(u=0),e.strokeStyle=t.colorStroke,e.lineWidth=t.lineWidth,e.beginPath(),e.arc(n,i-.5*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.height,u,0,2*Math.PI,!1),e.closePath(),e.fill(),e.stroke()}this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG&&(e.save(),e.translate(n-.5*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.width,i-this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.height),e.beginPath(),Object.keys(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG.path).map((function(t){var n=a.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG.path[t];if(n){var i=t.split(" ")[1];"M"===i?e.moveTo(n[0],n[1]):"C"===i?e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]):"L"===i&&e.lineTo(n[0],n[1])}})),l||(e.fillStyle=Object(Gt.h)("#888888",c-.8)),e.closePath(),e.fill(),e.restore())}}},{key:"PointRegularDragGhost",value:function(e,t,n,i){var a=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=(arguments.length>7&&arguments[7],arguments.length>8?arguments[8]:void 0),l=arguments.length>9?arguments[9]:void 0;if(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG){var p=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.pointBoundOffset;if(r?p*=o:p-=p*o,e.fillStyle=Object(Gt.c)("#000000",.3),e.beginPath(),r?e.ellipse(n,i,7,2.5,0,0,2*Math.PI,!1):e.ellipse(n,i+2,4,2,0,0,2*Math.PI,!1),e.closePath(),e.fill(),i-=1.8*p,s){var u=2.5*p;u<0&&(u=0),e.strokeStyle=t.colorStroke,e.lineWidth=t.lineWidth,e.beginPath(),e.arc(n,i-.5*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.height,u,0,2*Math.PI,!1),e.closePath(),e.fill(),e.stroke()}this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG&&(e.save(),e.translate(n-.5*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.width,i-this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.height),e.beginPath(),Object.keys(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG.path).map((function(t){var n=a.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG.path[t];if(n){var i=t.split(" ")[1];"M"===i?e.moveTo(n[0],n[1]):"C"===i?e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]):"L"===i&&e.lineTo(n[0],n[1])}})),l||(e.fillStyle=Object(Gt.h)("#888888",c-.8)),e.closePath(),e.fill(),e.restore())}}},{key:"PointNumberedOverBoundingByImg",value:function(e,t,n,i){arguments.length>4&&void 0!==arguments[4]&&arguments[4],!(arguments.length>5&&void 0!==arguments[5])||arguments[5],arguments.length>6&&void 0!==arguments[6]&&arguments[6],arguments.length>7&&arguments[7],arguments.length>8&&arguments[8]}},{key:"PointNumberedOverBoundingByCircleSelected",value:function(e,t,n,i,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,r=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=(arguments.length>8&&arguments[8],arguments.length>9&&arguments[9],this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.height),l=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.pointBoundOffset;if(r?l*=o:l-=l*o,e.fillStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.outlineHoverColorRGBAString,s){var p=c*a*.5+.75*o*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.elasticScale;p<0&&(p=0),e.beginPath(),e.arc(n,i-c*a*.5+2,p,0,2*Math.PI,!1),e.closePath(),e.fill(),e.strokeStyle=t.colorFill,e.lineWidth=2.5,e.beginPath(),e.arc(n,i-c*a*.5+2,p+1,0,2*Math.PI,!1),e.closePath(),e.stroke()}}},{key:"PointNumberedOverBoundingByCircle",value:function(e,t,n,i,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,r=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=(arguments.length>8&&arguments[8],arguments.length>9&&arguments[9],this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.height),l=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.pointBoundOffset;if(r?l*=o:l-=l*o,e.fillStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.outlineHoverColorRGBAString,s){var p=c*a*.5+.75*o*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.elasticScale;p<0&&(p=0),e.beginPath(),e.arc(n,i-c*a*.5+2,p,0,2*Math.PI,!1),e.closePath(),e.fill()}}},{key:"PointNumberedDragByImg",value:function(e,t,n,i){arguments.length>4&&void 0!==arguments[4]&&arguments[4],!(arguments.length>5&&void 0!==arguments[5])||arguments[5],arguments.length>6&&void 0!==arguments[6]&&arguments[6],arguments.length>7&&arguments[7],arguments.length>8&&arguments[8],arguments.length>9&&arguments[9]}},{key:"PointNumberedDragByCircle",value:function(e,t,n,i,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,r=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=(arguments.length>8&&arguments[8],arguments.length>9&&arguments[9],arguments.length>10?arguments[10]:void 0),l=arguments.length>11?arguments[11]:void 0,p=arguments.length>12?arguments[12]:void 0,u=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.height*a,d=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.scale;this.shape.draw.renderer.hasAni||(r=!1,o=1);var h=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.pointBoundOffset;if(r?h*=o:h-=h*o,i-=1.8*h,e.strokeStyle=t.colorStroke,e.fillStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.outlineHoverColorRGBAString,s){var m=2.5*d*h;m<0&&(m=0),e.beginPath(),e.arc(n,i-.5*u+2,m,0,2*Math.PI,!1),e.closePath(),e.fill()}this.shape.draw.renderer.needFocus,e.fillStyle=t.colorInterpolatedString,p&&(e.fillStyle=t.colorInterpolatedString),e.beginPath(),e.arc(n,i-.5*u+2,.5*u,0,2*Math.PI),e.closePath(),e.fill();var f="".concat(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.fontSize*a,"px ").concat(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.fontFamily);e.font=f;var y=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.fontColorArray;e.fillStyle=l||p?"rgba(".concat(y[0],", ").concat(y[1],", ").concat(y[2],", ").concat(y[3],")"):"rgba(".concat(y[0],", ").concat(y[1],", ").concat(y[2],", ").concat(y[3]-.3,")"),e.textAlign="center",e.fillText(c.toString(),n,i-.5*u+6)}},{key:"PointNumberedDragByCircleGhost",value:function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=(arguments.length>7&&arguments[7],arguments.length>8&&arguments[8],arguments.length>9?arguments[9]:void 0),c=arguments.length>10?arguments[10]:void 0,l=arguments.length>11?arguments[11]:void 0,p=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.height;this.shape.draw.renderer.hasAni||(o=!1,a=1);var u=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.pointBoundOffset;if(o?u*=a:u-=u*a,e.fillStyle=Object(Gt.c)("#000000",.3),o&&(e.beginPath(),e.ellipse(n,i,7,2.5,0,0,2*Math.PI,!1),e.closePath(),e.fill()),i-=1.8*u,e.strokeStyle=t.colorStroke,e.fillStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.outlineHoverColorRGBAString,r){var d=2.5*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.scale*u;d<0&&(d=0),e.beginPath(),e.arc(n,i-.5*p+2,d,0,2*Math.PI,!1),e.closePath(),e.fill()}this.shape.draw.renderer.needFocus,e.fillStyle=t.colorInterpolatedString,l&&(e.fillStyle=t.colorInterpolatedString),e.beginPath(),e.arc(n,i-.5*p+2,.5*p,0,2*Math.PI),e.closePath(),e.fill();var h="".concat(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.fontSize,"px ").concat(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.fontFamily);e.font=h;var m=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.fontColorArray;e.fillStyle=c||l?"rgba(".concat(m[0],", ").concat(m[1],", ").concat(m[2],", ").concat(m[3],")"):"rgba(".concat(m[0],", ").concat(m[1],", ").concat(m[2],", ").concat(m[3]-.3,")"),e.textAlign="center",e.fillText(s.toString(),n,i-.5*p+6)}},{key:"PointNumberedOverBounding",value:function(e,t,n,i){arguments.length>4&&void 0!==arguments[4]&&arguments[4],!(arguments.length>5&&void 0!==arguments[5])||arguments[5],arguments.length>6&&void 0!==arguments[6]&&arguments[6],arguments.length>7&&arguments[7],arguments.length>8&&arguments[8]}},{key:"PointNumberedDrag",value:function(e,t,n,i){arguments.length>4&&void 0!==arguments[4]&&arguments[4],!(arguments.length>5&&void 0!==arguments[5])||arguments[5],arguments.length>6&&void 0!==arguments[6]&&arguments[6],arguments.length>7&&arguments[7],arguments.length>8&&arguments[8],arguments.length>9&&arguments[9]}},{key:"PointIcon",value:function(e,t,n,i,a,o,r,s,c,l){arguments.length>10&&void 0!==arguments[10]&&arguments[10];var p=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1;e.globalAlpha=l,e.fillStyle=t.colorFill;var u=.5,d=10*p,h=a*u+d,m=o*u+d,f=.5*h,y=.5*m;e.drawImage(r,n-f,i-y,h,m)}},{key:"CenterPoint",value:function(e,t,n){e.beginPath(),e.arc(t,n,2,0,2*Math.PI,!1),e.closePath(),e.fillStyle="black",e.fill()}},{key:"PointRagularSVGRenderEdgeSupport",value:function(e,t,n,i,a,o){arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(e.save(),e.translate(n,i),this.shape.draw.renderer.needFocus,e.fillStyle=t.colorInterpolatedString,o&&(e.fillStyle=t.colorInterpolatedString),e.strokeStyle=t.colorStroke,e.lineWidth=0,this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG&&this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG.path){var r=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG.path;e.beginPath(),Object.keys(r).map((function(t){var n=r[t];if(n){var i=t.split(" ")[1];"M"===i?e.moveTo(n[0],n[1]):"C"===i?e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]):"L"===i&&e.lineTo(n[0],n[1])}})),e.closePath(),e.fill()}e.restore()}},{key:"PointRegularOverBoundingBySVGPathEdgeSupport",value:function(e,t,n,i){e.save(),e.translate(n,i),e.strokeStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.outlineHoverColorRGBAString;var a=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG.path;e.beginPath(),Object.keys(a).map((function(t){var n=a[t];if(n){var i=t.split(" ")[1];"M"===i?e.moveTo(n[0],n[1]):"C"===i?e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]):"L"===i&&e.lineTo(n[0],n[1])}})),e.closePath(),e.stroke(),e.restore()}},{key:"ShadowRPoint",value:function(e,t,n,i,a,o){this.shape.draw.renderer.annotationInstance.implementations.app.model.appCoreWrapper.browserUtility.type!==g.d.SAFARI&&this.shape.draw.renderer.annotationInstance.implementations.app.model.appCoreWrapper.browserUtility.type!==g.d.EDGE&&(e.beginPath(),e.ellipse(n,i+5,10,2.5,0,0,2*Math.PI,!1),e.closePath(),e.fillStyle=a||o?this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.shadowColorHover:this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.shadowColor,e.filter="blur(".concat(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.shadowBlur,"px)"),e.fill(),e.filter="none")}},{key:"ShadowRPointLight",value:function(e,t,n,i,a,o,r){this.shape.draw.renderer.annotationInstance.implementations.app.model.appCoreWrapper.browserUtility.type!==g.d.SAFARI&&this.shape.draw.renderer.annotationInstance.implementations.app.model.appCoreWrapper.browserUtility.type!==g.d.EDGE&&(e.beginPath(),e.ellipse(n,i+5,10,2.5,0,0,2*Math.PI,!1),e.closePath(),e.fillStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.shadowColor,e.filter="blur(".concat(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.rPoint.shadowBlur,"px)"),e.fill(),e.filter="none")}},{key:"ShadowNPoint",value:function(e,t,n,i,a,o,r){this.shape.draw.renderer.annotationInstance.implementations.app.model.appCoreWrapper.browserUtility.type!==g.d.SAFARI&&this.shape.draw.renderer.annotationInstance.implementations.app.model.appCoreWrapper.browserUtility.type!==g.d.EDGE&&(e.beginPath(),e.ellipse(n,i+5,10*a,2.5,0,0,2*Math.PI,!1),e.closePath(),e.fillStyle=o||r?this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.shadowColorHover:this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.shadowColor,e.filter="blur(".concat(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.shadowBlur,"px)"),e.fill(),e.filter="none")}},{key:"ShadowNPointLight",value:function(e,t,n,i,a,o,r){this.shape.draw.renderer.annotationInstance.implementations.app.model.appCoreWrapper.browserUtility.type!==g.d.SAFARI&&this.shape.draw.renderer.annotationInstance.implementations.app.model.appCoreWrapper.browserUtility.type!==g.d.EDGE&&(e.beginPath(),e.ellipse(n,i+5,10*a,2.5,0,0,2*Math.PI,!1),e.closePath(),e.fillStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.shadowColor,e.filter="blur(".concat(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.shadowBlur,"px)"),e.fill(),e.filter="none")}},{key:"PointCluster",value:function(e,t,n,i,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,r=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=(arguments.length>8&&arguments[8],arguments.length>9&&arguments[9],arguments.length>10&&arguments[10],arguments.length>11&&arguments[11],arguments.length>12&&arguments[12],this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.height*a),l=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.scale;this.shape.draw.renderer.hasAni||(r=!1,o=1);var p=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.pointBoundOffset;if(r?p*=o:p-=p*o,i-=1.8*p,e.strokeStyle=t.colorStroke,e.fillStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.outlineHoverColorRGBAString,s){var u=2.5*l*p;u<0&&(u=0),e.beginPath(),e.arc(n,i-.5*c+2,u,0,2*Math.PI,!1),e.closePath(),e.fill()}}}]),e}(),Vr=function(){function e(t){Object(o.a)(this,e),this.shape=t}return Object(r.a)(e,[{key:"NodeMidHover",value:function(e,t,n,i,a,o){var r=arguments.length>6&&void 0!==arguments[6]&&arguments[6];r?(e.lineWidth=t.lineWidth,e.fillStyle=t.colorFill,e.strokeStyle=t.colorStroke,e.beginPath(),o<.1?e.arc(n,i,(Math.abs(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.sizeMid)+3)*a,0,2*Math.PI,!1):e.arc(n,i,Math.abs(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.sizeMid+3)*a*o,0,2*Math.PI,!1)):(e.lineWidth=t.lineWidth,e.fillStyle=t.colorStroke,e.strokeStyle=t.colorStrokeHover,e.beginPath(),o<.1?e.arc(n,i,(Math.abs(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.sizeMid)+1)*a,0,2*Math.PI,!1):e.arc(n,i,Math.abs(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.sizeMid)*a*o,0,2*Math.PI,!1)),e.closePath(),e.fill(),e.stroke()}},{key:"NodeMidHoverForArrow",value:function(e,t,n,i,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],r=arguments.length>6?arguments[6]:void 0;if(e.beginPath(),e.lineWidth=t.lineWidth,o)return e.fillStyle=t.colorFill,a<.1?e.arc(n,i,Math.abs(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.sizeMid),0,2*Math.PI,!1):e.arc(n,i,Math.abs(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.sizeMid)*a,0,2*Math.PI,!1),e.fill(),void e.closePath();if(e.fillStyle=t.colorStroke,e.strokeStyle=t.colorStrokeHover,r===Lt.BackgroundColor){var s=+t.colorStroke.split(",")[1];e.strokeStyle=s<50?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)"}a<.1?e.arc(n,i,Math.abs(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.sizeMid),0,2*Math.PI,!1):e.arc(n,i,Math.abs(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.sizeMid)*a,0,2*Math.PI,!1),e.closePath(),e.fill(),e.stroke()}},{key:"NodeMidStart",value:function(e,t,n,i,a){e.lineWidth=t.lineWidth,e.fillStyle=t.colorStroke,e.beginPath(),a<.1?e.arc(n,i,Math.abs(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.sizeMid),0,2*Math.PI,!1):e.arc(n,i,Math.abs(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.sizeMid*a),0,2*Math.PI,!1),e.closePath(),e.fill()}},{key:"NodeHover",value:function(e,t,n,i,a,o){e.lineWidth=t.lineWidth,e.strokeStyle=t.colorStroke,e.fillStyle=t.colorFill,e.beginPath(),e.arc(n,i,(Math.abs(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.size)+1)*a,0,2*Math.PI,!1),e.closePath(),e.fill(),e.stroke()}},{key:"Node",value:function(e,t,n,i,a){e.lineWidth=t.lineWidth,e.strokeStyle=t.colorStroke,e.fillStyle=t.colorFill,e.beginPath(),e.arc(n,i,(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.size+1)*a,0,2*Math.PI,!1),e.closePath(),e.fill(),e.stroke()}},{key:"NodeSelected",value:function(e,t,n,i,a){e.lineWidth=t.lineWidth,e.strokeStyle=t.colorStroke,e.fillStyle=t.colorFill,e.beginPath(),e.arc(n,i,(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.size+2)*a,0,2*Math.PI,!1),e.closePath(),e.fill(),e.stroke()}},{key:"NodeStart",value:function(e,t,n,i,a,o,r){if(e.lineWidth=t.lineWidth,e.fillStyle=t.colorFill,e.strokeStyle=t.colorStroke,r===Lt.BackgroundColor){var s=+t.colorStroke.split(",")[1];e.strokeStyle=s<50?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)"}e.beginPath(),o<.1?e.arc(n,i,Math.abs(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.size+1)*a,0,2*Math.PI,!1):e.arc(n,i,Math.abs(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.size+1)*a*o,0,2*Math.PI,!1),e.fill(),e.stroke()}},{key:"Point",value:function(e,t,n,i,a){e.lineWidth=t.lineWidth,e.strokeStyle=t.colorStroke,e.fillStyle=t.colorFill,e.beginPath(),e.arc(n,i,this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.size*a,0,2*Math.PI,!1),e.closePath(),e.fill(),e.stroke()}},{key:"PointOver",value:function(e,t,n,i,a){e.lineWidth=t.lineWidth,e.strokeStyle=t.colorStroke,e.fillStyle=t.colorFill,e.beginPath(),e.arc(n,i,1.45*this.shape.draw.renderer.numericalMotion.Scale(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.size)*a,0,2*Math.PI,!1),e.closePath(),e.fill(),e.stroke()}},{key:"APointPath",value:function(e,t,n,i){e.lineWidth=t.lineWidth,e.strokeStyle=t.colorStroke,e.fillStyle=t.colorFill,e.beginPath(),e.arc(n,i,1.45*this.shape.draw.renderer.numericalMotion.Scale(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.size),0,2*Math.PI,!1),e.closePath(),e.fill(),e.stroke()}},{key:"NodeSelectedBGCircle",value:function(e,t,n,i,a){e.fillStyle=t.colorFill,e.beginPath(),e.arc(n,i,a,0,6.28),e.closePath(),e.fill()}},{key:"PointDim",value:function(e,t,n,i,a,o){var r="lat: ".concat(a.toFixed(4).toString(),", lng: ").concat(o.toFixed(4).toString());e.fillStyle="black",e.textBaseline="bottom",e.textAlign="center",e.fillText(r,n,i-15)}}]),e}(),Fr=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"index",0),this.shape=t}return Object(r.a)(e,[{key:"Line",value:function(e,t,n,i,a,o,r){var s=t.lineWidth;r&&(s=this.shape.draw.renderer.numericalMotion.Scale(s)),e.beginPath(),e.moveTo(n,i),e.lineTo(a,o),e.closePath(),e.lineWidth=s,e.strokeStyle=t.colorStroke,e.stroke()}},{key:"LineTrajectory",value:function(e,t,n){for(e.globalAlpha=1,e.globalCompositeOperation=Gt.a.SCREEN,this.index=1;this.index<n.length-2;this.index+=2)e.beginPath(),e.moveTo(n[this.index+1].x,n[this.index+1].y),e.lineTo(n[this.index].x,n[this.index].y),e.lineWidth=.15*t.lineWidth,e.strokeStyle=t.colorStroke,e.stroke(),e.closePath();e.globalCompositeOperation=Gt.a.SOURCE_OVER}},{key:"Polyline",value:function(e,t,n,i,a,o,r){for(e.lineWidth=t.lineWidth,this.shape.draw.renderer.needFocus&&!o?e.strokeStyle=t.colorStrokeHover:e.strokeStyle=t.colorStroke,r&&(e.strokeStyle=t.colorStroke),e.beginPath(),e.moveTo(n[0].x,n[0].y),this.index=1;this.index<n.length;++this.index)e.lineTo(n[this.index].x,n[this.index].y);e.stroke(),e.closePath()}},{key:"PolylineHover",value:function(e,t,n,i,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;!(arguments.length>6&&void 0!==arguments[6])||arguments[6];for(e.lineWidth=o*t.lineWidth*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.elasticScale,e.strokeStyle=t.colorStrokeHover,e.beginPath(),e.moveTo(n[0].x,n[0].y),this.index=1;this.index<n.length;++this.index)e.lineTo(n[this.index].x,n[this.index].y);e.stroke(),e.closePath()}},{key:"EdgePolyline",value:function(e,t,n,i,a,o){arguments.length>6&&void 0!==arguments[6]&&arguments[6],arguments.length>7&&void 0!==arguments[7]&&arguments[7],arguments.length>8&&void 0!==arguments[8]&&arguments[8],arguments.length>9&&void 0!==arguments[9]&&arguments[9],arguments.length>10&&arguments[10];var r=arguments.length>11?arguments[11]:void 0;e.lineWidth=t.lineWidth,this.shape.draw.renderer.needFocus,e.strokeStyle=t.colorInterpolatedString,r&&(e.strokeStyle=t.colorInterpolatedString),e.beginPath(),e.moveTo(n,i),e.lineTo(a,o),e.closePath(),e.stroke()}},{key:"EdgePolylineHover",value:function(e,t,n,i,a,o){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;arguments.length>7&&arguments[7],arguments.length>8&&arguments[8];e.lineWidth=r*t.lineWidth*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.elasticScale,e.strokeStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.outlineHoverColorRGBAString,e.beginPath(),e.moveTo(n,i),e.lineTo(a,o),e.closePath(),e.stroke()}},{key:"ShadowMidPointForBending",value:function(e,t,n){e.lineWidth=t.lineWidth,e.strokeStyle=t.colorStroke,e.fillStyle=t.colorFill,e.beginPath(),e.arc(n.x,n.y,this.shape.draw.renderer.annotationInstance.customization.themeCurrent.node.sizeMid,0,6.28),e.closePath(),e.stroke()}},{key:"PolylineByVec",value:function(e,t,n,i,a,o){e.lineWidth=t.lineWidth,e.strokeStyle=t.colorStroke,e.fillStyle=t.colorFill,e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;++r)e.lineTo(n[r].x,n[r].y);e.stroke()}},{key:"PolylineByVecGhost",value:function(e,t,n,i,a,o){e.lineWidth=t.lineWidth,e.strokeStyle=t.colorStroke,e.fillStyle=t.colorFill,e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;++r)e.lineTo(n[r].x,n[r].y);e.stroke()}},{key:"PolylineByVecHover",value:function(e,t,n,i,a){arguments.length>5&&void 0!==arguments[5]&&arguments[5],!(arguments.length>6&&void 0!==arguments[6])||arguments[6];e.lineWidth=t.lineWidth,e.strokeStyle=t.colorStroke,e.fillStyle=t.colorFill,e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var o=1;o<n.length;++o)e.lineTo(n[o].x,n[o].y);e.closePath(),e.stroke()}},{key:"EndPolyline",value:function(e,t){e.lineWidth=t.lineWidth,e.strokeStyle=t.colorStroke,e.fillStyle=t.colorFill,e.stroke()}},{key:"EndPolylineHover",value:function(e,t,n,i,a){}},{key:"PolylineShadow",value:function(e,t,n,i,a){e.lineWidth=t.lineWidth,e.strokeStyle=t.colorStroke,e.fillStyle=t.colorFill,e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var o=1;o<n.length;++o)e.lineTo(n[o].x,n[o].y);e.lineTo(i.x,i.y),e.stroke(),a===g.j.POLYGON_GRAPH&&e.fill()}},{key:"PolygonShadow",value:function(e,t,n,i,a){e.lineWidth=t.lineWidth,e.strokeStyle=t.colorStroke,e.fillStyle=t.colorFill,e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var o=1;o<n.length;++o)e.lineTo(n[o].x,n[o].y);e.lineTo(i.x,i.y),e.closePath(),e.stroke(),e.fill()}},{key:"LineDim",value:function(e,t,n,i,a,o,r){var s=n+.5*(a-n),c=i+.5*(o-i),l=le(W(new Oe(n,i)),W(new Oe(a,o)));e.translate(s,c),e.rotate(-l*Math.PI/180),this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.isDarkBG?e.fillStyle="#ffffff":e.fillStyle="#000000",e.textBaseline="bottom",e.textAlign="center";e.fillText(r.toFixed(2).toString()+"",0,-10),e.setTransform(1,0,0,1,0,0)}}]),e}(),Ur=function(){function e(t){Object(o.a)(this,e),this.shape=t}return Object(r.a)(e,[{key:"NGon",value:function(e,t,n,i){e.globalAlpha=1,e.beginPath(),e.moveTo(t[0].vec.x,t[0].vec.y);for(var a=1;a<t.length;++a)e.lineTo(t[a].vec.x,t[a].vec.y);e.closePath(),e.fill(),e.beginPath(),e.moveTo(t[0].vec.x,t[0].vec.y);for(var o=1;o<t.length;++o)e.lineTo(t[o].vec.x,t[o].vec.y);e.closePath(),e.stroke()}},{key:"NStart",value:function(e,t,n,i){e.globalAlpha=1,e.beginPath(),e.moveTo(t[0].vec.x,t[0].vec.y);for(var a=1;a<t.length;++a)e.lineTo(t[a].vec.x,t[a].vec.y);var o=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.polygon.fillStyleFirstArray;e.fillStyle="rgba(".concat(o[0],",").concat(o[1],",").concat(o[2],",").concat(o[3],")"),e.closePath(),e.fill(),e.beginPath(),e.moveTo(t[0].vec.x,t[0].vec.y);for(var r=1;r<t.length;++r)e.lineTo(t[r].vec.x,t[r].vec.y);e.closePath(),e.stroke()}}]),e}(),zr=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"index",0),this.shape=t}return Object(r.a)(e,[{key:"PolygonEnd",value:function(e,t){e.lineWidth=t.lineWidth,e.strokeStyle=t.colorStroke,e.stroke()}},{key:"PolygonHoverEnd",value:function(e,t,n,i){e.lineWidth=n*t.lineWidth*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.elasticScale,e.strokeStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.outlineHoverColorRGBAString,e.closePath(),e.stroke()}},{key:"PolygonHover",value:function(e,t,n,i,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;!(arguments.length>6&&void 0!==arguments[6])||arguments[6],arguments.length>7&&arguments[7];for(e.beginPath(),e.moveTo(n[0].x,n[0].y),this.index=1;this.index<n.length;++this.index)e.lineTo(n[this.index].x,n[this.index].y);this.PolygonHoverEnd(e,t,o,a)}},{key:"Ellipse",value:function(e,t,n,i,a,o,r){arguments.length>7&&void 0!==arguments[7]&&arguments[7];e.beginPath(),e.ellipse(n,i,a,o,0,0,2*Math.PI,!1),e.closePath(),e.fillStyle=t.colorFill,r&&e.fill(),this.PolygonEnd(e,t)}},{key:"EllipseHover",value:function(e,t,n,i,a,o,r,s){var c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;!(arguments.length>9&&void 0!==arguments[9])||arguments[9];e.beginPath(),e.ellipse(n,i,a,o,0,0,2*Math.PI,!1),e.closePath(),this.PolygonHoverEnd(e,t,c,s)}},{key:"EllipseByVecNode",value:function(e,t,n,i,a,o){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;!(arguments.length>7&&void 0!==arguments[7])||arguments[7];for(this.index=0;this.index<n.length;++this.index)this.shape.node.Node(e,t,n[this.index].x,n[this.index].y,i);this.PolygonHoverEnd(e,t,r,o)}},{key:"ElasticBoundingWithTwoVec",value:function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];e.globalAlpha=1;var r=7;o?r*=a:r-=r*a}},{key:"RoundedRect",value:function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=i;e.lineWidth=t.lineWidth,e.strokeStyle=t.colorStroke,e.beginPath(),e.moveTo(n[0].x+a+o,n[0].y),e.lineTo(n[1].x-a-o,n[1].y),e.arcTo(n[1].x-a,n[1].y,n[1].x-a,n[1].y+o,o),e.lineTo(n[2].x-a,n[2].y-o),e.arcTo(n[2].x-a,n[2].y,n[2].x-a-o,n[2].y,o),e.lineTo(n[3].x+a+o,n[3].y),e.arcTo(n[3].x+a,n[3].y,n[3].x+a,n[3].y-o,o),e.lineTo(n[0].x+a,n[0].y+o),e.arcTo(n[0].x+a,n[0].y,n[0].x+a+o,n[0].y,o),e.stroke()}},{key:"RoundedRectFill",value:function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=i;e.save(),this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.isDarkBG?e.fillStyle="#ffffff":e.fillStyle="#000000",e.strokeStyle=t.colorStroke,e.beginPath(),e.moveTo(n[0].x+a+o,n[0].y),e.lineTo(n[1].x-a-o,n[1].y),e.arcTo(n[1].x-a,n[1].y,n[1].x-a,n[1].y+o,o),e.lineTo(n[2].x-a,n[2].y-o),e.arcTo(n[2].x-a,n[2].y,n[2].x-a-o,n[2].y,o),e.lineTo(n[3].x+a+o,n[3].y),e.arcTo(n[3].x+a,n[3].y,n[3].x+a,n[3].y-o,o),e.lineTo(n[0].x+a,n[0].y+o),e.arcTo(n[0].x+a,n[0].y,n[0].x+a+o,n[0].y,o),e.fill(),e.restore()}},{key:"Rectangle",value:function(e,t,n,i,a,o,r){if(a){for(e.beginPath(),e.moveTo(n[0].x,n[0].y),this.index=1;this.index<n.length;++this.index)e.lineTo(n[this.index].x,n[this.index].y);e.fillStyle=t.colorFill,e.closePath(),e.fill()}for(e.beginPath(),e.moveTo(n[0].x,n[0].y),this.index=1;this.index<n.length;++this.index)e.lineTo(n[this.index].x,n[this.index].y);e.lineWidth=t.lineWidth,e.strokeStyle=t.colorStroke,e.closePath(),e.stroke()}},{key:"RectangleHover",value:function(e,t,n,i,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;!(arguments.length>6&&void 0!==arguments[6])||arguments[6];for(e.beginPath(),e.moveTo(n[0].x,n[0].y),this.index=1;this.index<n.length;++this.index)e.lineTo(n[this.index].x,n[this.index].y);this.PolygonHoverEnd(e,t,o,a)}},{key:"Polygon",value:function(e,t,n,i,a,o,r,s,c){for(e.beginPath(),e.moveTo(n[0].x,n[0].y),this.index=1;this.index<n.length;++this.index)e.lineTo(n[this.index].x,n[this.index].y);for(e.closePath(),this.shape.draw.renderer.needFocus,e.fillStyle=t.colorInterpolatedString,c?(e.fillStyle=t.colorInterpolatedString,r&&e.fill()):r&&e.fill(),e.beginPath(),e.moveTo(n[0].x,n[0].y),this.index=1;this.index<n.length;++this.index)e.lineTo(n[this.index].x,n[this.index].y);e.lineWidth=t.lineWidth,this.shape.draw.renderer.needFocus&&!s?e.strokeStyle=t.colorInterpolatedString:e.strokeStyle=t.colorStroke,c&&(e.strokeStyle=t.colorStroke),i?(e.stroke(),e.closePath()):(e.closePath(),e.stroke())}},{key:"PolygonByVec",value:function(e,t,n,i,a,o){for(e.beginPath(),e.moveTo(n[0].x,n[0].y),this.index=1;this.index<n.length;++this.index)e.lineTo(n[this.index].x,n[this.index].y);for(e.fillStyle=t.colorFill,e.closePath(),e.fill(),e.beginPath(),e.moveTo(n[0].x,n[0].y),this.index=1;this.index<n.length;++this.index)e.lineTo(n[this.index].x,n[this.index].y);e.lineTo(n[0].x,n[0].y),e.lineWidth=t.lineWidth,e.strokeStyle=t.colorStroke,i?(e.stroke(),e.closePath()):(e.closePath(),e.stroke())}},{key:"PolygonByVecGhost",value:function(e,t,n,i,a,o){for(e.beginPath(),e.moveTo(n[0].x,n[0].y),this.index=1;this.index<n.length;++this.index)e.lineTo(n[this.index].x,n[this.index].y);for(e.fillStyle=t.colorFill,e.closePath(),e.beginPath(),e.moveTo(n[0].x,n[0].y),this.index=1;this.index<n.length;++this.index)e.lineTo(n[this.index].x,n[this.index].y);e.lineTo(n[0].x,n[0].y),e.lineWidth=t.lineWidth,e.strokeStyle=t.colorStroke,i?(e.stroke(),e.closePath()):(e.closePath(),e.stroke())}},{key:"PolygonByVecHover",value:function(e,t,n,i,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;!(arguments.length>6&&void 0!==arguments[6])||arguments[6];for(e.beginPath(),e.moveTo(n[0].x,n[0].y),this.index=1;this.index<n.length;++this.index)e.lineTo(n[this.index].x,n[this.index].y);this.PolygonHoverEnd(e,t,o,a)}},{key:"PolygonByVecNode",value:function(e,t,n,i,a,o){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;!(arguments.length>7&&void 0!==arguments[7])||arguments[7];for(this.index=0;this.index<n.length;++this.index)this.shape.node.Node(e,t,n[this.index].x,n[this.index].y,i);this.PolygonHoverEnd(e,t,r,o)}},{key:"PolygonMultiple",value:function(e,t,n,i,a,o,r,s){if(e.lineWidth=t.lineWidth,s){for(var c=0;c<n.length;++c)if(i[c]>a){for(e.beginPath(),e.moveTo(n[c][0].x,n[c][0].y),this.index=1;this.index<n[c].length;this.index+=1)e.lineTo(n[c][this.index].x,n[c][this.index].y);e.closePath(),e.fill()}}else for(var l=0;l<n.length;++l)if(i[l]>a){for(e.beginPath(),e.moveTo(n[l][0].x,n[l][0].y),this.index=1;this.index<n[l].length;this.index+=1)e.lineTo(n[l][this.index].x,n[l][this.index].y);e.closePath(),e.stroke()}}},{key:"PolygonMultipleMask",value:function(e,t,n,i,a,o,r,s){if(e.lineWidth=t.lineWidth,e.fillStyle="#ff0000",e.strokeStyle="#ff0000",s)for(var c=0;c<n.length;++c)if(i[c]>a){for(e.beginPath(),e.moveTo(n[c][0].x,n[c][0].y),this.index=1;this.index<n[c].length;this.index+=1)e.lineTo(n[c][this.index].x,n[c][this.index].y);e.closePath(),e.fill()}}},{key:"EllipseDim",value:function(e,t,n,i,a,o,r){e.globalAlpha=1,e.setLineDash([2,2]),e.beginPath(),e.moveTo(n+a,i),e.lineTo(n,i),e.lineTo(n,i+o),e.strokeStyle="black",e.stroke(),e.setLineDash([]),e.fillStyle="black",e.fillText(a.toFixed(2).toString(),n+.5*a,i+13),e.fillText(o.toFixed(2).toString(),n,i+.5*o);var s="lat: ".concat(n.toFixed(2).toString(),", lng: ").concat(i.toFixed(2).toString(),", Area: ").concat(r);e.textBaseline="bottom",e.textAlign="center",e.fillText(s,n,i-14)}}]),e}(),Hr=function(){function e(t){Object(o.a)(this,e),this.shape=t}return Object(r.a)(e,[{key:"CircleBG",value:function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.selection.strokeStyleFirstArray;e.strokeStyle="rgba(".concat(o[0],", ").concat(o[1],", ").concat(o[2],", 0.9)"),o=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.selection.fillStyleFirstArray,e.fillStyle="rgba(".concat(o[0],", ").concat(o[1],", ").concat(o[2],", 0.3)");var r=i+1*a;r<0&&(r=0),e.beginPath(),e.arc(t,n,r,0,2*Math.PI,!1),e.closePath(),e.fill()}}]),e}(),Yr=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"needResetDash",!1),this.shape=t}return Object(r.a)(e,[{key:"RoundedRectACTextStoryMap",value:function(e,t,n,i,a){arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]&&arguments[6],arguments.length>7&&void 0!==arguments[7]&&arguments[7];var o=arguments.length>8?arguments[8]:void 0,r=(arguments.length>9&&arguments[9],arguments.length>10?arguments[10]:void 0);e.lineWidth=1.5,e.beginPath();var s=i.x-n.x,c=i.y-n.y;e.rect(n.x,n.y,s,c),e.closePath();var l=o;e.fillStyle="rgba(".concat(l[0],", ").concat(l[1],", ").concat(l[2],", ").concat(l[3],")"),r&&(e.fillStyle="rgba(".concat(l[0],", ").concat(l[1],", ").concat(l[2],", ").concat(l[3],")")),e.fill()}},{key:"RoundedRectACTextStoryMapNoBG",value:function(e,t,n,i,a){arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]&&arguments[6],arguments.length>7&&void 0!==arguments[7]&&arguments[7];var o=arguments.length>8?arguments[8]:void 0,r=(arguments.length>9&&arguments[9],arguments.length>10?arguments[10]:void 0);e.lineWidth=2,e.beginPath();var s=i.x-n.x,c=i.y-n.y;e.rect(n.x,n.y,s,c),e.closePath();var l=o;e.strokeStyle="rgba(".concat(l[0],", ").concat(l[1],", ").concat(l[2],", ").concat(l[3],")"),r&&(e.strokeStyle="rgba(".concat(l[0],", ").concat(l[1],", ").concat(l[2],", ").concat(l[3],")")),e.stroke()}},{key:"RoundedRectACTextStoryMapByWidth",value:function(e,t,n,i,a,o){arguments.length>6&&void 0!==arguments[6]&&arguments[6],arguments.length>7&&void 0!==arguments[7]&&arguments[7];var r=arguments.length>8?arguments[8]:void 0,s=arguments.length>9?arguments[9]:void 0;e.beginPath(),e.rect(n.x,n.y,i,a),e.closePath();var c=t.styleBox.fillStyle;e.fillStyle="rgba(".concat(c[0],", ").concat(c[1],", ").concat(c[2],", 1)"),s&&(e.fillStyle="rgba(".concat(c[0],", ").concat(c[1],", ").concat(c[2],", 1)")),t.state.textColor===Lt.BackgroundColor||t.state.textColor===Lt.TitleColor?(e.shadowBlur=15,e.shadowColor="rgba(0,0,0,0.05)",e.fill(),e.shadowBlur=0):(this.shape.draw.renderer.annotationInstance.implementations.app.param.interactionMode===g.k.DRAWING&&(e.strokeStyle="rgba(".concat(t.styleLeaderline.strokeStyle[0],", ").concat(t.styleLeaderline.strokeStyle[1],", ").concat(t.styleLeaderline.strokeStyle[2],", 1)"),(s||r)&&(e.lineWidth=t.styleBox.lineWidth,e.setLineDash([4,4]),e.stroke())),e.setLineDash([]))}},{key:"RenderNodeDia",value:function(e,t,n,i,a,o){e.beginPath(),e.moveTo(n+a,i),e.lineTo(n,i+o),e.lineTo(n-a,i),e.lineTo(n,i-o),e.closePath(),e.lineWidth=t.styleHandleNode.lineWidth,e.strokeStyle="rgba(".concat(t.styleHandleNode.strokeStyle[0],", ").concat(t.styleHandleNode.strokeStyle[1],", ").concat(t.styleHandleNode.strokeStyle[2],", ").concat(t.styleHandleNode.strokeStyle[3],")"),e.fillStyle="rgba(".concat(t.styleHandleNode.fillStyle[0],", ").concat(t.styleHandleNode.fillStyle[1],", ").concat(t.styleHandleNode.fillStyle[2],", ").concat(t.styleHandleNode.fillStyle[3],")"),e.fill(),e.stroke()}},{key:"RenderLeaderLine",value:function(e,t,n,i,a,o,r,s,c){var l=t.styleLeaderline.strokeStyle,p="rgba(".concat(l[0],", ").concat(l[1],", ").concat(l[2],", ").concat(l[3],")");e.lineDashOffset=0,e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(i.x,i.y),e.lineTo(a.x,a.y),e.setLineDash(t.styleLeaderline.dash),this.needResetDash=!0,e.strokeStyle=p,e.lineWidth=t.styleLeaderline.lineWidth,e.stroke(),e.setLineDash([]),(s||c)&&(e.beginPath(),e.arc(a.x,a.y,7,0,6.28),e.closePath(),e.strokeStyle="rgba(".concat(t.styleAnchorNode.strokeStyle[0],", ").concat(t.styleAnchorNode.strokeStyle[1],", ").concat(t.styleAnchorNode.strokeStyle[2],", ").concat(t.styleAnchorNode.strokeStyle[3],")"),e.fillStyle="rgba(".concat(t.styleAnchorNode.fillStyle[0],", ").concat(t.styleAnchorNode.fillStyle[1],", ").concat(t.styleAnchorNode.fillStyle[2],", ").concat(t.styleAnchorNode.fillStyle[3],")"),e.lineWidth=t.styleAnchorNode.lineWidth,e.fill(),e.stroke())}}]),e}(),Kr=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"index",0),Object(u.a)(this,"offset",0),this.shape=t}return Object(r.a)(e,[{key:"CArrow",value:function(e,t,n,i,a,o,r,s,c,l,p){var u=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1,d=arguments.length>12?arguments[12]:void 0;c&&(e.lineWidth=u*t.lineWidth*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.elasticScale,e.beginPath(),e.moveTo(n,i),e.lineTo(a,o),e.lineTo(r,s),e.lineTo(n,i),e.closePath(),e.fillStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.outlineHoverColorRGBAString,e.strokeStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.outlineHoverColorRGBAString,e.stroke(),e.fill()),e.beginPath(),e.moveTo(n,i),e.lineTo(a,o),e.lineTo(r,s),e.lineTo(n,i),e.closePath(),e.lineWidth=t.lineWidth,this.shape.draw.renderer.needFocus&&!c?(e.fillStyle=t.colorFillHover,e.strokeStyle=t.colorStrokeHover):(e.fillStyle=t.colorFill,e.strokeStyle=t.colorStroke),d&&(e.fillStyle=t.colorFill,e.strokeStyle=t.colorStroke),e.stroke(),e.fill()}},{key:"CArrowByTranslation",value:function(e,t,n,i,a,o,r,s,c,l,p){arguments.length>11&&void 0!==arguments[11]&&arguments[11];var u=arguments.length>12?arguments[12]:void 0,d=arguments.length>13?arguments[13]:void 0,h=le(W(n),W(i));e.save(),e.translate(a,o),e.rotate(-h*Math.PI/180);var m=7.5*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.arrow.scale*s,f=-12*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.arrow.scale*s;if(e.beginPath(),e.moveTo(0,0),e.lineTo(-f*r,-m*r),e.lineTo(-f*r,m*r),e.closePath(),e.lineWidth=t.lineWidth,this.shape.draw.renderer.needFocus&&!c?(e.fillStyle=t.colorFillHover,e.strokeStyle=t.colorInterpolatedString):(e.fillStyle=t.colorFill,e.strokeStyle=t.colorInterpolatedString),u&&(e.fillStyle=t.colorFill,e.strokeStyle=t.colorInterpolatedString),c&&d===Lt.BackgroundColor){var y=+t.colorStroke.split(",")[1];e.strokeStyle=y<50?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)"}e.stroke(),e.fill(),e.restore()}},{key:"CurveQuadraticArrow",value:function(e,t,n,i,a,o,r,s,c,l,p,u){arguments.length>12&&void 0!==arguments[12]&&arguments[12];var d=arguments.length>13?arguments[13]:void 0,h=(arguments.length>14&&arguments[14],arguments.length>15&&void 0!==arguments[15]&&arguments[15],arguments.length>16&&void 0!==arguments[16]?arguments[16]:0);!(arguments.length>17&&void 0!==arguments[17])||arguments[17];e.lineDashOffset=h,e.setLineDash(t.dash),e.lineWidth=t.lineWidth,e.beginPath(),e.moveTo(r,s),e.quadraticCurveTo(a,o,n,i),this.shape.draw.renderer.needFocus,e.strokeStyle=t.colorInterpolatedString,d&&(e.fillStyle=t.colorFill,e.strokeStyle=t.colorInterpolatedString),e.stroke(),e.setLineDash([])}},{key:"ArrowByVecNode",value:function(e,t,n,i,a,o){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;!(arguments.length>7&&void 0!==arguments[7])||arguments[7];for(this.index=0;this.index<n.length;++this.index)this.shape.node.Node(e,t,n[this.index].x,n[this.index].y,i);this.shape.area.PolygonHoverEnd(e,t,r,o)}},{key:"CurveQuadratic",value:function(e,t,n,i,a,o,r,s){arguments.length>8&&void 0!==arguments[8]&&arguments[8];var c=arguments.length>9?arguments[9]:void 0;e.lineWidth=t.lineWidth,this.shape.draw.renderer.needFocus,e.strokeStyle=t.colorInterpolatedString,c&&(e.strokeStyle=t.colorInterpolatedString),e.beginPath(),e.moveTo(n,i),e.quadraticCurveTo(a,o,r,s),e.stroke()}},{key:"EdgeCurveQuadraticHover",value:function(e,t,n,i,a,o,r,s){var c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;arguments.length>9&&arguments[9],arguments.length>10&&arguments[10];e.lineWidth=c*t.lineWidth*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.elasticScale,e.strokeStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.outlineHoverColorRGBAString,e.beginPath(),e.moveTo(n,i),e.quadraticCurveTo(a,o,r,s),e.stroke()}},{key:"CurveBezier",value:function(e,t,n,i,a,o,r,s,c,l,p,u){e.lineWidth=t.lineWidth,this.shape.draw.renderer.needFocus&&!p?(e.fillStyle=t.colorFillHover,e.strokeStyle=t.colorInterpolatedString):(e.fillStyle=t.colorFill,e.strokeStyle=t.colorInterpolatedString),u&&(e.fillStyle=t.colorFill,e.strokeStyle=t.colorInterpolatedString),e.beginPath(),e.moveTo(n,i),e.bezierCurveTo(a,o,r,s,c,l),e.stroke()}},{key:"CurveBezierClose",value:function(e,t,n,i,a,o,r,s,c,l){e.lineWidth=t.lineWidth,e.strokeStyle=t.colorInterpolatedString,e.beginPath(),e.moveTo(n,i),e.bezierCurveTo(a,o,r,s,c,l),e.stroke()}},{key:"CurveBezierHoverPolyline",value:function(e,t,n,i,a,o,r,s,c,l,p){arguments.length>11&&void 0!==arguments[11]&&arguments[11];e.lineWidth=p*t.lineWidth*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.elasticScale,e.strokeStyle=t.colorInterpolatedString,e.beginPath(),e.moveTo(n,i),e.bezierCurveTo(a,o,r,s,c,l),e.stroke()}},{key:"CurveBezierClosed",value:function(e,t,n,i,a,o,r,s,c,l,p,u){e.lineWidth=t.lineWidth,this.shape.draw.renderer.needFocus&&!p?(e.fillStyle=t.colorFillHover,e.strokeStyle=t.colorInterpolatedString):(e.fillStyle=t.colorFill,e.strokeStyle=t.colorInterpolatedString),u&&(e.fillStyle=t.colorFill,e.strokeStyle=t.colorInterpolatedString),e.beginPath(),e.moveTo(n,i),e.bezierCurveTo(a,o,r,s,c,l),e.stroke()}},{key:"CurveBezierClosedHoverPolygon",value:function(e,t,n,i,a,o,r,s,c,l,p){e.lineWidth=p*t.lineWidth*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.elasticScale,e.strokeStyle=t.colorInterpolatedString,e.beginPath(),e.moveTo(n,i),e.bezierCurveTo(a,o,r,s,c,l),e.stroke()}},{key:"CurveBezierClosedFill",value:function(e,t,n,i,a,o,r,s,c,l){e.strokeStyle=t.colorInterpolatedString,e.lineWidth=t.lineWidth,e.bezierCurveTo(a,o,r,s,c,l)}},{key:"CurveBezierFill",value:function(e,t,n){}},{key:"CurveQuadraticHoverPolyline",value:function(e,t,n,i,a,o,r,s,c){e.lineWidth=c*t.lineWidth*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.elasticScale,e.strokeStyle=t.colorInterpolatedString,e.beginPath(),e.moveTo(n,i),e.quadraticCurveTo(a,o,r,s),e.stroke()}},{key:"CurveQuadraticVecOthers",value:function(e,t,n,i){arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]&&arguments[6],!(arguments.length>7&&void 0!==arguments[7])||arguments[7];for(var a=0;a<n.length;++a)this.shape.node.Node(e,t,n[a].x,n[a].y,i)}},{key:"DrawControlLine",value:function(e,t,n,i,a,o){e.lineWidth=1,this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.isDarkBG,e.strokeStyle=t.colorStroke,e.beginPath(),e.moveTo(n,i),e.lineTo(a,o),e.closePath(),e.stroke(),e.restore()}}]),e}(),Xr=function e(t){Object(o.a)(this,e),Object(u.a)(this,"DrawingPresetClustering",(function(e,t,n,i,a,o){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=t[0].styleComponent.renderStyle.colorFillHover.split(","),c="rgba(".concat(+s[0].split("(")[1],", ").concat(+s[1],", ").concat(+s[2],", ").concat((+s[3].split(")")[0]-.1)*r,")"),l=t[0].styleComponent.renderStyle.colorInterpolatedString;if(o)for(var p=0;p<t.length;++p)e.lineWidth=.6,e.strokeStyle=t[0].styleComponent.renderStyle.colorFill,e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(t[p].vec.x,t[p].vec.y),e.closePath(),e.stroke(),e.lineWidth=1,e.strokeStyle="rgba(255, 255, 255, 1)",e.fillStyle=t[0].styleComponent.renderStyle.colorFill,e.beginPath(),e.arc(t[p].vec.x,t[p].vec.y,4,0,2*Math.PI),e.closePath(),e.fill(),e.stroke();o?(e.fillStyle=t[0].styleComponent.renderStyle.colorFill,e.beginPath(),e.arc(n.x,n.y,1.5,0,2*Math.PI),e.closePath(),e.fill()):(e.beginPath(),e.arc(n.x,n.y,a,0,2*Math.PI),e.closePath(),e.fillStyle=c,e.fill(),e.beginPath(),e.arc(n.x,n.y,i,0,2*Math.PI),e.closePath(),e.fillStyle=l,e.fill(),e.fillStyle="rgba(255, 255, 255, 1)",e.font="bold 11px Arial",e.textAlign="center",e.fillText("".concat(t.length),n.x,n.y+4))})),this.shape=t},Jr=function(){function e(t){Object(o.a)(this,e),this.shape=t}return Object(r.a)(e,[{key:"SelectionLasso",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e.globalCompositeOperation=Gt.a.COLOR_DODGE,e.lineWidth=1,e.lineDashOffset=-n;var i=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.selection.strokeStyleFirstArray;e.strokeStyle="rgba(".concat(i[0],", ").concat(i[1],", ").concat(i[2],", 0.9)"),i=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.selection.fillStyleFirstArray,e.fillStyle="rgba(".concat(i[0],", ").concat(i[1],", ").concat(i[2],", 0.3)"),e.setLineDash([4,4]),e.beginPath(),e.setLineDash([5,4]),e.moveTo(t[0].x,t[0].y);for(var a=1;a<t.length;++a)e.lineTo(t[a].x,t[a].y);e.closePath(),e.fill(),e.stroke(),e.setLineDash([]),e.globalCompositeOperation=Gt.a.SOURCE_OVER}},{key:"Selection",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;e.globalCompositeOperation=Gt.a.COLOR_DODGE,e.lineWidth=1,e.lineDashOffset=-a;var o=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.selection.strokeStyleFirstArray;e.strokeStyle="rgba(".concat(o[0],", ").concat(o[1],", ").concat(o[2],", 0.9)"),o=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.selection.fillStyleFirstArray,e.fillStyle="rgba(".concat(o[0],", ").concat(o[1],", ").concat(o[2],", 0.3)"),i?e.setLineDash([4,4]):e.setLineDash([5,4]),e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x,n.y),e.lineTo(n.x,n.y),e.lineTo(n.x,t.y),e.closePath(),e.fill(),e.stroke(),e.setLineDash([]),e.globalCompositeOperation=Gt.a.SOURCE_OVER}}]),e}(),Zr=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"index",0),this.shape=t}return Object(r.a)(e,[{key:"FreeHandbyVecs",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(e.globalCompositeOperation=Gt.a.SCREEN,e.fillStyle=t.colorFill,e.strokeStyle=t.colorStroke,e.lineWidth=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.freehand.lineWidth,e.beginPath(),e.moveTo(n[0].x,n[0].y),this.index=1;this.index<n.length;++this.index)e.lineTo(n[this.index].x,n[this.index].y);for(e.stroke(),i&&e.fill(),this.index=0;this.index<n.length;++this.index)e.beginPath(),e.arc(n[this.index].x,n[this.index].y,1,0,2*Math.PI,!1),e.closePath(),e.stroke();e.globalCompositeOperation=Gt.a.SOURCE_OVER}}]),e}(),qr=function(){function e(t){Object(o.a)(this,e),this.shape=t}return Object(r.a)(e,[{key:"PointNumberedDragByCircle",value:function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=(arguments.length>7&&arguments[7],arguments.length>8&&arguments[8],arguments.length>9?arguments[9]:void 0),c=arguments.length>10?arguments[10]:void 0,l=arguments.length>11?arguments[11]:void 0,p=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.height;this.shape.draw.renderer.hasAni||(o=!1,a=1);var u=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.pointBoundOffset;if(o?u*=a:u-=u*a,i-=1.8*u,e.strokeStyle=t.colorStroke,e.fillStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.outlineHoverColorRGBAString,r){var d=2.5*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.scale*u;d<0&&(d=0)}this.shape.draw.renderer.needFocus,e.fillStyle=t.colorInterpolatedString,l&&(e.fillStyle=t.colorInterpolatedString),e.beginPath(),e.arc(n,i-.5*p+2,.5*p,0,2*Math.PI),e.closePath(),e.fill();var h="".concat(12,"px ",this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.fontFamily);e.font=h;var m=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.fontColorArray;e.fillStyle=c||l?"rgba(".concat(m[0],", ").concat(m[1],", ").concat(m[2],", ").concat(m[3],")"):"rgba(".concat(m[0],", ").concat(m[1],", ").concat(m[2],", ").concat(m[3]-.3,")"),e.textAlign="center",e.fillText(s.toString(),n,i-.5*p+7)}},{key:"PointNumberedOverBoundingByCircle",value:function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=(arguments.length>7&&arguments[7],arguments.length>8&&arguments[8],this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.height),c=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.pointBoundOffset;if(o?c*=a:c-=c*a,e.fillStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.outlineHoverColorRGBAString,r){var l=.5*s+.75*a*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.elasticScale;l<0&&(l=0),e.beginPath(),e.arc(n,i-.5*s+2,l+1.5,0,2*Math.PI,!1),e.closePath(),e.fill()}}},{key:"PointNumberedOverBoundingByCircleSelected",value:function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=(arguments.length>7&&arguments[7],arguments.length>8&&arguments[8],this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.height),c=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.pointBoundOffset;if(o?c*=a:c-=c*a,e.fillStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.outlineHoverColorRGBAString,r){var l=.5*s+.75*a*this.shape.draw.renderer.annotationInstance.customization.themeCurrent.properties.elasticScale;l<0&&(l=0),e.beginPath(),e.arc(n,i-.5*s+2,l+1.5,0,2*Math.PI,!1),e.closePath(),e.fill(),e.strokeStyle=t.colorFill,e.lineWidth=2.5,e.beginPath(),e.arc(n,i-.5*s+2,l+2.5,0,2*Math.PI,!1),e.closePath(),e.stroke()}}},{key:"ShadowNPoint",value:function(e,t,n,i,a,o){this.shape.draw.renderer.annotationInstance.implementations.app.model.appCoreWrapper.browserUtility.type!==g.d.SAFARI&&this.shape.draw.renderer.annotationInstance.implementations.app.model.appCoreWrapper.browserUtility.type!==g.d.EDGE&&(e.beginPath(),e.ellipse(n,i+5,10,2.5,0,0,2*Math.PI,!1),e.closePath(),e.fillStyle=a||o?this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.shadowColorHover:this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.shadowColor,e.filter="blur(".concat(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.shadowBlur,"px)"),e.fill(),e.filter="none")}},{key:"ShadowNPointLight",value:function(e,t,n,i,a,o){this.shape.draw.renderer.annotationInstance.implementations.app.model.appCoreWrapper.browserUtility.type!==g.d.SAFARI&&this.shape.draw.renderer.annotationInstance.implementations.app.model.appCoreWrapper.browserUtility.type!==g.d.EDGE&&(e.beginPath(),e.ellipse(n,i+5,10,2.5,0,0,2*Math.PI,!1),e.closePath(),e.fillStyle=this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.shadowColor,e.filter="blur(".concat(this.shape.draw.renderer.annotationInstance.customization.themeCurrent.nPoint.shadowBlur,"px)"),e.fill(),e.filter="none")}}]),e}(),Qr=function e(t){Object(o.a)(this,e),this.draw=t,this.point=new Wr(this),this.node=new Vr(this),this.cluster=new Xr(this),this.line=new Fr(this),this.ngon=new Ur(this),this.area=new zr(this),this.text=new Yr(this),this.curve=new Kr(this),this.selection=new Jr(this),this.freeHand=new Zr(this),this.guidedTour=new qr(this),this.snapping=new Hr(this)},$r=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"listBase64",new Map),Object(u.a)(this,"activeBase64ID",""),this.draw=t}return Object(r.a)(e,[{key:"AddBase64",value:function(e,t){this.listBase64.has(e)||(this.listBase64.set(e,t),this.draw.renderer.annotationInstance.io.eventListenerAnnotation.AddBase64Stack(e,t))}},{key:"RemoveBase64",value:function(e){}},{key:"ActiveBase64",value:function(e){this.listBase64.has(e)&&(this.activeBase64ID=e,this.draw.renderer.annotationInstance.activeCommandController.activeBase64img=this.listBase64.get(e),this.draw.renderer.annotationInstance.io.eventListenerAnnotation.SelectBase64(e))}},{key:"ToJSON",value:function(){}}]),e}(),es=function(){function e(t){Object(o.a)(this,e),this.draw=t}return Object(r.a)(e,[{key:"PolygonOffScreenByVecs",value:function(e,t){this.offScreenCtx.fillStyle=e,this.offScreenCtx.beginPath(),this.offScreenCtx.moveTo(t[0].x,t[0].y);for(var n=1;n<t.length;++n)this.offScreenCtx.lineTo(t[n].x,t[n].y);this.offScreenCtx.closePath(),this.offScreenCtx.fill()}},{key:"PolygonOffScreenByVecsOfVecs",value:function(e,t){for(var n=0;n<t.length;++n)this.PolygonOffScreenByVecs(e,t[n])}}]),e}(),ts=function(){function e(t){Object(o.a)(this,e),this.renderer=t,this.Init()}return Object(r.a)(e,[{key:"Init",value:function(){this.shape=new Qr(this),this.image=new $r(this),this.featurePreset=new es(this)}}]),e}(),ns=function(){function e(t){Object(o.a)(this,e),this.renderer=t,this.canvas=document.createElement("canvas"),this.canvas.style.background="#000000",this.canvas.style.position="absolute";var n=this.canvas.getContext("2d");n&&(this.ctxTemp=n)}return Object(r.a)(e,[{key:"GetImgDataFromHTMLImg",value:function(e,t){e.crossOrigin="anonymous",this.ctxTemp.drawImage(e,50,50)}},{key:"GetImgDataFromSVG",value:function(e,t){}},{key:"EllipseOffScreen",value:function(e,t,n,i,a,o,r,s){arguments.length>8&&void 0!==arguments[8]&&arguments[8];e.beginPath(),e.ellipse(i,a,o,r,0,0,2*Math.PI,!1),e.closePath(),e.fillStyle=n,s&&e.fill(),this.PolygonEndOffScreen(e,t,n)}},{key:"PolygonEndOffScreen",value:function(e,t,n){e.lineWidth=t.lineWidth,e.strokeStyle=n,e.stroke()}},{key:"RectangleOffScreen",value:function(e,t,n){e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;++i)e.lineTo(n[i].x,n[i].y);e.fillStyle=t,e.closePath(),e.fill()}},{key:"CurveQuadraticArrowOffScreen",value:function(e,t,n,i,a,o,r,s,c){e.lineWidth=t.lineWidth+10,e.strokeStyle=n,e.beginPath(),e.moveTo(i,a),e.quadraticCurveTo(o,r,s,c),e.stroke(),e.closePath()}},{key:"CurveBezierOffScreen",value:function(e,t,n,i,a,o,r,s,c,l,p){e.lineWidth=t.lineWidth+10,e.strokeStyle=n,e.beginPath(),e.moveTo(i,a),e.bezierCurveTo(o,r,s,c,l,p),e.stroke(),e.closePath()}},{key:"PolygonOffScreen",value:function(e,t,n){e.fillStyle=t,e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;++i)e.lineTo(n[i].x,n[i].y);e.closePath(),e.fill()}},{key:"PolygonOffScreenByVecs",value:function(e,t,n){e.fillStyle=t,e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;++i)e.lineTo(n[i].x,n[i].y);e.closePath(),e.fill()}},{key:"PolygonOffScreenByVecsOfVecs",value:function(e,t,n){for(var i=1;i<n.length;++i)this.PolygonOffScreenByVecs(e,t,n[i])}},{key:"RPointOffscreen",value:function(e,t,n,i){var a=n.x-.5*this.renderer.annotationInstance.customization.themeCurrent.rPoint.width,o=n.y-this.renderer.annotationInstance.customization.themeCurrent.rPoint.height;e.beginPath(),e.fillStyle=t,e.rect(a+(.5*this.renderer.annotationInstance.customization.themeCurrent.rPoint.width-.5*this.renderer.annotationInstance.customization.themeCurrent.rPoint.width*i),o+(this.renderer.annotationInstance.customization.themeCurrent.rPoint.height-this.renderer.annotationInstance.customization.themeCurrent.rPoint.height*i),this.renderer.annotationInstance.customization.themeCurrent.rPoint.width*i,this.renderer.annotationInstance.customization.themeCurrent.rPoint.height*i),e.closePath(),e.fill()}},{key:"PointRegularDragOffscreen",value:function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(this.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG){var r=this.renderer.annotationInstance.customization.themeCurrent.properties.pointBoundOffset;o?r*=a:r-=r*a;var s=!1;s?this.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG&&(e.save(),e.translate(n-.25*this.renderer.annotationInstance.customization.themeCurrent.rPoint.width,i-this.renderer.annotationInstance.customization.themeCurrent.rPoint.height),e.fillStyle=t,e.fill(this.renderer.annotationInstance.customization.themeCurrent.rPoint.SVG.path2d,"nonzero"),e.restore()):(e.beginPath(),e.fillStyle=t,e.rect(n,i,this.renderer.annotationInstance.customization.themeCurrent.rPoint.width,this.renderer.annotationInstance.customization.themeCurrent.rPoint.height),e.closePath(),e.fill())}}}]),e}(),is=function(){function e(t){Object(o.a)(this,e),this.host=t}return Object(r.a)(e,[{key:"RenderPost",value:function(e){if(!this.host.scene.capture||!this.host.scene.capture.isGhost){if(this.host.stopRender)return this.host.tInit=0,this.host.tLeave=0,this.host.t=0,void(this.host.isActive=!1);if(this.host.v.x=.5*e.canvas.width,this.host.v.y=e.canvas.height-50,e.lineWidth=2,e.fillStyle="rgba(0,0,0,0.5)",e.strokeStyle="#ffffff",0<this.host.tInit&&this.host.tInit<1){var t=this.host.scene.annotationInstance.renderer.numericalMotion.easeOutElastic2(this.host.t);if(0<this.host.t){e.beginPath(),e.arc(this.host.v.x,this.host.v.y,t*this.host.radius,0,12.56636),e.closePath(),e.fill(),e.stroke();var n=t*this.host.sizeTrash;e.drawImage(this.host.imgTrash,this.host.v.x-.5*n,this.host.v.y-.5*n,n,n),this.host.isShow=!0}else this.host.isShow=!1;this.host.t+=.005}else if(0<this.host.tLeave&&this.host.tLeave<1){var i=this.host.scene.annotationInstance.renderer.numericalMotion.EaseInElastic(this.host.tLeave),a=this.host.radius-i*this.host.radius;if(0<a){if(this.host.isShow){e.beginPath(),e.arc(this.host.v.x,this.host.v.y,a,0,12.56636),e.closePath(),e.fill(),e.stroke();var o=this.host.sizeTrash-i*this.host.sizeTrash;e.drawImage(this.host.imgTrash,this.host.v.x-.5*o,this.host.v.y-.5*o,o,o),this.host.t=-.2,i<.5&&this.host.RemoveGeo()}.2<this.host.tLeave&&(this.host.isShow=!1,this.host.exceptionByLeaderline=!1)}}}}}]),e}(),as=function(){function e(t){Object(o.a)(this,e),this.host=t}return Object(r.a)(e,[{key:"UpdateTime",value:function(){if(this.host.scene.annotationInstance.activeCommandController.acProperties.isDragging){if(void 0===this.host.scene.Capture)this.host.tInit=-1.01;else{if(this.host.scene.Capture.type===g.j.APOINT||this.host.scene.Capture.type===g.j.AMIDPOINT||this.host.scene.Capture.type===g.j.ANODE)return void(this.host.isActive=!1);if(this.host.scene.Capture.type===g.j.POLYGON_GRAPH)if(this.host.scene.Capture.isSelectedNode)return void(this.host.isActive=!1);this.host.isActive=!0,this.host.tInit=.01}this.host.exceptionByLeaderline?this.host.tLeave+=.0025:this.host.tLeave=0}else this.host.stopRender||!this.host.scene.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.enablePan?this.host.tInit+=.015:this.host.tInit=1.1;this.host.scene.Capture&&this.host.scene.annotationInstance.activeCommandController.acProperties.isUp&&(this.host.tLeave+=.0025)}}]),e}(),os=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"isActive",!1),Object(u.a)(this,"radius",24),Object(u.a)(this,"t",0),Object(u.a)(this,"tInit",0),Object(u.a)(this,"tLeave",0),Object(u.a)(this,"needRender",!1),Object(u.a)(this,"hasCapture",!1),Object(u.a)(this,"isUp",!1),Object(u.a)(this,"isShow",!1),Object(u.a)(this,"hover",!1),Object(u.a)(this,"hoverPre",!1),Object(u.a)(this,"distanceForDetection",120),Object(u.a)(this,"sizeTrash",24),Object(u.a)(this,"stopRender",!1),Object(u.a)(this,"exceptionByLeaderline",!1),Object(u.a)(this,"removeForce",!0),this.scene=t,this.removeForce=!0,this.renderer=new is(this),this.timer=new as(this),this.v=new Oe(0,0),this.imgTrash=new Image,this.imgTrash.src="".concat(this.scene.annotationInstance.implementations.app.CONFIG.config.BASE_URL,"/static/images/xg-theme-assets/common/trash-32-f.svg")}return Object(r.a)(e,[{key:"UpdateTime",value:function(){this.timer.UpdateTime()}},{key:"Render",value:function(e){this.UpdateTime(),this.IsInside(),this.isActive&&this.renderer.RenderPost(e)}},{key:"IsInside",value:function(){this.isActive&&(Q([this.v.x,this.v.y,this.v.z],[this.scene.annotationInstance.activeCommandController.m.x,this.scene.annotationInstance.activeCommandController.m.y,0])<this.distanceForDetection?(this.radius=35,this.sizeTrash=35,this.hover=!0,this.hoverPre!==this.hover&&(this.hoverPre=this.hover,this.t=.3)):(this.radius=24,this.sizeTrash=24,this.hover=!1,this.hoverPre!==this.hover&&(this.hoverPre=this.hover,this.t=0)))}},{key:"RemoveSelectedShapesByBlackhole",value:function(e){if(!this.scene.capture||!this.scene.capture.isGhost){for(var t=this.scene.annotationInstance.scene.geometryList.length,n=[];t--;){var i=this.scene.annotationInstance.scene.geometryList[t];if(i.IsSelected||i.isHover||i.isCaptured){if(i.isUnderConstruction)continue;if(i.type===g.j.TEXT_LEADERLINE){var a=i;if(a.leaderline)if(Z(a.leaderline.v2,this.v)<42){a.RemoveLeaderline();for(var o=[],r=0;r<e.length;++r)e[r].id!==a.id&&o.push(e[r]);e=o}else n.push(i);else n.push(i)}else n.push(i)}}for(var s=0;s<n.length;++s)n[s].Remove(!1);e.length>0&&this.scene.annotationInstance.io.eventListenerAnnotation.RemoveGeometryStack(e)}}},{key:"RemoveGeo",value:function(){if((!this.scene.capture||!this.scene.capture.isGhost)&&this.hover&&this.scene.Capture&&this.scene.annotationInstance.activeCommandController.acProperties.isUp){switch(this.scene.Capture.type){case g.j.TEXT_LEADERLINE:var e=this.scene.Capture;if(e.leaderline&&e.leaderline.IsMouseInside(this.scene.annotationInstance.activeCommandController.m.x,this.scene.annotationInstance.activeCommandController.m.y))return Z(this.v,e.leaderline.v2)<42&&e.RemoveLeaderline(),this.scene.Capture=void 0,this.tInit=-1.01,this.tLeave=.01,this.scene.annotationInstance.activeCommandController.acProperties.isDragging=!0,void(this.exceptionByLeaderline=!0);this.removeForce&&(this.scene.Capture=void 0,this.stopRender=!0);break;default:this.removeForce&&(this.scene.Capture=void 0,this.stopRender=!0)}var t=this.scene.geometryList.length;if(0!==t)for(;t--;)this.scene.geometryList[t]&&!0===this.scene.geometryList[t].IsSelected&&this.removeForce&&(this.scene.Capture=void 0,this.stopRender=!0)}}}]),e}();function rs(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return ss(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ss(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function ss(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var cs=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"isHover",!1),Object(u.a)(this,"_ghostSnappingVec",void 0),this.objectSnapping=t,this.t=0,this.tOver=0,this.tOverPopupSummary=0,this.tDown1=0,this.tDown2=0,this.tUp=0}return Object(r.a)(e,[{key:"UpdateGhostSnappingVec",value:function(e){this._ghostSnappingVec=e||void 0}},{key:"Render",value:function(e){this._ghostSnappingVec?(this.tOver+=.015,this.objectSnapping.renderer.draw.shape.snapping.CircleBG(e,this._ghostSnappingVec.x,this._ghostSnappingVec.y,this.objectSnapping.toleranceSnapping,this.objectSnapping.renderer.numericalMotion.easeOutElastic2(this.tOver)),this.RenderGhostGeo(e)):this.tOver=0}},{key:"RenderGhostGeo",value:function(e){if(this.objectSnapping.renderer.annotationInstance.scene.capture&&this._ghostSnappingVec){if(this.objectSnapping.renderer.annotationInstance.scene.capture.type===g.j.POINT_REGULAR){var t=this.objectSnapping.renderer.annotationInstance.scene.capture;return void this.objectSnapping.renderer.draw.shape.point.PointRegularDragGhost(e,t.styleComponent.renderStyle,this._ghostSnappingVec.x+6,this._ghostSnappingVec.y,1,!1,!1,!1,.5,!1)}if(this.objectSnapping.renderer.annotationInstance.scene.capture.type===g.j.POINT_NUMBERED){var n=this.objectSnapping.renderer.annotationInstance.scene.capture;return void this.objectSnapping.renderer.draw.shape.point.PointNumberedDragByCircleGhost(e,n.styleComponent.renderStyle,this._ghostSnappingVec.x,this._ghostSnappingVec.y,1,!1,!1,!1,.5,0,!1,!1)}if(this.objectSnapping.renderer.annotationInstance.scene.capture.type===g.j.ANODE||this.objectSnapping.renderer.annotationInstance.scene.capture.type===g.j.AMIDPOINT){var i=this.objectSnapping.renderer.annotationInstance.scene.capture;if(i.aEdges[0]&&i.aEdges[0].pGraph.type===g.j.POLYLINE_BENDING){var a=i.aEdges[0].pGraph,o=this.GetVecFromAPolylineGraph(a);return void this.objectSnapping.renderer.draw.shape.line.PolylineByVecGhost(e,a.styleComponent.renderStyle,o,!1,!1,.5)}if(i.edges[0]&&i.edges[0].type===g.j.ARROW_DOUBLE||i.edges[0].type===g.j.ARROW_SINGLE){var r=i.edges[0],s=this.GetVecFromArrow(r),c=this.ComputeVertex(s),l=this.ComputeWeight(r.GetVecs(),.5),p=this.ComputeControlPoint(c,l);return void this.DrawSpline(e,r.GetVecs(),c,p,r)}}else{if(this.objectSnapping.renderer.annotationInstance.scene.capture.type===g.j.POLYGON_GRAPH){var u=this.objectSnapping.renderer.annotationInstance.scene.capture,d=this.GetVecFromAPolygonGraph(u);return void this.objectSnapping.renderer.draw.shape.area.PolygonByVecGhost(e,u.styleComponent.renderStyle,d,!1,!1,.1)}if(this.objectSnapping.renderer.annotationInstance.scene.capture.type===g.j.TEXT_LEADERLINE){var h=this.objectSnapping.renderer.annotationInstance.scene.capture;if(h.leaderline&&h.IsSelectedReaderline){var m=new Oe(h.leaderline.v1Render.x,this._ghostSnappingVec.y),f=this._ghostSnappingVec;this.objectSnapping.renderer.draw.shape.text.RenderLeaderLine(e,h.styleComponent,h.vecOffset,m,f,h.renderer.t,h.leaderline.isUpperDia,h.leaderline.isHover,h.isSelected)}return}}}}},{key:"GetVecFromAPolylineGraph",value:function(e){var t=e.GetVecs(),n=[];if(this._ghostSnappingVec)for(var i=0;i<t.length;++i)Z(t[i],this._ghostSnappingVec)<this.objectSnapping.toleranceSnapping?n.push(this._ghostSnappingVec):n.push(t[i]);return n}},{key:"GetVecFromAPolygonGraph",value:function(e){var t=e.GetVecs(),n=[];if(this._ghostSnappingVec)for(var i=0;i<t.length;++i)Z(t[i],this._ghostSnappingVec)<this.objectSnapping.toleranceSnapping?n.push(this._ghostSnappingVec):n.push(t[i]);return n}},{key:"GetVecFromArrow",value:function(e){var t=e.GetVecs(),n=[];if(this._ghostSnappingVec)for(var i=0;i<t.length;++i)Z(t[i],this._ghostSnappingVec)<this.objectSnapping.toleranceSnapping?n.push(this._ghostSnappingVec):n.push(t[i]);return n}},{key:"ComputeVertex",value:function(e){var t,n=[],i=rs(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.push(a.x,a.y)}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"ComputeWeight",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],i=0;i<e.length;++i)n.push(t);return n}},{key:"ComputeControlPoint",value:function(e,t){for(var n=Object(i.a)(e),a=[],o=0;o<n.length-4;o+=2)a=a.concat($i.GetControlPoints(n[o],n[o+1],n[o+2],n[o+3],n[o+4],n[o+5],t[o]));return a}},{key:"DrawSpline",value:function(e,t,n,i,a){var o=n,r=i,s=o.length,c=t,l=this.objectSnapping.renderer.draw.shape.curve;l.CurveQuadraticArrow(e,a.styleComponent.renderStyle,o[0],o[1],r[0],r[1],o[2],o[3],!0,c,!1,.5,this.objectSnapping.renderer.numericalMotion.easeOutElastic2(this.tOver),!1,a.styleComponent.state.themeColorId,!1),l.CurveQuadraticArrow(e,a.styleComponent.renderStyle,o[s-2],o[s-1],r[2*s-10],r[2*s-9],o[s-4],o[s-3],!0,c,!1,.5,this.objectSnapping.renderer.numericalMotion.easeOutElastic2(this.tOver),!1,a.styleComponent.state.themeColorId,!1),l.CArrowByTranslation(e,a.styleComponent.renderStyle,new Oe(o[4],o[5]),new Oe(r[2],r[3]),o[4],o[5],a.arrowScale,a.scaleForRender,a.isHover,a.isGrayColor,a.visibility,1,a.isSelected,a.styleComponent.state.themeColorId),a.type===g.j.ARROW_DOUBLE&&l.CArrowByTranslation(e,a.styleComponent.renderStyle,new Oe(o[0],o[1]),new Oe(r[0],r[1]),o[0],o[1],a.arrowScale,a.scaleForRender,!1,a.isGrayColor,a.visibility,1,a.isSelected,a.styleComponent.state.themeColorId)}}]),e}(),ls=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"toleranceSnapping",19),Object(u.a)(this,"_frame",0),this.renderer=t,this.aGhostSnapping=new cs(this)}return Object(r.a)(e,[{key:"UpdateGhostSnappingVec",value:function(e){this.aGhostSnapping.UpdateGhostSnappingVec(e)}},{key:"Render",value:function(e){this.aGhostSnapping.Render(e)}},{key:"AutoSnappingTracker",value:function(e){if(this._frame++%10===0){if(this.renderer.annotationInstance.interactionMode!==g.k.DRAWING)return!1;var t=this.renderer.annotationInstance.scene.capture;if(!e||!this.renderer.annotationInstance.activeCommandController.acProperties.isActivateSnapping)return;if(t&&(t.type===g.j.ARROW_SINGLE||t.type===g.j.ARROW_DOUBLE))return!1;if(t.type===g.j.TEXT_LEADERLINE){var n=t;if(!n.IsSelectedReaderline)return!1;if(void 0===n.leaderline)return!1}if(this.renderer.annotationInstance.scene.capture&&this.renderer.annotationInstance.scene.capture.type===g.j.POLYGON_GRAPH){var i=this.renderer.annotationInstance.scene.capture.GetVecForSnapping();i&&(e=i)}for(var a=this.toleranceSnapping,o=-1,r=this.renderer.annotationInstance.scene.listBasePoint.length;r--;)if(this.renderer.annotationInstance.scene.listBasePoint[r].vec.x&&t!==this.renderer.annotationInstance.scene.listBasePoint[r]){if(this.renderer.annotationInstance.scene.listBasePoint[r].isCollapse)continue;if(this.IsAllowMidNodePolylineBending(r))continue;var s=Z(this.renderer.annotationInstance.scene.listBasePoint[r].vec,e);s<a&&(a=s,o=r)}if(-1===o)for(var c=0;c<this.renderer.annotationInstance.scene.listAPolygonGraphWrapper.length;++c){var l=this.renderer.annotationInstance.scene.listAPolygonGraphWrapper[c];if(l!==t){var p=l.FindClosestVec(e);if(p&&Z(p,e)<this.toleranceSnapping){var u=new Oe(p.x,p.y);return void this.UpdateGhostSnappingVec(u)}}this.UpdateGhostSnappingVec(void 0)}if(this.IsSnappingItself(o))return;if(!this.IsAllowSnappingPointToPoint(o))return;if(!this.IsAllowSnappingNodeToNodeInSameShape(o))return;if(a<this.toleranceSnapping&&this.renderer.annotationInstance.scene.listBasePoint[o].vec.x){var d=this.renderer.annotationInstance.scene.listBasePoint[o].vec.x,h=this.renderer.annotationInstance.scene.listBasePoint[o].vec.y,m=new Oe(d,h);this.UpdateGhostSnappingVec(m)}else this.UpdateGhostSnappingVec(void 0)}}},{key:"AutoSnapping",value:function(e){if(this.renderer.annotationInstance.interactionMode!==g.k.DRAWING)return!1;var t=this.renderer.annotationInstance.scene.capture;if(!e||!this.renderer.annotationInstance.activeCommandController.acProperties.isActivateSnapping)return!1;if(t&&(t.type===g.j.ARROW_SINGLE||t.type===g.j.ARROW_DOUBLE))return!1;if(t&&t.type===g.j.TEXT_LEADERLINE&&void 0===t.leaderline)return!1;if(this.renderer.annotationInstance.scene.capture&&this.renderer.annotationInstance.scene.capture.type===g.j.POLYGON_GRAPH){var n=this.renderer.annotationInstance.scene.capture.GetVecForSnapping();n&&(e=n)}for(var i=this.toleranceSnapping,a=-1,o=this.renderer.annotationInstance.scene.listBasePoint.length;o--;)if(this.renderer.annotationInstance.scene.listBasePoint[o].vec.x&&t!==this.renderer.annotationInstance.scene.listBasePoint[o]){if(this.renderer.annotationInstance.scene.listBasePoint[o].isCollapse)continue;if(this.IsAllowMidNodePolylineBending(o))continue;var r=Z(this.renderer.annotationInstance.scene.listBasePoint[o].vec,e);r<i&&(i=r,a=o)}if(-1===a){for(var s=!1,c=0;c<this.renderer.annotationInstance.scene.listAPolygonGraphWrapper.length;++c){var l=this.renderer.annotationInstance.scene.listAPolygonGraphWrapper[c];if(l!==t){var p=l.FindClosestVec(e);if(p&&Z(p,e)<this.toleranceSnapping){e.x=p.x,e.y=p.y,e.long=p.long,e.lat=p.lat,e.proX=p.proX,e.proY=p.proY,s=!0,l.UpdatePostTransformation();var u=t;u&&u.aEdges&&u.aEdges[0]&&u.aEdges[0].pGraph.UpdatePostTransformation()}}l.graphCore.selVec=void 0,l.graphCore.selectedVec=void 0,l.graphCore.selVecForTextLeaderline=void 0,l.graphCore.selMidVec=void 0}if(s)return!0}if(!this.IsSnappingItself(a)){if(!this.IsAllowSnappingPointToPoint(a))return!1;if(!this.IsAllowSnappingNodeToNodeInSameShape(a))return!1;if(i<this.toleranceSnapping&&this.renderer.annotationInstance.scene.listBasePoint[a].vec.x){var d=this.renderer.annotationInstance.scene.listBasePoint[a].vec.x-e.x,h=this.renderer.annotationInstance.scene.listBasePoint[a].vec.y-e.y;if(t&&t.type===g.j.TEXT_LEADERLINE){var m=t;m.widthOffset-=d,m.heightOffset-=h}e.x=this.renderer.annotationInstance.scene.listBasePoint[a].vec.x,e.y=this.renderer.annotationInstance.scene.listBasePoint[a].vec.y,e.long=this.renderer.annotationInstance.scene.listBasePoint[a].vec.long,e.lat=this.renderer.annotationInstance.scene.listBasePoint[a].vec.lat,e.proX=this.renderer.annotationInstance.scene.listBasePoint[a].vec.proX,e.proY=this.renderer.annotationInstance.scene.listBasePoint[a].vec.proY;var f=t;return f&&f.aEdges&&f.aEdges[0]&&f.aEdges[0].pGraph.UpdatePostTransformation(),!0}return!1}}},{key:"IsSnappingItself",value:function(e){var t=this.renderer.annotationInstance.scene.capture,n=this.renderer.annotationInstance.scene.listBasePoint[e];return!!(t&&n&&(t.type===g.j.ANODE||t.type===g.j.AMIDPOINT)&&(n.type===g.j.ANODE||n.type===g.j.AMIDPOINT)&&t.edges.length>0&&n.edges.length>0&&t.edges[0]===n.edges[0])}},{key:"IsAllowSnappingPointToPoint",value:function(e){return!this.renderer.annotationInstance.scene.capture||this.renderer.annotationInstance.scene.capture.type!==g.j.POINT_NUMBERED&&this.renderer.annotationInstance.scene.capture.type!==g.j.POINT_REGULAR||!this.renderer.annotationInstance.scene.listBasePoint[e]||this.renderer.annotationInstance.scene.listBasePoint[e]===this.renderer.annotationInstance.scene.capture||this.renderer.annotationInstance.scene.listBasePoint[e].type!==g.j.POINT_NUMBERED&&this.renderer.annotationInstance.scene.listBasePoint[e].type!==g.j.POINT_REGULAR}},{key:"IsAllowSnappingNodeToNodeInSameShape",value:function(e){if(this.renderer.annotationInstance.scene.capture&&(this.renderer.annotationInstance.scene.capture.type===g.j.ANODE||this.renderer.annotationInstance.scene.capture.type===g.j.AMIDPOINT)){var t=this.renderer.annotationInstance.scene.capture;if(t.edges[0]){for(var n=t.edges[0].GetVecs(),i=0;i<n.length;++i)if(this.renderer.annotationInstance.scene.listBasePoint[e]&&this.renderer.annotationInstance.scene.listBasePoint[e].vec===n[i])return!1}else if(t.aEdges[0])for(var a=t.aEdges[0].pGraph.GetVecs(),o=0;o<a.length;++o)if(this.renderer.annotationInstance.scene.listBasePoint[e]&&this.renderer.annotationInstance.scene.listBasePoint[e].vec===a[o])return!1}return!0}},{key:"IsAllowMidNodePolylineBending",value:function(e){if(this.renderer.annotationInstance.scene.listBasePoint[e].type===g.j.AMIDPOINT){var t=this.renderer.annotationInstance.scene.listBasePoint[e];if(t.aEdges[0]&&t.aEdges[0].pGraph.type===g.j.POLYLINE_BENDING)return!0}return!1}}]),e}();function ps(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var us=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(ps()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).host=e,t}return Object(r.a)(i,[{key:"RenderPost",value:function(e){this.timer.Update(),this.timer.UpdatePopupSummery()}}]),i}(Yt);function ds(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var hs=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(ds()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).renderStyle=new Bt,t.renderStyleNode=new Bt,t.UpdateStyle(),t}return Object(r.a)(i,[{key:"UpdateStyle",value:function(){Bt.UpdateRenderStyleRPoint(this.renderStyle,this.geo.scene.annotationInstance.customization.themeCurrent)}}]),i}(Vt);function ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function fs(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ys=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(fs()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e,t,a){var r;return Object(o.a)(this,i),r=n.call(this,e),Object(u.a)(Object(s.a)(r),"hasPT",!1),Object(u.a)(Object(s.a)(r),"hasPG",!1),r.ghostPopupOffset=0,r.InitComponent(),r.Update(t,a),r.isRenderable=!0,i.aGhost=Object(s.a)(r),r}return Object(r.a)(i,null,[{key:"Render",value:function(e){i.aGhost&&i.aGhost.Render(e)}},{key:"InitGhost",value:function(e,t,n){void 0!==i.aGhost?i.aGhost.Update(t,n):new i(e,t,n).Dummy()}},{key:"EnterGhost",value:function(e){i.aGhost&&(e[1]===g.j.POINT_REGULAR||e[1]===g.j.POINT_NUMBERED_TOUR?(i.aGhost.pt.visibility=1,i.aGhost.pgon&&(i.aGhost.pgon.visibility=.1)):e[1]===g.j.POLYGON_MULTIPLE&&(i.aGhost.pt.visibility=.5,i.aGhost.pgon&&(i.aGhost.pgon.visibility=.25)))}},{key:"LeaveGhost",value:function(e){i.aGhost&&(e[1]===g.j.POINT_REGULAR||e[1]===g.j.POINT_NUMBERED_TOUR?(i.aGhost.pt.visibility=.5,i.aGhost.pgon&&(i.aGhost.pgon.visibility=.1)):e[1]===g.j.POLYGON_MULTIPLE&&(i.aGhost.pt.visibility=.5,i.aGhost.pgon&&(i.aGhost.pgon.visibility=.1)))}},{key:"AddGhost",value:function(e){i.aGhost&&(e[1]===g.j.POINT_REGULAR||e[1]===g.j.POINT_NUMBERED_TOUR?(i.aGhost.pt.visibility=1,i.aGhost.pt.isGhost=!1,i.aGhost.pt.isMovable=!0,i.aGhost.HideGhostPopUp(),i.aGhost.pt.EmitAddStack(),i.aGhost.pgon&&i.aGhost.pgon.Remove(),i.aGhost.scene.RemoveGeometry(i.aGhost),i.aGhost=void 0):e[1]===g.j.POLYGON_MULTIPLE&&(i.aGhost.pgon&&(i.aGhost.pgon.visibility=.25,i.aGhost.pgon.isGhost=!1,i.aGhost.pgon.EmitAddStack()),i.aGhost.HideGhostPopUp(),i.aGhost.pt.Remove(),i.aGhost.scene.RemoveGeometry(i.aGhost),i.aGhost=void 0))}},{key:"RemoveGhost",value:function(){i.aGhost&&i.aGhost.Remove()}}]),Object(r.a)(i,[{key:"InitComponent",value:function(){this.styleComponent=new hs(this),this.renderer=new us(this)}},{key:"Update",value:function(e,t){this.popup&&this.HideGhostPopUp(),this.UpdatePT(e),this.UpdatePolygon(t),this.ShowGhostPopup()}},{key:"UpdatePT",value:function(e){if(this.pt&&this.pt.Remove(),e.type===g.j.POINT_REGULAR)this.pt=Ri.FromJSON(this.scene,e,!0,!1);else{if(e.type!==g.j.POINT_NUMBERED_TOUR)return void console.debug("incorrect type for AGhost Point");this.pt=Or.FromJSON(this.scene,e,!0,!1)}this.pt.isGhost=!0,this.pt.id=this.scene.GetUUID();var t=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToScreenFromGeoPos(e.nodes[0].long,e.nodes[0].lat),n=this.scene.annotationInstance.geometryCommon.gcmdSupporting.ToMap(t[0],t[1]);this.pt.vec.x=t[0],this.pt.vec.y=t[1],this.pt.vec.long=n[0],this.pt.vec.lat=n[1],this.pt.vec.proX=n[2],this.pt.vec.proY=n[3],this.pt.UpdateGoeVec(),this.pt.visibility=.5,this.pt.IsMovable=!1,this.hasPT=!0,this.vec=this.pt.vec}},{key:"UpdatePolygon",value:function(e){this.pgon&&this.pgon.Remove(),e.length>0?(this.pgon=Mr.GetPolylineByIgeometry(this.scene,e),this.pgon.isGhost=!0,this.hasPG=!0):this.hasPG=!1}},{key:"ShowGhostPopup",value:function(){this.hasPopup=!0,this.hasGhostPopup=!0,this.popup=document.createElement("div"),this.popup.id="pa-ghost",this.popup.style.position="absolute",this.pt.type===g.j.POINT_NUMBERED_TOUR?(this.popup.style.height="33px",this.popup.style.width="33px",this.popup.style.top=this.pt.vec.y-32+"px",this.popup.style.left=this.pt.vec.x-15+"px"):(this.popup.style.height="33px",this.popup.style.width="18px",this.popup.style.top=this.pt.vec.y-32+"px",this.popup.style.left=this.pt.vec.x-10+"px"),this.scene.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.appendChild(this.popup),this.scene.annotationInstance.io.eventListenerAnnotation.ShowGhostPopupStack(this.ToJSONForPopupInit())}},{key:"GetNode",value:function(){var e=[];return e.push(this.pt.vec),e}},{key:"EmitInitGhostStack",value:function(){this.scene.annotationInstance.io.eventListenerAnnotation.InitGhostStack(this.ToJSON())}},{key:"ToJSONForPopupInit",value:function(){var e=new rt(this.id,this.type,this.isSelected,this.isHover,this.isHidden);return e.id=this.pt.id.toString()+"@uuidForpgon",e.data.content=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ms(Object(n),!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(Object(u.a)({},this.pt.type,this.pt.id),this.hasPG&&Object(u.a)({},g.j.POLYGON_MULTIPLE,this.pgon.id)),e}},{key:"ToJSON",value:function(){var e=new rt(this.id,this.type,this.isSelected,this.isHover,this.isHidden);return e.PushNode(this.GetNode()),e}},{key:"HideGhostPopUp",value:function(){this.popup&&this.popup.parentNode&&(this.popup.parentNode.removeChild(this.popup),this.scene.annotationInstance.io.eventListenerAnnotation.HideGhostPopupStack(),this.popup=void 0),this.hasPopup=!1}},{key:"UpdatePopup",value:function(){this.popup&&(this.pt.type===g.j.POINT_NUMBERED_TOUR?(this.popup.style.top=this.pt.vec.y-32+"px",this.popup.style.left=this.pt.vec.x-15+"px"):(this.popup.style.top=this.pt.vec.y-32+"px",this.popup.style.left=this.pt.vec.x-10+"px"))}},{key:"GetLog",value:function(){return"Ghost"}},{key:"IsMouseInside",value:function(e,t){return!1}},{key:"TranslateByMouseEventData",value:function(e){}},{key:"Translate",value:function(e,t){}},{key:"Remove",value:function(){this.isRenderable&&!this.isHidden&&(this.isRemove=!0,this.isSelectable=!1,this.isRenderable=!1,this.HideGhostPopUp(),i.aGhost=void 0,this.pt.isGhost=!1,this.pt.Remove(),this.pgon&&this.pgon.Remove(),this.scene.RemoveGeometry(this))}},{key:"OutExtent",value:function(){this.isInsideExtent&&(this.HasPopup&&(this.HideGhostPopUp(),this.hasPopupPre=!0),this.isInsideExtent=!1)}},{key:"InExtent",value:function(){this.isInsideExtent||(this.hasPopupPre&&this.ShowGhostPopup(),this.isInsideExtent=!0)}},{key:"Hide",value:function(){}},{key:"RenderPost",value:function(e){this.renderer.RenderPost(e)}}]),i}(wt),gs=function(){function e(t){Object(o.a)(this,e),this.optimizer=t}return Object(r.a)(e,[{key:"Update",value:function(){}}]),e}();function vs(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var bs=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(vs()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){return Object(o.a)(this,i),n.call(this,e)}return Object(r.a)(i,[{key:"Update",value:function(){this.OptimizerTextleaderlineByCollision()}},{key:"OptimizerTextleaderlineByCollision",value:function(){for(var e=0;e<this.optimizer.optimizer.renderer.annotationInstance.scene.listATextleaderlineWrapper.length;++e){var t=this.optimizer.optimizer.renderer.annotationInstance.scene.listATextleaderlineWrapper[e];t.collision.isCollided=!1,t.collision.numOrder=-1,t.isCollapse=!1}for(var n=0,i=0;i<this.optimizer.optimizer.renderer.annotationInstance.scene.listATextleaderlineWrapper.length;++i)for(var a=this.optimizer.optimizer.renderer.annotationInstance.scene.listATextleaderlineWrapper[i],o=0;o<this.optimizer.optimizer.renderer.annotationInstance.scene.listATextleaderlineWrapper.length;++o){var r=this.optimizer.optimizer.renderer.annotationInstance.scene.listATextleaderlineWrapper[o];r!==a&&B([a.collision.minVec,a.collision.maxVec],[r.collision.minVec,r.collision.maxVec])&&(a.collision.isCollided=!0,a.collision.numOrder=n++,a.isCollapse=!0)}}},{key:"OptimizerTextleaderlineByCollisionCostBased",value:function(){for(var e=0;e<this.optimizer.optimizer.renderer.annotationInstance.scene.listATextleaderlineWrapper.length;++e){var t=this.optimizer.optimizer.renderer.annotationInstance.scene.listATextleaderlineWrapper[e];t.collision.isCollided=!1,t.collision.numOrder=-1,t.isCollapse=!1}for(var n=0,i=0;i<this.optimizer.optimizer.renderer.annotationInstance.scene.listATextleaderlineWrapper.length;++i){var a=this.optimizer.optimizer.renderer.annotationInstance.scene.listATextleaderlineWrapper[i];if(!a.isCaptured)for(var o=0;o<this.optimizer.optimizer.renderer.annotationInstance.scene.listATextleaderlineWrapper.length;++o){var r=this.optimizer.optimizer.renderer.annotationInstance.scene.listATextleaderlineWrapper[o];if(r!==a&&B([a.collision.minVec,a.collision.maxVec],[r.collision.minVec,r.collision.maxVec])){a.collision.isCollided=!0,a.collision.numOrder=n++,a.isCollapse=!0;break}}}}}]),i}(gs);function xs(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Os=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(xs()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),t=n.call(this,e),Object(u.a)(Object(s.a)(t),"needUpdateComputeCollision",!1),Object(u.a)(Object(s.a)(t),"needOptimization",!1),Object(u.a)(Object(s.a)(t),"isDoneOptimization",!0),t.renderer=e.optimizer.renderer,t}return Object(r.a)(i,[{key:"Update",value:function(){(this.renderer.annotationInstance.activeCommandController.acProperties.isZooming||this.needUpdateComputeCollision)&&(this.CollisionDetectionCompute(),this.needUpdateComputeCollision=!1),!this.needOptimization&&this.isDoneOptimization||this.UpdatePos()}},{key:"UpdatePos",value:function(){for(var e=0;e<this.renderer.annotationInstance.scene.listATextleaderlineWrapper.length;++e)this.renderer.annotationInstance.scene.listATextleaderlineWrapper[e].collision.Update()}},{key:"CollisionDetectionCompute",value:function(){for(var e=0;e<this.renderer.annotationInstance.scene.listATextleaderlineWrapper.length;++e)this.renderer.annotationInstance.scene.listATextleaderlineWrapper[e].collision.neighborShapes=[];this.renderer.annotationInstance.activeCommandController.acProperties.needHideTextLeaderLine&&this.CollisionDetection(this.renderer.annotationInstance.scene.listATextleaderlineWrapper)}},{key:"Reposition",value:function(){this.renderer.annotationInstance.activeCommandController.acProperties.needrePositionTextLeaderLine}},{key:"CollisionDetection",value:function(e){if(!e[0]||e[0].scene.annotationInstance.activeCommandController.acProperties.needCollisionDetection){for(var t=!0,n=0;n<e.length-1;++n)for(var i=[e[n].collision.minVec,e[n].collision.maxVec],a=n+1;a<e.length;++a){var o=[e[a].collision.minVec,e[a].collision.maxVec];B(i,o)&&(e[n].collision.neighborShapes.push(e[a]),e[a].collision.neighborShapes.push(e[n]),this.needOptimization=!0,t=!1)}this.isDoneOptimization=t,t&&(this.needOptimization=!1)}}}]),i}(gs);function ws(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var js=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(ws()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){return Object(o.a)(this,i),n.call(this,e)}return Object(r.a)(i,[{key:"Update",value:function(){this.OptimizerTextleaderlineByZoom()}},{key:"OptimizerTextleaderlineByZoom",value:function(){for(var e=0;e<this.optimizer.optimizer.renderer.annotationInstance.scene.listATextleaderlineWrapper.length;++e){var t=this.optimizer.optimizer.renderer.annotationInstance.scene.listATextleaderlineWrapper[e];t.renderer.zoomDifference=t.renderer.zoomLevel-this.optimizer.optimizer.renderer.annotationInstance.scene.annotationInstance.activeCommandController.acProperties.zoom,t.renderer.zoomDifference>1?(t.isRenderCollapse=!0,t.txtDiv.divText.hidden||(t.txtDiv.divText.hidden=!0)):(t.isRenderCollapse=!1,t.txtDiv.divText.hidden&&(t.txtDiv.divText.hidden=!1))}}}]),i}(gs);function Cs(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ks=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Cs()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){return Object(o.a)(this,i),n.call(this,e)}return Object(r.a)(i,[{key:"Update",value:function(){this.OptimizerTextleaderlineByNone()}},{key:"OptimizerTextleaderlineByNone",value:function(){for(var e=0;e<this.optimizer.optimizer.renderer.annotationInstance.scene.listATextleaderlineWrapper.length;++e){var t=this.optimizer.optimizer.renderer.annotationInstance.scene.listATextleaderlineWrapper[e];t.isRenderCollapse=!1,t.txtDiv.divText.hidden&&(t.txtDiv.divText.hidden=!1)}}}]),i}(gs),Ss=function(){function e(t,n){Object(o.a)(this,e),this.optimizer=t,this.type=n}return Object(r.a)(e,[{key:"Update",value:function(){this.activeOptimizer.Update()}},{key:"type",get:function(){return this._type},set:function(e){switch(this._type=e,this.optimizer.renderer.annotationInstance.implementations.app.PRODUCTION||console.debug(this._type),e){case g.p.ZOOM:return void(this.activeOptimizer=new js(this));case g.p.COLLISION:return void(this.activeOptimizer=new bs(this));case g.p.AGENT:return void(this.activeOptimizer=new Os(this));default:return void(this.activeOptimizer=new ks(this))}}}]),e}(),Is=function(){function e(t){Object(o.a)(this,e),this.optimizer=t}return Object(r.a)(e,[{key:"MouseClick",value:function(e,t){return!1}},{key:"MouseMove",value:function(e,t){}},{key:"Update",value:function(){}},{key:"Render",value:function(e){}}]),e}();function Ps(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Rs=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Ps()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){return Object(o.a)(this,i),n.call(this,e)}return Object(r.a)(i,[{key:"Update",value:function(){this.OptimizerTextleaderlineByZoom()}},{key:"OptimizerTextleaderlineByZoom",value:function(){}}]),i}(Is),Es=function(){function e(t,n,i){Object(o.a)(this,e),Object(u.a)(this,"r0",16),Object(u.a)(this,"r1",24),Object(u.a)(this,"isHover",!1),Object(u.a)(this,"isVisited",!1),Object(u.a)(this,"boundingBoxMin",new Oe(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)),Object(u.a)(this,"boundingBoxMax",new Oe(Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER)),Object(u.a)(this,"vec",new Oe(0,0,0)),Object(u.a)(this,"t",1),Object(u.a)(this,"GridResolution",85),Object(u.a)(this,"tempVecGridList",[]),Object(u.a)(this,"tempGeoGridList",[]),this.renderer=t,this.geometries=n,this.type=i;for(var a=0;a<this.geometries.length;++a)this.vec.x+=this.geometries[a].vec.x,this.vec.y+=this.geometries[a].vec.y,this.UpdateBoundingBox(this.geometries[a].vec);this.vec.x/=this.geometries.length,this.vec.y/=this.geometries.length,this.minVec=new Oe(this.vec.x-this.r1,this.vec.y-this.r1,0),this.maxVec=new Oe(this.vec.x+this.r1,this.vec.y+this.r1,0)}return Object(r.a)(e,[{key:"IsInside",value:function(e){return Z(this.vec,e)<this.r1?(this.isHover=!0,this.geometries[0].scene.annotationInstance.activeCommandController.activeCursor.Hovering(),this.geometries[0].scene.annotationInstance.renderer.needFocus=!0,this.geometries[0].scene.annotationInstance.activeCommandController.acProperties.hasHovering=!0,!0):(this.isHover=!1,!1)}},{key:"AddPost",value:function(e){if(!this.geometries.includes(e)){this.geometries.push(e),this.vec=new Oe(0,0,0);for(var t=0;t<this.geometries.length;++t)this.vec.x+=this.geometries[t].vec.x,this.vec.y+=this.geometries[t].vec.y,this.UpdateBoundingBox(this.geometries[t].vec);this.vec.x/=this.geometries.length,this.vec.y/=this.geometries.length,this.minVec=new Oe(this.vec.x-this.r1,this.vec.y-this.r1,0),this.maxVec=new Oe(this.vec.x+this.r1,this.vec.y+this.r1,0)}}},{key:"NeedDecompose",value:function(){return this.boundingBoxMax.x-this.boundingBoxMin.x>this.GridResolution||this.boundingBoxMax.y-this.boundingBoxMin.y>this.GridResolution}},{key:"Split",value:function(){this.DeepRemove();var e=(this.boundingBoxMax.x-this.boundingBoxMin.x)/this.GridResolution<1?1:(this.boundingBoxMax.x-this.boundingBoxMin.x)/this.GridResolution,t=(this.boundingBoxMax.y-this.boundingBoxMin.y)/this.GridResolution<1?1:(this.boundingBoxMax.y-this.boundingBoxMin.y)/this.GridResolution,n=this.buildGrid(e,t);this.BuildSubCluster(n,e,t)}},{key:"Merge",value:function(e){this.geometries.concat(e.geometries),this.vec=new Oe(0,0,0);for(var t=0;t<this.geometries.length;++t)this.vec.x+=this.geometries[t].vec.x,this.vec.y+=this.geometries[t].vec.y,this.UpdateBoundingBox(this.geometries[t].vec);this.vec.x/=this.geometries.length,this.vec.y/=this.geometries.length,this.minVec=new Oe(this.vec.x-this.r1,this.vec.y-this.r1,0),this.maxVec=new Oe(this.vec.x+this.r1,this.vec.y+this.r1,0),e.DeepRemove()}},{key:"DeepRemove",value:function(){this.renderer.RemoveCluster(this)}},{key:"buildGrid",value:function(e,t){this.tempGeoGridList=[];for(var n=[],i=0;i<t;++i){for(var a=this.boundingBoxMin.y+i*this.GridResolution,o=[],r=0;r<e;++r){var s=this.boundingBoxMin.x+r*this.GridResolution;n.push(new Oe(s,a));o.push([])}this.tempGeoGridList.push(o)}return this.tempVecGridList=n,n}},{key:"BuildSubCluster",value:function(t,n,i){for(var a=0;a<this.geometries.length;++a)this.GetCellAtPoint(this.geometries[a].vec,n,i).push(this.geometries[a]);for(var o=0;o<this.tempGeoGridList.length;++o)for(var r=0;r<this.tempGeoGridList[o].length;++r)this.tempGeoGridList[o][r]&&(1===this.tempGeoGridList[o][r].length?this.tempGeoGridList[o][r][0].collision.Reset():this.tempGeoGridList[o][r].length>1&&(this.tempGeoGridList[o][r][0].type===g.j.POINT_NUMBERED?this.renderer.clustersNPoint.push(new e(this.renderer,this.tempGeoGridList[o][r],this.tempGeoGridList[o][r][0].type)):this.tempGeoGridList[o][r][0].type===g.j.POINT_REGULAR&&this.renderer.clustersRPoint.push(new e(this.renderer,this.tempGeoGridList[o][r],this.tempGeoGridList[o][r][0].type))))}},{key:"GetCellAtPoint",value:function(e,t,n){var i=new Oe(e.x-this.boundingBoxMin.x,e.y-this.boundingBoxMin.y),a=Math.round(i.x/this.GridResolution),o=Math.round(i.y/this.GridResolution);return a>=t&&(a=t-1),o>=n&&(o=n-1),a<0&&(a=0),o<0&&(o=0),a=Math.round(a),o=Math.round(o),this.tempGeoGridList[o][a]}},{key:"Draw",value:function(e,t){if(this.UpdateTimeer(),t.optimizer.optimizer.optimizer.renderer.annotationInstance.activeCommandController.acProperties.extentChanging){this.vec=new Oe(0,0,0),this.boundingBoxMin=new Oe(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.boundingBoxMax=new Oe(Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(var n=0;n<this.geometries.length;++n)this.vec.x+=this.geometries[n].vec.x,this.vec.y+=this.geometries[n].vec.y,this.UpdateBoundingBox(this.geometries[n].vec);this.vec.x/=this.geometries.length,this.vec.y/=this.geometries.length,this.minVec=new Oe(this.vec.x-this.r1,this.vec.y-this.r1,0),this.maxVec=new Oe(this.vec.x+this.r1,this.vec.y+this.r1,0)}if(t.optimizer.optimizer.optimizer.renderer.draw.shape.cluster.DrawingPresetClustering(e,this.geometries,this.vec,this.r0,this.r1,this.isHover,this.t),t.optimizer.optimizer.optimizer.renderer.annotationInstance.implementations.app.INSPECTION&&(e.beginPath(),e.rect(this.minVec.x,this.minVec.y,this.maxVec.x-this.minVec.x,this.maxVec.y-this.minVec.y),e.closePath(),e.fillStyle="rgba(0, 0, 0, 0.3)",e.fill(),e.lineWidth=.5,e.beginPath(),e.rect(this.boundingBoxMin.x,this.boundingBoxMin.y,this.boundingBoxMax.x-this.boundingBoxMin.x,this.boundingBoxMax.y-this.boundingBoxMin.y),e.closePath(),e.stroke(),this.tempVecGridList.length>0))for(var i=0;i<this.tempVecGridList.length;++i)e.beginPath(),e.rect(this.tempVecGridList[i].x,this.tempVecGridList[i].y,this.GridResolution,this.GridResolution),e.closePath(),e.stroke()}},{key:"UpdateTimeer",value:function(){this.geometries[0].scene.annotationInstance.activeCommandController.acProperties.hasHovering?(this.t-=this.geometries[0].scene.annotationInstance.customization.themeCurrent.properties.timeTransitionA,this.t=this.t<.4?.4:this.t):(this.t+=this.geometries[0].scene.annotationInstance.customization.themeCurrent.properties.timeTransitionB,this.t=this.t>1?1:this.t)}},{key:"UpdateBoundingBox",value:function(e){this.boundingBoxMin.x=e.x<this.boundingBoxMin.x?e.x:this.boundingBoxMin.x,this.boundingBoxMin.y=e.y<this.boundingBoxMin.y?e.y:this.boundingBoxMin.y,this.boundingBoxMax.x=e.x>this.boundingBoxMax.x?e.x:this.boundingBoxMax.x,this.boundingBoxMax.y=e.y>this.boundingBoxMax.y?e.y:this.boundingBoxMax.y}}]),e}(),Ds=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"clustersNPoint",[]),Object(u.a)(this,"clustersRPoint",[]),this.optimizer=t}return Object(r.a)(e,[{key:"InitGeometry",value:function(){this.clustersNPoint=[],this.clustersRPoint=[]}},{key:"AddClusterByGeometries",value:function(e,t){if(t===g.j.POINT_NUMBERED)for(var n=0;n<e.length;++n)this.clustersNPoint.push(new Es(this,e[n],t));else if(t===g.j.POINT_REGULAR)for(var i=0;i<e.length;++i)this.clustersRPoint.push(new Es(this,e[i],t))}},{key:"RemoveCluster",value:function(e){e.geometries[0].type===g.j.POINT_NUMBERED?this.clustersNPoint.splice(this.clustersNPoint.indexOf(e),1):e.geometries[0].type===g.j.POINT_REGULAR&&this.clustersRPoint.splice(this.clustersRPoint.indexOf(e),1)}},{key:"Render",value:function(e){if(this.clustersNPoint.length>0)for(var t=0;t<this.clustersNPoint.length;++t)this.clustersNPoint[t].Draw(e,this);if(this.clustersRPoint.length>0)for(var n=0;n<this.clustersRPoint.length;++n)this.clustersRPoint[n].Draw(e,this)}}]),e}(),Ts=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"listRPoint",[]),Object(u.a)(this,"listNPoint",[]),this.optimizer=t}return Object(r.a)(e,[{key:"Update",value:function(){this.UpdatePoints(),this.listNPoint=this.BuildConnectivity(this.listNPoint),this.listRPoint=this.BuildConnectivity(this.listRPoint),this.InitGeometry(),this.AddClusterByGeometries(this.buildGraph(this.listNPoint),g.j.POINT_NUMBERED),this.AddClusterByGeometries(this.buildGraph(this.listRPoint),g.j.POINT_REGULAR),this.PostUpdateCollisionBasedonGraph();var e=this.NeedDecompose();e.length>0&&(this.SplitClusters(e),this.PostMergeCluster())}},{key:"InitGeometry",value:function(){this.optimizer.renderer.InitGeometry()}},{key:"AddClusterByGeometries",value:function(e,t){this.optimizer.renderer.AddClusterByGeometries(e,t)}},{key:"UpdatePoints",value:function(){this.listNPoint=[],this.listRPoint=[];for(var e=0;e<this.optimizer.optimizer.optimizer.renderer.annotationInstance.scene.listNPoint.length;++e)if(!this.optimizer.optimizer.optimizer.renderer.annotationInstance.scene.listNPoint[e].IsHidden&&this.optimizer.optimizer.optimizer.renderer.annotationInstance.scene.listNPoint[e].isRenderable){var t=this.optimizer.optimizer.optimizer.renderer.annotationInstance.scene.listNPoint[e];t.collision.Reset(),this.listNPoint.push(t)}for(var n=0;n<this.optimizer.optimizer.optimizer.renderer.annotationInstance.scene.listRPoint.length;++n)if(!this.optimizer.optimizer.optimizer.renderer.annotationInstance.scene.listRPoint[n].IsHidden&&this.optimizer.optimizer.optimizer.renderer.annotationInstance.scene.listRPoint[n].isRenderable){var i=this.optimizer.optimizer.optimizer.renderer.annotationInstance.scene.listRPoint[n];i.collision.Reset(),this.listRPoint.push(i)}}},{key:"BuildConnectivity",value:function(e){for(var t=0;t<e.length;++t)for(var n=e[t],i=t+1;i<e.length;++i){var a=e[i];!a.isCollapse&&a!==n&&B([n.collision.minVec,n.collision.maxVec],[a.collision.minVec,a.collision.maxVec])&&(n.collision.isCollided=!0,n.isCollapse=!0,n.numVisit=0,n.collision.neighborShapes.push(a),a.collision.isCollided=!0,a.isCollapse=!0,a.numVisit=0,a.collision.neighborShapes.push(n))}return e}},{key:"buildGraph",value:function(e){for(var t=[],n=0;n<e.length;++n){var i=[],a=[e[n]];a[0].collision.isVisited=!0,i.push(a[0]);for(var o=0,r=void 0;void 0!==(r=a.shift());){for(var s=0;s<r.collision.neighborShapes.length;++s)r.collision.neighborShapes[s].collision.isVisited||(r.collision.neighborShapes[s].collision.isVisited=!0,a.push(r.collision.neighborShapes[s]),i.push(r.collision.neighborShapes[s]));if(o++>1e3)return void console.debug("fail to optimize")}i.length>1&&t.push(i)}return t}},{key:"PostUpdateCollisionBasedonGraph",value:function(){for(var e=0;e<this.optimizer.renderer.clustersNPoint.length;++e)this.UpdateByQueue(this.optimizer.renderer.clustersNPoint[e],this.listNPoint);for(var t=0;t<this.optimizer.renderer.clustersRPoint.length;++t)this.UpdateByQueue(this.optimizer.renderer.clustersRPoint[t],this.listNPoint)}},{key:"UpdateByQueue",value:function(e,t){for(var n=0,a=Object(i.a)(t);a.length;){var o=a.shift();if(o.numVisit>100){o.numVisit=0;break}if(0===a.length&&t.length<n++)break;o.collision.isCollided||(B([o.collision.minVec,o.collision.maxVec],[e.minVec,e.maxVec])?(o.collision.isCollided=!0,o.isCollapse=!0,o.numVisit=0,e.AddPost(o)):(o.numVisit++,a.push(o)))}}},{key:"NeedDecompose",value:function(){for(var e=[],t=0;t<this.optimizer.renderer.clustersNPoint.length;++t)this.optimizer.renderer.clustersNPoint[t].NeedDecompose()&&e.push(this.optimizer.renderer.clustersNPoint[t]);for(var n=0;n<this.optimizer.renderer.clustersRPoint.length;++n)this.optimizer.renderer.clustersRPoint[n].NeedDecompose()&&e.push(this.optimizer.renderer.clustersRPoint[n]);return e}},{key:"SplitClusters",value:function(e){for(var t=0;t<e.length;++t)e[t].Split()}},{key:"PostMergeCluster",value:function(){this.PostMergeClusterCompute(this.optimizer.renderer.clustersNPoint),this.PostMergeClusterCompute(this.optimizer.renderer.clustersRPoint)}},{key:"PostMergeClusterCompute",value:function(e){for(var t=0;t<e.length-1;++t)for(var n=e[t],i=t+1;i<e.length;++i){var a=e[i];a.isVisited||Z(n.vec,a.vec)<n.r1+20&&(a.isVisited=!0,n.Merge(a))}}}]),e}(),Ms=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"m",new Oe(0,0)),this.optimizer=t}return Object(r.a)(e,[{key:"MouseClick",value:function(e,t){this.m.x=e,this.m.y=t;for(var n=0;n<this.optimizer.renderer.clustersNPoint.length;++n)if(this.optimizer.renderer.clustersNPoint[n].IsInside(this.m))return this.optimizer.optimizer.optimizer.renderer.annotationInstance.geometryCommon.gcmdSupporting.GotoExtent(this.optimizer.renderer.clustersNPoint[n].geometries),!0;for(var i=0;i<this.optimizer.renderer.clustersRPoint.length;++i)if(this.optimizer.renderer.clustersRPoint[i].IsInside(this.m))return this.optimizer.optimizer.optimizer.renderer.annotationInstance.geometryCommon.gcmdSupporting.GotoExtent(this.optimizer.renderer.clustersRPoint[i].geometries),!0;return!1}},{key:"MouseMove",value:function(e,t){this.m.x=e,this.m.y=t;for(var n=0;n<this.optimizer.renderer.clustersNPoint.length;++n)this.optimizer.renderer.clustersNPoint[n].IsInside(this.m);for(var i=0;i<this.optimizer.renderer.clustersRPoint.length;++i)this.optimizer.renderer.clustersRPoint[i].IsInside(this.m)}}]),e}();function As(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ns=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(As()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).interaction=new Ms(Object(s.a)(t)),t.graph=new Ts(Object(s.a)(t)),t.renderer=new Ds(Object(s.a)(t)),t}return Object(r.a)(i,[{key:"MouseClick",value:function(e,t){return!!this.interaction.MouseClick(e,t)}},{key:"MouseMove",value:function(e,t){this.interaction.MouseMove(e,t)}},{key:"Render",value:function(e){this.renderer.Render(e)}},{key:"Update",value:function(){this.graph.Update()}}]),i}(Is),Ls=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"pointClusters",[]),this.optimizer=t}return Object(r.a)(e,[{key:"InitGeometry",value:function(){this.pointClusters=[]}},{key:"PushGeometry",value:function(e,t){for(var n=0;n<e.length;++n)this.pointClusters.push(new Gs(e[n],t))}},{key:"Render",value:function(e){this.optimizer.grid.Render(e)}}]),e}(),Gs=function(){function e(t,n){Object(o.a)(this,e),Object(u.a)(this,"r0",16),Object(u.a)(this,"r1",24),Object(u.a)(this,"isHover",!1),Object(u.a)(this,"vec",new Oe(0,0,0)),this.geometries=t,this.type=n;for(var i=0;i<this.geometries.length;++i)this.vec.x+=this.geometries[i].vec.x,this.vec.y+=this.geometries[i].vec.y;this.vec.x/=this.geometries.length,this.vec.y/=this.geometries.length}return Object(r.a)(e,[{key:"IsInside",value:function(e){return Z(this.vec,e)<this.r1+2?(this.isHover=!0,!0):(this.isHover=!1,!1)}},{key:"Draw",value:function(e,t){if(t.optimizer.optimizer.optimizer.renderer.annotationInstance.activeCommandController.acProperties.extentChanging){this.vec=new Oe(0,0,0);for(var n=0;n<this.geometries.length;++n)this.vec.x+=this.geometries[n].vec.x,this.vec.y+=this.geometries[n].vec.y;this.vec.x/=this.geometries.length,this.vec.y/=this.geometries.length}t.optimizer.optimizer.optimizer.renderer.draw.shape.cluster.DrawingPresetClustering(e,this.geometries,this.vec,this.r0,this.r1,this.isHover)}}]),e}(),_s=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"listRPoint",[]),Object(u.a)(this,"listNPoint",[]),Object(u.a)(this,"rx",15),Object(u.a)(this,"ry",8),Object(u.a)(this,"xInterval",0),Object(u.a)(this,"yInterval",0),Object(u.a)(this,"cells",[]),this.optimizer=t}return Object(r.a)(e,[{key:"Update",value:function(){this.InitGrid()}},{key:"InitGrid",value:function(){this.cells=[];var e=this.optimizer.optimizer.optimizer.renderer.ctx.canvas.width,t=this.optimizer.optimizer.optimizer.renderer.ctx.canvas.height;this.xInterval=e/(this.rx-1),this.yInterval=t/(this.ry-1);for(var n=0;n<this.ry;n++){for(var i=[],a=0;a<this.rx;a++)i.push(new Bs(this,a,n));this.cells.push(i)}for(var o=0;o<this.optimizer.optimizer.optimizer.renderer.annotationInstance.scene.listNPoint.length;++o){var r=this.optimizer.optimizer.optimizer.renderer.annotationInstance.scene.listNPoint[o];this.GetCellAtPoint(r.vec).Add(r)}for(var s=0;s<this.ry;++s)for(var c=0;c<this.rx;++c)this.cells[s][c].geometries.length<2&&(this.cells[s][c].isRenderable=!1)}},{key:"GetCellAtPoint",value:function(e){var t=Math.round(e.x/this.xInterval),n=Math.round(e.y/this.yInterval);return t>=this.rx&&(t=this.rx-1),n>=this.ry&&(n=this.ry-1),t<0&&(t=0),n<0&&(n=0),this.cells[n][t]}},{key:"Render",value:function(e){for(var t=0;t<this.cells.length;t++)for(var n=0;n<this.cells[t].length;n++)this.cells[t][n].Draw(e)}}]),e}(),Bs=function(){function e(t,n,i){Object(o.a)(this,e),Object(u.a)(this,"r0",16),Object(u.a)(this,"r1",24),Object(u.a)(this,"isHover",!1),Object(u.a)(this,"geometries",[]),Object(u.a)(this,"_isRenderable",!0),this.grid=t,this.xI=n,this.yI=i,this.vec=new Oe(n*this.grid.xInterval,i*this.grid.yInterval),this.geometries=[]}return Object(r.a)(e,[{key:"Add",value:function(e){e.isRenderable=!1,this.geometries.push(e),this.vecRender=new Oe(0,0,0);for(var t=0;t<this.geometries.length;++t)this.vecRender.x+=this.geometries[t].vec.x,this.vecRender.y+=this.geometries[t].vec.y;this.vecRender.x/=this.geometries.length,this.vecRender.y/=this.geometries.length}},{key:"Draw",value:function(e){if(this.isRenderable){if(this.grid.optimizer.optimizer.optimizer.renderer.annotationInstance.activeCommandController.acProperties.extentChanging){this.vecRender=new Oe(0,0,0);for(var t=0;t<this.geometries.length;++t)this.vecRender.x+=this.geometries[t].vec.x,this.vecRender.y+=this.geometries[t].vec.y;this.vecRender.x/=this.geometries.length,this.vecRender.y/=this.geometries.length}e.beginPath(),e.arc(this.vecRender.x,this.vecRender.y,5,0,2*Math.PI),e.closePath(),e.stroke(),this.grid.optimizer.optimizer.optimizer.renderer.draw.shape.cluster.DrawingPresetClustering(e,this.geometries,this.vecRender,this.r0,this.r1,this.isHover)}}},{key:"isRenderable",get:function(){return this._isRenderable},set:function(e){if(!e){for(var t=0;t<this.geometries.length;++t)this.geometries[t].isRenderable=!0;this.geometries=[]}this._isRenderable=e}}]),e}(),Ws=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"m",new Oe(0,0)),this.optimizer=t}return Object(r.a)(e,[{key:"MouseClick",value:function(e,t){this.m.x=e,this.m.y=t;for(var n=0;n<this.optimizer.renderer.pointClusters.length;++n)if(this.optimizer.renderer.pointClusters[n].IsInside(this.m))return this.optimizer.optimizer.optimizer.renderer.annotationInstance.geometryCommon.gcmdSupporting.GotoExtent(this.optimizer.renderer.pointClusters[n].geometries),!0;return!1}},{key:"MouseMove",value:function(e,t){this.m.x=e,this.m.y=t;for(var n=0;n<this.optimizer.renderer.pointClusters.length;++n)this.optimizer.renderer.pointClusters[n].IsInside(this.m)}}]),e}();function Vs(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Fs=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Vs()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).interaction=new Ws(Object(s.a)(t)),t.grid=new _s(Object(s.a)(t)),t.renderer=new Ls(Object(s.a)(t)),t}return Object(r.a)(i,[{key:"MouseClick",value:function(e,t){return!!this.interaction.MouseClick(e,t)}},{key:"MouseMove",value:function(e,t){this.interaction.MouseMove(e,t)}},{key:"Render",value:function(e){this.renderer.Render(e)}},{key:"Update",value:function(){this.grid.Update()}}]),i}(Is);function Us(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var zs=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Us()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){return Object(o.a)(this,i),n.call(this,e)}return Object(r.a)(i,[{key:"Update",value:function(){this.OptimizerTextleaderlineByNone()}},{key:"OptimizerTextleaderlineByNone",value:function(){for(var e=0;e<this.optimizer.optimizer.renderer.annotationInstance.scene.listNPoint.length;++e){this.optimizer.optimizer.renderer.annotationInstance.scene.listNPoint[e].collision.Reset()}for(var t=0;t<this.optimizer.optimizer.renderer.annotationInstance.scene.listRPoint.length;++t){this.optimizer.optimizer.renderer.annotationInstance.scene.listRPoint[t].collision.Reset()}}}]),i}(Is),Hs=function(){function e(t,n){Object(o.a)(this,e),this.optimizer=t,this.type=n}return Object(r.a)(e,[{key:"Update",value:function(){this.activeOptimizer.Update()}},{key:"Render",value:function(e){this.activeOptimizer&&this.activeOptimizer.Render(e)}},{key:"MouseClick",value:function(e,t){return!(!this.activeOptimizer||!this.activeOptimizer.MouseClick(e,t))}},{key:"MouseMove",value:function(e,t){this.activeOptimizer&&this.activeOptimizer.MouseMove(e,t)}},{key:"type",get:function(){return this._type},set:function(e){switch(this._type=e,this.optimizer.renderer.annotationInstance.implementations.app.PRODUCTION||console.debug(this._type),e){case g.o.ZOOM:return void(this.activeOptimizer=new Rs(this));case g.o.GRID:return void(this.activeOptimizer=new Fs(this));case g.o.COLLISION:return void(this.activeOptimizer=new Ns(this));case g.o.AGENT:return;default:return void(this.activeOptimizer=new zs(this))}}}]),e}(),Ys=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"initForceTimer",0),this.renderer=t,this.Init()}return Object(r.a)(e,[{key:"Init",value:function(){this.pointOptimizer=new Hs(this,this.renderer.annotationInstance.activeCommandController.acProperties.optimizerPoint),this.textleaderlineOptimizer=new Ss(this,this.renderer.annotationInstance.activeCommandController.acProperties.optimizerTextleaderline)}},{key:"Update",value:function(){this.renderer.annotationInstance.activeCommandController.acProperties.isPanning||(this.renderer.annotationInstance.activeCommandController.acProperties.needExecuteOptimizer||++this.initForceTimer<30)&&(this.pointOptimizer.Update(),this.textleaderlineOptimizer.Update(),this.renderer.annotationInstance.activeCommandController.acProperties.needExecuteOptimizer=!1)}},{key:"Render",value:function(e){this.pointOptimizer.Render(e)}},{key:"MouseClick",value:function(e,t){return!!this.pointOptimizer.MouseClick(e,t)}},{key:"MouseMove",value:function(e,t){this.pointOptimizer.MouseMove(e,t)}},{key:"typeTextleaderline",get:function(){return this.textleaderlineOptimizer.type},set:function(e){this.textleaderlineOptimizer.type=e}},{key:"typePoint",get:function(){return this.pointOptimizer.type},set:function(e){this.pointOptimizer.type=e}}]),e}(),Ks=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60;Object(o.a)(this,e),Object(u.a)(this,"isFetchTheme",!1),Object(u.a)(this,"hasAni",!1),Object(u.a)(this,"_frame",0),Object(u.a)(this,"_frameUpdate",0),Object(u.a)(this,"_frameSkip",2),Object(u.a)(this,"_updateProjectionForce",!0),Object(u.a)(this,"_needFocus",!1),Object(u.a)(this,"index",0),this.annotationInstance=t,this.numericalMotion=new Br,this.t=0,this.hasAni=n,this.frameRate=i,this.needBlackhole=!1,this.objectSnapping=new ls(this),this.draw=new ts(this),this.offscreen=new ns(this),this.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.compileMode!==g.f.PRODUCTION&&this.Development(),this.selection=new Yn(this.annotationInstance.scene),this.blackhole=new os(this.annotationInstance.scene)}return Object(r.a)(e,[{key:"InitPost",value:function(){this.CanvasOff(),this.annotationInstance.geometryCommon.gcmdSupporting.RenderForceMask(),this.annotationInstance.geometryCommon.gcmdSupporting.UpdateExtent(),this.BindContextForOffscreen(),this.optimizer=new Ys(this)}},{key:"BindContextForOffscreen",value:function(){this.ctxOffscreen=this.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvasOffScreen.offScreenCtx}},{key:"Development",value:function(){}},{key:"CanvasOff",value:function(){this.xOff=0,this.yOff=0,this.xOffCurrent=0,this.yOffCurrent=0,this.xOffPre=0,this.yOffPre=0,this.zoomFactor=0,this.zoomFactorPre=0,this.zoomFactorCurrent=0,this.anchor=new Oe(0,0,0)}},{key:"SaveDrawingGeometries",value:function(){var e=new Map;for(this.index=this.annotationInstance.scene.geometryList.length;this.index--;){var t=this.annotationInstance.scene.geometryList[this.index].ToJSON();void 0!==t&&e.set(this.annotationInstance.scene.geometryList[this.index].id,t)}return e}},{key:"Init",value:function(){}},{key:"Render",value:function(e){switch(this.UpdatePre(),this.RenderPre(e),this.annotationInstance.implementations.app.APP){case g.c.ANNOTATION_MAP:this.RenderAnnotationMap(e);break;case g.c.GUIDED_TOUR:this.RenderGuidedTour(e)}}},{key:"RenderAnnotationMap",value:function(e){for(this.objectSnapping.Render(e),Do.construction&&Do.construction.RenderPost(e),this.index=this.annotationInstance.scene.listACircle.length;this.index--;)this.annotationInstance.scene.listACircle[this.index].Render(e);for(this.index=this.annotationInstance.scene.listAPolygonGraphWrapper.length;this.index--;)this.annotationInstance.scene.listAPolygonGraphWrapper[this.index].Render(e);for(this.index=this.annotationInstance.scene.listARectangle.length;this.index--;)this.annotationInstance.scene.listARectangle[this.index].Render(e);for(this.index=this.annotationInstance.scene.listAPolylineGraphWrapper.length;this.index--;)this.annotationInstance.scene.listAPolylineGraphWrapper[this.index].Render(e);for(this.annotationInstance.scene.listAPolylineGraphShadow&&this.annotationInstance.scene.listAPolylineGraphShadow.Render(e),this.index=this.annotationInstance.scene.listAFreehandSmartDrawing.length;this.index--;)this.annotationInstance.scene.listAFreehandSmartDrawing[this.index].Render(e);for(this.index=this.annotationInstance.scene.listAFreehand.length;this.index--;)this.annotationInstance.scene.listAFreehand[this.index].Render(e);for(this.index=this.annotationInstance.scene.listALineGraph.length;this.index--;)this.annotationInstance.scene.listALineGraph[this.index].Render(e);for(this.index=this.annotationInstance.scene.listALine.length;this.index--;)this.annotationInstance.scene.listALine[this.index].Render(e);for(this.index=this.annotationInstance.scene.listAPolylineWrapper.length;this.index--;)this.annotationInstance.scene.listAPolylineWrapper[this.index].Render(e);for(this.index=this.annotationInstance.scene.listACurve.length;this.index--;)this.annotationInstance.scene.listACurve[this.index].Render(e);for(this.index=this.annotationInstance.scene.listAArrow.length;this.index--;)this.annotationInstance.scene.listAArrow[this.index].Render(e);for(da.condition.geo&&da.condition.geo.Render(e),this.index=this.annotationInstance.scene.listATextleaderlineWrapper.length;this.index--;)this.annotationInstance.scene.listATextleaderlineWrapper[this.index].RenderLeadline(e);for(this.index=this.annotationInstance.scene.listAPolygonGraphWrapper.length;this.index--;)this.annotationInstance.scene.listAPolygonGraphWrapper[this.index].RenderPostNodes(e);for(this.index=this.annotationInstance.scene.listAPoint.length;this.index--;)this.annotationInstance.scene.listAPoint[this.index].Render(e);for(this.index=this.annotationInstance.scene.listRPoint.length;this.index--;)this.annotationInstance.scene.listRPoint[this.index].Render(e);for(this.index=this.annotationInstance.scene.listIPoint.length;this.index--;)this.annotationInstance.scene.listIPoint[this.index].Render(e);for(this.index=this.annotationInstance.scene.listNPoint.length;this.index--;)this.annotationInstance.scene.listNPoint[this.index].Render(e);for(this.optimizer.Render(e),this.index=this.annotationInstance.scene.listATextleaderlineWrapper.length;this.index--;)this.annotationInstance.scene.listATextleaderlineWrapper[this.index].Render(e);if(this.annotationInstance.implementations.app.INSPECTION){if(e.fillStyle="#000000",e.font="10px Arial",this.annotationInstance.scene.capture){var t=this.annotationInstance.scene.capture.vec,n=this.annotationInstance.scene.capture.type;e.fillText("".concat(n),t.x,t.y+10)}var i=this.annotationInstance.scene.geometryList.length,a=this.annotationInstance.scene.listAPoint.length,o=this.annotationInstance.scene.Capture?this.annotationInstance.scene.Capture.type:void 0,r=this.annotationInstance.activeCommandController.acProperties.mapScale;e.fillText("num of geo: ".concat(i),.5*this.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.ctx.canvas.width-150,30),e.fillText("num of aPoint(node): ".concat(a),.5*this.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.ctx.canvas.width-70,30),e.fillText("capture: ".concat(o),.5*this.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.ctx.canvas.width+50,30),e.fillText("map scale: ".concat(r),.5*this.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.ctx.canvas.width+150+0,30)}this.RenderPost(e),this.UpdatePost()}},{key:"RenderGuidedTour",value:function(e){var t=void 0;for(this.index=this.annotationInstance.scene.listGuidedTourNPoint.length;this.index--;)this.annotationInstance.scene.listGuidedTourNPoint[this.index].IsSelected?(t=this.annotationInstance.scene.listGuidedTourNPoint[this.index],this.annotationInstance.scene.listGuidedTourNPoint[this.index].Render(e)):this.annotationInstance.scene.listGuidedTourNPoint[this.index].Render(e);t&&t.Render(e),this.RenderPost(e),this.UpdatePost()}},{key:"Destroy",value:function(){}},{key:"UpdateMouseHover",value:function(e){var t=!1;for(this.index=this.annotationInstance.scene.geometryList.length;this.index--;)this.annotationInstance.scene.geometryList[this.index].isSelected&&(t=!0),this.annotationInstance.scene.geometryList[this.index].IsMouseInside(e.x,e.y)?(this.annotationInstance.scene.geometryList[this.index].IsHover=!0,this.annotationInstance.geometryCommon.gcmdProcessing.SetCaptureHovered(this.annotationInstance.scene.geometryList[this.index]),t=!0):this.annotationInstance.scene.geometryList[this.index].IsHover=!1;t||this.annotationInstance.geometryCommon.gcmdProcessing.SetCaptureHovered(void 0),this.annotationInstance.renderer.needFocus=t,this.annotationInstance.activeCommandController.acProperties.hasHovering=t}},{key:"UpdatePre",value:function(){if(this.xOff=this.xOffCurrent-this.xOffPre,this.yOff=this.yOffCurrent-this.yOffPre,this.zoomFactor=this.zoomFactorCurrent-this.zoomFactorPre,this.t+=.01,this.index=this.annotationInstance.scene.listBasePoint.length,this.updateProjectionForce){if(this.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.isViewChanging=!0,this.annotationInstance.activeCommandController.acProperties.isPanning=!0,this.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.UpdateExtent(),this._frameUpdate++%2===0)for(;this.index--;)this.annotationInstance.scene.listBasePoint[this.index].Update(!0);this.t>.5&&(this.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.isViewChanging=!1,this.annotationInstance.activeCommandController.acProperties.isPanning=!1,this.updateProjectionForce=!1)}else if(this.annotationInstance.activeCommandController.acProperties.isPanning||this.annotationInstance.activeCommandController.acProperties.isZooming)for(;this.index--;)this.annotationInstance.scene.listBasePoint[this.index].Update();else if(this._frameUpdate++%3===0)for(;this.index--;)this.annotationInstance.scene.listBasePoint[this.index].Update();this.optimizer.Update()}},{key:"UpdatePost",value:function(){this.xOffPre=this.xOffCurrent,this.yOffPre=this.yOffCurrent,this.zoomFactorPre=this.zoomFactorCurrent}},{key:"RenderPre",value:function(e){this.blackhole&&this.blackhole.Render(e)}},{key:"RenderPost",value:function(e){ys.Render(e),this.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView&&this.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.extent.Render(e),this.selection.Render(e)}},{key:"needFocus",get:function(){return this._needFocus},set:function(e){this._needFocus=e}},{key:"dt",get:function(){return this.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvas.deltaTime.dt}},{key:"updateProjectionForce",get:function(){return this._updateProjectionForce},set:function(e){this._updateProjectionForce=e,this.t=0}}]),e}(),Xs=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"geometryList",[]),Object(u.a)(this,"listBasePoint",[]),Object(u.a)(this,"listAPoint",[]),Object(u.a)(this,"listRPoint",[]),Object(u.a)(this,"listNPoint",[]),Object(u.a)(this,"listIPoint",[]),Object(u.a)(this,"listALine",[]),Object(u.a)(this,"listARectangle",[]),Object(u.a)(this,"listACircle",[]),Object(u.a)(this,"listALineGraph",[]),Object(u.a)(this,"listAPolylineWrapper",[]),Object(u.a)(this,"listAPolygonWrapper",[]),Object(u.a)(this,"listANGonWrapper",[]),Object(u.a)(this,"listAPolygonGraphWrapper",[]),Object(u.a)(this,"listAPolylineGraphWrapper",[]),Object(u.a)(this,"listAPolylineGraphShadow",void 0),Object(u.a)(this,"listAArrow",[]),Object(u.a)(this,"listACurve",[]),Object(u.a)(this,"listAFreehand",[]),Object(u.a)(this,"listAFreehandSmartDrawing",[]),Object(u.a)(this,"listATextleaderlineWrapper",[]),Object(u.a)(this,"listAPolygonMultple",[]),Object(u.a)(this,"listALog",[]),Object(u.a)(this,"listAGhost",[]),Object(u.a)(this,"listHashColor",{}),Object(u.a)(this,"copyPasteGeo",[]),Object(u.a)(this,"preCapture",void 0),Object(u.a)(this,"capture",void 0),Object(u.a)(this,"captureMultiple",void 0),Object(u.a)(this,"captureHovered",void 0),Object(u.a)(this,"captureForEasing",void 0),Object(u.a)(this,"captureText",void 0),Object(u.a)(this,"listGuidedTourNPoint",[]),this.annotationInstance=t}return Object(r.a)(e,[{key:"AddGeometry",value:function(e){this.geometryList.push(e)}},{key:"RemoveGeometry",value:function(e){this.geometryList.splice(this.geometryList.indexOf(e),1)}},{key:"AddBasePoint",value:function(e){this.listBasePoint.push(e)}},{key:"RemoveBasePoint",value:function(e){this.listBasePoint.splice(this.listBasePoint.indexOf(e),1)}},{key:"AddAPoint",value:function(e){this.listAPoint.push(e)}},{key:"RemoveAPoint",value:function(e){this.listAPoint.splice(this.listAPoint.indexOf(e),1)}},{key:"AddRPoint",value:function(e){this.listRPoint.push(e)}},{key:"RemoveRPoint",value:function(e){this.listRPoint.splice(this.listRPoint.indexOf(e),1)}},{key:"AddNPoint",value:function(e){this.listNPoint.push(e)}},{key:"RemoveNPoint",value:function(e){this.listNPoint.splice(this.listNPoint.indexOf(e),1)}},{key:"AddIPoint",value:function(e){this.listIPoint.push(e)}},{key:"RemoveIPoint",value:function(e){this.listIPoint.splice(this.listIPoint.indexOf(e),1)}},{key:"AddALine",value:function(e){this.listALine.push(e)}},{key:"RemoveALine",value:function(e){this.listALine.splice(this.listALine.indexOf(e),1)}},{key:"AddARectangle",value:function(e){this.listARectangle.push(e)}},{key:"RemoveARectangle",value:function(e){this.listARectangle.splice(this.listARectangle.indexOf(e),1)}},{key:"AddACircle",value:function(e){this.listACircle.push(e)}},{key:"RemoveACircle",value:function(e){this.listACircle.splice(this.listACircle.indexOf(e),1)}},{key:"AddAArrow",value:function(e){this.listAArrow.push(e)}},{key:"RemoveAArrow",value:function(e){this.listAArrow.splice(this.listAArrow.indexOf(e),1)}},{key:"AddACurve",value:function(e){this.listACurve.push(e)}},{key:"RemoveACurve",value:function(e){this.listACurve.splice(this.listACurve.indexOf(e),1)}},{key:"AddAFreehand",value:function(e){this.listAFreehand.push(e)}},{key:"RemoveAFreehand",value:function(e){this.listAFreehand.splice(this.listAFreehand.indexOf(e),1)}},{key:"AddAFreehandSmartDrawing",value:function(e){this.listAFreehandSmartDrawing.push(e)}},{key:"RemoveAFreehandSmartDrawing",value:function(e){this.listAFreehandSmartDrawing.splice(this.listAFreehandSmartDrawing.indexOf(e),1)}},{key:"AddALineGraph",value:function(e){this.listALineGraph.push(e)}},{key:"RemoveALineGraph",value:function(e){this.listALineGraph.splice(this.listALineGraph.indexOf(e),1)}},{key:"AddAPolylineGraphWrapper",value:function(e){this.listAPolylineGraphWrapper.push(e)}},{key:"RemoveAPolylineGraphWrapper",value:function(e){this.listAPolylineGraphWrapper.splice(this.listAPolylineGraphWrapper.indexOf(e),1)}},{key:"AddAPolylineWrapper",value:function(e){this.listAPolylineWrapper.push(e)}},{key:"RemoveAPolylineWrapper",value:function(e){this.listAPolylineWrapper.splice(this.listAPolylineWrapper.indexOf(e),1)}},{key:"AddAPolygonWrapper",value:function(e){this.listAPolygonWrapper.push(e)}},{key:"RemoveAPolygonWrapper",value:function(e){this.listAPolygonWrapper.splice(this.listAPolygonWrapper.indexOf(e),1)}},{key:"AddAPolygonGraphWrapper",value:function(e){this.listAPolygonGraphWrapper.push(e)}},{key:"RemoveAPolygonGraphWrapper",value:function(e){this.listAPolygonGraphWrapper.splice(this.listAPolygonGraphWrapper.indexOf(e),1)}},{key:"AddANGonWrapper",value:function(e){this.listANGonWrapper.push(e)}},{key:"RemoveANGonWrapper",value:function(e){this.listANGonWrapper.splice(this.listANGonWrapper.indexOf(e),1)}},{key:"AddATextleaderlineWrapper",value:function(e){this.listATextleaderlineWrapper.push(e)}},{key:"RemoveATextleaderlineWrapper",value:function(e){this.listATextleaderlineWrapper.splice(this.listATextleaderlineWrapper.indexOf(e),1)}},{key:"AddAPolygonMultple",value:function(e){this.listAPolygonMultple.push(e)}},{key:"RemoveAPolygonMultple",value:function(e){this.listAPolygonMultple.splice(this.listAPolygonMultple.indexOf(e),1)}},{key:"AddGuidedTourNPoint",value:function(e){this.listGuidedTourNPoint.push(e)}},{key:"RemoveGuidedTourNPoint",value:function(e){this.listGuidedTourNPoint.splice(this.listGuidedTourNPoint.indexOf(e),1)}},{key:"AddALog",value:function(e){this.listALog.push(e)}},{key:"RemoveALog",value:function(e){this.listALog.splice(this.listALog.indexOf(e),1)}},{key:"GetUUID",value:function(){return function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}()}},{key:"GetHashColor",value:function(e){for(;;){var t=Object(Gt.b)();if(!this.listHashColor[t])return this.listHashColor[t]=e,t}}},{key:"InitGhost",value:function(e,t){ys.InitGhost(this.annotationInstance.scene,e,t)}},{key:"InitGhostPolygon",value:function(e){}},{key:"EnterGhost",value:function(e){ys.EnterGhost(e)}},{key:"LeaveGhost",value:function(e){ys.LeaveGhost(e)}},{key:"AddGhost",value:function(e){ys.AddGhost(e)}},{key:"RemoveGhost",value:function(){ys.RemoveGhost()}},{key:"Destroy",value:function(){this.annotationInstance.geometryCommon.gcmdProcessing.RemoveAll()}},{key:"Capture",get:function(){return this.capture},set:function(e){void 0!==this.capture&&(this.capture.isCaptured=!1),this.preCapture=this.capture,this.preCapture&&(this.preCapture.isCaptured=!1),this.capture=e,this.capture&&(this.annotationInstance.geometryCommon.gcmdProcessing.CheckAttachedTextleaderline(e),this.capture.isCaptured=!0,this.capture.UpdateVecsHistory())}}]),e}(),Js=function(e){return"".concat(e,"/static/images/xg-theme-assets/common/numbered-pin.svg")},Zs=function(){function e(t,n){Object(o.a)(this,e),Object(u.a)(this,"shiftTheme",1),Object(u.a)(this,"shiftThemeNumberLayerOrdering",0),Object(u.a)(this,"numLayer",-1),Object(u.a)(this,"isDone",!1),Object(u.a)(this,"queueTheme",void 0),this.customization=t,n?this.ComputeTheme(n):this.ComputeTheme(this.customization.annotationInstance.implementations.app.model.assets.theme)}return Object(r.a)(e,[{key:"PushThemeJSON",value:function(e){return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isDone){t.next=3;break}return this.queueTheme=e,t.abrupt("return");case 3:return t.next=5,b.a.awrap(this.ComputeTheme(e));case 5:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"ComputeTheme",value:function(e){var t;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return this.isDone=!1,this.customization.themeCurrent=new so,this.UpdateThemeBGType(e.mode),this.UpdateThemeInteraction(e),this.UpdateMaskColor(e.properties.maskColor),this.UpdateSelection(e.graphics.line.colorRgba,e.graphics.polygon.fill),this.BuildPropertiesData(e),this.customization.themeCurrent=this.BuildThemeDataShape(e.graphics),n.next=10,b.a.awrap(this.BuildThemeDataAsync(e.graphics));case 10:this.isDone=!0,this.queueTheme&&(t=this.queueTheme,this.queueTheme=void 0,this.ComputeTheme(t));case 12:case"end":return n.stop()}}),null,this,null,Promise)}},{key:"BuildPropertiesData",value:function(e){this.customization.themeCurrent.properties.elasticScale=e.properties.elasticScale,this.customization.themeCurrent.properties.desaturationValue=e.properties.desaturationValue,this.customization.themeCurrent.properties.timeTransitionA=e.properties.timeTransitionA,this.customization.themeCurrent.properties.timeTransitionB=e.properties.timeTransitionB}},{key:"BuildThemeDataShape",value:function(e){var t=this.customization.themeCurrent;return t.node.size=.5*e.node.sizeNode,t.node.lineWidth=2,t.node.sizeMid=.5*e.node.sizeNodeMid,t.node.lineWidthMid=2,t.polyline.strokeStyleFirstArray=[e.line.colorRgba[0],e.line.colorRgba[1],e.line.colorRgba[2],e.line.colorRgba[3]],t.polyline.strokeStyleSecondArray=[e.line.colorRgba[0],e.line.colorRgba[1],e.line.colorRgba[2],t.properties.opacity],t.polyline.lineWidth=e.line.width,t.arrow.fillStyleFirstArray=[e.arrow.colorRgba[0],e.arrow.colorRgba[1],e.arrow.colorRgba[2],e.arrow.colorRgba[3]],t.arrow.fillStyleSecondArray=[e.arrow.colorRgba[0],e.arrow.colorRgba[1],e.arrow.colorRgba[2],t.properties.opacity+.5],t.arrow.strokeStyleFirstArray=[e.arrow.colorRgba[0],e.arrow.colorRgba[1],e.arrow.colorRgba[2],e.arrow.colorRgba[3]],t.arrow.strokeStyleSecondArray=[e.arrow.colorRgba[0],e.arrow.colorRgba[1],e.arrow.colorRgba[2],t.properties.opacity],t.arrow.lineWidth=e.arrow.width,t.arrow.scale=e.arrow.scale,t.polygon.fillStyleFirstArray=[e.polygon.fill[0],e.polygon.fill[1],e.polygon.fill[2],e.polygon.fill[3]],t.polygon.fillStyleSecondArray=[e.polygon.fill[0],e.polygon.fill[1],e.polygon.fill[2],t.properties.opacity-.2],t.polygon.strokeStyleFirstArray=[e.polygon.colorRgba[0],e.polygon.colorRgba[1],e.polygon.colorRgba[2],e.polygon.colorRgba[3]],t.polygon.strokeStyleSecondArray=[e.polygon.colorRgba[0],e.polygon.colorRgba[1],e.polygon.colorRgba[2],t.properties.opacity-.2],t.polygon.lineWidth=e.polygon.width,t.freehand.fillStyleFirstArray=[e.polygon.fill[0],e.polygon.fill[1],e.polygon.fill[2],t.properties.opacity],t.freehand.strokeStyleFirstArray=[e.polygon.colorRgba[0],e.polygon.colorRgba[1],e.polygon.colorRgba[2],t.properties.opacity],t.freehand.lineWidth=e.polygon.width,t.textleaderline.scale=e.textLeaderline.scale,t.textleaderline.box.dash=e.textLeaderline.box.dash,t.textleaderline.box.lineWidth=e.textLeaderline.box.width,t.textleaderline.box.fillStyle=e.textLeaderline.box.fill,t.textleaderline.box.strokeStyle=e.textLeaderline.box.strokeStyle,t.textleaderline.handleNode.dash=e.textLeaderline.handleNode.dash,t.textleaderline.handleNode.lineWidth=e.textLeaderline.handleNode.width,t.textleaderline.handleNode.fillStyle=e.textLeaderline.handleNode.fill,t.textleaderline.handleNode.strokeStyle=e.textLeaderline.handleNode.strokeStyle,t.textleaderline.leaderline.dash=e.textLeaderline.leaderline.dash,t.textleaderline.leaderline.lineWidth=e.textLeaderline.leaderline.width,t.textleaderline.leaderline.strokeStyle=e.textLeaderline.leaderline.strokeStyle,t.textleaderline.anchorNode.dash=e.textLeaderline.anchorNode.dash,t.textleaderline.anchorNode.lineWidth=e.textLeaderline.anchorNode.width,t.textleaderline.anchorNode.fillStyle=e.textLeaderline.anchorNode.fill,t.textleaderline.anchorNode.strokeStyle=e.textLeaderline.anchorNode.strokeStyle,t.iPoint.scale=e.iconPoint.scale,t.rPoint.URL=e.regularPoint.url,t.rPoint.fillStyleFirstArray=e.regularPoint.colorRgba,t.rPoint.shadowBlur=e.regularPoint.shadowBlur,t.rPoint.shadowColor=e.regularPoint.shadowColor,t.rPoint.shadowColorHover=e.regularPoint.shadowColorHover,t.rPoint.scale=e.regularPoint.scale,t.rPoint.fillStyleSecondArray=[e.regularPoint.colorRgba[0],e.regularPoint.colorRgba[1],e.regularPoint.colorRgba[2],t.properties.opacity],t.nPoint.URL=e.numberedPoint.url,t.nPoint.shadowBlur=e.numberedPoint.shadowBlur,t.nPoint.shadowColor=e.numberedPoint.shadowColor,t.nPoint.shadowColorHover=e.numberedPoint.shadowColorHover,t.nPoint.fillStyleSecondArray=[e.numberedPoint.colorRgba[0],e.numberedPoint.colorRgba[1],e.numberedPoint.colorRgba[2],t.properties.opacity+.1],t.nPoint.fillStyleFirstArray=[e.numberedPoint.colorRgba[0],e.numberedPoint.colorRgba[1],e.numberedPoint.colorRgba[2],e.numberedPoint.colorRgba[3]],t.nPoint.fontColorArray=[e.numberedPoint.fontColor[0],e.numberedPoint.fontColor[1],e.numberedPoint.fontColor[2],e.numberedPoint.fontColor[3]],t.nPoint.fontSize=e.numberedPoint.fontSize,t.nPoint.fontFamily=e.numberedPoint.fontFamily,t.nPoint.scale=e.numberedPoint.scale,t}},{key:"BuildThemeDataAsync",value:function(e){var t,n,i,a,o,r,s,c,l,p,u,d;return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.customization.themeCurrent,e.next=3,b.a.awrap(w((h=this.customization.annotationInstance.implementations.app.CONFIG.config.BASE_URL,"".concat(h,"/static/images/xg-theme-assets/common/unnumbered-pin.svg"))));case 3:if(!(n=e.sent)){e.next=16;break}return e.next=7,b.a.awrap(P.GetObjectFromSVGXML(n));case 7:i=e.sent,(a=JSON.parse(JSON.stringify(i))).svg&&a.svg.path&&(o=a.svg.path["@attributes"].d,t.rPoint.SVG=P.GetCanvaseShapePathFromString(i,1),this.customization.annotationInstance.implementations.app.model.appCoreWrapper.browserUtility.type!==g.d.EDGE&&(r=o.split(" "),t.rPoint.SVG.path2d=P.GetCanvaseShapePathFromStringWithScale(r,t.rPoint.scale))),s=a.svg["@attributes"].height*t.rPoint.scale,t.rPoint.SVG.height=s,t.rPoint.height=s,c=a.svg["@attributes"].width*t.rPoint.scale,t.rPoint.SVG.width=c,t.rPoint.width=c;case 16:return e.next=18,b.a.awrap(w(Js(this.customization.annotationInstance.implementations.app.CONFIG.config.BASE_URL)));case 18:if(!(n=e.sent)){e.next=25;break}return e.next=22,b.a.awrap(P.GetObjectFromSVGXML(n));case 22:l=e.sent,(p=JSON.parse(JSON.stringify(l))).svg&&p.svg.path?(u=p.svg.path["@attributes"].d,t.nPoint.SVG=P.GetCanvaseShapePathFromSVGXML(n),t.nPoint.SVG.path2d=new Path2D(u)):p.svg.circle&&(d=p.svg.circle["@attributes"],t.nPoint.height=2*d.r*t.nPoint.scale,t.nPoint.width=2*d.r*t.nPoint.scale);case 25:return this.customization.annotationInstance.geometryCommon.gcmdSupporting.UpdateStyle(),e.abrupt("return",t);case 27:case"end":return e.stop()}var h}),null,this,null,Promise)}},{key:"UpdateThemeBGType",value:function(e){this.customization.themeCurrent.properties.isDarkBG="dark"===e}},{key:"UpdateMaskColor",value:function(e){this.customization.themeCurrent.properties.maskColor="rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(e[3],")"),this.customization.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvasMask.maskColor=this.customization.themeCurrent.properties.maskColor}},{key:"UpdateThemeInteraction",value:function(e){this.customization.themeCurrent.properties.outlineHoverColorArray=e.properties.outlineHoverColor,this.customization.themeCurrent.properties.outlineHoverColorRGBAString="rgba(".concat(e.properties.outlineHoverColor[0],", ").concat(e.properties.outlineHoverColor[1],", ").concat(e.properties.outlineHoverColor[2],", ").concat(e.properties.outlineHoverColor[3],")")}},{key:"UpdateSelection",value:function(e,t){this.customization.themeCurrent.selection.strokeStyleFirstArray=e,this.customization.themeCurrent.selection.fillStyleFirstArray=t}}]),e}(),qs=function e(t){Object(o.a)(this,e),Object(u.a)(this,"key",""),Object(u.a)(this,"hasShift",!1),Object(u.a)(this,"hasControl",!1),Object(u.a)(this,"ac",g.b.NONE),this.key=t.key.toUpperCase(),this.hasShift=t.shift,this.hasControl=t.control},Qs=function(){function e(t,n){Object(o.a)(this,e),Object(u.a)(this,"shortcutCommands",{}),this.customization=t,n?this.PushThemeJSON(n):this.PushThemeJSON(this.customization.annotationInstance.implementations.app.model.assets.theme)}return Object(r.a)(e,[{key:"PushThemeJSON",value:function(e){var t=this;if(e.shortcut)for(var n=function(n){Object.keys(e.shortcut[n]).forEach((function(i){var a=e.shortcut[n][i];if("select"===i&&""!==a.key){var o=new qs(a);return o.ac=g.b.SELECT,void(t.shortcutCommands[a.key.toUpperCase()]=o)}if("selectRect"===i&&""!==a.key){var r=new qs(a);return r.ac=g.b.SELECT_RECT,void(t.shortcutCommands[a.key.toUpperCase()]=r)}if("undo"===i&&""!==a.key){var s=new qs(a);return s.ac=g.b.UNDO,void(t.shortcutCommands[a.key.toUpperCase()]=s)}if("redo"===i&&""!==a.key){var c=new qs(a);return c.ac=g.b.REDO,void(t.shortcutCommands[a.key.toUpperCase()]=c)}if("rPoint"===i&&""!==a.key){var l=new qs(a);return l.ac=g.b.POINT_REGULAR,void(t.shortcutCommands[a.key.toUpperCase()]=l)}if("nPoint"===i&&""!==a.key){var p=new qs(a);return p.ac=g.b.POINT_NUMBERED,void(t.shortcutCommands[a.key.toUpperCase()]=p)}if("polyline"===i&&""!==a.key){var u=new qs(a);return u.ac=g.b.POLYLINE_BENDING,void(t.shortcutCommands[a.key.toUpperCase()]=u)}if("freehandPolyline"===i&&""!==a.key){var d=new qs(a);return d.ac=g.b.FREEHAND_POLYLINE_BENDING,void(t.shortcutCommands[a.key.toUpperCase()]=d)}if("polygon"===i&&""!==a.key){var h=new qs(a);return h.ac=g.b.POLYGON_GRAPH,void(t.shortcutCommands[a.key.toUpperCase()]=h)}if("freehandPolygon"===i&&""!==a.key){var m=new qs(a);return m.ac=g.b.FREEHAND_POLYGON_GRAPH,void(t.shortcutCommands[a.key.toUpperCase()]=m)}if("textleaderline"===i&&""!==a.key){var f=new qs(a);return f.ac=g.b.TEXT_LEADERLINE,void(t.shortcutCommands[a.key.toUpperCase()]=f)}if("singleArrow"===i&&""!==a.key){var y=new qs(a);return y.ac=g.b.ARROW_SINGLE,void(t.shortcutCommands[a.key.toUpperCase()]=y)}if("doubleArrrow"===i&&""!==a.key){var v=new qs(a);return v.ac=g.b.ARROW_DOUBLE,void(t.shortcutCommands[a.key.toUpperCase()]=v)}}))},i=0;i<e.shortcut.length;++i)n(i)}}]),e}(),$s=function(){function e(t,n){Object(o.a)(this,e),this.annotationInstance=t,this.themeRenderStyle=new Zs(this,n),this.shortcut=new Qs(this,n)}return Object(r.a)(e,[{key:"DownloadTheme",value:function(){return this.themeCurrent.DownloadJson()}}]),e}(),ec=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"canvas";Object(o.a)(this,e),Object(u.a)(this,"id","canvas"),Object(u.a)(this,"zIndex","1"),Object(u.a)(this,"loopNum",0),Object(u.a)(this,"needRenderloop",!0),Object(u.a)(this,"pause",!1),Object(u.a)(this,"frameRate",60),Object(u.a)(this,"isLoop",!0),Object(u.a)(this,"isViewChanging",!1),Object(u.a)(this,"isActive",!1),this.divHost=t,this.id=n,this.InitPre()}return Object(r.a)(e,[{key:"InitPre",value:function(){this.canvasView=document.createElement("canvas"),this.canvasView.id=this.id,this.canvasView.style.zIndex=this.zIndex,this.canvasView.style.position="absolute",this.canvasView.style.pointerEvents="none",this.ctxView=this.canvasView.getContext("2d"),this.ctxView.globalCompositeOperation="source-over",this.divHost.appendChild(this.canvasView),this.canvasView.width=this.divHost.clientWidth,this.canvasView.height=this.divHost.clientHeight,this.canvas=document.createElement("canvas"),this.canvas.id=this.id,this.canvas.style.zIndex=this.zIndex,this.canvas.style.position="absolute",this.canvas.style.pointerEvents="none",this.ctx=this.canvas.getContext("2d"),this.ctx.globalCompositeOperation="source-over",this.canvas.width=this.divHost.clientWidth,this.canvas.height=this.divHost.clientHeight,this.deltaTime=new tc,this.canvasLoopController=new nc(100),this.canvasLoopController.level=4,this.Init(),this.Loop()}},{key:"Init",value:function(){}},{key:"Loop",value:function(){var e=this;if(this.isActive){var t=performance.now();if(this.deltaTime.UpdateFPS(),this.canvasLoopController.level>3){if(6===this.canvasLoopController.level)requestAnimationFrame((function(){e.Loop()})),this.Clear(),this.Render();else if(5===this.canvasLoopController.level)this.isViewChanging,requestAnimationFrame((function(){e.Loop()})),this.Clear(),this.Render();else if(4===this.canvasLoopController.level){if(this.isViewChanging,requestAnimationFrame((function(){e.Loop()})),this.canvasLoopController.stop)return;this.Clear(),this.Render(),this.canvasLoopController.TimerForStop()}}else 1===this.canvasLoopController.level&&this.isViewChanging?this.Clear():(this.Clear(),this.Render());var n=performance.now();this.log="level:  ".concat(this.canvasLoopController.level,", total frames: ").concat(this.loopNum++," (FPS: ").concat(this.deltaTime.frameRate.toFixed(0),"), a loop took: ").concat((n-t).toFixed(2)," ms to execute."),this.LogOut()}}},{key:"InitOffscreen",value:function(e){this.canvasOffScreen=e}},{key:"Resize",value:function(e,t){this.canvas.width=e,this.canvas.height=t}},{key:"Clear",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctxView.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvasOffScreen&&this.canvasOffScreen.Clear()}},{key:"SetLevel1",value:function(){this.canvasLoopController.level=1,this.Loop()}},{key:"SetLevel2",value:function(){this.canvasLoopController.level=2,this.Loop()}},{key:"SetLevel3",value:function(){this.canvasLoopController.level=3,this.Loop()}},{key:"RenderSetLevel4",value:function(){this.canvasLoopController.stop=!0}},{key:"SetLevel4",value:function(){var e=this;this.canvasLoopController.Reset(),setTimeout((function(){e.canvasLoopController.level=4,e.Loop()}),500)}},{key:"SetLevel5",value:function(){var e=this;this.canvasLoopController.Reset(),setTimeout((function(){e.canvasLoopController.level=5,e.Loop()}),500)}},{key:"SetLevel6",value:function(){var e=this;this.canvasLoopController.Reset(),setTimeout((function(){e.canvasLoopController.level=6,e.Loop()}),500)}},{key:"log",set:function(e){this._log=e},get:function(){return this._log}}]),e}(),tc=function(){function e(){Object(o.a)(this,e),Object(u.a)(this,"last",0)}return Object(r.a)(e,[{key:"UpdateFPS",value:function(){this.now=window.performance.now(),this.msLoop=this.now-this.last,this.last=this.now,this.delta=this.delta+Math.min(1,this.msLoop/1e3),this.delta>this.frameRate&&(this.delta=this.delta-this.frameRate),this.delta=(Date.now()-this.timeLastRender)/1e3,this.timeLastRender=Date.now(),this.frameRate=1/this.delta}},{key:"dt",get:function(){return this.delta}}]),e}(),nc=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"_level",-1),Object(u.a)(this,"_stop",!1),Object(u.a)(this,"numRender",0),this.numStopFrame=t}return Object(r.a)(e,[{key:"TimerForStop",value:function(){this.numRender++,this.numRender>this.numStopFrame&&(this.numRender=0,this.stop=!0)}},{key:"Reset",value:function(){this._level=-1}},{key:"stop",get:function(){return this._stop},set:function(e){this.numRender=0,this._stop=e}},{key:"level",get:function(){return this._level},set:function(e){this._level=e}}]),e}(),ic=function(){function e(t){Object(o.a)(this,e),e.instance=this,this.hostCanvas=t,this.Init()}return Object(r.a)(e,[{key:"Init",value:function(){this.canvas=document.createElement("canvas"),this.canvas.id="OffScreen",this.canvas.style.zIndex="90",this.canvas.style.position="absolute",this.offScreenCtx=this.canvas.getContext("2d"),this.canvas.width=this.hostCanvas.width,this.canvas.height=this.hostCanvas.height}},{key:"ResizeCanvas",value:function(e,t){this.offScreenCtx.canvas.width=e,this.offScreenCtx.canvas.height=t}},{key:"Clear",value:function(){this.offScreenCtx.clearRect(0,0,this.offScreenCtx.canvas.width,this.offScreenCtx.canvas.height)}}]),e}();function ac(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var oc=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(ac()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;return Object(o.a)(this,i),t=n.call(this,e.graphicsCoreWrapper.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div,"AnnotationTool"),Object(u.a)(Object(s.a)(t),"then",0),Object(u.a)(Object(s.a)(t),"interval",0),Object(u.a)(Object(s.a)(t),"last",0),Object(u.a)(Object(s.a)(t),"asyncSafeGuard",0),Object(u.a)(Object(s.a)(t),"time",0),Object(u.a)(Object(s.a)(t),"_frameSkip",3),t.canvasWrapper=e,t.xOff=0,t.yOff=0,t.xOffCurrent=0,t.yOffCurrent=0,t.xOffPre=0,t.yOffPre=0,t.anchor=new Oe(0,0,0),t.timeLastRender=0,t.delta=0,t.frameVisTimer=.05,t.dropRate=30,t.IsRenderSkip=!0,t.isLoop=!0,t.frameRate=a,t.deltaTime.frameRate=a,t.SetLevel6(),t.frameSkip=3,t}return Object(r.a)(i,[{key:"InitPost",value:function(e){this.isActive=e,this.ctx.lineCap=g.l.ROUND}},{key:"Render",value:function(){if(this.ClearPost(),this.time+=.001,!this.isActive)return this.canvasWrapper.aCanvasOffScreen.Clear(),void this.ctxView.clearRect(0,0,this.ctxView.canvas.width,this.ctxView.canvas.height);this.canvasWrapper.aCanvasOffScreen.Clear(),this.canvasWrapper.graphicsCoreWrapper.rendererWrapper.Render(this.ctx),this.ctxView.clearRect(0,0,this.ctxView.canvas.width,this.ctxView.canvas.height),0!==this.canvas.width&&0!==this.canvas.height?this.ctxView.drawImage(this.canvas,0,0):(this.isLoop=!1,this.isActive=!1,this.canvasLoopController.stop=!0)}},{key:"Clear",value:function(){}},{key:"ClearPost",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctxView.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvasOffScreen&&this.canvasOffScreen.Clear()}},{key:"ResizeCanvas",value:function(e,t){this.ctx.canvas.width=e,this.ctx.canvas.height=t,this.ctxView.canvas.width=e,this.ctxView.canvas.height=t,this.canvasWrapper.aCanvasMask&&this.canvasWrapper.aCanvasMask.ResizeCanvas(e,t),this.canvasWrapper.aCanvasOffScreen&&this.canvasWrapper.aCanvasOffScreen.ResizeCanvas(e,t),this.canvasWrapper.aCanvasFeature&&this.canvasWrapper.aCanvasFeature.ResizeCanvas(e,t)}},{key:"Destroy",value:function(){this.SetLevel1(),this.isLoop=!1,this.isActive=!1,this.canvasLoopController.stop=!0,this.Loop=function(){},this.Render=function(){},this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}},{key:"LogOut",value:function(){}},{key:"Pause",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.isActive=!1,this.canvasWrapper.aCanvasOffScreen.Clear(),this.ctxView.clearRect(0,0,this.ctxView.canvas.width,this.ctxView.canvas.height),t>0&&setTimeout((function(){e.Resume()}),t)}},{key:"Resume",value:function(){this.isActive=!0,this.isLoop=!0,this.canvasWrapper.graphicsCoreWrapper.annotationInstance.geometryCommon.gcmdSupporting.ViewChangingForce(),this.canvasWrapper.RenderForce(),this.Loop()}},{key:"frameSkip",get:function(){return this._frameSkip},set:function(e){this._frameSkip=e}},{key:"imageSmoothingEnabled",set:function(e){this.ctx.imageSmoothingEnabled=e,this.ctxView.imageSmoothingEnabled=e}},{key:"IsRenderSkip",get:function(){return this._isRenderSkip},set:function(e){this._isRenderSkip=e}}]),i}(ec),rc=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"isActive",!0),this.canvasFeature=t,this.Init()}return Object(r.a)(e,[{key:"Init",value:function(){this.canvas=document.createElement("canvas"),this.canvas.id="AnnotationFeatureOffScreen",this.canvas.style.zIndex="99",this.canvas.style.position="absolute",this.canvas.style.pointerEvents="none",this.offScreenCtx=this.canvas.getContext("2d"),this.canvasFeature.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView?(this.canvas.width=this.canvasFeature.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.width,this.canvas.height=this.canvasFeature.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.height):(this.canvas.width=1,this.canvas.height=1)}},{key:"ResizeCanvas",value:function(e,t){this.offScreenCtx.canvas.width=e,this.offScreenCtx.canvas.height=t}},{key:"Clear",value:function(){this.offScreenCtx.clearRect(0,0,this.offScreenCtx.canvas.width,this.offScreenCtx.canvas.height)}},{key:"GetColorByPos",value:function(e,t){if(!this.isActive)return"";var n=this.offScreenCtx.getImageData(e,t,1,1).data;return"rgb(".concat(n[0],",").concat(n[1],",").concat(n[2],")")}}]),e}(),sc=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"isActive",!0),this.canvasWrapper=t,this._maskColor="#eeeeee",this.activatedMask=!1,this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone,this._width=0,this.Init()}return Object(r.a)(e,[{key:"Init",value:function(){this.canvas=document.createElement("canvas"),this.canvas.id="AnnotationToolMaskFeature",this.canvas.style.zIndex="0",this.canvas.style.position="absolute",this.canvas.style.pointerEvents="none",this.ctx=this.canvas.getContext("2d"),this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.appendChild(this.canvas),this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView?(this.canvas.width=this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.width,this.canvas.height=this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.height):(this.canvas.width=1,this.canvas.height=1),this.offScreen=new rc(this),this.RenderForce()}},{key:"Crop",value:function(){this.RenderCrop()}},{key:"ToggleRenderMode",value:function(){this.activatedMask=!this.activatedMask,this.RenderForce()}},{key:"ResizeCanvas",value:function(e,t){this.canvas.width=e,this.canvas.height=t,this.RenderForce()}},{key:"RenderForce",value:function(){if(this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView&&this.isActive)if(this.offScreen.Clear(),this.Clear(),this.canvas.width=this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.width,this.canvas.height=this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.height,this.activatedMask){if(this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.app.implementations.annotationCanvasInstance&&0===this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.app.implementations.annotationCanvasInstance.scene.listAPolygonMultple.length)return;this.RenderMask()}else this.RenderPolygonFeature()}},{key:"Clear",value:function(){this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView&&this.ctx.clearRect(0,0,this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.width,this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.height)}},{key:"RenderMask",value:function(){if(this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView&&this.canvasWrapper.graphicsCoreWrapper.annotationInstance.scene){this.ctx.lineWidth=0,this.ctx.fillStyle="#000000",this.ctx.beginPath(),this.ctx.rect(0,0,this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.width,this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.height),this.ctx.closePath(),this.ctx.fill();for(var e=0;e<this.canvasWrapper.graphicsCoreWrapper.annotationInstance.scene.listAPolygonMultple.length;++e)this.canvasWrapper.graphicsCoreWrapper.annotationInstance.scene.listAPolygonMultple[e].RenderMask(this.ctx);for(var t=0;t<this.canvasWrapper.graphicsCoreWrapper.annotationInstance.scene.listAPolygonMultple.length;++t)if(this.canvasWrapper.graphicsCoreWrapper.annotationInstance.scene.listAPolygonMultple[t].outOfExtend)return void this.Clear();this.RenderMaskPixel()}}},{key:"RenderMaskPixel",value:function(){if(this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView){for(var e=this.ctx.getImageData(0,0,this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.width,this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.height),t=e.data,n=Object(Gt.d)(this._maskColor),i=0,a=t.length;i<a;i+=4)0===t[i]?(t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2],t[i+3]=255*n[3]):t[i]=t[i+1]=t[i+2]=t[i+3]=0;this.ctx.clearRect(0,0,this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.width,this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.height),this.ctx.putImageData(e,0,0)}}},{key:"RenderPolygonFeature",value:function(){if(this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView&&this.canvasWrapper.graphicsCoreWrapper.annotationInstance.scene)for(var e=0;e<this.canvasWrapper.graphicsCoreWrapper.annotationInstance.scene.listAPolygonMultple.length;++e)this.canvasWrapper.graphicsCoreWrapper.annotationInstance.scene.listAPolygonMultple[e].Render(this.ctx)}},{key:"RenderCrop",value:function(){}},{key:"maskColor",get:function(){return this._maskColor},set:function(e){this._maskColor=e,this.RenderForce()}},{key:"width",get:function(){return this._width},set:function(e){this._width=e,this.RenderForce()}}]),e}(),cc=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"isActive",!0),this.canvasWrapper=t,this._maskColor="#000000",this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.appProperties.isStandalone,this._width=0,this.Init()}return Object(r.a)(e,[{key:"Init",value:function(){this.canvas=document.createElement("canvas"),this.canvas.id="AnnotationToolMask",this.canvas.style.zIndex="1",this.canvas.style.position="absolute",this.canvas.style.pointerEvents="none",this.ctx=this.canvas.getContext("2d"),this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.appendChild(this.canvas),this.ctx.globalCompositeOperation="source-over",this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView?(this.canvas.width=this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.width,this.canvas.height=this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView.height):(this.canvas.width=1,this.canvas.height=1),this.RenderMask()}},{key:"ResizeCanvas",value:function(e,t){this.canvas.width=e,this.canvas.height=t,this.RenderMask()}},{key:"RenderMask",value:function(){this.isActive&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.lineWidth=0,this.ctx.strokeStyle=this._maskColor,this.ctx.fillStyle=this._maskColor,this.ctx.beginPath(),this.ctx.rect(0,0,this._width,this.canvas.height),this.ctx.rect(this.canvas.width-this._width,0,this.canvas.width,this.canvas.height),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke())}},{key:"maskColor",get:function(){return this._maskColor},set:function(e){this._maskColor=e,this.RenderMask()}},{key:"width",get:function(){return this._width},set:function(e){this._width=e,this.RenderMask()}}]),e}();function lc(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var pc=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(lc()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),t=n.call(this,e.aCanvas.canvas),Object(u.a)(Object(s.a)(t),"isActive",!0),t.canvasWrapper=e,t.canvas.id="AnnotationOffScreen",t}return Object(r.a)(i,[{key:"AppendDiv",value:function(){this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.appendChild(this.canvas)}},{key:"RemoveDiv",value:function(){this.canvasWrapper.graphicsCoreWrapper.annotationInstance.implementations.app.model.modelViewWrapper.viewWrapper.div.removeChild(this.canvas)}},{key:"GetOffscreenRenderer",value:function(){return this.offScreenCtx}},{key:"Clear",value:function(){this.offScreenCtx.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"GetColorByPos",value:function(e,t){if(!this.isActive)return"";var n=this.offScreenCtx.getImageData(e,t,1,1).data;return"rgb(".concat(n[0],",").concat(n[1],",").concat(n[2],")")}}]),i}(ic),uc=function(){function e(t,n){Object(o.a)(this,e),this.graphicsCoreWrapper=t,this.aCanvas=new oc(this),this.aCanvas.SetLevel4(),this.aCanvasOffScreen=new pc(this),this.aCanvasMask=new cc(this),this.aCanvasFeature=new sc(this),this.aCanvas.InitPost(n)}return Object(r.a)(e,[{key:"Pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.aCanvas.Pause(e)}},{key:"Resume",value:function(){this.aCanvas.Resume()}},{key:"Destroy",value:function(){this.aCanvas.Destroy(),this.isActive=!1}},{key:"RenderForce",value:function(){this.aCanvas.canvasLoopController.stop=!1}},{key:"ResizeCanvas",value:function(e,t){this.aCanvas.ResizeCanvas(e,t);var n=this.graphicsCoreWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.GetMapMargin();n&&(this.aCanvasMask.width=n)}},{key:"isActive",set:function(e){this.aCanvas.isActive=e,this.aCanvasOffScreen.isActive=e,this.aCanvasMask.isActive=e,this.aCanvasFeature.isActive=e}}]),e}(),dc=function(){function e(t){Object(o.a)(this,e),this.graphicsCoreWrapper=t}return Object(r.a)(e,[{key:"ResizeCanvas",value:function(e,t){this.graphicsCoreWrapper.canvasWrapper.ResizeCanvas(e,t)}},{key:"Render",value:function(e){this.graphicsCoreWrapper.annotationInstance.implementations.Render(e)}},{key:"RenderForce",value:function(){}}]),e}(),hc=function(){function e(t,n){Object(o.a)(this,e),this.annotationInstance=t,this.canvasWrapper=new uc(this,n)}return Object(r.a)(e,[{key:"InitPost",value:function(){this.rendererWrapper=new dc(this)}},{key:"Pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.canvasWrapper.Pause(e)}},{key:"Resume",value:function(){this.canvasWrapper.Resume()}},{key:"ResizeCanvas",value:function(e,t){this.canvasWrapper.ResizeCanvas(e,t)}},{key:"RenderForce",value:function(){this.canvasWrapper.RenderForce()}},{key:"Destroy",value:function(){this.canvasWrapper.Destroy()}},{key:"RenderForceMask",value:function(){var e=this.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.GetMapMargin();e&&(this.canvasWrapper.aCanvasMask.width=e),this.annotationInstance.implementations.app.APP===g.c.GUIDED_TOUR&&(this.canvasWrapper.aCanvasMask.width=0)}}]),e}(),mc=function(){function e(t){Object(o.a)(this,e),this.apiWrapper=t}return Object(r.a)(e,[{key:"InitAddon",value:function(e){"customJSAPILayers"===e&&this.apiWrapper.annotationInstance.implementations.app.addon.InitVisualizationJSAPI(),"externalJSAPILayers"===e&&this.apiWrapper.annotationInstance.implementations.app.addon.InitVisualizationExternalGLJSAPI(),"drawingBlock"===e&&this.apiWrapper.annotationInstance.implementations.app.addon.InitDrawingBlock(),"mapticon"===e&&this.apiWrapper.annotationInstance.implementations.app.addon.InitMapticon(),"mapfilter"===e&&this.apiWrapper.annotationInstance.implementations.app.addon.InitMapfilter(),"quickCommander"===e&&this.apiWrapper.annotationInstance.implementations.app.addon.InitQuickCommander(),"smartCommander"===e&&this.apiWrapper.annotationInstance.implementations.app.addon.InitSmartCommander(),"smartDrawing"===e&&this.apiWrapper.annotationInstance.implementations.app.addon.InitSmartDrawing(),"voiceController"===e&&this.apiWrapper.annotationInstance.implementations.app.addon.InitVoiceController()}}]),e}();function fc(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return yc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yc(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function yc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var gc=function(){function e(t){Object(o.a)(this,e),Object(u.a)(this,"_optimizerTextleaderline",0),Object(u.a)(this,"_optimizerPoint",0),this.apiWrapper=t}return Object(r.a)(e,[{key:"LogCommon",value:function(e,t){try{var n=this.apiWrapper.annotationInstance.implementations.app.model.appCoreWrapper.arcGISWrapper.mapViewCore;if(n.mPoint&&n.mapView){this.apiWrapper.annotationInstance.scene.capture?this.apiWrapper.annotationInstance.scene.capture.type:"none";var i=n.mPoint;i.x=e,i.y=t;n.mapView.toMap(i)}}catch(a){}}},{key:"ToggleClusteringPoint",value:function(e){e?this.SetOptimizerClusteringPoint(g.o.COLLISION):this.SetOptimizerClusteringPoint(g.o.NONE)}},{key:"SetOptimizerClusteringPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.o.NONE;this.apiWrapper.annotationInstance.activeCommandController.acProperties.optimizerPoint=e,this.apiWrapper.annotationInstance.activeCommandController.acProperties.needExecuteOptimizer=!0,this.apiWrapper.annotationInstance.geometryCommon.gcmdSupporting.RenderForce()}},{key:"ToggleDebuggerMode",value:function(){this.ToggleInspector()}},{key:"ToggleInspector",value:function(){this.apiWrapper.annotationInstance.implementations.app.INSPECTION=!this.apiWrapper.annotationInstance.implementations.app.INSPECTION,this.apiWrapper.annotationInstance.activeCommandController.acProperties.isHiddenLog=!this.apiWrapper.annotationInstance.implementations.app.INSPECTION}},{key:"ShiftOptimizerTextleaderline",value:function(){this._optimizerTextleaderline++,this._optimizerTextleaderline%3===0?this.apiWrapper.annotationInstance.implementations.annotationCanvasInstance.activeCommandController.acProperties.optimizerTextleaderline=g.p.NONE:this._optimizerTextleaderline%3===1?this.apiWrapper.annotationInstance.implementations.annotationCanvasInstance.activeCommandController.acProperties.optimizerTextleaderline=g.p.ZOOM:this._optimizerTextleaderline%3===2&&(this.apiWrapper.annotationInstance.implementations.annotationCanvasInstance.activeCommandController.acProperties.optimizerTextleaderline=g.p.COLLISION)}},{key:"shiftActiveCluster",value:function(){this._optimizerPoint++,this._optimizerPoint%2===0?this.apiWrapper.annotationInstance.implementations.annotationCanvasInstance.activeCommandController.acProperties.optimizerPoint=g.o.NONE:this.apiWrapper.annotationInstance.implementations.annotationCanvasInstance.activeCommandController.acProperties.optimizerPoint=g.o.COLLISION}},{key:"ShiftScaleDynamicRender",value:function(){this.apiWrapper.annotationInstance.implementations.annotationCanvasInstance.activeCommandController.acProperties.isScaleDynamicRender=!this.apiWrapper.annotationInstance.implementations.annotationCanvasInstance.activeCommandController.acProperties.isScaleDynamicRender}},{key:"ShiftLog",value:function(){this.apiWrapper.annotationInstance.activeCommandController.acProperties.isHiddenLog=!this.apiWrapper.annotationInstance.activeCommandController.acProperties.isHiddenLog}},{key:"BindFromDisplay",value:function(){}},{key:"ShiftMapfilter",value:function(){}},{key:"ToggleMapfilter",value:function(e){"true"===e?this.apiWrapper.annotationInstance.implementations.app.addon.mapfilter?this.apiWrapper.annotationInstance.implementations.app.addon.mapfilter.ToggleMapfilter(!0):this.apiWrapper.annotationInstance.implementations.app.addon.InitMapfilter():"false"===e&&this.apiWrapper.annotationInstance.implementations.app.addon.mapfilter&&this.apiWrapper.annotationInstance.implementations.app.addon.mapfilter.ToggleMapfilter(!1)}},{key:"ToggleActiveCommandChain",value:function(e){"true"===e?this.apiWrapper.annotationInstance.activeCommandController.acProperties.showActiveCommandChain=!0:"false"===e&&(this.apiWrapper.annotationInstance.activeCommandController.acProperties.showActiveCommandChain=!1)}},{key:"ToggleDrawingTooltips",value:function(e){"true"===e?this.apiWrapper.annotationInstance.activeCommandController.acProperties.showTooltip=!0:"false"===e&&(this.apiWrapper.annotationInstance.activeCommandController.acProperties.showTooltip=!1)}},{key:"ToggleGrid",value:function(e){}},{key:"FromDT",value:function(){}},{key:"ToggleBorderFeaturePolygon",value:function(){this.apiWrapper.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvasFeature.ToggleRenderMode()}},{key:"ShiftGrid",value:function(){}},{key:"ShiftMeasure",value:function(){}},{key:"ToggleMeasure",value:function(e){}},{key:"TogglTooltip",value:function(e){}},{key:"TogglActiveCommandChain",value:function(e){}},{key:"ShiftSnapping",value:function(){this.apiWrapper.annotationInstance.activeCommandController.acProperties.isActivateSnapping=!this.apiWrapper.annotationInstance.activeCommandController.acProperties.isActivateSnapping}},{key:"ShiftUnitDisplay",value:function(){this.apiWrapper.annotationInstance.activeCommandController.acProperties.showUnit=!this.apiWrapper.annotationInstance.activeCommandController.acProperties.showUnit;var e,t=fc(this.apiWrapper.annotationInstance.scene.listALog);try{for(t.s();!(e=t.n()).done;){e.value.isShow=this.apiWrapper.annotationInstance.activeCommandController.acProperties.showUnit}}catch(n){t.e(n)}finally{t.f()}}},{key:"ShiftUnit",value:function(){this.apiWrapper.annotationInstance.activeCommandController.acProperties.unitEnumInt++,0===this.apiWrapper.annotationInstance.activeCommandController.acProperties.unitEnumInt?this.apiWrapper.annotationInstance.activeCommandController.acProperties.unit=Ze.KM:1===this.apiWrapper.annotationInstance.activeCommandController.acProperties.unitEnumInt?this.apiWrapper.annotationInstance.activeCommandController.acProperties.unit=Ze.METER:2===this.apiWrapper.annotationInstance.activeCommandController.acProperties.unitEnumInt&&(this.apiWrapper.annotationInstance.activeCommandController.acProperties.unit=Ze.MILE),this.apiWrapper.annotationInstance.activeCommandController.acProperties.unitEnumInt>2&&(this.apiWrapper.annotationInstance.activeCommandController.acProperties.unitEnumInt=0)}},{key:"ToggleCollisionDetection",value:function(){this.apiWrapper.annotationInstance.activeCommandController.acProperties.needCollisionDetection=!this.apiWrapper.annotationInstance.activeCommandController.acProperties.needCollisionDetection}},{key:"ActivateOffScreen",value:function(){this.apiWrapper.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvasOffScreen.AppendDiv()}},{key:"DeactivateOffScreen",value:function(){try{this.apiWrapper.annotationInstance.graphicsCoreWrapper.canvasWrapper.aCanvasOffScreen.RemoveDiv()}catch(e){console.error("no offscreen div appended")}}},{key:"ShiftBlackholeRender",value:function(){}}]),e}(),vc=function e(t){Object(o.a)(this,e),this.annotationInstance=t,this.addon=new mc(this),this.environment=new gc(this)},bc=function(){function e(t,n,i,a){Object(o.a)(this,e),this.implementations=t,this.interactionMode=this.implementations.app.model.appCoreWrapper.appAccessibility.mode,this.apiWrapper=new vc(this),this.graphicsCoreWrapper=new hc(this,i),this.scene=new Xs(this),this.renderer=new Ks(this,n),this.io=new lt(this),this.geometryCommon=new _r(this),this.activeCommandController=new Cr(this),this.customization=new $s(this,a),this.renderer.ctx=this.graphicsCoreWrapper.canvasWrapper.aCanvas.ctx,this.renderer.ctxOffscreen=this.graphicsCoreWrapper.canvasWrapper.aCanvasOffScreen.offScreenCtx,this.interactionMode}return Object(r.a)(e,[{key:"InitPost",value:function(){this.graphicsCoreWrapper.InitPost(),this.graphicsCoreWrapper.canvasWrapper.aCanvas.imageSmoothingEnabled=!0,this.renderer.InitPost()}},{key:"Resize",value:function(e,t){this.graphicsCoreWrapper.ResizeCanvas(e,t)}},{key:"Destroy",value:function(){this.renderer.Destroy(),this.scene.Destroy(),this.graphicsCoreWrapper.Destroy()}},{key:"IsCo",value:function(){}}]),e}(),xc=function(){function e(t,n,i){Object(o.a)(this,e),this.divHost=i,this.versionJSAPI=n,this.app=t}return Object(r.a)(e,[{key:"InitAnnotationCanvasInstance",value:function(e,t,n){this.annotationCanvasInstance=new bc(this,e,t,n)}},{key:"InitAnnotationSVGInstance",value:function(e,t,n){}},{key:"UpdateExtentSVG",value:function(){}},{key:"pushTheme",value:function(e){this.annotationCanvasInstance&&this.annotationCanvasInstance.geometryCommon.gcmdSupporting.PushThemeJSON(e)}},{key:"InitPost",value:function(){this.annotationCanvasInstance&&this.annotationCanvasInstance.InitPost()}},{key:"Resize",value:function(e,t){this.annotationCanvasInstance&&this.annotationCanvasInstance.Resize(e,t)}},{key:"Pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.annotationCanvasInstance&&this.annotationCanvasInstance.graphicsCoreWrapper.Pause(e)}},{key:"Resume",value:function(){this.annotationCanvasInstance&&this.annotationCanvasInstance.graphicsCoreWrapper.Resume()}},{key:"MouseEventController",value:function(e){this.UpdateEventLog(e),this.annotationCanvasInstance&&this.annotationCanvasInstance.activeCommandController.activeCommand.MouseEventController(e)}},{key:"KeyboardEventController",value:function(e){this.UpdateEventLog(e),this.annotationCanvasInstance&&this.annotationCanvasInstance.activeCommandController.activeCommand.KeyboardEventController(e)}},{key:"KeyboardEventControllerFromDocument",value:function(e){this.UpdateEventLog(e),this.annotationCanvasInstance&&this.annotationCanvasInstance.activeCommandController.activeCommand.KeyboardEventControllerFromDocument(e)}},{key:"TouchEventController",value:function(e){this.UpdateEventLog(e),this.annotationCanvasInstance&&this.annotationCanvasInstance.activeCommandController.activeCommand.TouchEventController(e)}},{key:"GestureEventController",value:function(e){this.UpdateEventLog(e),this.annotationCanvasInstance&&this.annotationCanvasInstance.activeCommandController.activeCommand.GestureEventController(e)}},{key:"Render",value:function(e){this.annotationCanvasInstance&&this.annotationCanvasInstance.renderer.Render(e)}},{key:"Destroy",value:function(){this.annotationCanvasInstance&&this.annotationCanvasInstance.Destroy()}},{key:"PushAction",value:function(e){this.annotationCanvasInstance&&this.annotationCanvasInstance.io.stateProcessingAnnotation.PushAction(e)}},{key:"PushActionTyped",value:function(e){this.annotationCanvasInstance&&this.annotationCanvasInstance.io.stateProcessingAnnotation.PushActionTyped(e)}},{key:"UpdateEventLog",value:function(e){this.annotationCanvasInstance&&this.annotationCanvasInstance.activeCommandController.acProperties.isHiddenLog}},{key:"isViewChanging",set:function(e){this.annotationCanvasInstance&&(this.annotationCanvasInstance.activeCommandController.acProperties.isViewChanging=e)}},{key:"isTouchEvent",set:function(e){this.annotationCanvasInstance&&(this.annotationCanvasInstance.activeCommandController.IsTouchEvent=e)}},{key:"isCustomAPI",set:function(e){e||this.annotationCanvasInstance&&this.annotationCanvasInstance.graphicsCoreWrapper.canvasWrapper.aCanvasMask&&(this.annotationCanvasInstance.graphicsCoreWrapper.canvasWrapper.aCanvasMask.width=0)},get:function(){return this.app.model.isCustomAPI}}]),e}();function Oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var wc={config:{BASE_URL:""},PATH_ADDON:"../../../../Addon",PATH_JSAPI:"",VERSION_JSAPI:"4.13",VERSION_APP:"7",HAS_ANIMATION:!1,LAB:!1},jc=function(){function e(t,n){var i,a;Object(o.a)(this,e),Object(u.a)(this,"CONFIG",wc),Object(u.a)(this,"PRODUCTION",!0),Object(u.a)(this,"INSPECTION",!1),this.APP=n,this.CONFIG.config=t.config;var r=t.UI;(null===(i=t.features)||void 0===i?void 0:i.hasAnimation)&&(this.CONFIG.HAS_ANIMATION=t.features.hasAnimation),t.isLab&&(this.CONFIG.LAB=t.isLab,this.CONFIG.HAS_ANIMATION=!0),this.instanceID=e.id,this.param=t,this.addon=new O(this),this.model=new it(this,this.param.id,this.param.interactionMode,this.param.mapView,this.param.mapPoint),void 0===this.param.rendererActive||!0===this.param.rendererActive?this.param.rendererActive=!0:this.param.rendererActive=!1,this.implementations=new xc(this,wc.VERSION_JSAPI,this.model.modelViewWrapper.viewWrapper.divNGraphicsHost),this.param.renderer===g.s.SVG?this.implementations.InitAnnotationSVGInstance(this.CONFIG.HAS_ANIMATION,this.param.rendererActive,this.param.theme):(this.implementations.InitAnnotationCanvasInstance(this.CONFIG.HAS_ANIMATION,this.param.rendererActive,this.param.theme),this.implementations.annotationCanvasInstance&&(this.implementations.annotationCanvasInstance.activeCommandController.acProperties.isActivateSnapping=!0)),r&&this.InitViewController(),(null===(a=this.param.features)||void 0===a?void 0:a.mapFilter)&&this.addon.InitMapfilter(),this.InitPost(),this.CONFIG.LAB&&this.InitLab()}return Object(r.a)(e,null,[{key:"id",get:function(){return this._id++}}]),Object(r.a)(e,[{key:"InitLab",value:function(){this.implementations.annotationCanvasInstance}},{key:"InitPost",value:function(){this.model.InitPost(),this.implementations.InitPost(),this.implementations.annotationCanvasInstance,this.param.renderer===g.s.SVG&&(this.model.modelViewWrapper.viewWrapper.divNGraphicsHost.style.pointerEvents="none"),this.InitPostAppEnv()}},{key:"InitPostAppEnv",value:function(){var e;switch(this.APP){case g.c.ANNOTATION_MAP:return this.implementations.annotationCanvasInstance.activeCommandController.acProperties.isScaleDynamicRender=!0,this.implementations.annotationCanvasInstance.activeCommandController.acProperties.optimizerTextleaderline=g.p.COLLISION,void((null===(e=this.param.features)||void 0===e?void 0:e.clustering)&&this.implementations.annotationCanvasInstance.apiWrapper.environment.ToggleClusteringPoint(this.param.features.clustering));case g.c.GUIDED_TOUR:default:return}}},{key:"ActivateGuidedTour",value:function(){this.param.UI||this.CONFIG.LAB}},{key:"restart",value:function(){}},{key:"toJson",value:function(){var e=this.implementations.annotationCanvasInstance.renderer.SaveDrawingGeometries();return Array.from(e).reduce((function(e,t){var n=Object(a.a)(t,2)[1],i=n.id,o=n.type,r=n.nodes,s=n.data,c=n.styles;return e[i]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oc(Object(n),!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:i,type:o,nodes:r},c&&Object.keys(c).length&&{styles:c},{},s&&Object.keys(s).length&&{data:s}),e}),{})}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.implementations.Pause(e)}},{key:"resume",value:function(){this.implementations.Resume()}},{key:"destroy",value:function(){this.model&&this.model.Destroy()}},{key:"pushAction",value:function(e){e&&this.model.PushAction(e)}},{key:"pushTheme",value:function(e){this.model.pushTheme(e)}},{key:"bindActionEmitting",value:function(e){this.EmitAction=e}},{key:"Resize",value:function(e,t){this.model.Resize(e,t),this.implementations.Resize(e,t),this.addon&&this.addon.Resize(e,t)}},{key:"InitViewController",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),null,null,null,Promise)}},{key:"Open",value:function(){this.model.ioWrapper.Open()}}]),e}();function Cc(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}Object(u.a)(jc,"_id",0);var kc=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Cc()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){return Object(o.a)(this,i),n.call(this,e,g.c.ANNOTATION_MAP)}return i}(jc);function Sc(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ic=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(Sc()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e,g.c.GUIDED_TOUR)).ActivateGuidedTour(),t}return i}(jc),Pc=n("mjBc"),Rc=n("Y/5s"),Ec=n("Z34l"),Dc=n("WXRn"),Tc=n("7faH"),Mc=n("mvvZ"),Ac=n("AuFC"),Nc=n("A7aE"),Lc=n("iBgQ"),Gc=n("Z4N4"),_c=n("NX3A"),Bc=n("itSE"),Wc=f.a.createElement,Vc=Object(m.memo)((function(e){var t=e.selector||"";return Wc(m.Fragment,null,Wc(Bc.a,e),Wc(h.a,{id:"1772223173",dynamic:[t,t,Gc.a.gappedList(_c.a.spacing.xxxs)]},["".concat(t," .esri-ui{z-index:2;}"),"".concat(t," .esri-ui-corner{").concat(Gc.a.gappedList(_c.a.spacing.xxxs),";}")]))})),Fc=n("cpdA"),Uc=n("nVDo"),zc=n("57qx"),Hc=n("rRyh"),Yc=n("eRU7"),Kc=f.a.createElement;function Xc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Jc(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Zc=function(e){Object(p.a)(d,e);var t,n=(t=d,function(){var e,n=Object(l.a)(t);if(Jc()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function d(e){var t;return Object(o.a)(this,d),t=n.call(this,e),Object(u.a)(Object(s.a)(t),"__SHOULD_LOG",!1),Object(u.a)(Object(s.a)(t),"hasEverBeenIntersected",!1),Object(u.a)(Object(s.a)(t),"init",(function(e){return void 0===e||e?(Object(y.loadCss)(t.props.config.ARCGIS_JS_API_CSS_URL),Object(y.loadModules)(["esri/config","esri/Map","esri/Basemap","esri/views/MapView","esri/core/watchUtils","esri/geometry/support/jsonUtils","esri/geometry/Point","esri/widgets/Home"]).then((function(e){var n=Object(a.a)(e,8),o=n[0],r=n[1],s=n[2],c=n[3],l=n[4],p=n[5],u=n[6],d=n[7];o.portalUrl=Object(Ec.e)(t.props.config.PORTAL_HOST)+"/content/items";var h=t.getBasemapItemId();t.esriMap=new r({basemap:h?new s({portalItem:{id:h}}):t.getBasemapString()}),t.esriMapView=new c({container:t.props.mapContainerId,center:Object(i.a)(Uc.h),ui:{components:["attribution","zoom"]},map:t.esriMap,scale:Uc.i,popup:{spinnerEnabled:!1}});var m;return t.props.hasHomeButton&&(m=new d({view:t.esriMapView}),t.esriMapView.ui.add(m,"bottom-trailing")),t.esriMapView.ui.move(["zoom"],"bottom-trailing"),t.props.shouldShowSearch&&t.createExpandableSearchWidget(),t.props.shouldShowLocate&&t.createLocateWidget(),t.setUpScrollBehavior(),t.esriMapPoint=new u,"function"===typeof t.props.onMapLoad&&t.props.onMapLoad({home:m,mapView:t.esriMapView},{jsonUtils:p}),l})).then((function(e){return new Promise((function(n,i){var a=!1,o=!1;e.whenTrueOnce(t.esriMapView,"ready",(function(){(a=!0)&&o&&n(e)})),e.whenTrueOnce(t.esriMapView,"stationary",(function(){o=!0,a&&o&&n(e)}))}))})).then((function(){t.updateVis()})).then((function(){t.esriMapView.when((function(){t.setState({isViewReady:!0}),t.initCustomGraphic()}))})).catch((function(e){console.error("Something went wrong while initializing CoreMap.",e)}))):Promise.reject("Skip loading map and custom graphics.")})),Object(u.a)(Object(s.a)(t),"customizeSearchSymbol",(function(){t.esriSearch&&t.props.shouldShowSearch&&Object(Hc.a)(t.esriSearch,t.props.storyDesign.storyTheme.themeVariables.accentColor1)})),Object(u.a)(Object(s.a)(t),"showOrHideUserLocate",(function(e){if(!e.shouldShowLocate&&t.props.shouldShowLocate)t.createLocateWidget();else if(e.shouldShowLocate&&!t.props.shouldShowLocate){var n,i;null===(n=t.esriLocate)||void 0===n||n.cancelLocate(),null===(i=t.esriMapView)||void 0===i||i.ui.remove(t.esriLocate)}})),Object(u.a)(Object(s.a)(t),"createLocateWidget",(function(){if(t.esriMapView){var e="tourMap"===t.props.type?Object(Dc.b)()?"top-left":"top-right":Object(Dc.b)()?"bottom-left":"bottom-right";t.esriLocate?t.esriMapView.ui.add([{component:t.esriLocate,position:e,index:0}]):Object(y.loadModules)(["esri/widgets/Locate"]).then((function(n){var i=new(0,Object(a.a)(n,1)[0])({view:t.esriMapView});i.graphic.popupTemplate=void 0,t.esriLocate=i,t.esriMapView.ui.add([{component:t.esriLocate,position:e,index:0}])}))}})),Object(u.a)(Object(s.a)(t),"showOrHideExpandableSearchWidget",(function(e){if(!e.shouldShowSearch&&t.props.shouldShowSearch)t.createExpandableSearchWidget();else if(e.shouldShowSearch&&!t.props.shouldShowSearch){var n,i;null===(n=t.esriSearch)||void 0===n||n.clear(),null===(i=t.esriMapView)||void 0===i||i.ui.remove(t.esriExpandableSearch)}})),Object(u.a)(Object(s.a)(t),"createExpandableSearchWidget",(function(){t.esriMapView&&(t.esriExpandableSearch?t.esriMapView.ui.add(t.esriExpandableSearch,Object(Dc.b)()?"top-right":"top-left"):Object(y.loadModules)(["esri/widgets/Search","esri/widgets/Expand"]).then((function(e){var n=Object(a.a)(e,2),i=n[0],o=n[1],r=new i({view:t.esriMapView,maxSuggestions:3,popupEnabled:!1});t.esriSearch=r,t.esriSearch.watch("viewModel.state",(function(e){"ready"===e&&t.customizeSearchSymbol()}));var s=new o({collapseIconClass:Object(Dc.b)()?"esri-icon-right-arrow":"esri-icon-left-arrow",view:t.esriMapView,content:r,mode:"floating"});t.esriExpandableSearch=s,t.esriMapView.ui.add(t.esriExpandableSearch,Object(Dc.b)()?"top-right":"top-left")})))})),Object(u.a)(Object(s.a)(t),"updateVis",(function(){(t.visManager||0!==t.props.visConfigs.length)&&(t.visManager=t.visManager||new Lc.a({mapView:t.esriMapView,themeVariables:t.props.storyDesign.storyTheme.themeVariables,updateRender:t.props.setVisRenderer,updateHistogram:t.props.setVisHistogram}),t.visManager.update(t.props.visConfigs))})),Object(u.a)(Object(s.a)(t),"setUpScrollBehavior",(function(){var e=t.mapContainer.current;e&&(e.addEventListener("wheel",(function(e){t.props.isScrollZoomingEnabled||e.stopPropagation()}),{capture:!0,passive:!0}),e.addEventListener("keydown",(function(e){e.shiftKey||"ArrowUp"!==e.key&&"ArrowDown"!==e.key||t.props.isScrollZoomingEnabled||e.stopPropagation()}),!0))})),Object(u.a)(Object(s.a)(t),"initCustomGraphic",(function(){var e={interactionMode:t.props.supportEditing?g.k.DRAWING:g.k.INTERACTIVE_VIEWER,id:t.props.graphicsContainerId,mapView:t.esriMapView,mapPoint:t.esriMapPoint,UI:!1,theme:t.getTheme(),isLab:t.props.areLabFeaturesEnabled,config:{BASE_URL:t.props.config.BASE_URL},features:{clustering:!1}};t.customGraphics="expressMap"===t.props.type?new kc(e):new Ic(e),t.props.setCustomGraphics(t.customGraphics)})),Object(u.a)(Object(s.a)(t),"getTheme",(function(){var e=Object(Fc.d)(t.props.theme.id,t.props.storyDesign.storyTheme.themeVariables,t.props.groupColors,t.props.shouldDownScaleGraphics,t.props.config.BASE_URL);if(t.__SHOULD_LOG){var n,i=e.graphics,a=i.regularPoint,o=i.numberedPoint,r=i.polygon,s=i.line;console.group("PUSH THEME TO GRAPHICS:"),console.debug("RegularPoint: %c  ","background: rgba(".concat(a.colorRgba.join(),"); padding: 2px; ")),console.debug("NumberedPoint: %c42","background: rgba(".concat(o.colorRgba.join(),"); color: rgba(").concat(o.fontColor.join(),"); font-weight: ").concat(o.fontWeight,"; font-size: ").concat(o.fontSize,"; padding: 2px; border-radius: 50%;")),console.debug("Line: %c\t","background: transparent; border: ".concat(s.width,"px solid rgba(").concat(s.colorRgba.join(),"); border-top: 0;")),console.debug("Polygon: %c\t","background: rgba(".concat(null===(n=r.fill)||void 0===n?void 0:n.join(),"); border: ").concat(r.width,"px solid rgba(").concat(r.colorRgba.join(),");")),console.groupEnd()}return e})),Object(u.a)(Object(s.a)(t),"updateThemeToCustomGraphics",(function(){var e;null===(e=t.customGraphics)||void 0===e||e.pushTheme(t.getTheme()),t.customizeSearchSymbol()})),Object(u.a)(Object(s.a)(t),"conditionallyUpdateThemeToCustomGraphics",(function(e){var n=e.shouldDownScaleGraphics!==t.props.shouldDownScaleGraphics,i=e.storyDesign.storyTheme!==t.props.storyDesign.storyTheme||e.theme.id!==t.props.theme.id||!Object(Tc.b)(e.groupColors,t.props.groupColors);(n||i)&&t.updateThemeToCustomGraphicsDebouncedly()})),Object(u.a)(Object(s.a)(t),"getBasemapString",(function(){return t.getBasemapDefinition(t.props).stringName||t.props.storyDesign.storyTheme.themeVariables.basemaps.basemapPrimary.stringName||t.props.storyDesign.storyTheme.themeVariables.basemaps.basemapAlt.stringName||"gray-vector"})),Object(u.a)(Object(s.a)(t),"getBasemapDefinition",(function(e){return Object(zc.i)(e.storyDesign.storyTheme.themeVariables.basemaps,e.basemap||function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xc(Object(n),!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},zc.a))})),Object(u.a)(Object(s.a)(t),"getBasemapItemId",(function(){return t.props.config.BASEMAP_ITEMS[t.getBasemapDefinition(t.props).id]})),Object(u.a)(Object(s.a)(t),"setBasemap",(function(){if(t.esriMap&&t.esriMap.basemap){var e=t.getBasemapItemId();e?Object(y.loadModules)(["esri/Basemap"]).then((function(n){var i=new(0,Object(a.a)(n,1)[0])({portalItem:{id:e}});t.esriMap.basemap=i})):t.esriMap.basemap=t.getBasemapString()}})),Object(u.a)(Object(s.a)(t),"setUpInteractionObserver",(function(){"boolean"===typeof t.props.isIntersecting&&"function"===typeof t.props.observe&&t.mapContainer.current&&t.props.observe(t.mapContainer.current)})),Object(u.a)(Object(s.a)(t),"handleIntersecting",(function(){t.props.isIntersecting?t.hasEverBeenIntersected?t.esriMapView&&t.mapContainer.current&&!t.esriMapView.container&&(t.esriMapView.container=t.mapContainer.current):(t.init().then((function(){t.esriMapView.watch("suspended",(function(e){!e&&t.customGraphics&&t.customGraphics.resume()}))})),t.hasEverBeenIntersected=!0):t.esriMapView&&t.esriMapView.container&&(t.customGraphics&&t.customGraphics.pause(),t.esriMapView.container=null)})),Object(u.a)(Object(s.a)(t),"isInLazyLoadingMode",(function(){return"boolean"===typeof t.props.isIntersecting})),t.mapContainer=Object(m.createRef)(),t.updateThemeToCustomGraphicsDebouncedly=Object(Mc.c)(t.updateThemeToCustomGraphics,100),t.handleIntersectingDebouncedly=Object(Mc.c)(t.handleIntersecting,50),t.state={isViewReady:!1},t}return Object(r.a)(d,[{key:"componentDidMount",value:function(){this.setUpInteractionObserver(),this.isInLazyLoadingMode()||this.init()}},{key:"componentDidUpdate",value:function(e){this.getBasemapDefinition(e).id!==this.getBasemapDefinition(this.props).id&&this.setBasemap(),Object(Tc.b)(e.visConfigs,this.props.visConfigs)||this.updateVis(),this.conditionallyUpdateThemeToCustomGraphics(e),this.isInLazyLoadingMode()&&(e.isIntersecting!==this.props.isIntersecting||this.props.isIntersecting&&!this.hasEverBeenIntersected)&&this.handleIntersectingDebouncedly(),this.showOrHideExpandableSearchWidget(e),this.showOrHideUserLocate(e)}},{key:"render",value:function(){return Kc(m.Fragment,null,Kc("div",{className:"jsx-3215403212 core-map"},Kc("div",{"aria-label":this.props.ariaLabel,"data-blockid":this.props.blockId,id:this.props.mapContainerId,ref:this.mapContainer,role:"application",style:{height:"100%",width:"100%",position:"absolute",backgroundColor:"transparent"},className:"jsx-3215403212"}),Kc("div",{id:this.props.graphicsContainerId,className:"jsx-3215403212"})),this.state.isViewReady&&Kc(Yc.a,{view:this.esriMapView,prevent:this.props.isStatic}),Kc(h.a,{id:"3215403212"},[".core-map.jsx-3215403212{height:100%;width:100%;z-index:0;position:relative;overflow:hidden;}"]),Kc(Vc,{selector:"#".concat(this.props.mapContainerId)}))}},{key:"componentWillUnmount",value:function(){this.customGraphics&&this.customGraphics.destroy(),this.esriMapView&&this.esriMapView.destroy()}}]),d}(m.PureComponent);t.a=Object(Ac.c)(Object(Pc.b)(Object(Nc.b)(Object(Rc.d)(Zc))))},QSI2:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return f}));var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("ERkP"),p=n.n(l),u=p.a.createElement;function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var h=p.a.createContext(!1),m=function(e){return function(t){Object(c.a)(p,t);var n,l=(n=p,function(){var e,t=Object(s.a)(n);if(d()){var i=Object(s.a)(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Object(r.a)(this,e)});function p(){return Object(a.a)(this,p),l.apply(this,arguments)}return Object(o.a)(p,[{key:"render",value:function(){var t=this;return u(h.Consumer,null,(function(n){return u(e,Object(i.a)({},t.props,{isDocked:n}))}))}}]),p}(l.PureComponent)},f={common:"transition: opacity 0.5s, visibility 0.5s;",makeShown:"opacity:1; visibility:visible;",makeHidden:"opacity:0; visibility:hidden;"}},QhVD:function(e,t,n){"use strict";var i,a,o;n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c})),function(e){e.simpleLocation="simpleLocation",e.numColor="numColor",e.numSize="numSize",e.numColorSize="numColorSize",e.classBreak="classBreak"}(i||(i={})),function(e){e.esriFieldTypeGeometry="esriFieldTypeGeometry",e.esriFieldTypeDouble="esriFieldTypeDouble",e.esriFieldTypeInteger="esriFieldTypeInteger",e.esriFieldTypeSingle="esriFieldTypeSingle",e.esriFieldTypeSmallInteger="esriFieldTypeSmallInteger",e.esriFieldTypeString="esriFieldTypeString"}(a||(a={})),function(e){e.esriGeometryPoint="esriGeometryPoint",e.esriGeometryPolyline="esriGeometryPolyline",e.esriGeometryPolygon="esriGeometryPolygon"}(o||(o={}));var r,s,c,l={};l[i.simpleLocation]={type:i.simpleLocation,title:"Simple symbols",geometryTypeAllowed:[o.esriGeometryPoint,o.esriGeometryPolyline,o.esriGeometryPolygon],fieldTypesAllowed:[]},l[i.numColor]={type:i.numColor,title:"Numerical - color",geometryTypeAllowed:[o.esriGeometryPoint,o.esriGeometryPolyline,o.esriGeometryPolygon],fieldTypesAllowed:[[a.esriFieldTypeDouble,a.esriFieldTypeInteger,a.esriFieldTypeSingle,a.esriFieldTypeSmallInteger]]},l[i.numSize]={type:i.numSize,title:"Numerical - size",geometryTypeAllowed:[o.esriGeometryPoint,o.esriGeometryPolyline],fieldTypesAllowed:[[a.esriFieldTypeDouble,a.esriFieldTypeInteger,a.esriFieldTypeSingle,a.esriFieldTypeSmallInteger]]},l[i.numColorSize]={type:i.numColorSize,title:"Numerical - color & size",geometryTypeAllowed:[o.esriGeometryPoint,o.esriGeometryPolyline],fieldTypesAllowed:[[a.esriFieldTypeDouble,a.esriFieldTypeInteger,a.esriFieldTypeSingle,a.esriFieldTypeSmallInteger],[a.esriFieldTypeDouble,a.esriFieldTypeInteger,a.esriFieldTypeSingle,a.esriFieldTypeSmallInteger]]},l[i.classBreak]={type:i.classBreak,title:"Category - color",geometryTypeAllowed:[o.esriGeometryPoint,o.esriGeometryPolyline,o.esriGeometryPolygon],fieldTypesAllowed:[[a.esriFieldTypeDouble,a.esriFieldTypeInteger,a.esriFieldTypeSingle,a.esriFieldTypeSmallInteger]]},function(e){e.serviceUrl="serviceUrl",e.clientSideGraphics="clientSideGraphics"}(r||(r={})),function(e){e.light="light",e.dark="dark"}(s||(s={})),function(e){e.vectorTileLayer="vectorTileLayer"}(c||(c={}))},Qquf:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"question-circle",path:"M7.5,1 C3.35786438,1 5.07265313e-16,4.35786438 0,8.5 C-5.07265313e-16,12.6421356 3.35786438,16 7.5,16 C11.6421356,16 15,12.6421356 15,8.5 C14.9950408,4.35992027 11.6400797,1.00495917 7.5,1 Z M7.501,15.1 C4.83145822,15.1004045 2.42455183,13.4926226 1.40268214,11.0264036 C0.380812456,8.56018471 0.94523358,5.72124304 2.83274168,3.83344891 C4.72024977,1.94565479 7.55910589,1.38080349 10.0254796,2.40229947 C12.4918534,3.42379545 14.1,5.83045819 14.1,8.5 C14.0955931,12.1428621 11.1438614,15.0950411 7.501,15.1 L7.501,15.1 Z M7.5,11.5 C8.05228475,11.5 8.5,11.9477153 8.5,12.5 C8.5,13.0522847 8.05228475,13.5 7.5,13.5 C6.94771525,13.5 6.5,13.0522847 6.5,12.5 C6.5,11.9477153 6.94771525,11.5 7.5,11.5 Z M8,10 L7,10 C6.99127316,9.00405637 7.4700064,8.06675494 8.282,7.49 C8.752,7.028 9.018,6.744 9.014,6.273 C9.00100417,5.90643632 8.83652525,5.56168941 8.5597813,5.32096008 C8.28303735,5.08023075 7.91882994,4.96509298 7.554,5.003 C7.16009916,4.96670286 6.76894177,5.09659144 6.47499271,5.3612975 C6.18104365,5.62600357 6.0110263,6.00146228 6.006,6.397 L5.006,6.397 C5.006,3.307 10.015,3.243 10.014,6.269 C9.9698705,7.03397948 9.59269283,7.74118762 8.982,8.204 C8.462,8.715 8,8.995 8,10 Z",viewBox:"0 0 16 16",flipAr:!0})}return c}(n("MEC2").a)},Qv2g:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("Z4N4"),c=n("NX3A"),l=n("V+ka"),p=r.a.createElement;t.a=Object(l.b)((function(e){return p(o.Fragment,null,p("div",{className:a.a.dynamic([["4204133915",[s.a.gapped("column",c.a.spacing.xxs),e.appOffset.top,c.a.spacing.xs]]])+" sticky-container"},p("div",{className:a.a.dynamic([["4204133915",[s.a.gapped("column",c.a.spacing.xxs),e.appOffset.top,c.a.spacing.xs]]])+" buttons"},p("div",{className:a.a.dynamic([["4204133915",[s.a.gapped("column",c.a.spacing.xxs),e.appOffset.top,c.a.spacing.xs]]])+" buttons-wrapper"},e.children)),p("div",{className:a.a.dynamic([["4204133915",[s.a.gapped("column",c.a.spacing.xxs),e.appOffset.top,c.a.spacing.xs]]])+" sticky-background"})),p(a.a,{id:"4204133915",dynamic:[s.a.gapped("column",c.a.spacing.xxs),e.appOffset.top,c.a.spacing.xs]},[".buttons-wrapper.__jsx-style-dynamic-selector{pointer-events:initial;".concat(s.a.gapped("column",c.a.spacing.xxs),";}"),".sticky-container.__jsx-style-dynamic-selector,.sticky-background.__jsx-style-dynamic-selector{position:absolute;height:100%;width:100%;pointer-events:none;}",".buttons.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;position:-webkit-sticky;position:sticky;top:".concat(e.appOffset.top,";width:100%;z-index:8;pointer-events:none;padding:").concat(c.a.spacing.xs,";}")]))}))},Qy73:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return y}));var i=n("zjfJ"),a=(n("Abkm"),n("Z4N4")),o=n("QhVD"),r=n("AEMd");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){if("string"===typeof e){if("rgba"===e.substring(0,4)&&e.length>=13&&e.length<=24){var t=e.substring(5,e.length-1).split(",");return"rgb(".concat(t.slice(0,3).toString(),")")}}else if(e&&e.constructor===Array){if(4===e.length)return"rgb(".concat(e.slice(0,3).toString(),")");if(3===e.length)return"rgb(".concat(e.toString(),")")}return""}function p(e){switch(e){case o.d.numColor:return"HistogramColorSlider";case o.d.numSize:return"HistogramGreySlider";default:return null}}function u(e,t,n,i,a,r,s,c,l){if(t===o.d.simpleLocation)return d(n,r,s,c);if(!i.length)return d(n,r,s,c);switch(t){case o.d.classBreak:var p=function(e){var t=e.sort((function(e,t){return e-t})),n=0,i=[];for(;n<t.length-1;)i[n]=[t[n],t[n+1]],n+=1;return i}([a[i[0]].min,a[i[0]].max,a[i[0]].avg+2*a[i[0]].stddev,a[i[0]].avg+1*a[i[0]].stddev,a[i[0]].avg,a[i[0]].avg-1*a[i[0]].stddev,a[i[0]].avg-2*a[i[0]].stddev]);return{field:i[0],classBreakInfos:[{minValue:p[0][0],maxValue:p[0][1],label:"".concat(p[0][0].toFixed(2)," ~ ").concat(p[0][1].toFixed(2)),symbol:f(n,r,c,r.colorScheme.categorical.scheme.default[0])},{minValue:p[1][0],maxValue:p[1][1],label:"".concat(p[1][0].toFixed(2)," ~ ").concat(p[1][1].toFixed(2)),symbol:f(n,r,c,r.colorScheme.categorical.scheme.default[1])},{minValue:p[2][0],maxValue:p[2][1],label:"".concat(p[2][0].toFixed(2)," ~ ").concat(p[2][1].toFixed(2)),symbol:f(n,r,c,r.colorScheme.categorical.scheme.default[2])},{minValue:p[3][0],maxValue:p[3][1],label:"".concat(p[3][0].toFixed(2)," ~ ").concat(p[3][1].toFixed(2)),symbol:f(n,r,c,r.colorScheme.categorical.scheme.default[3])},{minValue:p[4][0],maxValue:p[4][1],label:"".concat(p[4][0].toFixed(2)," ~ ").concat(p[4][1].toFixed(2)),symbol:f(n,r,c,r.colorScheme.categorical.scheme.default[4])},{minValue:p[5][0],maxValue:p[5][1],label:"".concat(p[5][0].toFixed(2)," ~ ").concat(p[5][1].toFixed(2)),symbol:f(n,r,c,r.colorScheme.categorical.scheme.default[5])}]};case o.d.numColor:var u=y(a[i[0]].min+.25*(a[i[0]].max-a[i[0]].min),a[i[0]].min+.75*(a[i[0]].max-a[i[0]].min),5);return{colorField:i[0],defaultLabel:i[0],defaultSymbol:h(n,r,s,c),colorStops:(l?l(c):Array(5)).map((function(e,t,n){return{value:u[t],color:e||r.colorScheme.primary.scheme.default[t],label:0===t?"Low":t===n.length-1?"High":void 0}}))};case o.d.numSize:var g="polyline"===n?"line":n,v="point"===g||"esriGeometryPoint"===g?r.mapping.visualization.proportional.primary[g].size[0]:r.mapping.visualization.proportional.primary[g].width[0],b="point"===g||"esriGeometryPoint"===g?r.mapping.visualization.proportional.primary[g].size[1]:r.mapping.visualization.proportional.primary[g].width[1];return{sizeField:i[0],valueUnit:"unknown",defaultLabel:"unknown",defaultSymbol:m(n,r,s,c,v),sizeStops:[{value:a[i[0]].min+.25*(a[i[0]].max-a[i[0]].min),size:v,label:"Low"},{value:a[i[0]].min+.75*(a[i[0]].max-a[i[0]].min),size:b,label:"High"}]};case o.d.numColorSize:return{colorField:i[0],sizeField:i[1],valueUnit:"unknown",defaultLabel:"unknown",defaultSymbol:h(n,r,s,c),colorStops:[{value:a[i[0]].min,color:r.colorScheme.primary.scheme.default[0]},{value:(a[i[0]].min+a[i[0]].max)/2,color:r.colorScheme.primary.scheme.default[1]},{value:a[i[0]].max,color:r.colorScheme.primary.scheme.default[2]}],sizeStops:[{value:a[i[1]].min,size:v},{value:(a[i[1]].min+a[i[1]].max)/2,size:(v+b)/2},{value:a[i[1]].max,size:b}]};default:return d(n,r,s,c)}}function d(e,t,n,i){var o=t.mapping.visualization.simple.primary,s=n[r.a[i]];return"point"===e||"esriGeometryPoint"===e?{url:Object(r.g)(a.a.hexA(s,.65)),type:o.point.type,width:o.point.width,height:o.point.height}:"line"===e||"polyline"===e||"esriGeometryLine"===e?{color:s,type:o.line.type,style:o.line.style,cap:o.line.cap,join:o.line.join,width:o.line.width}:{color:a.a.hexA(s,.15),type:o.polygon.type,style:o.polygon.style,outline:c({},o.polygon.outline,{color:a.a.hexA(s,.35)})}}function h(e,t,n,i){var a=t.mapping.visualization.choropleth.primary;return"point"===e||"esriGeometryPoint"===e?{color:"",type:a.point.type,style:a.point.style,size:a.point.size,outline:a.point.outline}:"line"===e||"polyline"===e||"esriGeometryLine"===e?{color:"",type:a.line.type,style:a.line.style,cap:a.line.cap,join:a.line.join,width:a.line.width}:{color:"",type:a.polygon.type,style:a.polygon.style,outline:a.polygon.outline}}function m(e,t,n,i,o){var s=t.mapping.visualization.proportional.primary,l=n[r.a[i]];return"point"===e||"esriGeometryPoint"===e?{size:o,color:a.a.hexA(l,.35),type:s.point.type,style:s.point.style,outline:c({},s.point.outline,{color:a.a.hexA(l,.45)})}:"line"===e||"polyline"===e||"esriGeometryLine"===e?{color:a.a.hexA(l,.45),type:s.line.type,style:s.line.style,cap:s.line.cap,join:s.line.join,width:o}:{type:s.polygon.type,style:s.polygon.style,outline:s.polygon.outline}}function f(e,t,n,i){var a=t.mapping.visualization.categorical.primary;return"point"===e||"esriGeometryPoint"===e?{color:i,type:a.point.type,style:a.point.style,size:a.point.size,outline:a.point.outline}:"line"===e||"polyline"===e||"esriGeometryLine"===e?{color:i,type:a.line.type,style:a.line.style,cap:a.line.cap,join:a.line.join,width:a.line.width}:{color:i,type:a.polygon.type,style:a.polygon.style,outline:a.polygon.outline}}function y(e,t,n){for(var i=0,a=(t-e)/n,o=[];i<n-1;)o.push(e+i*a),i+=1;return o.push(t),o}},RP1v:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),function(e){e.PointRegular="POINT_REGULAR",e.PointNumbered="POINT_NUMBERED",e.Line="LINE",e.Area="AREA"}(i||(i={}));var a,o="POINT";!function(e){e[e.TitleOnly=0]="TitleOnly",e[e.Default=1]="Default",e[e.Hidden=2]="Hidden"}(a||(a={}))},RlLw:function(e,t,n){"use strict";n.r(t),n.d(t,"SeparatorViewer",(function(){return v}));var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("O94r"),h=n.n(d),m=n("NX3A"),f=n("A7aE"),y=u.a.createElement;function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(g()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){var e=this.props.storyDesign.storyTheme.themeVariables,t=e.accentColor1,n=e.separatorStyle,i=e.titleColor,a=!n||"line-single"===n;return y("div",{className:l.a.dynamic([["2856606183",[a?"40%":"100%",a?"initial":"center",t,m.a.spacing.xxxxs,i,m.a.spacing.xxxxs,i,m.a.spacing.xxxs,m.a.spacing.xxxs,t]]])+" container"},y("div",{"data-testid":"Separator",className:l.a.dynamic([["2856606183",[a?"40%":"100%",a?"initial":"center",t,m.a.spacing.xxxxs,i,m.a.spacing.xxxxs,i,m.a.spacing.xxxs,m.a.spacing.xxxs,t]]])+" "+(h()("separator",n)||"")}),!a&&y("div",{"data-testid":"Separator",className:l.a.dynamic([["2856606183",[a?"40%":"100%",a?"initial":"center",t,m.a.spacing.xxxxs,i,m.a.spacing.xxxxs,i,m.a.spacing.xxxs,m.a.spacing.xxxs,t]]])+" second-div"}),"diamonds-triple"===n&&y("div",{"data-testid":"Separator",className:l.a.dynamic([["2856606183",[a?"40%":"100%",a?"initial":"center",t,m.a.spacing.xxxxs,i,m.a.spacing.xxxxs,i,m.a.spacing.xxxs,m.a.spacing.xxxs,t]]])+" third-div"}),y(l.a,{id:"2856606183",dynamic:[a?"40%":"100%",a?"initial":"center",t,m.a.spacing.xxxxs,i,m.a.spacing.xxxxs,i,m.a.spacing.xxxs,m.a.spacing.xxxs,t]},[".container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;width:".concat(a?"40%":"100%",";-webkit-box-pack:").concat(a?"initial":"center",";-webkit-justify-content:").concat(a?"initial":"center",";-ms-flex-pack:").concat(a?"initial":"center",";justify-content:").concat(a?"initial":"center",";}"),".separator.__jsx-style-dynamic-selector{height:0.1rem;width:100%;background-color:".concat(t,";}"),".line-double.__jsx-style-dynamic-selector{height:".concat(m.a.spacing.xxxxs,";background-color:").concat(i,";}"),".line-double.__jsx-style-dynamic-selector+.second-div.__jsx-style-dynamic-selector{height:0.2rem;width:100%;margin-top:".concat(m.a.spacing.xxxxs,";background-color:").concat(i,";}"),".diamonds-triple.__jsx-style-dynamic-selector,.diamonds-triple.__jsx-style-dynamic-selector+.second-div.__jsx-style-dynamic-selector,.diamonds-triple.__jsx-style-dynamic-selector+.second-div.__jsx-style-dynamic-selector+.third-div.__jsx-style-dynamic-selector{height:".concat(m.a.spacing.xxxs,";width:").concat(m.a.spacing.xxxs,";background-color:").concat(t,";margin:0 0.6rem;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);}")]))}}]),c}(p.PureComponent);t.default=Object(f.b)(v)},RuJI:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"circle",path:"M16 1a15 15 0 1 0 15 15A14.999 14.999 0 0 0 16 1zm0 27a12 12 0 1 1 12-12 12.013 12.013 0 0 1-12 12z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},S15H:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return y})),n.d(t,"b",(function(){return b})),n.d(t,"d",(function(){return x}));var i=n("VtSi"),a=n.n(i),o=n("N8kh"),r=n("79uv"),s=n("Q1mh"),c=n("vpyF"),l=n("DeSy");function p(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var d=function(e,t){var n,i,a;return("admin"===(null===(n=e.userMembership)||void 0===n?void 0:n.memberType)||"owner"===(null===(i=e.userMembership)||void 0===i?void 0:i.memberType)||!e.isViewOnly&&"member"===(null===(a=e.userMembership)||void 0===a?void 0:a.memberType))&&(!t&&(!e.capabilities||!e.capabilities.includes("updateitemcontrol"))||!!t)},h=function(e){var t,n;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.requiredSharingLevel.groups&&0!==e.requiredSharingLevel.groups.length){i.next=2;break}return i.abrupt("return",!1);case 2:if(!e.isNestedItem||e.itemDetails.access!==o.a.PUBLIC&&e.requiredSharingLevel.access!==o.a.PUBLIC){i.next=4;break}return i.abrupt("return",!1);case 4:return i.next=6,a.a.awrap(Object(r.d)({itemDetails:e.itemDetails,userSession:e.userSession}));case 6:if(t=i.sent,0!==(n=e.requiredSharingLevel.groups.filter((function(e){return!t.includes(e)}))).length){i.next=10;break}return i.abrupt("return",!1);case 10:return i.abrupt("return",n);case 11:case"end":return i.stop()}}),null,null,null,Promise)},m=function(e){var t,n,i,r,s;return a.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if("update"===(l=e.itemDetails).itemControl||"admin"===l.itemControl||e.itemDetails.access===o.a.PUBLIC){c.next=2;break}return c.abrupt("return",!1);case 2:return c.next=4,a.a.awrap(e.userSession.getUser());case 4:if(t=c.sent,e.requiredSharingLevel.access!==o.a.ORG||!(e.storyMapUserPrivileges&&!e.storyMapUserPrivileges.canShareOrg||!e.storyMapUserPrivileges&&t.privileges&&t.privileges.indexOf("portal:user:shareToOrg")<0&&t.privileges.indexOf("portal:admin:shareToOrg")<0)){c.next=7;break}return c.abrupt("return",!1);case 7:if(e.requiredSharingLevel.access!==o.a.PUBLIC||!(e.storyMapUserPrivileges&&!e.storyMapUserPrivileges.canSharePublic||!e.storyMapUserPrivileges&&t.privileges&&t.privileges.indexOf("portal:user:shareToPublic")<0&&t.privileges.indexOf("portal:admin:shareToPublic")<0)){c.next=9;break}return c.abrupt("return",!1);case 9:if(!(e.requiredSharingLevel.groups&&e.requiredSharingLevel.groups.length>0&&(e.storyMapUserPrivileges&&!e.storyMapUserPrivileges.canShareToGroup||!e.storyMapUserPrivileges&&t.privileges&&t.privileges.indexOf("portal:user:shareToGroup")<0&&t.privileges.indexOf("portal:admin:shareToGroup")<0))){c.next=11;break}return c.abrupt("return",!1);case 11:if(!e.newRequiredGroups){c.next=30;break}n=p(e.newRequiredGroups),c.prev=13,r=function(){var e,n=i.value,a=null===(e=t.groups)||void 0===e?void 0:e.find((function(e){return e.id===n}));if(!a||!d(a))return{v:!1}},n.s();case 16:if((i=n.n()).done){c.next=22;break}if("object"!==typeof(s=r())){c.next=20;break}return c.abrupt("return",s.v);case 20:c.next=16;break;case 22:c.next=27;break;case 24:c.prev=24,c.t0=c.catch(13),n.e(c.t0);case 27:return c.prev=27,n.f(),c.finish(27);case 30:return c.abrupt("return",!0);case 31:case"end":return c.stop()}var l}),null,null,[[13,24,27,30]],Promise)},f=function(e){return e.typeKeywords.indexOf("Requires Credits")>=0},y=function(e){return e.typeKeywords.indexOf("Requires Subscription")>=0},g=function(e){try{var t=new URL(e);return t.origin+t.pathname.replace(/\/\d*$/,"")}catch(n){return e}},v=function(e,t){try{var n=t.rules.sharing.appProxy.existingAppProxy.proxies.filter((function(t){return e===t.sourceUrl})).length>0,i=t.rules.sharing.appProxy.serviceProxyParams.referrers.filter((function(e){return!t.rules.sharing.appProxy.existingAppProxy.referrers.includes(e)})).length>0;return n&&!i}catch(a){return!1}},b=function(e,t){var n,i,r,p,u,d,b,x,O,w,j,C,k;return a.a.async((function(S){for(;;)switch(S.prev=S.next){case 0:if(i={access:e.access},r=(null===(n=t.rules.sharing)||void 0===n?void 0:n.requiredSharingLevel)?t.rules.sharing.requiredSharingLevel:{access:e.access},p=[o.a.PRIVATE,o.a.SHARED,o.a.ORG,o.a.PUBLIC],t.item.type!==l.d.MAP_LAYER||r.access!==o.a.PUBLIC){S.next=12;break}if(u=f(e),d=y(e),b=g(e.url),!u&&!d||v(b,t)){S.next=12;break}return x=!!(t.rules.sharing&&t.rules.sharing.appProxy&&t.rules.sharing.appProxy.isAppAdmin&&(t.rules.sharing.appProxy.isRegisteredApp||!t.rules.sharing.appProxy.isRegisteredApp&&t.rules.sharing.appProxy.registerAppParams&&t.rules.sharing.appProxy.registerAppParams.redirect_uris.length>0)),(O={hasIssue:!0,sharingLevel:i,issue:{type:"app-proxy-required",hasFix:x,severity:"error",isPremiumContent:u,isSubscriberContent:d}}).issue.hasFix&&(O.issue.fix={type:"app-proxy",sourceUrl:b}),S.abrupt("return",O);case 12:return w=p.indexOf(i.access)>=p.indexOf(r.access),S.next=15,a.a.awrap(h({isNestedItem:!!t.isNestedItem,itemDetails:e,requiredSharingLevel:r,userSession:t.userSession}));case 15:if(j=S.sent,w&&!j){S.next=23;break}return S.next=19,a.a.awrap(m({itemDetails:e,requiredSharingLevel:r,newRequiredGroups:j,userSession:t.userSession,storyMapUserPrivileges:t.storyMapUserPrivileges}));case 19:return C=S.sent,k={hasIssue:!0,sharingLevel:i,issue:{type:"sharing-access-level",severity:"error",requiredSharingLevel:r,currentSharingLevel:i,hasFix:C}},C&&(k.issue.fix=function(){var n;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=[],w||n.push(Object(s.a)({authentication:t.userSession,id:e.id,access:r.access===o.a.SHARED?o.a.PRIVATE:r.access,owner:e.owner})),!1!==j&&j.forEach((function(i){var a;n.push(Object(c.a)({id:e.id,groupId:i,confirmItemControl:null===(a=t.rules.sharing)||void 0===a?void 0:a.allowSharingToUpdateGroups,authentication:t.userSession,owner:e.owner}))})),i.next=5,a.a.awrap(Promise.all(n));case 5:return i.abrupt("return",i.sent);case 6:case"end":return i.stop()}}),null,null,null,Promise)}),S.abrupt("return",k);case 23:return S.abrupt("return",{hasIssue:!1,sharingLevel:i});case 24:case"end":return S.stop()}}),null,null,null,Promise)},x=function(e){return e.typeKeywords&&e.typeKeywords.includes("Registered App")}},S5pg:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("AmmK"),f=n("NX3A"),y=n("Z4N4"),g=n("Rakq"),v=n("H31l"),b=n("O94r"),x=n.n(b),O=h.a.createElement;function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var j=function(e){Object(c.a)(o,e);var t,n=(t=o,function(){var e,n=Object(s.a)(t);if(w()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function o(){return Object(i.a)(this,o),n.apply(this,arguments)}return Object(a.a)(o,[{key:"render",value:function(){return O(d.Fragment,null,O("div",{className:u.a.dynamic([["2363248861",[f.a.color.deepLilac]]])+" "+(x()("modal-popup-separator",this.props.className)||"")}),O(u.a,{id:"2363248861",dynamic:[f.a.color.deepLilac]},[".modal-popup-separator.__jsx-style-dynamic-selector{height:4px;background:".concat(f.a.color.deepLilac,";margin:0;}")]))}}]),o}(d.PureComponent),C=h.a.createElement;function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=function(e){Object(c.a)(o,e);var t,n=(t=o,function(){var e,n=Object(s.a)(t);if(k()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function o(){return Object(i.a)(this,o),n.apply(this,arguments)}return Object(a.a)(o,[{key:"render",value:function(){return C(d.Fragment,null,C("img",{src:this.props.imageUrl,alt:this.props.imageAlt,className:"jsx-3487492409 "+(x()("modal-image",this.props.className)||"")}),C(u.a,{id:"3487492409"},[".modal-image.jsx-3487492409{width:100%;height:31.5rem;object-fit:cover;object-position:center center;}"]))}}]),o}(d.PureComponent),I=n("wWnZ"),P=n("K98y"),R=n("wrGn"),E=n("WXRn"),D=h.a.createElement;function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var M=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(T()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"renderBackArrow",(function(){return D(I.a,{type:"default",color:"primary",disabled:0===t.props.selectedSlide,onClick:t.props.onPreviousSlideClick,"aria-label":t.props.previousButtonAria},Object(E.b)()?D(P.a,null):D(R.a,null))})),Object(l.a)(Object(o.a)(t),"renderNextArrow",(function(){var e=t.props.selectedSlide===t.props.slideCount-1,n={styles:D(u.a,{id:"3352623017"},[".hidden.jsx-3352623017{visibility:hidden;}"]),className:"jsx-3352623017"};return D(I.a,{type:"default",color:"primary",className:x()("next-button",{hidden:e},n.className),onClick:t.props.onNextSlideClick,"aria-label":t.props.nextButtonAria,autoFocus:!0},Object(E.b)()?D(R.a,null):D(P.a,null),n.styles)})),Object(l.a)(Object(o.a)(t),"renderNavDots",(function(e){return Array(t.props.slideCount).fill(0).map((function(n,i){return D("div",{key:"slide-".concat(i),className:x()("nav-dot",e,{selected:i===t.props.selectedSlide})},D("button",{className:"dot-button ".concat(e),onClick:t.props.onNavDotClick[i],"aria-label":t.props.navDotAriaArr[i]}))}))})),Object(l.a)(Object(o.a)(t),"getNavDotStyle",(function(){return{styles:D(u.a,{id:"215206608",dynamic:[f.a.spacing.xxxs,f.a.color.coolGrey,f.a.font.size.extraExtraSmall,f.a.font.size.extraExtraSmall,f.a.color.ashGrey,f.a.color.deepLilac]},[".nav-dot.__jsx-style-dynamic-selector{pointer-events:auto;display:inline-block;margin:0 ".concat(f.a.spacing.xxxs,";}"),".dot-button.__jsx-style-dynamic-selector{background-color:".concat(f.a.color.coolGrey,";height:").concat(f.a.font.size.extraExtraSmall,";width:").concat(f.a.font.size.extraExtraSmall,";border-radius:50%;}"),".dot-button.__jsx-style-dynamic-selector:hover{background-color:".concat(f.a.color.ashGrey,";}"),".nav-dot.selected.__jsx-style-dynamic-selector .dot-button.__jsx-style-dynamic-selector{background-color:".concat(f.a.color.deepLilac,";}")]),className:u.a.dynamic([["215206608",[f.a.spacing.xxxs,f.a.color.coolGrey,f.a.font.size.extraExtraSmall,f.a.font.size.extraExtraSmall,f.a.color.ashGrey,f.a.color.deepLilac]]])}})),Object(l.a)(Object(o.a)(t),"renderCloseButton",(function(){var e=t.props.selectedSlide===t.props.slideCount-1,n=e?"default":"blank",i=e?"primary":"light";return D(I.a,{type:n,color:i,onClick:t.props.onCloseButtonClick,shouldFocus:t.state.shouldFocusCloseBtn},t.props.closeButtonLabels[t.props.selectedSlide])})),t.state={shouldFocusCloseBtn:!1},t}return Object(a.a)(p,[{key:"componentDidUpdate",value:function(e){var t=this.props.selectedSlide===this.props.slideCount-1,n=e.selectedSlide!==this.props.slideCount-1;this.setState({shouldFocusCloseBtn:t&&n})}},{key:"render",value:function(){var e=this.getNavDotStyle(),t=this.props.slideCount>1;return D(d.Fragment,null,D("div",{className:u.a.dynamic([["2388516451",[y.a.gapped("column",0),y.a.gapped("column",f.a.spacing.xxxs)]]])+" "+(x()("modal-popup-footer",this.props.className,{"multiple-items":t})||"")},t&&D(d.Fragment,null,D("div",{className:u.a.dynamic([["2388516451",[y.a.gapped("column",0),y.a.gapped("column",f.a.spacing.xxxs)]]])+" left-container"},this.renderBackArrow(),this.renderNextArrow()),D("div",{className:u.a.dynamic([["2388516451",[y.a.gapped("column",0),y.a.gapped("column",f.a.spacing.xxxs)]]])+" nav-dots"},this.renderNavDots(e.className))),this.props.onCloseButtonClick&&D("div",{className:u.a.dynamic([["2388516451",[y.a.gapped("column",0),y.a.gapped("column",f.a.spacing.xxxs)]]])+" right-container"},this.renderCloseButton())),D(u.a,{id:"2388516451",dynamic:[y.a.gapped("column",0),y.a.gapped("column",f.a.spacing.xxxs)]},[".modal-popup-footer.__jsx-style-dynamic-selector{width:100%;}",".modal-popup-footer.__jsx-style-dynamic-selector:not(.multiple-items){display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}",".modal-popup-footer.multiple-items.__jsx-style-dynamic-selector{".concat(y.a.gapped("column",0),";grid-template-columns:30% 40% 30%;}"),".left-container.__jsx-style-dynamic-selector{".concat(y.a.gapped("column",f.a.spacing.xxxs),";justify-self:start;}"),".right-container.__jsx-style-dynamic-selector{justify-self:end;}",".nav-dots.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]),e.styles)}}]),p}(d.PureComponent),A=h.a.createElement;function N(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var L=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(N()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"closeFunctionWrapper",(function(){t.props.onCloseButtonClick&&t.props.onCloseButtonClick(),t.selectSlide(0)})),Object(l.a)(Object(o.a)(t),"selectSlide",(function(e){t.setState({selectedSlideIndex:e})})),Object(l.a)(Object(o.a)(t),"nextSlide",(function(){t.setState({selectedSlideIndex:t.state.selectedSlideIndex+1})})),Object(l.a)(Object(o.a)(t),"previousSlide",(function(){t.setState({selectedSlideIndex:t.state.selectedSlideIndex-1})})),t.state={selectedSlideIndex:0},t.navDotFunctions=t.props.modalSlides.map((function(e,n){return t.selectSlide.bind(Object(o.a)(t),n)})),t.navDotAriaArr=t.props.modalSlides.map((function(e){return e.navDotAria})),t.closeButtonLabelArr=t.props.modalSlides.map((function(e){return e.closeButtonLabel})),t}return Object(a.a)(p,[{key:"render",value:function(){var e=this.props.modalSlides[this.state.selectedSlideIndex],t={styles:A(u.a,{id:"3271927631"},[".flex-grow.jsx-3271927631{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}"]),className:"jsx-3271927631"};return A(m.a,{isOpen:this.props.isShowingModal,preventScrollWhenOpen:!0,onRequestClose:this.closeFunctionWrapper,shouldCenterModal:!0},A("div",{className:u.a.dynamic([["204447700",[f.a.color.white,f.a.spacing.xxs,f.a.spacing.xxs,f.a.spacing.xs,f.a.spacing.sm,(y.a.hexA(f.a.color.black),.18),f.a.spacing.xs,f.a.spacing.xs,f.a.spacing.sm,f.a.spacing.sm,f.a.responsiveBreakpoints.medium]]])+" modal-popup-container"},A(S,{imageUrl:e.imageUrl,imageAlt:e.imageAlt}),A(j,null),A("div",{className:u.a.dynamic([["204447700",[f.a.color.white,f.a.spacing.xxs,f.a.spacing.xxs,f.a.spacing.xs,f.a.spacing.sm,(y.a.hexA(f.a.color.black),.18),f.a.spacing.xs,f.a.spacing.xs,f.a.spacing.sm,f.a.spacing.sm,f.a.responsiveBreakpoints.medium]]])+" modal-popup-padding-area"},A(g.a,{headerTitle:e.title,onCloseButtonClick:this.closeFunctionWrapper,showCloseButton:!1,sidePadding:"0px"}),A(v.a,{spacingBottomLg:f.a.spacing.sm,sidePadding:"0px",children:A(h.a.Fragment,null,A("p",{className:u.a.dynamic([["204447700",[f.a.color.white,f.a.spacing.xxs,f.a.spacing.xxs,f.a.spacing.xs,f.a.spacing.sm,(y.a.hexA(f.a.color.black),.18),f.a.spacing.xs,f.a.spacing.xs,f.a.spacing.sm,f.a.spacing.sm,f.a.responsiveBreakpoints.medium]]])+" modal-popup-text"},e.mainText),e.additionalText&&A("p",{className:u.a.dynamic([["204447700",[f.a.color.white,f.a.spacing.xxs,f.a.spacing.xxs,f.a.spacing.xs,f.a.spacing.sm,(y.a.hexA(f.a.color.black),.18),f.a.spacing.xs,f.a.spacing.xs,f.a.spacing.sm,f.a.spacing.sm,f.a.responsiveBreakpoints.medium]]])+" modal-popup-text"},e.additionalText)),className:"flex-grow ".concat(t.className)}),A(M,{slideCount:this.props.modalSlides.length,selectedSlide:this.state.selectedSlideIndex,onNavDotClick:this.navDotFunctions,navDotAriaArr:this.navDotAriaArr,closeButtonLabels:this.closeButtonLabelArr,onCloseButtonClick:this.closeFunctionWrapper,previousButtonAria:this.props.previousButtonAria,onPreviousSlideClick:this.previousSlide,nextButtonAria:this.props.nextButtonAria,onNextSlideClick:this.nextSlide}))),t.styles,A(u.a,{id:"204447700",dynamic:[f.a.color.white,f.a.spacing.xxs,f.a.spacing.xxs,f.a.spacing.xs,f.a.spacing.sm,(y.a.hexA(f.a.color.black),.18),f.a.spacing.xs,f.a.spacing.xs,f.a.spacing.sm,f.a.spacing.sm,f.a.responsiveBreakpoints.medium]},[".modal-popup-container.__jsx-style-dynamic-selector{width:56rem;background-color:".concat(f.a.color.white,";max-width:calc(100vw - (2 * ").concat(f.a.spacing.xxs,"));padding:").concat(f.a.spacing.xxs," ").concat(f.a.spacing.xs," ").concat(f.a.spacing.sm,";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;box-shadow:0 1.8rem 7rem -2rem ").concat((y.a.hexA(f.a.color.black),.18),";}"),".modal-popup-padding-area.__jsx-style-dynamic-selector{padding:".concat(f.a.spacing.xs," ").concat(f.a.spacing.xs," ").concat(f.a.spacing.sm,";min-height:36rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}"),".modal-popup-text.__jsx-style-dynamic-selector+.modal-popup-text.__jsx-style-dynamic-selector{margin-top:".concat(f.a.spacing.sm,";}"),"@media (min-width:".concat(f.a.responsiveBreakpoints.medium,"){.modal-popup-container.__jsx-style-dynamic-selector{max-width:100vw;padding:0;}}")]))}}]),p}(d.PureComponent);t.a=L},"T+qs":function(e,t,n){"use strict";n.d(t,"o",(function(){return m})),n.d(t,"a",(function(){return f})),n.d(t,"t",(function(){return y})),n.d(t,"v",(function(){return g})),n.d(t,"q",(function(){return v})),n.d(t,"k",(function(){return b})),n.d(t,"r",(function(){return x})),n.d(t,"l",(function(){return O})),n.d(t,"h",(function(){return w})),n.d(t,"p",(function(){return j})),n.d(t,"b",(function(){return C})),n.d(t,"g",(function(){return k})),n.d(t,"u",(function(){return S})),n.d(t,"s",(function(){return I})),n.d(t,"f",(function(){return P})),n.d(t,"d",(function(){return R})),n.d(t,"c",(function(){return E})),n.d(t,"m",(function(){return D})),n.d(t,"j",(function(){return T})),n.d(t,"n",(function(){return M})),n.d(t,"i",(function(){return A})),n.d(t,"e",(function(){return N}));var i=n("fGyu"),a=n("zjfJ"),o=n("Abkm"),r=n("t7DY"),s=n("RP1v"),c=n("nVDo"),l=n("cpdA"),p=n("l5Wi"),u=n("K16L");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){return function(t){if(!e)return null;var n=h({},t.drawings),i=e.filter((function(e){return e in n}));if(0===i.length)return null;var o=i.reduce((function(e,t){var i=c.g[n[t].type];return h({},e,Object(a.a)({},i,h({},e[i],Object(a.a)({},t,!0))))}),{}),r=t.drawingCategories.map((function(e){return o[e.type]?h({},e,{drawingIds:e.drawingIds.filter((function(t){return!o[e.type][t]}))}):e}));return i.forEach((function(e){delete n[e]})),{drawings:n,drawingCategories:r}}},f=function(e){return function(t){return{drawings:h({},t.drawings,Object(a.a)({},e.id,e)),drawingCategories:t.drawingCategories.map((function(t){var n=c.g[e.type],a=t.drawingIds;return n===t.type&&-1===a.indexOf(e.id)?h({},t,{drawingIds:[].concat(Object(i.a)(a),[e.id])}):t}))}}},y=function(e){return function(t){var n=h({},t.drawings);return e.forEach((function(e){n[e.id]=e})),{drawings:n}}},g=function(e,t){return function(n){var i=n.drawings;if(!(e in i))return null;var o=i[e],r=o.data,s=h({},o,{},r?{data:h({},r,{content:t})}:{});return{drawings:h({},n.drawings,Object(a.a)({},e,s))}}},v=function(e){return function(t){return t.idsOfDrawingTextsBeingShown.indexOf(e)>-1?null:{idsOfDrawingTextsBeingShown:[].concat(Object(i.a)(t.idsOfDrawingTextsBeingShown),[e])}}},b=function(e){return function(t){return{idsOfDrawingTextsBeingShown:t.idsOfDrawingTextsBeingShown.filter((function(t){return t!==e}))}}},x=function(e,t){return{ghostDrawingInfo:t,idOfSearchPopupBeingShown:e}},O=function(){return{idOfSearchPopupBeingShown:""}},w=function(e){return e.filter((function(e){return e.type===s.a.PointNumbered})).map((function(e){return e.drawingIds}))[0]||[]},j=function(e,t){var n=e.findIndex((function(e){var t=e.type;return String(t)===s.b}));if(n<0)return e;var a=Object(i.a)(e);return a.splice.apply(a,[n,1].concat(Object(i.a)(function(e,t){var n=function(n){var i=e.drawingIds.filter((function(e){return e in t&&t[e].type===n}));return h({type:c.g[n],title:e.title,drawingIds:i},i.length>0&&{color:e.color})};return[n(r.j.POINT_REGULAR),n(r.j.POINT_NUMBERED)]}(a[n],t)))),a},C=function(e,t){var n={};return Object.keys(e).forEach((function(i){var a=e[i];if(a.type===r.j.TEXT_LEADERLINE){var o=a.styles,s=o&&o.textColor?t[o.textColor]:t.backgroundColor,c=o&&o.backgroundColor?"transparent"!==o.backgroundColor?t[o.backgroundColor]:"transparent":t.titleColor,d=h({},o,{},Object(l.b)({backgroundColor:c,bodyColor:s,dash:o&&o.lineDash,themeVariables:t}));n[a.id]=h({},a,{styles:h({},d)})}else if(a.type===r.j.ARROW_SINGLE||a.type===r.j.ARROW_DOUBLE){var m=a.styles,f=Object(p.c)((null===m||void 0===m?void 0:m.color)||u.d.TitleColor,t),y=h({},m,{},Object(l.a)(f));n[a.id]=h({},a,{styles:h({},y)})}else n[a.id]=a})),n},k=function(e,t){if("undefined"!==typeof e&&e.type===s.a.PointNumbered){var n=e.drawingIds.indexOf(t);return n<0?void 0:n+1}},S=function(e,t){return function(n){return n.drawingCategories.find((function(t){return e===t.type}))?{drawingCategories:n.drawingCategories.map((function(n){return e===n.type?h({},n,{},t):n}))}:null}},I=function(e){return{drawingCategoryVisibilities:h({},e.drawingCategoryVisibilities,Object(a.a)({},e.type,e.visible))}},P=function(e){return e.filter((function(e){return e.drawingIds.length>0})).length},R=function(e,t){return e.title||t(c.c[e.type])},E=function(e,t,n,i){if(P(t)<2)return"";var a=t.find((function(t){return n in e&&t.type===c.g[e[n].type]}));return a?R(a,i):""},D=function(e,t){return e.map((function(e){return T(e,t)})).reduce((function(e,t){return e||t}),!1)},T=function(e,t){return e.drawingIds.map((function(e){return M(e,t)})).some(Boolean)},M=function(e,t){return!(!t[e]||!t[e].title)},A=function(e,t){return function(e){return e.map((function(e){return e.drawingIds})).reduce((function(e,t){return[].concat(Object(i.a)(e),Object(i.a)(t))}),[])}(e).filter((function(e){var n=t[e];return n&&(n.title&&n.title.trim()||n.description&&Object(o.e)(n.description).trim()||n.image)}))},N=function(e){var t=e.nodes,n=t.length;if(0===n)return[0,0];var i=t.reduce((function(e,t){return{long:e.long+t.long,lat:e.lat+t.lat}}),{long:0,lat:0});return[i.long/n,i.lat/n]}},"TM+8":function(e,t,n){"use strict";var i=n("VtSi"),a=n.n(i),o=n("cxan"),r=n("fGyu"),s=n("9fIP"),c=n("MMYH"),l=n("pWxA"),p=n("K/z8"),u=n("sRHE"),d=n("8K1b"),h=n("zjfJ"),m=n("yFcC"),f=n.n(m),y=n("ERkP"),g=n.n(y),v=n("O94r"),b=n.n(v),x=n("pFSi"),O=n.n(x),w=n("mvvZ"),j=n("8grN"),C=n("NX3A"),k=n("pao5"),S=n("4yTv"),I=n("Z4N4"),P=n("wWnZ"),R=n("60Hg"),E=n("fSBn"),D=n("8dId"),T=n("Y/5s"),M=n("eCu0"),A=n("2SGB"),N=n("GuR2"),L=n("7sDT"),G=n("mDjW"),_=g.a.createElement;function B(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var W=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(B()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(){return Object(s.a)(this,i),n.apply(this,arguments)}return Object(c.a)(i,[{key:"render",value:function(){return _(G.a,{title:_(A.a,{id:"builder.itemBrowser.myLayers.callout.title"}),body:_("p",null,_(A.a,{id:"builder.itemBrowser.myLayers.callout.description",values:{"product-doc":function(e){return _("a",{href:"https://links.esri.com/express-map-feature-layers",target:"_blank",rel:"noopener noreferrer"},e)}}})),className:"end-of-page-callout"})}}]),i}(y.PureComponent),V=n("+tpQ"),F=n("txt0"),U=g.a.createElement;function z(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var H=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(z()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(){var e;Object(s.a)(this,i);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),Object(h.a)(Object(l.a)(e),"onBrowseLAClicked",(function(){F.a.trackEvent(F.a.Category.Builder,F.a.Action.Builder_MapBrowser_Callout_BrowseLivingAtlas)})),e}return Object(c.a)(i,[{key:"render",value:function(){return U(G.a,{hasIcon:!0,title:U(A.a,{id:"builder.itemBrowser.livingAtlas.callout.title"}),body:U(y.Fragment,null,U("p",{className:f.a.dynamic([["4148225413",[C.a.spacing.xs]]])},U(A.a,{id:"builder.itemBrowser.livingAtlas.callout.description"})),U("div",{className:f.a.dynamic([["4148225413",[C.a.spacing.xs]]])+" callout-action-button"},U(P.a,{type:"clear",icon:U(V.a,null),iconPosition:"end",link:{href:"https://livingatlas.arcgis.com/en/browse/",openInNewPage:!0},onClick:this.onBrowseLAClicked},U(A.a,{id:"builder.itemBrowser.livingAtlas.callout.actionButtonTitle"}))),U(f.a,{id:"4148225413",dynamic:[C.a.spacing.xs]},[".callout-action-button.__jsx-style-dynamic-selector{margin-top:".concat(C.a.spacing.xs,";}")])),className:"end-of-page-callout"})}}]),i}(y.PureComponent),Y=n("BAoe"),K=n("YQpL"),X=n("fQV3"),J=n("Z34l"),Z=n("i3DM"),q=n("Bx5b"),Q=n("AuFC"),$=n("VkeQ"),ee=n("vs5j"),te=n("rvpn"),ne=n("BVlg"),ie=n("wTCQ"),ae=n("i8u9"),oe=n("JmSK"),re=n("uYly"),se=n("6ATX"),ce=n("hKmD"),le=n("liFR"),pe=g.a.createElement,ue=Object(K.c)((function(e){var t=e.type===re.a.WebMap,n=t?se.a:ce.a;return pe("span",{className:f.a.dynamic([["3582994538",[C.a.spacing.xxs,C.a.spacing.xxs,C.a.spacing.xxs,C.a.spacing.xs,C.a.spacing.xs,I.a.center(),C.a.color.coolGrey,C.a.color.bleuDeFrance]]])+" map-type"},pe(le.a,{tooltipContent:e.intl.formatMessage({id:t?"builder.itemBrowser.webMap":"builder.itemBrowser.webScene"})},pe("div",{className:f.a.dynamic([["3582994538",[C.a.spacing.xxs,C.a.spacing.xxs,C.a.spacing.xxs,C.a.spacing.xs,C.a.spacing.xs,I.a.center(),C.a.color.coolGrey,C.a.color.bleuDeFrance]]])+" "+"map-type-icon ".concat(t?"map-icon":"globe-icon")},pe(n,{color:C.a.color.white,height:C.a.font.size.medium,width:C.a.font.size.medium,className:f.a.dynamic([["3582994538",[C.a.spacing.xxs,C.a.spacing.xxs,C.a.spacing.xxs,C.a.spacing.xs,C.a.spacing.xs,I.a.center(),C.a.color.coolGrey,C.a.color.bleuDeFrance]]])}))),pe(f.a,{id:"3582994538",dynamic:[C.a.spacing.xxs,C.a.spacing.xxs,C.a.spacing.xxs,C.a.spacing.xs,C.a.spacing.xs,I.a.center(),C.a.color.coolGrey,C.a.color.bleuDeFrance]},[".map-type.__jsx-style-dynamic-selector{position:absolute;top:".concat(C.a.spacing.xxs,";right:").concat(C.a.spacing.xxs,";}"),"html[dir='rtl'] .map-type.__jsx-style-dynamic-selector{right:auto;left:".concat(C.a.spacing.xxs,";}"),".map-type-icon.__jsx-style-dynamic-selector{height:".concat(C.a.spacing.xs,";width:").concat(C.a.spacing.xs,";border-radius:50%;text-align:center;text-align:center;margin:auto;").concat(I.a.center(),";}"),".map-icon.__jsx-style-dynamic-selector{background-color:".concat(C.a.color.coolGrey,";}"),".globe-icon.__jsx-style-dynamic-selector{background-color:".concat(C.a.color.bleuDeFrance,";}")]))})),de=n("ymhH"),he=g.a.createElement,me=function(e){return he("div",{className:f.a.dynamic([["2154235746",[C.a.spacing.xxs,C.a.spacing.xxs,C.a.spacing.xxs,C.a.spacing.xxs]]])+" badge-wrapper"},he(de.a,{sharingLevel:e.sharingLevel,mode:e.isOwner?e.publishType:oe.c.published,itemType:e.itemType}),he(f.a,{id:"2154235746",dynamic:[C.a.spacing.xxs,C.a.spacing.xxs,C.a.spacing.xxs,C.a.spacing.xxs]},[".badge-wrapper.__jsx-style-dynamic-selector{position:absolute;top:".concat(C.a.spacing.xxs,";right:").concat(C.a.spacing.xxs,";overflow-wrap:break-word;max-width:calc(100% - (").concat(C.a.spacing.xxs," * 2));}"),"html[dir='rtl'] .badge-wrapper.__jsx-style-dynamic-selector{right:auto;left:".concat(C.a.spacing.xxs,";}")]))},fe=n("aomC"),ye=n("p/3C"),ge=g.a.createElement;function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Oe=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(xe()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){var t;return Object(s.a)(this,i),t=n.call(this,e),Object(h.a)(Object(l.a)(t),"updateThumbnail",(function(){var e,n,i,o;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=t.props.userSession,n=Object(J.e)(t.props.config.PORTAL_HOST,t.props.userSession),r.next=4,a.a.awrap(Object(X.a)(t.props.item.id,{authentication:e,portal:n}));case 4:i=r.sent,(o=Object(J.b)(t.props.config.PORTAL_HOST,i,te.a,t.props.userSession?t.props.userSession.token:"",400))!==t.state.thumbnailUrl?t.setState({thumbnailUrl:o}):(o=Object(J.b)(t.props.config.PORTAL_HOST,t.props.item,te.a,t.props.userSession?t.props.userSession.token:"",400),t.setState({thumbnailUrl:o}));case 7:case"end":return r.stop()}}),null,null,null,Promise)})),Object(h.a)(Object(l.a)(t),"renderWithLink",(function(e,n){if(!t.props.linkComponent)return e;var i,a,o=t.props.linkComponent,r=!0;if("string"===typeof t.props.customLinkUrl)i=t.props.customLinkUrl,a="";else if("object"===typeof t.props.customLinkUrl)i=t.props.customLinkUrl.href,a=t.props.customLinkUrl.asPath,r=!!t.props.customLinkUrl.isExternal;else{var s=Object(ye.a)({item:t.props.item,userSession:t.props.userSession,screenWidth:t.props.screenWidth,portalHost:t.props.config.PORTAL_HOST,isPortal:t.props.environment.isPortal,baseUrl:t.props.config.BASE_URL});i=s.href,a=s.asPath,"StoryMap"===t.props.item.type&&(r=!1)}return ge(o,{href:i,as:a,passHref:!0,isExternal:r},e)})),Object(h.a)(Object(l.a)(t),"onClick",(function(e){t.props.onClick&&Object(Z.a)(e)&&t.props.onClick(t.props.item)})),t.state={thumbnailUrl:Object(J.b)(t.props.config.PORTAL_HOST,t.props.item,te.a,t.props.userSession?t.props.userSession.token:"",400)},t}return Object(c.a)(i,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.userSession,i=Object(ie.d)(t.typeKeywords),a=t.typeKeywords&&t.typeKeywords.length&&t.typeKeywords.includes(q.b);a&&!i&&(i="private"===t.access?oe.c.draft:oe.c.published);var o=!(!n||n.username!==this.props.item.owner),r="StoryMap"===t.type,s=r&&Object(ee.e)(t.title)?this.props.intl.formatMessage({id:"component.myStories.storyCard.title"}):t.title,c={styles:ge(f.a,{id:"3693152363"},[".disabled-card.jsx-3693152363{pointer-events:none;}",".disabled-card-wrapper.jsx-3693152363{cursor:not-allowed;opacity:0.6;}"]),className:"jsx-3693152363"},l=ge($.a,{className:b()("item-card",c.className,void 0!==this.props.isDisabled&&this.props.isDisabled&&!this.props.isSelected?"disabled-card":""),tabIndex:"0",tagName:"link"===this.props.role?"a":void 0,role:"button"===this.props.role?"button":void 0,fitHeight:!0,onClick:this.onClick,onKeyPress:this.onClick},ge($.a.Top,null,ge($.a.Image,{src:this.state.thumbnailUrl}),(t.type===re.a.WebMap||t.type===re.a.WebScene)&&ge(ue,{type:t.type}),this.props.isSelectable&&ge("div",{className:"jsx-4229257552 selectable-container"},ge(fe.a,{variant:"checkbox",isSelected:!!this.props.isSelected}))),ge($.a.Body,null,ge($.a.Subtitle,null,ge(A.a,{id:"builder.itemBrowser.edited"}),": ",ge(Y.a,{value:t.modified,year:"numeric",month:"long",day:"numeric"})),ge($.a.Title,{lineClamp:1},s),ge($.a.Text,{lineClamp:3},t.snippet),ge($.a.FooterFiller,null)),c.styles,ge(f.a,{id:"4229257552"},[".selectable-container.jsx-4229257552{position:absolute;top:1rem;left:1rem;}","html[dir='rtl'] .selectable-container.jsx-4229257552{right:1rem;left:unset;}"]));return ge($.a.Wrapper,{className:b()(c.className,void 0!==this.props.isDisabled&&this.props.isDisabled&&!this.props.isSelected?"disabled-card-wrapper":"item-result")},"link"===this.props.role&&this.props.linkComponent?this.renderWithLink(l,o):l,ge($.a.Footer,{startItems:"function"===typeof this.props.renderFooterStartItems&&this.props.renderFooterStartItems(this.props),endItems:"function"===typeof this.props.renderFooterEndItems&&this.props.renderFooterEndItems(be({},this.props,{updateCardThumbnail:this.updateThumbnail}))}),r&&i&&!this.props.hidePublishBadge&&ge(me,{isOwner:o,sharingLevel:{access:t.access},publishType:i,itemType:r?a?ne.a.Collection:ne.a.Story:void 0}))}}]),i}(y.PureComponent),we=Object(ae.b)(Object(Q.c)(Object(T.d)(Object(M.c)(Object(K.c)(Oe))))),je=g.a.createElement;function Ce(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ke=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(Ce()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(){var e;Object(s.a)(this,i);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),Object(h.a)(Object(l.a)(e),"renderLoadMore",(function(){return je(S.a,{size:12,sizeSm:6},je("div",{className:f.a.dynamic([["3640978859",[C.a.spacing.xxl,I.a.center(),C.a.spacing.md]]])+" load-more-btn-container"},e.props.loadingMore?je(N.a,null):je(P.a,{className:"load-more-btn",type:"clear",onClick:e.props.loadMore},je(A.a,{id:"builder.itemBrowser.loadMore"}))),je(f.a,{id:"3640978859",dynamic:[C.a.spacing.xxl,I.a.center(),C.a.spacing.md]},[".load-more-btn-container.__jsx-style-dynamic-selector{margin:".concat(C.a.spacing.xxl," auto;").concat(I.a.center(),";height:").concat(C.a.spacing.md,";}")]))})),Object(h.a)(Object(l.a)(e),"renderCallout",(function(){return je(S.a,{size:12,sizeSm:6},e.props.featureDecisions.canAccessLivingAtlasSite&&e.props.isRenderingLivingAtlas&&je(H,null),"data-browser"===e.props.id&&("myContent"===e.props.selectedSearchModifier||"sharedWithMe"===e.props.selectedSearchModifier)&&je(W,null))})),Object(h.a)(Object(l.a)(e),"onCardClick",(function(t){"function"===typeof e.props.onCardClick&&e.props.onCardClick(t,e.props.isRenderingLivingAtlas)})),e}return Object(c.a)(i,[{key:"render",value:function(){var e=this,t={styles:je(f.a,{id:"3619377612",dynamic:[this.props.searchResults.length?C.a.spacing.md:C.a.spacing.xxl,C.a.spacing.xxs]},[".outer-grid-override.__jsx-style-dynamic-selector{margin-top:".concat(this.props.searchResults.length?C.a.spacing.md:C.a.spacing.xxl,";}"),".inner-grid-override.__jsx-style-dynamic-selector{grid-gap:".concat(C.a.spacing.xxs,";}")]),className:f.a.dynamic([["3619377612",[this.props.searchResults.length?C.a.spacing.md:C.a.spacing.xxl,C.a.spacing.xxs]]])};return je(k.a,{verticalAlign:"center",className:"".concat(t.className," outer-grid-override")},je(S.a,{size:12,sizeSm:6},je(k.a,{equalHeightGridItems:!0,className:"".concat(t.className," inner-grid-override")},"function"===typeof this.props.renderInitialChild&&this.props.renderInitialChild({searchResults:this.props.searchResults,searching:this.props.searching,updatingFilterOrSort:this.props.updatingFilterOrSort,waitingForResults:this.props.waitingForResults,selectedTabId:this.props.selectedTabId,hasModifiers:this.props.hasModifiers,additionalFilterSelections:this.props.additionalFilterSelections}),this.props.searchResults.map((function(t,n){return"function"===typeof e.props.shouldIgnoreItem&&e.props.shouldIgnoreItem(t)?null:je(S.a,{size:4,sizeMd:6,sizeSm:6,key:t.id},je(we,{item:t,userSession:e.props.userSession,role:e.props.cardRole,onClick:e.onCardClick,linkComponent:e.props.linkComponent,renderFooterStartItems:"function"===typeof e.props.renderCardFooterStartItems?e.props.renderCardFooterStartItems:void 0,renderFooterEndItems:"function"===typeof e.props.renderCardFooterEndItems?e.props.renderCardFooterEndItems:void 0,isSelectable:!!e.props.itemsSelectable&&e.props.itemsSelectable,isSelected:!!e.props.selectedItemsIds&&e.props.selectedItemsIds.includes(t.id),isDisabled:!!e.props.itemsDisabled&&e.props.itemsDisabled}))})))),this.props.loadMoreStart>1&&this.renderLoadMore(),this.renderCallout(),t.styles)}}]),i}(y.PureComponent),Se=Object(L.c)(ke),Ie=g.a.createElement;function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ee(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var De=function(e){Object(d.a)(i,e);var t,n=(t=i,function(){var e,n=Object(u.a)(t);if(Ee()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function i(e){var t,c,p;Object(s.a)(this,i),p=n.call(this,e),Object(h.a)(Object(l.a)(p),"userFavGroupId",""),Object(h.a)(Object(l.a)(p),"userOrgId",""),Object(h.a)(Object(l.a)(p),"userGroupIds",[]),Object(h.a)(Object(l.a)(p),"username",""),Object(h.a)(Object(l.a)(p),"filterBarStyles",{styles:Ie(f.a,{id:"4076957291",dynamic:[C.a.color.winterSage,C.a.spacing.xxs,C.a.responsiveBreakpoints.large]},[".tab-bar.tab-bar-override.__jsx-style-dynamic-selector{width:100%;border-bottom:1px solid ".concat(C.a.color.winterSage,";margin-bottom:").concat(C.a.spacing.xxs,";}"),".tab-bar-tab.tab-btn-override.__jsx-style-dynamic-selector{margin-bottom:0;}","@media (min-width:".concat(C.a.responsiveBreakpoints.large,"){.tab-bar.tab-bar-override.__jsx-style-dynamic-selector{border-bottom:none;margin-bottom:-2px;}.tab-bar-tab.tab-btn-override.__jsx-style-dynamic-selector{margin-bottom:2px;}}")]),className:f.a.dynamic([["4076957291",[C.a.color.winterSage,C.a.spacing.xxs,C.a.responsiveBreakpoints.large]]])}),Object(h.a)(Object(l.a)(p),"addItemBtnStyles",{styles:Ie(f.a,{id:"4189618595"},[".add-item-container.jsx-4189618595{text-align:right;}","html[dir='rtl'] .add-item-container.jsx-4189618595{text-align:left;}"]),className:"jsx-4189618595"}),Object(h.a)(Object(l.a)(p),"searchBoxRef",Object(y.createRef)()),Object(h.a)(Object(l.a)(p),"tabFilterHandler",O()((function(e,t){return p.onTabFilterClick.bind(Object(l.a)(p),t)}))),Object(h.a)(Object(l.a)(p),"additionalFilterHandler",O()((function(e,t,n){return p.onAdditionalFilterChange.bind(Object(l.a)(p),t,n)}))),Object(h.a)(Object(l.a)(p),"renderTitle",(function(){return Ie(k.a,{verticalAlign:"center"},Ie(S.a,{size:6},Ie("div",{className:f.a.dynamic([["1322294500",[I.a.typography.h1(),C.a.color.darkGreen,C.a.spacing.xxs,I.a.typography.blockReg(),C.a.color.coolGrey,C.a.spacing.xxxs,C.a.spacing.xxs,C.a.spacing.xxs,C.a.responsiveBreakpoints.medium]]])+" title"},Ie("h2",{className:f.a.dynamic([["1322294500",[I.a.typography.h1(),C.a.color.darkGreen,C.a.spacing.xxs,I.a.typography.blockReg(),C.a.color.coolGrey,C.a.spacing.xxxs,C.a.spacing.xxs,C.a.spacing.xxs,C.a.responsiveBreakpoints.medium]]])},p.props.heading),p.props.headingSubscript&&Ie("h5",{className:f.a.dynamic([["1322294500",[I.a.typography.h1(),C.a.color.darkGreen,C.a.spacing.xxs,I.a.typography.blockReg(),C.a.color.coolGrey,C.a.spacing.xxxs,C.a.spacing.xxs,C.a.spacing.xxs,C.a.responsiveBreakpoints.medium]]])+" subscript"},p.props.headingSubscript))),p.renderAddItemButton(),Ie(f.a,{id:"1322294500",dynamic:[I.a.typography.h1(),C.a.color.darkGreen,C.a.spacing.xxs,I.a.typography.blockReg(),C.a.color.coolGrey,C.a.spacing.xxxs,C.a.spacing.xxs,C.a.spacing.xxs,C.a.responsiveBreakpoints.medium]},["h2.__jsx-style-dynamic-selector{".concat(I.a.typography.h1(),";color:").concat(C.a.color.darkGreen,";margin:0 0 ").concat(C.a.spacing.xxs,";overflow-wrap:break-word;}"),"h5.__jsx-style-dynamic-selector{".concat(I.a.typography.blockReg(),";color:").concat(C.a.color.coolGrey,";}"),".title.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".subscript.__jsx-style-dynamic-selector{margin-top:".concat(C.a.spacing.xxxs,";margin-left:").concat(C.a.spacing.xxs,";}"),"html[dir='rtl'] .subscript.__jsx-style-dynamic-selector{margin-left:0;margin-right:".concat(C.a.spacing.xxs,";}"),"@media (min-width:".concat(C.a.responsiveBreakpoints.medium,"){h2.__jsx-style-dynamic-selector{margin-bottom:0;}}")]))})),Object(h.a)(Object(l.a)(p),"renderAddItemButton",(function(){if(p.props.addItemButton){var e=Ie(P.a,{color:"primary",icon:Ie(R.a,null),onClick:p.props.addItemButton.onClick},p.props.addItemButton.text),t=p.props.linkComponent;return Ie(S.a,{size:6,className:"".concat(p.addItemBtnStyles.className," add-item-container")},p.props.addItemButton.href&&t?Ie(t,{href:p.props.addItemButton.href,as:p.props.addItemButton.asPath,passHref:!0},e):e,p.addItemBtnStyles.styles)}})),Object(h.a)(Object(l.a)(p),"renderTabsAndSearchBox",(function(){return Ie("div",{className:f.a.dynamic([["2264873954",[p.props.heading?C.a.spacing.xs:0,C.a.responsiveBreakpoints.large,C.a.color.winterSage]]])+" search-modifiers"},Ie(k.a,{verticalAlign:"center"},Ie(S.a,{size:9,sizeMd:12,sizeSm:6},Ie(E.a,{className:"".concat(p.filterBarStyles.className," tab-bar-override"),tabMargin:C.a.spacing.xs},p.props.tabFilters.reduce((function(e,t){var n=Ie(E.a.Tab,{className:"".concat(p.filterBarStyles.className," tab-btn-override"),key:t.id,"data-id":t.id,isSelected:t.id===p.state.selectedTabId,onClick:p.tabFilterHandler(t.id,t)},t.content);return[].concat(Object(r.a)(e),[n])}),[]))),Ie(S.a,{size:3,sizeMd:12,sizeSm:6},Ie(D.a,Object(o.a)({},p.props.searchBoxProps,{label:p.getSearchLabel(),placeholder:p.getSearchPlaceholder(),id:"".concat(p.props.id,"-search"),onChange:p.onSearch,onClear:p.onClearSearch,ref:p.searchBoxRef})))),p.filterBarStyles.styles,Ie(f.a,{id:"2264873954",dynamic:[p.props.heading?C.a.spacing.xs:0,C.a.responsiveBreakpoints.large,C.a.color.winterSage]},[".search-modifiers.__jsx-style-dynamic-selector{margin-top:".concat(p.props.heading?C.a.spacing.xs:0,";}"),"@media (min-width:".concat(C.a.responsiveBreakpoints.large,"){.search-modifiers.__jsx-style-dynamic-selector{border-bottom:1px solid ").concat(C.a.color.winterSage,";}}")]))})),Object(h.a)(Object(l.a)(p),"renderSecondLineFilters",(function(){var e=p.getSelectedTab(),t=[],n=[],i=[];p.props.additionalFilters&&p.props.additionalFilters.forEach((function(e){"subtab"===e.type?n.push(e):i.push(e)}));var a=null===e||void 0===e?void 0:e.subfilter;a&&("dropdown"===a.type?i:n).push(a);return n.length&&(t=p.renderPillTabs(n)),t.length?t:null})),Object(h.a)(Object(l.a)(p),"getExcludedFilters",(function(){var e=p.getSelectedTab();return null===e||void 0===e?void 0:e.additionalFiltersToExclude})),Object(h.a)(Object(l.a)(p),"renderPillTabs",(function(e){var t=p.getExcludedFilters();return e.map((function(e){return(t&&t[e.id]||[]).length===e.searchModifiers.length?null:Ie("div",{key:e.id,className:f.a.dynamic([["2617818114",[C.a.spacing.xxs]]])+" subfilter"},Ie(E.a,{className:"".concat(p.filterBarStyles.className," tab-bar-override"),tabMargin:"large"===p.props.screenWidth?C.a.spacing.xs:C.a.spacing.xxs},e.searchModifiers.map((function(t){var n="".concat(e.id,"-").concat(t.id),i=p.state.additionalFilterSelections[e.id]===t.id;return Ie(E.a.Tab,{key:t.id,type:"pill","data-id":t.id,isSelected:i,onClick:p.additionalFilterHandler(n,e.id,t)},t.content)}))),Ie(f.a,{id:"2617818114",dynamic:[C.a.spacing.xxs]},[".subfilter.__jsx-style-dynamic-selector{margin-top:".concat(C.a.spacing.xxs,";}")]))}))})),Object(h.a)(Object(l.a)(p),"renderResults",(function(){return Ie(Se,Object(o.a)({},p.props,p.state,{loadMore:p.loadMore,isRenderingLivingAtlas:p.isRenderingLivingAtlasMaps()}))})),Object(h.a)(Object(l.a)(p),"fetchItems",Object(w.c)((function(e,t){var n,i,o,s,c;return a.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,a.a.awrap(Object(j.d)(Re({authentication:p.props.userSession,num:p.props.initialItems.num},e)));case 2:n=l.sent,i=n.results,o=n.start,s=n.nextStart,c=n.total,p.setState({totalResults:c,loadMoreStart:s,updatingFilterOrSort:!1,loadingMore:!1,searchResults:1===o?i:[].concat(Object(r.a)(p.state.searchResults),Object(r.a)(i)),waitingForResults:!1}),t&&"function"===typeof p.props.onInitialResultsFetched&&p.props.onInitialResultsFetched(n);case 6:case"end":return l.stop()}}),null,null,null,Promise)}),300)),Object(h.a)(Object(l.a)(p),"onSearch",(function(e){p.setState({searchTerm:e,updatingFilterOrSort:!0},(function(){p.updateQuerySetStateFetchItems(!1,!0)}))})),Object(h.a)(Object(l.a)(p),"getSearchPlaceholder",(function(){var e=p.getSelectedTab();return e&&e.searchPlaceholder?e.searchPlaceholder:p.props.searchBoxProps.placeholder})),Object(h.a)(Object(l.a)(p),"getSearchLabel",(function(){var e=p.getSelectedTab();return e&&e.searchPlaceholder?e.searchPlaceholder:p.props.searchBoxProps.label})),Object(h.a)(Object(l.a)(p),"onClearSearch",(function(){var e=p.getSelectedTab();p.setState({searching:!1,searchTerm:""},(function(){p.onTabFilterClick(e)}))})),Object(h.a)(Object(l.a)(p),"getTabFilterQuery",(function(e){switch(e){case"myContent":return"".concat(p.state.defaultSearchQuery,' owner:"').concat(p.username,'"');case"favoritesGroup":return"".concat(p.state.defaultSearchQuery,' group:"').concat(p.userFavGroupId,'"');case"sharedWithMe":return"".concat(p.state.defaultSearchQuery,' -owner:"').concat(p.props.userSession.username,'" (').concat(p.userOrgId?'orgid:"'.concat(p.userOrgId,'"'):"").concat(p.userOrgId&&p.userGroupIds.length?" OR ":"").concat(p.userGroupIds.length?"group:(".concat(p.userGroupIds.join(" OR "),"))"):")");default:return"".concat(p.state.defaultSearchQuery," ").concat(e)}})),Object(h.a)(Object(l.a)(p),"onTabFilterClick",(function(e){var t=Re({},p.state.additionalFilterSelections);e.subfilter&&!p.state.additionalFilterSelections[e.subfilter.id]&&(t[e.subfilter.id]=0),p.setState({additionalFilterSelections:t,selectedTabId:e.id,selectedSearchModifier:e.searchModifier,updatingFilterOrSort:!0},(function(){p.updateQuerySetStateFetchItems(!1,!0)}))})),Object(h.a)(Object(l.a)(p),"onAdditionalFilterChange",(function(e,t){var n=Re({},p.state.additionalFilterSelections,Object(h.a)({},e,t.id)),i=Re({},p.state.currentSearch,{start:1});p.setState({currentSearch:i,additionalFilterSelections:n,updatingFilterOrSort:!0},(function(){p.updateQuerySetStateFetchItems()}))})),Object(h.a)(Object(l.a)(p),"getSelectedTab",(function(){var e;return null===(e=p.props.tabFilters)||void 0===e?void 0:e.find((function(e){return e.id===p.state.selectedTabId}))})),Object(h.a)(Object(l.a)(p),"getUpdatedQuery",(function(){var e=p.getSelectedTab(),t=!1,n="".concat(p.getTabFilterQuery(e.searchModifier)),i=Re({},null===e||void 0===e?void 0:e.iSearchOptions),a=(null===e||void 0===e?void 0:e.customSearchOptions)||{};return p.state.additionalFilterSelections&&Object.keys(p.state.additionalFilterSelections).forEach((function(o){var r,s,c=(null===e||void 0===e?void 0:null===(r=e.subfilter)||void 0===r?void 0:r.id)===o?e.subfilter:null===(s=p.props.additionalFilters)||void 0===s?void 0:s.find((function(e){return e.id===o})),l=null===c||void 0===c?void 0:c.searchModifiers.find((function(e){return e.id===p.state.additionalFilterSelections[o]}));if(l){if(e&&e.additionalFiltersToExclude&&e.additionalFiltersToExclude[o]&&e.additionalFiltersToExclude[o].some((function(e){return e===l.id})))return;l.searchModifier&&(n+=" ".concat(l.searchModifier)),l.additionalSearchModifier&&(n+=" ".concat(l.additionalSearchModifier)),l.iSearchOptions&&l.iSearchOptions.categories&&(i.categories?(i.paramStrArr=i.paramStrArr||["categories=".concat(i.categories)],i.paramStrArr.push("categories=".concat(l.iSearchOptions.categories)),delete i.categories):i.categories=l.iSearchOptions.categories),l.customSearchOptions&&Object.assign(a,l.customSearchOptions),!1!==l.modifiesOriginalSearch&&(t=!0)}})),p.state.searchTerm.length>0&&(n+=" ".concat(p.state.searchTerm),t=!0),e&&e.additionalSearchModifier&&e.additionalSearchModifier.length>0&&(n+=" ".concat(e.additionalSearchModifier)),p.setState({hasModifiers:t}),{q:n,searchParams:i,customSearchOptions:a}})),Object(h.a)(Object(l.a)(p),"loadMore",(function(){var e=Re({},p.state.currentSearch,{start:p.state.loadMoreStart});p.setState({currentSearch:e,loadingMore:!0}),p.fetchItems(e)})),Object(h.a)(Object(l.a)(p),"isRenderingLivingAtlasMaps",(function(){var e;return!!(null===(e=p.getSelectedTab())||void 0===e?void 0:e.isLivingAtlas)}));var u=e.sortOptions[0],d=p.props.tabFilters[0],m=p.props.additionalFilters?null===(t=p.props.additionalFilters)||void 0===t?void 0:t.reduce((function(e,t){return e[t.id]=t.defaultSearchModifierId||t.searchModifiers[0].id,e}),{}):{},g=p.props.additionalFilters?null===(c=p.props.additionalFilters)||void 0===c?void 0:c.reduce((function(e,t){var n;return e[t.id]=null===(n=t.searchModifiers[0])||void 0===n?void 0:n.id,e}),{}):{};return p.state={additionalFilterSelections:m,whichDropdownIsShowing:null,dropdownIdSelected:g,selectedSearchModifier:d.searchModifier,selectedTabId:d.id,selectedSortId:u.id,searchResults:e.initialItems.results,currentSearch:{q:e.initialItems.query,start:e.initialItems.start,sortField:u.sortField,sortOrder:u.sortOrder},loadMoreStart:e.initialItems.nextStart,updatingFilterOrSort:!1,searching:!1,searchTerm:"",loadingMore:!1,totalResults:e.initialItems.total,waitingForResults:!0,hasModifiers:!1,defaultSearchQuery:p.props.defaultSearchQuery||""},p}return Object(c.a)(i,[{key:"componentDidMount",value:function(){var e;return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(this.props.userSession.getUser());case 2:e=t.sent,this.userFavGroupId=e.favGroupId,this.userOrgId=e.orgId,this.username=e.username,this.userGroupIds=(e.groups||[]).map((function(e){return e.id})),this.updateQuerySetStateFetchItems(!0);case 8:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"render",value:function(){var e=b()("item-browser",{updating:this.state.updatingFilterOrSort},this.props.className);return Ie("div",{className:f.a.dynamic([["4235506899",[C.a.spacing.sm,C.a.spacing.xxs,C.a.responsiveBreakpoints.large,this.props.heading?C.a.spacing.lg:0]]])+" "+(e||"")},this.props.heading&&this.renderTitle(),this.renderTabsAndSearchBox(),this.renderSecondLineFilters(),this.renderResults(),Ie(f.a,{id:"4235506899",dynamic:[C.a.spacing.sm,C.a.spacing.xxs,C.a.responsiveBreakpoints.large,this.props.heading?C.a.spacing.lg:0]},[".item-browser.__jsx-style-dynamic-selector{margin:".concat(C.a.spacing.sm," 0 ").concat(C.a.spacing.xxs,";}"),".item-browser.__jsx-style-dynamic-selector .item-result{opacity:1;-webkit-animation:300ms ease-in-out 0s enableResults-__jsx-style-dynamic-selector;animation:300ms ease-in-out 0s enableResults-__jsx-style-dynamic-selector;}",".item-browser.updating.__jsx-style-dynamic-selector .item-result{opacity:0.5;pointer-events:none;-webkit-animation:300ms ease-in-out 0s disableResult-__jsx-style-dynamic-selector;animation:300ms ease-in-out 0s disableResult-__jsx-style-dynamic-selector;}","@-webkit-keyframes enableResults-__jsx-style-dynamic-selector{0%{opacity:0.5;}100%{opacity:1;}}","@keyframes enableResults-__jsx-style-dynamic-selector{0%{opacity:0.5;}100%{opacity:1;}}","@-webkit-keyframes disableResult-__jsx-style-dynamic-selector{0%{opacity:1;}100%{opacity:0.5;}}","@keyframes disableResult-__jsx-style-dynamic-selector{0%{opacity:1;}100%{opacity:0.5;}}","@media (min-width:".concat(C.a.responsiveBreakpoints.large,"){.item-browser.__jsx-style-dynamic-selector{margin-top:").concat(this.props.heading?C.a.spacing.lg:0,";}}")]))}},{key:"updateQuerySetStateFetchItems",value:function(e,t){var n=this.getUpdatedQuery(),i=t?Re({start:0,sortField:this.state.currentSearch.sortField,sortOrder:this.state.currentSearch.sortOrder},n):Re({},this.state.currentSearch,{},n),a={currentSearch:i};t&&Object.assign(a,{loadMoreStart:-1}),this.setState(a),e&&this.state.searchResults.length||this.fetchItems(i,!0)}}]),i}(y.PureComponent);Object(h.a)(De,"defaultProps",{tabFilters:[],initialItems:{query:"",start:1,num:24,results:[],nextStart:-1,total:0}});t.a=Object(T.d)(Object(M.c)(De))},TQaU:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p).a.createElement;function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(d()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return u("div",{className:"jsx-4210496642 toolbar-container"},this.props.children,u(l.a,{id:"4210496642"},[".toolbar-container.jsx-4210496642{height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"]))}}]),c}(p.PureComponent);t.a=h},TZT2:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("ERkP"));t.AmpStateContext=a.createContext({})},Tfdo:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e,t){if(e.current){var n=e.current.videoWidth,i=e.current.videoHeight,a=document.createElement("canvas");a.width=n,a.height=i,a.getContext("2d").drawImage(e.current,0,0,n,i);var o=t||"";try{o=a.toDataURL()}catch(r){}return o}return""}},TtGm:function(e,t,n){"use strict";var i=n("ERkP"),a=n.n(i),o=n("yFcC"),r=n.n(o),s=n("NX3A"),c=a.a.createElement;t.a=function(e){return{styles:c(r.a,{id:"359971944",dynamic:[s.a.color.white,e.accentColor1,e.mixins.typography.body.size.stepDown1({weight:"bold"}),e.hasRoundedCorners?"2.8rem":e.borderRadius,s.a.spacing.xxs,s.a.responsiveBreakpoints.medium,e.mixins.typography.body.size.baseline({weight:"bold"})]},[".button-viewer-container.__jsx-style-dynamic-selector,.button-builder-container.__jsx-style-dynamic-selector{text-align:left;}","html[dir='rtl'] .button-viewer-container.__jsx-style-dynamic-selector,html[dir='rtl'] .button-builder-container.__jsx-style-dynamic-selector{text-align:right;}",".button-builder-text.__jsx-style-dynamic-selector,.ghost-element.__jsx-style-dynamic-selector,.button-viewer.__jsx-style-dynamic-selector{border:2px solid transparent;text-align:center;color:".concat(s.a.color.white,";background-color:").concat(e.accentColor1,";").concat(e.mixins.typography.body.size.stepDown1({weight:"bold"})," border-radius:").concat(e.hasRoundedCorners?"2.8rem":e.borderRadius,";min-width:7.6rem;}"),".button-viewer.__jsx-style-dynamic-selector:focus,.button-builder-text.__jsx-style-dynamic-selector:focus{border:2px solid #0faaea;outline:none;}",".button-builder-text.__jsx-style-dynamic-selector,.button-viewer.__jsx-style-dynamic-selector{padding:".concat(s.a.spacing.xxs,";}"),"@media (min-width:".concat(s.a.responsiveBreakpoints.medium,"){.button-builder-text.__jsx-style-dynamic-selector,.ghost-element.__jsx-style-dynamic-selector,.button-viewer.__jsx-style-dynamic-selector{").concat(e.mixins.typography.body.size.baseline({weight:"bold"}),";}}")]),className:r.a.dynamic([["359971944",[s.a.color.white,e.accentColor1,e.mixins.typography.body.size.stepDown1({weight:"bold"}),e.hasRoundedCorners?"2.8rem":e.borderRadius,s.a.spacing.xxs,s.a.responsiveBreakpoints.medium,e.mixins.typography.body.size.baseline({weight:"bold"})]]])}}},UTGL:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return p}));var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("NX3A"),c=r.a.createElement,l="256px",p=function(e){var t="".concat(e.baseUrl,"/static/images/builder/drag-and-drop");return c(a.a,{id:"2740610981",dynamic:[s.a.color.haikuGreen,l,"132px",t,t,t,t,t,t]},[".dnd-ghost-block{height:0.2rem;margin:auto;padding:1px;overflow:hidden;background:".concat(s.a.color.haikuGreen,";}"),".dnd-drag-block.large-block{width:".concat(l," !important;height:").concat("132px"," !important;overflow:hidden;background-size:cover;background-repeat:no-repeat;background-position:center;}"),".dnd-drag-block .media-toolbar,.dnd-drag-block .dnd-handle,.dnd-drag-block .media-caption,.dnd-ghost-block *{visibility:hidden;}",".dnd-drag-block.embed-placeholder{background-image:url('".concat(t,"/embed-placeholder.png');}"),".dnd-drag-block.map-placeholder{background-image :url('".concat(t,"/map-placeholder.png');}"),".dnd-drag-block.sidecar-placeholder{background-image :url('".concat(t,"/sidecar-placeholder.png');}"),".dnd-drag-block.slideshow-placeholder{background-image :url('".concat(t,"/slideshow-placeholder.png');}"),".dnd-drag-block.tour-placeholder{background-image :url('".concat(t,"/guided-tour-placeholder.png');}"),".dnd-drag-block.swipe-placeholder{background-image :url('".concat(t,"/swipe-placeholder.png');}"),".dnd-handle:hover,.dnd-handle:focus{cursor:move;}"])}},Ur6V:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"caret-down",path:"M30.5 10l-14 14L2.6 10z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},UvhB:function(e,t,n){"use strict";var i=n("fGyu"),a=n("yFcC"),o=n.n(a),r=n("ERkP"),s=n.n(r),c=n("2SGB"),l=n("Lf33"),p=n("Z4N4"),u=n("NX3A"),d=n("gbSL"),h=n("A7aE"),m=n("+tpQ"),f=s.a.createElement,y=Object(r.memo)((function(e){var t=e.flavor,n=e.url,i={styles:f(o.a,{id:"624241414"},[".icon-launch.jsx-624241414{overflow:hidden;}"]),className:"jsx-624241414"},a="dark"===t?u.a.color.haikuGreen:u.a.color.bleuDeFrance;return f("a",{href:n,target:"_blank",rel:"noopener noreferrer",role:"button",className:o.a.dynamic([["2415566230",[a,p.a.typography.body12(),p.a.gapped("column",u.a.spacing.xxxs)]]])},f(c.a,{id:"builder.map.learnMore"}),f(m.a,{color:a,height:"1.2rem",width:"auto",className:i.className}),f(o.a,{id:"2415566230",dynamic:[a,p.a.typography.body12(),p.a.gapped("column",u.a.spacing.xxxs)]},["a.__jsx-style-dynamic-selector{color:".concat(a,";-webkit-text-decoration:none;text-decoration:none;").concat(p.a.typography.body12()," ").concat(p.a.gapped("column",u.a.spacing.xxxs)," display:inline-grid;}"),"a.__jsx-style-dynamic-selector:hover{-webkit-text-decoration:underline;text-decoration:underline;}"]),i.styles)})),g=s.a.createElement;t.a=Object(h.b)(Object(r.memo)((function(e){var t=function(e){var t=["themeColor1","themeColor2","themeColor3"].map((function(t){return{id:t,color:e[t]}})),n=e.accentColor1;return t.findIndex((function(e){return e.color===n}))>-1?t:[].concat(Object(i.a)(t),[{id:"accentColor1",color:n}])}(e.storyDesign.storyTheme.themeVariables);return g(l.a,{padding:"all",flavor:e.flavor},g("div",{className:o.a.dynamic([["3880292935",[p.a.gappedList(u.a.spacing.xxs),"dark"===e.flavor?u.a.color.platinum:u.a.color.darkGreen,p.a.typography.h5(),"dark"===e.flavor?u.a.color.platinum:u.a.color.cadet,p.a.typography.body12()]]])+" content"},g(c.a,{id:"builder.map.chooseColor",tagName:"h5"}),g(d.a,{colors:t,onClick:e.onSelect,selectedStyle:e.selectedColor}),g(c.a,{id:"builder.map.chooseColorDescription",tagName:"p"}),g(y,{flavor:e.flavor,url:"https://doc.arcgis.com/en/arcgis-storymaps/author-and-share/set-a-theme.htm"})),g(o.a,{id:"3880292935",dynamic:[p.a.gappedList(u.a.spacing.xxs),"dark"===e.flavor?u.a.color.platinum:u.a.color.darkGreen,p.a.typography.h5(),"dark"===e.flavor?u.a.color.platinum:u.a.color.cadet,p.a.typography.body12()]},[".content.__jsx-style-dynamic-selector{".concat(p.a.gappedList(u.a.spacing.xxs)," justify-items:start;max-width:21.8rem;}"),".content.__jsx-style-dynamic-selector>h5{color:".concat("dark"===e.flavor?u.a.color.platinum:u.a.color.darkGreen,";").concat(p.a.typography.h5(),";}"),".content.__jsx-style-dynamic-selector>p{color:".concat("dark"===e.flavor?u.a.color.platinum:u.a.color.cadet,";").concat(p.a.typography.body12(),";}")]))})))},"V+ka":function(e,t,n){"use strict";n.d(t,"b",(function(){return m}));var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("ERkP"),p=n.n(l),u=p.a.createElement;function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var h=p.a.createContext({top:"0rem"}),m=function(e){return function(t){Object(c.a)(p,t);var n,l=(n=p,function(){var e,t=Object(s.a)(n);if(d()){var i=Object(s.a)(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Object(r.a)(this,e)});function p(){return Object(a.a)(this,p),l.apply(this,arguments)}return Object(o.a)(p,[{key:"render",value:function(){var t=this;return u(h.Consumer,null,(function(n){return u(e,Object(i.a)({},t.props,{appOffset:n}))}))}}]),p}(l.PureComponent)};t.a=h},VkeQ:function(e,t,n){"use strict";var i=n("cxan"),a=n("HbGN"),o=n("9fIP"),r=n("MMYH"),s=n("K/z8"),c=n("sRHE"),l=n("8K1b"),p=n("zjfJ"),u=n("yFcC"),d=n.n(u),h=n("ERkP"),m=n.n(h),f=n("O94r"),y=n.n(f),g=n("NX3A"),v=n("Z4N4"),b=m.a.createElement;function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var O=function(e){Object(l.a)(p,e);var t,n=(t=p,function(){var e,n=Object(c.a)(t);if(x()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function p(){return Object(o.a)(this,p),n.apply(this,arguments)}return Object(r.a)(p,[{key:"render",value:function(){var e=this.props,t=e.children,n=(e.className,e.fitHeight,e.actionHighlightSize,e.actionHighlightColor,e.tagName),o=Object(a.a)(e,["children","className","fitHeight","actionHighlightSize","actionHighlightColor","tagName"]),r=y()(this.props.className,"card");return b(n,Object(i.a)({},o,{className:d.a.dynamic([["381205158",[this.props.fitHeight?"height: 100%;":"",g.a.spacing.xxxxs,g.a.color.white,v.a.shadow.sm(),v.a.shadow.md(),v.a.shadow.md()]]])+" "+(o&&null!=o.className&&o.className||r||"")}),t,b(d.a,{id:"381205158",dynamic:[this.props.fitHeight?"height: 100%;":"",g.a.spacing.xxxxs,g.a.color.white,v.a.shadow.sm(),v.a.shadow.md(),v.a.shadow.md()]},[".card.__jsx-style-dynamic-selector{display:block;".concat(this.props.fitHeight?"height: 100%;":""," width:100%;overflow:hidden;border-radius:").concat(g.a.spacing.xxxxs,";background-color:").concat(g.a.color.white,";color:inherit;-webkit-text-decoration:none;text-decoration:none;").concat(v.a.shadow.sm(),";-webkit-transition:box-shadow 0.15s ease-in-out;transition:box-shadow 0.15s ease-in-out;}"),"@media (hover:hover){.card-wrapper.has-action:hover .card.__jsx-style-dynamic-selector{".concat(v.a.shadow.md(),";}.card-wrapper.has-action:focus-within .card.__jsx-style-dynamic-selector{").concat(v.a.shadow.md(),";}}"),"body:not(.user-is-tabbing) .card:focus{outline:none;}"]))}}]),p}(h.PureComponent);Object(p.a)(O,"defaultProps",{actionHighlightSize:3,actionHighlightColor:g.a.color.platinum,tagName:"div"});var w=m.a.createElement,j=function(e){return w("div",{className:d.a.dynamic([["3467561453",[g.a.spacing.xxxs,g.a.spacing.xxxs]]])+" "+(y()("card-wrapper",e.className,{"has-action":e.hasAction})||"")},w("div",{className:d.a.dynamic([["3467561453",[g.a.spacing.xxxs,g.a.spacing.xxxs]]])+" action-animation-wrapper"},e.children),w(d.a,{id:"3467561453",dynamic:[g.a.spacing.xxxs,g.a.spacing.xxxs]},[".card-wrapper.__jsx-style-dynamic-selector{position:relative;width:100%;height:100%;}",".card-wrapper.has-action.__jsx-style-dynamic-selector .action-animation-wrapper.__jsx-style-dynamic-selector{position:relative;width:100%;height:100%;-webkit-transition:bottom 0.15s ease-in-out;transition:bottom 0.15s ease-in-out;bottom:0;}","@media (hover:hover){.card-wrapper.has-action.__jsx-style-dynamic-selector:hover .action-animation-wrapper.__jsx-style-dynamic-selector{bottom:".concat(g.a.spacing.xxxs,";cursor:pointer;}.card-wrapper.has-action.__jsx-style-dynamic-selector:focus-within .action-animation-wrapper.__jsx-style-dynamic-selector{bottom:").concat(g.a.spacing.xxxs,";cursor:pointer;}}")]))};j.defaultProps={hasAction:!0};var C=m.a.createElement;function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=function(e){Object(l.a)(i,e);var t,n=(t=i,function(){var e,n=Object(c.a)(t);if(k()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function i(){return Object(o.a)(this,i),n.apply(this,arguments)}return Object(r.a)(i,[{key:"render",value:function(){return C("div",{className:d.a.dynamic([["1288822338",[this.props.height]]])+" card-top"},this.props.children,C(d.a,{id:"1288822338",dynamic:[this.props.height]},[".card-top.__jsx-style-dynamic-selector{height:".concat(this.props.height,";position:relative;width:100%;}")]))}}]),i}(h.PureComponent);Object(p.a)(S,"defaultProps",{height:"17rem"});var I=m.a.createElement;function P(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var R=function(e){Object(l.a)(i,e);var t,n=(t=i,function(){var e,n=Object(c.a)(t);if(P()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function i(){return Object(o.a)(this,i),n.apply(this,arguments)}return Object(r.a)(i,[{key:"render",value:function(){var e=y()(this.props.className,"card-body");return I("div",{className:d.a.dynamic([["1261198656",[g.a.spacing.xs,g.a.spacing.xxs]]])+" "+(e||"")},this.props.children,I(d.a,{id:"1261198656",dynamic:[g.a.spacing.xs,g.a.spacing.xxs]},[".card-body.__jsx-style-dynamic-selector{padding:".concat(g.a.spacing.xs,";padding-bottom:").concat(g.a.spacing.xxs,";}")]))}}]),i}(h.PureComponent),E=m.a.createElement;function D(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var T=function(e){Object(l.a)(i,e);var t,n=(t=i,function(){var e,n=Object(c.a)(t);if(D()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function i(){return Object(o.a)(this,i),n.apply(this,arguments)}return Object(r.a)(i,[{key:"render",value:function(){var e=y()(this.props.className,"card-title");return E("h5",{className:d.a.dynamic([["921980494",[g.a.color.darkGreen,v.a.typography.h5(),this.props.lineClamp?v.a.lineClamp(this.props.lineClamp,g.a.font.lineHeight.medium):""]]])+" "+(e||"")},this.props.children,E(d.a,{id:"921980494",dynamic:[g.a.color.darkGreen,v.a.typography.h5(),this.props.lineClamp?v.a.lineClamp(this.props.lineClamp,g.a.font.lineHeight.medium):""]},[".card-title.__jsx-style-dynamic-selector{margin:0 0 0.5em;color:".concat(g.a.color.darkGreen,";").concat(v.a.typography.h5()," ").concat(this.props.lineClamp?v.a.lineClamp(this.props.lineClamp,g.a.font.lineHeight.medium):"",";}"),".card-title.__jsx-style-dynamic-selector:last-child{margin:0;}"]))}}]),i}(h.PureComponent),M=m.a.createElement;function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var N=function(e){Object(l.a)(i,e);var t,n=(t=i,function(){var e,n=Object(c.a)(t);if(A()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function i(){return Object(o.a)(this,i),n.apply(this,arguments)}return Object(r.a)(i,[{key:"render",value:function(){var e=y()(this.props.className,"card-subtitle");return M("p",{className:d.a.dynamic([["1876322920",[v.a.typography.blockSmall(),g.a.color.cadet,this.props.lineClamp?v.a.lineClamp(this.props.lineClamp,g.a.font.lineHeight.extraExtraSmall):""]]])+" "+(e||"")},this.props.children,M(d.a,{id:"1876322920",dynamic:[v.a.typography.blockSmall(),g.a.color.cadet,this.props.lineClamp?v.a.lineClamp(this.props.lineClamp,g.a.font.lineHeight.extraExtraSmall):""]},[".card-subtitle.__jsx-style-dynamic-selector{margin:0 0 0.75em;".concat(v.a.typography.blockSmall()," color:").concat(g.a.color.cadet,";").concat(this.props.lineClamp?v.a.lineClamp(this.props.lineClamp,g.a.font.lineHeight.extraExtraSmall):"",";}"),".card-subtitle.__jsx-style-dynamic-selector:last-child{margin:0;}"]))}}]),i}(h.PureComponent),L=m.a.createElement;function G(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var _=function(e){Object(l.a)(i,e);var t,n=(t=i,function(){var e,n=Object(c.a)(t);if(G()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function i(){return Object(o.a)(this,i),n.apply(this,arguments)}return Object(r.a)(i,[{key:"render",value:function(){var e=y()(this.props.className,"card-text");return L("p",{className:d.a.dynamic([["4092897750",[g.a.color.cadet,v.a.typography.body12(),this.props.lineClamp?v.a.lineClamp(this.props.lineClamp,g.a.font.lineHeight.small):""]]])+" "+(e||"")},this.props.children,L(d.a,{id:"4092897750",dynamic:[g.a.color.cadet,v.a.typography.body12(),this.props.lineClamp?v.a.lineClamp(this.props.lineClamp,g.a.font.lineHeight.small):""]},[".card-text.__jsx-style-dynamic-selector{margin:0 0 0.5em;color:".concat(g.a.color.cadet,";").concat(v.a.typography.body12()," ").concat(this.props.lineClamp?v.a.lineClamp(this.props.lineClamp,g.a.font.lineHeight.small):"",";}"),".card-text.__jsx-style-dynamic-selector:last-child{margin:0;}"]))}}]),i}(h.PureComponent),B=m.a.createElement;function W(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var V=function(e){Object(l.a)(i,e);var t,n=(t=i,function(){var e,n=Object(c.a)(t);if(W()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function i(){return Object(o.a)(this,i),n.apply(this,arguments)}return Object(r.a)(i,[{key:"render",value:function(){return B("div",{className:d.a.dynamic([["1450445096",[g.a.spacing.xs,g.a.spacing.xs,g.a.spacing.xxs,v.a.gapped("column",g.a.spacing.xxxs),v.a.typography.body12(!0),g.a.color.cadet,v.a.gapped("column",g.a.spacing.xxxxs),v.a.typography.body16(!0),g.a.color.haikuGreen]]])+" card-footer"},B("div",{className:d.a.dynamic([["1450445096",[g.a.spacing.xs,g.a.spacing.xs,g.a.spacing.xxs,v.a.gapped("column",g.a.spacing.xxxs),v.a.typography.body12(!0),g.a.color.cadet,v.a.gapped("column",g.a.spacing.xxxxs),v.a.typography.body16(!0),g.a.color.haikuGreen]]])+" start-items"},this.props.startItems),B("div",{className:d.a.dynamic([["1450445096",[g.a.spacing.xs,g.a.spacing.xs,g.a.spacing.xxs,v.a.gapped("column",g.a.spacing.xxxs),v.a.typography.body12(!0),g.a.color.cadet,v.a.gapped("column",g.a.spacing.xxxxs),v.a.typography.body16(!0),g.a.color.haikuGreen]]])+" end-items"},this.props.endItems),B(d.a,{id:"1450445096",dynamic:[g.a.spacing.xs,g.a.spacing.xs,g.a.spacing.xxs,v.a.gapped("column",g.a.spacing.xxxs),v.a.typography.body12(!0),g.a.color.cadet,v.a.gapped("column",g.a.spacing.xxxxs),v.a.typography.body16(!0),g.a.color.haikuGreen]},[".card-footer.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;cursor:default;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;left:".concat(g.a.spacing.xs,";right:").concat(g.a.spacing.xs,";bottom:").concat(g.a.spacing.xxs,";z-index:1;}"),".start-items.__jsx-style-dynamic-selector{".concat(v.a.gapped("column",g.a.spacing.xxxs),";-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;").concat(v.a.typography.body12(!0),";color:").concat(g.a.color.cadet,";}"),".end-items.__jsx-style-dynamic-selector{".concat(v.a.gapped("column",g.a.spacing.xxxxs),";-webkit-box-pack:end;-webkit-justify-content:end;-ms-flex-pack:end;justify-content:end;").concat(v.a.typography.body16(!0),";color:").concat(g.a.color.haikuGreen,";}")]))}}]),i}(h.PureComponent),F=m.a.createElement,U=function(){return F("div",{className:d.a.dynamic([["1478002332",[g.a.spacing.xxs,g.a.spacing.xxs]]])+" card-footer-filler"},F(d.a,{id:"1478002332",dynamic:[g.a.spacing.xxs,g.a.spacing.xxs]},[".card-footer-filler.__jsx-style-dynamic-selector{height:".concat(g.a.spacing.xxs,";margin-top:").concat(g.a.spacing.xxs,";}")]))},z=m.a.createElement;function H(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Y=function(e){Object(l.a)(i,e);var t,n=(t=i,function(){var e,n=Object(c.a)(t);if(H()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function i(){return Object(o.a)(this,i),n.apply(this,arguments)}return Object(r.a)(i,[{key:"render",value:function(){var e=y()(this.props.className,"card-image");return z(h.Fragment,null,z("div",{className:d.a.dynamic([["2071849767",[this.props.src]]])+" "+(e||"")}),z(d.a,{id:"2071849767",dynamic:[this.props.src]},[".card-image.__jsx-style-dynamic-selector{position:relative;background-image:url('".concat(this.props.src,"');background-repeat:no-repeat;background-size:cover;background-position:center center;max-width:100%;width:100%;height:100%;vertical-align:bottom;max-height:100%;}")]))}}]),i}(h.PureComponent);O.Wrapper=j,O.Top=S,O.Body=R,O.Title=T,O.Subtitle=N,O.Text=_,O.Footer=V,O.FooterFiller=U,O.Image=Y;t.a=O},W3Hs:function(e,t,n){"use strict";n.r(t),n.d(t,"Editor",(function(){return H}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("2SGB"),f=n("NX3A"),y=n("wwFW"),g=n("W8gz"),v=n("9ixP"),b=n("HW3u"),x=n("TQaU"),O=n("QOs2"),w=n("bXtg"),j=n("wpjN"),C=n("t7DY"),k=n("cxan"),S=n("ADNR"),I=n("MKkT"),P=n("r3il"),R=n("MEC2");function E(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var D=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(E()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"arrow-single",path:"M24,4L24 0 32 6 24 12 24 8 0 8 0 4z",viewBox:"0 0 32 12"})}return a}(R.a);function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var M=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(T()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"arrow-double",path:"M24,8L8 8 8 12 1.11022302e-15 6 8 0 8 4 24 4 24 1.92974718e-15 32 6 24 12z",viewBox:"0 0 32 12"})}return a}(R.a),A=n("erT5"),N=h.a.createElement,L=[[{mode:C.b.SELECT,icon:S.a,ariaLabel:"Select"}],[[{mode:C.b.POINT_REGULAR,icon:I.a,ariaLabel:"Point"},{mode:C.b.POINT_NUMBERED,icon:P.a,ariaLabel:"Numbered point"},{mode:C.b.ARROW_SINGLE,icon:D,ariaLabel:"Single Arrow"},{mode:C.b.ARROW_DOUBLE,icon:M,ariaLabel:"Double Arrow"}]]],G=[C.b.UNDO,C.b.REDO],_=Object(d.memo)((function(e){return N(A.a,Object(k.a)({},e,{disabledModes:G,configs:L}))})),B=n("wWnZ"),W=n("6ATX"),V=h.a.createElement,F=function(e){return V(B.a,{type:"clear",icon:V(W.a,null),onClick:function(){e.onClick(e.id)}},e.children)},U=h.a.createElement;function z(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var H=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(z()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"renderToolbar",(function(){return U(x.a,null,U(_,{mode:t.state.drawingMode,onSelected:t.onDrawingToolSelected,undo:t.undo,redo:t.redo,canUndo:!1,canRedo:!1,isDisabled:!1}),U("div",null,U(F,{id:"sceneUS",onClick:t.initSubApp},"US Canvas"),U(F,{id:"sceneUSTopoSVG",onClick:t.initSubApp},"US SVG"),U(F,{id:"sceneWorldProjection",onClick:t.initSubApp},"World Map Projection"),U(F,{id:"sceneWorld",onClick:t.initSubApp},"World Map Globe Projection")))})),Object(l.a)(Object(o.a)(t),"renderMap",(function(){return U("div",{className:u.a.dynamic([["1962050678",[f.a.color.black]]])+" editor-container"},U(j.a,{setApp:t.setApp}),U(u.a,{id:"1962050678",dynamic:[f.a.color.black]},[".editor-container.__jsx-style-dynamic-selector{overflow:hidden;position:relative;z-index:0;background:".concat(f.a.color.black,";}")]))})),Object(l.a)(Object(o.a)(t),"renderSidePanel",(function(){var e=[{id:"options",icon:function(e){return U(y.a,{height:f.a.spacing.xxs,width:"auto",color:e,title:U(m.a,{id:"builder.common.properties",tagName:"title"})})},content:U(w.a,null,U(g.a,{title:"Controls"},U(v.a.LabeledSwitch,{label:U(m.a,{id:"builder.globe.typeBasemap"}),switch:U(v.a,{isOn:t.state.isTypeBasemap,onToggle:t.toggleTypeBasemap})})))}];return U(b.a,{items:e})})),Object(l.a)(Object(o.a)(t),"toggleTypeBasemap",(function(e){t.setState({isTypeBasemap:e})})),Object(l.a)(Object(o.a)(t),"setApp",(function(e){t.appConnector=e})),Object(l.a)(Object(o.a)(t),"onDrawingToolSelected",(function(e){t.setState({drawingMode:e})})),Object(l.a)(Object(o.a)(t),"undo",(function(){})),Object(l.a)(Object(o.a)(t),"redo",(function(){})),Object(l.a)(Object(o.a)(t),"save",(function(){t.props.onPlace()})),Object(l.a)(Object(o.a)(t),"discard",(function(){t.props.onCancel()})),Object(l.a)(Object(o.a)(t),"initSubApp",(function(e){})),t.state={drawingMode:C.b.SELECT,isTypeBasemap:!0,isDarkBasemapOn:!0,isCameraAnimationOn:!0,isLightingAnimationOn:!0,sliderValue:.5},t}return Object(a.a)(p,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return U(O.a,{toolbar:this.renderToolbar(),sidePanel:this.renderSidePanel(),map:this.renderMap(),primaryButtonTitle:"Save",onPrimaryButtonClick:this.save,secondaryButtonTitle:"Cancel",onSecondaryButtonClick:this.discard,shouldDisablePrimaryButton:!0})}}]),p}(d.PureComponent);t.default=H},W8gz:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("Z4N4"),h=u.a.createElement;function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(m()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return h("div",{className:l.a.dynamic([["3570315791",[d.a.typography.h6(),d.a.gappedList(this.props.listGap)]]])+" tab-panel-section"},h(l.a,{id:"3570315791",dynamic:[d.a.typography.h6(),d.a.gappedList(this.props.listGap)]},[".title.__jsx-style-dynamic-selector{".concat(d.a.typography.h6()," height:4rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"),".content.__jsx-style-dynamic-selector{".concat(d.a.gappedList(this.props.listGap),";}")]),h("h6",{className:l.a.dynamic([["3570315791",[d.a.typography.h6(),d.a.gappedList(this.props.listGap)]]])+" title"},this.props.title),h("div",{className:l.a.dynamic([["3570315791",[d.a.typography.h6(),d.a.gappedList(this.props.listGap)]]])+" content"},this.props.children))}}]),c}(p.PureComponent)},W9tV:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("WXRn"),a=function(e){var t="undefined"===typeof e.delay?200:e.delay,n=Object(i.a)(),a=0,o=0;try{n&&(a=window.parent.scrollX,o=window.parent.scrollY)}catch(r){n=!1}setTimeout((function(){if(e.element&&document&&document.documentElement&&("scrollBehavior"in document.documentElement.style?e.element.scrollIntoView({behavior:e.behavior||"smooth",block:e.verticalAlign}):e.element.scrollIntoView("start"===e.verticalAlign),n))try{window.parent.scrollTo(a,o)}catch(r){}}),t)}},XEYk:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("YQpL"),f=n("O94r"),y=n.n(f),g=n("NX3A"),v=n("Z4N4"),b=n("liFR"),x=n("+L/X"),O=h.a.createElement;function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var j=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(w()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"renderButton",(function(){var t,n=null===(t=e.props.item.information)||void 0===t?void 0:t.icon;return O("button",{disabled:e.props.isDisabled,onClick:e.props.onItemClick,className:u.a.dynamic([["3692775979",[g.a.spacing.xxs,g.a.color.auroMetalSaurus,v.a.typography.body12(),g.a.font.weight.medium,g.a.spacing.xxxs,g.a.spacing.xxxs]]])+" item-content"},e.props.item.icon&&e.renderIcon(),e.props.item.information&&!e.props.disabledTooltipStr?O("div",{className:u.a.dynamic([["3692775979",[g.a.spacing.xxs,g.a.color.auroMetalSaurus,v.a.typography.body12(),g.a.font.weight.medium,g.a.spacing.xxxs,g.a.spacing.xxxs]]])+" title-wrapper aligner"},O("span",{className:u.a.dynamic([["3692775979",[g.a.spacing.xxs,g.a.color.auroMetalSaurus,v.a.typography.body12(),g.a.font.weight.medium,g.a.spacing.xxxs,g.a.spacing.xxxs]]])+" title"},e.props.item.title),O("span",{className:u.a.dynamic([["3692775979",[g.a.spacing.xxs,g.a.color.auroMetalSaurus,v.a.typography.body12(),g.a.font.weight.medium,g.a.spacing.xxxs,g.a.spacing.xxxs]]])+" info-container"},O(b.a,{tooltipContent:e.props.intl.formatMessage({id:e.props.item.information.descriptionStringId}),placement:"top"},n&&O(n,{height:g.a.font.size.medium,width:g.a.font.size.medium,color:g.a.color.deepLilac,className:u.a.dynamic([["3692775979",[g.a.spacing.xxs,g.a.color.auroMetalSaurus,v.a.typography.body12(),g.a.font.weight.medium,g.a.spacing.xxxs,g.a.spacing.xxxs]]])})))):O("span",{className:u.a.dynamic([["3692775979",[g.a.spacing.xxs,g.a.color.auroMetalSaurus,v.a.typography.body12(),g.a.font.weight.medium,g.a.spacing.xxxs,g.a.spacing.xxxs]]])+" title aligner"},e.props.item.title),O(u.a,{id:"3692775979",dynamic:[g.a.spacing.xxs,g.a.color.auroMetalSaurus,v.a.typography.body12(),g.a.font.weight.medium,g.a.spacing.xxxs,g.a.spacing.xxxs]},[".item-content.__jsx-style-dynamic-selector{padding:0.7rem ".concat(g.a.spacing.xxs,";margin:0.5rem 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden;}"),".item-content[disabled].__jsx-style-dynamic-selector .title.__jsx-style-dynamic-selector{cursor:default;opacity:0.3;}",".title-wrapper.__jsx-style-dynamic-selector{overflow:hidden;}",".item-content[disabled].__jsx-style-dynamic-selector:hover .title.__jsx-style-dynamic-selector{-webkit-text-decoration:none;text-decoration:none;}",".title.__jsx-style-dynamic-selector{color:".concat(g.a.color.auroMetalSaurus,";").concat(v.a.typography.body12(),";font-weight:").concat(g.a.font.weight.medium,";word-wrap:break-word;overflow:hidden;}"),".item-content.__jsx-style-dynamic-selector:hover .title.__jsx-style-dynamic-selector{-webkit-text-decoration:underline;text-decoration:underline;}","html:not([dir='rtl']) .aligner.__jsx-style-dynamic-selector{margin-left:".concat(g.a.spacing.xxxs,";text-align:left;}"),"html[dir='rtl'] .aligner.__jsx-style-dynamic-selector{margin-right:".concat(g.a.spacing.xxxs,";text-align:right;}"),".info-container.__jsx-style-dynamic-selector{line-height:0;}","html:not([dir='rtl']) .info-container.__jsx-style-dynamic-selector{margin-left:0.6rem;}","html[dir='rtl'] .info-container.__jsx-style-dynamic-selector{margin-right:0.6rem;}"]))})),Object(l.a)(Object(o.a)(e),"renderIcon",(function(){var t=e.props.item.icon&&y()("icon-wrapper",{"icon-circular":"circular"===e.props.item.icon.shape,"icon-elliptical":"elliptical"===e.props.item.icon.shape,"icon-square":"square"===e.props.item.icon.shape,"icon-blank":"blank"===e.props.item.icon.shape,shrink:"audio"===e.props.item.type||"embed"===e.props.item.type}),n=e.props.item.icon.icon;return O("div",{className:u.a.dynamic([["1183976616",[g.a.spacing.sm,g.a.spacing.sm,g.a.color.antiFlashWhite,g.a.spacing.xs,g.a.spacing.xxxxs]]])+" "+(t||"")},O(n,{height:"elliptical"===e.props.item.icon.shape?g.a.spacing.xxs:g.a.spacing.sm,color:g.a.color.black,className:u.a.dynamic([["1183976616",[g.a.spacing.sm,g.a.spacing.sm,g.a.color.antiFlashWhite,g.a.spacing.xs,g.a.spacing.xxxxs]]])}),O(u.a,{id:"1183976616",dynamic:[g.a.spacing.sm,g.a.spacing.sm,g.a.color.antiFlashWhite,g.a.spacing.xs,g.a.spacing.xxxxs]},[".icon-wrapper.__jsx-style-dynamic-selector{font-size:".concat(g.a.spacing.sm,";width:").concat(g.a.spacing.sm,";line-height:0;background-color:").concat(g.a.color.antiFlashWhite,";}"),".icon-wrapper.shrink.__jsx-style-dynamic-selector{font-size:".concat(g.a.spacing.xs,";}"),".icon-wrapper.icon-circular.__jsx-style-dynamic-selector,.icon-wrapper.icon-elliptical.__jsx-style-dynamic-selector{border-radius:50%;}",".icon-wrapper.icon-square.__jsx-style-dynamic-selector{border-radius:".concat(g.a.spacing.xxxxs,";}"),".icon-wrapper.icon-blank.__jsx-style-dynamic-selector{background-color:transparent;}"]))})),e}return Object(a.a)(p,[{key:"render",value:function(){return this.props.isDisabled&&this.props.disabledTooltipStr?O(b.a,{tooltipContent:this.props.disabledTooltipStr,offset:[0,-5]},this.renderButton()):this.renderButton()}}]),p}(d.PureComponent);t.a=Object(m.c)(Object(x.b)(j))},XGeW:function(e,t,n){"use strict";n.r(t),n.d(t,"AudioViewer",(function(){return S}));var i=n("VtSi"),a=n.n(i),o=n("9fIP"),r=n("MMYH"),s=n("pWxA"),c=n("K/z8"),l=n("sRHE"),p=n("8K1b"),u=n("zjfJ"),d=n("yFcC"),h=n.n(d),m=n("ERkP"),f=n.n(m),y=n("O94r"),g=n.n(y),v=n("NX3A"),b=n("eCu0"),x=n("A7aE"),O=n("+L/X"),w=n("+PoS"),j=n("u0WM"),C=f.a.createElement;function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(k()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),t=n.call(this,e),Object(u.a)(Object(s.a)(t),"audioRef",Object(m.createRef)()),Object(u.a)(Object(s.a)(t),"attachRef",(function(e){t.audioRef.current=e,"function"===typeof t.props.setAudioRef&&t.props.setAudioRef(e)})),Object(u.a)(Object(s.a)(t),"updateSrc",(function(){var e;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:t.props.resourceId&&t.props.resourceId.length&&(e=Object(w.a)({storyItem:t.props.storyItem,fileName:t.props.resourceId,playableMediaType:"audio"}),t.setState({src:e}),t.props.updatePlayableMediaUrl(e));case 1:case"end":return n.stop()}}),null,null,null,Promise)})),t.state={src:t.props.src?t.props.src:""},t}return Object(r.a)(i,[{key:"componentDidMount",value:function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.awrap(this.updateSrc());case 2:"function"===typeof this.props.observe&&this.audioRef.current&&this.props.observe(this.audioRef.current);case 3:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"componentDidUpdate",value:function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.resourceId===this.props.resourceId){t.next=3;break}return t.next=3,a.a.awrap(this.updateSrc());case 3:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"render",value:function(){var e=this.props.showCaption?this.props.mediaWrapperCaption||C(j.a,{text:this.props.caption,alignmentLg:this.props.captionAlignmentLg,customCaptionColors:this.props.customCaptionColors}):void 0;return C(f.a.Fragment,null,C("audio",{"aria-label":this.props.alt,controls:!0,controlsList:"nodownload",loop:this.props.loop,ref:this.attachRef,className:h.a.dynamic([["4067139673",[this.props.isSafari?v.a.spacing.xxs:0]]])+" "+(g()({"blur-audio":!(this.props.resourceId||!this.props.isUploading)})||"")},this.state.src&&this.props.isIntersecting&&C("source",{src:this.state.src,className:h.a.dynamic([["4067139673",[this.props.isSafari?v.a.spacing.xxs:0]]])})),e,C(h.a,{id:"4067139673",dynamic:[this.props.isSafari?v.a.spacing.xxs:0]},["body:not(.user-is-tabbing) audio.__jsx-style-dynamic-selector{outline:none;}","audio.__jsx-style-dynamic-selector{width:100%;margin-top:".concat(this.props.isSafari?v.a.spacing.xxs:0,";}"),".blur-audio.__jsx-style-dynamic-selector{-webkit-filter:blur(1rem);filter:blur(1rem);}"]))}}]),i}(m.PureComponent);t.default=Object(b.c)(Object(x.b)(Object(O.a)(S)))},XghU:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("NX3A"),h=n("V+ka"),m=n("A7aE"),f=u.a.createElement;function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var g=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(y()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){var e,t="linearGradient"===(null===(e=this.props.storyDesign.storyTheme.themeVariables.background)||void 0===e?void 0:e.type)?"0.35":"0.5";return f("div",{className:l.a.dynamic([["3971300289",[t,this.props.appOffset.top,d.a.print.pageHeightLetter,d.a.responsiveBreakpoints.large]]])+" side-cover-media-panel"},this.props.children,f(l.a,{id:"3971300289",dynamic:[t,this.props.appOffset.top,d.a.print.pageHeightLetter,d.a.responsiveBreakpoints.large]},[".side-cover-media-panel.__jsx-style-dynamic-selector{position:relative;height:calc( ".concat(t," * (100vh - ").concat(this.props.appOffset.top,") );}"),"body.print .side-cover-media-panel.__jsx-style-dynamic-selector{height:calc(".concat(d.a.print.pageHeightLetter," / 3);width:auto;-webkit-flex:0;-ms-flex:0;flex:0;}"),"@media (min-width:".concat(d.a.responsiveBreakpoints.large,"){.side-cover-media-panel.__jsx-style-dynamic-selector{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;width:50%;height:100%;}}")]))}}]),c}(p.PureComponent);t.a=Object(m.b)(Object(h.b)(g))},Xls9:function(e,t,n){"use strict";n.d(t,"f",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"g",(function(){return y})),n.d(t,"e",(function(){return g})),n.d(t,"h",(function(){return v})),n.d(t,"a",(function(){return b}));var i=n("ERkP"),a=n.n(i),o=n("yFcC"),r=n.n(o),s=n("7Zgl"),c=n("NX3A"),l=n("GpNk"),p=a.a.createElement,u={small:{min:"41rem",max:"56rem",width:"40vw",widthXL:"33vw"},medium:{min:"45rem",max:"72rem",width:"45vw",widthXL:"40vw"},large:{min:"auto",max:"auto",width:"50vw",widthXL:"50vw"}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"small",t=u[e];return{styles:p(r.a,{id:"1062411428",dynamic:[c.a.responsiveBreakpoints.large,t.min,t.max,t.width,c.a.responsiveBreakpoints.extraLarge,t.widthXL]},["@media (min-width:".concat(c.a.responsiveBreakpoints.large,"){body:not(.print) div.__jsx-style-dynamic-selector{min-width:").concat(t.min,";max-width:").concat(t.max,";width:").concat(t.width,";}}"),"@media (min-width:".concat(c.a.responsiveBreakpoints.extraLarge,"){body:not(.print) div.__jsx-style-dynamic-selector{width:").concat(t.widthXL,";}}")]),className:r.a.dynamic([["1062411428",[c.a.responsiveBreakpoints.large,t.min,t.max,t.width,c.a.responsiveBreakpoints.extraLarge,t.widthXL]]])}},h=function(e){return"".concat(Object(s.i)(e.appOffset)+Object(s.i)(e.storyNavOffset),"rem")},m=function(e,t){var n=e.replace(/-\w/g,(function(e){return e.charAt(1).toUpperCase()}));return"".concat(n).concat(t)},f=function(e){return Object(l.a)({id:m(e,"Onboarding")})},y=function(e){Object(l.b)({id:m(e,"Onboarding"),value:!0})},g=function(e){return Object(l.a)({id:m(e,"AddSlideNudge")})},v=function(e){Object(l.b)({id:m(e,"AddSlideNudge"),value:!0})},b=function(e){var t=e.mediaType,n=e.resourceId,i=e.backgroundColor,a=e.baseUrl,o="".concat(a,"/static/images/builder/immersive/slides-panel");switch(t){case"webmap":case"expressmap":return{url:"".concat(o,"/map.png")};case"video":return{url:"".concat(o,"/video.png")};case"embed":return{url:"".concat(o,"/embed.png")};case"image":return{resourceId:n};case"background-color":return{color:i};default:return{url:"".concat(o,"/empty.png")}}}},Y1ga:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("ERkP"),u=n.n(p),d=n("2SGB"),h=n("Lf33"),m=n("wWnZ"),f=n("60Hg"),y=n("txt0"),g=n("XEYk"),v=n("+L/X"),b=n("JmSK"),x=n("0OTU"),O=n("/wLg"),w=u.a.createElement;function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=Object(p.lazy)((function(){return Promise.all([n.e(0),n.e(47)]).then(n.bind(null,"+PaJ"))})),I=Object(p.lazy)((function(){return Promise.all([n.e(2),n.e(0),n.e(1),n.e(86)]).then(n.bind(null,"6Omi"))})),P=Object(p.lazy)((function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"NEj5"))})),R=function(e){Object(c.a)(u,e);var t,n=(t=u,function(){var e,n=Object(s.a)(t);if(k()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function u(e){var t;return Object(i.a)(this,u),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"renderMapPickerUI",(function(){return"altButton"===t.props.mediaPickerUI?w(x.a,{item:t.props.item,onItemClick:t.onItemClick}):"dropdownMenuItem"===t.props.mediaPickerUI?w(h.a.Item,{isBold:!1,onClick:t.onItemClick},t.props.item.titleAlt?t.props.item.titleAlt:t.props.item.title):w(g.a,{item:t.props.item,onItemClick:t.onItemClick})})),Object(l.a)(Object(o.a)(t),"renderMapModal",(function(){var e,n=t.shouldShowEditor(),i=null===(e=t.props.item.defaultStates)||void 0===e?void 0:e.preInsertionStates,a=C({},!n&&{onClose:t.onCloseModal,title:w(d.a,{id:(null===i||void 0===i?void 0:i.showOnlyWebmapItems)?"builder.itemBrowser.addWebMap":"builder.itemBrowser.addMap"}),headerEndItems:t.renderExpressmapBtn(null===i||void 0===i?void 0:i.showExpressmapBtnInItemBrowser)},{isShowingModal:t.props.isExpanded,type:n?"fill":"content"}),o=!!(null===i||void 0===i?void 0:i.disableAllMapConfigs),r=null===i||void 0===i?void 0:i.showSearchConfigInEditor,s=null===i||void 0===i?void 0:i.showLocateConfigInEditor;return w(O.a,a,n?t.state.isShowingExpressMapModal?w(I,{onCancel:t.cancelEditor,onPlaceMap:t.insertExpressMap,itemResourceName:"",ariaLabel:"",shouldOpenOnboardingModal:!0,shouldDisableAllMapConfigs:o}):w(P,{onCancel:t.cancelEditor,onPlaceMap:t.insertWebMap,itemId:t.state.itemIdOfSelectedWebMap,itemType:t.state.typeOfSelectedWebMap,ariaLabel:"",shouldDisableAllMapConfigs:o,showSearchConfigInEditor:r,showLocateConfigInEditor:s}):w(S,{canAddPremiumAndSubscriptionLayers:t.props.storyItem.storyMapUserPrivileges.canAddPremiumAndSubscriptionLayers,userSession:t.props.storyItem.userSession,onExpressMapClick:t.onExpressMapClick,onItemClick:t.onWebMapClick,showOnlyWebmapItems:!!(null===i||void 0===i?void 0:i.showOnlyWebmapItems)}))})),Object(l.a)(Object(o.a)(t),"renderExpressmapBtn",(function(e){if(!1!==e)return w(m.a,{color:"primary",icon:w(f.a,null),onClick:t.onExpressMapClick},w(d.a,{id:"builder.itemBrowser.newExpressMap"}))})),Object(l.a)(Object(o.a)(t),"onItemClick",(function(){t.props.onItemExpanded(b.d.Map)})),Object(l.a)(Object(o.a)(t),"onCloseModal",(function(){t.setState({isShowingExpressMapModal:!1,itemIdOfSelectedWebMap:"",typeOfSelectedWebMap:""}),t.props.onItemCollapsed(b.d.Map)})),Object(l.a)(Object(o.a)(t),"onExpressMapClick",(function(){t.setState({isShowingExpressMapModal:!0})})),Object(l.a)(Object(o.a)(t),"onWebMapClick",(function(e,n){t.setState({itemIdOfSelectedWebMap:e}),t.setState({typeOfSelectedWebMap:n})})),Object(l.a)(Object(o.a)(t),"insertExpressMap",(function(e){var n=e.itemId;t.props.item.onClick({resourceData:{type:"expressmap",data:{itemId:n}}}),t.props.onItemSelected(b.d.Map),"sidecar"===t.props.source?y.a.trackEvent(y.a.Category.Builder,y.a.Action.Builder_SideCar_AddExpressMap,y.a.Name.Builder_Sidecar):"slideshow"===t.props.source?y.a.trackEvent(y.a.Category.Builder,y.a.Action.Builder_Slideshow_AddExpressMap,y.a.Name.Builder_Slideshow):y.a.trackEvent(y.a.Category.Builder,y.a.Action.Builder_InsertExpressMap,y.a.Name.Builder_Common_BlockPalette)})),Object(l.a)(Object(o.a)(t),"insertWebMap",(function(e,n,i){t.props.item.onClick({blockData:{type:"webmap",data:C({},i,{},e)},resourceData:{type:"webmap",data:n},resourceId:i.map}),t.props.onItemSelected(b.d.Map),"sidecar"===t.props.source?y.a.trackEvent(y.a.Category.Builder,y.a.Action.Builder_SideCar_AddWebMap,y.a.Name.Builder_Sidecar):"slideshow"===t.props.source?y.a.trackEvent(y.a.Category.Builder,y.a.Action.Builder_Slideshow_AddWebMap,y.a.Name.Builder_Slideshow):y.a.trackEvent(y.a.Category.Builder,y.a.Action.Builder_InsertWebMap,y.a.Name.Builder_Common_BlockPalette)})),Object(l.a)(Object(o.a)(t),"cancelEditor",(function(){t.onCloseModal()})),Object(l.a)(Object(o.a)(t),"shouldShowEditor",(function(){return t.state.isShowingExpressMapModal||t.state.itemIdOfSelectedWebMap})),t.state={isShowingExpressMapModal:!1,itemIdOfSelectedWebMap:"",typeOfSelectedWebMap:""},t}return Object(a.a)(u,[{key:"render",value:function(){return w(p.Fragment,null,this.renderMapPickerUI(),this.renderMapModal())}}]),u}(p.PureComponent);t.a=Object(v.b)(R)},YLZN:function(e,t,n){"use strict";n.r(t),n.d(t,"MappingViewer",(function(){return y}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("ERkP"),u=n.n(p),d=n("gZeU"),h=n("wpjN"),m=u.a.createElement;function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(f()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"setApp",(function(e){t.appConnector=e})),t}return Object(a.a)(p,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return m(d.a,{aspectRatio:1,caption:m("div",null,"Express Mapping block")},m(h.a,{setApp:this.setApp}))}}]),p}(p.PureComponent);t.default=y},"YSH/":function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("A7aE"),h=n("NX3A"),m=n("aPTH"),f=n("O94r"),y=n.n(f),g=u.a.createElement;function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(v()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){var e=this.props.storyDesign.storyTheme.themeVariables,t=e.background,n=e.backgroundColor,i="linearGradient"===(null===t||void 0===t?void 0:t.type),a=i?"0":"-".concat(h.a.spacing.xl);return g("div",{className:l.a.dynamic([["1841903309",[i?"transparent":n,a,h.a.spacing.xxxs,h.a.print.backgroundColor,h.a.print.textColor,h.a.spacing.xs,h.a.spacing.xs,h.a.spacing.xs,h.a.responsiveBreakpoints.large,"end"===this.props.titlePanelPosition?1:0]]])+" side-cover-title-panel"},this.props.children,g("div",{className:l.a.dynamic([["1841903309",[i?"transparent":n,a,h.a.spacing.xxxs,h.a.print.backgroundColor,h.a.print.textColor,h.a.spacing.xs,h.a.spacing.xs,h.a.spacing.xs,h.a.responsiveBreakpoints.large,"end"===this.props.titlePanelPosition?1:0]]])+" "+(y()("icon-container","panel-position-".concat(this.props.titlePanelPosition))||"")},g(m.a,{width:"auto",height:"4rem",color:h.a.color.ashGrey})),g(l.a,{id:"1841903309",dynamic:[i?"transparent":n,a,h.a.spacing.xxxs,h.a.print.backgroundColor,h.a.print.textColor,h.a.spacing.xs,h.a.spacing.xs,h.a.spacing.xs,h.a.responsiveBreakpoints.large,"end"===this.props.titlePanelPosition?1:0]},["body.print .side-cover-title-panel.__jsx-style-dynamic-selector,.side-cover-title-panel.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:relative;z-index:1;background:".concat(i?"transparent":n,";-webkit-order:1;-ms-flex-order:1;order:1;margin:").concat(a," ").concat(h.a.spacing.xxxs," 0;height:auto;}"),"body.print .side-cover-title-panel.__jsx-style-dynamic-selector{background-color:".concat(h.a.print.backgroundColor,";text-align:center;width:auto;}"),"body.print .side-cover-title-panel.__jsx-style-dynamic-selector .sc-title,body.print .side-cover-title-panel.__jsx-style-dynamic-selector .sc-summary,body.print .side-cover-title-panel.__jsx-style-dynamic-selector .sc-viewer-byline,body.print .side-cover-title-panel.__jsx-style-dynamic-selector .sc-published-date{color:".concat(h.a.print.textColor,";}"),".icon-container.__jsx-style-dynamic-selector,body.print .icon-container.__jsx-style-dynamic-selector{position:absolute;bottom:".concat(h.a.spacing.xs,";visibility:hidden;}"),"html:not([dir='rtl']) .icon-container.panel-position-start.__jsx-style-dynamic-selector,html[dir='rtl'] .icon-container.panel-position-end.__jsx-style-dynamic-selector{left:".concat(h.a.spacing.xs,";}"),"html[dir='rtl'] .icon-container.panel-position-start.__jsx-style-dynamic-selector,html:not([dir='rtl']) .icon-container.panel-position-end.__jsx-style-dynamic-selector{right:".concat(h.a.spacing.xs,";}"),"@media (min-width:".concat(h.a.responsiveBreakpoints.large,"){.side-cover-title-panel.__jsx-style-dynamic-selector{width:50%;-webkit-order:").concat("end"===this.props.titlePanelPosition?1:0,";-ms-flex-order:").concat("end"===this.props.titlePanelPosition?1:0,";order:").concat("end"===this.props.titlePanelPosition?1:0,";margin:0;height:100%;top:0;}.icon-container.__jsx-style-dynamic-selector{visibility:visible;}}")]))}}]),c}(p.PureComponent);t.a=Object(d.b)(b)},YbHY:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var i=n("VtSi"),a=n.n(i),o=n("zjfJ"),r=n("HbGN"),s=n("DeSy"),c=n("fQV3"),l=n("S15H");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=u({},e);return n.isNestedItem=!0,!e.rules.sharing&&t.requiredSharingLevel&&(n.rules.sharing={requiredSharingLevel:t.requiredSharingLevel}),n},h=function(e){var t=[],n=!1,i=!1,a=[],o=[];return"undefined"!==typeof e.currentItem&&(n=e.currentItem.parsedIssues.hasErrors,i=e.currentItem.parsedIssues.hasWarnings,a=e.currentItem.parsedIssues.fixableIssues.map((function(t){return{item:e.currentItem.item,issue:t}})),o=e.currentItem.parsedIssues.unfixableIssues.map((function(t){return{item:e.currentItem.item,issue:t}}))),e.nestedItems.forEach((function(e){e.success?(t=t.concat(e.summary.failures),a=a.concat(e.summary.fixableIssues),o=o.concat(e.summary.unfixableIssues),n=n||e.summary.hasErrors,i=i||e.summary.hasWarnings):t.push(e)})),{hasIssues:a.length>0||o.length>0,hasFailures:t.length>0,hasErrors:!!n,hasWarnings:!!i,failures:t,fixableIssues:a,unfixableIssues:o}},m=function(e){var t=[],n=[],i=!1,a=!1;return e.forEach((function(e){e.hasFix?t.push(e):n.push(e),"warning"===e.severity?a=!0:i=!0})),{fixableIssues:t,unfixableIssues:n,hasIssues:e.length>0,hasErrors:i,hasWarnings:a}},f=n("fGyu"),y=n("zygG");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){var t;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.item.layers?e.item.layers:[],n.abrupt("return",Promise.all(t.reduce((function(t,n){var i=x(v({},e,{item:{type:s.d.MAP_LAYER,itemId:n.layerItemId,itemInfo:{mapLayerData:n}}}));return t.concat(i)}),[])));case 2:case"end":return n.stop()}}),null,null,null,Promise)},x=function(e){var t,n,i,o,r,s,p,u,f,g,x,O;return a.a.async((function(w){for(;;)switch(w.prev=w.next){case 0:if(w.prev=0,t=[],n=e.item.itemInfo||{},!e.item.itemId){w.next=14;break}return w.next=6,a.a.awrap(Promise.all([Object(c.a)(e.item.itemId,{authentication:e.userSession})]));case 6:return o=w.sent,r=Object(y.a)(o,1),s=r[0],w.next=11,a.a.awrap(Object(l.b)(s,e));case 11:(p=w.sent).hasIssue&&t.push(p.issue),i=p.sharingLevel;case 14:return u=d(e,{requiredSharingLevel:i}),w.next=17,a.a.awrap(b(u));case 17:return f=w.sent,g=v({},e.item,{itemInfo:n}),x=m(t),O=h({currentItem:{item:g,parsedIssues:x},nestedItems:f}),w.abrupt("return",v({success:!0,item:g},x,{nestedItems:f,summary:O}));case 24:return w.prev=24,w.t0=w.catch(0),w.abrupt("return",{success:!1,item:e.item,failure:w.t0});case 27:case"end":return w.stop()}}),null,null,[[0,24]],Promise)};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var w=function(e,t){return Promise.all(e.reduce((function(e,n){var i=x(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{item:{type:s.d.MAP_LAYER,layerType:n.layerType,itemId:n.itemId,itemInfo:{mapLayerData:n}}}));return e.concat(i)}),[]))};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){var t,n,i,o,r,s,p,u,g,v,b,x;return a.a.async((function(O){for(;;)switch(O.prev=O.next){case 0:return O.prev=0,t=[],O.next=4,a.a.awrap(Promise.all([Object(c.a)(e.item.itemId,{authentication:e.userSession}),Object(c.b)(e.item.itemId,{authentication:e.userSession})]));case 4:return n=O.sent,i=Object(y.a)(n,2),o=i[0],r=i[1],O.next=10,a.a.awrap(Object(l.b)(o,e));case 10:return(s=O.sent).hasIssue&&t.push(s.issue),p=[].concat(Object(f.a)(r.baseMap.baseMapLayers),Object(f.a)(r.operationalLayers)),u=d(e,{requiredSharingLevel:s.sharingLevel}),O.next=16,a.a.awrap(w(p,u));case 16:return g=O.sent,v=C({},e.item,{itemInfo:{itemDetails:o,itemData:r}}),b=m(t),x=h({currentItem:{item:v,parsedIssues:b},nestedItems:g}),O.abrupt("return",C({success:!0,item:v},b,{nestedItems:g,summary:x}));case 23:return O.prev=23,O.t0=O.catch(0),O.abrupt("return",{success:!1,item:e.item,failure:O.t0});case 26:case"end":return O.stop()}}),null,null,[[0,23]],Promise)};function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var I=function(e,t){return Promise.all(e.reduce((function(e,n){var i=x(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{item:{type:s.d.MAP_LAYER,layerType:n.layerType,itemId:n.itemId,itemInfo:{mapLayerData:n}}}));return e.concat(i)}),[]))};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e){var t,n,i,o,r,s,p,u,g,v,b,x,O,w;return a.a.async((function(j){for(;;)switch(j.prev=j.next){case 0:return j.prev=0,t=[],j.next=4,a.a.awrap(Promise.all([Object(c.a)(e.item.itemId,{authentication:e.userSession}),Object(c.b)(e.item.itemId,{authentication:e.userSession})]));case 4:return n=j.sent,i=Object(y.a)(n,2),o=i[0],r=i[1],j.next=10,a.a.awrap(Object(l.b)(o,e));case 10:return(s=j.sent).hasIssue&&t.push(s.issue),p=r.ground&&r.ground.layers?r.ground.layers:[],u=r.baseMap.elevationLayers?r.baseMap.elevationLayers:[],g=[].concat(Object(f.a)(r.baseMap.baseMapLayers),Object(f.a)(r.operationalLayers),Object(f.a)(p),Object(f.a)(u)),v=d(e,{requiredSharingLevel:s.sharingLevel}),j.next=18,a.a.awrap(I(g,v));case 18:return b=j.sent,x=R({},e.item,{itemInfo:{itemDetails:o,itemData:r}}),O=m(t),w=h({currentItem:{item:x,parsedIssues:O},nestedItems:b}),j.abrupt("return",R({success:!0,item:x},O,{nestedItems:b,summary:w}));case 25:return j.prev=25,j.t0=j.catch(0),j.abrupt("return",{success:!1,item:e.item,failure:j.t0});case 28:case"end":return j.stop()}}),null,null,[[0,25]],Promise)},D=n("I/HP");function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(e,t){return t.item.checkDraftData?Object(D.a)({itemDetails:e,portalHost:t.portalHost,userSession:t.userSession}):Object(c.b)(t.item.itemId,{authentication:t.userSession})},N=function(e,t,n){return"story"===e?Promise.all(Object.keys(t.resources).reduce((function(e,i){var a=t.resources[i];switch(a.type){case"webmap":var o=k(M({},n,{item:{type:s.d.WEBMAP,itemId:a.data.itemId}}));return e.concat(o);case"webscene":var r=E(M({},n,{item:{type:s.d.WEBSCENE,itemId:a.data.itemId}}));return e.concat(r);default:return e}}),[])):[]},L=n("Bx5b");function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=function(e){var t,n,i,o,r,s,p,u,f,y;return a.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,t=[],g.next=4,a.a.awrap(Object(c.a)(e.item.itemId,{authentication:e.userSession}));case 4:return n=g.sent,g.next=7,a.a.awrap(A(n,e));case 7:return i=g.sent,g.next=10,a.a.awrap(Object(l.b)(n,e));case 10:return(o=g.sent).hasIssue&&t.push(o.issue),r=n.typeKeywords&&n.typeKeywords.includes(L.b)?"collection":"story",s=d(e,{requiredSharingLevel:o.sharingLevel}),g.next=16,a.a.awrap(N(r,i,s));case 16:return p=g.sent,u=_({},e.item,{itemInfo:{itemDetails:n,storyData:i}}),f=m(t),y=h({currentItem:{item:u,parsedIssues:f},nestedItems:p}),g.abrupt("return",_({success:!0,item:u},f,{nestedItems:p,summary:y}));case 23:return g.prev=23,g.t0=g.catch(0),g.abrupt("return",{success:!1,item:e.item,failure:g.t0});case 26:case"end":return g.stop()}}),null,null,[[0,23]],Promise)};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=function(e){var t,n;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(t=V({},e)).rules.sharing||!t.rules.sharing.appProxy){i.next=8;break}return i.next=4,a.a.awrap(Object(c.a)(t.rules.sharing.appProxy.itemId,{authentication:t.userSession}));case 4:n=i.sent,t.rules.sharing.appProxy.isAppAdmin="admin"===n.itemControl,t.rules.sharing.appProxy.isRegisteredApp=Object(l.d)(n),t.rules.sharing.appProxy.existingAppProxy={proxies:n.appProxies?n.appProxies:[],referrers:n.serviceProxyParams&&n.serviceProxyParams.referrers?n.serviceProxyParams.referrers:[]};case 8:return i.abrupt("return",t);case 9:case"end":return i.stop()}}),null,null,null,Promise)};function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=function(e){var t,n,i,o;return a.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,a.a.awrap(F(e));case 2:n=c.sent,c.t0=n.item.type,c.next=c.t0===s.d.STORY_MAP?6:c.t0===s.d.WEBMAP?10:c.t0===s.d.WEBSCENE?14:c.t0===s.d.MAP_LAYER?18:22;break;case 6:return c.next=8,a.a.awrap(B(n));case 8:return t=c.sent,c.abrupt("break",24);case 10:return c.next=12,a.a.awrap(k(n));case 12:return t=c.sent,c.abrupt("break",24);case 14:return c.next=16,a.a.awrap(E(n));case 16:return t=c.sent,c.abrupt("break",24);case 18:return c.next=20,a.a.awrap(x(n));case 20:return t=c.sent,c.abrupt("break",24);case 22:return t={success:!1,item:e.item,failure:new Error('The type "'.concat(n.item.type,'" is not a valid type.'))},c.abrupt("break",24);case 24:return n.item,i=Object(r.a)(n,["item"]),o=h({nestedItems:[t]}),c.abrupt("return",z({},o,{itemResults:t,fixOptions:i}));case 27:case"end":return c.stop()}}),null,null,null,Promise)}},Z3Fy:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("NX3A"),g=n("eCu0"),v=n("Y/5s"),b=n("AuFC"),x=n("+L/X"),O=n("A7aE"),w=n("Bsig"),j=n("hG09"),C=h.a.createElement;function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(k()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"toggleFullScreen",(function(){"function"!==typeof e.props.onToggleFullScreen||e.props.isFullScreen||e.props.onToggleFullScreen(!0)})),e}return Object(a.a)(p,[{key:"componentDidMount",value:function(){Object(j.i)({userSession:this.props.storyItem.userSession,clientId:this.props.config.OAUTH_CLIENT_ID,portalHost:this.props.config.PORTAL_HOST})}},{key:"render",value:function(){var e=this.props.isViewportMaxWidth("small")||!this.props.isFullScreen&&this.props.isPlacedCompactly,t="boolean"===typeof this.props.showMask?this.props.showMask:this.props.isViewportMaxWidth("small")&&!this.props.isFullScreen,n=this.props.storyDesign.storyTheme.themeVariables,i=this.props.theme.id;return C("div",{className:u.a.dynamic([["542694361",[n.backgroundColor,w.c[i],e?"display: none;":"",y.a.responsiveBreakpoints.medium]]])+" "+(f()("map-wrapper",this.props.className)||"")},this.props.children,t&&C("div",{role:"button",onClick:this.toggleFullScreen,className:u.a.dynamic([["542694361",[n.backgroundColor,w.c[i],e?"display: none;":"",y.a.responsiveBreakpoints.medium]]])+" mask"}),C(u.a,{id:"542694361",dynamic:[n.backgroundColor,w.c[i],e?"display: none;":"",y.a.responsiveBreakpoints.medium]},[".map-wrapper.__jsx-style-dynamic-selector{position:relative;height:100%;background-color:".concat(n.backgroundColor,";}"),".map-wrapper.__jsx-style-dynamic-selector::before{position:absolute;height:100%;width:100%;content:'';background-color:".concat(w.c[i],";}"),".mask.__jsx-style-dynamic-selector{position:absolute;height:100%;top:0;width:100%;z-index:1;}",".map-wrapper.__jsx-style-dynamic-selector .esri-ui .esri-ui-corner-container .esri-widget:not(.esri-locate):not(.esri-expand):not(.esri-search){".concat(e?"display: none;":"",";}"),"@media (min-width:".concat(y.a.responsiveBreakpoints.medium,"){.map-wrapper.__jsx-style-dynamic-selector .tour-map-displayer .esri-locate{display:none;}}"),"@media print{body.print .map-wrapper.__jsx-style-dynamic-selector .esri-ui-inner-container.esri-ui-corner-container{display:none;}}"]))}}]),p}(d.PureComponent);t.a=Object(b.c)(Object(g.c)(Object(v.d)(Object(O.b)(Object(x.b)(S)))))},Z9p2:function(e,t,n){"use strict";n.r(t),n.d(t,"WebMapViewer",(function(){return M}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("ERkP"),u=n.n(p),d=n("/rJK"),h=n.n(d),m=n("RNvQ"),f=n.n(m),y=n("eCu0"),g=n("WXRn"),v=n("Z34l"),b=n("AuFC"),x=n("gZeU"),O=n("u0WM"),w=n("looe"),j=n("hG09"),C=n("Z3Fy"),k=n("g47E"),S=n("mJsu"),I=n("uYly"),P=n("+L/X"),R=n("YQpL"),E=n("A7aE"),D=u.a.createElement;function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var M=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(T()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"onMapLoad",(function(t,n){e.view=n,e.props.setView(n,t.portalItem.title),e.applyViewData(),"function"===typeof e.props.onTitleLoad&&e.props.onTitleLoad(t.portalItem.title),e.view.when((function(){var t,n;null===(t=e.view.container)||void 0===t||null===(n=t.querySelector('*[role="application"]'))||void 0===n||n.removeAttribute("role")})),e.view.watch("popup.visible",(function(t){"function"===typeof e.props.onToggleFullScreen&&t&&!e.props.isFullScreen&&e.props.isPlacedCompactly&&e.props.onToggleFullScreen()})),e.view.watch("interacting",f()((function(t){var n,i;t||(null===(n=(i=e.props).onInteract)||void 0===n||n.call(i,e.view.viewpoint.toJSON()));e.isViewDataDirty=!0}),300)),Object(g.a)()&&"preview"===e.props.storyItem.viewerMode&&e.view.watch("size",f()((function(){e.props.isFullScreen||e.applyViewData()}),300))})),Object(l.a)(Object(o.a)(e),"onLayerLoad",(function(t){e.layers=t,e.applyLayerData()})),Object(l.a)(Object(o.a)(e),"onHomeLoad",(function(t){e.home=t})),Object(l.a)(Object(o.a)(e),"applyLayerData",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.props.data&&Object(S.a)(e.props.data.mapLayers,e.layers,t)})),Object(l.a)(Object(o.a)(e),"applyViewData",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.props.data&&e.view&&e.view.when((function(){if(e.isViewDataDirty=!1,e.props.itemType===I.a.WebScene)Object(S.e)(e.view,e.home,e.props.data,t);else{var n=e.props.isViewportMaxWidth("medium")||e.props.isPlacedCompactly;Object(S.d)(e.view,e.home,e.props.data,t,n)}}))})),Object(l.a)(Object(o.a)(e),"getShouldShowMapControls",(function(t){var n=e.props.isViewportMaxWidth("small")||e.props.isPlacedCompactly,i=!1;return e.props.data&&(i="legend"===t?!!e.props.data.isShowingLegend:"search"===t?!!e.props.data.search||!!e.props.showSearch:!!e.props.data.locate||!!e.props.showLocate),(!n||e.props.isFullScreen)&&i&&!e.props.printMode})),e}return Object(a.a)(p,[{key:"componentDidUpdate",value:function(e){if(!Object.is(e.data,this.props.data)){var t,n,i=h()(e.data.mapLayers||[])!==h()(this.props.data.mapLayers||[]),a=h()(e.data.viewpoint||{})!==h()(this.props.data.viewpoint||{}),o=!e.isFullScreen&&!this.props.isFullScreen&&this.isViewDataDirty;i&&this.applyLayerData(!0),(a||o)&&this.applyViewData(!0),(null===(t=this.view)||void 0===t?void 0:null===(n=t.popup)||void 0===n?void 0:n.visible)&&(this.view.popup.visible=!1)}if(e.isFullScreen&&!this.props.isFullScreen){var r,s;if(this.isViewDataDirty=!1,this.props.itemType===I.a.WebScene)Object(j.h)({view:this.view,viewpoint:null===(r=this.home)||void 0===r?void 0:r.viewpoint});else Object(j.f)(this.view,null===(s=this.home)||void 0===s?void 0:s.viewpoint);this.view.popup.visible=!1}}},{key:"render",value:function(){var e,t=this.props.showCaption?this.props.mediaWrapperCaption||D(O.a,{text:this.props.caption,alignmentLg:this.props.captionAlignmentLg,customCaptionColors:this.props.customCaptionColors}):void 0,n=this.props.fillParent?0:"small"===this.props.screenWidth||this.props.isPlacedCompactly?1.5:this.props.aspectRatio;return D(x.a,{aspectRatio:n,heightConstrained:this.props.heightConstrained,caption:t,fillParent:this.props.fillParent,isCompact:this.props.isCompact,isFullScreen:this.props.isFullScreen,onToggleFullScreen:this.props.onToggleFullScreen,printMode:this.props.printMode},D(C.a,{isFullScreen:this.props.isFullScreen,onToggleFullScreen:this.props.onToggleFullScreen,isPlacedCompactly:this.props.isPlacedCompactly,className:"web-map-viewer-container"},D(w.a,{type:this.props.itemType,portalItemId:this.props.itemId,portal:Object(v.e)(this.props.config.PORTAL_HOST),jsApiCssUrl:this.props.config.ARCGIS_JS_API_CSS_URL,onMapLoad:this.onMapLoad,onLayerLoad:this.onLayerLoad,onHomeLoad:this.onHomeLoad,ariaLabel:this.props.alt,isIntersecting:this.props.isIntersecting,datasetBlockId:this.props.blockId,observe:this.props.observe,appProxies:this.props.storyItem.itemDetails.appProxies,legendAria:this.props.intl.formatMessage({id:"builder.common.legend"}),shouldShowLegend:this.getShouldShowMapControls("legend"),shouldShowSearch:this.getShouldShowMapControls("search"),shouldShowLocate:this.getShouldShowMapControls("locate"),isStatic:!(null===(e=this.props.data.navigation)||void 0===e||e)||!this.props.allowNavigation,searchSymbolColor:this.props.storyDesign.storyTheme.themeVariables.accentColor1,shouldDockPopups:this.props.shouldDockPopups})),D(k.a,{selector:".".concat("web-map-viewer-container")}))}}]),p}(p.Component);t.default=Object(E.b)(Object(b.c)(Object(y.c)(Object(R.c)(Object(P.a)(M)))))},ZaeZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return p}));var i=n("WXRn"),a=n("79uv"),o=["image/png","image/jpeg","image/gif","image/bmp"],r=function(e){return new Promise((function(t,n){var i="",a=s(e);a.isValid||n(a.details),c(e).then((function(e){return i=e,l(e)})).then((function(e){var n=e.width,a=e.height;t({src:i,width:n,height:a,provider:"uri"})})).catch((function(e){n(e)}))}))},s=function(e){var t=-1!==o.findIndex((function(t){return t===e.type})),n="image/gif"===e.type?e.size>5e7:e.size>2e7,i="";return t||(i="invalid-file-type"),n&&(i="max-file-size-exceeded"),{isValid:t&&!n,details:i}},c=function(e){return new Promise((function(t,n){var i=new FileReader;i.onload=function(){t(i.result)},i.onerror=function(){n("file-read-error")},i.readAsDataURL(e)}))},l=function(e){return new Promise((function(t,n){var i=new Image;i.onload=function(){t({height:i.naturalHeight,width:i.naturalWidth})},i.onerror=function(){n("image-load-error")},i.src=e}))},p=function(e){var t=e.windowWidth,n=e.imageNodeWidth,o=e.imageNodeHeight,r=e.fileName,s=e.isCropped,c=e.aspectRatio,l=t||(n||(Object(i.a)()?u():window.innerWidth)),p=0;if(s&&c&&n&&o){var d=o*c;p=Math.max(d,l)}else p=l;var h=window.devicePixelRatio?window.devicePixelRatio:1;return h>1&&(p=Math.floor(p*h)),Object(a.c)(p,r)},u=function(){try{return 0===window.innerWidth?window.top.innerWidth:window.innerWidth}catch(e){return window.innerWidth||window.outerWidth}}},ZdeF:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("O94r"),c=n.n(s),l=n("Z4N4"),p=n("NX3A"),u=n("A7aE"),d=n("ibgV"),h=r.a.createElement;t.a=Object(u.b)(Object(o.memo)((function(e){var t=c()("main-button",{active:e.isActive},e.className),n=e.storyDesign.storyTheme.themeVariables;return h("button",{onClick:e.onClick,className:a.a.dynamic([["2261141634",[l.a.center(),n.bodyColor,p.a.spacing.xxxs,p.a.spacing.xs,n.accentColor1,n.hasRoundedCorners?"9999px":"none"===n.borderRadius?0:n.borderRadius,n.mixins.typography.body.size.stepUp1(),n.accentColor1,n.accentColor1]]])+" "+(t||"")},h("div",{className:a.a.dynamic([["2261141634",[l.a.center(),n.bodyColor,p.a.spacing.xxxs,p.a.spacing.xs,n.accentColor1,n.hasRoundedCorners?"9999px":"none"===n.borderRadius?0:n.borderRadius,n.mixins.typography.body.size.stepUp1(),n.accentColor1,n.accentColor1]]])},e.children,!e.isConfigured&&h(d.b,{hasMarginStart:!0})),h(a.a,{id:"2261141634",dynamic:[l.a.center(),n.bodyColor,p.a.spacing.xxxs,p.a.spacing.xs,n.accentColor1,n.hasRoundedCorners?"9999px":"none"===n.borderRadius?0:n.borderRadius,n.mixins.typography.body.size.stepUp1(),n.accentColor1,n.accentColor1]},["div.__jsx-style-dynamic-selector{".concat(l.a.center()," position:relative;}"),".main-button.__jsx-style-dynamic-selector{color:".concat(n.bodyColor,";width:100%;min-height:5.6rem;padding:").concat(p.a.spacing.xxxs," ").concat(p.a.spacing.xs,";box-shadow:inset 0 0 0 1px ").concat(n.accentColor1,";border-radius:").concat(n.hasRoundedCorners?"9999px":"none"===n.borderRadius?0:n.borderRadius,";").concat(n.mixins.typography.body.size.stepUp1()," transition:box-shadow 0.2s;}"),"body:not(.user-is-tabbing) .main-button.__jsx-style-dynamic-selector:focus{outline:0;}",".main-button.__jsx-style-dynamic-selector:hover{box-shadow:inset 0 0 0 2px ".concat(n.accentColor1,";}"),".main-button.active.__jsx-style-dynamic-selector{box-shadow:inset 0 0 0 4px ".concat(n.accentColor1,";}")]))})))},ZdeG:function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("pWxA"),s=n("K/z8"),c=n("sRHE"),l=n("8K1b"),p=n("zjfJ"),u=n("yFcC"),d=n.n(u),h=n("ERkP"),m=n.n(h),f=n("YQpL"),y=n("O94r"),g=n.n(y),v=n("NX3A"),b=n("Z4N4"),x=n("h88A"),O=n("eCu0"),w=n("A7aE"),j=n("uoXB"),C=n("i3DM"),k=m.a.createElement,S=Object(w.b)((function(e){var t={styles:k(d.a,{id:"3401453347",dynamic:[e.isOn?"90deg":"270deg"]},[".icon-chevron-right.__jsx-style-dynamic-selector{-webkit-transition:-webkit-transform 400ms cubic-bezier(0.5,0,0.1,1);-webkit-transition:transform 400ms cubic-bezier(0.5,0,0.1,1);transition:transform 400ms cubic-bezier(0.5,0,0.1,1);-webkit-transform-origin:50% 50%;-ms-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-transform:rotate(".concat(e.isOn?"90deg":"270deg",");-ms-transform:rotate(").concat(e.isOn?"90deg":"270deg",");transform:rotate(").concat(e.isOn?"90deg":"270deg",");}")]),className:d.a.dynamic([["3401453347",[e.isOn?"90deg":"270deg"]]])};return k("button",{onClick:e.onToggle,onKeyPress:function(e){Object(C.a)(e)&&e.stopPropagation()},className:d.a.dynamic([["1199965346",[v.a.spacing.xxxs,v.a.spacing.xs,v.a.spacing.xs]]])+" toggle"},k(j.a,{color:e.storyDesign.storyTheme.themeVariables.bodyColor,height:v.a.spacing.xxs,width:"auto",className:t.className}),k(d.a,{id:"1199965346",dynamic:[v.a.spacing.xxxs,v.a.spacing.xs,v.a.spacing.xs]},[".toggle.__jsx-style-dynamic-selector{position:absolute;right:0;top:0;margin:0.2rem ".concat(v.a.spacing.xxxs,";height:").concat(v.a.spacing.xs,";width:").concat(v.a.spacing.xs,"m;overflow:hidden;}"),"html[dir='rtl'] .toggle.__jsx-style-dynamic-selector{right:unset;left:0;}"]),t.styles)})),I=n("T+qs"),P=n("bu6S"),R=m.a.createElement;function E(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var D,T=function(e){Object(l.a)(u,e);var t,n=(t=u,function(){var e,n=Object(c.a)(t);if(E()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function u(){var e;Object(a.a)(this,u);for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return e=n.call.apply(n,[this].concat(o)),Object(p.a)(Object(r.a)(e),"renderDrawingCategories",(function(){return e.props.drawingCategories.filter((function(e){return e.drawingIds.length>0})).map(e.renderDrawingCategory)})),Object(p.a)(Object(r.a)(e),"renderDrawingCategory",(function(t){if(!e.props.shouldShowUntitledItems&&!Object(I.j)(t,e.props.popups))return null;var n=Object(I.d)(t,e.props.intl.formatMessage),a=R(P.a,{key:t.type,id:t.type,title:n,type:t.type,colorName:t.color}),o=R("li",{key:t.type},e.renderDrawingCategoryTitle(n),R("ul",null,t.drawingIds.filter((function(t){return e.props.shouldShowUntitledItems||Object(I.n)(t,e.props.popups)})).map((function(n){var a=e.props.popups[n],o=e.props.drawings[n];return R(P.a,Object(i.a)({key:n,onClick:e.props.onDrawingItemClick,onMouseEnter:e.props.onDrawingItemMouseEnter,onMouseLeave:e.props.onDrawingItemMouseLeave,willHighlightOnHover:!0,colorName:t.color,numberedPointNumber:Object(I.g)(t,n)},o,a))}))));return e.props.isExpanded?o:a})),Object(p.a)(Object(r.a)(e),"renderDrawingCategoryTitle",(function(t){return R("h4",{title:t,className:d.a.dynamic([["3709895413",[v.a.spacing.xxs,v.a.spacing.xxxs,e.props.storyDesign.storyTheme.themeVariables.bodyColor,e.props.storyDesign.storyTheme.themeVariables.mixins.typography.title.size.baseline()]]])+" title"},t,R(d.a,{id:"3709895413",dynamic:[v.a.spacing.xxs,v.a.spacing.xxxs,e.props.storyDesign.storyTheme.themeVariables.bodyColor,e.props.storyDesign.storyTheme.themeVariables.mixins.typography.title.size.baseline()]},[".title.__jsx-style-dynamic-selector{padding:0 ".concat(v.a.spacing.xxs,";margin-bottom:").concat(v.a.spacing.xxxs,";color:").concat(e.props.storyDesign.storyTheme.themeVariables.bodyColor,";").concat(e.props.storyDesign.storyTheme.themeVariables.mixins.typography.title.size.baseline(),";}")]))})),e}return Object(o.a)(u,[{key:"render",value:function(){return R("ul",{className:d.a.dynamic([["1208752111",[b.a.gappedList(this.props.isExpanded?v.a.spacing.sm:0)]]])+" drawing-list"},this.renderDrawingCategories(),R(d.a,{id:"1208752111",dynamic:[b.a.gappedList(this.props.isExpanded?v.a.spacing.sm:0)]},["ul.__jsx-style-dynamic-selector{".concat(b.a.gappedList(this.props.isExpanded?v.a.spacing.sm:0),";}")]))}}]),u}(h.PureComponent),M=Object(f.c)(Object(w.b)(T)),A=m.a.createElement;function N(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}!function(e){e[e.Inline=0]="Inline",e[e.Fullscreen=1]="Fullscreen"}(D||(D={}));var L=function(e){Object(l.a)(u,e);var t,n=(t=u,function(){var e,n=Object(c.a)(t);if(N()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function u(e){var t;return Object(a.a)(this,u),t=n.call(this,e),Object(p.a)(Object(r.a)(t),"renderContainer",(function(){var e=t.isMapInline(),n=t.state.isMaximized,i=g()("legend-container",{"on-small-screen":"small"===t.props.screenWidth,"contains-mini-legend":e&&!n,"contains-contracted-full-legend-inline":e&&n,"contains-contracted-full-legend-fullscreen":!e&&!n,"contains-expanded-full-legend-fullscreen":!e&&n}),a=!n,o=t.props.intl.formatMessage({id:"builder.common.legend"});return A("div",{ref:t.ref,tabIndex:0,role:a?"button":void 0,"aria-label":a?o:void 0,onMouseEnter:t.onMouseEnter,onTouchStart:t.onTouchStart,onMouseLeave:t.onMouseLeave,onKeyPress:t.onLegendKeyPress,onClick:t.onLegendClick,className:d.a.dynamic([["2907020294",[t.props.storyDesign.storyTheme.themeVariables.backgroundColor,v.a.spacing.xs,v.a.spacing.xxxs,b.a.shadow.md(),v.a.spacing.xxxs,v.a.spacing.xxxs,b.a.circle(v.a.spacing.lg),b.a.center(),v.a.spacing.xxs,v.a.spacing.xxs,v.a.spacing.xs]]])+" "+(i||"")},t.renderContent(),A(d.a,{id:"2907020294",dynamic:[t.props.storyDesign.storyTheme.themeVariables.backgroundColor,v.a.spacing.xs,v.a.spacing.xxxs,b.a.shadow.md(),v.a.spacing.xxxs,v.a.spacing.xxxs,b.a.circle(v.a.spacing.lg),b.a.center(),v.a.spacing.xxs,v.a.spacing.xxs,v.a.spacing.xs]},[".legend-container.__jsx-style-dynamic-selector{position:relative;display:inline-block;background-color:".concat(t.props.storyDesign.storyTheme.themeVariables.backgroundColor,";padding:").concat(v.a.spacing.xs," ").concat(v.a.spacing.xxxs,";min-width:20rem;").concat(b.a.shadow.md(),";}"),".contains-contracted-full-legend-inline.__jsx-style-dynamic-selector{padding:".concat(v.a.spacing.xxxs," 0;}"),".contains-contracted-full-legend-fullscreen.__jsx-style-dynamic-selector{padding:".concat(v.a.spacing.xxxs," 0;}"),".contains-mini-legend.__jsx-style-dynamic-selector{padding:unset;min-width:unset;overflow:hidden;".concat(b.a.circle(v.a.spacing.lg)," ").concat(b.a.center(),";}"),".contains-contracted-full-legend-fullscreen.on-small-screen.__jsx-style-dynamic-selector{min-width:unset;width:calc(100% - 2 * ".concat(v.a.spacing.xxs,");margin:0 ").concat(v.a.spacing.xxs," ").concat(v.a.spacing.xs,";}"),".contains-expanded-full-legend-fullscreen.on-small-screen.__jsx-style-dynamic-selector{min-width:unset;width:100%;margin:0;}","body:not(.user-is-tabbing) .legend-container.__jsx-style-dynamic-selector:focus,body:not(.user-is-tabbing) .legend-container.__jsx-style-dynamic-selector *:focus{outline:none;}","@media print{.legend-container.__jsx-style-dynamic-selector{display:none;}}"]))})),Object(p.a)(Object(r.a)(t),"renderContent",(function(){return t.isMapInline()?t.state.isMaximized?t.renderCollapsedLegend():t.renderMiniLegend():t.state.isMaximized?t.renderExpandedLegend():t.renderCollapsedLegend()})),Object(p.a)(Object(r.a)(t),"renderExpandedLegend",(function(){return t.renderFullLegend(!0)})),Object(p.a)(Object(r.a)(t),"renderCollapsedLegend",(function(){return t.renderFullLegend(!1)})),Object(p.a)(Object(r.a)(t),"renderFullLegend",(function(e){return A(h.Fragment,null,!t.isMapInline()&&A(S,{isOn:e,onToggle:t.toggleFullLegend}),A("div",{className:d.a.dynamic([["4082152483",[t.props.iOSVersion?"-webkit-overflow-scrolling: touch;":"",0]]])+" full-legend"},A(M,Object(i.a)({},t.props,{isExpanded:e,onDrawingItemClick:t.onDrawingClick}))),A(d.a,{id:"4082152483",dynamic:[t.props.iOSVersion?"-webkit-overflow-scrolling: touch;":"",0]},[".full-legend.__jsx-style-dynamic-selector{max-height:50vh;overflow-y:auto;".concat(t.props.iOSVersion?"-webkit-overflow-scrolling: touch;":""," padding-bottom:",0,";}")]))})),Object(p.a)(Object(r.a)(t),"renderMiniLegend",(function(){return A(x.a,{className:"mini-legend",height:v.a.spacing.xxs,width:"auto",color:t.props.storyDesign.storyTheme.themeVariables.bodyColor})})),Object(p.a)(Object(r.a)(t),"delayMapSizeChange",(function(e){var n=function(){return t.setState({mapSize:t.props.mapSize})};e?setTimeout((function(){t.canSetState&&n()}),300):n()})),Object(p.a)(Object(r.a)(t),"expand",(function(){t.isMapInline()&&(t.shouldFinishMinimizing=!1,t.setState({isMaximized:!0}))})),Object(p.a)(Object(r.a)(t),"collapse",(function(e){t.isMapInline()&&(t.shouldFinishMinimizing=!0,e?setTimeout((function(){t.shouldFinishMinimizing&&t.setState({isMaximized:!1})}),500):t.setState({isMaximized:!1}))})),Object(p.a)(Object(r.a)(t),"onTouchStart",(function(){t.expand(),t.isMapInline()&&document.addEventListener("touchstart",t.handleTouch)})),Object(p.a)(Object(r.a)(t),"handleTouch",(function(e){t.ref.current&&!t.ref.current.contains(e.target)&&(t.collapse(),document.removeEventListener("touchstart",t.handleTouch))})),Object(p.a)(Object(r.a)(t),"onMouseEnter",(function(){t.expand()})),Object(p.a)(Object(r.a)(t),"onMouseLeave",(function(){t.collapse(!0)})),Object(p.a)(Object(r.a)(t),"onLegendKeyPress",(function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.isMapInline()?t.state.isMaximized?t.collapse():t.expand():t.toggleFullLegend())})),Object(p.a)(Object(r.a)(t),"onLegendClick",(function(e){t.state.isMaximized||t.expandFullLegend()})),Object(p.a)(Object(r.a)(t),"onDrawingClick",(function(e,n){n&&n.stopPropagation(),t.props.onSelectDrawing(e)})),Object(p.a)(Object(r.a)(t),"toggleFullLegend",(function(){t.isMapInline()||t.setState((function(e){return{isMaximized:!e.isMaximized}}))})),Object(p.a)(Object(r.a)(t),"expandFullLegend",(function(){t.isMapInline()||t.setState({isMaximized:!0})})),Object(p.a)(Object(r.a)(t),"isMapInline",(function(){return t.state.mapSize===D.Inline})),t.state={mapSize:t.props.mapSize,isMaximized:!1},t.shouldFinishMinimizing=!0,t.ref=Object(h.createRef)(),t.canSetState=!0,t}return Object(o.a)(u,[{key:"componentDidUpdate",value:function(e){e.mapSize!==this.props.mapSize&&this.delayMapSizeChange(this.props.mapSize===D.Fullscreen)}},{key:"componentWillUnmount",value:function(){this.canSetState=!1}},{key:"render",value:function(){return Object(I.m)(this.props.drawingCategories,this.props.popups)&&this.renderContainer()}}]),u}(h.PureComponent);t.b=Object(O.c)(Object(w.b)(Object(f.c)(L)))},aD1R:function(e,t,n){"use strict";t.a={MEDIA_FOCUSED_MAP_PROPORTION:.35}},aM2i:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("YQpL"),f=n("WXRn"),y=n("MEC2");function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(g()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"align-right",path:"M2,7 L9.26,7 L7.675,5.415 L8.382,4.708 L11.192,7.518 L8.382,10.326 L7.675,9.619 L9.295,8 L2,8 L2,7 Z M14,12 L14,3 L13,3 L13,12 L14,12 Z",viewBox:"0 0 16 16"})}return a}(y.a);function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var x=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(b()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"align-left",path:"M14,8 L6.74,8 L8.325,9.585 L7.618,10.292 L4.808,7.482 L7.618,4.674 L8.325,5.381 L6.705,7 L14,7 L14,8 Z M2,3 L2,12 L3,12 L3,3 L2,3 Z",viewBox:"0 0 16 16"})}return a}(y.a);function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var w=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(O()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"align-horizontal-center",path:"M8,3 L8,12 L7,12 L7,3 L8,3 Z M3.19,4.674 L6,7.482 L3.19,10.292 L2.483,9.585 L4.068,8 L1.43884904e-13,8 L1.43884904e-13,7 L4.103,7 L2.483,5.381 L3.19,4.674 Z M11.618,4.674 L12.325,5.381 L10.705,7 L15,7 L15,8 L10.74,8 L12.325,9.585 L11.618,10.292 L8.808,7.482 L11.618,4.674 Z",viewBox:"0 0 16 16"})}return a}(y.a);function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var C=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(j()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"align-top",path:"M7,14 L7,6.74 L5.415,8.325 L4.708,7.618 L7.518,4.808 L10.326,7.618 L9.619,8.325 L8,6.705 L8,14 L7,14 Z M12,2 L3,2 L3,3 L12,3 L12,2 Z",viewBox:"0 0 16 16"})}return a}(y.a);function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(k()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"align-vertical-center",path:"M7.516,8.808 L10.326,11.618 L9.619,12.325 L8.034,10.74 L8.034,15 L7.034,15 L7.034,10.705 L5.415,12.325 L4.708,11.618 L7.516,8.808 Z M12,7 L12,8 L3,8 L3,7 L12,7 Z M8,-6.75015599e-14 L8,4.103 L9.619,2.483 L10.326,3.19 L7.518,6 L4.708,3.19 L5.415,2.483 L7,4.068 L7,-6.75015599e-14 L8,-6.75015599e-14 Z",viewBox:"0 0 16 16"})}return a}(y.a);function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var P=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(I()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"align-bottom",path:"M8,2 L8,9.26 L9.585,7.675 L10.292,8.382 L7.482,11.192 L4.674,8.382 L5.381,7.675 L7,9.295 L7,2 L8,2 Z M3,14 L12,14 L12,13 L3,13 L3,14 Z",viewBox:"0 0 16 16"})}return a}(y.a),R=h.a.createElement;function E(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var D=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(E()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);var t={iconName:"size-narrow",path:"",viewBox:"0 0 16 16",children:function(){return R("polygon",{points:"7 2 9 2 9 14 7 14"})}};return n.call(this,e,t)}return a}(y.a),T=h.a.createElement;function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var A=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(M()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);var t={iconName:"size-medium",path:"",viewBox:"0 0 16 16",children:function(){return T("polygon",{points:"6 2 10 2 10 14 6 14"})}};return n.call(this,e,t)}return a}(y.a),N=h.a.createElement;function L(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var G=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(L()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);var t={iconName:"size-wide",path:"",viewBox:"0 0 16 16",children:function(){return N("polygon",{points:"5 2 11 2 11 14 5 14"})}};return n.call(this,e,t)}return a}(y.a),_=n("tSRP"),B=n("Z4N4"),W=n("NX3A"),V=n("N1o1"),F=n("Lf33"),U=n("A7aE"),z=n("gbSL"),H=n("X/3D"),Y=n("ADUw"),K=h.a.createElement;function X(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var J=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(X()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"getColorItem",(function(){if("function"===typeof e.props.updatePanelColor){var t=e.props.storyDesign.storyTheme.themeVariables,n=e.props.isPanelColorDisabled,i=e.props.intl.formatMessage({id:"publicAccount.disabled"});return{label:e.props.intl.formatMessage({id:"builder.map.color"}),isDisabled:n,control:K(z.a,{styles:[{id:H.a.themed,ariaLabel:e.props.intl.formatMessage({id:"component.textSwatchDropdown.themed.label"}),textColor:t.titleColor,backgroundColor:t.backgroundColor,isDisabled:n,disabledLabel:i},{id:H.a.transparentWithDarkColor,ariaLabel:e.props.intl.formatMessage({id:"component.textSwatchDropdown.transparentWithDarkColor.label"}),textColor:t.titleColorDark,backgroundColor:H.a.transparentWithDarkColor,isDisabled:n,disabledLabel:i},{id:H.a.transparentWithLightColor,ariaLabel:e.props.intl.formatMessage({id:"component.textSwatchDropdown.transparentWithLightColor.label"}),textColor:t.titleColorLight,backgroundColor:H.a.transparentWithLightColor,isDisabled:n,disabledLabel:i}],onClick:e.props.updatePanelColor,selectedStyle:e.props.panelColor})}}})),Object(l.a)(Object(o.a)(e),"getHorizontalPositionItem",(function(){if("function"===typeof e.props.updateHorizontalPosition){var t=Object(f.b)();return{label:e.props.intl.formatMessage({id:"builder.immersive.narrativePanel.stylesPanel.horizontalLabel"}),control:K(z.a,{icons:[{id:"start",ariaLabel:e.props.intl.formatMessage({id:"builder.common.".concat(t?"right":"left")}),icon:t?v:x},{id:"center",ariaLabel:e.props.intl.formatMessage({id:"builder.common.center"}),icon:w},{id:"end",ariaLabel:e.props.intl.formatMessage({id:"builder.common.".concat(Object(f.b)()?"left":"right")}),icon:t?x:v}],onClick:e.props.updateHorizontalPosition,selectedStyle:e.props.horizontalPosition})}}})),Object(l.a)(Object(o.a)(e),"getVerticalPositionItem",(function(){if("function"===typeof e.props.updateVerticalPosition)return{label:e.props.intl.formatMessage({id:"builder.immersive.narrativePanel.stylesPanel.verticalLabel"}),control:K(z.a,{icons:[{id:"top",ariaLabel:e.props.intl.formatMessage({id:"builder.common.top"}),icon:C},{id:"middle",ariaLabel:e.props.intl.formatMessage({id:"builder.common.center"}),icon:S},{id:"bottom",ariaLabel:e.props.intl.formatMessage({id:"builder.common.bottom"}),icon:P}],onClick:e.props.updateVerticalPosition,selectedStyle:e.props.verticalPosition})}})),Object(l.a)(Object(o.a)(e),"getSizeItem",(function(){if("function"===typeof e.props.updatePanelSize)return{label:e.props.intl.formatMessage({id:"builder.map.size"}),control:K(z.a,{icons:[{id:"small",ariaLabel:e.props.intl.formatMessage({id:"builder.mediaToolbar.sizeStandard"}),icon:D},{id:"medium",ariaLabel:e.props.intl.formatMessage({id:"builder.mediaToolbar.sizeWide"}),icon:A},{id:"large",ariaLabel:e.props.intl.formatMessage({id:"builder.mediaToolbar.sizeFull"}),icon:G}],onClick:e.props.updatePanelSize,selectedStyle:e.props.panelSize})}})),e}return Object(a.a)(p,[{key:"render",value:function(){var e=[],t=this.getColorItem();t&&e.push(t);var n=this.getHorizontalPositionItem();n&&e.push(n);var i=this.getVerticalPositionItem();i&&e.push(i);var a=this.getSizeItem();return a&&e.push(a),K(_.a,{target:K("button",{type:"button","aria-label":this.props.intl.formatMessage({id:"builder.immersive.layoutSelector.sidecar.floatingPanel.tooltip"}),className:u.a.dynamic([["819547232",[B.a.shadow.sm(),W.a.color.white,W.a.color.darkGreen,W.a.spacing.xxxs]]])+" dropdown-target"},K(V.a,{height:W.a.spacing.xs,width:"auto"}),K(u.a,{id:"819547232",dynamic:[B.a.shadow.sm(),W.a.color.white,W.a.color.darkGreen,W.a.spacing.xxxs]},[".dropdown-target.__jsx-style-dynamic-selector{".concat(B.a.shadow.sm()," background-color:").concat(W.a.color.white,";color:").concat(W.a.color.darkGreen,";padding:").concat(W.a.spacing.xxxs,";line-height:0;position:absolute;top:0;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:1;}")])),popper:K("div",{className:"jsx-3587741091 dropdown-wrapper"},K(F.a,{padding:"none"},K(Y.a,{title:this.props.intl.formatMessage({id:"builder.immersive.narrativePanel.stylesPanel.title"}),styleItems:e})),K(u.a,{id:"3587741091"},[".dropdown-wrapper.jsx-3587741091{position:relative;z-index:4;}"])),hideOnContentClick:!1,placement:"bottom-start"})}}]),p}(d.PureComponent);Object(l.a)(J,"defaultProps",{isPanelColorDisabled:!1});t.a=Object(U.b)(Object(m.c)(J))},aPTH:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b"),s=n("yFcC"),c=n.n(s),l=n("MEC2"),p=n("ERkP"),u=n.n(p).a.createElement;function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){Object(r.a)(s,e);var t,n=(t=s,function(){var e,n=Object(o.a)(t);if(d()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function s(e){Object(i.a)(this,s);var t={iconName:"animating-arrow",path:"M7 35.4h5.7l-6.3 6.3L0 35.4h6V0h1z",viewBox:"0 0 13 42",children:function(){return u(c.a,{id:"810041333"},["@-webkit-keyframes line{0%{opacity:1;-webkit-transform:translateY(-36px);-ms-transform:translateY(-36px);transform:translateY(-36px);}50%{opacity:1;-webkit-transform:translateY(0px);-ms-transform:translateY(0px);transform:translateY(0px);}100%{opacity:0;-webkit-transform:translateY(0px);-ms-transform:translateY(0px);transform:translateY(0px);}}","@keyframes line{0%{opacity:1;-webkit-transform:translateY(-36px);-ms-transform:translateY(-36px);transform:translateY(-36px);}50%{opacity:1;-webkit-transform:translateY(0px);-ms-transform:translateY(0px);transform:translateY(0px);}100%{opacity:0;-webkit-transform:translateY(0px);-ms-transform:translateY(0px);transform:translateY(0px);}}",".icon-animating-arrow>svg>path{-webkit-animation:line 2s infinite;animation:line 2s infinite;}"])}};return n.call(this,e,t)}return s}(l.a)},amyi:function(e,t,n){"use strict";var i=n("ADxc");n.o(i,"PortalItemTypes")&&n.d(t,"PortalItemTypes",(function(){return i.PortalItemTypes}))},aomC:function(e,t,n){"use strict";var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("yFcC"),p=n.n(l),u=n("ERkP"),d=n.n(u),h=n("YQpL"),m=n("O94r"),f=n.n(m),y=n("6pnf"),g=n("60Hg"),v=n("NX3A"),b=n("Z4N4"),x=d.a.createElement;function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var w=function(e){Object(c.a)(l,e);var t,n=(t=l,function(){var e,n=Object(s.a)(t);if(O()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function l(){return Object(a.a)(this,l),n.apply(this,arguments)}return Object(o.a)(l,[{key:"render",value:function(){var e=this.props.isSelected?y.a:g.a,t="checkbox"===this.props.variant?"button":"div",n=this.props.isSelected?{color:v.a.color.white,height:"1.2rem",width:"1.2rem"}:{color:v.a.color.coolGrey,height:v.a.spacing.xxs,width:v.a.spacing.xxs};return x(t,{"aria-label":"checkbox"===this.props.variant?this.props.intl.formatMessage({id:this.props.isSelected?"builder.common.selected":"builder.common.unselected"}):void 0,className:p.a.dynamic([["2481842721",[v.a.spacing.sm,v.a.spacing.sm,b.a.center(),v.a.color.white,b.a.shadow.xs(),v.a.spacing.xxxxs,v.a.color.beauBlue,v.a.color.emeraldGreen,v.a.color.winterSage,v.a.color.platinum,v.a.color.emeraldGreen,v.a.color.cadet,v.a.color.white,v.a.color.cambridgeBlue]]])+" "+(f()("selectable",{radio:"radio"===this.props.variant,checkbox:"checkbox"===this.props.variant,selected:this.props.isSelected})||"")},("radio"!==this.props.variant||this.props.isSelected)&&x(e,Object(i.a)({},n,{className:p.a.dynamic([["2481842721",[v.a.spacing.sm,v.a.spacing.sm,b.a.center(),v.a.color.white,b.a.shadow.xs(),v.a.spacing.xxxxs,v.a.color.beauBlue,v.a.color.emeraldGreen,v.a.color.winterSage,v.a.color.platinum,v.a.color.emeraldGreen,v.a.color.cadet,v.a.color.white,v.a.color.cambridgeBlue]]])+" "+(n&&null!=n.className&&n.className||"")})),x(p.a,{id:"2481842721",dynamic:[v.a.spacing.sm,v.a.spacing.sm,b.a.center(),v.a.color.white,b.a.shadow.xs(),v.a.spacing.xxxxs,v.a.color.beauBlue,v.a.color.emeraldGreen,v.a.color.winterSage,v.a.color.platinum,v.a.color.emeraldGreen,v.a.color.cadet,v.a.color.white,v.a.color.cambridgeBlue]},[".selectable.__jsx-style-dynamic-selector{width:".concat(v.a.spacing.sm,";height:").concat(v.a.spacing.sm,";text-align:center;margin:auto;").concat(b.a.center()," background-color:").concat(v.a.color.white,";}"),".selectable.checkbox.__jsx-style-dynamic-selector{".concat(b.a.shadow.xs()," border:0.3rem solid transparent;border-radius:").concat(v.a.spacing.xxxxs,";}"),".selectable.radio.__jsx-style-dynamic-selector{border-radius:50%;border:0.2rem solid ".concat(v.a.color.beauBlue,";}"),".selectable.selected.__jsx-style-dynamic-selector{background-color:".concat(v.a.color.emeraldGreen,";border-color:").concat(v.a.color.winterSage,";}"),".card-wrapper:hover .selectable.__jsx-style-dynamic-selector{background:".concat(v.a.color.platinum,";}"),".card-wrapper:hover .selectable.selected.__jsx-style-dynamic-selector{background:".concat(v.a.color.emeraldGreen,";}"),".card-wrapper:hover .selectable.__jsx-style-dynamic-selector .icon.__jsx-style-dynamic-selector svg.__jsx-style-dynamic-selector{fill:".concat(v.a.color.cadet,";}"),".card-wrapper:hover .selectable.selected.__jsx-style-dynamic-selector .icon.__jsx-style-dynamic-selector svg.__jsx-style-dynamic-selector{fill:".concat(v.a.color.white,";}"),".label-content:hover .selectable.__jsx-style-dynamic-selector{border-color:".concat(v.a.color.cambridgeBlue,";}")]))}}]),l}(u.PureComponent);t.a=Object(h.c)(w)},apoR:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("NX3A"),c=n("A7aE"),l=r.a.createElement,p=Object(o.memo)((function(e){return l(o.Fragment,null,l("div",{className:a.a.dynamic([["1565850121",[s.a.spacing.xxs,s.a.spacing.xxs,e.storyDesign.storyTheme.themeVariables.bodyColor,s.a.responsiveBreakpoints.medium,s.a.print.textColor]]])+" attribution-container"},l("div",{className:a.a.dynamic([["1565850121",[s.a.spacing.xxs,s.a.spacing.xxs,e.storyDesign.storyTheme.themeVariables.bodyColor,s.a.responsiveBreakpoints.medium,s.a.print.textColor]]])+" content-attribution"},e.children)),l(a.a,{id:"1565850121",dynamic:[s.a.spacing.xxs,s.a.spacing.xxs,e.storyDesign.storyTheme.themeVariables.bodyColor,s.a.responsiveBreakpoints.medium,s.a.print.textColor]},[".content-attribution.__jsx-style-dynamic-selector{--medium-and-print-grid:1fr 0.2rem 1fr;display:grid;grid-auto-flow:column;grid-template-columns:0.2rem 1fr;grid-column-gap:".concat(s.a.spacing.xxs,";margin-bottom:").concat(s.a.spacing.xxs,";}"),".content-attribution.__jsx-style-dynamic-selector{color:".concat(e.storyDesign.storyTheme.themeVariables.bodyColor,";}"),"@media (min-width:".concat(s.a.responsiveBreakpoints.medium,"){.attribution-container.__jsx-style-dynamic-selector{max-width:80%;margin:auto;}.content-attribution.__jsx-style-dynamic-selector{grid-template-columns:var(--medium-and-print-grid);margin-bottom:0;}}"),"body.print .content-attribution.__jsx-style-dynamic-selector,body.print .content-attribution.__jsx-style-dynamic-selector a{color:".concat(s.a.print.textColor,";}"),"body.print .content-attribution.__jsx-style-dynamic-selector{grid-template-columns:var(--medium-and-print-grid);}"]))}));t.a=Object(c.b)(p)},asqy:function(e,t,n){"use strict";var i=n("VtSi"),a=n.n(i),o=n("yFcC"),r=n.n(o),s=n("ERkP"),c=n.n(s),l=n("YQpL"),p=n("O94r"),u=n.n(p),d=n("Z4N4"),h=n("liFR"),m=n("vfFb"),f=n("NX3A"),y=n("9fIP"),g=n("K/z8"),v=n("sRHE"),b=n("8K1b");function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var O=function(e){Object(b.a)(i,e);var t,n=(t=i,function(){var e,n=Object(v.a)(t);if(x()){var i=Object(v.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(g.a)(this,e)});function i(e){Object(y.a)(this,i);return n.call(this,e,{iconName:"star-empty",path:"M24.2078141,29.3604423 L22.6390768,19.7920879 L23.044284,19.3785508 L29.2930612,13.001317 L20.0982735,11.6034962 L19.8385176,11.0523441 L16.0009156,2.90969145 L11.9017086,11.6035153 L11.299459,11.6950712 L2.70704147,13.0013117 L9.36103095,19.7920879 L9.26735912,20.3634297 L7.79247317,29.3593215 L15.9991253,24.8432777 L24.2078141,29.3604423 Z M15.9991252,27.4525267 L8.32873053,31.673473 C6.66073428,32.5922403 5.13429944,31.4760227 5.43658033,29.599592 L6.91782,20.5649207 L0.709841473,14.229324 C-0.599600918,12.8940593 -0.023205255,11.097785 1.82956894,10.8224642 L10.3536343,9.52660868 L14.231873,1.30142675 C15.0508723,-0.433901926 16.9510926,-0.433901926 17.7703551,1.30198487 L21.6465992,9.52662824 L30.1667581,10.8218959 C32.023313,11.097785 32.5997086,12.8940593 31.2905944,14.2289892 L25.0822871,20.5649214 L26.5643843,29.6048967 C26.862347,31.4773844 25.3361792,32.5943367 23.6689763,31.6731739 L15.9991252,27.4525267 Z",viewBox:"0 0 32 32"})}return i}(n("MEC2").a),w=n("2gSQ"),j=n("wTCQ"),C=c.a.createElement;t.a=Object(w.a)(Object(l.c)((function(e){var t=Object(s.useState)(e.isFavorite),n=t[0],i=t[1],o=e.intl.formatMessage({id:n?"common.removeFavorite":"common.addFavorite"});return C("button",{type:"button",onClick:function(){var t;return a.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(t={id:e.id,userSession:e.userSession,toast:e.toast,owner:e.owner,itemType:e.type},!n){o.next=6;break}return o.next=4,a.a.awrap(Object(j.e)(t));case 4:o.next=8;break;case 6:return o.next=8,a.a.awrap(Object(j.c)(t));case 8:i(!n);case 9:case"end":return o.stop()}}),null,null,null,Promise)},"aria-label":o,className:r.a.dynamic([["4140555178",[d.a.cardButton(),d.a.dropdownItemHover()]]])+" "+(u()("favorite",{"is-favorite":n},e.className)||"")},C(h.a,{tooltipContent:o},n?C(m.a,{color:f.a.color.saffron,height:f.a.font.size.medium,width:f.a.font.size.medium}):C(O,{height:f.a.font.size.medium,width:f.a.font.size.medium})),C(r.a,{id:"4140555178",dynamic:[d.a.cardButton(),d.a.dropdownItemHover()]},[".favorite.__jsx-style-dynamic-selector{display:block;line-height:0;color:inherit;".concat(d.a.cardButton(),";}"),".favorite.__jsx-style-dynamic-selector:hover,.favorite.__jsx-style-dynamic-selector:focus{".concat(d.a.dropdownItemHover(),";}"),"body:not(.user-is-tabbing) .favorite.__jsx-style-dynamic-selector:focus{outline:none;}"]))})))},azqN:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("Z4N4"),c=n("NX3A"),l=r.a.createElement,p=Object(o.memo)((function(e){var t=e.children;return l("h3",{className:a.a.dynamic([["1834240067",[s.a.typography.h3(),c.a.color.antiFlashWhite,c.a.spacing.xs,c.a.spacing.xs,c.a.spacing.xxxs,c.a.spacing.xs]]])},t,l(a.a,{id:"1834240067",dynamic:[s.a.typography.h3(),c.a.color.antiFlashWhite,c.a.spacing.xs,c.a.spacing.xs,c.a.spacing.xxxs,c.a.spacing.xs]},["h3.__jsx-style-dynamic-selector{".concat(s.a.typography.h3(),";color:").concat(c.a.color.antiFlashWhite,";padding:").concat(c.a.spacing.xs," ").concat(c.a.spacing.xs," ").concat(c.a.spacing.xxxs,";margin:").concat(c.a.spacing.xs," 0 0;}")]))}));t.a=p},b686:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("NX3A"),h=n("OGR5"),m=u.a.createElement;function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(f()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return m("div",{className:l.a.dynamic([["3793327593",[d.a.spacing.xs,d.a.spacing.sm,d.a.responsiveBreakpoints.large]]])+" cover-text-content"},m("div",{className:l.a.dynamic([["3793327593",[d.a.spacing.xs,d.a.spacing.sm,d.a.responsiveBreakpoints.large]]])+" inner-container"},m(h.b,{spacingLg:"8rem",spacingMd:d.a.spacing.xxxs,spacingSm:d.a.spacing.xxxs},this.props.children)),m(l.a,{id:"3793327593",dynamic:[d.a.spacing.xs,d.a.spacing.sm,d.a.responsiveBreakpoints.large]},[".cover-text-content.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:".concat(d.a.spacing.xs," 0 ").concat(d.a.spacing.sm,";}"),".inner-container.__jsx-style-dynamic-selector{margin:auto 0;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;width:100%;}","@media (min-width:".concat(d.a.responsiveBreakpoints.large,"){.cover-text-content.__jsx-style-dynamic-selector{height:100%;overflow:auto;-webkit-overflow-scrolling:touch;margin:auto 0;}}")]))}}]),c}(p.PureComponent);t.a=y},bOkD:function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},bXtg:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("2SGB"),c=n("NX3A"),l=n("Z4N4"),p=n("azqN"),u=r.a.createElement,d=Object(o.memo)((function(e){var t=e.children;return u("div",{role:"tabpanel",className:a.a.dynamic([["2903950152",[c.a.spacing.xs,l.a.gappedList(c.a.spacing.xs)]]])+" options-panel"},u(p.a,null,u(s.a,{id:"viewer.common.settings"})),t&&u("div",{className:a.a.dynamic([["2903950152",[c.a.spacing.xs,l.a.gappedList(c.a.spacing.xs)]]])+" options-panel-content"},t),u(a.a,{id:"2903950152",dynamic:[c.a.spacing.xs,l.a.gappedList(c.a.spacing.xs)]},[".options-panel-content.__jsx-style-dynamic-selector{padding:".concat(c.a.spacing.xs,";").concat(l.a.gappedList(c.a.spacing.xs),";}")]))}));t.a=d},bcaP:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"polygon",path:"M4 30V6.964l9.412 6.845a1 1 0 0 0 1.213-.028L28 3.081V30z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},bu6S:function(e,t,n){"use strict";var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("pWxA"),s=n("K/z8"),c=n("sRHE"),l=n("8K1b"),p=n("zjfJ"),u=n("yFcC"),d=n.n(u),h=n("ERkP"),m=n.n(h),f=n("2SGB"),y=n("r3il"),g=n("NX3A"),v=n("Z4N4"),b=n("A7aE"),x=n("nVDo"),O=n("t7DY"),w=n("i3DM"),j=m.a.createElement;function C(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var k=function(e){Object(l.a)(u,e);var t,n=(t=u,function(){var e,n=Object(c.a)(t);if(C()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function u(){var e;Object(a.a)(this,u);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),Object(p.a)(Object(r.a)(e),"onClick",(function(t){Object(w.a)(t)&&e.props.onClick&&e.props.onClick(e.props.id,t)})),Object(p.a)(Object(r.a)(e),"onMouseEnter",(function(){"function"===typeof e.props.onMouseEnter&&e.props.title&&e.props.onMouseEnter(e.props.id)})),Object(p.a)(Object(r.a)(e),"onMouseLeave",(function(){"function"===typeof e.props.onMouseLeave&&e.props.title&&e.props.onMouseLeave(e.props.id)})),e}return Object(o.a)(u,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.title,a=t===O.j.POINT_NUMBERED?y.a:x.f[x.g[t]||t].icon,o=this.props.storyDesign.storyTheme.themeVariables,r=this.props.isDisabled?g.a.color.coolGrey:this.props.shouldIgnoreTheme?g.a.color.antiFlashWhite:o.bodyColor,s=this.props.shouldIgnoreTheme?g.a.color.coolGrey:this.props.colorName?o[this.props.colorName]:o.accentColor1,c=this.props.shouldIgnoreTheme?g.a.color.haikuBlack:o.backgroundColor,l=this.props.onClick&&!this.props.isDisabled?{role:"button",tabIndex:0,onClick:this.onClick,onKeyPress:this.onClick}:{},p=this.props.isDisabled?{}:{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave};return j("li",Object(i.a)({},l,p,{className:d.a.dynamic([["1478513227",[g.a.spacing.xxxs,g.a.spacing.xxxs,g.a.spacing.xxs,"function"===typeof this.props.onMouseEnter||this.props.willHighlightOnHover?this.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundColor:"unset",r,this.props.shouldIgnoreTheme?"":this.props.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.baseline(),v.a.typography.body14(),c]]])+" "+(p&&null!=p.className&&p.className||l&&null!=l.className&&l.className||"drawing-item")}),j(a,{height:g.a.spacing.xxs,width:"auto",color:s,children:this.props.numberedPointNumber,className:d.a.dynamic([["1478513227",[g.a.spacing.xxxs,g.a.spacing.xxxs,g.a.spacing.xxs,"function"===typeof this.props.onMouseEnter||this.props.willHighlightOnHover?this.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundColor:"unset",r,this.props.shouldIgnoreTheme?"":this.props.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.baseline(),v.a.typography.body14(),c]]])}),j("div",{className:d.a.dynamic([["1478513227",[g.a.spacing.xxxs,g.a.spacing.xxxs,g.a.spacing.xxs,"function"===typeof this.props.onMouseEnter||this.props.willHighlightOnHover?this.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundColor:"unset",r,this.props.shouldIgnoreTheme?"":this.props.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.baseline(),v.a.typography.body14(),c]]])+" drawing-item-name"},n||j(f.a,{id:"builder.common.untitled"})),j(d.a,{id:"1478513227",dynamic:[g.a.spacing.xxxs,g.a.spacing.xxxs,g.a.spacing.xxs,"function"===typeof this.props.onMouseEnter||this.props.willHighlightOnHover?this.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundColor:"unset",r,this.props.shouldIgnoreTheme?"":this.props.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.baseline(),v.a.typography.body14(),c]},[".drawing-item.__jsx-style-dynamic-selector{display:grid;grid-auto-flow:column;grid-gap:".concat(g.a.spacing.xxxs,";-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:").concat(g.a.spacing.xxxs," ").concat(g.a.spacing.xxs,";-webkit-transition:background-color 0.2s;transition:background-color 0.2s;}"),".drawing-item[role='button'].__jsx-style-dynamic-selector{cursor:pointer;}",".drawing-item.__jsx-style-dynamic-selector:hover{background-color:".concat("function"===typeof this.props.onMouseEnter||this.props.willHighlightOnHover?this.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundColor:"unset",";}"),".drawing-item.__jsx-style-dynamic-selector:focus{outline-offset:-4px;}",".drawing-item-name.__jsx-style-dynamic-selector{color:".concat(r,";").concat(this.props.shouldIgnoreTheme?"":this.props.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.baseline()," ").concat(v.a.typography.body14()," height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;word-break:break-word;}"),".drawing-item.__jsx-style-dynamic-selector svg text{fill:".concat(c,";}")]))}}]),u}(h.PureComponent);t.a=Object(b.b)(k)},bzXW:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"layers",path:"M31.422 22.973l-14.803 8.883a1.48 1.48 0 0 1-1.271 0L.545 22.973a.543.543 0 0 1 0-1.016l3.29-1.976 11.513 6.908a1.48 1.48 0 0 0 1.271 0l11.51-6.907 3.293 1.977a.541.541 0 0 1 0 1.014zm0-7.479l-3.293-1.976-11.51 6.906a1.48 1.48 0 0 1-1.271 0L3.836 13.516.545 15.492a.543.543 0 0 0 0 1.016l14.803 8.883a1.48 1.48 0 0 0 1.271 0l14.803-8.883a.541.541 0 0 0 0-1.014zM16.619.144a1.48 1.48 0 0 0-1.271 0L.545 9.028a.543.543 0 0 0 0 1.016l14.803 8.883a1.48 1.48 0 0 0 1.271 0l14.803-8.883a.543.543 0 0 0 0-1.016z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},cCzZ:function(e,t,n){"use strict";n.r(t),n.d(t,"MediaPanelViewer",(function(){return w}));var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("zjfJ"),l=n("yFcC"),p=n.n(l),u=n("ERkP"),d=n.n(u),h=n("O94r"),m=n.n(h),f=n("Z4N4"),y=n("NX3A"),g=n("A7aE"),v=n("ix8t"),b=n("+d95"),x=d.a.createElement;function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var w=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(O()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return x("div",{className:p.a.dynamic([["2025612871",[this.props.storyDesign.storyTheme.themeVariables.backgroundColor,Object(b.a)(this.props.storyDesign.storyTheme.themeVariables,this.props.backgroundColor),"start"===this.props.maskOrigin?"to bottom":"to top",f.a.hexA(y.a.color.black,.5),f.a.hexA(y.a.color.black,.05),"start"===this.props.maskOrigin?"to bottom":"to top",f.a.hexA(y.a.color.black,.4),f.a.hexA(y.a.color.black,0)]]])+" "+(m()("media-panel",{background:this.props.showAsBackground})||"")},u.Children.count(this.props.children)>0?this.props.children:this.props.backgroundColor?x("div",{className:p.a.dynamic([["2025612871",[this.props.storyDesign.storyTheme.themeVariables.backgroundColor,Object(b.a)(this.props.storyDesign.storyTheme.themeVariables,this.props.backgroundColor),"start"===this.props.maskOrigin?"to bottom":"to top",f.a.hexA(y.a.color.black,.5),f.a.hexA(y.a.color.black,.05),"start"===this.props.maskOrigin?"to bottom":"to top",f.a.hexA(y.a.color.black,.4),f.a.hexA(y.a.color.black,0)]]])+" background-color"}):x(v.a,null),this.props.showMask&&x("div",{className:p.a.dynamic([["2025612871",[this.props.storyDesign.storyTheme.themeVariables.backgroundColor,Object(b.a)(this.props.storyDesign.storyTheme.themeVariables,this.props.backgroundColor),"start"===this.props.maskOrigin?"to bottom":"to top",f.a.hexA(y.a.color.black,.5),f.a.hexA(y.a.color.black,.05),"start"===this.props.maskOrigin?"to bottom":"to top",f.a.hexA(y.a.color.black,.4),f.a.hexA(y.a.color.black,0)]]])+" mask"}),x(p.a,{id:"2025612871",dynamic:[this.props.storyDesign.storyTheme.themeVariables.backgroundColor,Object(b.a)(this.props.storyDesign.storyTheme.themeVariables,this.props.backgroundColor),"start"===this.props.maskOrigin?"to bottom":"to top",f.a.hexA(y.a.color.black,.5),f.a.hexA(y.a.color.black,.05),"start"===this.props.maskOrigin?"to bottom":"to top",f.a.hexA(y.a.color.black,.4),f.a.hexA(y.a.color.black,0)]},[".media-panel.__jsx-style-dynamic-selector{background-color:".concat(this.props.storyDesign.storyTheme.themeVariables.backgroundColor,";}"),".media-panel.__jsx-style-dynamic-selector:not(.background){-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;height:100%;position:relative;}",".media-panel.background.__jsx-style-dynamic-selector{position:absolute;top:0;left:0;right:0;bottom:0;}",".background-color.__jsx-style-dynamic-selector{background-color:".concat(Object(b.a)(this.props.storyDesign.storyTheme.themeVariables,this.props.backgroundColor),";height:100%;width:100%;}"),".mask.__jsx-style-dynamic-selector{background-image:linear-gradient( ".concat("start"===this.props.maskOrigin?"to bottom":"to top",", ").concat(f.a.hexA(y.a.color.black,.5)," 25%, ").concat(f.a.hexA(y.a.color.black,.05)," 100% );position:absolute;top:0;left:0;right:0;bottom:0;z-index:1;}"),"@media (min-height:1025px){.mask.__jsx-style-dynamic-selector{background-image:linear-gradient( ".concat("start"===this.props.maskOrigin?"to bottom":"to top",", ").concat(f.a.hexA(y.a.color.black,.4)," 15%, ").concat(f.a.hexA(y.a.color.black,0)," 60% );}}")]))}}]),c}(u.PureComponent);Object(c.a)(w,"defaultProps",{showAsBackground:!1,showMask:!1,maskOrigin:"end"}),t.default=Object(g.b)(w)},cVdA:function(e,t,n){"use strict";var i=n("ERkP"),a=n.n(i),o=n("2SGB"),r=n("liFR"),s=n("tSRP"),c=n("A7aE"),l=n("OzwF"),p=n("57qx"),u=n("cxan"),d=n("9fIP"),h=n("MMYH"),m=n("K/z8"),f=n("sRHE"),y=n("8K1b"),g=n("yFcC"),v=n.n(g),b=n("NX3A"),x=n("pWxA"),O=n("zjfJ"),w=n("O94r"),j=n.n(w),C=n("Z4N4"),k=n("AuFC"),S=a.a.createElement,I=Object(i.memo)((function(e){var t=e.name;return"cn"===t?S(a.a.Fragment,null,"\u4e2d\u56fd\u5730\u56fe\u5f69\u8272\u7248"):S(o.a,{id:"builder.map.basemap.".concat(t)})})),P=a.a.createElement;function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var E=function(e){Object(y.a)(i,e);var t,n=(t=i,function(){var e,n=Object(f.a)(t);if(R()){var i=Object(f.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(m.a)(this,e)});function i(){var e;Object(d.a)(this,i);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),Object(O.a)(Object(x.a)(e),"onClick",(function(){e.props.onSelect(e.props.id)})),Object(O.a)(Object(x.a)(e),"getThumbnailUrl",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(p.e)({baseUrl:e.props.config.BASE_URL,thumbnail:e.props.thumbnail,isHighRes:t})})),e}return Object(h.a)(i,[{key:"render",value:function(){var e=P(I,{name:this.props.id});return P(a.a.Fragment,null,P(r.a,{tooltipContent:e},P("li",{className:v.a.dynamic([["1260832935",[C.a.circle("5.6rem"),C.a.fillBackgroundImage(this.getThumbnailUrl()),this.getThumbnailUrl(!0),b.a.color.ashGrey,b.a.color.haikuGreen,b.a.color.haikuGreen]]])+" basemap-selector-item"},P("button",{onClick:this.onClick,className:v.a.dynamic([["1260832935",[C.a.circle("5.6rem"),C.a.fillBackgroundImage(this.getThumbnailUrl()),this.getThumbnailUrl(!0),b.a.color.ashGrey,b.a.color.haikuGreen,b.a.color.haikuGreen]]])+" "+(j()({active:this.props.isActive})||"")},e))),P(v.a,{id:"1260832935",dynamic:[C.a.circle("5.6rem"),C.a.fillBackgroundImage(this.getThumbnailUrl()),this.getThumbnailUrl(!0),b.a.color.ashGrey,b.a.color.haikuGreen,b.a.color.haikuGreen]},["button.__jsx-style-dynamic-selector{".concat(C.a.circle("5.6rem")," position:relative;font-size:0;}"),"button.__jsx-style-dynamic-selector::before,button.__jsx-style-dynamic-selector::after{content:'';position:absolute;border-radius:50%;}","button.__jsx-style-dynamic-selector::before{--content-offset:0;top:var(--content-offset);left:var(--content-offset);right:var(--content-offset);bottom:var(--content-offset);".concat(C.a.fillBackgroundImage(this.getThumbnailUrl())," transition:0.2s ease;}"),"@media all and (-webkit-min-device-pixel-ratio:1.5), all and (min-device-pixel-ratio:1.5){button.__jsx-style-dynamic-selector::before{background-image:url(".concat(this.getThumbnailUrl(!0),");}}"),"button.__jsx-style-dynamic-selector::after{--ring-offset:0;top:var(--ring-offset);left:var(--ring-offset);right:var(--ring-offset);bottom:var(--ring-offset);border:0.1rem solid ".concat(b.a.color.ashGrey,";-webkit-transition:0.2s ease;transition:0.2s ease;}"),"button.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector::after,button.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector::after{border-color:".concat(b.a.color.haikuGreen,";}"),"button.active.__jsx-style-dynamic-selector::before{--content-offset:0.2rem;}","button.active.__jsx-style-dynamic-selector::after{--ring-offset:-0.2rem;border:0.2rem solid ".concat(b.a.color.haikuGreen,";}")]))}}]),i}(i.PureComponent),D=Object(k.c)(E),T=a.a.createElement;function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var A=function(e){Object(y.a)(i,e);var t,n=(t=i,function(){var e,n=Object(f.a)(t);if(M()){var i=Object(f.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(m.a)(this,e)});function i(){return Object(d.a)(this,i),n.apply(this,arguments)}return Object(h.a)(i,[{key:"render",value:function(){var e=this;return T("ul",{className:v.a.dynamic([["1265084819",[b.a.spacing.xxs]]])+" basemap-selector"},this.props.basemaps.map((function(t){return T(D,Object(u.a)({key:t.id},t,{isActive:e.props.basemapName===t.id,onSelect:e.props.onSelectBasemapName}))})),T(v.a,{id:"1265084819",dynamic:[b.a.spacing.xxs]},["ul.__jsx-style-dynamic-selector{display:grid;grid-gap:".concat(b.a.spacing.xxs,";-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;grid-template-columns:repeat(auto-fill,minmax(4.8rem,1fr));}")]))}}]),i}(i.PureComponent),N=a.a.createElement,L=Object(c.b)((function(e){var t=e.userRegionOrCountry,n=e.basemapKind,i=e.onSelectBasemapKind,a=e.storyDesign.storyTheme.themeVariables;return N(A,{onSelectBasemapName:function(e){var t=Object(p.h)(a,e);t&&i(t)},basemaps:Object(p.d)(a.basemaps,t),basemapName:n?Object(p.f)(a.basemaps,n):void 0})})),G=a.a.createElement,_=Object(i.memo)((function(e){var t=e.name,n=e.thumbnail,a=e.onClick,o=Object(i.useContext)(k.a),r=function(e){return Object(p.e)({baseUrl:null===o||void 0===o?void 0:o.BASE_URL,thumbnail:n,isHighRes:e})};return G("button",{onClick:a,className:v.a.dynamic([["2914555943",[b.a.spacing.xxxs,b.a.color.warmBlack,b.a.color.darkGreen,C.a.gapped("column",b.a.spacing.xxxs),b.a.color.antiFlashWhite,C.a.typography.body14()]],["3327332470",[b.a.spacing.md,b.a.spacing.md,C.a.fillBackgroundImage(r(),C.a.hexA(b.a.color.white,.1)),r(!0)]]])+" picker-button"},G("div",{className:v.a.dynamic([["2914555943",[b.a.spacing.xxxs,b.a.color.warmBlack,b.a.color.darkGreen,C.a.gapped("column",b.a.spacing.xxxs),b.a.color.antiFlashWhite,C.a.typography.body14()]],["3327332470",[b.a.spacing.md,b.a.spacing.md,C.a.fillBackgroundImage(r(),C.a.hexA(b.a.color.white,.1)),r(!0)]]])+" grid-wrapper"},G("div",{className:v.a.dynamic([["2914555943",[b.a.spacing.xxxs,b.a.color.warmBlack,b.a.color.darkGreen,C.a.gapped("column",b.a.spacing.xxxs),b.a.color.antiFlashWhite,C.a.typography.body14()]],["3327332470",[b.a.spacing.md,b.a.spacing.md,C.a.fillBackgroundImage(r(),C.a.hexA(b.a.color.white,.1)),r(!0)]]])+" thumbnail"}),G("div",{className:v.a.dynamic([["2914555943",[b.a.spacing.xxxs,b.a.color.warmBlack,b.a.color.darkGreen,C.a.gapped("column",b.a.spacing.xxxs),b.a.color.antiFlashWhite,C.a.typography.body14()]],["3327332470",[b.a.spacing.md,b.a.spacing.md,C.a.fillBackgroundImage(r(),C.a.hexA(b.a.color.white,.1)),r(!0)]]])+" name"},t)),G(v.a,{id:"2914555943",dynamic:[b.a.spacing.xxxs,b.a.color.warmBlack,b.a.color.darkGreen,C.a.gapped("column",b.a.spacing.xxxs),b.a.color.antiFlashWhite,C.a.typography.body14()]},[".picker-button.__jsx-style-dynamic-selector{width:100%;padding:".concat(b.a.spacing.xxxs,";border:1px solid ").concat(b.a.color.warmBlack,";-webkit-transition:background-color 0.2s;transition:background-color 0.2s;text-align:initial;}"),".picker-button.__jsx-style-dynamic-selector:hover{background-color:".concat(b.a.color.darkGreen,";}"),".grid-wrapper.__jsx-style-dynamic-selector{".concat(C.a.gapped("column",b.a.spacing.xxxs)," grid-template-columns:auto 1fr;}"),".name.__jsx-style-dynamic-selector{color:".concat(b.a.color.antiFlashWhite,";").concat(C.a.typography.body14(),";}")]),G(v.a,{id:"3327332470",dynamic:[b.a.spacing.md,b.a.spacing.md,C.a.fillBackgroundImage(r(),C.a.hexA(b.a.color.white,.1)),r(!0)]},[".thumbnail.__jsx-style-dynamic-selector{height:".concat(b.a.spacing.md,";width:").concat(b.a.spacing.md,";").concat(C.a.fillBackgroundImage(r(),C.a.hexA(b.a.color.white,.1)),";}"),"@media all and (-webkit-min-device-pixel-ratio:1.5), all and (min-device-pixel-ratio:1.5){.thumbnail.__jsx-style-dynamic-selector{background-image:url(".concat(r(!0),");}}")]))})),B=a.a.createElement,W=Object(i.memo)((function(e){var t=e.children,n=Object(i.useContext)(c.a).storyTheme;return B("div",{className:v.a.dynamic([["1822170584",[b.a.spacing.xs,b.a.color.white,C.a.shadow.lg(),n.themeVariables.accentColor1,C.a.typography.h5(),b.a.color.darkGreen]]])+" menu"},B("h5",{className:v.a.dynamic([["1822170584",[b.a.spacing.xs,b.a.color.white,C.a.shadow.lg(),n.themeVariables.accentColor1,C.a.typography.h5(),b.a.color.darkGreen]]])},B(o.a,{id:"builder.map.basemap.picker.changeBasemap"})),t,B(v.a,{id:"1822170584",dynamic:[b.a.spacing.xs,b.a.color.white,C.a.shadow.lg(),n.themeVariables.accentColor1,C.a.typography.h5(),b.a.color.darkGreen]},[".menu.__jsx-style-dynamic-selector{width:24.8rem;padding:".concat(b.a.spacing.xs,";background-color:").concat(b.a.color.white,";").concat(C.a.shadow.lg()," max-height:85vh;overflow:auto;}"),"body.user-is-tabbing .menu.__jsx-style-dynamic-selector :focus{outline-color:".concat(n.themeVariables.accentColor1,";}"),"h5.__jsx-style-dynamic-selector{".concat(C.a.typography.h5()," color:").concat(b.a.color.darkGreen,";}")]))})),V=n("rHGT"),F=a.a.createElement,U=Object(i.memo)((function(e){var t=e.title,n=e.tooltip,i=e.children;return F("section",{className:v.a.dynamic([["4019938861",[b.a.spacing.xs,C.a.gappedList(b.a.spacing.xxs),C.a.typography.body14(),b.a.color.darkGreen]]])+" menu-section"},t&&F(z,{tooltip:n},F("h6",{className:v.a.dynamic([["4019938861",[b.a.spacing.xs,C.a.gappedList(b.a.spacing.xxs),C.a.typography.body14(),b.a.color.darkGreen]]])},t)),i,F(v.a,{id:"4019938861",dynamic:[b.a.spacing.xs,C.a.gappedList(b.a.spacing.xxs),C.a.typography.body14(),b.a.color.darkGreen]},[".menu-section.__jsx-style-dynamic-selector{padding-top:".concat(b.a.spacing.xs,";").concat(C.a.gappedList(b.a.spacing.xxs),";}"),"h6.__jsx-style-dynamic-selector{".concat(C.a.typography.body14()," color:").concat(b.a.color.darkGreen,";}")]))})),z=function(e){var t=e.children,n=e.tooltip;if(!n)return F(a.a.Fragment,null,"children");var i={styles:F(v.a,{id:"1674910030",dynamic:[b.a.spacing.xxxs]},[".info-icon.__jsx-style-dynamic-selector{margin:0.2rem ".concat(b.a.spacing.xxxs," 0;}")]),className:v.a.dynamic([["1674910030",[b.a.spacing.xxxs]]])},o=i.styles,s=i.className;return F("div",{className:"jsx-2026344164"},t,n&&F(r.a,{tooltipContent:n},F(V.a,{className:j()("info-icon",s),width:"auto",height:"1.2rem",color:b.a.color.deepLilac})),F(v.a,{id:"2026344164"},["div.jsx-2026344164{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;word-break:break-word;}"]),o)},H=U,Y=Object.freeze(["darkGrayCanvas","lightGrayCanvas","chartedTerritory","community","humanGeographyDark","humanGeographyLight","worldImagery","firefly","hybrid","modernAntique","navigation","newspaper","oceans","streetsDark","topographic"]),K=a.a.createElement,X={modifiers:[{name:"preventOverflow",options:{padding:16}}]},J=Object(i.memo)((function(e){var t=Object(i.useContext)(c.a).storyTheme.themeVariables,n=Object(p.i)(t.basemaps,e.basemap),a=n.id,u=n.thumbnail,d=K("div",null,K(r.a,{tooltipContent:K(o.a,{id:"builder.map.basemap.picker.card.tooltip"})},K(_,{name:K(I,{name:a}),thumbnail:u}))),h=e.basemap,m=h.type,f=h.value,y=K(W,null,K(H,{title:K(o.a,{id:"builder.map.basemap.picker.recommended"}),tooltip:K(o.a,{id:"builder.map.basemap.picker.recommendedTooltip"})},K(L,{basemapKind:"order"===m?Object(p.j)(f):"locale"===m?"cn":void 0,userRegionOrCountry:e.userRegionOrCountry,onSelectBasemapKind:function(t){e.onPick("cn"===t?{type:"locale",value:"cn"}:{type:"order",value:Object(p.g)(t)})}})),K(H,{title:K(o.a,{id:"builder.map.basemap.picker.allBasemaps"}),tooltip:K(o.a,{id:"builder.map.basemap.picker.allBasemapsTooltip"})},K(A,{onSelectBasemapName:function(t){e.onPick({type:"name",value:t})},basemaps:Y.map(l.a),basemapName:"name"===m?f:void 0})));return K(s.a,{target:d,popper:y,hideOnContentClick:!1,placement:"right",offset:[0,8],popperOptions:X})}));t.a=J},caXL:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("zjfJ"),l=n("yFcC"),p=n.n(l),u=n("ERkP"),d=n.n(u),h=n("O94r"),m=n.n(h),f=n("NX3A"),y=n("Z4N4"),g=n("ukgq"),v=n("vKUr"),b=d.a.createElement;function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var O=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(x()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return b("div",{className:p.a.dynamic([["592277524",[f.a.spacing.xxl,f.a.spacing.xxl,f.a.spacing.sm,f.a.spacing.xxl,y.a.hexA(f.a.color.white,.3),f.a.responsiveBreakpoints.large,f.a.spacing.sm,f.a.spacing.xs,f.a.spacing.xl]]])+" "+(m()("title-panel",{start:"end"!==this.props.titlePanelPosition,end:"end"===this.props.titlePanelPosition,"is-editing":this.props.isEditing})||"")},b(g.a,{size:"wide"},this.props.children),this.props.isEditing&&this.props.onPanelPositionToggleClick&&b("div",{className:p.a.dynamic([["592277524",[f.a.spacing.xxl,f.a.spacing.xxl,f.a.spacing.sm,f.a.spacing.xxl,y.a.hexA(f.a.color.white,.3),f.a.responsiveBreakpoints.large,f.a.spacing.sm,f.a.spacing.xs,f.a.spacing.xl]]])+" "+(m()("position-toggle-container",{start:"end"!==this.props.titlePanelPosition,end:"end"===this.props.titlePanelPosition})||"")},b(v.a,{iconOrientation:"vertical",onToggle:this.props.onPanelPositionToggleClick})),b(p.a,{id:"592277524",dynamic:[f.a.spacing.xxl,f.a.spacing.xxl,f.a.spacing.sm,f.a.spacing.xxl,y.a.hexA(f.a.color.white,.3),f.a.responsiveBreakpoints.large,f.a.spacing.sm,f.a.spacing.xs,f.a.spacing.xl]},[".title-panel.__jsx-style-dynamic-selector{position:relative;z-index:2;width:100%;margin-left:auto;margin-right:auto;text-align:left;}",".title-panel.start.__jsx-style-dynamic-selector{margin-top:".concat(f.a.spacing.xxl,";margin-bottom:").concat(f.a.spacing.xxl,";-webkit-order:0;-ms-flex-order:0;order:0;}"),".title-panel.end.__jsx-style-dynamic-selector{margin-top:".concat(f.a.spacing.sm,";margin-bottom:").concat(f.a.spacing.xxl,";-webkit-order:1;-ms-flex-order:1;order:1;}"),".title-panel.is-editing.__jsx-style-dynamic-selector{border:1px dashed ".concat(y.a.hexA(f.a.color.white,.3),";}"),".position-toggle-container.__jsx-style-dynamic-selector{position:absolute;left:50%;z-index:1;}",".position-toggle-container.start.__jsx-style-dynamic-selector{bottom:0;-webkit-transform:translate(-50%,50%);-ms-transform:translate(-50%,50%);transform:translate(-50%,50%);}",".position-toggle-container.end.__jsx-style-dynamic-selector{top:0;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}","@media (min-width:".concat(f.a.responsiveBreakpoints.large,"){.title-panel.__jsx-style-dynamic-selector{text-align:center;width:70%;padding:").concat(f.a.spacing.sm," 0 4rem;}.title-panel.start.__jsx-style-dynamic-selector{margin-bottom:0;}}"),"body.print .title-panel.__jsx-style-dynamic-selector{text-align:center;width:90%;padding:".concat(f.a.spacing.xs," 0;}"),"body.print .title-panel.start.__jsx-style-dynamic-selector{margin:".concat(f.a.spacing.xl," auto 0;}")]))}}]),c}(u.PureComponent);Object(c.a)(O,"defaultProps",{isEditing:!1}),t.a=O},caza:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("W9tV"),g=n("A7aE"),v=n("6LyH"),b=n("V+ka"),x=n("uEvS"),O=n("ow/k"),w=n("QSI2"),j=n("yyMi"),C=n("Xls9"),k=h.a.createElement;function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var I=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(S()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"onIntersection",(function(e){e.forEach((function(e){e.target===t.immersiveElement&&t.props.setIsImmersiveShowing(e.isIntersecting),e.target===t.topDockedSentinel.current&&t.props.setIsTopSentinelShowing(e.isIntersecting),e.target===t.bottomDockedSentinel.current&&t.props.setIsBottomSentinelShowing(e.isIntersecting)}))})),Object(l.a)(Object(o.a)(t),"setImmersiveElement",(function(e){t.immersiveElement=e,t.props.setImmersiveElement(e)})),Object(l.a)(Object(o.a)(t),"scrollToElement",(function(){t.firstCreateDockNode.current&&Object(y.a)({element:t.firstCreateDockNode.current,verticalAlign:"start"})})),t.firstCreateDockNode=Object(d.createRef)(),t.topDockedSentinel=Object(d.createRef)(),t.bottomDockedSentinel=Object(d.createRef)(),t.immersiveElement=null,t}return Object(a.a)(p,[{key:"componentDidMount",value:function(){this.intersectionObserver=new IntersectionObserver(this.onIntersection,{threshold:0}),this.props.shouldScrollIntoView&&this.scrollToElement(),this.immersiveElement&&this.intersectionObserver.observe(this.immersiveElement),this.topDockedSentinel.current&&this.intersectionObserver.observe(this.topDockedSentinel.current),this.bottomDockedSentinel.current&&this.intersectionObserver.observe(this.bottomDockedSentinel.current)}},{key:"componentDidUpdate",value:function(e){!e.shouldScrollIntoView&&this.props.shouldScrollIntoView&&this.scrollToElement()}},{key:"componentWillUnmount",value:function(){this.intersectionObserver.disconnect()}},{key:"render",value:function(){var e=this.props.type,t=Object(C.b)({appOffset:this.props.appOffset.top,storyNavOffset:this.props.storyOffsetContext.storyOffset.navBarHeight});return k("div",{ref:this.setImmersiveElement,className:"jsx-318729829 "+(f()("immersive",this.props.className)||"")},k("span",{ref:this.firstCreateDockNode,className:"jsx-318729829 "+(f()("first-create-dock-node",this.props.firstCreateDockNodeClassName)||"")}),k("span",{ref:this.topDockedSentinel,className:"jsx-318729829 "+(f()("sentinel-top-docked",this.props.topDockedSentinelClassName)||"")}),k("span",{ref:this.bottomDockedSentinel,className:"jsx-318729829 "+(f()("sentinel-bottom-docked",this.props.bottomDockedSentinelClassName)||"")}),this.props.extraSentinels,k(O.a.Provider,{value:e},k(x.a.Provider,{value:{top:t,bottom:this.props.bottomOffset}},k(w.a.Provider,{value:this.props.isDocked},!this.props.shouldHideNavDots&&!this.props.printMode&&k(j.default,{orientation:this.props.navDotsOrientation,isIntegrated:this.props.areNavDotsIntegrated,position:this.props.narrativePanelPosition,items:this.props.slidePointers,selectedItemId:this.props.selectedSlideId,minimumItemCount:2,maximumItemCount:this.props.shouldAlwaysUseNavNumbers?0:10,showOnSmallScreens:"horizontal"===this.props.navDotsOrientation}),this.props.children))),k(u.a,{id:"318729829"},[".immersive.jsx-318729829{position:relative;z-index:0;background:transparent;display:grid;}",".sentinel-top-docked.jsx-318729829,.sentinel-bottom-docked.jsx-318729829,.first-create-dock-node.jsx-318729829{position:absolute;z-index:0;left:0;right:0;height:0.1rem;}",".sentinel-top-docked.jsx-318729829,.first-create-dock-node.jsx-318729829{top:0;}",".sentinel-bottom-docked.jsx-318729829{bottom:0;}"]))}}]),p}(d.PureComponent);Object(l.a)(I,"defaultProps",{shouldAlwaysUseNavNumbers:!1,shouldHideNavDots:!1}),t.a=Object(b.b)(Object(v.a)(Object(g.b)(I)))},cpdA:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return w})),n.d(t,"d",(function(){return C}));var i=n("zjfJ"),a=n("Z4N4"),o=n("NX3A"),r=n("Bsig"),s=n("RP1v"),c=n("K16L"),l={MOBILE_SCALE:.7,NODE_SIZE:8,MID_NODE_SIZE:6,LINE_WIDTH:2,OUTLINE_HOVER_STROKE_RATIO:1.78,POINT_REGULAR_IMAGE_PATH:"/static/images/xg-theme-assets/common/unnumbered-pin.svg",POINT_NUMBERED_IMAGE_PATH:"/static/images/xg-theme-assets/common/numbered-pin.svg",OPACITY_POLYGON_BORDER:.9,OPACITY_POLYGON_FILL:.4,FONT_COLOR_DEFAULT:"#fff",FONT_SIZE:10,FONT_FAMILY:"Avenir Next",FONT_WEIGHT:"700"};function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var u=function(e){return"".concat(e).concat(l.POINT_NUMBERED_IMAGE_PATH)},d=function(e){return"".concat(e).concat(l.POINT_REGULAR_IMAGE_PATH)},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a.a.hexA(e,t).match(/^rgba\((\d+),(\d+),(\d+),(.+)\)$/);return n?n.splice(1,5).map(parseFloat):[0,0,0,0]},m=function(e,t,n){var i=h(e),a=h(t),o=function(e,t){return t*n+e*(1-n)};return[o(i[0],a[0]),o(i[1],a[1]),o(i[2],a[2]),1]},f=function(e){var t,n="string"===typeof e?e:"accentColor1",a=(t={},Object(i.a)(t,s.a.PointRegular,n),Object(i.a)(t,s.a.PointNumbered,n),Object(i.a)(t,s.a.Line,n),Object(i.a)(t,s.a.Area,n),t);return Array.isArray(e)&&e.forEach((function(e){var t=e.type,n=e.color;n&&(a[t]=n)})),a},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{sizeNode:l.NODE_SIZE*e,sizeNodeMid:l.MID_NODE_SIZE*e}},g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return{scale:n,url:d(e),colorRgba:h(t),shadowColor:"rgba(0, 0, 0, 0.5)",shadowColorHover:"rgba(0, 0, 0, 1.0)",shadowBlur:5}},v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return{scale:n,url:u(e),fontSize:l.FONT_SIZE,fontFamily:l.FONT_FAMILY,fontWeight:l.FONT_WEIGHT,fontColor:h(i||l.FONT_COLOR_DEFAULT),colorRgba:h(t),shadowColor:"rgba(0, 0, 0, 0.5)",shadowColorHover:"rgba(0, 0, 0, 1.0)",shadowBlur:5}},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{width:l.LINE_WIDTH*t,colorRgba:h(e)}},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{scale:t,width:l.LINE_WIDTH*t,colorRgba:h(e)}},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{width:l.LINE_WIDTH*t,colorRgba:h(e,l.OPACITY_POLYGON_BORDER),fill:h(e,l.OPACITY_POLYGON_FILL)}},w=function(e){var t,n,i=h(e.backgroundColor),a=h(e.bodyColor),r=h(o.a.color.haikuGreen),s=j(e.dash),c=e.themeVariables?h(e.themeVariables.bodyColorLight):[0,0,0,0],l=e.themeVariables?h(e.themeVariables.bodyColorDark):[0,0,0,0];return{leaderline:{strokeStyle:"transparent"===e.backgroundColor?a:i,dash:s,width:2},handleNode:{width:2,fill:r,strokeStyle:i,dash:[0,0]},box:{width:.5,fill:i,strokeStyle:i,dash:[0,0]},anchorNode:{width:2,fill:"transparent"===e.backgroundColor&&e.bodyColor===(null===(t=e.themeVariables)||void 0===t?void 0:t.bodyColorLight)?l:"transparent"===e.backgroundColor&&e.bodyColor===(null===(n=e.themeVariables)||void 0===n?void 0:n.bodyColorDark)?c:i,strokeStyle:a,dash:[0,0]},width:2,colorRgba:a,scale:e.scale||1}},j=function(e){switch(e){case c.a.Large:return[8,4];case c.a.Small:return[4,4];default:return[0,0]}},C=function(e,t,n,a,o){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},function(e,t){return{mode:e,properties:{outlineHoverColor:h(r.a[e]),maskColor:m(t.backgroundColor,r.b[e],.1),elasticScale:l.OUTLINE_HOVER_STROKE_RATIO,desaturationValue:-.3,timeTransitionA:.015,timeTransitionB:.015}}}(e,t),{},function(e,t,n,i){var a=e[t[s.a.PointRegular]],o=e[t[s.a.PointNumbered]],r=e[t[s.a.Line]],c=e[t[s.a.Area]],p=n?l.MOBILE_SCALE:1;return{graphics:{node:y(p),regularPoint:g(i,a,p),numberedPoint:v(i,o,p),iconPoint:{scale:p},line:b(r,p),polygon:O(c,p),textLeaderline:w({backgroundColor:e.titleColor,bodyColor:e.backgroundColor,scale:p}),arrow:x(e.titleColor,p)}}}(t,n,a,o))}},dC0i:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e,t){return{type:t,id:t,nodes:[{long:e.x,lat:e.y}]}}},dJJh:function(e,t,n){"use strict";n.r(t),n.d(t,"TourViewer",(function(){return A}));var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("yFcC"),p=n.n(l),u=n("ERkP"),d=n.n(u),h=n("O94r"),m=n.n(h),f=n("NX3A"),y=n("eCu0"),g=n("V+ka"),v=n("6LyH"),b=n("2tmL"),x=n("caza"),O=n("Xls9"),w=n("uEvS"),j=n("QSI2"),C=n("6Fw+"),k=d.a.createElement,S=function(e){return k(C.a,{isVisible:!0,showDropShadow:!0,transition:"fade",position:"start"},k("div",{className:"jsx-3639164148 map-section"},e.ui),k(p.a,{id:"3639164148"},[".map-section.jsx-3639164148{height:100%;}"]))},I=n("aD1R"),P=d.a.createElement,R=Object(w.b)(Object(y.c)(Object(j.b)((function(e){var t=Object(O.c)();return e.isViewportMinWidth("large")&&!e.printMode?P(u.Fragment,null,P("div",{className:p.a.dynamic([["1090577995",["end"===e.narrativePanelPosition?"2 / 3":"1 / 2",e.immersiveOffset.top,e.immersiveOffset.top,e.immersiveOffset.top,I.a.MEDIA_FOCUSED_MAP_PROPORTION,e.immersiveOffset.top]]])+" map-section"},P("div",{className:p.a.dynamic([["1090577995",["end"===e.narrativePanelPosition?"2 / 3":"1 / 2",e.immersiveOffset.top,e.immersiveOffset.top,e.immersiveOffset.top,I.a.MEDIA_FOCUSED_MAP_PROPORTION,e.immersiveOffset.top]]])+" map-container"},P("div",{className:p.a.dynamic([["1090577995",["end"===e.narrativePanelPosition?"2 / 3":"1 / 2",e.immersiveOffset.top,e.immersiveOffset.top,e.immersiveOffset.top,I.a.MEDIA_FOCUSED_MAP_PROPORTION,e.immersiveOffset.top]]])+" "+(m()("map-wrapper",t.className,{docked:e.isDocked,end:"end"===e.narrativePanelPosition,start:"start"===e.narrativePanelPosition})||"")},e.mapUI))),e.placesUI,t.styles,P(p.a,{id:"1090577995",dynamic:["end"===e.narrativePanelPosition?"2 / 3":"1 / 2",e.immersiveOffset.top,e.immersiveOffset.top,e.immersiveOffset.top,I.a.MEDIA_FOCUSED_MAP_PROPORTION,e.immersiveOffset.top]},[".map-section.__jsx-style-dynamic-selector{position:absolute;width:100%;height:100%;z-index:2;grid-column:".concat("end"===e.narrativePanelPosition?"2 / 3":"1 / 2",";grid-row:1;pointer-events:none;}"),".map-container.__jsx-style-dynamic-selector{position:-webkit-sticky;position:sticky;top:".concat(e.immersiveOffset.top,";height:calc(100vh - ").concat(e.immersiveOffset.top,");}"),".map-wrapper.__jsx-style-dynamic-selector{height:calc( (100vh - ".concat(e.immersiveOffset.top,") * ").concat(I.a.MEDIA_FOCUSED_MAP_PROPORTION," );pointer-events:auto;}"),".ReactModal__Body--open .map-wrapper.docked.__jsx-style-dynamic-selector{position:fixed;top:".concat(e.immersiveOffset.top,";}"),"html:not([dir='rtl']) .ReactModal__Body--open .map-wrapper.docked.start.__jsx-style-dynamic-selector,html[dir='rtl'] .ReactModal__Body--open .map-wrapper.docked.end.__jsx-style-dynamic-selector{left:0;}","html:not([dir='rtl']) .ReactModal__Body--open .map-wrapper.docked.end.__jsx-style-dynamic-selector,html[dir='rtl'] .ReactModal__Body--open .map-wrapper.docked.start.__jsx-style-dynamic-selector{right:0;}"])):P(u.Fragment,null,P(S,{ui:e.mapUI}),P("div",{className:p.a.dynamic([["708718285",[f.a.print.backgroundColor]]])+" places-section"},e.placesUI),P(p.a,{id:"708718285",dynamic:[f.a.print.backgroundColor]},["body.print .places-section.__jsx-style-dynamic-selector{background-color:".concat(f.a.print.backgroundColor,";}")]))})))),E=d.a.createElement,D=Object(w.b)(Object(y.c)(Object(j.b)((function(e){var t="calc(100vh - (".concat(e.immersiveOffset.top," + ").concat(e.bottomOffset,"))");return E(u.Fragment,null,e.isViewportMinWidth("large")&&!e.printMode?E("div",{className:p.a.dynamic([["4097314728",[f.a.responsiveBreakpoints.large,e.immersiveOffset.top,t,e.bottomOffset,f.a.print.backgroundColor,t]]])+" "+(m()("map-section",{docked:e.isDocked})||"")},e.mapUI):E(S,{ui:e.mapUI}),E("div",{className:p.a.dynamic([["4097314728",[f.a.responsiveBreakpoints.large,e.immersiveOffset.top,t,e.bottomOffset,f.a.print.backgroundColor,t]]])+" "+(m()("places-section",{docked:e.isDocked})||"")},e.placesUI),E(p.a,{id:"4097314728",dynamic:[f.a.responsiveBreakpoints.large,e.immersiveOffset.top,t,e.bottomOffset,f.a.print.backgroundColor,t]},["@media (min-width:".concat(f.a.responsiveBreakpoints.large,"){.map-section.__jsx-style-dynamic-selector{position:-webkit-sticky;position:sticky;top:").concat(e.immersiveOffset.top,";height:").concat(t,";margin-bottom:").concat(e.bottomOffset,";z-index:0;grid-row:1;grid-column:1;}body:not(.print) .places-section.__jsx-style-dynamic-selector{pointer-events:none;padding:60vh 0;z-index:1;grid-row:1;grid-column:1;}body.print .places-section.__jsx-style-dynamic-selector{background-color:").concat(f.a.print.backgroundColor,";}.ReactModal__Body--open .map-section.docked.__jsx-style-dynamic-selector{position:fixed;width:100%;}.ReactModal__Body--open .places-section.docked.__jsx-style-dynamic-selector{padding-top:").concat(t,";}}")]))})))),T=d.a.createElement;function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var A=function(e){Object(c.a)(l,e);var t,n=(t=l,function(){var e,n=Object(s.a)(t);if(M()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function l(){return Object(a.a)(this,l),n.apply(this,arguments)}return Object(o.a)(l,[{key:"render",value:function(){var e={styles:T(p.a,{id:"1911256994",dynamic:[f.a.responsiveBreakpoints.large,"end"===this.props.narrativePanelPosition?"1fr auto":"auto 1fr"]},["@media (min-width:".concat(f.a.responsiveBreakpoints.large,"){.map-focused.__jsx-style-dynamic-selector{grid-template-rows:auto;grid-template-columns:auto;}body:not(.print) .media-focused.__jsx-style-dynamic-selector{position:relative;grid-template-rows:auto;grid-template-columns:").concat("end"===this.props.narrativePanelPosition?"1fr auto":"auto 1fr",";min-height:100vh;-webkit-align-content:start;-ms-flex-line-pack:start;align-content:start;}}")]),className:p.a.dynamic([["1911256994",[f.a.responsiveBreakpoints.large,"end"===this.props.narrativePanelPosition?"1fr auto":"auto 1fr"]]])},t={styles:T(p.a,{id:"454344806",dynamic:[this.props.appOffset.top,this.props.storyOffsetContext.storyOffset.navBarHeight]},[".top-sentinel.sentinel-tour.__jsx-style-dynamic-selector{top:calc( (".concat(this.props.appOffset.top," + ").concat(this.props.storyOffsetContext.storyOffset.navBarHeight,") * -1 );}")]),className:p.a.dynamic([["454344806",[this.props.appOffset.top,this.props.storyOffsetContext.storyOffset.navBarHeight]]])},n={styles:T(p.a,{id:"1150433344",dynamic:[f.a.responsiveBreakpoints.large,b.a.STACKED_MEDIA_PANEL_HEIGHT]},["@media (max-width:".concat(f.a.responsiveBreakpoints.large,"){.bottom-sentinel.sentinel-tour.__jsx-style-dynamic-selector{bottom:calc(").concat(b.a.STACKED_MEDIA_PANEL_HEIGHT," - 100vh);}}")]),className:p.a.dynamic([["1150433344",[f.a.responsiveBreakpoints.large,b.a.STACKED_MEDIA_PANEL_HEIGHT]]])},a={styles:T(p.a,{id:"281203105"},[".first-dock-sentinel.sentinel-tour.map-focused.jsx-281203105{top:33vh;}",".first-dock-sentinel.sentinel-tour.media-focused.jsx-281203105{top:0vh;}"]),className:"jsx-281203105"};return T(x.a,Object(i.a)({},this.props,{type:"guided-tour",className:m()(this.props.subtype,e.className),navDotsOrientation:"vertical",areNavDotsIntegrated:"media-focused"===this.props.subtype,topDockedSentinelClassName:m()("top-sentinel","sentinel-tour",t.className),bottomDockedSentinelClassName:m()("bottom-sentinel","sentinel-tour",n.className),firstCreateDockNodeClassName:m()("first-dock-sentinel","sentinel-tour",a.className,{"map-focused":"map-focused"===this.props.subtype,"media-focused":"media-focused"===this.props.subtype}),shouldAlwaysUseNavNumbers:!0}),"media-focused"===this.props.subtype?T(R,{mapUI:this.props.mapUI,placesUI:this.props.placesUI,narrativePanelPosition:this.props.narrativePanelPosition,printMode:this.props.printMode}):T(D,{mapUI:this.props.mapUI,placesUI:this.props.placesUI,bottomOffset:this.props.bottomOffset,printMode:this.props.printMode}),this.props.children,e.styles,t.styles,n.styles,a.styles)}}]),l}(u.PureComponent);t.default=Object(v.a)(Object(y.c)(Object(g.b)(A)))},dq4L:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("ERkP")),o=n("TZT2");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ampFirst,n=void 0!==t&&t,i=e.hybrid,a=void 0!==i&&i,o=e.hasQuery;return n||a&&(void 0!==o&&o)}t.isInAmpMode=r,t.useAmp=function(){return r(a.default.useContext(o.AmpStateContext))}},dsEC:function(e,t,n){"use strict";var i=n("ERkP"),a=n.n(i),o=n("2SGB"),r=n("9ixP"),s=a.a.createElement,c=Object(i.memo)((function(e){return s(r.a.LabeledSwitch,{label:s(o.a,{id:"builder.common.legend"}),switch:s(r.a,e)})})),l=n("HbGN"),p=n("YQpL"),u=n("rHGT"),d=a.a.createElement,h=Object(i.memo)((function(e){var t=e.mapType,n=e.intl,i=Object(l.a)(e,["mapType","intl"]);return d(r.a.LabeledSwitch,{label:d(o.a,{id:"common.search"}),switch:d(r.a,i),icon:u.a,iconTooltip:n.formatMessage({id:"expressmap"===t?"builder.map.search.tooltip":"builder.map.webmap.search.tooltip"})})})),m=Object(p.c)(h),f=a.a.createElement,y=Object(i.memo)((function(e){var t=e.mapType,n=e.intl,i=Object(l.a)(e,["mapType","intl"]),a="tourmap"===t;return f(r.a.LabeledSwitch,{label:f(o.a,{id:a?"component.optionsPanel.locate.guidedTour":"component.optionsPanel.locate"}),switch:f(r.a,i),icon:u.a,iconTooltip:n.formatMessage({id:a?"component.optionsPanel.locate.tooltip":"component.optionsPanel.locate.onMap.tooltip"})})})),g=Object(p.c)(y),v=a.a.createElement,b=Object(i.memo)((function(e){var t=e.intl,n=Object(l.a)(e,["intl"]);return v(r.a.LabeledSwitch,{label:v(o.a,{id:"component.optionsPanel.allowMapNavigation"}),icon:u.a,iconTooltip:t.formatMessage({id:"component.optionsPanel.allowMapNavigation.tooltip"}),switch:v(r.a,n)})})),x=Object(p.c)(b),O=a.a.createElement,w=Object(i.memo)((function(e){var t=e.intl,n=Object(l.a)(e,["intl"]);return O(r.a.LabeledSwitch,{label:O(o.a,{id:"component.optionsPanel.groupNearbyPoints.beta"}),icon:u.a,iconTooltip:t.formatMessage({id:"component.optionsPanel.groupNearbyPoints.tooltip"}),switch:O(r.a,n)})})),j=Object(p.c)(w);t.a={Legend:c,Search:m,Locate:g,Navigation:x,Clustering:j}},dua1:function(e,t,n){"use strict";n.r(t),n.d(t,"VideoViewer",(function(){return C}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("+L/X"),g=n("A7aE"),v=n("gZeU"),b=n("u0WM"),x=n("+PoS"),O=n("7/Cc"),w=h.a.createElement;function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var C=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(j()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"vidRef",h.a.createRef()),Object(l.a)(Object(o.a)(t),"attachRef",(function(e){t.vidRef.current=e,"function"===typeof t.props.setVideoRef&&t.props.setVideoRef(e)})),Object(l.a)(Object(o.a)(t),"updateSrc",(function(){if(t.props.resourceId&&t.props.resourceId.length){var e=Object(x.a)({storyItem:t.props.storyItem,fileName:t.props.resourceId,playableMediaType:"video"});t.setState({src:e})}})),Object(l.a)(Object(o.a)(t),"updateVideoPlay",(function(e){t.vidRef&&t.vidRef.current&&(e&&t.vidRef.current.paused?t.vidRef.current.play():e||t.vidRef.current.paused||t.vidRef.current.pause())})),Object(l.a)(Object(o.a)(t),"getFitColor",(function(){return t.props.storyDesign.storyTheme.themeVariables[t.props.mediaPlacement.fit.color]||t.props.mediaPlacement.fit.color})),t.state={src:t.props.src?t.props.src:""},t}return Object(a.a)(p,[{key:"componentDidMount",value:function(){this.updateSrc(),this.props.isUploading||this.updateVideoPlay(this.props.isPlayingBackgroundVideo),"function"===typeof this.props.observe&&this.vidRef.current&&this.props.observe(this.vidRef.current)}},{key:"componentDidUpdate",value:function(e){e.resourceId!==this.props.resourceId&&this.updateSrc(),this.props.isUploading||this.props.isPaused||this.updateVideoPlay(this.props.isPlayingBackgroundVideo)}},{key:"render",value:function(){return w(d.Fragment,null,this.renderVideo())}},{key:"renderVideo",value:function(){var e="fit"===this.props.mediaPlacement.type&&this.props.mediaPlacement.fit?this.getFitColor():void 0,t=Object(O.c)(this.props.mediaPlacement.fill.x),n=Object(O.c)(this.props.mediaPlacement.fill.y),i=this.props.showCaption?this.props.mediaWrapperCaption||w(b.a,{text:this.props.caption,alignmentLg:this.props.captionAlignmentLg,customCaptionColors:this.props.customCaptionColors}):void 0,a=this.props.isMuted;return a=!this.props.isInline&&a,w(v.a,{aspectRatio:this.props.aspectRatio,heightConstrained:this.props.heightConstrained,widthLimit:400,fillParent:!0,isCompact:this.props.isCompact,caption:i,isFullScreen:this.props.isFullScreen,onToggleFullScreen:this.props.onToggleFullScreen,printMode:this.props.printMode},w("div",{role:"application",className:u.a.dynamic([["4115876169",[e,"".concat(t," ").concat(n)]]])+" "+(f()("video-container",{"fill-parent":this.props.fillParent})||"")},w("video",{controls:this.props.isShowingVideoPlayerControls,muted:a,disablePictureInPicture:!0,controlsList:"nodownload nofullscreen",crossOrigin:"use-credentials",ref:this.attachRef,"data-blockid":this.props.blockId,loop:!0,playsInline:!0,title:this.props.alt,preload:"metadata",className:u.a.dynamic([["4115876169",[e,"".concat(t," ").concat(n)]]])+" "+(f()("video",{"inline-video":this.props.isInline,"blur-video":!(this.props.resourceId||!this.props.isUploading),"is-cropped":this.props.isCropped,"is-fit":"fit"===this.props.mediaPlacement.type})||"")},this.state.src&&this.props.isIntersecting&&w("source",{src:this.state.src,type:"video/mp4",className:u.a.dynamic([["4115876169",[e,"".concat(t," ").concat(n)]]])}))),w(u.a,{id:"4115876169",dynamic:[e,"".concat(t," ").concat(n)]},[".video-container.__jsx-style-dynamic-selector{text-align:center;}",".inline-video.__jsx-style-dynamic-selector{max-height:85vh;}",".video.__jsx-style-dynamic-selector{height:100%;width:100%;object-fit:cover;border-radius:1px;background:transparent;outline:none;}","video.__jsx-style-dynamic-selector::-webkit-media-controls-fullscreen-button{display:none;}",".video-container.fill-parent.__jsx-style-dynamic-selector{height:100%;width:100%;}",".blur-video.__jsx-style-dynamic-selector{-webkit-filter:blur(1rem);filter:blur(1rem);}",".video.is-cropped.is-fit.__jsx-style-dynamic-selector{object-fit:contain;background-color:".concat(e,";}"),".video.is-cropped.__jsx-style-dynamic-selector:not(.is-fit){object-fit:cover;object-position:".concat("".concat(t," ").concat(n),";}")]))}}]),p}(d.PureComponent);Object(l.a)(C,"defaultProps",{mediaPlacement:O.b,isPaused:!1}),t.default=Object(g.b)(Object(y.a)(C))},e3Gu:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("Q/r/"),f=n.n(m),y=n("MEC2");function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(g()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"bold",path:"M10.334 8.676a3.746 3.746 0 0 0-1.284-.483V8.07a2.913 2.913 0 0 0 1.3-.613 1.601 1.601 0 0 0 .6-1.31 1.896 1.896 0 0 0-1.478-1.874A6.024 6.024 0 0 0 7.5 4H3.396v.338a1.993 1.993 0 0 1 .798.156.801.801 0 0 1 .37.78v6.45a.816.816 0 0 1-.396.795 1.96 1.96 0 0 1-.772.143V13H7.67a4.774 4.774 0 0 0 2.71-.688 2.109 2.109 0 0 0-.045-3.636zM6.539 5.045a.709.709 0 0 1 .307-.502.896.896 0 0 1 .577-.14 1.21 1.21 0 0 1 1.133.52 2.7 2.7 0 0 1 .347 1.282 2.37 2.37 0 0 1-.42 1.576c-.282.268-1.123.256-1.944.256zm2.335 7.012a1.86 1.86 0 0 1-1.464.513.652.652 0 0 1-.622-.285.998.998 0 0 1-.249-.514v-3.33a4.617 4.617 0 0 1 1.877.266 2.043 2.043 0 0 1 .982 1.887 2.437 2.437 0 0 1-.524 1.463z",viewBox:"0 0 16 16"})}return a}(y.a);function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var x=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(b()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"italic",path:"M10.264 4l-.229.92a1.666 1.666 0 0 0-.752.232 1.583 1.583 0 0 0-.38.786l-1.338 4.859a5.63 5.63 0 0 0-.125.531 2.038 2.038 0 0 0-.038.316.454.454 0 0 0 .24.454 1.97 1.97 0 0 0 .704.134L8.223 13H4.838l.253-.897a1.384 1.384 0 0 0 .667-.175 1.524 1.524 0 0 0 .465-.842l1.305-4.817q.094-.369.128-.521a1.387 1.387 0 0 0 .034-.3.483.483 0 0 0-.215-.456 1.92 1.92 0 0 0-.761-.158L6.846 4z",viewBox:"0 0 16 16"})}return a}(y.a),O=n("CeBE"),w=n("N1o1");function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var C=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(j()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"heading-1-rtl",path:"M10.1833815,5.24293785 L7.76878613,5.24293785 L7.76878613,4 L14,4 L14,5.24293785 L11.5854046,5.24293785 L11.5854046,12 L10.1833815,12 L10.1833815,5.24293785 Z M3,7.46246973 L3,6.37772397 L3.93468208,6.37772397 L3.93468208,4.8071025 L5.24768786,4.8071025 L5.24768786,6.37772397 L6.58294798,6.37772397 L6.58294798,7.46246973 L5.24768786,7.46246973 L5.24768786,9.98224374 C5.24768786,10.2232996 5.29034158,10.4229209 5.37565029,10.5811138 C5.460959,10.7393067 5.65197347,10.8184019 5.94869942,10.8184019 C6.03771721,10.8184019 6.1341517,10.8089858 6.23800578,10.7901533 C6.34185986,10.7713209 6.43458533,10.7430726 6.51618497,10.7054076 L6.56069364,11.7675545 C6.44200326,11.8127524 6.30106055,11.8485336 6.13786127,11.8748991 C5.974662,11.9012646 5.81888321,11.9144471 5.67052023,11.9144471 C5.31444909,11.9144471 5.02514562,11.8636002 4.80260116,11.7619048 C4.58005669,11.6602093 4.4038783,11.520851 4.27406069,11.3438257 C4.14424309,11.1668003 4.05522664,10.9634125 4.00700867,10.7336562 C3.9587907,10.5038998 3.93468208,10.257198 3.93468208,9.99354318 L3.93468208,7.46246973 L3,7.46246973 Z",viewBox:"0 0 16 16"})}return a}(y.a),k=n("u4I3");function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var I=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(S()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"heading-2-rtl",path:"M10.7806113,10.9030471 L9.1127117,10.9030471 L9.1127117,7.39196676 L7.89332295,7.39196676 L7.89332295,6 L12,6 L12,7.39196676 L10.7806113,7.39196676 L10.7806113,10.9030471 Z M5.97625073,11 C5.48101757,11 5.11427022,10.8949687 4.87599766,10.684903 C4.63772511,10.4748374 4.51859062,10.1482017 4.51859062,9.70498615 L4.51859062,8.40304709 L4,8.40304709 L4,7.26038781 L4.51158264,7.26038781 L4.51158264,6.4432133 L6.08137045,6.4432133 L6.08137045,7.26038781 L6.88028032,7.26038781 L6.88028032,8.40304709 L6.08137045,8.40304709 L6.08137045,9.37257618 C6.08137045,9.54801565 6.11991396,9.6668972 6.19700214,9.72922438 C6.27409032,9.79155156 6.38037697,9.82271468 6.51586529,9.82271468 C6.56725741,9.82271468 6.62098473,9.81809792 6.67704886,9.80886427 C6.73311299,9.79963061 6.77749643,9.79039709 6.81020051,9.78116343 L6.81020051,10.8753463 C6.72610431,10.9122809 6.6081378,10.9422898 6.45629745,10.965374 C6.3044571,10.9884581 6.14444312,11 5.97625073,11 Z",viewBox:"0 0 16 16"})}return a}(y.a),P=n("VZap");function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var E=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(R()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"numbered-list-rtl",path:"M9.333 5.499v.666H2.667V5.5zM9.333 10.832v.667H2.667v-.667zM11.876 6.832v-2.08l-.528.408L11 4.684 11.932 4h.616v2.832zM11.032 12.165v-.56l1.104-1c.07-.066.125-.134.168-.204a.434.434 0 0 0 .064-.232.329.329 0 0 0-.096-.246.35.35 0 0 0-.256-.094.351.351 0 0 0-.274.118.533.533 0 0 0-.126.31l-.644-.088a.992.992 0 0 1 .686-.85c.124-.041.255-.062.394-.062.13 0 .257.018.38.052a.99.99 0 0 1 .328.16.799.799 0 0 1 .23.272c.057.11.086.238.086.384a.877.877 0 0 1-.15.5c-.047.07-.1.134-.16.194s-.122.12-.186.178l-.656.584h1.156v.584h-2.048z",viewBox:"0 0 16 16"})}return a}(y.a),D=n("LH3e");function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var M=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(T()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"bulleted-list-rtl",path:"M13.333 4.667V6H12V4.667zM13.333 10v1.333H12V10zM10 4.667v.666H3.333v-.666zM10 10v.667H3.333V10z",viewBox:"0 0 16 16"})}return a}(y.a),A=n("T7KB"),N=n("mETx"),L=n("NX3A"),G=n("sczD"),_=n("WXRn"),B=n("IhTG"),W=h.a.createElement;function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var z={bold:"ql-bold",italic:"ql-italic",link:"ql-link",color:"ql-color","custom-input":"ql-color"},H=function(e){Object(c.a)(h,e);var t,p=(t=h,function(){var e,n=Object(s.a)(t);if(U()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function h(e){var t;return Object(i.a)(this,h),t=p.call(this,e),Object(l.a)(Object(o.a)(t),"customTextColors",[]),Object(l.a)(Object(o.a)(t),"init",(function(e){var n=e.default;t.useCustomIconsForToolbarButtons(n);var i=t.editorRef.current;if(i){var a=t.props.variant,o={theme:"inline"===a||"plain"===a?"bubble":"snow",modules:F({},t.getKeyboardOptions(),{toolbar:t.getToolbarOptions()}),placeholder:t.props.placeholder},r=t.props.bounds?{bounds:t.props.bounds}:{};if(t.quill=new n(i,F({},o,{},r,{},t.props.initOptions||{})),t.props.id){var s=n.import("parchment"),c=new s.Attributor.Class("smTextColor","sm-text-color",{scope:s.Scope.INLINE});n.register(c,!0),t.customTextColorChip=document.createElement("span"),t.customTextColorChip.className="custom-color-preview",t.customTextColorInput=document.createElement("input"),t.customTextColorInput.className="custom-color-input",t.customTextColorInput.type="text",t.customTextColorInput.placeholder="#087f9b",t.customTextColorInput.maxLength=7,t.customTextColorInput.minLength=4,t.customTextColorInput.pattern="^#(?:[0-9a-fA-F]{3}){1,2}$",t.customTextColorInput.addEventListener("input",(function(e){var n=t.customTextColorInput.value;if(n){var i=n.replace(/^(?!#.*$).*/,(function(e){return"#".concat(e)}));n!==i&&(t.customTextColorInput.value=i)}t.customTextColorInput.validity.valid&&t.customTextColorInput.value.length>1?(t.customTextColorChip.style.backgroundColor=t.customTextColorInput.value,t.customTextColorChip.style.visibility="visible",t.customTextColorChip.style.border="1px solid ".concat(L.a.color.ashGrey),t.customTextColorChip.style.pointerEvents="inherit",t.customTextColorChip.style.cursor="pointer"):(t.customTextColorChip.style.backgroundColor="transparent",t.customTextColorChip.style.visibility="hidden",t.customTextColorChip.style.pointerEvents="none",t.customTextColorChip.style.cursor="default")})),t.customTextColorInput.addEventListener("click",(function(e){e.stopPropagation()})),t.customTextColorInput.addEventListener("change",(function(){t.handleTextColor("custom-color")}));var l=document.querySelectorAll('div[data-blockId="'.concat(t.props.id,'"] .ql-toolbar .ql-color .ql-picker-options span[data-value="custom-color"]'));l.length&&l.forEach((function(e){e.appendChild(t.customTextColorInput),t.customTextColorChip&&e.appendChild(t.customTextColorChip)}))}t.quillToolbar=t.quill.getModule("toolbar"),t.quillToolbar&&(t.quillToolbar.addHandler("header",t.handleHeadingConversion),t.quillToolbar.addHandler("list",t.handleListConversion),t.quillToolbar.addHandler("blockquote",t.handleQuoteConversion),t.quillToolbar.addHandler("color",t.handleTextColor));var p=t.quill.theme.tooltip;if(p){var u=p.root.querySelector("input[data-link]");u.type="url",t.props.tooltipLinkPlaceholder&&(u.dataset.link=t.props.tooltipLinkPlaceholder)}if(t.props.disabledToolbarOptions)if(t.quill.theme.tooltip)Object.keys(t.props.disabledToolbarOptions).forEach((function(e){t.props.disabledToolbarOptions[e].forEach((function(n){var i=".".concat(e," .ql-toolbar .ql-formats .").concat(z[n]);"custom-input"===n&&(i=".".concat(e," .ql-toolbar .ql-formats .").concat(z[n]," .custom-color-input"));var a=t.quill.container.querySelector(i);if(a)if("custom-input"===n&&"string"===typeof t.props.disabledColorBtnTooltip){var o=a;o.disabled=!0,o.style.opacity="0.4",o.setAttribute("title",t.props.disabledColorBtnTooltip)}else"color"===n?a.setAttribute("data-disabled","true"):a.disabled=!0}))}));n.import("formats/link").sanitize=function(e){return/:/.test(e)?G.a.sanitizeUrl(e):"https://".concat(e)},t.quill.on("selection-change",(function(e,n,i){if(e){var a=t.quill.getFormat(),o=a.hasOwnProperty("smTextColor"),r=t.quill.container.querySelector(".ql-bubble .ql-toolbar .ql-formats .ql-color.ql-color-picker:not([data-disabled])");r&&(o&&"clear-custom-color"!==a.smTextColor?r.style.backgroundColor=L.a.color.beauBlue:r.style.backgroundColor=L.a.color.white)}null!==e&&null===n&&"function"===typeof t.props.onFocus&&t.props.onFocus()})),t.quill.on("text-change",(function(e,n,a){if(t.props.charLimit&&t.quill.getLength()>t.props.charLimit){var o,r=e.ops;o=1===r.length?[{delete:r[0].insert.length}]:[r[0],{delete:r[1].insert.length}],t.quill.updateContents({ops:o})}if(t.props.onTextChange&&"user"===a)return t.quill.removeFormat(0,t.quill.getLength()-1),void t.props.onTextChange(t.quill.getText());if(i&&i.childNodes&&i.childNodes[0]){var s=i.childNodes[0].innerHTML,c=G.a.sanitize(s);t.detectCustomTextColorsChange(s),s!==c?(s=c,t.quill.clipboard.dangerouslyPasteHTML(s)):"function"===typeof t.props.onHtmlChange&&t.props.onHtmlChange(s)}})),t.props.initHtml?t.quill.setContents(t.quill.clipboard.convert(t.props.initHtml),"silent"):t.props.initText&&t.quill.setText(t.props.initText,"silent"),t.props.shouldAutoFocus&&t.quill.focus(),t.props.shouldAutoSelectAll&&t.quill.setSelection(0,t.quill.getLength()),t.props.postQuillInit&&t.props.postQuillInit(t.quill)}})),Object(l.a)(Object(o.a)(t),"getToolbarOptions",(function(){var e=t.props.variant;return e&&h.CONFIGS[e]?Object(_.b)()&&"inline"===e&&(Array.isArray(h.CONFIGS[e]),1)&&!t.props.shouldShowConversionButtons?h.CONFIGS[e].slice().reverse():h.CONFIGS[e]:h.CONFIGS.block})),Object(l.a)(Object(o.a)(t),"getKeyboardOptions",(function(){return"plain"===t.props.variant?{keyboard:{bindings:{bold:{key:"B",shortKey:!0,handler:function(){return!1}},italic:{key:"I",shortKey:!0,handler:function(){return!1}},underline:{key:"U",shortKey:!0,handler:function(){return!1}},tab:{key:9,handler:function(){return!0}},enter:{key:13,handler:function(){return!t.props.shouldDisableEnter}}}}}:{}})),Object(l.a)(Object(o.a)(t),"useCustomIconsForToolbarButtons",(function(e){var n=e.import("ui/icons");n.bold=f.a.renderToString(W(v,{color:L.a.color.darkGreen,width:"2.2rem",height:"auto"})),n.italic=f.a.renderToString(W(x,{color:L.a.color.darkGreen,width:"2.2rem",height:"auto"})),n.link=f.a.renderToString(W(O.a,{color:L.a.color.darkGreen,width:"1.4rem",height:"auto"})),n.color=f.a.renderToString(W(w.a,{color:L.a.color.darkGreen,width:"1.8rem",height:"auto"})),t.props.shouldShowConversionButtons&&(n.header[2]=Object(_.b)()?f.a.renderToString(W(C,{color:L.a.color.darkGreen,width:"2.8rem",height:"auto"})):f.a.renderToString(W(k.a,{color:L.a.color.darkGreen,width:"2.8rem",height:"auto"})),n.header[3]=Object(_.b)()?f.a.renderToString(W(I,{color:L.a.color.darkGreen,width:"2.8rem",height:"auto"})):f.a.renderToString(W(P.a,{color:L.a.color.darkGreen,width:"2.8rem",height:"auto"})),n.list.ordered=Object(_.b)()?f.a.renderToString(W(E,{color:L.a.color.darkGreen,width:"2.8rem",height:"auto"})):f.a.renderToString(W(D.a,{color:L.a.color.darkGreen,width:"2.8rem",height:"auto"})),n.list.bullet=Object(_.b)()?f.a.renderToString(W(M,{color:L.a.color.darkGreen,width:"2.8rem",height:"auto"})):f.a.renderToString(W(A.a,{color:L.a.color.darkGreen,width:"2.8rem",height:"auto"})),n.blockquote=f.a.renderToString(W(N.a,{color:L.a.color.darkGreen,width:"2.8rem",height:"auto"})))})),Object(l.a)(Object(o.a)(t),"handleHeadingConversion",(function(e){var n=t.quillToolbar.controls[5][1],i=t.quillToolbar.controls[6][1];"function"===typeof t.props.onConvert&&("2"===e?t.props.onConvert("h2"):"3"===e?t.props.onConvert("h3"):(n.classList.contains("ql-active")&&n.classList.toggle("ql-active"),i.classList.contains("ql-active")&&i.classList.toggle("ql-active"),t.props.onConvert("paragraph")))})),Object(l.a)(Object(o.a)(t),"handleListConversion",(function(e){var n=t.quillToolbar.controls[7][1],i=t.quillToolbar.controls[8][1];"function"===typeof t.props.onConvert&&("ordered"===e?t.props.onConvert("numbered-list"):"bullet"===e?t.props.onConvert("bullet-list"):(n.classList.contains("ql-active")&&n.classList.toggle("ql-active"),i.classList.contains("ql-active")&&i.classList.toggle("ql-active"),t.props.onConvert("paragraph")))})),Object(l.a)(Object(o.a)(t),"handleQuoteConversion",(function(){var e=t.quillToolbar.controls[9][1];if("function"===typeof t.props.onConvert){if(e.classList.contains("ql-active"))return e.classList.toggle("ql-active"),void t.props.onConvert("paragraph");t.props.onConvert("quote")}})),Object(l.a)(Object(o.a)(t),"handleTextColor",(function(e){"clear-custom-color"===e&&t.quill.format("smTextColor",!1),"custom-color"===e&&t.customTextColorInput.validity.valid&&t.customTextColorInput.value.length>1?t.quill.format("smTextColor",t.customTextColorInput.value.replace(/#/,"")):t.quill.format("smTextColor","".concat(e))})),Object(l.a)(Object(o.a)(t),"detectCustomTextColorsChange",(function(e){var n=(e.match(/sm-text-color-(?:[0-9a-fA-F]{3}){1,2}/g)||[]).map((function(e){return e.replace(/sm-text-color-/,"")})).filter(B.a);(n.length!==t.customTextColors.length||n.filter((function(e){return!t.customTextColors.includes(e)})).length>0)&&(t.customTextColors=n,"function"===typeof t.props.onCustomTextColorsChange&&t.props.onCustomTextColorsChange(t.customTextColors))})),t.editorRef=Object(d.createRef)(),t}return Object(a.a)(h,[{key:"componentDidMount",value:function(){Promise.all([n.e(26),n.e(0),n.e(56)]).then(n.t.bind(null,"1aGC",7)).then(this.init).catch((function(e){console.error("Quill is not successfully loaded.",e.message)}))}},{key:"componentDidUpdate",value:function(e){this.props.shouldCompareInitialContent&&e.initHtml!==this.props.initHtml&&this.props.initHtml&&this.quill.clipboard.dangerouslyPasteHTML(this.props.initHtml),this.props.shouldCompareInitialContent&&e.initText!==this.props.initText&&this.props.initText&&this.quill.setText(this.props.initText)}},{key:"render",value:function(){var e=this.props.selector;return W(d.Fragment,null,this.props.render(this.editorRef),e&&W(u.a,{id:"1814789604",dynamic:[e,e,e,e]},["".concat(e,".ql-container .ql-clipboard,").concat(e,".ql-container .ql-bubble .ql-hidden,").concat(e,".ql-container .ql-bubble .ql-tooltip,").concat(e,".ql-container .ql-tooltip{display:none;}")]))}}]),h}(d.PureComponent);Object(l.a)(H,"defaultProps",{variant:"block",shouldAutoFocus:!1,shouldShowConversionButtons:!1,shouldCompareInitialContent:!0}),Object(l.a)(H,"CONFIGS",{plain:!1,inline:["bold","italic","link"],block:["bold","italic",{list:"ordered"},{list:"bullet"},"align","link"]});t.a=H},eCu0:function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"c",(function(){return R}));var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("pWxA"),s=n("K/z8"),c=n("sRHE"),l=n("8K1b"),p=n("zjfJ"),u=n("ERkP"),d=n.n(u),h=n("mvvZ"),m=n("zygG"),f=n("7Zgl"),y=n("NX3A"),g={"extra-small":{lower:0,upper:Object(f.i)(y.a.responsiveBreakpoints.small)},small:{lower:Object(f.i)(y.a.responsiveBreakpoints.small),upper:Object(f.i)(y.a.responsiveBreakpoints.medium)},medium:{lower:Object(f.i)(y.a.responsiveBreakpoints.medium),upper:Object(f.i)(y.a.responsiveBreakpoints.large)},large:{lower:Object(f.i)(y.a.responsiveBreakpoints.large),upper:Object(f.i)(y.a.responsiveBreakpoints.extraLarge)},"extra-large":{lower:Object(f.i)(y.a.responsiveBreakpoints.extraLarge),upper:Object(f.i)(y.a.responsiveBreakpoints.extraExtraLarge)},"extra-extra-large":{lower:Object(f.i)(y.a.responsiveBreakpoints.extraExtraLarge),upper:1/0}},v=function(e,t){var n=g[e];return!!n&&t>=n.lower},b=function(e,t){var n=g[e];return!!n&&t<n.upper},x=function(e){for(var t=0,n=Object.entries(g);t<n.length;t++){var i=Object(m.a)(n[t],2),a=i[0],o=i[1];if(e>=o.lower&&e<o.upper)return a}return"extra-extra-large"},O=function(e){var t=x(e);switch(t){case"extra-small":return"small";case"extra-large":case"extra-extra-large":return"large";default:return t}},w=d.a.createElement;function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function C(e){return function(){var t,n=Object(c.a)(e);if(k()){var i=Object(c.a)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return Object(s.a)(this,t)}}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S={isTouchDevice:!1,screenWidth:"large",isPortrait:!1,iOSVersion:0,isSafari:!1,isViewportMinWidth:function(e){return!1},isViewportMaxWidth:function(e){return!1}},I=Object(u.createContext)(S),P=function(e){Object(l.a)(n,e);var t=C(n);function n(e){var i;return Object(a.a)(this,n),i=t.call(this,e),Object(p.a)(Object(r.a)(i),"onTouchStart",(function(){i.setState({isTouchDevice:!0}),document.removeEventListener("touchstart",i.onTouchStart)})),Object(p.a)(Object(r.a)(i),"isSafari",(function(){var e=navigator?navigator.userAgent:void 0;return!!e&&!!(/Safari\//i.test(e)&&/^((?!Chrome).)*$/i.test(e)&&/^((?!Android).)*$/i.test(e))})),Object(p.a)(Object(r.a)(i),"getIOSVersion",(function(){if(!(!!window.navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)))return 0;var e,t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return void 0!==t&&null!==t?(e=[parseInt(t[1],10),parseInt(t[2],10)],parseFloat(e.join("."))):0})),Object(p.a)(Object(r.a)(i),"onResize",Object(h.c)((function(){var e=window.innerWidth<window.innerHeight;e!==i.state.isPortrait&&i.setState({isPortrait:e});var t=O(window.innerWidth);t!==i.state.screenWidth&&i.setState({screenWidth:t});var n=x(window.innerWidth);n!==i.state.specificViewportWidth&&i.setState({specificViewportWidth:n,isViewportMinWidth:function(e){return i.isViewportMinWidth(e)},isViewportMaxWidth:function(e){return i.isViewportMaxWidth(e)}})}),100)),Object(p.a)(Object(r.a)(i),"isViewportMinWidth",(function(e){return v(e,window.innerWidth)})),Object(p.a)(Object(r.a)(i),"isViewportMaxWidth",(function(e){return b(e,window.innerWidth)})),i.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},S,{specificViewportWidth:"extra-extra-large"},{isPortrait:window.innerWidth<window.innerHeight,screenWidth:O(window.innerWidth),iOSVersion:i.getIOSVersion(),isSafari:i.isSafari(),specificViewportWidth:x(window.innerWidth)},{isViewportMinWidth:i.isViewportMinWidth,isViewportMaxWidth:i.isViewportMaxWidth}),i}return Object(o.a)(n,[{key:"componentDidMount",value:function(){"undefined"!==typeof document&&document.addEventListener("touchstart",this.onTouchStart),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){"undefined"!==typeof document&&document.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("resize",this.onResize)}},{key:"render",value:function(){return w(I.Provider,{value:this.state},this.props.children)}}]),n}(u.PureComponent),R=function(e){return function(t){Object(l.a)(r,t);var n=C(r);function r(){return Object(a.a)(this,r),n.apply(this,arguments)}return Object(o.a)(r,[{key:"render",value:function(){var t=this;return w(I.Consumer,null,(function(n){return w(e,Object(i.a)({},t.props,n))}))}}]),r}(u.PureComponent)};t.b=I},eEo3:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("NX3A"),h=n("A7aE"),m=n("O94r"),f=n.n(m),y=n("IXx0"),g=u.a.createElement;function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(v()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(e){var t;return Object(i.a)(this,c),(t=n.call(this,e)).creditsNode=Object(p.createRef)(),t}return Object(a.a)(c,[{key:"componentDidMount",value:function(){"function"===typeof this.props.handleDragDrop&&this.creditsNode.current&&(this.dragDropGroup=Object(y.a)({element:this.creditsNode.current,draggableItemSelector:".draggable",handleSelector:".dnd-handle",ghostClass:"dnd-ghost-attr",dragClass:"dnd-drag-attr",id:"credits-sort-group",groupsToDropFrom:["credits-sort-group"],handler:this.props.handleDragDrop,shouldUseInvertedSwapZones:!0}))}},{key:"componentWillUnmount",value:function(){this.dragDropGroup&&"function"===typeof this.dragDropGroup.destroy&&this.dragDropGroup.destroy()}},{key:"render",value:function(){var e=this.props.storyDesign.storyTheme.themeVariables.secondaryBackgroundColor;return g(p.Fragment,null,g("div",{ref:this.creditsNode,"data-blockid":this.props.blockId,className:l.a.dynamic([["2374172697",[d.a.spacing.lg,d.a.spacing.sm,e,d.a.responsiveBreakpoints.medium,d.a.spacing.xl,d.a.print.backgroundColor]],["903551683",[e,d.a.color.haikuGreen]]])+" "+(f()("credits-container",this.props.className)||"")},this.props.children),g(l.a,{id:"2374172697",dynamic:[d.a.spacing.lg,d.a.spacing.sm,e,d.a.responsiveBreakpoints.medium,d.a.spacing.xl,d.a.print.backgroundColor]},[".credits-container.__jsx-style-dynamic-selector{padding:".concat(d.a.spacing.lg," 0 ").concat(d.a.spacing.sm,";background-color:").concat(e,";}"),"@media (min-width:".concat(d.a.responsiveBreakpoints.medium,"){.credits-container.__jsx-style-dynamic-selector{padding:").concat(d.a.spacing.xl," 0;}}"),"body.print .credits-container.__jsx-style-dynamic-selector{background-color:".concat(d.a.print.backgroundColor,";}")]),g(l.a,{id:"903551683",dynamic:[e,d.a.color.haikuGreen]},[".dnd-drag-attr .plus-button-container,.dnd-drag-attr .action-btns-container{visibility:hidden;}",".dnd-drag-attr{height:unset !important;background-color:".concat(e,";max-height:6rem;overflow:hidden;}"),".dnd-ghost-attr{width:65%;height:0.2rem;margin:auto;padding:1px;overflow:hidden;background:".concat(d.a.color.haikuGreen,";}"),"body.user-is-dragging .action-btns-container{visibility:hidden;}","body:not(.user-is-dragging) .action-btns-container{visibility:visible;}","body.user-is-dragging .attribution:hover{background:transparent;}"]))}}]),c}(p.PureComponent);t.a=Object(h.b)(b)},eRU7:function(e,t,n){"use strict";var i=n("ERkP"),a=function(e,t,n){var i,a=null===(i=e.container)||void 0===i?void 0:i.querySelector(n);a&&(a.style.display=t?"":"none")},o=Object(i.memo)((function(e){var t=e.view,n=e.home,o=e.prevent,r=Object(i.useRef)([]),s=Object(i.useRef)([]);return Object(i.useEffect)((function(){var e=!o;!function(e,t){[".esri-zoom",".esri-navigation-toggle",".esri-compass",".esri-locate",".esri-expand",".esri-home"].forEach((function(n){return a(e,t,n)}))}(t,e),function(e,t){e.constraints.hasOwnProperty("rotationEnabled")&&(e.constraints.rotationEnabled=t)}(t,e),function(e,t){e.navigation.browserTouchPanEnabled=t,e.navigation.mouseWheelZoomEnabled=t}(t,e),function(e,t,n){if(t)return n.forEach((function(e){null===e||void 0===e||e.remove()})),void(n.length=0);var i=function(e){e.stopPropagation()};n.push(e.on("key-down",(function(e){["+","-","Shift","_","=","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","P","p","N","n","W","w","A","a","S","s","D","d","J","j","U","u"].includes(e.key)&&i(e)}))),n.push(e.on("mouse-wheel",i)),n.push(e.on("double-click",i)),n.push(e.on("double-click",["Control"],i)),n.push(e.on("drag",i)),n.push(e.on("drag",["Shift"],i)),n.push(e.on("drag",["Shift","Control"],i))}(t,e,r.current),n&&function(e,t,n,i){if(n)return i.forEach((function(e){null===e||void 0===e||e.remove()})),void(i.length=0);i.push(e.popup.on("trigger-action",(function(t){"zoom-to-feature"===t.action.id&&a(e,!0,".esri-home")}))),i.push(e.popup.watch("visible",(function(n){n||(a(e,!1,".esri-home"),null===t||void 0===t||t.go())}))),i.push(null===t||void 0===t?void 0:t.viewModel.on("go",(function(){a(e,!1,".esri-home")})))}(t,n,e,s.current)}),[o]),null}));t.a=o},erT5:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("YQpL"),f=n("NX3A"),y=n("o8Z9"),g=n("OQoL"),v=n("Z4N4"),b=n("WXRn"),x=n("gzH7"),O=n("utbi"),w=n("t7DY"),j=h.a.createElement;function C(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var k=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(C()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"renderAllTools",(function(){return e.props.configs.map((function(t,n,i){return j(d.Fragment,{key:n},t.map(e.renderButton),n!==i.length-1&&j(O.a,null))}))})),Object(l.a)(Object(o.a)(e),"renderButton",(function(t,n){return Array.isArray(t)?j(d.Fragment,{key:"frag-".concat(n)},t.map(e.renderButton)):e.renderToolButton(t)})),Object(l.a)(Object(o.a)(e),"renderToolButton",(function(t){var n={width:f.a.spacing.xxs,height:f.a.spacing.xxs},i=t.mode,a=t.ariaLabel,o=t.icon;switch(i){case w.b.UNDO:return j(x.a,{onClick:e.props.undo,isDisabled:e.props.isDisabled||!e.props.canUndo,ariaLabel:a},Object(b.b)()?j(y.a,n):j(g.a,n));case w.b.REDO:return j(x.a,{onClick:e.props.redo,isDisabled:e.props.isDisabled||!e.props.canRedo,ariaLabel:a},Object(b.b)()?j(g.a,n):j(y.a,n));default:return j(x.a,{onClick:e.getOnClick(i),isActive:i===e.props.mode,isDisabled:e.props.isDisabled||e.props.disabledModes&&e.props.disabledModes.includes(i),ariaLabel:a},j(o,n))}})),Object(l.a)(Object(o.a)(e),"getOnClick",(function(t){return function(){e.props.onSelected(t)}})),e}return Object(a.a)(p,[{key:"render",value:function(){return j("div",{className:u.a.dynamic([["1975514188",[v.a.gapped("column",f.a.spacing.xxxs),f.a.spacing.xxxs]]])+" editor-toolbar"},this.renderAllTools(),j(u.a,{id:"1975514188",dynamic:[v.a.gapped("column",f.a.spacing.xxxs),f.a.spacing.xxxs]},[".editor-toolbar.__jsx-style-dynamic-selector{".concat(v.a.gapped("column",f.a.spacing.xxxs),";height:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 ").concat(f.a.spacing.xxxs,";}")]))}}]),p}(d.PureComponent);t.a=Object(m.c)(k)},ew4y:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("YQpL"),f=n("WXRn"),y=n("NX3A"),g=n("Z4N4"),v=n("nylY"),b=h.a.createElement;function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var O=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(x()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"onClose",(function(){e.props.onCancel()})),e}return Object(a.a)(p,[{key:"render",value:function(){var e=Object(f.b)()?"ltr":"rtl";return b(d.Fragment,null,this.props.isShowing&&b("div",{className:u.a.dynamic([["3054446369",[y.a.spacing.xxs,y.a.spacing.xxs,y.a.spacing.xl,y.a.color.white,y.a.spacing.xxxxs,g.a.hexA("#637272",.59),g.a.typography.body14(),e,y.a.spacing.xxs,y.a.spacing.xxs,y.a.spacing.xxs,y.a.color.haikuGreen]]])+" loading-modal"},b("div",{className:u.a.dynamic([["3054446369",[y.a.spacing.xxs,y.a.spacing.xxs,y.a.spacing.xl,y.a.color.white,y.a.spacing.xxxxs,g.a.hexA("#637272",.59),g.a.typography.body14(),e,y.a.spacing.xxs,y.a.spacing.xxs,y.a.spacing.xxs,y.a.color.haikuGreen]]])+" middle"},b("h6",{className:u.a.dynamic([["3054446369",[y.a.spacing.xxs,y.a.spacing.xxs,y.a.spacing.xl,y.a.color.white,y.a.spacing.xxxxs,g.a.hexA("#637272",.59),g.a.typography.body14(),e,y.a.spacing.xxs,y.a.spacing.xxs,y.a.spacing.xxs,y.a.color.haikuGreen]]])+" media-name"},this.props.mediaName),b("button",{type:"button",onClick:this.onClose,title:this.props.intl.formatMessage({id:"common.close"}),className:u.a.dynamic([["3054446369",[y.a.spacing.xxs,y.a.spacing.xxs,y.a.spacing.xl,y.a.color.white,y.a.spacing.xxxxs,g.a.hexA("#637272",.59),g.a.typography.body14(),e,y.a.spacing.xxs,y.a.spacing.xxs,y.a.spacing.xxs,y.a.color.haikuGreen]]])+" close-btn"},b(v.a,null))),b("div",{className:u.a.dynamic([["3054446369",[y.a.spacing.xxs,y.a.spacing.xxs,y.a.spacing.xl,y.a.color.white,y.a.spacing.xxxxs,g.a.hexA("#637272",.59),g.a.typography.body14(),e,y.a.spacing.xxs,y.a.spacing.xxs,y.a.spacing.xxs,y.a.color.haikuGreen]]])+" progress-bar-wrapper"},b("div",{style:{width:this.props.progress},className:u.a.dynamic([["3054446369",[y.a.spacing.xxs,y.a.spacing.xxs,y.a.spacing.xl,y.a.color.white,y.a.spacing.xxxxs,g.a.hexA("#637272",.59),g.a.typography.body14(),e,y.a.spacing.xxs,y.a.spacing.xxs,y.a.spacing.xxs,y.a.color.haikuGreen]]])+" progress-bar"})),b(u.a,{id:"3054446369",dynamic:[y.a.spacing.xxs,y.a.spacing.xxs,y.a.spacing.xl,y.a.color.white,y.a.spacing.xxxxs,g.a.hexA("#637272",.59),g.a.typography.body14(),e,y.a.spacing.xxs,y.a.spacing.xxs,y.a.spacing.xxs,y.a.color.haikuGreen]},["html[dir='rtl'] .close-btn.__jsx-style-dynamic-selector{float:left;margin-left:".concat(y.a.spacing.xxs,";}"),"html[dir='rtl'] .media-name.__jsx-style-dynamic-selector{padding-right:".concat(y.a.spacing.xxs,";}"),".loading-modal.__jsx-style-dynamic-selector{width:36rem;height:".concat(y.a.spacing.xl,";background-color:").concat(y.a.color.white,";border-radius:").concat(y.a.spacing.xxxxs,";box-shadow:0 1.7rem 3.3rem -1.3rem ").concat(g.a.hexA("#637272",.59),";position:absolute;top:50%;left:50%;margin:-3.2rem 0 0 -18rem;z-index:3;}"),".middle.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:100%;}",".media-name.__jsx-style-dynamic-selector{".concat(g.a.typography.body14()," margin:0 auto;max-width:31rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;direction:").concat(e,";padding-left:").concat(y.a.spacing.xxs,";}"),".close-btn.__jsx-style-dynamic-selector{float:right;margin-right:".concat(y.a.spacing.xxs,";visibility:hidden;}"),".loading-modal.__jsx-style-dynamic-selector:hover .close-btn.__jsx-style-dynamic-selector{visibility:visible;}",".progress-bar-wrapper.__jsx-style-dynamic-selector{height:".concat(y.a.spacing.xxs,";width:36rem;position:absolute;bottom:0;}"),".progress-bar.__jsx-style-dynamic-selector{background-color:".concat(y.a.color.haikuGreen,";height:inherit;}")])))}}]),p}(d.PureComponent);t.a=Object(m.c)(O)},eytW:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e,t){var n=e.split(".").pop();return"mp3"!==n&&"mpeg"!==n&&(n=t.slice(t.indexOf("/")+1)),["".concat(Date.now().toString(),".").concat(n),n]}},"f9/c":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o}));var i=function(e,t){var n=RegExp("".concat(t).concat("@","(.*)"),"gi").exec(e);return n&&n.length>1?n[1]:""},a=function(e){var t=RegExp("(.*?)".concat("@",".*")).exec(e);return(t&&t.length>1?t[1]:"")||e},o=function(e,t){return"".concat(e).concat("@").concat("string"===typeof t?t:JSON.stringify(t))}},f95f:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"polyline",path:"M28.805 11L22 21.584V24h-3v-2.233L12.047 14h-.891L3 25.465V28H0v-3h1.733L10 13.348V11h3v2.13L20.044 21h.858L28 9.875V8h3v3z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},fC0e:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("ysqo"),h=n.n(d),m=n("2SGB"),f=n("AuFC"),y=n("OGR5"),g=n("NX3A"),v=n("eCu0"),b=n("V+ka"),x=n("q+Ww"),O=n("wre/"),w=n("pWxA"),j=n("zjfJ"),C=n("jvFD"),k=n.n(C),S=n("YQpL"),I=n("O94r"),P=n.n(I),R=n("WXRn"),E=n("7sDT"),D=n("1PWK"),T=n("MEC2");function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var A=function(e){Object(s.a)(a,e);var t,n=(t=a,function(){var e,n=Object(r.a)(t);if(M()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"arrow-right-thin",path:"M24.293 16H6v-1h18.293l-3.646-3.646.707-.707 4.853 4.853-4.854 4.854-.707-.707z",viewBox:"0 0 32 32"})}return a}(T.a);function N(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var L=function(e){Object(s.a)(a,e);var t,n=(t=a,function(){var e,n=Object(r.a)(t);if(N()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"arrow-left-thin",path:"M10.646 20.354L5.793 15.5l4.854-4.854.707.707L7.707 15H26v1H7.707l3.646 3.646z",viewBox:"0 0 32 32"})}return a}(T.a),G=n("Z4N4"),_=n("liFR"),B=n("bAEK"),W=n("wWnZ"),V=n("dV92"),F=n("LqVs"),U=n("Y/5s"),z=n("BVlg"),H=n("wVTu"),Y=n("ymhH"),K=n("3Uv7"),X=n("KO1s"),J=n("4DfP"),Z=n("q0L8"),q=n("cxan"),Q=n("HbGN"),$=n("VtSi"),ee=n.n($),te=n("8dId"),ne=n("Lf33"),ie=n("m14E"),ae=n("nylY"),oe=n("mDjW"),re=n("sDPw"),se=n("tSRP"),ce=n("N8kh"),le=n("8nAU"),pe=n("Z34l"),ue=n("pFSi"),de=n.n(ue),he=n("S15H"),me=u.a.createElement;function fe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ye=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(fe()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(e){var t;return Object(i.a)(this,c),t=n.call(this,e),Object(j.a)(Object(w.a)(t),"tippyInstance",null),Object(j.a)(Object(w.a)(t),"groupSearchInputRef",Object(p.createRef)()),Object(j.a)(Object(w.a)(t),"groupResultClickHandler",de()((function(e){return t.onGroupResultClick.bind(Object(w.a)(t),e)}))),Object(j.a)(Object(w.a)(t),"selectedGroupClearClickHandler",de()((function(e){return t.onSelectedGroupClearClick.bind(Object(w.a)(t),e)}))),Object(j.a)(Object(w.a)(t),"labelStyles",{styles:me(l.a,{id:"2286404481",dynamic:[g.a.spacing.xxxs,g.a.spacing.xxs]},["label.__jsx-style-dynamic-selector{margin:".concat(g.a.spacing.xxxs," 0 ").concat(g.a.spacing.xxs,";}")]),className:l.a.dynamic([["2286404481",[g.a.spacing.xxxs,g.a.spacing.xxs]]])}),Object(j.a)(Object(w.a)(t),"calloutStyles",{styles:me(l.a,{id:"498312003",dynamic:[g.a.spacing.xxs]},[".callout.__jsx-style-dynamic-selector{margin:".concat(g.a.spacing.xxs," 0;}")]),className:l.a.dynamic([["498312003",[g.a.spacing.xxs]]])}),Object(j.a)(Object(w.a)(t),"getSelectedSharingLevel",(function(){return{access:t.state.access===ce.a.PRIVATE&&t.state.selectedGroupsIds.length>0?ce.a.SHARED:t.state.access,groups:t.state.selectedGroupsIds}})),Object(j.a)(Object(w.a)(t),"hideGroupResults",(function(){var e;null===(e=t.tippyInstance)||void 0===e||e.hide()})),Object(j.a)(Object(w.a)(t),"updateSearchInputWidth",(function(){var e,n=null===(e=t.groupSearchInputRef.current)||void 0===e?void 0:e.getBoundingClientRect().width;n&&n!==t.state.groupSearchInputWidth&&t.setState({groupSearchInputWidth:n})})),Object(j.a)(Object(w.a)(t),"handleDropdownBlur",(function(e){var n=e.relatedTarget;n&&n.classList&&n.classList.contains("group-result-menu-item")||t.hideGroupResults()})),Object(j.a)(Object(w.a)(t),"renderGroupSearchbox",(function(){return me("div",null,me(te.a,{id:"".concat(t.props.id,"-group-search"),size:"medium",clearBtnLabel:t.props.intl.formatMessage({id:"builder.sharingSelector.group.search.clear"}),label:t.props.intl.formatMessage({id:"builder.sharingSelector.group.search.label"}),placeholder:t.props.intl.formatMessage({id:"builder.sharingSelector.group.search.placeholder"}),onChange:t.onGroupSearchChange,onClear:t.onGroupSearchClear,preventAutoComplete:!0,searchInputRef:t.groupSearchInputRef,disabled:t.state.isPublicUser&&t.state.access===ce.a.PRIVATE}))})),Object(j.a)(Object(w.a)(t),"renderGroupResults",(function(){var e=t.state.groups.filter((function(e){return!t.state.selectedGroupsIds.includes(e.id)&&e.title.match(new RegExp(t.state.groupSearchValue,"i"))}));return me(ne.a,{fullWidth:!0,maxHeight:"31.2rem",onBlur:t.handleDropdownBlur},e.length>0?e.map((function(e){var n=e.capabilities.includes("updateitemcontrol")?"updateGroup":Object(he.a)(e,!0)?void 0:"viewOnly";return t.wrapTooltip(me(ne.a.Item,{key:n?void 0:e.id,maxHeight:"none",onClick:t.groupResultClickHandler(e.id),isDisabled:!!n,className:"group-result-menu-item"},t.renderGroupDisplay(e,!1,t.state.groupSearchValue)),n,e.id)})):me(ne.a.Item,{maxHeight:"none",onBlur:t.hideGroupResults},me(m.a,{id:"common.arcgis.sharing.selector.groupSharing.search.noMatches"})))})),Object(j.a)(Object(w.a)(t),"renderSelectedGroups",(function(){return t.state.selectedGroups.map((function(e){return t.renderGroupDisplay(e,!0,t.state.groupSearchValue)}))})),Object(j.a)(Object(w.a)(t),"renderGroupDisplay",(function(e,n,i){var a="/static/images/item-default-thumbnails/groups.png";t.props.config?a="".concat(t.props.config.BASE_URL).concat(a):Object(le.a)()&&(a="".concat("").concat(a));var o=Object(pe.b)(t.props.config.PORTAL_HOST,e,a,t.props.userSession.token,200,!0);return me("div",{key:"group-display-".concat(e.id),className:l.a.dynamic([["1019140992",[G.a.center(),n?g.a.spacing.xxs:0,G.a.center(),n?g.a.spacing.xxs:0,g.a.spacing.xxxxs,g.a.spacing.xxs,g.a.color.cadet,G.a.typography.body14(),G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.spacing.xxxs]]])+" group-display"},o&&me("img",{src:o,alt:t.props.intl.formatMessage({id:"builder.sharingSelector.group.logo.altText"}),className:l.a.dynamic([["1019140992",[G.a.center(),n?g.a.spacing.xxs:0,G.a.center(),n?g.a.spacing.xxs:0,g.a.spacing.xxxxs,g.a.spacing.xxs,g.a.color.cadet,G.a.typography.body14(),G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.spacing.xxxs]]])}),me("span",{className:l.a.dynamic([["1019140992",[G.a.center(),n?g.a.spacing.xxs:0,G.a.center(),n?g.a.spacing.xxs:0,g.a.spacing.xxxxs,g.a.spacing.xxs,g.a.color.cadet,G.a.typography.body14(),G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.spacing.xxxs]]])+" group-title"},i?me(ie.a,{text:e.title,target:i}):e.title),n&&me("button",{onClick:t.selectedGroupClearClickHandler(e.id),className:l.a.dynamic([["1019140992",[G.a.center(),n?g.a.spacing.xxs:0,G.a.center(),n?g.a.spacing.xxs:0,g.a.spacing.xxxxs,g.a.spacing.xxs,g.a.color.cadet,G.a.typography.body14(),G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.spacing.xxxs]]])},me(ae.a,{width:g.a.spacing.xxs,height:"auto",color:g.a.color.cadet})),me(l.a,{id:"1019140992",dynamic:[G.a.center(),n?g.a.spacing.xxs:0,G.a.center(),n?g.a.spacing.xxs:0,g.a.spacing.xxxxs,g.a.spacing.xxs,g.a.color.cadet,G.a.typography.body14(),G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.spacing.xxxs]},[".group-display.__jsx-style-dynamic-selector{".concat(G.a.center()," width:100%;margin:").concat(n?g.a.spacing.xxs:0," 0;}"),".group-display.__jsx-style-dynamic-selector:last-child{".concat(G.a.center()," width:100%;margin:").concat(n?g.a.spacing.xxs:0," 0 0;}"),"img.__jsx-style-dynamic-selector{height:4rem;width:4rem;border-radius:".concat(g.a.spacing.xxxxs,";object-fit:cover;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;}"),".group-title.__jsx-style-dynamic-selector{margin:0 ".concat(g.a.spacing.xxs,";color:").concat(g.a.color.cadet,";").concat(G.a.typography.body14(),";-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;").concat(G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),";}"),"button.__jsx-style-dynamic-selector{padding:".concat(g.a.spacing.xxxs,";}")]))})),Object(j.a)(Object(w.a)(t),"wrapTooltip",(function(e,n,i){return n?me(_.a,{key:i,tooltipContent:t.props.intl.formatMessage({id:"builder.sharingSelector.disabledTooltip.".concat(n)})},e):e})),Object(j.a)(Object(w.a)(t),"onAccessChange",(function(e){t.setState({access:e})})),Object(j.a)(Object(w.a)(t),"onCreateDropdown",(function(e){t.tippyInstance=e})),Object(j.a)(Object(w.a)(t),"onGroupSearchChange",(function(e){t.setState({groupSearchValue:e.trim()})})),Object(j.a)(Object(w.a)(t),"onGroupSearchClear",(function(){t.setState({groupSearchValue:""})})),Object(j.a)(Object(w.a)(t),"onGroupResultClick",(function(e){t.state.selectedGroupsIds.includes(e)||t.compileSelectedGroups(t.state.selectedGroupsIds.concat(e))})),Object(j.a)(Object(w.a)(t),"onSelectedGroupClearClick",(function(e){t.compileSelectedGroups(t.state.selectedGroupsIds.filter((function(t){return t!==e})))})),Object(j.a)(Object(w.a)(t),"compileSelectedGroups",(function(e){var n=e.reduce((function(e,n){var i=t.state.groups.find((function(e){return e.id===n}));return i?e.concat(i):e}),[]);t.setState({selectedGroupsIds:e,selectedGroups:n})})),t.state={access:t.props.sharingLevel.access===ce.a.SHARED?ce.a.PRIVATE:t.props.sharingLevel.access,selectedGroupsIds:t.props.sharingLevel.groups||[],selectedGroups:[],isPublicUser:!1,groups:[],groupSearchValue:"",groupSearchInputWidth:0},t}return Object(a.a)(c,[{key:"componentDidMount",value:function(){var e,t,n;return ee.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,ee.a.awrap(Object(pe.i)(this.props.userSession));case 2:return e=i.sent,i.next=5,ee.a.awrap(this.props.userSession.getUser());case 5:if(i.t0=i.sent.groups,i.t0){i.next=8;break}i.t0=[];case 8:t=i.t0,n=t.sort((function(e,t){var n=e.title.toUpperCase(),i=t.title.toUpperCase();return n<i?-1:n>i?1:0})),this.setState({isPublicUser:e,groups:n}),this.compileSelectedGroups(this.state.selectedGroupsIds);case 12:case"end":return i.stop()}}),null,this,null,Promise)}},{key:"render",value:function(){var e=this,t=this.props.fitWidth?"100%":"37.6rem",n=this.state.isPublicUser&&this.state.selectedGroupsIds.length>0,i={styles:me(l.a,{id:"1899987924",dynamic:[this.state.groupSearchInputWidth]},[".dropdown-container.__jsx-style-dynamic-selector{width:".concat(this.state.groupSearchInputWidth,"px;}")]),className:l.a.dynamic([["1899987924",[this.state.groupSearchInputWidth]]])};return me("div",{className:l.a.dynamic([["1352973451",[t,G.a.typography.h6(),g.a.color.darkGreen,G.a.typography.body14(),G.a.typography.body14(),g.a.color.darkGreen,g.a.spacing.xxxs,g.a.spacing.xxxs,G.a.typography.body14(),g.a.color.cadet,g.a.spacing.xxxs,g.a.spacing.xxs,g.a.color.antiFlashWhite,g.a.spacing.xs]]])+" sharing-selector"},me("h6",{className:l.a.dynamic([["1352973451",[t,G.a.typography.h6(),g.a.color.darkGreen,G.a.typography.body14(),G.a.typography.body14(),g.a.color.darkGreen,g.a.spacing.xxxs,g.a.spacing.xxxs,G.a.typography.body14(),g.a.color.cadet,g.a.spacing.xxxs,g.a.spacing.xxs,g.a.color.antiFlashWhite,g.a.spacing.xs]]])},me(m.a,{id:"common.arcgis.sharing.selector.accessLevel.heading"})),!this.state.isPublicUser&&(!this.props.userPrivileges.canShareOrg||!this.props.userPrivileges.canSharePublic)&&me(oe.a,{className:this.calloutStyles.className,size:"small",body:me("p",{className:l.a.dynamic([["1352973451",[t,G.a.typography.h6(),g.a.color.darkGreen,G.a.typography.body14(),G.a.typography.body14(),g.a.color.darkGreen,g.a.spacing.xxxs,g.a.spacing.xxxs,G.a.typography.body14(),g.a.color.cadet,g.a.spacing.xxxs,g.a.spacing.xxs,g.a.color.antiFlashWhite,g.a.spacing.xs]]])},me(m.a,{id:"common.arcgis.sharing.disabledCallout"}))}),me(re.a,{name:"sharing-access-options",currentValue:this.state.access,onChange:this.onAccessChange},(function(i){return me(u.a.Fragment,null,e.wrapTooltip(me(re.b,Object(q.a)({className:e.labelStyles.className,value:ce.a.PRIVATE,id:"".concat(e.props.id,"-sharing-access-options-private"),disabled:n},i),me("p",{className:l.a.dynamic([["1352973451",[t,G.a.typography.h6(),g.a.color.darkGreen,G.a.typography.body14(),G.a.typography.body14(),g.a.color.darkGreen,g.a.spacing.xxxs,g.a.spacing.xxxs,G.a.typography.body14(),g.a.color.cadet,g.a.spacing.xxxs,g.a.spacing.xxs,g.a.color.antiFlashWhite,g.a.spacing.xs]]])+" option-main"},me(m.a,{id:"common.arcgis.sharing.display.private"})),me("p",{className:l.a.dynamic([["1352973451",[t,G.a.typography.h6(),g.a.color.darkGreen,G.a.typography.body14(),G.a.typography.body14(),g.a.color.darkGreen,g.a.spacing.xxxs,g.a.spacing.xxxs,G.a.typography.body14(),g.a.color.cadet,g.a.spacing.xxxs,g.a.spacing.xxs,g.a.color.antiFlashWhite,g.a.spacing.xs]]])+" option-description"},me(m.a,{id:"common.arcgis.sharing.description.".concat(!e.state.isPublicUser&&e.state.selectedGroupsIds.length>0?"privateWithGroups":"private",".").concat(e.props.storyType)}))),n?"publicUsrPrivateWithGroup":void 0),!e.state.isPublicUser&&me(re.b,Object(q.a)({className:e.labelStyles.className,value:ce.a.ORG,id:"".concat(e.props.id,"-sharing-access-options-org"),disabled:!e.props.userPrivileges.canShareOrg},i),me("p",{className:l.a.dynamic([["1352973451",[t,G.a.typography.h6(),g.a.color.darkGreen,G.a.typography.body14(),G.a.typography.body14(),g.a.color.darkGreen,g.a.spacing.xxxs,g.a.spacing.xxxs,G.a.typography.body14(),g.a.color.cadet,g.a.spacing.xxxs,g.a.spacing.xxs,g.a.color.antiFlashWhite,g.a.spacing.xs]]])+" option-main"},me(m.a,{id:"common.arcgis.sharing.display.org"})),me("p",{className:l.a.dynamic([["1352973451",[t,G.a.typography.h6(),g.a.color.darkGreen,G.a.typography.body14(),G.a.typography.body14(),g.a.color.darkGreen,g.a.spacing.xxxs,g.a.spacing.xxxs,G.a.typography.body14(),g.a.color.cadet,g.a.spacing.xxxs,g.a.spacing.xxs,g.a.color.antiFlashWhite,g.a.spacing.xs]]])+" option-description"},me(m.a,{id:"common.arcgis.sharing.description.".concat(e.state.selectedGroupsIds.length>0?"orgWithGroups":"org",".").concat(e.props.storyType)}))),e.wrapTooltip(me(re.b,Object(q.a)({className:e.labelStyles.className,value:ce.a.PUBLIC,id:"".concat(e.props.id,"-sharing-access-options-public"),disabled:!e.props.userPrivileges.canSharePublic||n},i),me("p",{className:l.a.dynamic([["1352973451",[t,G.a.typography.h6(),g.a.color.darkGreen,G.a.typography.body14(),G.a.typography.body14(),g.a.color.darkGreen,g.a.spacing.xxxs,g.a.spacing.xxxs,G.a.typography.body14(),g.a.color.cadet,g.a.spacing.xxxs,g.a.spacing.xxs,g.a.color.antiFlashWhite,g.a.spacing.xs]]])+" option-main"},me(m.a,{id:"common.arcgis.sharing.display.public"})),me("p",{className:l.a.dynamic([["1352973451",[t,G.a.typography.h6(),g.a.color.darkGreen,G.a.typography.body14(),G.a.typography.body14(),g.a.color.darkGreen,g.a.spacing.xxxs,g.a.spacing.xxxs,G.a.typography.body14(),g.a.color.cadet,g.a.spacing.xxxs,g.a.spacing.xxs,g.a.color.antiFlashWhite,g.a.spacing.xs]]])+" option-description"},me(m.a,{id:"common.arcgis.sharing.description.public.".concat(e.props.storyType)}))),n?"publicUsrPublicWithGroup":void 0))})),this.props.userPrivileges.canShareToGroup&&this.state.groups.length>0&&me(u.a.Fragment,null,me("div",{className:l.a.dynamic([["1352973451",[t,G.a.typography.h6(),g.a.color.darkGreen,G.a.typography.body14(),G.a.typography.body14(),g.a.color.darkGreen,g.a.spacing.xxxs,g.a.spacing.xxxs,G.a.typography.body14(),g.a.color.cadet,g.a.spacing.xxxs,g.a.spacing.xxs,g.a.color.antiFlashWhite,g.a.spacing.xs]]])+" hr"}),me("h6",{className:l.a.dynamic([["1352973451",[t,G.a.typography.h6(),g.a.color.darkGreen,G.a.typography.body14(),G.a.typography.body14(),g.a.color.darkGreen,g.a.spacing.xxxs,g.a.spacing.xxxs,G.a.typography.body14(),g.a.color.cadet,g.a.spacing.xxxs,g.a.spacing.xxs,g.a.color.antiFlashWhite,g.a.spacing.xs]]])},me(m.a,{id:"common.arcgis.sharing.selector.groupSharing.heading"})),me("p",{className:l.a.dynamic([["1352973451",[t,G.a.typography.h6(),g.a.color.darkGreen,G.a.typography.body14(),G.a.typography.body14(),g.a.color.darkGreen,g.a.spacing.xxxs,g.a.spacing.xxxs,G.a.typography.body14(),g.a.color.cadet,g.a.spacing.xxxs,g.a.spacing.xxs,g.a.color.antiFlashWhite,g.a.spacing.xs]]])+" subheading"},me(m.a,{id:"common.arcgis.sharing.selector.groupSharing.".concat(this.props.storyType,".subheading")})),this.state.isPublicUser&&me(oe.a,{className:this.calloutStyles.className,size:"small",body:me("p",{className:l.a.dynamic([["1352973451",[t,G.a.typography.h6(),g.a.color.darkGreen,G.a.typography.body14(),G.a.typography.body14(),g.a.color.darkGreen,g.a.spacing.xxxs,g.a.spacing.xxxs,G.a.typography.body14(),g.a.color.cadet,g.a.spacing.xxxs,g.a.spacing.xxs,g.a.color.antiFlashWhite,g.a.spacing.xs]]])},me(m.a,{id:"builder.sharingSelector.group.publicUser.sharePublicCallout"}))}),me(se.a,{target:this.renderGroupSearchbox(),popper:this.renderGroupResults(),placement:"bottom-start",onCreate:this.onCreateDropdown,trigger:"click focusin",hideOnClick:!1,maxWidth:"none",onShow:this.updateSearchInputWidth,className:i.className}),me("div",{className:l.a.dynamic([["1352973451",[t,G.a.typography.h6(),g.a.color.darkGreen,G.a.typography.body14(),G.a.typography.body14(),g.a.color.darkGreen,g.a.spacing.xxxs,g.a.spacing.xxxs,G.a.typography.body14(),g.a.color.cadet,g.a.spacing.xxxs,g.a.spacing.xxs,g.a.color.antiFlashWhite,g.a.spacing.xs]]])+" selected-groups"},this.renderSelectedGroups())),this.labelStyles.styles,this.calloutStyles.styles,i.styles,me(l.a,{id:"1352973451",dynamic:[t,G.a.typography.h6(),g.a.color.darkGreen,G.a.typography.body14(),G.a.typography.body14(),g.a.color.darkGreen,g.a.spacing.xxxs,g.a.spacing.xxxs,G.a.typography.body14(),g.a.color.cadet,g.a.spacing.xxxs,g.a.spacing.xxs,g.a.color.antiFlashWhite,g.a.spacing.xs]},[".sharing-selector.__jsx-style-dynamic-selector{width:".concat(t,";}"),"h6.__jsx-style-dynamic-selector{".concat(G.a.typography.h6(),";color:").concat(g.a.color.darkGreen,";}"),"p.__jsx-style-dynamic-selector{".concat(G.a.typography.body14(),";}"),".option-main.__jsx-style-dynamic-selector{".concat(G.a.typography.body14(),";color:").concat(g.a.color.darkGreen,";margin:").concat(g.a.spacing.xxxs," 0 ").concat(g.a.spacing.xxxs,";}"),".option-description.__jsx-style-dynamic-selector,.subheading.__jsx-style-dynamic-selector{".concat(G.a.typography.body14(),";color:").concat(g.a.color.cadet,";}"),".subheading.__jsx-style-dynamic-selector{margin:".concat(g.a.spacing.xxxs," 0 ").concat(g.a.spacing.xxs,";}"),".hr.__jsx-style-dynamic-selector{border-top:1px solid ".concat(g.a.color.antiFlashWhite,";margin:").concat(g.a.spacing.xs," 0;}")]))}}]),c}(p.PureComponent),ge=(Object(v.c)(Object(f.c)(Object(S.c)(ye))),u.a.createElement);function ve(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var be=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(ve()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){var e;Object(i.a)(this,c);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),Object(j.a)(Object(w.a)(e),"sharingSelectorRef",Object(p.createRef)()),Object(j.a)(Object(w.a)(e),"onShare",(function(){e.sharingSelectorRef.current&&e.props.onShare(e.sharingSelectorRef.current.getSelectedSharingLevel())})),e}return Object(a.a)(c,[{key:"render",value:function(){var e=this.props,t=(e.onShare,e.isShowingModal),n=e.onClose,i=Object(Q.a)(e,["onShare","isShowingModal","onClose"]);return ge(V.a,{headerTitle:ge(m.a,{id:"component.builderHeader.shareSettings.title"}),isShowingModal:t,primaryButtonTitle:ge(m.a,{id:"component.builderHeader.shareSettings.modal.primaryBtn"}),onPrimaryButtonClick:this.onShare,secondaryButtonTitle:ge(m.a,{id:"common.cancel"}),onSecondaryButtonClick:n,onCloseButtonClick:n,closeButtonLabel:this.props.intl.formatMessage({id:"common.close"})},ge(ye,Object(q.a)({ref:this.sharingSelectorRef,fitWidth:!0},i)))}}]),c}(p.PureComponent),xe=Object(f.c)(Object(v.c)(Object(S.c)(be))),Oe=n("ZjWX"),we=n("2bAO"),je=n("rHGT"),Ce=n("txt0"),ke=u.a.createElement;function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Re=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(Pe()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(e){var t;return Object(i.a)(this,c),t=n.call(this,e),Object(j.a)(Object(w.a)(t),"googleAnalytics",{id:"storySettingsGA",title:t.props.intl.formatMessage({id:"component.builderHeader.storySettings.analytics.title"}),description:ke(p.Fragment,null,ke("span",null,t.props.intl.formatMessage({id:"component.builderHeader.storySettings.analytics.description"}),"  "),ke("a",{href:"https://www.esri.com/arcgis-blog/products/arcgis-storymaps/constituent-engagement/track-your-story-map-performance-using-google-analytics-beta/",target:"_blank",rel:"noopener noreferrer"},t.props.intl.formatMessage({id:"component.builderHeader.storySettings.analytics.link"}))),value:t.props.googleAnalyticsKey||"",onChange:function(e){t.onChange(e.target.value)}}),Object(j.a)(Object(w.a)(t),"onChange",(function(e){t.setState({enteredKey:e})})),Object(j.a)(Object(w.a)(t),"onSaveChanges",(function(){t.props.onSave({gaid:t.state.enteredKey,isPublishedDateHidden:t.state.isPublishedDateHidden,isSocialIconsHidden:t.state.isSocialIconsHidden}),t.state.isPublishedDateHidden&&Ce.a.trackEvent(Ce.a.Category.Story,Ce.a.Action.Story_Hide_PublishedDate),t.state.isSocialIconsHidden&&Ce.a.trackEvent(Ce.a.Category.Story,Ce.a.Action.Story_Hide_SocialIcons),t.props.onClose()})),Object(j.a)(Object(w.a)(t),"onDiscard",(function(){t.setState({enteredKey:t.props.googleAnalyticsKey||"",isPublishedDateHidden:!!t.props.isPublishedDateHidden,isSocialIconsHidden:!!t.props.isSocialIconsHidden}),t.props.onDiscard(),t.props.onClose()})),Object(j.a)(Object(w.a)(t),"updatePubDateVisibilityStatus",(function(){t.setState({isPublishedDateHidden:!t.state.isPublishedDateHidden})})),Object(j.a)(Object(w.a)(t),"updateSocialIconsVisibilityStatus",(function(){t.setState({isSocialIconsHidden:!t.state.isSocialIconsHidden})})),t.state={enteredKey:t.props.googleAnalyticsKey||"",isPublishedDateHidden:!!t.props.isPublishedDateHidden,isSocialIconsHidden:!!t.props.isSocialIconsHidden},t}return Object(a.a)(c,[{key:"render",value:function(){this.googleAnalytics.value=this.state.enteredKey;var e={id:"storySettingsPublishDate",title:this.props.intl.formatMessage({id:"component.builderHeader.storySettings.publishSettings.title"}),customComponent:ke(p.Fragment,null,ke("div",{className:l.a.dynamic([["344312899",[G.a.typography.body14(),g.a.color.darkGreen,g.a.spacing.xxxs]]])+" public-settings-container"},ke(we.a,{id:"show-publish-date",value:"show-publish-date",alignment:"center",isChecked:this.state.isPublishedDateHidden,onChange:this.updatePubDateVisibilityStatus,className:"checkbox-container"},this.props.intl.formatMessage({id:"component.builderHeader.storySettings.publishDate.description"})),this.props.featureDecisions.canShareSocially&&ke(we.a,{id:"show-social-icons",value:"show-social-icons",alignment:"center",isChecked:this.state.isSocialIconsHidden,onChange:this.updateSocialIconsVisibilityStatus,className:"checkbox-container"},this.props.intl.formatMessage({id:"component.builderHeader.storySettings.socialSharing.description"}),ke("span",{className:l.a.dynamic([["344312899",[G.a.typography.body14(),g.a.color.darkGreen,g.a.spacing.xxxs]]])+" info-icon"},ke(_.a,{tooltipContent:this.props.intl.formatMessage({id:"component.builderHeader.storySettings.socialSharing.tooltip"})},ke(je.a,{color:g.a.color.deepLilac}))))),ke(l.a,{id:"344312899",dynamic:[G.a.typography.body14(),g.a.color.darkGreen,g.a.spacing.xxxs]},[".public-settings-container.__jsx-style-dynamic-selector .checkbox-container{".concat(G.a.typography.body14(),";color:").concat(g.a.color.darkGreen,";}"),".info-icon.__jsx-style-dynamic-selector{padding:0 ".concat(g.a.spacing.xxxs,";}")])),customComponentClassname:"custom-override"},t=this.props.featureDecisions.canHaveGoogleAnalytics?[this.googleAnalytics]:[];this.props.itemType===z.a.Story&&t.push(e);var n=[Ie({id:"settings-modal-properties"},this.props.canCustomizeStorySettings?{modalProperties:t}:{disabledModalProperties:t})];return ke(Oe.a,{mediaTitle:this.props.intl.formatMessage({id:"component.builderHeader.".concat(this.props.itemType,".settings.title")}),isShowingModal:this.props.isShowingModal,tabs:n,onConfirm:this.onSaveChanges,onDiscard:this.onDiscard,isSaveDisabled:!this.props.canCustomizeStorySettings})}}]),c}(p.PureComponent),Ee=Object(E.c)(Object(S.c)(Re)),De=n("79uv"),Te=n("yd9k"),Me=n("JmSK"),Ae=n("CBeR"),Ne=u.a.createElement;function Le(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ge=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(Le()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(e){var t;return Object(i.a)(this,c),t=n.call(this,e),Object(j.a)(Object(w.a)(t),"isMounted",!1),Object(j.a)(Object(w.a)(t),"componentDidMount",(function(){var e;return ee.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.isMounted=!0,n.next=3,ee.a.awrap(Object(De.h)(t.props.storyId,t.props.userSession));case 3:e=n.sent,t.isMounted&&t.setState({isFavorite:e});case 5:case"end":return n.stop()}}),null,null,null,Promise)})),Object(j.a)(Object(w.a)(t),"renderContextMenuTarget",(function(){var e=t.props.intl.formatMessage({id:"common.moreActions"});return Ne("button",{"aria-label":e,className:l.a.dynamic([["2569398705",[g.a.font.size.extraLarge]]])+" target-container"},Ne(_.a,{tooltipContent:e},Ne(Te.a,{color:t.props.theme.color.secondary})),Ne(l.a,{id:"2569398705",dynamic:[g.a.font.size.extraLarge]},[".target-container.__jsx-style-dynamic-selector{font-size:".concat(g.a.font.size.extraLarge,";line-height:0;}"),"body:not(.user-is-tabbing) .target-container.__jsx-style-dynamic-selector:focus{outline:none;}"]))})),Object(j.a)(Object(w.a)(t),"renderContextMenuPopper",(function(){var e=t.props.storyType===z.a.Story?"stories":"collections",n="".concat(t.props.config.BASE_URL,"/").concat(e,"/").concat(t.props.storyId),i="/".concat(e,"/view?id=").concat(t.props.storyId),a="/stories/preview?id=".concat(t.props.storyId,"&printMode=basic-print&mode=fullscreen-preview"),o="".concat(t.props.config.BASE_URL,"/stories/").concat(t.props.storyId,"/edit/print");return Ne(ne.a,null,t.state.isFavorite?t.renderUnfavoriteMenuItem():t.renderFavoriteMenuItem(),t.props.publishStatus!==Me.c.draft&&Ne(p.Fragment,null,Ne(ne.a.Divider,null),Ne(k.a,{href:i,as:n,passHref:!0},t.renderDropdownMenuItem({label:"component.builderHeader.goToPublished.".concat(t.props.storyType)}))),t.props.storyType===z.a.Story&&t.renderDropdownMenuItem({label:"component.builderHeader.".concat(t.props.storyType,".settings.title"),onClick:t.props.onStorySettingsClicked}),t.props.publishStatus!==Me.c.draft&&t.renderDropdownMenuItem({label:"component.builderHeader.shareSettings.title",disabledTooltipId:"builder.builderHeader.sharingSettings.tooltip",onClick:t.props.onSharingSettingsClicked,isDangerous:!1,isDisabled:t.props.isCoAuthor}),t.props.publishStatus===Me.c.unpublishedChanges&&t.renderDropdownMenuItem({label:"component.builderHeader.discardUnpublish.contextBtn",onClick:t.props.onDiscardUnpublishClicked}),t.props.publishStatus!==Me.c.draft&&t.renderDropdownMenuItem({label:"component.builderHeader.unpublish.contextBtn.".concat(t.props.storyType),disabledTooltipId:"builder.builderHeader.unpublishStory.tooltip",onClick:t.props.onUnpublishClicked,isDisabled:t.props.isCoAuthor}),t.renderDropdownMenuItem({label:"component.builderHeader.duplicateItem.".concat(t.props.storyType,".dropdown"),disabledTooltipId:"component.builderHeader.duplicateItem.".concat(t.props.storyType,".dropdown.disabledTooltip"),onClick:t.props.onDuplicateStoryClicked,isDisabled:!t.props.isDuplicateStoryAllowed}),t.props.storyType===z.a.Story&&Ne(k.a,{href:a,as:o,passHref:!0},t.renderDropdownMenuItem({label:"common.print",trackingName:"Builder -- print",trackingContent:"Builder print from context menu"})),Ne(ne.a.Divider,null),t.renderDropdownMenuItem({label:"component.builderHeader.delete",disabledTooltipId:"builder.builderHeader.deleteStory.tooltip",onClick:t.props.onDeleteClicked,isDangerous:!0,isDisabled:t.props.isCoAuthor}))})),Object(j.a)(Object(w.a)(t),"renderDropdownMenuItem",(function(e){var n=e.label,i=e.disabledTooltipId,a=e.onClick,o=e.isDangerous,r=e.isDisabled,s=e.trackingName,c=e.trackingContent,l=e.href,p=Ne(ne.a.Item,{isDisabled:r,isBold:!1,onClick:a,isDangerous:o,maxHeight:g.a.spacing.xl,trackingName:s,trackingContent:c,href:l},Ne(m.a,{id:n}));return r&&i?Ne(_.a,{tooltipContent:t.props.intl.formatMessage({id:i})},p):p})),Object(j.a)(Object(w.a)(t),"renderFavoriteMenuItem",(function(){return t.renderDropdownMenuItem({label:"common.addFavorite",onClick:t.onFavoriteClicked})})),Object(j.a)(Object(w.a)(t),"renderUnfavoriteMenuItem",(function(){return t.renderDropdownMenuItem({label:"common.removeFavorite",onClick:t.onUnfavoriteClicked})})),Object(j.a)(Object(w.a)(t),"onFavoriteClicked",(function(){return ee.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee.a.awrap(t.props.onFavoriteClicked());case 3:t.setState({isFavorite:!0}),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),null,null,[[0,6]],Promise)})),Object(j.a)(Object(w.a)(t),"onUnfavoriteClicked",(function(){return ee.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee.a.awrap(t.props.onUnfavoriteClicked());case 3:t.setState({isFavorite:!1}),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),null,null,[[0,6]],Promise)})),t.state={isFavorite:!1},t}return Object(a.a)(c,[{key:"componentWillUnmount",value:function(){this.isMounted=!1}},{key:"render",value:function(){return Ne("div",{className:"context-menu"},Ne(se.a,{target:this.renderContextMenuTarget(),popper:this.renderContextMenuPopper(),placement:"bottom-end"}))}}]),c}(p.PureComponent),_e=Object(Ae.b)(Object(F.b)(Object(U.d)(Object(f.c)(Object(S.c)(Ge))))),Be=n("DAN1"),We=n("33+R"),Ve=u.a.createElement;function Fe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ue=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(Fe()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){var e;Object(i.a)(this,c);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),Object(j.a)(Object(w.a)(e),"sharingSelectorRef",Object(p.createRef)()),Object(j.a)(Object(w.a)(e),"onPublishClick",(function(){e.sharingSelectorRef.current&&e.props.onPublishClick(e.sharingSelectorRef.current.getSelectedSharingLevel())})),e}return Object(a.a)(c,[{key:"render",value:function(){var e=this.props,t=(e.onPublishClick,Object(Q.a)(e,["onPublishClick"]));return Ve("div",{className:l.a.dynamic([["3562353126",[G.a.typography.h3(),g.a.spacing.sm,g.a.color.darkGreen,g.a.spacing.sm,g.a.spacing.sm,g.a.spacing.sm,g.a.color.beauBlue,g.a.spacing.sm]]])},Ve("div",{className:l.a.dynamic([["3562353126",[G.a.typography.h3(),g.a.spacing.sm,g.a.color.darkGreen,g.a.spacing.sm,g.a.spacing.sm,g.a.spacing.sm,g.a.color.beauBlue,g.a.spacing.sm]]])+" scroll-wrapper"},Ve("h3",{className:l.a.dynamic([["3562353126",[G.a.typography.h3(),g.a.spacing.sm,g.a.color.darkGreen,g.a.spacing.sm,g.a.spacing.sm,g.a.spacing.sm,g.a.color.beauBlue,g.a.spacing.sm]]])+" title"},Ve(m.a,{id:"component.builderHeader.sharingPopover.title"})),Ve(ye,Object(q.a)({ref:this.sharingSelectorRef},t))),Ve("div",{className:l.a.dynamic([["3562353126",[G.a.typography.h3(),g.a.spacing.sm,g.a.color.darkGreen,g.a.spacing.sm,g.a.spacing.sm,g.a.spacing.sm,g.a.color.beauBlue,g.a.spacing.sm]]])+" no-scroll-wrapper"},Ve("div",{className:l.a.dynamic([["3562353126",[G.a.typography.h3(),g.a.spacing.sm,g.a.color.darkGreen,g.a.spacing.sm,g.a.spacing.sm,g.a.spacing.sm,g.a.color.beauBlue,g.a.spacing.sm]]])+" hr"}),Ve(W.a,{type:"default",color:"primary",size:"block",onClick:this.onPublishClick},Ve(m.a,{id:"component.builderHeader.sharingPopover.publishBtn.".concat(this.props.storyType)}))),Ve(l.a,{id:"3562353126",dynamic:[G.a.typography.h3(),g.a.spacing.sm,g.a.color.darkGreen,g.a.spacing.sm,g.a.spacing.sm,g.a.spacing.sm,g.a.color.beauBlue,g.a.spacing.sm]},[".title.__jsx-style-dynamic-selector{".concat(G.a.typography.h3()," margin:0 0 ").concat(g.a.spacing.sm,";color:").concat(g.a.color.darkGreen,";}"),".scroll-wrapper.__jsx-style-dynamic-selector{max-height:calc(100vh - 24.5rem);overflow:auto;padding:".concat(g.a.spacing.sm," ").concat(g.a.spacing.sm," 0;}"),".no-scroll-wrapper.__jsx-style-dynamic-selector{padding:".concat(g.a.spacing.sm,";}"),".hr.__jsx-style-dynamic-selector{border-top:1px solid ".concat(g.a.color.beauBlue,";margin-bottom:").concat(g.a.spacing.sm,";}")]))}}]),c}(p.PureComponent),ze=Object(f.c)(Object(v.c)(Object(S.c)(Ue))),He=u.a.createElement;function Ye(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ke=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(Ye()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(e){var t;return Object(i.a)(this,c),t=n.call(this,e),Object(j.a)(Object(w.a)(t),"renderPublishButton",(function(e,n){var i={styles:He(l.a,{id:"1668547521",dynamic:[g.a.spacing.xxxs]},[".button.btn.__jsx-style-dynamic-selector{padding:".concat(g.a.spacing.xxxs,";}")]),className:l.a.dynamic([["1668547521",[g.a.spacing.xxxs]]])},a=He(Be.a,null,He(W.a,{key:"primary",type:"clear",disabled:n,onClick:t.onPublishStoryClick,color:t.props.theme.id},He(m.a,{id:"component.builderHeader.publish"})),He(W.a,{key:"secondary",type:"clear",disabled:n,color:t.props.theme.id,className:i.className,"aria-label":t.props.intl.formatMessage({id:"component.builderHeader.shareSettings.title"})},He(We.a,{color:g.a.color.emeraldGreen})),i.styles),o=He(W.a,{key:"primary",type:"clear",disabled:n,color:t.props.theme.id,icon:He(We.a,{color:g.a.color.emeraldGreen}),iconPosition:"end"},He(m.a,{id:"component.builderHeader.publish"})),r=t.props.intl.formatMessage({id:"builder.builderHeader.publishStory.tooltip"});return He(se.a,{maxWidth:"none",hideOnContentClick:!1,target:He("div",null,e?n?He(_.a,{tooltipContent:r},a):a:n?He(_.a,{tooltipContent:r},o):o),popper:He(ne.a,{padding:"none",fullWidth:!0},He(ze,{id:"sharing-popover",sharingLevel:t.props.sharingLevel,storyType:t.props.storyType,userPrivileges:t.props.storyMapUserPrivileges,userSession:t.props.userSession,onPublishClick:t.onPublishStoryClick})),placement:"bottom"})})),Object(j.a)(Object(w.a)(t),"onPublishStoryClick",(function(e){e&&"string"===typeof e.access?t.props.onPublishClicked(e):t.props.onPublishClicked()})),t.state={isSharingPopoverVisible:!1},t}return Object(a.a)(c,[{key:"render",value:function(){return this.renderPublishButton(this.props.publishStatus===Me.c.unpublishedChanges,this.props.isCoAuthor)}}]),c}(p.PureComponent),Xe=Object(Ae.b)(Object(F.b)(Object(U.d)(Object(S.c)(Ke)))),Je=u.a.createElement;function Ze(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var qe=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(Ze()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(e){var t;return Object(i.a)(this,c),t=n.call(this,e),Object(j.a)(Object(w.a)(t),"savingSpan",Object(p.createRef)()),Object(j.a)(Object(w.a)(t),"openDeleteModal",(function(){t.setState({isDeleteModalShowing:!0})})),Object(j.a)(Object(w.a)(t),"closeDeleteModal",(function(){t.setState({isDeleteModalShowing:!1})})),Object(j.a)(Object(w.a)(t),"openStorySettingsModal",(function(){t.setState({isStorySettingsModalShowing:!0})})),Object(j.a)(Object(w.a)(t),"closeStorySettingsModal",(function(){t.setState({isStorySettingsModalShowing:!1})})),Object(j.a)(Object(w.a)(t),"updateStorySettings",(function(e){t.props.onStorySettingsSave&&t.props.onStorySettingsSave({gaid:e.gaid,isPublishedDateHidden:e.isPublishedDateHidden,isSocialIconsHidden:e.isSocialIconsHidden})})),Object(j.a)(Object(w.a)(t),"openShareStoryModal",(function(){t.setState({isShareStoryModalShowing:!0})})),Object(j.a)(Object(w.a)(t),"closeShareStoryModal",(function(){t.setState({isShareStoryModalShowing:!1})})),Object(j.a)(Object(w.a)(t),"onShareStoryClicked",(function(e){t.closeShareStoryModal(),t.props.onShareStoryClicked(e)})),Object(j.a)(Object(w.a)(t),"openDuplicateStoryModal",(function(){t.setState({isDuplicateStoryModalShowing:!0})})),Object(j.a)(Object(w.a)(t),"closeDuplicateStoryModal",(function(){t.setState({isDuplicateStoryModalShowing:!1})})),Object(j.a)(Object(w.a)(t),"onDuplicateStoryClick",(function(){t.closeDuplicateStoryModal(),t.props.onDuplicateStoryClicked()})),Object(j.a)(Object(w.a)(t),"openDiscardUnpublishedModal",(function(){t.setState({isDiscardUnpublishedModalShowing:!0})})),Object(j.a)(Object(w.a)(t),"closeDiscardUnpublishedModal",(function(){t.setState({isDiscardUnpublishedModalShowing:!1})})),Object(j.a)(Object(w.a)(t),"openUnpublishModal",(function(){t.setState({isUnpublishModalShowing:!0})})),Object(j.a)(Object(w.a)(t),"closeUnpublishModal",(function(){t.setState({isUnpublishModalShowing:!1})})),Object(j.a)(Object(w.a)(t),"onUnpublishClick",(function(){t.closeUnpublishModal(),t.props.onUnpublishClicked()})),t.state={isStorySettingsModalShowing:!1,isShareStoryModalShowing:!1,isDuplicateStoryModalShowing:!1,isDeleteModalShowing:!1,isDiscardUnpublishedModalShowing:!1,isUnpublishModalShowing:!1,longestSaveStatus:0},t}return Object(a.a)(c,[{key:"render",value:function(){var e=this.props.storyMapUserPrivileges.canCustomizeProductBranding,t=Object(x.b)(this.props.title,e,!0),n=P()("story-title",{branding:!e}),i=this.props.storyType===z.a.Story?"stories":"collections",a="/".concat(i),o="".concat(this.props.config.BASE_URL,"/").concat(i),r=this.props.storyType===z.a.Story||this.props.storyType===z.a.Collection&&this.props.featureDecisions.TEMP_canPreviewCollections,s=this.props.theme.id===D.a.dark,c=Object(R.b)()?A:L;return Je("header",{className:l.a.dynamic([["905281103",[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]]])+" builder-header"},Je(y.b,null,Je("div",{className:l.a.dynamic([["905281103",[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]]])+" container"},Je("div",{className:l.a.dynamic([["905281103",[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]]])+" left"},Je(k.a,{href:a,as:o},Je("a",{"aria-label":this.props.storyType===z.a.Story?this.props.intl.formatMessage({id:"builder.itemBrowser.stories"}):this.props.intl.formatMessage({id:"component.collections.collections"}),className:l.a.dynamic([["905281103",[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]]])+" logo-link"},Je(_.a,{tooltipContent:this.props.storyType===z.a.Story?this.props.intl.formatMessage({id:"component.builderHeader.arrow.tooltip.stories"}):this.props.intl.formatMessage({id:"component.builderHeader.arrow.tooltip.collections"})},Je(c,{width:g.a.spacing.xs,height:g.a.spacing.xs,color:s?g.a.color.platinum:g.a.color.darkGreen,className:l.a.dynamic([["905281103",[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]]])})))),Je("div",{className:l.a.dynamic([["905281103",[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]]])+" story-info"},Je("span",{className:l.a.dynamic([["905281103",[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]]])+" pipe"}),Je(H.a,null),Je("button",{onClick:this.props.onTitleClicked,className:l.a.dynamic([["905281103",[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]]])+" inherit"},Je(B.a,{target:Je("div",{className:l.a.dynamic([["905281103",[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]]])+" "+(n||"")},t),isShowing:this.props.isDuplicateNudgeShowing,title:this.props.intl.formatMessage({id:"component.duplicateItem.toast.duplicationSuccess"}),text:this.props.intl.formatMessage({id:"component.duplicateItem.".concat(this.props.storyType,".nudge.description")}),onClick:this.props.onDuplicateNudgeClose,placement:"bottom",usePositionFixed:!0,zIndex:99})),Je(Y.a,{sharingLevel:this.props.sharingLevel,mode:this.props.publishStatus})),Je("p",{ref:this.savingSpan,className:l.a.dynamic([["905281103",[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]]])+" save-status"},this.props.isSaving?Je(m.a,{id:"component.builderHeader.saving"}):Je(m.a,{id:"component.builderHeader.saved"}))),Je("div",{className:l.a.dynamic([["905281103",[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]]])+" right"},Je("div",{className:l.a.dynamic([["905281103",[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]]])+" right-actions"},this.props.storyType===z.a.Story&&Je(p.Fragment,null,Je(W.a,{type:"blank",color:s?"dark":"light",onClick:this.props.storyContext.toggleDesignPanelHook,className:"text"},Je(m.a,{id:"common.design"}))),r&&Je(k.a,{href:"/".concat(i,"/preview?id=").concat(this.props.storyId),as:"".concat(this.props.config.BASE_URL,"/").concat(i,"/").concat(this.props.storyId,"/preview"),passHref:!0},Je(W.a,{type:"blank",color:s?"dark":"light",className:"text",trackingName:"Preview -- header",trackingContent:"Preview"},Je(m.a,{id:"component.builderHeader.preview"}))),Je(Xe,{publishStatus:this.props.publishStatus,sharingLevel:this.props.sharingLevel,onPublishClicked:this.props.onPublishClicked,storyType:this.props.storyType})),Je(_e,{storyId:this.props.storyId,publishStatus:this.props.publishStatus,onFavoriteClicked:this.props.onFavoriteClicked,onUnfavoriteClicked:this.props.onUnfavoriteClicked,onStorySettingsClicked:this.openStorySettingsModal,isDuplicateStoryAllowed:this.props.isDuplicateStoryAllowed,onDuplicateStoryClicked:this.openDuplicateStoryModal,onSharingSettingsClicked:this.openShareStoryModal,onDeleteClicked:this.openDeleteModal,onUnpublishClicked:this.openUnpublishModal,onDiscardUnpublishClicked:this.openDiscardUnpublishedModal,storyType:this.props.storyType}),Je("span",{className:l.a.dynamic([["905281103",[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]]])+" pipe"}),this.props.featureDecisions.canAccessEsri&&Je(Z.a,null),Je(J.a,{userSession:this.props.userSession})))),Je(Ee,{isShowingModal:this.state.isStorySettingsModalShowing,googleAnalyticsKey:this.props.googleAnalyticsKey,isPublishedDateHidden:this.props.isPublishedDateHidden,isSocialIconsHidden:this.props.isSocialIconsHidden,onSave:this.updateStorySettings,onDiscard:this.closeStorySettingsModal,onClose:this.closeStorySettingsModal,canCustomizeStorySettings:this.props.storyMapUserPrivileges.canCustomizeStorySettings,itemType:this.props.storyType}),Je(xe,{isShowingModal:this.state.isShareStoryModalShowing,onShare:this.onShareStoryClicked,onClose:this.closeShareStoryModal,id:"sharing-modal",sharingLevel:this.props.sharingLevel,storyType:this.props.storyType,userPrivileges:this.props.storyMapUserPrivileges,userSession:this.props.userSession}),Je(V.a,{headerTitle:Je(m.a,{id:"component.duplicateItem.".concat(this.props.storyType,".modal.title")}),isShowingModal:this.state.isDuplicateStoryModalShowing,primaryButtonTitle:Je(m.a,{id:"component.duplicateItem.".concat(this.props.storyType,".modal.confirmDuplicate")}),onPrimaryButtonClick:this.onDuplicateStoryClick,secondaryButtonTitle:Je(m.a,{id:"common.cancel"}),onSecondaryButtonClick:this.closeDuplicateStoryModal,onCloseButtonClick:this.closeDuplicateStoryModal,closeButtonLabel:this.props.intl.formatMessage({id:"common.close"})},Je("p",{className:l.a.dynamic([["905281103",[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]]])+" modal-description"},Je(m.a,{id:"component.duplicateItem.".concat(this.props.storyType,".modal.description.p1")})),Je("br",{className:l.a.dynamic([["905281103",[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]]])}),Je("p",{className:l.a.dynamic([["905281103",[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]]])+" modal-description"},Je(m.a,{id:"component.duplicateItem.".concat(this.props.storyType,".modal.description.p2")}))),Je(V.a,{headerTitle:Je(m.a,{id:"component.builderHeader.discardUnpublish.modal.title"}),isShowingModal:this.state.isDiscardUnpublishedModalShowing,primaryButtonTitle:Je(m.a,{id:"component.builderHeader.discardUnpublish.modal.primaryBtn"}),onPrimaryButtonClick:this.props.onDiscardUnpublishedClicked,secondaryButtonTitle:Je(m.a,{id:"common.cancel"}),onSecondaryButtonClick:this.closeDiscardUnpublishedModal,onCloseButtonClick:this.closeDiscardUnpublishedModal,closeButtonLabel:this.props.intl.formatMessage({id:"common.close"})},Je("p",{className:l.a.dynamic([["905281103",[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]]])+" modal-description"},Je(m.a,{id:"component.builderHeader.discardUnpublish.modal.description.".concat(this.props.storyType)}))),Je(V.a,{headerTitle:Je(m.a,{id:"component.builderHeader.unpublish.modal.title.".concat(this.props.storyType)}),isShowingModal:this.state.isUnpublishModalShowing,primaryButtonTitle:Je(m.a,{id:"component.builderHeader.unpublish.modal.primaryBtn"}),onPrimaryButtonClick:this.onUnpublishClick,secondaryButtonTitle:Je(m.a,{id:"common.cancel"}),onSecondaryButtonClick:this.closeUnpublishModal,onCloseButtonClick:this.closeUnpublishModal,closeButtonLabel:this.props.intl.formatMessage({id:"common.close"})},Je("p",{className:l.a.dynamic([["905281103",[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]]])+" modal-description"},Je(m.a,{id:"component.builderHeader.unpublish.modal.description.".concat(this.props.storyType)}))),Je(K.a,{title:Je(m.a,{id:"component.deleteModal.title.".concat(this.props.storyType)}),description:Je(m.a,{id:"component.".concat(this.props.storyType,".confirmDelete")}),isShowing:this.state.isDeleteModalShowing,onConfirm:this.props.onDeleteClicked,onCancel:this.closeDeleteModal}),Je(l.a,{id:"905281103",dynamic:[this.props.theme.color.secondary,this.props.theme.color.primary,"1px",this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",this.props.appOffset.top,"1px",G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.ashGrey,g.a.font.size.small,g.a.font.weight.medium,this.state.longestSaveStatus,G.a.gapped("column",g.a.spacing.xxs),G.a.gapped("column",g.a.spacing.xxs),g.a.color.cambridgeBlue,G.a.typography.body14(),g.a.font.lineHeight.medium,g.a.font.weight.medium,G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),g.a.font.weight.normal,g.a.color.cadet,g.a.responsiveBreakpoints.extraLarge,G.a.gapped("column",g.a.spacing.sm),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.xs),G.a.gapped("column",g.a.spacing.sm)]},[".builder-header.__jsx-style-dynamic-selector{position:fixed;top:0;left:0;width:100%;z-index:99;color:".concat(this.props.theme.color.secondary,";background-color:").concat(this.props.theme.color.primary,";border-bottom:").concat("1px"," solid ").concat(this.props.theme.id===D.a.light?G.a.hexA(g.a.color.ashGrey,.2):"transparent",";}"),".container.__jsx-style-dynamic-selector{height:calc(".concat(this.props.appOffset.top," - ").concat("1px",");").concat(G.a.gapped("column",g.a.spacing.xxs),";-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}"),".left.__jsx-style-dynamic-selector,.right.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".left.__jsx-style-dynamic-selector{".concat(G.a.gapped("column",g.a.spacing.xxs),";}"),".story-info.__jsx-style-dynamic-selector{".concat(G.a.gapped("column",g.a.spacing.xxs),";}"),".save-status.__jsx-style-dynamic-selector{color:".concat(g.a.color.ashGrey,";font-size:").concat(g.a.font.size.small,";font-weight:").concat(g.a.font.weight.medium,";max-height:calc(2 * 1em);min-width:").concat(this.state.longestSaveStatus,"px;}"),".builder-header.__jsx-style-dynamic-selector .badge{max-height:5rem;}",".right.__jsx-style-dynamic-selector{".concat(G.a.gapped("column",g.a.spacing.xxs),";}"),".right-actions.__jsx-style-dynamic-selector{".concat(G.a.gapped("column",g.a.spacing.xxs),";}"),".pipe.__jsx-style-dynamic-selector{height:3.6rem;border:1px solid ".concat(g.a.color.cambridgeBlue,";opacity:0.2;}"),".story-title.__jsx-style-dynamic-selector{".concat(G.a.typography.body14()," line-height:").concat(g.a.font.lineHeight.medium,";font-weight:").concat(g.a.font.weight.medium,";overflow-wrap:break-word;cursor:pointer;max-width:30rem;").concat(G.a.lineClamp(2,g.a.font.lineHeight.medium,!0),";}"),".story-title.branding.__jsx-style-dynamic-selector{font-size:1.8rem;line-height:unset;}","button.inherit.__jsx-style-dynamic-selector{color:inherit;text-align:inherit;}",".right-actions.__jsx-style-dynamic-selector .text{font-weight:".concat(g.a.font.weight.normal,";padding-left:0;padding-right:0;}"),".modal-description.__jsx-style-dynamic-selector{margin:0;color:".concat(g.a.color.cadet,";}"),"@media (min-width:".concat(g.a.responsiveBreakpoints.extraLarge,"){.container.__jsx-style-dynamic-selector{").concat(G.a.gapped("column",g.a.spacing.sm),";-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.left.__jsx-style-dynamic-selector{").concat(G.a.gapped("column",g.a.spacing.xs),";}.right.__jsx-style-dynamic-selector{").concat(G.a.gapped("column",g.a.spacing.xs),";}.right-actions.__jsx-style-dynamic-selector{").concat(G.a.gapped("column",g.a.spacing.sm),";}.story-title.__jsx-style-dynamic-selector{max-width:unset;}}")]))}},{key:"componentDidUpdate",value:function(e,t){var n=this.savingSpan.current;if(n){var i=n.getBoundingClientRect().width,a=Math.floor(i);a>this.state.longestSaveStatus&&this.setState({longestSaveStatus:a+1})}}}]),c}(p.PureComponent),Qe=Object(f.c)(Object(F.b)(Object(E.c)(Object(U.d)(Object(X.a)(Object(S.c)(Object(b.b)(qe))))))),$e=n("vLiI"),et=u.a.createElement;function tt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var nt=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(tt()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){var e=Object(x.a)(this.props.title,this.props.storyMapUserPrivileges.canCustomizeProductBranding);return et($e.a,null,et(h.a,null,et("title",{key:"title",className:l.a.dynamic([["3151809629",[this.props.appOffset.top,this.props.appOffset.top]]])},e)),this.props.isViewportMaxWidth("medium")?et(y.b,{spacingSm:g.a.spacing.sm,maxWidth:"700px"},et(O.default,{title:et(m.a,{id:"builder.unsupportedDevice"}),description:et(m.a,{id:"builder.unsupportedDevice.description.".concat(this.props.storyType)})})):et(p.Fragment,null,et(Qe,this.props),et("main",{className:l.a.dynamic([["3151809629",[this.props.appOffset.top,this.props.appOffset.top]]])+" builder-main story-container"},this.props.children)),et(l.a,{id:"3151809629",dynamic:[this.props.appOffset.top,this.props.appOffset.top]},[".builder-main.__jsx-style-dynamic-selector{min-height:calc(100vh - ".concat(this.props.appOffset.top,");margin-top:").concat(this.props.appOffset.top,";}")]))}}]),c}(p.PureComponent);t.a=Object(f.c)(Object(v.c)(Object(b.b)(nt)))},fSBn:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("zjfJ"),l=n("yFcC"),p=n.n(l),u=n("ERkP"),d=n.n(u),h=n("O94r"),m=n.n(h),f=n("mJaw"),y=n("NX3A"),g=n("Z4N4"),v=d.a.createElement;function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var x=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(b()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){var e={styles:v(p.a,{id:"1792666036",dynamic:[y.a.color.darkGreen,g.a.typography.body14(),y.a.font.weight.medium,y.a.color.ashGrey,y.a.spacing.xxxxs,y.a.spacing.xxxs,y.a.spacing.xxxxs,y.a.color.cadet,y.a.color.platinum,y.a.color.darkGreen]},[".btn.tab-button.__jsx-style-dynamic-selector{color:".concat(y.a.color.darkGreen,";").concat(g.a.typography.body14()," font-weight:").concat(y.a.font.weight.medium,";padding:1.4rem 0.5rem;}"),".btn.tab-button.disabled.__jsx-style-dynamic-selector{color:".concat(y.a.color.ashGrey,";border-bottom:3px solid transparent;}"),".tab-button.type-pill.__jsx-style-dynamic-selector{border-radius:1.4rem;padding:".concat(y.a.spacing.xxxxs," ").concat(y.a.spacing.xxxs," calc(").concat(y.a.spacing.xxxxs," * 1.5);font-weight:normal;margin-bottom:0;color:").concat(y.a.color.cadet,";border:none;}"),".tab-button.type-pill.selected.__jsx-style-dynamic-selector{background:".concat(y.a.color.platinum,";border-bottom:none;color:").concat(y.a.color.darkGreen,";}"),"body:not(.user-is-tabbing) .btn.tab-button.__jsx-style-dynamic-selector:focus{outline:none;}"]),className:p.a.dynamic([["1792666036",[y.a.color.darkGreen,g.a.typography.body14(),y.a.font.weight.medium,y.a.color.ashGrey,y.a.spacing.xxxxs,y.a.spacing.xxxs,y.a.spacing.xxxxs,y.a.color.cadet,y.a.color.platinum,y.a.color.darkGreen]]])},t=e.className,n=e.styles,i=m()("tab","placement-".concat(this.props.placement),"type-".concat(this.props.type),{selected:this.props.isSelected,disabled:this.props.isDisabled},this.props.className),a=m()(i,t,"btn","tab-button");return v(u.Fragment,null,v(f.a,{type:"blank",className:a,role:"tab","aria-selected":this.props.isSelected,onClick:this.props.onClick,disabled:this.props.isDisabled},this.props.children),n)}}]),c}(u.PureComponent);Object(c.a)(x,"defaultProps",{isSelected:!1,isDisabled:!1,placement:"start",type:"tab"});var O=x,w=n("pWxA"),j=d.a.createElement;function C(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var k=function(e){Object(s.a)(l,e);var t,n=(t=l,function(){var e,n=Object(r.a)(t);if(C()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function l(){var e;Object(i.a)(this,l);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),Object(c.a)(Object(w.a)(e),"renderTabs",(function(){var t={styles:j(p.a,{id:"3853790240",dynamic:[e.props.tabMargin,e.props.tabMargin,y.a.color.haikuGreen,e.props.tabMargin,e.props.tabMargin]},[".tab-bar-tab.__jsx-style-dynamic-selector{-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;margin-bottom:-2px;overflow-wrap:break-word;border-bottom:3px solid transparent;}",".tab-bar-tab.__jsx-style-dynamic-selector:not(:first-child){margin-left:".concat(e.props.tabMargin,";}"),".tab-bar-tab.placement-end.__jsx-style-dynamic-selector{margin-left:auto;}",".tab-bar-tab.placement-end.__jsx-style-dynamic-selector~.tab-bar-tab.placement-end.__jsx-style-dynamic-selector{margin-left:".concat(e.props.tabMargin,";}"),".selected.__jsx-style-dynamic-selector{border-bottom:3px solid ".concat(y.a.color.haikuGreen,";}"),"html[dir='rtl'] .tab-bar-tab.__jsx-style-dynamic-selector:not(:first-child){margin-left:initial;margin-right:".concat(e.props.tabMargin,";}"),"html[dir='rtl'] .tab-bar-tab.placement-end.__jsx-style-dynamic-selector{margin-right:auto;}","html[dir='rtl'] .tab-bar-tab.placement-end.__jsx-style-dynamic-selector~.tab-bar-tab.placement-end.__jsx-style-dynamic-selector{margin-left:initial;margin-right:".concat(e.props.tabMargin,";}")]),className:p.a.dynamic([["3853790240",[e.props.tabMargin,e.props.tabMargin,y.a.color.haikuGreen,e.props.tabMargin,e.props.tabMargin]]])},n=t.className,i=t.styles,a=u.Children.map(e.props.children,(function(e){var t=e&&e.props&&e.props.className?e.props.className:"";return Object(u.cloneElement)(e,{className:m()(n,"tab-bar-tab",t)})}));return j(u.Fragment,null,a,i)})),e}return Object(a.a)(l,[{key:"render",value:function(){return j("div",{role:"tablist",className:"jsx-3924859813 "+(m()("tab-bar",this.props.className)||"")},this.renderTabs(),j(p.a,{id:"3924859813"},[".tab-bar.jsx-3924859813{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:-2px;}"]))}}]),l}(u.PureComponent);Object(c.a)(k,"defaultProps",{tabMargin:"2em"});var S=k;S.Tab=O;t.a=S},g47E:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("A7aE"),c=n("itSE"),l=r.a.createElement,p=Object(o.memo)((function(e){var t=e.storyDesign.storyTheme.themeVariables.backgroundColor,n=e.storyDesign.storyTheme.themeVariables.bodyColor;return l(o.Fragment,null,l(c.a,e),l(a.a,{id:"570843656",dynamic:[n,t]},[".esri-view-user-storage div.legend-icon-container svg{fill:".concat(n,";}"),".esri-view-user-storage div.legend-icon-container{background-color:".concat(t,";}")]))}));t.a=Object(s.b)(p)},g764:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("O94r"),c=n.n(s),l=n("NX3A"),p=n("Z4N4"),u=n("2SGB"),d=n("A7aE"),h=r.a.createElement;t.a=Object(d.b)((function(e){var t=e.storyDesign.storyTheme.themeVariables,n=t.mixins.typography.body.size.baseline({returnStylesAsObject:!0}),i=t.mixins.typography.body.size.stepDown1({returnStylesAsObject:!0});return h("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:a.a.dynamic([["14773928",[l.a.spacing.xxs,t.secondaryBackgroundColor,l.a.print.backgroundColor,l.a.print.outlineColor,t.secondaryBackgroundHoverColor,l.a.spacing.xxs,l.a.spacing.xxs,t.mixins.typography.title.size.stepUp1({skip:["line-height"]}),t.titleColor,p.a.lineClamp(1),l.a.spacing.xxs,l.a.spacing.xxs,t.mixins.typography.body.size.baseline(),t.bodyColor,p.a.lineClamp(2,"calc(".concat(n["line-height"]," * ").concat(n["font-size"],")")),l.a.spacing.xxs,t.mixins.typography.body.size.stepDown1({skip:["line-height"]}),t.bodyColor,e.printMode?"":p.a.lineClamp(1),t.accentColor1,l.a.spacing.xxxs,l.a.print.textColor,e.thumbnailUrl,t.mixins.typography.title.size.baseline({skip:["line-height"]}),l.a.spacing.xxxs,l.a.spacing.xxxs,t.mixins.typography.body.size.stepDown1(),p.a.lineClamp(2,"calc(".concat(i["line-height"]," * ").concat(i["font-size"],")")),l.a.spacing.xxxs,t.mixins.typography.body.size.stepDown2({skip:["line-height"]})]]])+" "+(c()("embed-card",e.isMobileLayout&&"is-mobile")||"")},h("div",{className:a.a.dynamic([["14773928",[l.a.spacing.xxs,t.secondaryBackgroundColor,l.a.print.backgroundColor,l.a.print.outlineColor,t.secondaryBackgroundHoverColor,l.a.spacing.xxs,l.a.spacing.xxs,t.mixins.typography.title.size.stepUp1({skip:["line-height"]}),t.titleColor,p.a.lineClamp(1),l.a.spacing.xxs,l.a.spacing.xxs,t.mixins.typography.body.size.baseline(),t.bodyColor,p.a.lineClamp(2,"calc(".concat(n["line-height"]," * ").concat(n["font-size"],")")),l.a.spacing.xxs,t.mixins.typography.body.size.stepDown1({skip:["line-height"]}),t.bodyColor,e.printMode?"":p.a.lineClamp(1),t.accentColor1,l.a.spacing.xxxs,l.a.print.textColor,e.thumbnailUrl,t.mixins.typography.title.size.baseline({skip:["line-height"]}),l.a.spacing.xxxs,l.a.spacing.xxxs,t.mixins.typography.body.size.stepDown1(),p.a.lineClamp(2,"calc(".concat(i["line-height"]," * ").concat(i["font-size"],")")),l.a.spacing.xxxs,t.mixins.typography.body.size.stepDown2({skip:["line-height"]})]]])+" flex"},h("div",{className:a.a.dynamic([["14773928",[l.a.spacing.xxs,t.secondaryBackgroundColor,l.a.print.backgroundColor,l.a.print.outlineColor,t.secondaryBackgroundHoverColor,l.a.spacing.xxs,l.a.spacing.xxs,t.mixins.typography.title.size.stepUp1({skip:["line-height"]}),t.titleColor,p.a.lineClamp(1),l.a.spacing.xxs,l.a.spacing.xxs,t.mixins.typography.body.size.baseline(),t.bodyColor,p.a.lineClamp(2,"calc(".concat(n["line-height"]," * ").concat(n["font-size"],")")),l.a.spacing.xxs,t.mixins.typography.body.size.stepDown1({skip:["line-height"]}),t.bodyColor,e.printMode?"":p.a.lineClamp(1),t.accentColor1,l.a.spacing.xxxs,l.a.print.textColor,e.thumbnailUrl,t.mixins.typography.title.size.baseline({skip:["line-height"]}),l.a.spacing.xxxs,l.a.spacing.xxxs,t.mixins.typography.body.size.stepDown1(),p.a.lineClamp(2,"calc(".concat(i["line-height"]," * ").concat(i["font-size"],")")),l.a.spacing.xxxs,t.mixins.typography.body.size.stepDown2({skip:["line-height"]})]]])+" info"},h("h4",{className:a.a.dynamic([["14773928",[l.a.spacing.xxs,t.secondaryBackgroundColor,l.a.print.backgroundColor,l.a.print.outlineColor,t.secondaryBackgroundHoverColor,l.a.spacing.xxs,l.a.spacing.xxs,t.mixins.typography.title.size.stepUp1({skip:["line-height"]}),t.titleColor,p.a.lineClamp(1),l.a.spacing.xxs,l.a.spacing.xxs,t.mixins.typography.body.size.baseline(),t.bodyColor,p.a.lineClamp(2,"calc(".concat(n["line-height"]," * ").concat(n["font-size"],")")),l.a.spacing.xxs,t.mixins.typography.body.size.stepDown1({skip:["line-height"]}),t.bodyColor,e.printMode?"":p.a.lineClamp(1),t.accentColor1,l.a.spacing.xxxs,l.a.print.textColor,e.thumbnailUrl,t.mixins.typography.title.size.baseline({skip:["line-height"]}),l.a.spacing.xxxs,l.a.spacing.xxxs,t.mixins.typography.body.size.stepDown1(),p.a.lineClamp(2,"calc(".concat(i["line-height"]," * ").concat(i["font-size"],")")),l.a.spacing.xxxs,t.mixins.typography.body.size.stepDown2({skip:["line-height"]})]]])+" title"},e.title?e.title:h(u.a,{id:"builder.embed.card.noTitle"})),h("p",{className:a.a.dynamic([["14773928",[l.a.spacing.xxs,t.secondaryBackgroundColor,l.a.print.backgroundColor,l.a.print.outlineColor,t.secondaryBackgroundHoverColor,l.a.spacing.xxs,l.a.spacing.xxs,t.mixins.typography.title.size.stepUp1({skip:["line-height"]}),t.titleColor,p.a.lineClamp(1),l.a.spacing.xxs,l.a.spacing.xxs,t.mixins.typography.body.size.baseline(),t.bodyColor,p.a.lineClamp(2,"calc(".concat(n["line-height"]," * ").concat(n["font-size"],")")),l.a.spacing.xxs,t.mixins.typography.body.size.stepDown1({skip:["line-height"]}),t.bodyColor,e.printMode?"":p.a.lineClamp(1),t.accentColor1,l.a.spacing.xxxs,l.a.print.textColor,e.thumbnailUrl,t.mixins.typography.title.size.baseline({skip:["line-height"]}),l.a.spacing.xxxs,l.a.spacing.xxxs,t.mixins.typography.body.size.stepDown1(),p.a.lineClamp(2,"calc(".concat(i["line-height"]," * ").concat(i["font-size"],")")),l.a.spacing.xxxs,t.mixins.typography.body.size.stepDown2({skip:["line-height"]})]]])+" description"},e.description?e.description:h(u.a,{id:"builder.embed.card.noDescription"})),h("p",{className:a.a.dynamic([["14773928",[l.a.spacing.xxs,t.secondaryBackgroundColor,l.a.print.backgroundColor,l.a.print.outlineColor,t.secondaryBackgroundHoverColor,l.a.spacing.xxs,l.a.spacing.xxs,t.mixins.typography.title.size.stepUp1({skip:["line-height"]}),t.titleColor,p.a.lineClamp(1),l.a.spacing.xxs,l.a.spacing.xxs,t.mixins.typography.body.size.baseline(),t.bodyColor,p.a.lineClamp(2,"calc(".concat(n["line-height"]," * ").concat(n["font-size"],")")),l.a.spacing.xxs,t.mixins.typography.body.size.stepDown1({skip:["line-height"]}),t.bodyColor,e.printMode?"":p.a.lineClamp(1),t.accentColor1,l.a.spacing.xxxs,l.a.print.textColor,e.thumbnailUrl,t.mixins.typography.title.size.baseline({skip:["line-height"]}),l.a.spacing.xxxs,l.a.spacing.xxxs,t.mixins.typography.body.size.stepDown1(),p.a.lineClamp(2,"calc(".concat(i["line-height"]," * ").concat(i["font-size"],")")),l.a.spacing.xxxs,t.mixins.typography.body.size.stepDown2({skip:["line-height"]})]]])+" short-link"},e.printMode?e.url:e.providerUrl)),e.thumbnailUrl&&h("div",{className:a.a.dynamic([["14773928",[l.a.spacing.xxs,t.secondaryBackgroundColor,l.a.print.backgroundColor,l.a.print.outlineColor,t.secondaryBackgroundHoverColor,l.a.spacing.xxs,l.a.spacing.xxs,t.mixins.typography.title.size.stepUp1({skip:["line-height"]}),t.titleColor,p.a.lineClamp(1),l.a.spacing.xxs,l.a.spacing.xxs,t.mixins.typography.body.size.baseline(),t.bodyColor,p.a.lineClamp(2,"calc(".concat(n["line-height"]," * ").concat(n["font-size"],")")),l.a.spacing.xxs,t.mixins.typography.body.size.stepDown1({skip:["line-height"]}),t.bodyColor,e.printMode?"":p.a.lineClamp(1),t.accentColor1,l.a.spacing.xxxs,l.a.print.textColor,e.thumbnailUrl,t.mixins.typography.title.size.baseline({skip:["line-height"]}),l.a.spacing.xxxs,l.a.spacing.xxxs,t.mixins.typography.body.size.stepDown1(),p.a.lineClamp(2,"calc(".concat(i["line-height"]," * ").concat(i["font-size"],")")),l.a.spacing.xxxs,t.mixins.typography.body.size.stepDown2({skip:["line-height"]})]]])+" thumbnail"})),h(a.a,{id:"14773928",dynamic:[l.a.spacing.xxs,t.secondaryBackgroundColor,l.a.print.backgroundColor,l.a.print.outlineColor,t.secondaryBackgroundHoverColor,l.a.spacing.xxs,l.a.spacing.xxs,t.mixins.typography.title.size.stepUp1({skip:["line-height"]}),t.titleColor,p.a.lineClamp(1),l.a.spacing.xxs,l.a.spacing.xxs,t.mixins.typography.body.size.baseline(),t.bodyColor,p.a.lineClamp(2,"calc(".concat(n["line-height"]," * ").concat(n["font-size"],")")),l.a.spacing.xxs,t.mixins.typography.body.size.stepDown1({skip:["line-height"]}),t.bodyColor,e.printMode?"":p.a.lineClamp(1),t.accentColor1,l.a.spacing.xxxs,l.a.print.textColor,e.thumbnailUrl,t.mixins.typography.title.size.baseline({skip:["line-height"]}),l.a.spacing.xxxs,l.a.spacing.xxxs,t.mixins.typography.body.size.stepDown1(),p.a.lineClamp(2,"calc(".concat(i["line-height"]," * ").concat(i["font-size"],")")),l.a.spacing.xxxs,t.mixins.typography.body.size.stepDown2({skip:["line-height"]})]},[".embed-card.__jsx-style-dynamic-selector{display:block;padding:".concat(l.a.spacing.xxs,";-webkit-text-decoration:none;text-decoration:none;background-color:").concat(t.secondaryBackgroundColor,";}"),"body.print .embed-card.__jsx-style-dynamic-selector{background-color:".concat(l.a.print.backgroundColor,";border:1px solid ").concat(l.a.print.outlineColor,";}"),".embed-card.__jsx-style-dynamic-selector:hover,.embed-card.__jsx-style-dynamic-selector:focus{background-color:".concat(t.secondaryBackgroundHoverColor,";}"),".flex.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".info.__jsx-style-dynamic-selector{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;margin:0 ".concat(l.a.spacing.xxs," 0 0;}"),"html[dir='rtl'] .info.__jsx-style-dynamic-selector{margin:0 0 0 ".concat(l.a.spacing.xxs,";}"),".title.__jsx-style-dynamic-selector{".concat(t.mixins.typography.title.size.stepUp1({skip:["line-height"]})," color:").concat(t.titleColor,";").concat(p.a.lineClamp(1),";margin:").concat(l.a.spacing.xxs," 0 ").concat(l.a.spacing.xxs,";}"),".description.__jsx-style-dynamic-selector{".concat(t.mixins.typography.body.size.baseline()," color:").concat(t.bodyColor,";").concat(p.a.lineClamp(2,"calc(".concat(n["line-height"]," * ").concat(n["font-size"],")")),";margin-bottom:").concat(l.a.spacing.xxs,";}"),".short-link.__jsx-style-dynamic-selector{".concat(t.mixins.typography.body.size.stepDown1({skip:["line-height"]})," color:").concat(t.bodyColor,";").concat(e.printMode?"":p.a.lineClamp(1),";-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration-color:").concat(t.accentColor1,";text-decoration-color:").concat(t.accentColor1,";margin-bottom:").concat(l.a.spacing.xxxs,";}"),"body.print .title.__jsx-style-dynamic-selector,body.print .description.__jsx-style-dynamic-selector,body.print .short-link.__jsx-style-dynamic-selector{color:".concat(l.a.print.textColor,";}"),"body.print .short-link.__jsx-style-dynamic-selector{word-break:break-all;}",".thumbnail.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;height:14.3rem;width:21.4rem;background-image:url(".concat(e.thumbnailUrl,");background-position:center;background-repeat:no-repeat;background-size:cover;}"),".is-mobile.__jsx-style-dynamic-selector .title.__jsx-style-dynamic-selector{".concat(t.mixins.typography.title.size.baseline({skip:["line-height"]})," margin:").concat(l.a.spacing.xxxs," 0 ").concat(l.a.spacing.xxxs,";}"),".is-mobile.__jsx-style-dynamic-selector .description.__jsx-style-dynamic-selector{".concat(t.mixins.typography.body.size.stepDown1()," ").concat(p.a.lineClamp(2,"calc(".concat(i["line-height"]," * ").concat(i["font-size"],")")),";margin-bottom:").concat(l.a.spacing.xxxs,";}"),".is-mobile.__jsx-style-dynamic-selector .short-link.__jsx-style-dynamic-selector{".concat(t.mixins.typography.body.size.stepDown2({skip:["line-height"]}),";}"),".is-mobile.__jsx-style-dynamic-selector .thumbnail.__jsx-style-dynamic-selector{height:6.2rem;width:9.3rem;}"]))}))},gHjG:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return u}));var i=n("zygG"),a=n("ERkP"),o=n("AuFC"),r=n("sBNr"),s=function(e){Object(r.c)({name:"whats-new",id:"viewed-whats-new",value:e})},c=function(e){Object(r.c)({name:"whats-new",id:"dismissed-whats-new-nudge",value:e})},l=function(e,t){if(!t)return!1;var n=e.split("."),a=Object(i.a)(n,2),o=a[0],r=a[1],s=t.split("."),c=Object(i.a)(s,2),l=c[0],p=c[1];return o!==l||r!==p},p=function(){var e=Object(a.useContext)(o.a),t=Object(a.useState)(!1),n=t[0],i=t[1];Object(a.useEffect)((function(){var t=Object(r.b)({name:"whats-new",id:"viewed-whats-new"});t?l(e.APP_VERSION,t)&&i(!0):s("20.2")}),[]);return[n,function(){s(e.APP_VERSION),i(!1)}]},u=function(){var e=Object(a.useContext)(o.a),t=Object(a.useState)(!1),n=t[0],i=t[1];Object(a.useEffect)((function(){var t=Object(r.b)({name:"whats-new",id:"dismissed-whats-new-nudge"});t?l(e.APP_VERSION,t)&&i(!0):c(e.APP_VERSION)}),[]);return[n,function(){c(e.APP_VERSION),i(!1)}]}},gMe1:function(e,t,n){"use strict";n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return C})),n.d(t,"d",(function(){return k})),n.d(t,"h",(function(){return S})),n.d(t,"k",(function(){return P})),n.d(t,"j",(function(){return R})),n.d(t,"i",(function(){return E})),n.d(t,"c",(function(){return D})),n.d(t,"a",(function(){return M})),n.d(t,"g",(function(){return N})),n.d(t,"b",(function(){return L}));var i=n("fGyu"),a=n("VtSi"),o=n.n(a),r=n("HbGN"),s=n("zjfJ"),c=n("t7DY"),l=n("nVDo"),p=n("57qx"),u=n("hG09");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch(e){case"order:primary":return"primary";case"order:alternate":return"alternate";case"order:imagery":return"imagery";default:return"primary"}},m=function(e){return"string"===typeof e?function(e){return"locale:cn"===e?{type:"locale",value:"cn"}:{type:"order",value:h(e)}}(e):null!==e&&void 0!==e?e:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},p.a)},f=n("T+qs"),y=n("LJBs"),g=n("+JQK");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e,t){var n=b({},e);return Object.keys(n).filter((function(e){var i=n[e],a=i.title,o=i.description,r=i.image;return!(e in t)||!a&&!o&&!r})).forEach((function(e){delete n[e]})),n},O=function(){return{drawings:{},drawingCategories:l.d,popups:{},isShowingLegend:!1,isShowingMapFilter:!1,navigation:!0,clustering:!1,layerDefinitions:[],visConfigs:[],basemap:b({},p.a)}},w=function(e){return b({basemap:e.basemap,drawings:e.drawings,drawingCategories:e.drawingCategories,popups:x(e.popups,e.drawings),isShowingLegend:e.isShowingLegend,isShowingMapFilter:e.isShowingMapFilter},e.search&&{search:e.search},{},e.locate&&{locate:e.locate},{},e.clustering&&{clustering:e.clustering},{},!1===e.navigation&&{navigation:!1},{layerDefinitions:[],visConfigs:[]})},j=function(e){return b({},e&&e.extent&&{extent:e.extent.toJSON()},{scale:e&&e.scale||l.i,center:e&&e.center&&e.center.toJSON()||l.h})},C=function(e){return b({},j(e.mapView),{},e.state.drawingCategoryVisibilities&&{drawingCategoryVisibilities:e.state.drawingCategoryVisibilities})},k=function(e){var t=function(e){var t=e.state.drawings;if(!e.customGraphics)return t;var n=e.customGraphics.toJson();return Object.keys(t).forEach((function(e){var i=t[e],a=n[e];if(a&&i){var o=i.data,r=i.styles;(null===o||void 0===o?void 0:o.content)&&a.data&&(a.data.content=o.content),r&&(a.styles=r)}})),n}(e),n=function(e){var t=e.drawings;return e.drawingCategories.map((function(e){var n=e.drawingIds,i=Object(r.a)(e,["drawingIds"]);return b({drawingIds:n.filter((function(e){return e in t}))},i)}))}({drawings:t,drawingCategories:e.state.drawingCategories});return b({},w(e.state),{},j(e.mapView),{drawings:t,drawingCategories:n})},S=function(e){var t,n,i,a,r,s,c=arguments;return o.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=c.length>1&&void 0!==c[1]&&c[1],n=k(e),i=e.props.storyItem,a=!e.props.data,r=b({},n,{drawings:I(n.drawings)}),l.next=7,o.a.awrap(Object(g.b)({itemId:a?void 0:e.props.itemResourceName,data:r,storyItem:i}));case 7:(null===(s=l.sent)||void 0===s?void 0:s.success)?e.props.onPlaceMap(a?{itemId:s.itemId}:b({data:n},t&&{overridingData:C(e)})):console.error("Upsert failed.",s);case 9:case"end":return l.stop()}}),null,null,null,Promise)},I=function(e){var t=b({},e);return Object.keys(t).forEach((function(e){var n=b({},t[e]);if(n.styles){var i=b({},Object(y.a)(n));n.styles=i,Object.keys(n.styles).length||delete n.styles,t[e]=b({},n)}})),t},P=function(e){var t,n,i,a,r,s,c,l,p,d,h,m,f,y;return o.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:if(t=e.instance,n=e.mapData,i=e.shouldAnimate,a=t.mapView,r=t.home,s=t.props,a){g.next=4;break}return g.abrupt("return");case 4:if(c=n.extent,l=n.zoom,p=n.scale,d=n.center,h="undefined"!==typeof c,f=function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=4;break}return e.abrupt("return",Object(u.e)({view:a,zoom:l,scale:p,center:d}));case 4:a.zoom=l,a.scale=p,a.center=d;case 7:case"end":return e.stop()}}),null,null,null,Promise)},y=function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=4;break}return e.abrupt("return",Object(u.d)(a,c));case 4:return e.abrupt("return",Object(u.j)(a,c));case 5:case"end":return e.stop()}}),null,null,null,Promise)},!(m="undefined"!==typeof d&&("number"===typeof p||"number"===typeof l))||!h){g.next=20;break}if(!(s.isViewportMaxWidth("medium")||s.isPlacedCompactly)){g.next=16;break}return g.next=14,o.a.awrap(y());case 14:g.next=18;break;case 16:return g.next=18,o.a.awrap(f());case 18:g.next=28;break;case 20:if(!m||h){g.next=25;break}return g.next=23,o.a.awrap(f());case 23:g.next=28;break;case 25:if(m||!h){g.next=28;break}return g.next=28,o.a.awrap(y());case 28:return r&&(r.viewpoint=a.viewpoint),g.abrupt("return",Promise.resolve());case 30:case"end":return g.stop()}}),null,null,null,Promise)},R=function(e){var t,n;return o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(t=e.props.data){i.next=3;break}return i.abrupt("return");case 3:return i.next=5,o.a.awrap(P({instance:e,mapData:t}));case 5:n=b({},w(t),{drawingCategoryVisibilities:t.drawingCategoryVisibilities}),e.setState(n),T(e,n),A(e,n.popups);case 9:case"end":return i.stop()}}),null,null,null,Promise)},E=function(e,t){return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.awrap(P({instance:e,mapData:e.props.data,shouldAnimate:t}));case 2:if(e._isMounted){n.next=4;break}return n.abrupt("return");case 4:e.setState({idsOfDrawingTextsBeingShown:[]},(function(){T(e,e.props.data),A(e,e.props.data.popups)}));case 5:case"end":return n.stop()}}),null,null,null,Promise)},D=function(e){var t,n,i,a,r,s;return o.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.props,n=t.storyItem,i=t.itemId,a=t.storyDesign,c.next=3,o.a.awrap(Object(g.a)({itemId:i,storyItem:n}));case 3:r=c.sent,s=b({},r,{drawingCategories:Object(f.p)(r.drawingCategories,r.drawings),basemap:m(r.basemap),drawings:b({},Object(f.b)(r.drawings,a.storyTheme.themeVariables)),visConfigs:Array.isArray(r.visConfigs)?r.visConfigs:[]}),e.setState({expressMapData:s});case 6:case"end":return c.stop()}}),null,null,null,Promise)},T=function(e,t){if(e.updateToCustomGraphics(c.a.Dump,JSON.stringify(t.drawings)),e.updateToCustomGraphics(c.a.ReorderNumberedPoints,JSON.stringify(Object(f.h)(t.drawingCategories))),e.updateToCustomGraphics(c.a.ToggleMapfilter,"".concat(t.isShowingMapFilter)),e.updateToCustomGraphics(c.a.ClusteringPoint,!!t.clustering,!0),t.drawingCategoryVisibilities){var n=t.drawingCategories.reduce((function(e,n){var a,o,r=n.type,s=n.drawingIds;return null===(a=null===(o=t.drawingCategoryVisibilities)||void 0===o?void 0:o[r])||void 0===a||a?e.toShow=[].concat(Object(i.a)(e.toShow),Object(i.a)(s)):e.toHide=[].concat(Object(i.a)(e.toHide),Object(i.a)(s)),e}),{toHide:[],toShow:[]}),a=n.toHide,o=n.toShow;e.updateToCustomGraphics(c.a.Show,JSON.stringify(o)),e.updateToCustomGraphics(c.a.Hide,JSON.stringify(a))}},M=592,A=function(e,t){"function"===typeof e.props.storyItem.preloadItemResourceImage&&Object.keys(t).filter((function(e){return!!t[e].image})).map((function(e){return b({},t[e],{image:t[e].image||""})})).forEach((function(t){var n=t.image;t.id;e.props.storyItem.preloadItemResourceImage(n,M)}))},N=function(e,t){return"function"===typeof e.props.storyItem.getItemResourceImageFullUrl?e.props.storyItem.getItemResourceImageFullUrl(t,M):void 0},L=function(e){var t=e.drawingCategoryVisibilities,n=e.extent,i=e.scale,a=e.center;return b({},t&&{drawingCategoryVisibilities:t},{},n&&{extent:n},{},i&&{scale:i},{},a&&{center:a})}},gMl6:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("2SGB"),f=n("YQpL"),y=n("D57K"),g=n("Tc8g"),v=n("ZcpU"),b=n("KA4O"),x="https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/";function O(e,t){var n=y.a({endpoint:x,params:{}},t);return n.params.text=e,Object(v.c)(Object(b.a)(n.endpoint)+"/suggest",n)}var w=n("O94r"),j=n.n(w),C=n("8dId"),k=n("NX3A"),S=n("Z4N4"),I=n("m14E"),P=n("mvvZ"),R=function(e){var t=function(e){var t=RegExp(/(\([^\)]*\))$/g).exec(e);return t&&t.length>0?t[0]:""}(e),n=e.replace(t,"").trimRight(),i=function(e){var t=RegExp(/,\s([A-Z]{3})$/g).exec(e);return t&&t.length>1?t[1]:""}(n);return{placeName:"".concat(n.replace(i,"").replace(/,\s*$/,"")).concat(t?" "+t:""),countryCode:i}},E=h.a.createElement;function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var M=2,A=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(T()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"renderSearchBox",(function(){return E("div",{className:"search-bar"},E(C.a,{ref:t.searchBoxRef,id:"expressmap-search-box",size:"medium",clearBtnLabel:t.props.intl.formatMessage({id:"builder.map.clearSearch"}),label:t.props.intl.formatMessage({id:"builder.map.searchByLocation"}),placeholder:t.props.intl.formatMessage({id:"builder.map.searchByLocation"}),onChange:t.onSearchQueryChangeDebounced,onClear:t.onSearchQueryClear,onKeydown:t.onKeydown,preventAutoComplete:!0}))})),Object(l.a)(Object(o.a)(t),"renderDropdown",(function(){return(t.state.currentQuery.length>M&&t.state.suggestions.length>0||t.state.hasNoSearchResult)&&E("ul",{role:"listbox",className:u.a.dynamic([["2492294183",[k.a.spacing.xxs,k.a.color.white,S.a.shadow.sm(),k.a.spacing.lg,k.a.spacing.xs,k.a.font.weight.medium,k.a.color.platinum,k.a.color.beauBlue,k.a.spacing.xs,S.a.typography.body14(),k.a.color.ashGrey,k.a.font.weight.medium,S.a.typography.body14(),k.a.font.weight.medium,k.a.color.darkGreen,k.a.font.weight.bold,S.a.typography.blockReg(),k.a.color.coolGrey]]])},t.state.hasNoSearchResult&&E("div",{className:u.a.dynamic([["2492294183",[k.a.spacing.xxs,k.a.color.white,S.a.shadow.sm(),k.a.spacing.lg,k.a.spacing.xs,k.a.font.weight.medium,k.a.color.platinum,k.a.color.beauBlue,k.a.spacing.xs,S.a.typography.body14(),k.a.color.ashGrey,k.a.font.weight.medium,S.a.typography.body14(),k.a.font.weight.medium,k.a.color.darkGreen,k.a.font.weight.bold,S.a.typography.blockReg(),k.a.color.coolGrey]]])+" message"},E(m.a,{id:"builder.map.notAbleToFind"})),t.state.suggestions.map((function(e,n){var i=e.text,a=e.magicKey,o=R(i),r=o.placeName,s=o.countryCode;return E("li",{key:a+i,role:"button",onClick:t.onSuggestionClick,"data-magic-key":a,className:u.a.dynamic([["2492294183",[k.a.spacing.xxs,k.a.color.white,S.a.shadow.sm(),k.a.spacing.lg,k.a.spacing.xs,k.a.font.weight.medium,k.a.color.platinum,k.a.color.beauBlue,k.a.spacing.xs,S.a.typography.body14(),k.a.color.ashGrey,k.a.font.weight.medium,S.a.typography.body14(),k.a.font.weight.medium,k.a.color.darkGreen,k.a.font.weight.bold,S.a.typography.blockReg(),k.a.color.coolGrey]]])+" "+(j()({active:n===t.state.currentSuggestionIndex-1})||"")},E("span",{className:u.a.dynamic([["2492294183",[k.a.spacing.xxs,k.a.color.white,S.a.shadow.sm(),k.a.spacing.lg,k.a.spacing.xs,k.a.font.weight.medium,k.a.color.platinum,k.a.color.beauBlue,k.a.spacing.xs,S.a.typography.body14(),k.a.color.ashGrey,k.a.font.weight.medium,S.a.typography.body14(),k.a.font.weight.medium,k.a.color.darkGreen,k.a.font.weight.bold,S.a.typography.blockReg(),k.a.color.coolGrey]]])+" place-name"},E(I.a,{text:r,target:t.state.currentQuery.trim()})),E("span",{className:u.a.dynamic([["2492294183",[k.a.spacing.xxs,k.a.color.white,S.a.shadow.sm(),k.a.spacing.lg,k.a.spacing.xs,k.a.font.weight.medium,k.a.color.platinum,k.a.color.beauBlue,k.a.spacing.xs,S.a.typography.body14(),k.a.color.ashGrey,k.a.font.weight.medium,S.a.typography.body14(),k.a.font.weight.medium,k.a.color.darkGreen,k.a.font.weight.bold,S.a.typography.blockReg(),k.a.color.coolGrey]]])+" country-code"},s))})),E(u.a,{id:"2492294183",dynamic:[k.a.spacing.xxs,k.a.color.white,S.a.shadow.sm(),k.a.spacing.lg,k.a.spacing.xs,k.a.font.weight.medium,k.a.color.platinum,k.a.color.beauBlue,k.a.spacing.xs,S.a.typography.body14(),k.a.color.ashGrey,k.a.font.weight.medium,S.a.typography.body14(),k.a.font.weight.medium,k.a.color.darkGreen,k.a.font.weight.bold,S.a.typography.blockReg(),k.a.color.coolGrey]},["ul.__jsx-style-dynamic-selector{position:absolute;width:41.6rem;right:0;z-index:1;padding:".concat(k.a.spacing.xxs," 0;background:").concat(k.a.color.white,";").concat(S.a.shadow.sm()," border-radius:0 0 4px 4px;}"),'html[dir="rtl"] ul.__jsx-style-dynamic-selector{right:unset;left:0;}',"li.__jsx-style-dynamic-selector{cursor:pointer;height:".concat(k.a.spacing.lg,";padding:0 ").concat(k.a.spacing.xs,";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-weight:").concat(k.a.font.weight.medium,";-webkit-transition:background-color 0.2s;transition:background-color 0.2s;}"),"li.__jsx-style-dynamic-selector:hover{background-color:".concat(k.a.color.platinum,";}"),"li.active.__jsx-style-dynamic-selector{background-color:".concat(k.a.color.beauBlue,";}"),".message.__jsx-style-dynamic-selector{padding:0 ".concat(k.a.spacing.xs,";").concat(S.a.typography.body14(),";color:").concat(k.a.color.ashGrey,";font-weight:").concat(k.a.font.weight.medium,";}"),".place-name.__jsx-style-dynamic-selector{".concat(S.a.typography.body14(),";font-weight:").concat(k.a.font.weight.medium,";color:").concat(k.a.color.darkGreen,";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}"),".place-name.__jsx-style-dynamic-selector b.__jsx-style-dynamic-selector{font-weight:".concat(k.a.font.weight.bold,";}"),".country-code.__jsx-style-dynamic-selector{".concat(S.a.typography.blockReg()," color:").concat(k.a.color.coolGrey,";}")]))})),Object(l.a)(Object(o.a)(t),"onSuggestionClick",(function(e){var n=e.currentTarget.dataset.magicKey,i=t.state.suggestions.find((function(e){return e.magicKey===n}));i&&t.search(i.text,n).then((function(){t.onSearchSucceed(i.text)}))})),Object(l.a)(Object(o.a)(t),"search",(function(e,n){return function(e){var t,n={};return"string"===typeof e?(n.params={singleLine:e},t=x):(t=e.endpoint||x,n=Object(g.a)(e,["singleLine","address","address2","address3","neighborhood","city","subregion","region","postal","postalExt","countryCode","outFields","magicKey"],{params:y.a({},e.params)})),Object(v.c)(Object(b.a)(t)+"/findAddressCandidates",n).then((function(t){if("string"!==typeof e&&e.rawResponse)return t;var n=t.spatialReference;return t.candidates.forEach((function(e){e.location.spatialReference=n,e.extent&&(e.extent.spatialReference=n)})),t}))}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n&&{magicKey:n},{singleLine:e,params:{outFields:"Country,Place_addr,Addr_type,Type",locationType:"rooftop"}})).then((function(e){var n=e.candidates;if(n.length>0){var i=n[0];t.props.onSearch(i)}else t.setState({hasNoSearchResult:!0})})).catch((function(e){console.error("Something wrong with the `geocode` API call.",e)}))})),Object(l.a)(Object(o.a)(t),"onSearchQueryChange",(function(e){t.setState({currentQuery:e,hasNoSearchResult:!1,currentSuggestionIndex:0}),e.trim().length>M&&O(e).then((function(e){var n=e.suggestions;t.setState({suggestions:n})})).catch((function(e){console.error("Something wrong with the `suggest` API call.",e)}))})),Object(l.a)(Object(o.a)(t),"onSearchQueryClear",(function(){t.onSearchQueryChange("")})),Object(l.a)(Object(o.a)(t),"onKeydown",(function(e){switch(e.key){case"Esc":case"Escape":e.preventDefault(),t.dismissSuggestionList(),t.onSearchQueryChange("");break;case"Enter":t.onPressEnterToSubmitQuery();break;case"ArrowUp":e.preventDefault(),t.setState((function(e){return{currentSuggestionIndex:(e.currentSuggestionIndex+e.suggestions.length)%(e.suggestions.length+1)}}));break;case"ArrowDown":e.preventDefault(),t.setState((function(e){return{currentSuggestionIndex:(e.currentSuggestionIndex+1)%(e.suggestions.length+1)}}))}})),Object(l.a)(Object(o.a)(t),"onPressEnterToSubmitQuery",(function(){var e,n="";if(0===t.state.currentSuggestionIndex)e=t.search(t.state.currentQuery);else{var i=t.state.suggestions[t.state.currentSuggestionIndex-1];n=i.text,t.setState({currentQuery:n,currentSuggestionIndex:0}),e=t.search(i.text,i.magicKey)}e.then((function(){return t.onSearchSucceed(n)}))})),Object(l.a)(Object(o.a)(t),"dismissSuggestionList",(function(){t.setState({suggestions:[]})})),Object(l.a)(Object(o.a)(t),"onSearchSucceed",(function(e){t.searchBoxRef.current&&e&&t.searchBoxRef.current.setValue(e),t.dismissSuggestionList()})),t.state={currentQuery:"",suggestions:[],hasNoSearchResult:!1,currentSuggestionIndex:0},t.onSearchQueryChangeDebounced=Object(P.c)(t.onSearchQueryChange,300),t.searchBoxRef=Object(d.createRef)(),t}return Object(a.a)(p,[{key:"render",value:function(){return E("div",{className:u.a.dynamic([["3140158707",[this.props.fullWidth?"100%":"33.3%",this.props.fullWidth?"unset":"32rem"]]])+" map-search"},this.renderSearchBox(),this.renderDropdown(),E(u.a,{id:"3140158707",dynamic:[this.props.fullWidth?"100%":"33.3%",this.props.fullWidth?"unset":"32rem"]},["div.__jsx-style-dynamic-selector{position:relative;width:".concat(this.props.fullWidth?"100%":"33.3%",";max-width:").concat(this.props.fullWidth?"unset":"32rem",";}")]))}}]),p}(d.PureComponent);t.a=Object(f.c)(A)},gcFr:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("NX3A"),c=n("Z4N4"),l=n("A7aE"),p=n("7Zgl"),u=n("0bxY"),d=r.a.createElement,h=Object(o.memo)((function(e){var t=e.selector,n=e.storyDesign.storyTheme.themeVariables;return d(o.Fragment,null,d(a.a,{id:"2874439615",dynamic:[t,n.mixins.typography.body.size.stepDown1(),s.a.spacing.xxxxs,t,c.a.hexA(n.bodyMutedColor,.5),t,e.hasRichTextEditor?".ql-editor a":"a",n.bodyMutedColor,n.accentColor1,t,e.hasRichTextEditor?".ql-editor a:visited":"a:visited",Object(p.d)(.75,n.bodyMutedColor,n.backgroundColor),Object(p.d)(.75,n.accentColor1,n.backgroundColor),t,e.hasRichTextEditor?".ql-editor a:hover":"a:hover",n.accentColor1,s.a.responsiveBreakpoints.medium,t,n.mixins.typography.body.size.baseline()]},["".concat(t,"{").concat(n.mixins.typography.body.size.stepDown1()," padding:").concat(s.a.spacing.xxxxs," 0;word-break:break-word;}"),"".concat(t," .ql-editor.ql-blank::before{font-style:initial;color:").concat(c.a.hexA(n.bodyMutedColor,.5),";}"),"".concat(t," ").concat(e.hasRichTextEditor?".ql-editor a":"a","{color:").concat(n.bodyMutedColor,";-webkit-text-decoration:none;text-decoration:none;border-bottom:0.1rem solid ").concat(n.accentColor1,";}"),"".concat(t," ").concat(e.hasRichTextEditor?".ql-editor a:visited":"a:visited","{color:").concat(Object(p.d)(.75,n.bodyMutedColor,n.backgroundColor),";border-bottom-color:").concat(Object(p.d)(.75,n.accentColor1,n.backgroundColor),";}"),"".concat(t," ").concat(e.hasRichTextEditor?".ql-editor a:hover":"a:hover","{cursor:pointer;border-bottom:0.2rem solid ").concat(n.accentColor1,";}"),"@media (min-width:".concat(s.a.responsiveBreakpoints.medium,"){body:not(.print) ").concat(t,"{").concat(n.mixins.typography.body.size.baseline(),";}}")]),Object(u.b)(n),Object(u.a)(e.customContentColors||[],n),Object(u.a)(e.customAttributionColors||[],n))}));t.a=Object(l.b)(h)},gzH7:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("O94r"),h=n.n(d),m=n("NX3A"),f=n("Z4N4"),y=u.a.createElement;function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(g()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){var e="3.2rem",t=m.a.color;return y("button",{disabled:this.props.isDisabled,onClick:this.props.onClick,"aria-label":this.props.ariaLabel,className:l.a.dynamic([["4033270407",[f.a.center(),t.darkGreen,e,e,this.props.isDisabled?"not-allowed":"pointer",t.beauBlue,t.haikuBlack,t.beauBlue,t.platinum,t.ashGrey]]])+" "+(h()("tool-button",{active:this.props.isActive})||"")},this.props.children,y(l.a,{id:"4033270407",dynamic:[f.a.center(),t.darkGreen,e,e,this.props.isDisabled?"not-allowed":"pointer",t.beauBlue,t.haikuBlack,t.beauBlue,t.platinum,t.ashGrey]},["button.__jsx-style-dynamic-selector{".concat(f.a.center(),";background-color:transparent;color:").concat(t.darkGreen,";width:").concat(e,";height:").concat(e,";cursor:").concat(this.props.isDisabled?"not-allowed":"pointer",";border-radius:0.2rem;-webkit-transition:color 0.2s,background-color 0.2s,box-shadow 0.2s;transition:color 0.2s,background-color 0.2s,box-shadow 0.2s;}"),"button.active.__jsx-style-dynamic-selector:not([disabled]){background-color:".concat(t.beauBlue,";color:").concat(t.haikuBlack,";}"),"button.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector:not([disabled]){outline:0;box-shadow:0 0 0 1px ".concat(t.beauBlue,";}"),"button.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector:not([disabled]):not(.active){background-color:".concat(t.platinum,";}"),"button[disabled].__jsx-style-dynamic-selector{color:".concat(t.ashGrey,";}")]))}}]),c}(p.PureComponent);t.a=v},"h/OP":function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("liFR"),f=n("NX3A"),y=n("Z4N4"),g=h.a.createElement;function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(v()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"onClick",(function(){t.props.onClick(),t.setState({isTooltipShown:!1})})),Object(l.a)(Object(o.a)(t),"onButtonMouseEnter",(function(){t.setState({isTooltipShown:!0})})),Object(l.a)(Object(o.a)(t),"onButtonMouseLeave",(function(){t.setState({isTooltipShown:!1})})),t.state={isTooltipShown:!1},t}return Object(a.a)(p,[{key:"render",value:function(){return g(m.a,{visible:this.state.isTooltipShown,tooltipContent:this.props.tooltipContent},g("button",{onClick:this.onClick,onMouseEnter:this.onButtonMouseEnter,onMouseLeave:this.onButtonMouseLeave,"aria-label":this.props.tooltipContent,className:u.a.dynamic([["390854439",[f.a.color.white,f.a.color.black,f.a.font.size.medium,y.a.shadow.xs()]]])+" raised-toggle-button"},this.props.children,g(u.a,{id:"390854439",dynamic:[f.a.color.white,f.a.color.black,f.a.font.size.medium,y.a.shadow.xs()]},[".raised-toggle-button.__jsx-style-dynamic-selector{background-color:".concat(f.a.color.white,";border-radius:50%;padding:1.2rem;line-height:0;color:").concat(f.a.color.black,";font-size:").concat(f.a.font.size.medium,";").concat(y.a.shadow.xs(),";}")])))}}]),p}(d.PureComponent);t.a=b},h88A:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"legend",path:"M11 6V5h18v1zm18 7v-1H11v1zm0 7v-1H11v1zm0 7v-1H11v1zM5.499 10A2.5 2.5 0 1 0 8 12.5 2.502 2.502 0 0 0 5.499 10zM3 8h5V3H3zm0 14h5v-5H3zm2.616 2.135a.246.246 0 0 0-.44.008l-2.158 4.505a.246.246 0 0 0 .221.352h4.522a.246.246 0 0 0 .217-.36z",viewBox:"0 0 32 32",flipRTL:!0})}return c}(n("MEC2").a)},hG09:function(e,t,n){"use strict";n.d(t,"j",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return y})),n.d(t,"f",(function(){return g})),n.d(t,"e",(function(){return v})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return x})),n.d(t,"l",(function(){return O})),n.d(t,"m",(function(){return w})),n.d(t,"i",(function(){return j})),n.d(t,"a",(function(){return C})),n.d(t,"k",(function(){return S})),n.d(t,"b",(function(){return I}));var i=n("HbGN"),a=n("VtSi"),o=n.n(a),r=n("zjfJ"),s=n("zygG"),c=n("sCFI");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={spatialReference:{latestWkid:3857,wkid:102100}},d={duration:500,easing:"ease-in-out"},h=function(e){return e.declaredClass?Promise.resolve(e):Object(c.loadModules)(["esri/Viewpoint"]).then((function(t){return(0,Object(s.a)(t,1)[0].fromJSON)(e)}))},m=function(e,t){t&&(e.extent=t)},f=function(e){var t=e.drawingNode,n=e.view,i=e.scale,a=e.skipAnimation;if(n&&t){var o=p({x:t.proX,y:t.proY},u,{type:"point"});v({view:n,center:o,scale:i,skipAnimation:a})}},y=function(e,t,n){var i,a,r,l;return o.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(t){p.next=2;break}return p.abrupt("return");case 2:if(!t.declaredClass){p.next=6;break}i=t,p.next=12;break;case 6:return p.next=8,o.a.awrap(Object(c.loadModules)(["esri/geometry/support/jsonUtils"]));case 8:a=p.sent,r=Object(s.a)(a,1),l=r[0].fromJSON,i=l(t);case 12:return p.abrupt("return",e.goTo(i,n?{duration:0}:d));case 13:case"end":return p.stop()}}),null,null,null,Promise)},g=function(e,t,n){return o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.t0=t,!i.t0){i.next=8;break}return i.t1=e,i.next=5,o.a.awrap(h(t));case 5:i.t2=i.sent,i.t3=n?{duration:0}:d,i.t0=i.t1.goTo.call(i.t1,i.t2,i.t3);case 8:return i.abrupt("return",i.t0);case 9:case"end":return i.stop()}}),null,null,null,Promise)},v=function(e){var t=e.view,n=e.skipAnimation,a=e.center,o=Object(i.a)(e,["view","skipAnimation","center"]);return Object(c.loadModules)(["esri/geometry/support/jsonUtils"]).then((function(e){var i=Object(s.a)(e,1)[0].fromJSON;return t.goTo(p({},o,{center:i(a)}),n?{duration:0}:d).catch((function(e){"view:goto-interrupted"!==e.name&&console.error(e)}))}))},b=function(e,t){e.goTo(t)},x=function(e){var t,n,i;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.view,n=e.viewpoint,i=e.skipAnimation,!n){a.next=10;break}return a.t1=t,a.next=5,o.a.awrap(h(n));case 5:a.t2=a.sent,a.t3={animate:!i},a.t0=a.t1.goTo.call(a.t1,a.t2,a.t3),a.next=11;break;case 10:a.t0=Promise.resolve();case 11:return a.abrupt("return",a.t0);case 12:case"end":return a.stop()}}),null,null,null,Promise)},O=function(e,t){var n;return o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e&&t){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,o.a.awrap(h(t));case 4:n=i.sent,e.viewpoint=n.clone();case 6:case"end":return i.stop()}}),null,null,null,Promise)},w=function(e,t){e.environment.lighting&&(e.environment.lighting.date=t)},j=function(e){var t=e.userSession,n=e.clientId,i=e.portalHost;Object(c.loadModules)(["esri/identity/IdentityManager","esri/identity/OAuthInfo"]).then((function(e){var a=Object(s.a)(e,2),o=a[0],r=a[1];if(t&&t.token){var c={expires:t.tokenExpires,token:t.token,userId:t.username,server:t.portal};o.registerToken(c)}o.useSignInPage=!1,o.registerOAuthInfos([new r({appId:n,portalUrl:"https://".concat(i),popup:!0,popupCallbackUrl:"/oauth-callback?isPopupLogin=true"})])}))},C=function(e,t,n){if(e.isAnimating)"function"===typeof e.stopAnimation&&e.stopAnimation(t);else{var i=e.opacity;e.stopAnimation=function(t){e.opacity=i,e.visible=t,e.isAnimating=!1};t&&(e.visible=!0,e.opacity=0),e.isAnimating=!0,requestAnimationFrame((function a(){if(e.isAnimating){if(e.opacity>i)return e.opacity=i,void(e.isAnimating=!1);if(e.opacity<0)return e.visible=!1,e.opacity=i,void(e.isAnimating=!1);var o=1e3/(60*(n||500));e.opacity+=t?o:-o,requestAnimationFrame(a)}}))}},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object.keys(e).reduce((function(t,n){var i=e[n].nodes[0];return"number"!==typeof(null===i||void 0===i?void 0:i.proX)||"number"!==typeof(null===i||void 0===i?void 0:i.proY)?t:{xmin:Math.min(t.xmin,i.proX),ymin:Math.min(t.ymin,i.proY),xmax:Math.max(t.xmax,i.proX),ymax:Math.max(t.ymax,i.proY)}}),{xmin:Number.MAX_VALUE,ymin:Number.MAX_VALUE,xmax:-1*Number.MAX_VALUE,ymax:-1*Number.MAX_VALUE});if(t>0){var i=n.xmax-n.xmin,a=n.ymax-n.ymin,o=i*t,r=a*t;n.xmax+=o,n.xmin-=o,n.ymax+=r,n.ymin-=r}return p({},u,{},n)},S=function(e){var t,n,i,a,r,s;return o.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.geometries,n=e.view,i=e.skipAnimation,0!==(a=Object.keys(t)).length){o.next=4;break}return o.abrupt("return");case 4:if(1!==a.length){o.next=7;break}return f({view:n,drawingNode:null===(r=t[a[0]])||void 0===r?void 0:r.nodes[0],skipAnimation:i}),o.abrupt("return");case 7:s=k(t,.5),y(n,s,i);case 9:case"end":return o.stop()}}),null,null,null,Promise)},I=function(){var e,t,n,i;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.a.awrap(Object(c.loadModules)(["esri/layers/support/TileInfo"]));case 2:return e=a.sent,t=Object(s.a)(e,1),n=t[0],i=n.create({size:512}),a.abrupt("return",(function(e){return Math.round(i.scaleToZoom(e))}));case 7:case"end":return a.stop()}}),null,null,null,Promise)}},hJks:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("NX3A"),f=n("Z4N4"),y=n("nylY"),g=n("TLr9"),v=h.a.createElement,b=function(e){var t=e.placement,n=e.boundariesSelector,i=e.targetSelector,a=e.offset,o=e.children,r=Object(d.useRef)(null);return Object(d.useEffect)((function(){var e=document.querySelector(i);if(e&&r.current){var o=n?document.querySelector(n):e.parentElement;o&&o.classList.add("with-popper-loader");var s=Object(g.b)(e,{content:r.current,placement:t,appendTo:o||"parent",showOnCreate:!0,hideOnClick:!1,interactive:!0,sticky:!0,plugins:[g.c],trigger:"manual",offset:a||[0,0],popperOptions:{modifiers:[{name:"preventOverflow",options:{boundary:o||"viewport"}}]}});return function(){s&&!s.state.isDestroyed&&s.destroy()}}}),[i,n]),v("div",{className:"jsx-3654686356 popper-loader"},v("div",{ref:r,className:"jsx-3654686356"},o),v(u.a,{id:"3654686356"},[".with-popper-loader .tippy-box{outline:0;}"]))},x=n("Abkm"),O=n("A7aE"),w=n("RP1v"),j=n("F9qf"),C=n("4EqL"),k=n("t3zI"),S=n("rwCY"),I=n("v7Aj"),P=n("DmvT"),R=n("xPLh"),E=h.a.createElement;function D(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var T=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(D()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"renderPopper",(function(){var t=!(!e.props.description||!Object(x.e)(e.props.description).trim()),n=e.props.title||t,i=t||e.props.image,a=e.props.shouldIgnoreTheme?m.a.color.white:e.props.storyDesign.storyTheme.themeVariables.backgroundColor;return E("div",{role:"button",onClick:e.readMoreAndGoFullScreen,className:u.a.dynamic([["297212696",[m.a.spacing.xxxs,a,f.a.shadow.lg(),m.a.spacing.xxs,f.a.gappedList(m.a.spacing.xxxs),e.props.shouldIgnoreTheme?m.a.color.darkGreen:e.props.storyDesign.storyTheme.themeVariables.bodyColor]]])+" popup-summary"},e.props.type!==w.c.TitleOnly&&E(d.Fragment,null,e.props.onClose&&e.renderCloseButton(),E(C.a,{src:e.props.image,styleMixin:"min-width: 19.2rem"})),n&&E("div",{className:u.a.dynamic([["297212696",[m.a.spacing.xxxs,a,f.a.shadow.lg(),m.a.spacing.xxs,f.a.gappedList(m.a.spacing.xxxs),e.props.shouldIgnoreTheme?m.a.color.darkGreen:e.props.storyDesign.storyTheme.themeVariables.bodyColor]]])+" text"},e.props.type!==w.c.TitleOnly&&e.props.groupName&&E(S.a,{text:e.props.groupName}),e.props.title&&E(j.a,{text:e.props.title}),e.props.type===w.c.TitleOnly?i&&E(R.a,{onClick:e.readMore}):E(k.a,{description:e.props.description,readMore:"function"===typeof e.props.onClickInPopupSummary?e.readMore:void 0}),e.props.type!==w.c.TitleOnly&&e.props.children),E(u.a,{id:"297212696",dynamic:[m.a.spacing.xxxs,a,f.a.shadow.lg(),m.a.spacing.xxs,f.a.gappedList(m.a.spacing.xxxs),e.props.shouldIgnoreTheme?m.a.color.darkGreen:e.props.storyDesign.storyTheme.themeVariables.bodyColor]},[".popup-summary.__jsx-style-dynamic-selector{max-width:19.2rem;display:inline-block;margin:".concat(m.a.spacing.xxxs,";background-color:").concat(a,";").concat(f.a.shadow.lg()," text-align:left;}"),"html[dir='rtl'] .popup-summary.__jsx-style-dynamic-selector{text-align:right;}",".text.__jsx-style-dynamic-selector{padding:".concat(m.a.spacing.xxs,";").concat(f.a.gappedList(m.a.spacing.xxxs),";justify-items:start;overflow-wrap:break-word;color:").concat(e.props.shouldIgnoreTheme?m.a.color.darkGreen:e.props.storyDesign.storyTheme.themeVariables.bodyColor,";}"),".text.__jsx-style-dynamic-selector>div{min-width:0;}"]))})),Object(l.a)(Object(o.a)(e),"renderCloseButton",(function(){return E("div",{className:u.a.dynamic([["1158153575",[e.shouldCloseButtonTakeSpace()?m.a.spacing.xxs:0]]])+" relative-container"},E("div",{className:u.a.dynamic([["1158153575",[e.shouldCloseButtonTakeSpace()?m.a.spacing.xxs:0]]])+" absolute-container"},E(I.a,{size:"3.2rem",onClick:e.props.onClose},E(y.a,{height:m.a.spacing.xxs,width:"auto",color:e.props.shouldIgnoreTheme?m.a.color.darkGreen:e.props.storyDesign.storyTheme.themeVariables.bodyColor}))),E(u.a,{id:"1158153575",dynamic:[e.shouldCloseButtonTakeSpace()?m.a.spacing.xxs:0]},[".relative-container.__jsx-style-dynamic-selector{position:relative;height:".concat(e.shouldCloseButtonTakeSpace()?m.a.spacing.xxs:0,";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}")]))})),Object(l.a)(Object(o.a)(e),"readMore",(function(){"function"===typeof e.props.onClickInPopupSummary&&e.props.onClickInPopupSummary(e.props.id)})),Object(l.a)(Object(o.a)(e),"readMoreAndGoFullScreen",(function(){e.props.isFullScreen?e.readMore():"function"===typeof e.props.onClickInPopupSummary&&P.b(e.props.description)&&e.props.onClickInPopupSummary(e.props.id,!0)})),Object(l.a)(Object(o.a)(e),"shouldCloseButtonTakeSpace",(function(){return e.props.onClose&&!e.props.image})),e}return Object(a.a)(p,[{key:"render",value:function(){if(this.props.type===w.c.Hidden)return null;if(!(this.props.title||this.props.description||this.props.image))return null;var e="#pa-".concat(this.props.id);return E(b,{targetSelector:e,placement:this.props.placement||"right-end",boundariesSelector:this.props.boundariesSelector,offset:[8,0]},this.renderPopper())}}]),p}(d.PureComponent);Object(l.a)(T,"defaultProps",{type:w.c.Default});t.a=Object(O.b)(T)},hndT:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("V+ka"),h=n("NX3A"),m=u.a.createElement;function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(f()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return m("div",{className:l.a.dynamic([["642640403",[h.a.responsiveBreakpoints.large,this.props.appOffset.top]]])+" side-cover-container"},this.props.children,m(l.a,{id:"642640403",dynamic:[h.a.responsiveBreakpoints.large,this.props.appOffset.top]},["body.print .side-cover-container.__jsx-style-dynamic-selector,.side-cover-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:auto;min-height:0;}","@media (min-width:".concat(h.a.responsiveBreakpoints.large,"){.side-cover-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;min-height:80rem;height:calc(100vh - ").concat(this.props.appOffset.top,");}}")]))}}]),c}(p.PureComponent);t.a=Object(d.b)(y)},iBgQ:function(e,t,n){"use strict";var i=n("zygG"),a=n("VtSi"),o=n.n(a),r=n("9fIP"),s=n("MMYH"),c=n("zjfJ"),l=n("sCFI"),p=n("mvvZ"),u=n("Abkm"),d=n("hG09"),h=n("QhVD"),m=n("K/z8"),f=n("sRHE"),y=n("8K1b"),g=function(){function e(t,n,i,a){Object(r.a)(this,e),Object(c.a)(this,"_featureLoaded",!1),this.esriMap=n,this.featureLayerData=t,this.featureLayerType=t.type,this.featureLayerID=i,this.EsriFeatureLayer=a}return Object(s.a)(e,[{key:"getFeatureLayer",value:function(){return this._featureLoaded?this._featureLayer:this.createFeatureLayer()}},{key:"simpleLocation",value:function(e,t){var n={type:"simple",symbol:this.createLocationSymbol(t),label:e};return this.currentRenderFields=[""],this.currentVisType=h.d.simpleLocation,n}},{key:"classBreaks",value:function(e,t){var n={type:"class-breaks",field:t.field,defaultSymbol:t.defaultSymbol,classBreakInfos:t.classBreakInfos,legendOptions:{title:e}};return this.currentRenderFields=[t.field],this.currentVisType=h.d.classBreak,n}},{key:"numColor",value:function(e,t){var n={type:"color",field:t.colorField,stops:t.colorStops},i={type:"simple",symbol:t.defaultSymbol,visualVariables:[n],label:e};return this.currentRenderFields=[t.colorField],this.currentVisType=h.d.numColor,i}},{key:"numSize",value:function(e,t){var n={type:"size",field:t.sizeField,stops:t.sizeStops},i={type:"simple",symbol:t.defaultSymbol,visualVariables:[n],label:e};return this.currentRenderFields=[t.sizeField],this.currentVisType=h.d.numSize,i}},{key:"getRenderer",value:function(){return this._featureLayer?this._featureLayer.renderer:null}},{key:"changeRendererSimpleLocation",value:function(e){return{type:"simple",symbol:this.createLocationSymbol(e)}}},{key:"changeRendererClassbreak",value:function(e,t){if(this._featureLayer){var n=this._featureLayer.renderer.clone();return{defaultSymbol:e,classBreakInfos:t,type:n.type,field:n.field}}return null}},{key:"changeRendererNumColor",value:function(e,t){return this._featureLayer?{visualVariables:t,type:"simple",symbol:e,label:this._featureLayer.renderer.clone().label}:null}},{key:"changeRendererNumSize",value:function(e,t){if(this._featureLayer){var n=this._featureLayer.renderer.clone(),i=n.visualVariables;return{type:"simple",symbol:e,label:n.label,visualVariables:i}}return null}},{key:"createFeatureLayer",value:function(){if(this._featureLoaded)return this._featureLayer;var e;if(this.featureLayerType===h.c.serviceUrl)e=new this.EsriFeatureLayer({url:this.featureLayerData.serviceUrl.url,id:this.featureLayerID,outFields:["*"]});else{var t=this.featureLayerData.clientSideGraphics;e=new this.EsriFeatureLayer({fields:t.fields,objectIdField:t.objectIdFieldName,spatialReference:t.spatialReference,geometryType:t.geometryType,source:t.features})}return this._featureLayer=e,this._featureLoaded=!0,this.featureLayerType,h.c.clientSideGraphics,e}}]),e}();function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){Object(y.a)(i,e);var t,n=(t=i,function(){var e,n=Object(f.a)(t);if(v()){var i=Object(f.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(m.a)(this,e)});function i(){return Object(r.a)(this,i),n.apply(this,arguments)}return Object(s.a)(i,[{key:"createLocationSymbol",value:function(e){return{type:"simple-line",color:e.color,width:e.width,cap:e.cap,join:e.join,style:e.style}}},{key:"createSizeSymbol",value:function(e){return{type:e.type,style:e.style,cap:e.cap,join:e.join,width:e.width}}},{key:"createColorSymbol",value:function(e){return{type:e.type,style:e.style,cap:e.cap,color:e.color,join:e.join}}},{key:"createDefaultSymbol",value:function(e){return{type:e.type,style:e.style,cap:e.cap,join:e.join,width:e.width}}}]),i}(g);function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var w={esriGeometryPoint:function(e){Object(y.a)(i,e);var t,n=(t=i,function(){var e,n=Object(f.a)(t);if(x()){var i=Object(f.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(m.a)(this,e)});function i(){return Object(r.a)(this,i),n.apply(this,arguments)}return Object(s.a)(i,[{key:"createLocationSymbol",value:function(e){return{type:"picture-marker",url:e.url,width:e.width,height:e.height}}},{key:"createSizeSymbol",value:function(e){return{type:e.type,style:e.style,size:e.size,outline:e.outline}}},{key:"createColorSymbol",value:function(e){return{type:e.type,style:e.style,color:e.color,outline:e.outline}}},{key:"createDefaultSymbol",value:function(e){return{type:e.type,style:e.style,outline:e.outline}}}]),i}(g),esriGeometryPolyline:b,esriGeometryPolygon:function(e){Object(y.a)(i,e);var t,n=(t=i,function(){var e,n=Object(f.a)(t);if(O()){var i=Object(f.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(m.a)(this,e)});function i(){return Object(r.a)(this,i),n.apply(this,arguments)}return Object(s.a)(i,[{key:"createLocationSymbol",value:function(e){return{type:"simple-fill",color:e.color,outline:e.outline,style:e.style}}},{key:"createSizeSymbol",value:function(e){return{type:e.type,style:e.style,outline:e.outline}}},{key:"createColorSymbol",value:function(e){return{type:e.type,style:e.style,color:e.color,outline:e.outline}}},{key:"createDefaultSymbol",value:function(e){return{type:e.type,style:e.style,outline:e.outline}}}]),i}(g)},j=function e(t,n,i,a,o){return Object(r.a)(this,e),new w[t](n,i,a,o)},C=n("Qy73"),k=n("nVDo"),S=n("AEMd"),I=function(){function e(t){var n=this,a=t.mapView,s=t.themeVariables,u=t.updateRender,d=t.updateHistogram;Object(r.a)(this,e),Object(c.a)(this,"info",{}),Object(c.a)(this,"layerIds",[]),Object(c.a)(this,"layerRenderers",{}),Object(c.a)(this,"updateToRemoveLayers",(function(e){var t=e.map((function(e){return e.dataSignature}));n.layerIds.filter((function(e){return!t.includes(e)})).forEach((function(e){var t=n.map.findLayerById(e);t&&n.map.remove(t),n.layerIds=n.layerIds.filter((function(t){return t!==e})),delete n.info[e]}))})),Object(c.a)(this,"updateToAddLayers",(function(e){var t;return o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:t=function(e,t){var i;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=e.dataSignature,n.shouldZoom=!!e.isNewlyCreated,!(i in n.info)){a.next=4;break}return a.abrupt("return");case 4:return n.layerIds[t]=i,a.t0=i,a.t1=e.rendererSignature,a.t2=e.renderer.colorIndex,a.next=10,o.a.awrap(n.getNewVisualization(e));case 10:a.t3=a.sent,n.info[i]={id:a.t0,rendererSig:a.t1,colorRampOrder:a.t2,vis:a.t3},n.createLayerRenderer(e,t);case 13:case"end":return a.stop()}}),null,null,null,Promise)},Object(p.b)(e,t);case 2:case"end":return i.stop()}}),null,null,null,Promise)})),Object(c.a)(this,"updateToReorderLayers",(function(e){n.swapLayersOnMap(),n.layerIds=e})),Object(c.a)(this,"loadColorModuleForGettingColorRamps",(function(){var e;return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.getColorRampsByIndex){t.next=5;break}return t.next=3,o.a.awrap(Object(S.i)());case 3:e=t.sent,n.getColorRampsByIndex=function(t){var i=n.themeVariables.colorRampDefinitions[t],a=i.theme,o=i.name,r=i.reverse,s=e.getSchemeByName({basemap:"",geometryType:"point",theme:a,name:o});return(r?e.flipColors(s):s).colors};case 5:case"end":return t.stop()}}),null,null,null,Promise)})),Object(c.a)(this,"updateColorToLayer",(function(e,t){var i;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:i=t.renderer.colorIndex,n.info[n.layerIds[e]].colorRampOrder=i;case 2:case"end":return a.stop()}}),null,null,null,Promise)})),Object(c.a)(this,"createLayerRenderer",(function(e,t){var i=e.dataSignature,a=e.renderer,o=e.data;n.createRenderer(t,a.visType,n.getGeometryTypeFromConf(e),a.fields,a.rendererConf,i+a.fields[0],n.info[i].colorRampOrder,o.stats)})),Object(c.a)(this,"getNewVisualization",(function(e){return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=j,t.t1=n.getGeometryTypeFromConf(e),t.t2=e.data,t.t3=n.map,t.t4=e.dataSignature,t.next=7,o.a.awrap(n.loadModule("esri/layers/FeatureLayer"));case 7:return t.t5=t.sent,t.abrupt("return",new t.t0(t.t1,t.t2,t.t3,t.t4,t.t5));case 9:case"end":return t.stop()}}),null,null,null,Promise)})),Object(c.a)(this,"swapLayersOnMap",(function(){var e=n.map.findLayerById(n.layerIds[0]);e&&n.map.reorder(e,1)})),Object(c.a)(this,"loadModule",(function(e){var t,n,a;return o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.awrap(Object(l.loadModules)([e]));case 2:return t=r.sent,n=Object(i.a)(t,1),a=n[0],r.abrupt("return",a);case 6:case"end":return r.stop()}}),null,null,null,Promise)})),this.map=a.map,this.mapView=a,this.theme=k.n,this.themeVariables=s,this.updateRender=u,this.updateHistogram=d}return Object(s.a)(e,[{key:"update",value:function(e){var t,n=this;return o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,o.a.awrap(this.loadColorModuleForGettingColorRamps());case 4:this.layerIds.length>e.length?this.updateToRemoveLayers(e):this.layerIds.length<e.length?this.updateToAddLayers(e):(t=e.map((function(e){return e.dataSignature}))).join()===this.layerIds.join()?e.forEach((function(e,i){var a=t[i];n.info[a].colorRampOrder!==e.renderer.colorIndex&&n.updateColorToLayer(i,e),n.info[a].rendererSig===e.rendererSignature?"new"!==e.renderer.rendererConf&&n.layerRenderers[e.dataSignature]&&n.layerRenderers[e.dataSignature]!==e.renderer.rendererConf&&n.applyRenderer(i,e.renderer.rendererConf):(n.info[a].rendererSig=e.rendererSignature,n.info[a].colorRampOrder=e.renderer.colorIndex,n.createLayerRenderer(e,i))})):this.updateToReorderLayers(t);case 5:case"end":return i.stop()}}),null,this,null,Promise)}},{key:"createRenderer",value:function(e,t,n,i,a,o,r,s){var c,l=this.info[this.layerIds[e]].vis,p=t===h.d.simpleLocation?Object(u.a)(l.featureLayerData.title):Object(u.a)(i[0]);if("new"===a){var d=Object(C.b)(l,t,n.replace("esriGeometry","").toLowerCase(),i,s,this.theme,this.themeVariables,r,this.getColorRampsByIndex);t===h.d.simpleLocation?c=l.simpleLocation(p,d):t===h.d.classBreak?c=l.classBreaks(p,d):t===h.d.numColor?c=l.numColor(p,d):t===h.d.numSize&&(c=l.numSize(p,d))}else c=a;var m=this.applyRenderer(e,c);"new"===a&&""!==l.currentRenderFields[0]&&this.createHistogram(e,m,l.currentRenderFields[0],o)}},{key:"createHistogram",value:function(e,t,n,i){var a,r;return o.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(this.updateHistogram){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,o.a.awrap(this.loadModule("esri/renderers/smartMapping/statistics/histogram"));case 4:return a=s.sent,s.next=7,o.a.awrap(a({layer:t,numBins:10,classificationMethod:"equal-interval",field:n}));case 7:r=s.sent,this.updateHistogram(e,i,r);case 9:case"end":return s.stop()}}),null,this,null,Promise)}},{key:"applyRenderer",value:function(e,t){var n=this,i=this.info[this.layerIds[e]].vis.getFeatureLayer();if(this.map.findLayerById(i.id)||(this.map.add(i),this.shouldZoom&&i.when((function(){Object(d.d)(n.mapView,i.fullExtent)}))),this.layerRenderers[i.id]&&this.layerRenderers[i.id]===t)return i;this.layerRenderers[i.id]=t;var a="string"===typeof t?JSON.parse(t):t;return a&&this.updateRender&&this.updateRender(e,JSON.stringify(a)),i.renderer=a,i}},{key:"getGeometryTypeFromConf",value:function(e){return e.data.type===h.c.serviceUrl?e.data.serviceUrl.geometryType:e.data.clientSideGraphics.geometryType}}]),e}();t.a=I},"iN+R":function(e,t,n){var i=n("bOkD"),a=n("DSo7"),o=n("uYlf");e.exports=function(e){return i(e)||a(e)||o()}},ibgV:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("cxan"),a=n("yFcC"),o=n.n(a),r=n("ERkP"),s=n.n(r),c=n("O94r"),l=n.n(c),p=n("NX3A"),u=n("xkor"),d=n("i3DM"),h=s.a.createElement,m="2.2rem";t.b=function(e){var t=e.onClick,n=e.className,a=e.hasMarginStart,r="function"===typeof t?{role:"button",onClick:t,tabIndex:0,onKeyDown:function(e){Object(d.a)(e)&&(e.preventDefault(),t())}}:{};return h("span",Object(i.a)({},r,{className:o.a.dynamic([["1854486532",[a?p.a.spacing.xxxs:0,"function"===typeof t?"pointer":"unset",a?p.a.spacing.xxxs:0]]])+" "+(r&&null!=r.className&&r.className||l()("action-icon",n)||"")}),h(u.a,{height:m,width:"auto"}),h(o.a,{id:"1854486532",dynamic:[a?p.a.spacing.xxxs:0,"function"===typeof t?"pointer":"unset",a?p.a.spacing.xxxs:0]},[".action-icon.__jsx-style-dynamic-selector{margin-right:0;margin-left:".concat(a?p.a.spacing.xxxs:0,";cursor:").concat("function"===typeof t?"pointer":"unset",";display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;}"),"html[dir='rtl'] .action-icon.__jsx-style-dynamic-selector{margin-left:0;margin-right:".concat(a?p.a.spacing.xxxs:0,";}")]))}},ijbv:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return s}));var i=n("GpNk"),a=function(){return Object(i.a)({id:"sidecarMapActionButtonNudge"})},o=function(){Object(i.b)({id:"sidecarMapActionButtonNudge",value:!0})},r=function(){return Object(i.a)({id:"sidecarMapActionButtonResetIconNudge"})},s=function(){Object(i.b)({id:"sidecarMapActionButtonResetIconNudge",value:!0})}},itSE:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("Z4N4"),c=n("NX3A"),l=n("A7aE"),p=r.a.createElement,u=Object(o.memo)((function(e){var t=e.selector||"",n=e.storyDesign.storyTheme.themeVariables.backgroundColor,i=e.storyDesign.storyTheme.themeVariables.bodyColor,r=e.storyDesign.storyTheme.themeVariables.accentColor1,l=e.storyDesign.storyTheme.themeVariables.secondaryBackgroundColor;return p(o.Fragment,null,p(a.a,{id:"64791362",dynamic:[t,s.a.shadow.xs(),t,s.a.hexA(n,.5),s.a.hexA(i,.7)]},["".concat(t," .esri-ui-corner .esri-component{").concat(s.a.shadow.xs(),";}"),"".concat(t," .esri-attribution.esri-widget{background-color:").concat(s.a.hexA(n,.5),";color:").concat(s.a.hexA(i,.7),";}")]),p(a.a,{id:"3683627458",dynamic:[r,r,n,i,l,i,c.a.spacing.xxxs,c.a.spacing.xxxs,c.a.spacing.xxxs,c.a.spacing.xxxs,c.a.spacing.xxxs,c.a.spacing.xxxs,e.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.baseline(),s.a.hexA(e.storyDesign.storyTheme.themeVariables.bodyColor,.5),e.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.stepDown1()]},["body:not(.user-is-tabbing) .esri-view-surface:focus,body:not(.user-is-tabbing) .esri-view-surface:focus::after{outline:none;}","body.user-is-tabbing .esri-view .esri-view-surface--inset-outline:focus::after{outline-color:".concat(r,";}"),"body.user-is-tabbing .core-map .esri-view-surface:focus::after{content:'';box-sizing:border-box;position:absolute;z-index:999;top:0;left:0;height:100%;width:100%;pointer-events:none;overflow:hidden;outline-offset:-4px;outline-color:".concat(r,";outline-style:auto;}"),".esri-ui .esri-widget--button,.esri-ui .esri-expand__container *,.esri-ui .esri-expand__container *:focus,.esri-ui .esri-menu .esri-menu__header{background-color:".concat(n,";color:").concat(i,";}"),".esri-ui .esri-widget--button:hover,.esri-ui .esri-expand__container *:not(.esri-menu__header):hover{background-color:".concat(l,";color:").concat(i,";}"),".esri-ui .esri-collapse__icon,.esri-ui .esri-icon-down-arrow,.esri-ui .esri-search__suggestions-menu .esri-menu__list-item *{background-color:transparent;}",".esri-ui .esri-ui-top-left{top:".concat(c.a.spacing.xxxs,";left:").concat(c.a.spacing.xxxs,";}"),"html[dir='rtl'] .esri-ui .esri-ui-top-right{top:".concat(c.a.spacing.xxxs,";right:").concat(c.a.spacing.xxxs,";}"),".esri-ui .esri-ui-bottom-right{right:".concat(c.a.spacing.xxxs,";}"),"html[dir='rtl'] .esri-ui .esri-ui-bottom-left{right:unset;left:".concat(c.a.spacing.xxxs,";}"),".esri-ui .esri-widget--button,.esri-ui .esri-search .esri-input[type='text']{height:4rem;}",".esri-ui .esri-widget--button{width:4rem;}",".esri-ui .esri-search .esri-search__submit-button,.esri-ui .esri-search .esri-search__suggestions-list--current-location{display:none;}",".esri-ui .esri-expand .esri-expand__content{margin-left:0;margin-right:0;}",".esri-ui .esri-expand .esri-search__form{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".esri-ui .esri-search .esri-search__form .esri-input,.esri-ui .esri-search .esri-search__suggestions-menu .esri-menu__header{".concat(e.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.baseline(),";}"),".esri-ui .esri-search .esri-search__form .esri-input::-webkit-input-placeholder{color:".concat(s.a.hexA(e.storyDesign.storyTheme.themeVariables.bodyColor,.5),";}"),".esri-ui .esri-search .esri-search__form .esri-input::-moz-placeholder{color:".concat(s.a.hexA(e.storyDesign.storyTheme.themeVariables.bodyColor,.5),";}"),".esri-ui .esri-search .esri-search__form .esri-input:-ms-input-placeholder{color:".concat(s.a.hexA(e.storyDesign.storyTheme.themeVariables.bodyColor,.5),";}"),".esri-ui .esri-search .esri-search__form .esri-input::placeholder{color:".concat(s.a.hexA(e.storyDesign.storyTheme.themeVariables.bodyColor,.5),";}"),".esri-ui .esri-search .esri-search__suggestions-menu .esri-search__suggestions-list>li{".concat(e.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.stepDown1(),";}")]))}));t.a=Object(l.b)(u)},iwZA:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("YQpL"),c=n("NX3A"),l=n("Z4N4"),p=n("liFR"),u=n("rHGT"),d=n("Z34l"),h=n("AuFC"),m=r.a.createElement;t.a=Object(h.c)(Object(s.c)((function(e){return m("a",{href:Object(d.a)(e.id,e.config.PORTAL_HOST,e.userSession),target:"_blank",rel:"noopener noreferrer",role:"button",className:a.a.dynamic([["930948581",[c.a.color.haikuGreen,l.a.cardButton(),l.a.dropdownItemHover()]]])+" card-info-link"},m(p.a,{tooltipContent:e.intl.formatMessage({id:"builder.itemBrowser.viewFullDetails"})},m(u.a,null)),m(a.a,{id:"930948581",dynamic:[c.a.color.haikuGreen,l.a.cardButton(),l.a.dropdownItemHover()]},[".card-info-link.__jsx-style-dynamic-selector{display:inline-block;-webkit-text-decoration:none;text-decoration:none;color:".concat(c.a.color.haikuGreen,";line-height:0;").concat(l.a.cardButton(),";}"),".card-info-link.__jsx-style-dynamic-selector:hover,.card-info-link.__jsx-style-dynamic-selector:focus{".concat(l.a.dropdownItemHover(),";}")]))})))},j4c8:function(e,t,n){"use strict";n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"f",(function(){return y}));var i=n("zjfJ"),a=n("zygG"),o=n("HbGN"),r=n("/rJK"),s=n.n(r),c=n("GpNk");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){return e?e.map((function(e){return{id:e.id,title:e.title,visible:e.visible}})).reverse():[]},d=function(e,t){var n=function(e){return[e.mapLayers,Object(o.a)(e,["mapLayers"])]},i=t.isShowingLegend,r=t.search,c=t.locate,l=t.navigation,u=n(Object(o.a)(t,["isShowingLegend","search","locate","navigation"])),d=Object(a.a)(u,2),h=d[0],m=d[1],f=n(e),y=Object(a.a)(f,2),g=y[0],v=y[1],b=s()(h||[])===s()(g||[])?void 0:h;return p({},i&&{isShowingLegend:i},{},r&&{search:r},{},c&&{locate:c},{},!1===l&&{navigation:l},{},b&&{mapLayers:b},{},s()({viewpoint:m.viewpoint,lightingDate:m.lightingDate})===s()({viewpoint:v.viewpoint,lightingDate:v.lightingDate})?void 0:m)},h=function(e,t){return p({},e,{},t,{isShowingLegend:!!t.isShowingLegend,search:!!t.search,locate:!!t.locate})},m=function(e){return p({extent:e.extent,center:e.center,zoom:e.zoom,viewpoint:e.viewpoint},e.lightingDate&&{lightingDate:e.lightingDate},{},e.mapLayers&&{mapLayers:e.mapLayers})},f=function(){return Object(c.a)({id:"webmapEditorMapActionConfigNudge"})},y=function(){Object(c.b)({id:"webmapEditorMapActionConfigNudge",value:!0})}},j62V:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"e",(function(){return w})),n.d(t,"c",(function(){return I})),n.d(t,"d",(function(){return M})),n.d(t,"b",(function(){return _}));var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("NX3A"),h=u.a.createElement;function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(m()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){var e=this.props.skipVerticalMargin;return h("div",{className:l.a.dynamic([["251708550",[e?"auto":"10rem auto 15rem",d.a.responsiveBreakpoints.medium,e?"auto":"18rem auto 28rem"]]])+" full-page-message"},this.props.children,h(l.a,{id:"251708550",dynamic:[e?"auto":"10rem auto 15rem",d.a.responsiveBreakpoints.medium,e?"auto":"18rem auto 28rem"]},[".full-page-message.__jsx-style-dynamic-selector{text-align:center;margin:".concat(e?"auto":"10rem auto 15rem",";overflow-wrap:break-word;}"),"@media (min-width:".concat(d.a.responsiveBreakpoints.medium,"){.full-page-message.__jsx-style-dynamic-selector{margin:").concat(e?"auto":"18rem auto 28rem",";}}")]))}}]),c}(p.PureComponent),y=n("zjfJ"),g=n("O94r"),v=n.n(g),b=u.a.createElement;function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var O=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(x()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){var e=v()("full-page-message-title","size-".concat(this.props.size));return b("h1",{className:l.a.dynamic([["3630740805",[d.a.color.darkGreen,d.a.font.weight.normal,d.a.font.size.extraExtraLarge,d.a.font.lineHeight.extraExtraLarge,d.a.font.size.extraLarge,d.a.font.lineHeight.extraLarge,d.a.responsiveBreakpoints.medium,d.a.font.size.extraExtraLarge]]])+" "+(e||"")},this.props.children,b(l.a,{id:"3630740805",dynamic:[d.a.color.darkGreen,d.a.font.weight.normal,d.a.font.size.extraExtraLarge,d.a.font.lineHeight.extraExtraLarge,d.a.font.size.extraLarge,d.a.font.lineHeight.extraLarge,d.a.responsiveBreakpoints.medium,d.a.font.size.extraExtraLarge]},[".full-page-message-title.__jsx-style-dynamic-selector{color:".concat(d.a.color.darkGreen,";font-weight:").concat(d.a.font.weight.normal,";margin:auto;}"),".size-large.__jsx-style-dynamic-selector{font-size:".concat(d.a.font.size.extraExtraLarge,";line-height:").concat(d.a.font.lineHeight.extraExtraLarge,";-webkit-letter-spacing:-0.1rem;-moz-letter-spacing:-0.1rem;-ms-letter-spacing:-0.1rem;letter-spacing:-0.1rem;}"),".size-small.__jsx-style-dynamic-selector{font-size:".concat(d.a.font.size.extraLarge,";line-height:").concat(d.a.font.lineHeight.extraLarge,";text-align:left;}"),"@media (min-width:".concat(d.a.responsiveBreakpoints.medium,"){.size-large.__jsx-style-dynamic-selector{font-size:4rem;line-height:4.8rem;}.size-small.__jsx-style-dynamic-selector{font-size:").concat(d.a.font.size.extraExtraLarge,";line-height:4rem;}}")]))}}]),c}(p.PureComponent);Object(y.a)(O,"defaultProps",{size:"large"});var w=O,j=n("Z4N4"),C=u.a.createElement;function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(k()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){var e=v()("full-page-message-details","size-".concat(this.props.size));return C("p",{className:l.a.dynamic([["670515573",[d.a.spacing.xs,d.a.font.weight.normal,this.props.color,this.props.color,d.a.font.size.medium,j.a.typography.body14(),j.a.typography.body12(),d.a.responsiveBreakpoints.medium,d.a.spacing.sm,j.a.typography.body16(),j.a.typography.body14()]]])+" "+(e||"")},this.props.children,C(l.a,{id:"670515573",dynamic:[d.a.spacing.xs,d.a.font.weight.normal,this.props.color,this.props.color,d.a.font.size.medium,j.a.typography.body14(),j.a.typography.body12(),d.a.responsiveBreakpoints.medium,d.a.spacing.sm,j.a.typography.body16(),j.a.typography.body14()]},[".full-page-message-details.__jsx-style-dynamic-selector{margin:".concat(d.a.spacing.xs," auto 0;font-weight:").concat(d.a.font.weight.normal,";color:").concat(this.props.color,";max-width:60rem;}"),".full-page-message-details.__jsx-style-dynamic-selector a{color:".concat(this.props.color,";}"),".size-large.__jsx-style-dynamic-selector{font-size:".concat(d.a.font.size.medium,";line-height:2.4rem;-webkit-letter-spacing:0;-moz-letter-spacing:0;-ms-letter-spacing:0;letter-spacing:0;}"),".size-medium.__jsx-style-dynamic-selector{".concat(j.a.typography.body14()," line-height:2rem;}"),".size-small.__jsx-style-dynamic-selector{".concat(j.a.typography.body12(),";}"),"@media (min-width:".concat(d.a.responsiveBreakpoints.medium,"){.full-page-message-details.__jsx-style-dynamic-selector{margin-top:").concat(d.a.spacing.sm,";}.size-medium.__jsx-style-dynamic-selector{").concat(j.a.typography.body16(),";}.size-small.__jsx-style-dynamic-selector{").concat(j.a.typography.body14(),";}}")]))}}]),c}(p.PureComponent);Object(y.a)(S,"defaultProps",{size:"large",color:d.a.color.cadet});var I=S,P=n("cxan"),R=n("ujYZ"),E=u.a.createElement;function D(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var T=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(D()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){var e=this.props.openInNewPage?{rel:"noopener noreferrer",target:"_blank"}:{};return E(R.a,{href:this.props.href,as:this.props.asPath,prefetch:this.props.prefetch,isExternal:this.props.isExternal},E("a",Object(P.a)({},e,{className:l.a.dynamic([["3822791692",[this.props.color,this.props.removeTextUnderline&&"none",this.props.visitedColor]]])+" "+(e&&null!=e.className&&e.className||"full-page-message-link")}),this.props.children,E(l.a,{id:"3822791692",dynamic:[this.props.color,this.props.removeTextUnderline&&"none",this.props.visitedColor]},[".full-page-message-link.__jsx-style-dynamic-selector{color:".concat(this.props.color,";-webkit-text-decoration:").concat(this.props.removeTextUnderline&&"none",";text-decoration:").concat(this.props.removeTextUnderline&&"none",";}"),".full-page-message-link.__jsx-style-dynamic-selector:visited{color:".concat(this.props.visitedColor,";}"),".full-page-message-link.__jsx-style-dynamic-selector:hover{-webkit-text-decoration:underline;text-decoration:underline;}"])))}}]),c}(p.PureComponent);Object(y.a)(T,"defaultProps",{prefetch:!1,openInNewPage:!1,color:d.a.color.bleuDeFrance,visitedColor:d.a.color.deepLilac});var M=T,A=n("wWnZ"),N=u.a.createElement;function L(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var G=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(L()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return N("div",{className:l.a.dynamic([["1628969998",[d.a.spacing.xs,d.a.spacing.xxs,this.props.center?j.a.center():"",d.a.responsiveBreakpoints.medium,d.a.spacing.sm]]])+" full-page-message-button"},this.props.download?N(A.a,{type:this.props.type,link:{href:this.props.href,openInNewPage:!1,download:this.props.download},color:"primary"},this.props.children):N(R.a,{href:this.props.href,as:this.props.asPath,prefetch:this.props.prefetch,replace:this.props.replace,isExternal:this.props.isExternal,passHref:!0},N(A.a,{type:this.props.type,link:this.props.isExternal?{href:this.props.href,openInNewPage:!!this.props.openInNewPage}:void 0,color:"primary"},this.props.children)),N(l.a,{id:"1628969998",dynamic:[d.a.spacing.xs,d.a.spacing.xxs,this.props.center?j.a.center():"",d.a.responsiveBreakpoints.medium,d.a.spacing.sm]},[".full-page-message-button.__jsx-style-dynamic-selector{margin-top:".concat(d.a.spacing.xs,";margin-bottom:").concat(d.a.spacing.xxs,";-webkit-letter-spacing:0.03rem;-moz-letter-spacing:0.03rem;-ms-letter-spacing:0.03rem;letter-spacing:0.03rem;").concat(this.props.center?j.a.center():"",";}"),"@media (min-width:".concat(d.a.responsiveBreakpoints.medium,"){.full-page-message-button.__jsx-style-dynamic-selector{margin-top:").concat(d.a.spacing.sm,";}}")]))}}]),c}(p.PureComponent);Object(y.a)(G,"defaultProps",{prefetch:!1,replace:!1});var _=G},jAEw:function(e,t,n){"use strict";n.r(t),n.d(t,"Editor",(function(){return G}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("2SGB"),f=n("NX3A"),y=n("bzXW"),g=n("W8gz"),v=n("9ixP"),b=n("wwFW"),x=n("HW3u"),O=n("TQaU"),w=n("QOs2"),j=n("bXtg"),C=n("F4ML"),k=n("t7DY"),S=n("cxan"),I=n("ADNR"),P=n("MKkT"),R=n("r3il"),E=n("erT5"),D=h.a.createElement,T=[[{mode:k.b.SELECT,icon:I.a,ariaLabel:"Select"}],[[{mode:k.b.POINT_REGULAR,icon:P.a,ariaLabel:"Point"},{mode:k.b.POINT_NUMBERED,icon:R.a,ariaLabel:"Numbered point"}]]],M=[k.b.UNDO,k.b.REDO],A=Object(d.memo)((function(e){return D(E.a,Object(S.a)({},e,{disabledModes:M,configs:T}))})),N=h.a.createElement;function L(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var G=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(L()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"renderToolbar",(function(){return N(O.a,null,N(A,{mode:t.state.drawingMode,onSelected:t.onDrawingToolSelected,undo:t.undo,redo:t.redo,canUndo:!1,canRedo:!1,isDisabled:!0}))})),Object(l.a)(Object(o.a)(t),"renderMap",(function(){return N("div",{className:u.a.dynamic([["1962050678",[f.a.color.black]]])+" editor-container"},N(C.a,{setApp:t.setApp}),N(u.a,{id:"1962050678",dynamic:[f.a.color.black]},[".editor-container.__jsx-style-dynamic-selector{overflow:hidden;position:relative;z-index:0;background:".concat(f.a.color.black,";}")]))})),Object(l.a)(Object(o.a)(t),"renderSidePanel",(function(){var e=[{id:"layers",icon:function(e){return N(y.a,{height:f.a.spacing.xxs,width:"auto",color:e,title:"something"})},content:N(j.a,null,N(g.a,{title:"Some controls"},N(v.a.LabeledSwitch,{label:N(m.a,{id:"builder.common.layers"}),switch:N(v.a,{isOn:!1,onToggle:console.log})})))},{id:"options",icon:function(e){return N(b.a,{height:f.a.spacing.xxs,width:"auto",color:e,title:N(m.a,{id:"builder.common.properties",tagName:"title"})})},content:N(j.a,null,N(g.a,{title:"Controls"}))}];return N(x.a,{items:e})})),Object(l.a)(Object(o.a)(t),"setApp",(function(e){t.appConnector=e})),Object(l.a)(Object(o.a)(t),"onDrawingToolSelected",(function(e){})),Object(l.a)(Object(o.a)(t),"undo",(function(){})),Object(l.a)(Object(o.a)(t),"redo",(function(){})),Object(l.a)(Object(o.a)(t),"save",(function(){t.props.onPlace()})),Object(l.a)(Object(o.a)(t),"discard",(function(){t.props.onCancel()})),t.state={drawingMode:k.b.SELECT,isCameraAnimationOn:!0,isLightingAnimationOn:!0},t}return Object(a.a)(p,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return N(w.a,{toolbar:this.renderToolbar(),sidePanel:this.renderSidePanel(),map:this.renderMap(),primaryButtonTitle:"Save",onPrimaryButtonClick:this.save,secondaryButtonTitle:"Cancel",onSecondaryButtonClick:this.discard,shouldDisablePrimaryButton:!0})}}]),p}(d.PureComponent);t.default=G},jD4n:function(e,t,n){"use strict";n.r(t),n.d(t,"Display",(function(){return i})),n.d(t,"EmbedBlockErrors",(function(){return a})),n.d(t,"Embed",(function(){return P}));var i,a,o=n("VtSi"),r=n.n(o),s=n("9fIP"),c=n("MMYH"),l=n("pWxA"),p=n("PRnZ"),u=n("K/z8"),d=n("sRHE"),h=n("8K1b"),m=n("zjfJ"),f=n("ERkP"),y=n.n(f),g=n("h0mi"),v=n("O8Oa"),b=n("nmTH"),x=n("NX3A"),O=n("txt0"),w=n("KDNM"),j=n("tJy7"),C=n("1yNe");function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}!function(e){e.Inline="inline",e.Card="card"}(i||(i={})),function(e){e[e.InlineEmbedNotSupported=0]="InlineEmbedNotSupported",e[e.FetchEmbedInfoFail=1]="FetchEmbedInfoFail",e[e.UnauthorizedNonVideoEmbed=2]="UnauthorizedNonVideoEmbed",e[e.UnauthorizedNonVideoImageEmbed=3]="UnauthorizedNonVideoImageEmbed"}(a||(a={}));var P=function(e){Object(h.a)(f,e);var t,o=(t=f,function(){var e,n=Object(d.a)(t);if(I()){var i=Object(d.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(u.a)(this,e)});function f(e){var t;return Object(s.a)(this,f),t=o.call(this,e),Object(m.a)(Object(l.a)(t),"parseUrl",(function(){var e,n,o;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=t.getAppConfig(),s.prev=1,s.next=4,r.a.awrap(Object(j.a)(t.data.url,{baseUrl:e.BASE_URL,embedlyApiKey:e.EMBEDLY_API_KEY,portalHost:e.PORTAL_HOST}));case 4:if(n=s.sent,o=Object(C.a)(n)){s.next=8;break}throw new Error("Embed type not supported");case 8:t.data=S({},t.data,{},o),O.a.trackEvent(O.a.Category.Builder,t.data.display===i.Inline?O.a.Action.Builder_Embed_DisplayAsInlineEmbed:O.a.Action.Builder_Embed_DisplayAsCard,t.data.providerUrl),O.a.trackEvent(O.a.Category.Builder,O.a.Action.Builder_Embed_EmbedlyType,n.contentType),t.update(),s.next=18;break;case 14:s.prev=14,s.t0=s.catch(1),t.states.error=a.FetchEmbedInfoFail,t.update();case 18:case"end":return s.stop()}}),null,null,[[1,14]],Promise)})),Object(m.a)(Object(l.a)(t),"observe",(function(e){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(t.states.observer.observe(Object(l.a)(t),e));case 2:case"end":return n.stop()}}),null,null,null,Promise)})),Object(m.a)(Object(l.a)(t),"applyProps",(function(){var e;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if("function"!==typeof t.states.overrideCallback){n.next=5;break}return n.next=3,r.a.awrap(t.getProps());case 3:e=n.sent,t.states.overrideCallback({blockProps:e});case 5:case"end":return n.stop()}}),null,null,null,Promise)})),Object(m.a)(Object(l.a)(t),"onPlaceholderNudgeClicked",(function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t.states.showPlaceholderNudge=!1,e.next=3,r.a.awrap(t.update({skipSave:!0}));case 3:case"end":return e.stop()}}),null,null,null,Promise)})),t.states.isMedia=!0,t.states.showPlaceholderNudge=!1,t.states.dnd.hasDraggedPlaceholder=!0,Object(b.a)(Object(l.a)(t)),"undefined"===typeof t.data.url&&(t.data.url=""),"undefined"===typeof e.data.display&&t.parseUrl(),"undefined"!==typeof t.data.thumbnailResourceId&&(t.thumbnailResource=t.getResource()),t.addEventListener("getMediaId",(function(){return"".concat(t.data.url).concat(t.data.embedSrc||"")})),t.addEventListener("showPlaceholderNudge",(function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t.states.showPlaceholderNudge=!0,e.next=3,r.a.awrap(t.update({skipSave:!0}));case 3:case"end":return e.stop()}}),null,null,null,Promise)})),t.addEventListener("applyProps",(function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.awrap(t.applyProps());case 2:case"end":return e.stop()}}),null,null,null,Promise)})),t.addEventListener("onImageUploaded",(function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.awrap(t.update({skipSave:!0}));case 2:case"end":return e.stop()}}),null,null,null,Promise)})),t}return Object(c.a)(f,[{key:"getBlockComponent",value:function(){return this.mode===g.a.Viewer?y.a.lazy((function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"mMSW"))})):y.a.lazy((function(){return Promise.all([n.e(2),n.e(0),n.e(1),n.e(84)]).then(n.bind(null,"d54W"))}))}},{key:"getViewerProps",value:function(){var e,t,n,i=this;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.getGlobalState("storyItem"),n=this.thumbnailResource&&t?t.getItemResourceImageFullUrl(this.thumbnailResource.getImageItemId(),250):this.data.thumbnailUrl,a.abrupt("return",S({},this.data,{thumbnailUrl:n,isCustomThumbnail:!!this.thumbnailResource,aspectRatio:this.data.aspectRatio,heightConstrained:!1,widthConstrained:this.states.widthConstrained,captionAlignmentLg:this.states.captionAlignment,showCaption:this.states.showCaption,tempSizeOverride:this.states.tempSizeOverride,updateTempSizeOverride:function(e){i.states.tempSizeOverride=e,i.update({skipSave:!0})},blockDisplaySize:this.states.displaySize,isIntersecting:this.states.observer.isIntersecting,observe:this.observe,blockId:this.id,fillParent:this.states.fillParent,isCompact:this.states.isCompact,displayInlineOnMobile:"video"===this.data.embedType||"photo"===this.data.embedType,printMode:this.getGlobalState("printMode"),mobileDisplay:(null===(e=this.config.placeholder)||void 0===e?void 0:e.resource)?"image":"card"}));case 3:case"end":return a.stop()}}),null,this,null,Promise)}},{key:"getBuilderProps",value:function(){var e=this;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=S,t.t1={},t.next=4,r.a.awrap(this.getViewerProps());case 4:return t.t2=t.sent,t.t3={size:this.getLayoutSize(),updateSize:function(t){e.updateSize(t)},showSizeOptions:this.states.showSizeOptions,updateData:function(t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.data=S({},e.data,{},t),t.display&&t.display===i.Card&&e.states.showSizeOptions&&e.updateSize("standard"),(!t.caption||t.caption&&!Object(w.a)(t.caption))&&e.data.customCaptionColors&&delete e.data.customCaptionColors,e.update(),n.next=6,r.a.awrap(e.applyProps());case 6:case"end":return n.stop()}}),null,null,null,Promise)},insertTextBlock:function(){e.parent&&e.insertBlock({type:"text",mode:g.a.Builder,parent:e.parent,index:e.getIndex()+1,data:{text:"",type:"paragraph"},states:{hasFocus:!0}})},delete:function(){e.remove()},error:this.states.error,showFullToolbar:this.states.showFullToolbar,placeholderPaletteItem:this.getPlaceholderItemWithCallback(),placeholderResourceId:this.placeholder&&this.placeholder.do("getMediaId"),removePlaceholderImage:this.removePlaceholderImage,showPlaceholderNudge:this.states.showPlaceholderNudge,onPlaceholderNudgeClicked:this.onPlaceholderNudgeClicked,setThumbnailResource:function(t){var n;return r.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.a.awrap(e.insertResource({data:t,root:e,type:"image"}));case 2:void 0!==typeof(n=i.sent)&&(e.thumbnailResource=n,e.data.thumbnailResourceId=e.thumbnailResource.id,e.update());case 4:case"end":return i.stop()}}),null,null,null,Promise)},removeThumbnailResource:function(){e.data.thumbnailResourceId=void 0,e.thumbnailResource=void 0,e.update()},updateCustomCaptionColors:function(t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.data.customCaptionColors=t,n.next=3,r.a.awrap(e.update());case 3:case"end":return n.stop()}}),null,null,null,Promise)},mediaPanelInserterItems:this.states.mediaPanelInserterItems,thumbnails:this.states.thumbnails,updateOrder:this.states.updateOrder},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t3));case 7:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"getLayoutProps",value:function(){var e="small"!==this.states.displaySize&&this.states.tempSizeOverride?this.states.tempSizeOverride:this.getLayoutSize();return S({},Object(p.a)(Object(d.a)(f.prototype),"getLayoutProps",this).call(this),{size:e,spacingTop:x.a.spacing.xl,spacingBottom:x.a.spacing.xl,spacingTopSm:x.a.spacing.sm,spacingBottomSm:x.a.spacing.sm,postInserterProps:this.getBetweenInserterProps(),preInserterProps:this.getBetweenInserterProps(!0),hasDragHandle:!0})}},{key:"getPlaceholderImageProps",value:function(e){var t=Object(p.a)(Object(d.a)(f.prototype),"getPlaceholderImageProps",this).call(this,e);return S({},t,{data:S({},t.data,{alt:this.data.alt}),states:S({},t.states,{showOpenInNewTabButton:this.data.hasPlaceholderOpenButton,openInNewTabUrl:this.data.url})})}},{key:"getResources",value:function(){var e=Object(p.a)(Object(d.a)(f.prototype),"getResources",this).call(this);return this.thumbnailResource&&e.push(this.thumbnailResource),e}},{key:"getResource",value:function(){return this.getResourceById(this.data.thumbnailResourceId)}}]),f}(v.a);Object(m.a)(P,"type","embed"),Object(m.a)(P,"getInstance",(function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new P(Object(v.b)(e,P.type)));case 1:case"end":return t.stop()}}),null,null,null,Promise)})),t.default=P},jKTg:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,a=n("VtSi"),o=n.n(a),r=n("zygG"),s=n("9fIP"),c=n("MMYH"),l=n("pWxA"),p=n("K/z8"),u=n("sRHE"),d=n("8K1b"),h=n("zjfJ"),m=n("yFcC"),f=n.n(m),y=n("ERkP"),g=n.n(y),v=n("sCFI"),b=n("WXRn"),x=n("mvvZ"),O=n("i3DM"),w=n("NX3A"),j=n("Z4N4"),C=n("h88A"),k=n("rRyh"),S=n("eRU7"),I=n("4z/A"),P=g.a.createElement;function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}!function(e){e.webMap="webMap",e.webScene="webScene"}(i||(i={}));var T=function(e){Object(d.a)(a,e);var t,n=(t=a,function(){var e,n=Object(u.a)(t);if(D()){var i=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(p.a)(this,e)});function a(e,t){var c;return Object(s.a)(this,a),c=n.call(this,e),Object(h.a)(Object(l.a)(c),"canSetState",!0),Object(h.a)(Object(l.a)(c),"isCreatingLegendWidget",!1),Object(h.a)(Object(l.a)(c),"hasEverBeenIntersected",!1),Object(h.a)(Object(l.a)(c),"showOrHideExpandableSearchWidget",(function(e){if(!e.shouldShowSearch&&c.props.shouldShowSearch)c.createExpandableSearchWidget();else if(e.shouldShowSearch&&!c.props.shouldShowSearch){var t,n;null===(t=c.arcGISSearch)||void 0===t||t.clear(),null===(n=c.arcGISView)||void 0===n||n.ui.remove(c.arcGISExpandableSearch)}})),Object(h.a)(Object(l.a)(c),"showOrHideLocateWidget",(function(e){if(!e.shouldShowLocate&&c.props.shouldShowLocate)c.createLocateWidget();else if(e.shouldShowLocate&&!c.props.shouldShowLocate){var t,n;null===(t=c.arcGISLocate)||void 0===t||t.cancelLocate(),null===(n=c.arcGISView)||void 0===n||n.ui.remove(c.arcGISLocate)}})),Object(h.a)(Object(l.a)(c),"customizeSearchSymbol",(function(){c.arcGISSearch&&c.props.shouldShowSearch&&c.props.searchSymbolColor&&Object(k.a)(c.arcGISSearch,c.props.searchSymbolColor)})),Object(h.a)(Object(l.a)(c),"renderPopupLegendContainer",(function(){var e=c.props.shouldShowLegend&&!c.state.isShowingPopup&&c.state.shouldShowFullLegend;return P(y.Fragment,null,P("div",{ref:c.mapInfoPopupContainer,className:"jsx-1246733231 "+f.a.dynamic([["1114826186",[w.a.spacing.xxs,w.a.spacing.xxs,w.a.spacing.sm,j.a.shadow.xs()]]])+" arcgis-map-info-popup-container"}),P("div",{className:"jsx-1246733231 "+f.a.dynamic([["1114826186",[w.a.spacing.xxs,w.a.spacing.xxs,w.a.spacing.sm,j.a.shadow.xs()]]])},c.renderLegendIcon()),P("div",{style:{display:e?"block":"none"},onMouseLeave:c.collapseLegend,ref:c.mapInfoLegendContainer,tabIndex:0,role:"button",onKeyPress:c.onKeyPressLegend,className:"jsx-1246733231 "+f.a.dynamic([["1114826186",[w.a.spacing.xxs,w.a.spacing.xxs,w.a.spacing.sm,j.a.shadow.xs()]]])+" arcgis-map-info-legend-container"}),P(f.a,{id:"1114826186",dynamic:[w.a.spacing.xxs,w.a.spacing.xxs,w.a.spacing.sm,j.a.shadow.xs()]},[".arcgis-map-info-legend-container.__jsx-style-dynamic-selector{position:absolute;z-index:1;left:0;bottom:".concat(w.a.spacing.xxs,";margin:").concat(w.a.spacing.xxs,";max-height:calc(100% - 2 * ").concat(w.a.spacing.sm,");").concat(j.a.shadow.xs(),";}"),"html[dir='rtl'] .arcgis-map-info-legend-container.__jsx-style-dynamic-selector{left:auto;right:0;}","body:not(.user-is-tabbing) .arcgis-map-info-legend-container.__jsx-style-dynamic-selector:focus{outline:none;}"]),P(f.a,{id:"1246733231"},[".esri-popup__header .esri-popup__header-buttons .esri-popup__button .esri-icon-close:before{content:'\\e681';color:inherit;}",".esri-popup__header .esri-popup__header-title{word-break:break-word;}"]))})),Object(h.a)(Object(l.a)(c),"renderLegendIcon",(function(){return c.props.shouldShowLegend&&c.state.isLegendAvailable&&!c.state.shouldShowFullLegend&&!c.state.isShowingPopup&&P("div",{ref:c.mapInfoLegendIcon,tabIndex:0,role:"button",onMouseEnter:c.onMouseEnterLegendIcon,onTouchStart:c.onTouchStartLegendIcon,onKeyPress:c.onKeyPressLegend,"aria-label":c.props.legendAria,className:f.a.dynamic([["2576281645",[w.a.spacing.lg,w.a.spacing.lg,w.a.color.white,w.a.spacing.xs,w.a.spacing.sm,j.a.center(),j.a.shadow.xs(),w.a.spacing.xs]]])+" legend-icon-container"},P(C.a,{color:w.a.color.darkGreen,width:w.a.spacing.xxs,height:"auto"}),P(f.a,{id:"2576281645",dynamic:[w.a.spacing.lg,w.a.spacing.lg,w.a.color.white,w.a.spacing.xs,w.a.spacing.sm,j.a.center(),j.a.shadow.xs(),w.a.spacing.xs]},[".legend-icon-container.__jsx-style-dynamic-selector{width:".concat(w.a.spacing.lg,";height:").concat(w.a.spacing.lg,";border-radius:50%;overflow:hidden;background:").concat(w.a.color.white,";position:absolute;left:").concat(w.a.spacing.xs,";bottom:").concat(w.a.spacing.sm,";cursor:pointer;").concat(j.a.center()," ").concat(j.a.shadow.xs(),";}"),"html[dir='rtl'] .legend-icon-container.__jsx-style-dynamic-selector{left:unset;right:".concat(w.a.spacing.xs,";}"),"body:not(.user-is-tabbing) .legend-icon-container.__jsx-style-dynamic-selector:focus{outline:none;}"]))})),Object(h.a)(Object(l.a)(c),"setUpIntersectionObserver",(function(){"boolean"===typeof c.props.isIntersecting&&"function"===typeof c.props.observe&&c.mapContainer.current&&c.props.observe(c.mapContainer.current)})),Object(h.a)(Object(l.a)(c),"init",(function(){var e,t;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!c.hasEverBeenIntersected){n.next=2;break}return n.abrupt("return");case 2:Object(v.loadCss)(c.props.jsApiCssUrl),e=E({},c.props.viewProperties),c.mapInfoPopupContainer.current&&(t={container:c.mapInfoPopupContainer.current,spinnerEnabled:!1,collapseEnabled:!1,dockEnabled:c.props.shouldDockPopups,dockOptions:{buttonEnabled:!1,breakpoint:!1,position:Object(b.b)()?"bottom-right":"bottom-left"}},c.mapType===i.webScene&&Object.assign(t,{defaultPopupTemplateEnabled:!0}),e=E({},c.props.viewProperties,{ui:{components:["attribution"]},popup:t})),Promise.all([Object(I.a)(c.props.portalItemId,c.mapType,c.props.mapProperties,c.props.portal,c.props.appProxies),Object(I.b)(c.mapContainer.current,c.mapType,e),Object(I.j)()]).then((function(e){var t=Object(r.a)(e,3),n=t[0],i=n.map,a=n.layers,o=t[1],s=t[2];if(!i||!a||!o||!s)throw new Error("JS API modules are not loaded successfully.");o.map=i,c.arcGISView=o,c.passUpMapViewLayers(i,o,a,s);var l=Object(x.c)((function(e){e||c.arcGISView.ui.add(c.arcGISLegend)}),500),p=Object(x.c)((function(e){e||c.hidePopup()}),500);c.arcGISView.watch("popup.viewModel.featureCount",(function(e){l(e),e?c.showPopup():c.hidePopup()})),c.arcGISView.watch("popup.visible",(function(e,t){p(e)})),c.setUpScrollBehavior()})).then(c.setUpWidgets).then((function(){c.arcGISView.when((function(){c.canSetState&&c.setState({isViewReady:!0})}))})).catch((function(e){console.log(e),c.canSetState&&c.props.onFail&&c.props.onFail(e)}));case 6:case"end":return n.stop()}}),null,null,null,Promise)})),Object(h.a)(Object(l.a)(c),"onTouchStartLegendIcon",(function(){c.expandLegend(),document.addEventListener("touchstart",c.handleTouch)})),Object(h.a)(Object(l.a)(c),"handleTouch",(function(e){c.mapInfoLegendContainer.current&&!c.mapInfoLegendContainer.current.contains(e.target)&&(c.collapseLegend(),document.removeEventListener("touchstart",c.handleTouch))})),Object(h.a)(Object(l.a)(c),"onKeyPressLegend",(function(e){Object(O.a)(e)&&(e.preventDefault(),c.toggleFullLegend(!c.state.shouldShowFullLegend))})),Object(h.a)(Object(l.a)(c),"onMouseEnterLegendIcon",(function(){c.expandLegend()})),Object(h.a)(Object(l.a)(c),"toggleFullLegend",(function(e){c.setState({shouldShowFullLegend:e})})),Object(h.a)(Object(l.a)(c),"expandLegend",(function(){c.toggleFullLegend(!0)})),Object(h.a)(Object(l.a)(c),"collapseLegend",(function(){c.toggleFullLegend(!1)})),Object(h.a)(Object(l.a)(c),"setUpWidgets",(function(){c.props.shouldShowLegend&&c.createLegendWidget(),c.props.shouldShowSearch&&c.createExpandableSearchWidget(),c.props.shouldShowLocate&&c.createLocateWidget();var e=[];if(c.mapType===i.webMap){var t=Object(I.i)(c.arcGISView),n=Object(I.e)(c.arcGISView);e=n?[n,t]:[t]}else if(c.mapType===i.webScene){var a=Object(I.h)(c.arcGISView),o=Object(I.c)(c.arcGISView),r=Object(I.i)(c.arcGISView),s=Object(I.e)(c.arcGISView);e=s?[s,r,a,o]:[r,a,o]}return Promise.all(e).then(c.addWidgetsToView)})),Object(h.a)(Object(l.a)(c),"addWidgetsToView",(function(e){var t=e.map((function(e){return{component:e,position:Object(b.b)()?"bottom-left":"bottom-right"}}));if("function"===typeof c.props.onHomeLoad){var n=e.find((function(e){return e.declaredClass.endsWith("Home")}));"undefined"!==typeof n&&(c.arcGISHome=n,c.props.onHomeLoad(c.arcGISHome))}c.arcGISView.ui.add(t)})),Object(h.a)(Object(l.a)(c),"createExpandableSearchWidget",(function(){c.arcGISView&&(c.arcGISExpandableSearch?c.arcGISView.ui.add(c.arcGISExpandableSearch,Object(b.b)()?"top-right":"top-left"):Object(I.d)(c.arcGISView).then((function(e){c.arcGISSearch=e.content,c.arcGISSearch.watch("viewModel.state",(function(e){"ready"===e&&c.customizeSearchSymbol()})),c.arcGISView.ui.add(e,Object(b.b)()?"top-right":"top-left"),c.arcGISExpandableSearch=e})))})),Object(h.a)(Object(l.a)(c),"createLocateWidget",(function(){if(c.arcGISView){var e=Object(b.b)()?"bottom-left":"bottom-right";c.arcGISLocate?c.arcGISView.ui.add([{component:c.arcGISLocate,position:e,index:0}]):Object(I.g)(c.arcGISView).then((function(t){c.arcGISView.ui.add([{component:t,position:e,index:0}]),c.arcGISLocate=t}))}})),Object(h.a)(Object(l.a)(c),"showPopup",(function(){c.state.isShowingPopup||c.setState({isShowingPopup:!0})})),Object(h.a)(Object(l.a)(c),"hidePopup",(function(){c.state.isShowingPopup&&c.setState({isShowingPopup:!1})})),Object(h.a)(Object(l.a)(c),"setUpScrollBehavior",(function(){var e=c.mapContainer.current;e&&(e.addEventListener("wheel",(function(e){c.props.isScrollZoomingEnabled||e.stopPropagation()}),{capture:!0,passive:!0}),e.addEventListener("keydown",(function(e){e.shiftKey||"ArrowUp"!==e.key&&"ArrowDown"!==e.key||c.props.isScrollZoomingEnabled||e.stopPropagation()}),!0))})),Object(h.a)(Object(l.a)(c),"handleIntersecting",(function(){c.props.isIntersecting?c.hasEverBeenIntersected?c.arcGISView&&c.mapContainer.current&&!c.arcGISView.container&&(c.arcGISView.container=c.mapContainer.current):(c.init(),c.hasEverBeenIntersected=!0):c.arcGISView&&c.arcGISView.container&&(c.arcGISView.container=null)})),Object(h.a)(Object(l.a)(c),"isInLazyLoadingMode",(function(){return"boolean"===typeof c.props.isIntersecting})),c.mapType=t,c.state={isShowingPopup:!1,shouldShowFullLegend:!1,isLegendAvailable:!1,isViewReady:!1},c.mapContainer=Object(y.createRef)(),c.mapInfoLegendContainer=Object(y.createRef)(),c.mapInfoLegendIcon=Object(y.createRef)(),c.mapInfoPopupContainer=Object(y.createRef)(),c.handleIntersectingDebouncedly=Object(x.c)(c.handleIntersecting,50),c}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t){var n=this;if(e.portalItemId===this.props.portalItemId&&e.portal===this.props.portal||Object(I.a)(this.props.portalItemId,this.mapType,this.props.mapProperties,this.props.portal,this.props.appProxies).then((function(e){n.arcGISView.map=e.map,n.passUpMapViewLayers(e.map,n.arcGISView,e.layers)})),this.props.isStatic||(!e.shouldShowLegend&&this.props.shouldShowLegend&&this.createLegendWidget(),this.showOrHideExpandableSearchWidget(e),this.showOrHideLocateWidget(e),this.customizeSearchSymbol()),this.isInLazyLoadingMode()&&(e.isIntersecting!==this.props.isIntersecting||this.props.isIntersecting&&!this.hasEverBeenIntersected)&&this.handleIntersectingDebouncedly(),t.shouldShowFullLegend!==this.state.shouldShowFullLegend){var i=this.state.shouldShowFullLegend?this.mapInfoLegendContainer:this.mapInfoLegendIcon;i.current&&i.current.focus()}}},{key:"componentDidMount",value:function(){this.setUpIntersectionObserver(),this.isInLazyLoadingMode()||this.init()}},{key:"componentWillUnmount",value:function(){var e;this.canSetState=!1,null===(e=this.arcGISView)||void 0===e||e.destroy()}},{key:"render",value:function(){return P("div",{ref:this.mapContainer,"aria-label":this.props.ariaLabel,role:"application","data-item-id":this.props.portalItemId,"data-blockid":this.props.datasetBlockId,className:"jsx-2641172590 arcgis-map-container"},this.renderPopupLegendContainer(),this.state.isViewReady&&P(S.a,{view:this.arcGISView,prevent:this.props.isStatic,home:this.arcGISHome}),P(f.a,{id:"2088542050"},[".arcgis-map-container.jsx-2641172590{width:100%;height:100%;pointer-events:all;position:relative;background-color:transparent;}"]),P(f.a,{id:"869540741"},[".arcgis-map-container .esri-ui-bottom-right,.arcgis-map-container .esri-ui-bottom-left,html[dir='rtl'] .arcgis-map-container .esri-ui-bottom-left{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;}",".arcgis-map-container .esri-ui-bottom-right .esri-component,.arcgis-map-container .esri-ui-bottom-left .esri-component{margin-top:0.5rem;}"]))}},{key:"passUpMapViewLayers",value:function(e,t,n,i){this.props.onMapLoad&&this.props.onMapLoad(e,t),this.props.onLayerLoad&&this.props.onLayerLoad(n),this.props.onJsonUtilsLoad&&i&&this.props.onJsonUtilsLoad(i)}},{key:"createLegendWidget",value:function(){var e=this;if(this.arcGISView&&!this.arcGISLegend){var t=this.mapInfoLegendContainer.current;t&&(this.isCreatingLegendWidget||(this.isCreatingLegendWidget=!0,Object(I.f)(t,this.arcGISView).then((function(t){e.arcGISView.ui.add(t),t.hasOwnProperty("activeLayerInfos")&&t.activeLayerInfos.length>0?e.canSetState&&e.setState({isLegendAvailable:!0}):t.watch("activeLayerInfos.length",(function(t){e.canSetState&&e.setState({isLegendAvailable:t>0})})),e.arcGISLegend=t,e.isCreatingLegendWidget=!1}))))}}}]),a}(y.Component);t.b=T},jmHV:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r}));var i=n("GpNk"),a=function(){return Object(i.a)({id:"tourMapCustomZoomNudge"})},o=function(){Object(i.b)({id:"tourMapCustomZoomNudge",value:!0})},r=function(e){return JSON.stringify(Object.keys(e).map((function(t){var n=e[t];return{id:t,scale:n.scale,nodes:n.nodes.map((function(e){return{long:e.long,lat:e.lat}}))}})))}},k5Cm:function(e,t,n){"use strict";function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){a(e,t,n[t])}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function c(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var l=c(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),p=c(/Edge/i),u=c(/firefox/i),d=c(/safari/i)&&!c(/chrome/i)&&!c(/android/i),h=c(/iP(ad|od|hone)/i),m=c(/chrome/i)&&c(/android/i),f={capture:!1,passive:!1};function y(e,t,n){e.addEventListener(t,n,!l&&f)}function g(e,t,n){e.removeEventListener(t,n,!l&&f)}function v(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function b(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function x(e,t,n,i){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&v(e,t):v(e,t))||i&&e===n)return e;if(e===n)break}while(e=b(e))}return null}var O,w=/\s+/g;function j(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(w," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(w," ")}}function C(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in i||-1!==t.indexOf("webkit")||(t="-webkit-"+t),i[t]=n+("string"===typeof n?"":"px")}}function k(e,t){var n="";if("string"===typeof e)n=e;else do{var i=C(e,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function S(e,t,n){if(e){var i=e.getElementsByTagName(t),a=0,o=i.length;if(n)for(;a<o;a++)n(i[a],a);return i}return[]}function I(){var e=document.scrollingElement;return e||document.documentElement}function P(e,t,n,i,a){if(e.getBoundingClientRect||e===window){var o,r,s,c,p,u,d;if(e!==window&&e!==I()?(r=(o=e.getBoundingClientRect()).top,s=o.left,c=o.bottom,p=o.right,u=o.height,d=o.width):(r=0,s=0,c=window.innerHeight,p=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(a=a||e.parentNode,!l))do{if(a&&a.getBoundingClientRect&&("none"!==C(a,"transform")||n&&"static"!==C(a,"position"))){var h=a.getBoundingClientRect();r-=h.top+parseInt(C(a,"border-top-width")),s-=h.left+parseInt(C(a,"border-left-width")),c=r+o.height,p=s+o.width;break}}while(a=a.parentNode);if(i&&e!==window){var m=k(a||e),f=m&&m.a,y=m&&m.d;m&&(c=(r/=y)+(u/=y),p=(s/=f)+(d/=f))}return{top:r,left:s,bottom:c,right:p,width:d,height:u}}}function R(e,t,n){for(var i=A(e,!0),a=P(e)[t];i;){var o=P(i)[n];if(!("top"===n||"left"===n?a>=o:a<=o))return i;if(i===I())break;i=A(i,!1)}return!1}function E(e,t,n){for(var i=0,a=0,o=e.children;a<o.length;){if("none"!==o[a].style.display&&o[a]!==Ge.ghost&&o[a]!==Ge.dragged&&x(o[a],n.draggable,e,!1)){if(i===t)return o[a];i++}a++}return null}function D(e,t){for(var n=e.lastElementChild;n&&(n===Ge.ghost||"none"===C(n,"display")||t&&!v(n,t));)n=n.previousElementSibling;return n||null}function T(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Ge.clone||t&&!v(e,t)||n++;return n}function M(e){var t=0,n=0,i=I();if(e)do{var a=k(e),o=a.a,r=a.d;t+=e.scrollLeft*o,n+=e.scrollTop*r}while(e!==i&&(e=e.parentNode));return[t,n]}function A(e,t){if(!e||!e.getBoundingClientRect)return I();var n=e,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=C(n);if(n.clientWidth<n.scrollWidth&&("auto"==a.overflowX||"scroll"==a.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==a.overflowY||"scroll"==a.overflowY)){if(!n.getBoundingClientRect||n===document.body)return I();if(i||t)return n;i=!0}}}while(n=n.parentNode);return I()}function N(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function L(e,t){return function(){if(!O){var n=arguments,i=this;1===n.length?e.call(i,n[0]):e.apply(i,n),O=setTimeout((function(){O=void 0}),t)}}}function G(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function _(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var B="Sortable"+(new Date).getTime();function W(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==C(e,"display")&&e!==Ge.ghost){t.push({target:e,rect:P(e)});var n=r({},t[t.length-1].rect);if(e.thisAnimationDuration){var i=k(e,!0);i&&(n.top-=i.f,n.left-=i.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[n][i])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var i=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof n&&n());var a=!1,o=0;t.forEach((function(e){var t=0,n=e.target,r=n.fromRect,s=P(n),c=n.prevFromRect,l=n.prevToRect,p=e.rect,u=k(n,!0);u&&(s.top-=u.f,s.left-=u.e),n.toRect=s,n.thisAnimationDuration&&N(c,s)&&!N(r,s)&&(p.top-s.top)/(p.left-s.left)===(r.top-s.top)/(r.left-s.left)&&(t=function(e,t,n,i){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*i.animation}(p,c,l,i.options)),N(s,r)||(n.prevFromRect=r,n.prevToRect=s,t||(t=i.options.animation),i.animate(n,p,s,t)),t&&(a=!0,o=Math.max(o,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),a?e=setTimeout((function(){"function"===typeof n&&n()}),o):"function"===typeof n&&n(),t=[]},animate:function(e,t,n,i){if(i){C(e,"transition",""),C(e,"transform","");var a=k(this.el),o=a&&a.a,r=a&&a.d,s=(t.left-n.left)/(o||1),c=(t.top-n.top)/(r||1);e.animatingX=!!s,e.animatingY=!!c,C(e,"transform","translate3d("+s+"px,"+c+"px,0)"),function(e){e.offsetWidth}(e),C(e,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),C(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){C(e,"transition",""),C(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),i)}}}}var V=[],F={initializeByDefault:!0},U={mount:function(e){for(var t in F)!F.hasOwnProperty(t)||t in e||(e[t]=F[t]);V.push(e)},pluginEvent:function(e,t,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var a=e+"Global";V.forEach((function(i){t[i.pluginName]&&(t[i.pluginName][a]&&t[i.pluginName][a](r({sortable:t},n)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](r({sortable:t},n)))}))},initializePlugins:function(e,t,n,i){for(var a in V.forEach((function(i){var a=i.pluginName;if(e.options[a]||i.initializeByDefault){var r=new i(e,t,e.options);r.sortable=e,r.options=e.options,e[a]=r,o(n,r.defaults)}})),e.options)if(e.options.hasOwnProperty(a)){var r=this.modifyOption(e,a,e.options[a]);"undefined"!==typeof r&&(e.options[a]=r)}},getEventProperties:function(e,t){var n={};return V.forEach((function(i){"function"===typeof i.eventProperties&&o(n,i.eventProperties.call(t[i.pluginName],e))})),n},modifyOption:function(e,t,n){var i;return V.forEach((function(a){e[a.pluginName]&&a.optionListeners&&"function"===typeof a.optionListeners[t]&&(i=a.optionListeners[t].call(e[a.pluginName],n))})),i}};function z(e){var t=e.sortable,n=e.rootEl,i=e.name,a=e.targetEl,o=e.cloneEl,s=e.toEl,c=e.fromEl,u=e.oldIndex,d=e.newIndex,h=e.oldDraggableIndex,m=e.newDraggableIndex,f=e.originalEvent,y=e.putSortable,g=e.extraEventProperties;if(t=t||n&&n[B]){var v,b=t.options,x="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||l||p?(v=document.createEvent("Event")).initEvent(i,!0,!0):v=new CustomEvent(i,{bubbles:!0,cancelable:!0}),v.to=s||n,v.from=c||n,v.item=a||n,v.clone=o,v.oldIndex=u,v.newIndex=d,v.oldDraggableIndex=h,v.newDraggableIndex=m,v.originalEvent=f,v.pullMode=y?y.lastPutMode:void 0;var O=r({},g,U.getEventProperties(i,t));for(var w in O)v[w]=O[w];n&&n.dispatchEvent(v),b[x]&&b[x].call(t,v)}}var H=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.evt,a=s(n,["evt"]);U.pluginEvent.bind(Ge)(e,t,r({dragEl:K,parentEl:X,ghostEl:J,rootEl:Z,nextEl:q,lastDownEl:Q,cloneEl:$,cloneHidden:ee,dragStarted:he,putSortable:re,activeSortable:Ge.active,originalEvent:i,oldIndex:te,oldDraggableIndex:ie,newIndex:ne,newDraggableIndex:ae,hideGhostForTarget:Me,unhideGhostForTarget:Ae,cloneNowHidden:function(){ee=!0},cloneNowShown:function(){ee=!1},dispatchSortableEvent:function(e){Y({sortable:t,name:e,originalEvent:i})}},a))};function Y(e){z(r({putSortable:re,cloneEl:$,targetEl:K,rootEl:Z,oldIndex:te,oldDraggableIndex:ie,newIndex:ne,newDraggableIndex:ae},e))}var K,X,J,Z,q,Q,$,ee,te,ne,ie,ae,oe,re,se,ce,le,pe,ue,de,he,me,fe,ye,ge,ve=!1,be=!1,xe=[],Oe=!1,we=!1,je=[],Ce=!1,ke=[],Se="undefined"!==typeof document,Ie=h,Pe=p||l?"cssFloat":"float",Re=Se&&!m&&!h&&"draggable"in document.createElement("div"),Ee=function(){if(Se){if(l)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),De=function(e,t){var n=C(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),a=E(e,0,t),o=E(e,1,t),r=a&&C(a),s=o&&C(o),c=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+P(a).width,l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+P(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&r.float&&"none"!==r.float){var p="left"===r.float?"left":"right";return!o||"both"!==s.clear&&s.clear!==p?"horizontal":"vertical"}return a&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||c>=i&&"none"===n[Pe]||o&&"none"===n[Pe]&&c+l>i)?"vertical":"horizontal"},Te=function(e){function t(e,n){return function(i,a,o,r){var s=i.options.group.name&&a.options.group.name&&i.options.group.name===a.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"===typeof e)return t(e(i,a,o,r),n)(i,a,o,r);var c=(n?i:a).options.group.name;return!0===e||"string"===typeof e&&e===c||e.join&&e.indexOf(c)>-1}}var n={},a=e.group;a&&"object"==i(a)||(a={name:a}),n.name=a.name,n.checkPull=t(a.pull,!0),n.checkPut=t(a.put),n.revertClone=a.revertClone,e.group=n},Me=function(){!Ee&&J&&C(J,"display","none")},Ae=function(){!Ee&&J&&C(J,"display","")};Se&&document.addEventListener("click",(function(e){if(be)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),be=!1,!1}),!0);var Ne=function(e){if(K){var t=function(e,t){var n;return xe.some((function(i){if(!D(i)){var a=P(i),o=i[B].options.emptyInsertThreshold,r=e>=a.left-o&&e<=a.right+o,s=t>=a.top-o&&t<=a.bottom+o;return o&&r&&s?n=i:void 0}})),n}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[B]._onDragOver(n)}}},Le=function(e){K&&K.parentNode[B]._isOutsideThisEl(e.target)};function Ge(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=o({},t),e[B]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return De(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ge.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var i in U.initializePlugins(this,e,n),n)!(i in t)&&(t[i]=n[i]);for(var a in Te(t),this)"_"===a.charAt(0)&&"function"===typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!t.forceFallback&&Re,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?y(e,"pointerdown",this._onTapStart):(y(e,"mousedown",this._onTapStart),y(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(y(e,"dragover",this),y(e,"dragenter",this)),xe.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),o(this,W())}function _e(e,t,n,i,a,o,r,s){var c,u,d=e[B],h=d.options.onMove;return!window.CustomEvent||l||p?(c=document.createEvent("Event")).initEvent("move",!0,!0):c=new CustomEvent("move",{bubbles:!0,cancelable:!0}),c.to=t,c.from=e,c.dragged=n,c.draggedRect=i,c.related=a||t,c.relatedRect=o||P(t),c.willInsertAfter=s,c.originalEvent=r,e.dispatchEvent(c),h&&(u=h.call(d,c,r)),u}function Be(e){e.draggable=!1}function We(){Ce=!1}function Ve(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function Fe(e){return setTimeout(e,0)}function Ue(e){return clearTimeout(e)}Ge.prototype={constructor:Ge,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(me=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,K):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,a=i.preventOnFilter,o=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(r||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,l=i.filter;if(function(e){ke.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var i=t[n];i.checked&&ke.push(i)}}(n),!K&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||i.disabled)&&!c.isContentEditable&&(!(s=x(s,i.draggable,n,!1))||!s.animated)&&Q!==s){if(te=T(s),ie=T(s,i.draggable),"function"===typeof l){if(l.call(this,e,s,this))return Y({sortable:t,rootEl:c,name:"filter",targetEl:s,toEl:n,fromEl:n}),H("filter",t,{evt:e}),void(a&&e.cancelable&&e.preventDefault())}else if(l&&(l=l.split(",").some((function(i){if(i=x(c,i.trim(),n,!1))return Y({sortable:t,rootEl:i,name:"filter",targetEl:s,fromEl:n,toEl:n}),H("filter",t,{evt:e}),!0}))))return void(a&&e.cancelable&&e.preventDefault());i.handle&&!x(c,i.handle,n,!1)||this._prepareDragStart(e,r,s)}}},_prepareDragStart:function(e,t,n){var i,a=this,o=a.el,r=a.options,s=o.ownerDocument;if(n&&!K&&n.parentNode===o){var c=P(n);if(Z=o,X=(K=n).parentNode,q=K.nextSibling,Q=n,oe=r.group,Ge.dragged=K,se={target:K,clientX:(t||e).clientX,clientY:(t||e).clientY},ue=se.clientX-c.left,de=se.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,K.style["will-change"]="all",i=function(){H("delayEnded",a,{evt:e}),Ge.eventCanceled?a._onDrop():(a._disableDelayedDragEvents(),!u&&a.nativeDraggable&&(K.draggable=!0),a._triggerDragStart(e,t),Y({sortable:a,name:"choose",originalEvent:e}),j(K,r.chosenClass,!0))},r.ignore.split(",").forEach((function(e){S(K,e.trim(),Be)})),y(s,"dragover",Ne),y(s,"mousemove",Ne),y(s,"touchmove",Ne),y(s,"mouseup",a._onDrop),y(s,"touchend",a._onDrop),y(s,"touchcancel",a._onDrop),u&&this.nativeDraggable&&(this.options.touchStartThreshold=4,K.draggable=!0),H("delayStart",this,{evt:e}),!r.delay||r.delayOnTouchOnly&&!t||this.nativeDraggable&&(p||l))i();else{if(Ge.eventCanceled)return void this._onDrop();y(s,"mouseup",a._disableDelayedDrag),y(s,"touchend",a._disableDelayedDrag),y(s,"touchcancel",a._disableDelayedDrag),y(s,"mousemove",a._delayedDragTouchMoveHandler),y(s,"touchmove",a._delayedDragTouchMoveHandler),r.supportPointer&&y(s,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(i,r.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){K&&Be(K),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;g(e,"mouseup",this._disableDelayedDrag),g(e,"touchend",this._disableDelayedDrag),g(e,"touchcancel",this._disableDelayedDrag),g(e,"mousemove",this._delayedDragTouchMoveHandler),g(e,"touchmove",this._delayedDragTouchMoveHandler),g(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?y(document,"pointermove",this._onTouchMove):y(document,t?"touchmove":"mousemove",this._onTouchMove):(y(K,"dragend",this),y(Z,"dragstart",this._onDragStart));try{document.selection?Fe((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(ve=!1,Z&&K){H("dragStarted",this,{evt:t}),this.nativeDraggable&&y(document,"dragover",Le);var n=this.options;!e&&j(K,n.dragClass,!1),j(K,n.ghostClass,!0),Ge.active=this,e&&this._appendGhost(),Y({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ce){this._lastX=ce.clientX,this._lastY=ce.clientY,Me();for(var e=document.elementFromPoint(ce.clientX,ce.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ce.clientX,ce.clientY))!==t;)t=e;if(K.parentNode[B]._isOutsideThisEl(e),t)do{if(t[B]){if(t[B]._onDragOver({clientX:ce.clientX,clientY:ce.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Ae()}},_onTouchMove:function(e){if(se){var t=this.options,n=t.fallbackTolerance,i=t.fallbackOffset,a=e.touches?e.touches[0]:e,o=J&&k(J,!0),r=J&&o&&o.a,s=J&&o&&o.d,c=Ie&&ge&&M(ge),l=(a.clientX-se.clientX+i.x)/(r||1)+(c?c[0]-je[0]:0)/(r||1),p=(a.clientY-se.clientY+i.y)/(s||1)+(c?c[1]-je[1]:0)/(s||1);if(!Ge.active&&!ve){if(n&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(J){o?(o.e+=l-(le||0),o.f+=p-(pe||0)):o={a:1,b:0,c:0,d:1,e:l,f:p};var u="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");C(J,"webkitTransform",u),C(J,"mozTransform",u),C(J,"msTransform",u),C(J,"transform",u),le=l,pe=p,ce=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!J){var e=this.options.fallbackOnBody?document.body:Z,t=P(K,!0,Ie,!0,e),n=this.options;if(Ie){for(ge=e;"static"===C(ge,"position")&&"none"===C(ge,"transform")&&ge!==document;)ge=ge.parentNode;ge!==document.body&&ge!==document.documentElement?(ge===document&&(ge=I()),t.top+=ge.scrollTop,t.left+=ge.scrollLeft):ge=I(),je=M(ge)}j(J=K.cloneNode(!0),n.ghostClass,!1),j(J,n.fallbackClass,!0),j(J,n.dragClass,!0),C(J,"transition",""),C(J,"transform",""),C(J,"box-sizing","border-box"),C(J,"margin",0),C(J,"top",t.top),C(J,"left",t.left),C(J,"width",t.width),C(J,"height",t.height),C(J,"opacity","0.8"),C(J,"position",Ie?"absolute":"fixed"),C(J,"zIndex","100000"),C(J,"pointerEvents","none"),Ge.ghost=J,e.appendChild(J),C(J,"transform-origin",ue/parseInt(J.style.width)*100+"% "+de/parseInt(J.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,a=n.options;H("dragStart",this,{evt:e}),Ge.eventCanceled?this._onDrop():(H("setupClone",this),Ge.eventCanceled||(($=_(K)).draggable=!1,$.style["will-change"]="",this._hideClone(),j($,this.options.chosenClass,!1),Ge.clone=$),n.cloneId=Fe((function(){H("clone",n),Ge.eventCanceled||(n.options.removeCloneOnHide||Z.insertBefore($,K),n._hideClone(),Y({sortable:n,name:"clone"}))})),!t&&j(K,a.dragClass,!0),t?(be=!0,n._loopId=setInterval(n._emulateDragOver,50)):(g(document,"mouseup",n._onDrop),g(document,"touchend",n._onDrop),g(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",a.setData&&a.setData.call(n,i,K)),y(document,"drop",n),C(K,"transform","translateZ(0)")),ve=!0,n._dragStartId=Fe(n._dragStarted.bind(n,t,e)),y(document,"selectstart",n),he=!0,d&&C(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,i,a,o=this.el,s=e.target,c=this.options,l=c.group,p=Ge.active,u=oe===l,d=c.sort,h=re||p,m=this,f=!1;if(!Ce){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=x(s,c.draggable,o,!0),L("dragOver"),Ge.eventCanceled)return f;if(K.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||m._ignoreWhileAnimating===s)return W(!1);if(be=!1,p&&!c.disabled&&(u?d||(i=!Z.contains(K)):re===this||(this.lastPutMode=oe.checkPull(this,p,K,e))&&l.checkPut(this,p,K,e))){if(a="vertical"===this._getDirection(e,s),t=P(K),L("dragOverValid"),Ge.eventCanceled)return f;if(i)return X=Z,_(),this._hideClone(),L("revert"),Ge.eventCanceled||(q?Z.insertBefore(K,q):Z.appendChild(K)),W(!0);var y=D(o,c.draggable);if(!y||function(e,t,n){var i=P(D(n.el,n.options.draggable));return t?e.clientX>i.right+10||e.clientX<=i.right&&e.clientY>i.bottom&&e.clientX>=i.left:e.clientX>i.right&&e.clientY>i.top||e.clientX<=i.right&&e.clientY>i.bottom+10}(e,a,this)&&!y.animated){if(y===K)return W(!1);if(y&&o===e.target&&(s=y),s&&(n=P(s)),!1!==_e(Z,o,K,t,s,n,e,!!s))return _(),o.appendChild(K),X=o,V(),W(!0)}else if(s.parentNode===o){n=P(s);var g,v,b,O=K.parentNode!==o,w=!function(e,t,n){var i=n?e.left:e.top,a=n?e.right:e.bottom,o=n?e.width:e.height,r=n?t.left:t.top,s=n?t.right:t.bottom,c=n?t.width:t.height;return i===r||a===s||i+o/2===r+c/2}(K.animated&&K.toRect||t,s.animated&&s.toRect||n,a),k=a?"top":"left",S=R(s,"top","top")||R(K,"top","top"),I=S?S.scrollTop:void 0;if(me!==s&&(v=n[k],Oe=!1,we=!w&&c.invertSwap||O),0!==(g=function(e,t,n,i,a,o,r,s){var c=i?e.clientY:e.clientX,l=i?n.height:n.width,p=i?n.top:n.left,u=i?n.bottom:n.right,d=!1;if(!r)if(s&&ye<l*a){if(!Oe&&(1===fe?c>p+l*o/2:c<u-l*o/2)&&(Oe=!0),Oe)d=!0;else if(1===fe?c<p+ye:c>u-ye)return-fe}else if(c>p+l*(1-a)/2&&c<u-l*(1-a)/2)return function(e){return T(K)<T(e)?1:-1}(t);if((d=d||r)&&(c<p+l*o/2||c>u-l*o/2))return c>p+l/2?1:-1;return 0}(e,s,n,a,w?1:c.swapThreshold,null==c.invertedSwapThreshold?c.swapThreshold:c.invertedSwapThreshold,we,me===s))){var E=T(K);do{E-=g,b=X.children[E]}while(b&&("none"===C(b,"display")||b===J))}if(0===g||b===s)return W(!1);me=s,fe=g;var M=s.nextElementSibling,A=!1,N=_e(Z,o,K,t,s,n,e,A=1===g);if(!1!==N)return 1!==N&&-1!==N||(A=1===N),Ce=!0,setTimeout(We,30),_(),A&&!M?o.appendChild(K):s.parentNode.insertBefore(K,A?M:s),S&&G(S,0,I-S.scrollTop),X=K.parentNode,void 0===v||we||(ye=Math.abs(v-P(s)[k])),V(),W(!0)}if(o.contains(K))return W(!1)}return!1}function L(c,l){H(c,m,r({evt:e,isOwner:u,axis:a?"vertical":"horizontal",revert:i,dragRect:t,targetRect:n,canSort:d,fromSortable:h,target:s,completed:W,onMove:function(n,i){return _e(Z,o,K,t,n,P(n),e,i)},changed:V},l))}function _(){L("dragOverAnimationCapture"),m.captureAnimationState(),m!==h&&h.captureAnimationState()}function W(t){return L("dragOverCompleted",{insertion:t}),t&&(u?p._hideClone():p._showClone(m),m!==h&&(j(K,re?re.options.ghostClass:p.options.ghostClass,!1),j(K,c.ghostClass,!0)),re!==m&&m!==Ge.active?re=m:m===Ge.active&&re&&(re=null),h===m&&(m._ignoreWhileAnimating=s),m.animateAll((function(){L("dragOverAnimationComplete"),m._ignoreWhileAnimating=null})),m!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(s===K&&!K.animated||s===o&&!s.animated)&&(me=null),c.dragoverBubble||e.rootEl||s===document||(K.parentNode[B]._isOutsideThisEl(e.target),!t&&Ne(e)),!c.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),f=!0}function V(){ne=T(K),ae=T(K,c.draggable),Y({sortable:m,name:"change",toEl:o,newIndex:ne,newDraggableIndex:ae,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){g(document,"mousemove",this._onTouchMove),g(document,"touchmove",this._onTouchMove),g(document,"pointermove",this._onTouchMove),g(document,"dragover",Ne),g(document,"mousemove",Ne),g(document,"touchmove",Ne)},_offUpEvents:function(){var e=this.el.ownerDocument;g(e,"mouseup",this._onDrop),g(e,"touchend",this._onDrop),g(e,"pointerup",this._onDrop),g(e,"touchcancel",this._onDrop),g(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;ne=T(K),ae=T(K,n.draggable),H("drop",this,{evt:e}),X=K&&K.parentNode,ne=T(K),ae=T(K,n.draggable),Ge.eventCanceled?this._nulling():(ve=!1,we=!1,Oe=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ue(this.cloneId),Ue(this._dragStartId),this.nativeDraggable&&(g(document,"drop",this),g(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),d&&C(document.body,"user-select",""),C(K,"transform",""),e&&(he&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),J&&J.parentNode&&J.parentNode.removeChild(J),(Z===X||re&&"clone"!==re.lastPutMode)&&$&&$.parentNode&&$.parentNode.removeChild($),K&&(this.nativeDraggable&&g(K,"dragend",this),Be(K),K.style["will-change"]="",he&&!ve&&j(K,re?re.options.ghostClass:this.options.ghostClass,!1),j(K,this.options.chosenClass,!1),Y({sortable:this,name:"unchoose",toEl:X,newIndex:null,newDraggableIndex:null,originalEvent:e}),Z!==X?(ne>=0&&(Y({rootEl:X,name:"add",toEl:X,fromEl:Z,originalEvent:e}),Y({sortable:this,name:"remove",toEl:X,originalEvent:e}),Y({rootEl:X,name:"sort",toEl:X,fromEl:Z,originalEvent:e}),Y({sortable:this,name:"sort",toEl:X,originalEvent:e})),re&&re.save()):ne!==te&&ne>=0&&(Y({sortable:this,name:"update",toEl:X,originalEvent:e}),Y({sortable:this,name:"sort",toEl:X,originalEvent:e})),Ge.active&&(null!=ne&&-1!==ne||(ne=te,ae=ie),Y({sortable:this,name:"end",toEl:X,originalEvent:e}),this.save()))),this._nulling())},_nulling:function(){H("nulling",this),Z=K=X=J=q=$=Q=ee=se=ce=he=ne=ae=te=ie=me=fe=re=oe=Ge.dragged=Ge.ghost=Ge.clone=Ge.active=null,ke.forEach((function(e){e.checked=!0})),ke.length=le=pe=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":K&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,i=0,a=n.length,o=this.options;i<a;i++)x(e=n[i],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||Ve(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach((function(e,i){var a=n.children[i];x(a,this.options.draggable,n,!1)&&(t[e]=a)}),this),e.forEach((function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))}))},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return x(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var i=U.modifyOption(this,e,t);n[e]="undefined"!==typeof i?i:t,"group"===e&&Te(n)},destroy:function(){H("destroy",this);var e=this.el;e[B]=null,g(e,"mousedown",this._onTapStart),g(e,"touchstart",this._onTapStart),g(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(g(e,"dragover",this),g(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),xe.splice(xe.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ee){if(H("hideClone",this),Ge.eventCanceled)return;C($,"display","none"),this.options.removeCloneOnHide&&$.parentNode&&$.parentNode.removeChild($),ee=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ee){if(H("showClone",this),Ge.eventCanceled)return;Z.contains(K)&&!this.options.group.revertClone?Z.insertBefore($,K):q?Z.insertBefore($,q):Z.appendChild($),this.options.group.revertClone&&this.animate(K,$),C($,"display",""),ee=!1}}else this._hideClone()}},Se&&y(document,"touchmove",(function(e){(Ge.active||ve)&&e.cancelable&&e.preventDefault()})),Ge.utils={on:y,off:g,css:C,find:S,is:function(e,t){return!!x(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:L,closest:x,toggleClass:j,clone:_,index:T,nextTick:Fe,cancelNextTick:Ue,detectDirection:De,getChild:E},Ge.get=function(e){return e[B]},Ge.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Ge.utils=r({},Ge.utils,e.utils)),U.mount(e)}))},Ge.create=function(e,t){return new Ge(e,t)},Ge.version="1.10.2";var ze,He,Ye,Ke,Xe,Je,Ze=[],qe=!1;function Qe(){Ze.forEach((function(e){clearInterval(e.pid)})),Ze=[]}function $e(){clearInterval(Je)}var et=L((function(e,t,n,i){if(t.scroll){var a,o=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,c=t.scrollSpeed,l=I(),p=!1;He!==n&&(He=n,Qe(),ze=t.scroll,a=t.scrollFn,!0===ze&&(ze=A(n,!0)));var u=0,d=ze;do{var h=d,m=P(h),f=m.top,y=m.bottom,g=m.left,v=m.right,b=m.width,x=m.height,O=void 0,w=void 0,j=h.scrollWidth,k=h.scrollHeight,S=C(h),R=h.scrollLeft,E=h.scrollTop;h===l?(O=b<j&&("auto"===S.overflowX||"scroll"===S.overflowX||"visible"===S.overflowX),w=x<k&&("auto"===S.overflowY||"scroll"===S.overflowY||"visible"===S.overflowY)):(O=b<j&&("auto"===S.overflowX||"scroll"===S.overflowX),w=x<k&&("auto"===S.overflowY||"scroll"===S.overflowY));var D=O&&(Math.abs(v-o)<=s&&R+b<j)-(Math.abs(g-o)<=s&&!!R),T=w&&(Math.abs(y-r)<=s&&E+x<k)-(Math.abs(f-r)<=s&&!!E);if(!Ze[u])for(var M=0;M<=u;M++)Ze[M]||(Ze[M]={});Ze[u].vx==D&&Ze[u].vy==T&&Ze[u].el===h||(Ze[u].el=h,Ze[u].vx=D,Ze[u].vy=T,clearInterval(Ze[u].pid),0==D&&0==T||(p=!0,Ze[u].pid=setInterval(function(){i&&0===this.layer&&Ge.active._onTouchMove(Xe);var t=Ze[this.layer].vy?Ze[this.layer].vy*c:0,n=Ze[this.layer].vx?Ze[this.layer].vx*c:0;"function"===typeof a&&"continue"!==a.call(Ge.dragged.parentNode[B],n,t,e,Xe,Ze[this.layer].el)||G(Ze[this.layer].el,n,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&d!==l&&(d=A(d,!1)));qe=p}}),30),tt=function(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,a=e.activeSortable,o=e.dispatchSortableEvent,r=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var c=n||a;r();var l=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,p=document.elementFromPoint(l.clientX,l.clientY);s(),c&&!c.el.contains(p)&&(o("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function nt(){}function it(){}nt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=E(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:tt},o(nt,{pluginName:"revertOnSpill"}),it.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:tt},o(it,{pluginName:"removeOnSpill"});Ge.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?y(document,"dragover",this._handleAutoScroll):this.options.supportPointer?y(document,"pointermove",this._handleFallbackAutoScroll):t.touches?y(document,"touchmove",this._handleFallbackAutoScroll):y(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?g(document,"dragover",this._handleAutoScroll):(g(document,"pointermove",this._handleFallbackAutoScroll),g(document,"touchmove",this._handleFallbackAutoScroll),g(document,"mousemove",this._handleFallbackAutoScroll)),$e(),Qe(),clearTimeout(O),O=void 0},nulling:function(){Xe=He=ze=qe=Je=Ye=Ke=null,Ze.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,i=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(i,a);if(Xe=e,t||p||l||d){et(e,this.options,o,t);var r=A(o,!0);!qe||Je&&i===Ye&&a===Ke||(Je&&$e(),Je=setInterval((function(){var o=A(document.elementFromPoint(i,a),!0);o!==r&&(r=o,Qe()),et(e,n.options,o,t)}),10),Ye=i,Ke=a)}else{if(!this.options.bubbleScroll||A(o,!0)===I())return void Qe();et(e,this.options,A(o,!1),!1)}}},o(e,{pluginName:"scroll",initializeByDefault:!0})}),Ge.mount(it,nt),t.a=Ge},k5g9:function(e,t,n){"use strict";n.r(t),n.d(t,"Editor",(function(){return _}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("2SGB"),f=n("NX3A"),y=n("wwFW"),g=n("W8gz"),v=n("9ixP"),b=n("HW3u"),x=n("TQaU"),O=n("QOs2"),w=n("bXtg"),j=n("ArZd"),C=n("t7DY"),k=n("cxan"),S=n("ADNR"),I=n("MKkT"),P=n("CeBE"),R=n("RuJI"),E=n("f95f"),D=n("erT5"),T=h.a.createElement,M=[[{mode:C.b.SELECT,icon:S.a,ariaLabel:"Select"}],[[{mode:C.b.POINT_REGULAR,icon:I.a,ariaLabel:"Point"},{mode:C.b.LINE_SPIKE,icon:P.a,ariaLabel:"type"},{mode:C.b.ARC_SPIKE,icon:P.a,ariaLabel:"type"},{mode:C.b.CIRCLE,icon:R.a,ariaLabel:"type"},{mode:C.b.CIRCLE_TRAJECTORY,icon:R.a,ariaLabel:"type"},{mode:C.b.POLYLINE,icon:E.a,ariaLabel:"type"}]]],A=[C.b.UNDO,C.b.REDO],N=Object(d.memo)((function(e){return T(D.a,Object(k.a)({},e,{disabledModes:A,configs:M}))})),L=h.a.createElement;function G(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var _=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(G()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"renderToolbar",(function(){return L(x.a,null,L(N,{mode:t.state.drawingMode,onSelected:t.onDrawingToolSelected,undo:t.undo,redo:t.redo,canUndo:!1,canRedo:!1,isDisabled:!1}))})),Object(l.a)(Object(o.a)(t),"renderMap",(function(){return L("div",{className:u.a.dynamic([["1962050678",[f.a.color.black]]])+" editor-container"},L(j.a,{setApp:t.setApp}),L(u.a,{id:"1962050678",dynamic:[f.a.color.black]},[".editor-container.__jsx-style-dynamic-selector{overflow:hidden;position:relative;z-index:0;background:".concat(f.a.color.black,";}")]))})),Object(l.a)(Object(o.a)(t),"renderSidePanel",(function(){var e=[{id:"options",icon:function(e){return L(y.a,{height:f.a.spacing.xxs,width:"auto",color:e,title:L(m.a,{id:"builder.common.properties",tagName:"title"})})},content:L(w.a,null,L(g.a,{title:"Controls"},L(v.a.LabeledSwitch,{label:L(m.a,{id:"builder.globe.typeBasemap"}),switch:L(v.a,{isOn:t.state.isTypeBasemap,onToggle:t.toggleTypeBasemap})}),L(v.a.LabeledSwitch,{label:L(m.a,{id:"builder.globe.darkBasemap"}),switch:L(v.a,{isOn:t.state.isDarkBasemapOn,onToggle:t.toggleBasemap})}),L(v.a.LabeledSwitch,{label:L(m.a,{id:"builder.globe.lightingAnimation"}),switch:L(v.a,{isOn:t.state.isLightingAnimationOn,onToggle:t.toggleLightingAnimation})}),L(v.a.LabeledSwitch,{label:L(m.a,{id:"builder.globe.cameraAnimation"}),switch:L(v.a,{isOn:t.state.isCameraAnimationOn,onToggle:t.toggleCameraAnimation})}),L(v.a.LabeledSwitch,{label:L("span",null,"Intensity Dome"),switch:L("input",{type:"range",onChange:t.onSlideA,min:0,max:1,step:.01,value:t.state.sliderValueA,"aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":t.state.sliderValueA})}),L(v.a.LabeledSwitch,{label:L("span",null,"Intensity Direct"),switch:L("input",{type:"range",onChange:t.onSlideB,min:0,max:1,step:.01,value:t.state.sliderValueB,"aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":t.state.sliderValueB})}),L(v.a.LabeledSwitch,{label:L(m.a,{id:"builder.globe.mapfilter"}),switch:L(v.a,{isOn:t.state.isMapfilterOn,onToggle:t.toggleMapfilter})}),L(v.a.LabeledSwitch,{label:L("span",null,"Stroke width"),switch:L("input",{type:"range",onChange:t.onSlideC,min:0,max:1,step:.01,value:t.state.sliderValueC,"aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":t.state.sliderValueC})})))}];return L(b.a,{items:e})})),Object(l.a)(Object(o.a)(t),"toggleTypeBasemap",(function(e){t.appConnector.app.pushAction("typeBasemap@"+e),t.setState({isTypeBasemap:e})})),Object(l.a)(Object(o.a)(t),"toggleBasemap",(function(e){t.appConnector.app.pushAction("basemap@"+e),t.setState({isDarkBasemapOn:e})})),Object(l.a)(Object(o.a)(t),"toggleCameraAnimation",(function(e){t.appConnector.app.pushAction("cameraAnimation@"+e),t.setState({isCameraAnimationOn:e})})),Object(l.a)(Object(o.a)(t),"toggleLightingAnimation",(function(e){t.appConnector.app.pushAction("lightingAnimation@"+e),t.setState({isLightingAnimationOn:e})})),Object(l.a)(Object(o.a)(t),"onSlideA",(function(e){var n=parseFloat(e.currentTarget.value);t.appConnector.app.pushAction("lightingDome@"+n),t.setState({sliderValueA:n})})),Object(l.a)(Object(o.a)(t),"onSlideB",(function(e){var n=parseFloat(e.currentTarget.value);t.appConnector.app.pushAction("lightingDirect@"+n),t.setState({sliderValueB:n})})),Object(l.a)(Object(o.a)(t),"toggleMapfilter",(function(e){t.appConnector.app.pushAction("mapfilter@"+e),t.setState({isMapfilterOn:e})})),Object(l.a)(Object(o.a)(t),"onSlideC",(function(e){var n=parseFloat(e.currentTarget.value);t.appConnector.app.pushAction("mapfilterColor@"+n),t.setState({sliderValueC:n})})),Object(l.a)(Object(o.a)(t),"setApp",(function(e){t.appConnector=e})),Object(l.a)(Object(o.a)(t),"onDrawingToolSelected",(function(e){t.appConnector.app.pushAction("ac@"+e),t.setState({drawingMode:e})})),Object(l.a)(Object(o.a)(t),"undo",(function(){})),Object(l.a)(Object(o.a)(t),"redo",(function(){})),Object(l.a)(Object(o.a)(t),"save",(function(){t.props.onPlace()})),Object(l.a)(Object(o.a)(t),"discard",(function(){t.props.onCancel()})),t.state={drawingMode:C.b.SELECT,isTypeBasemap:!0,isDarkBasemapOn:!0,isCameraAnimationOn:!0,isLightingAnimationOn:!0,sliderValueA:.5,sliderValueB:.5,isMapfilterOn:!1,sliderValueC:.5},t}return Object(a.a)(p,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return L(O.a,{toolbar:this.renderToolbar(),sidePanel:this.renderSidePanel(),map:this.renderMap(),primaryButtonTitle:"Save",onPrimaryButtonClick:this.save,secondaryButtonTitle:"Cancel",onSecondaryButtonClick:this.discard,shouldDisablePrimaryButton:!0})}}]),p}(d.PureComponent);t.default=_},"l/Z4":function(e,t,n){"use strict";var i=n("HbGN"),a=n("yFcC"),o=n.n(a),r=n("ERkP"),s=n.n(r),c=n("O94r"),l=n.n(c),p=n("NX3A"),u=n("1PWK"),d=n("Z4N4"),h=n("Y/5s"),m=n("A7aE"),f=n("Qy73"),y=n("oGlf"),g=s.a.createElement;t.a=Object(m.b)(Object(h.d)((function(e){var t=e.dimension,n=void 0===t?"4rem":t,a=Object(i.a)(e,["dimension"]),r=a.storyDesign.storyTheme.themeVariables[a.color||""]||a.storyDesign.storyTheme.themeVariables.accentColor1,s=function(e){var t=Object(y.d)(e),n=Object(y.f)(t,0,-.3,0);return Object(f.d)(n)}(r);a.hasColor||(r=p.a.color.ashGrey,s=p.a.color.ashGrey);var c=a.borderColor||(a.theme.id===u.a.dark?p.a.color.black:p.a.color.white);return g("div",{className:o.a.dynamic([["2697543653",[d.a.center(),d.a.typography.h5(),n,n,p.a.color.white,r,c,p.a.spacing.xxxxs,r,s]]])+" "+(l()("place-number",{"is-selected":a.isSelected})||"")},a.number,g(o.a,{id:"2697543653",dynamic:[d.a.center(),d.a.typography.h5(),n,n,p.a.color.white,r,c,p.a.spacing.xxxxs,r,s]},[".place-number.__jsx-style-dynamic-selector{".concat(d.a.center(),";").concat(d.a.typography.h5(),";height:").concat(n,";width:").concat(n,";color:").concat(p.a.color.white,";border-radius:50%;}"),".place-number.__jsx-style-dynamic-selector{background-color:".concat(r,";box-shadow:0 0 0 0.2rem ").concat(c,",0 0 0 ").concat(p.a.spacing.xxxxs," ").concat(r,";}"),".place-number.__jsx-style-dynamic-selector:not(.is-selected){background-color:".concat(s,";box-shadow:none;}")]))})))},l5Wi:function(e,t,n){"use strict";n.d(t,"h",(function(){return h})),n.d(t,"g",(function(){return m})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return g})),n.d(t,"k",(function(){return v})),n.d(t,"j",(function(){return b})),n.d(t,"f",(function(){return x})),n.d(t,"e",(function(){return O})),n.d(t,"c",(function(){return w})),n.d(t,"i",(function(){return j})),n.d(t,"d",(function(){return C}));var i=n("fGyu"),a=n("zjfJ"),o=n("t7DY"),r=n("LJBs"),s=n("cpdA"),c=n("K16L");function l(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e,t,n){var a=d({},t),o=[].concat(Object(i.a)(n),[e]);return f(o,a)},m=function(e,t,n){var i=d({},t),a=n.filter((function(t){return t!==e}));return f(a,i)},f=function(e,t){var n=y(e,t,[o.j.TEXT_LEADERLINE,o.j.ARROW_SINGLE,o.j.ARROW_DOUBLE]);return{currentlySelectedDrawingIds:Object(i.a)(e),isShowingAnnotationStylePanel:!!e.length&&n}},y=function(e,t,n){var i,a=l(e);try{var o=function(){var e,a=i.value,o=null===(e=t[a])||void 0===e?void 0:e.type;if(!n.find((function(e){return o===e})))return{v:!1}};for(a.s();!(i=a.n()).done;){var r=o();if("object"===typeof r)return r.v}}catch(s){a.e(s)}finally{a.f()}return!0},g=function(e,t){if(e.length)return y(e,t,[o.j.ARROW_SINGLE,o.j.ARROW_DOUBLE])?"arrow":y(e,t,[o.j.TEXT_LEADERLINE])?"text":y(e,t,[o.j.ARROW_SINGLE,o.j.ARROW_DOUBLE,o.j.TEXT_LEADERLINE])?"mixed":void 0},v=function(e,t,n,i){if(i===e)return null;var a=n,o=d({},t);return a.length?(a.forEach((function(n){var i=d({},t[n]),a=Object(r.b)(e),s=d({},i.styles);a?s=d({},i.styles,{},a):s.textColor&&s.backgroundColor&&(delete s.textColor,delete s.backgroundColor),i.styles=s,o[n]=i})),{drawings:o,currentlySelectedTextAnnotationColor:e}):{drawings:t,currentlySelectedTextAnnotationColor:e}},b=function(e,t,n,i){if(i===e)return null;var a=n,o=d({},t);return a.length?(a.forEach((function(n){var i=d({},t[n]),a=d({},i.styles);e===c.a.Continuous?a&&a.lineDash&&delete a.lineDash:a=d({},a,{lineDash:e}),i.styles=a,o[n]=i})),{drawings:o,currentlySelectedLeaderlineType:e}):{drawings:t,currentlySelectedLeaderlineType:e}},x=function(e){var t=function(e,t){switch(e){case"color2":return{textColor:t.titleColor,backgroundColor:t.backgroundColor};case"color3":return{textColor:t.bodyColorLight,backgroundColor:"transparent"};case"color4":return{textColor:t.bodyColorDark,backgroundColor:"transparent"};default:return{textColor:t.backgroundColor,backgroundColor:t.titleColor}}}(e.color,e.themeVariables);return Object(s.b)({backgroundColor:t.backgroundColor,bodyColor:t.textColor,dash:e.lineType,themeVariables:e.themeVariables})},O=function(e){switch(e){case"titleColor":return c.c.Color2;case"bodyColorLight":return c.c.Color3;case"bodyColorDark":return c.c.Color4;default:return c.c.Color1}},w=function(e,t){switch(e){case c.d.ThemeColor1:return t.themeColor1;case c.d.ThemeColor2:return t.themeColor2;case c.d.ThemeColor3:return t.themeColor3;case c.d.BackgroundColor:return t.backgroundColor;case c.d.AccentColor1:return t.accentColor1||t.backgroundColor;default:return t.titleColor}},j=function(e,t,n,i){if(i===e)return null;var a=n,o=d({},t);return a.length?(a.forEach((function(n){var i=d({},t[n]),a=d({},i.styles);a.color&&e===c.d.TitleColor?delete a.color:e!==c.d.TitleColor&&(a=d({},i.styles,{color:e})),i.styles=a,o[n]=i})),{drawings:o,currentlySelectedArrowColor:e}):{drawings:t,currentlySelectedArrowColor:e}},C=function(e,t){var n=w(e,t);return Object(s.a)(n)}},lBFC:function(e,t,n){"use strict";var i=n("VtSi"),a=n.n(i),o=n("9fIP"),r=n("MMYH"),s=n("pWxA"),c=n("PRnZ"),l=n("K/z8"),p=n("sRHE"),u=n("8K1b"),d=n("zjfJ"),h=n("txt0"),m=n("mvvZ"),f=n("NX3A"),y=n("h0mi"),g=n("O8Oa"),v=n("IXx0"),b=n("2tmL");function x(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var k=function(e){Object(u.a)(i,e);var t,n=(t=i,function(){var e,n=Object(p.a)(t);if(C()){var i=Object(p.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(l.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),t=n.call(this,e),Object(d.a)(Object(s.a)(t),"isDocked",(function(){return t.states.isImmersiveShowing&&!t.states.isTopSentinelShowing&&!t.states.isBottomSentinelShowing})),Object(d.a)(Object(s.a)(t),"insertSlide",(function(e){var n;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a.a.awrap(t.insertBlock({type:"immersive-slide",parent:Object(s.a)(t),data:{},index:e}));case 2:return n=i.sent,i.abrupt("return",n);case 4:case"end":return i.stop()}}),null,null,null,Promise)})),Object(d.a)(Object(s.a)(t),"getSlidesCount",(function(){return t.childrenIds.length})),Object(d.a)(Object(s.a)(t),"setViewportOffsetBottom",(function(){t.states.viewportOffsetBottom=t.mode===y.a.Viewer?"0px":t.states.isSlidesPanelExpanded?b.a.OFFSET_BOTTOM_EXPANDED:b.a.OFFSET_BOTTOM_COLLAPSED})),Object(d.a)(Object(s.a)(t),"setSentinelShowing",(function(e,n){var i,o;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if("undefined"!==typeof t.states[e]){r.next=2;break}return r.abrupt("return");case 2:if(i=t.isDocked(),t.states[e]=n,o=t.isDocked(),i===o){r.next=8;break}return r.next=8,a.a.awrap(t.onDockedChanged(o));case 8:return r.next=10,a.a.awrap(t.update({skipSave:!0}));case 10:case"end":return r.stop()}}),null,null,null,Promise)})),Object(d.a)(Object(s.a)(t),"onDockedChanged",(function(e){var n;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(n=t.getSelectedSlide())){i.next=9;break}if(!e){i.next=7;break}return i.next=5,a.a.awrap(n.do("onDocked"));case 5:i.next=9;break;case 7:return i.next=9,a.a.awrap(n.do("onUndocked"));case 9:case"end":return i.stop()}}),null,null,null,Promise)})),Object(d.a)(Object(s.a)(t),"onSlideClicked",(function(e){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=3;break}return n.next=3,a.a.awrap(t.navigateToSlide(e));case 3:case"end":return n.stop()}}),null,null,null,Promise)})),Object(d.a)(Object(s.a)(t),"duplicateSlide",(function(e){var n,i,o;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.copy(),r.next=3,a.a.awrap(t.paste(n,e.getIndex()+1));case 3:return i=r.sent,r.next=6,a.a.awrap(t.update());case 6:if(!i){r.next=15;break}if(null===(o=i.config)||void 0===o?void 0:o.isHidden){r.next=12;break}return r.next=10,a.a.awrap(t.navigateToSlide(i));case 10:t.states.skipUpdateActive=!0,setTimeout((function(){t.states.skipUpdateActive=!1}),500);case 12:return r.next=14,a.a.awrap(t.setSlidesPanelExpanded(!0));case 14:t.fireToast("builder.immersive.toast.slideDuplicated");case 15:case"end":return r.stop()}}),null,null,null,Promise)})),Object(d.a)(Object(s.a)(t),"addSlide",(function(){var e,n,i;return a.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!((e=t.childrenIds.indexOf(t.states.selectedSlideId))>=0)){o.next=14;break}return n=e===t.childrenIds.length-1?void 0:e+1,o.next=5,a.a.awrap(t.insertSlide(n));case 5:if(!(i=o.sent)){o.next=13;break}return o.next=9,a.a.awrap(t.navigateToSlide(i));case 9:return o.next=11,a.a.awrap(t.updateDescendents({shouldUpdatePostorder:!0}));case 11:return o.next=13,a.a.awrap(t.setSlidesPanelExpanded(!0));case 13:h.a.trackEvent(h.a.Category.Builder,h.a.Action.Builder_SideCar_AddNewSlide,h.a.Name.Builder_Sidecar);case 14:case"end":return o.stop()}}),null,null,null,Promise)})),Object(d.a)(Object(s.a)(t),"setSlidesPanelExpanded",(function(e){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.states.isSlidesPanelExpanded=e,t.setViewportOffsetBottom(),n.next=4,a.a.awrap(t.update({skipSave:!0}));case 4:case"end":return n.stop()}}),null,null,null,Promise)})),Object(d.a)(Object(s.a)(t),"fireToast",(function(e,n){var i=t.getGlobalState("immersive"),a=t.getGlobalState("intl");if(i&&a){var o=i.toast;null===o||void 0===o||o.add(j({type:"success",title:a.formatMessage({id:e})},n&&{details:a.formatMessage({id:n})}))}})),t.states.isImmersiveShowing=!1,t.states.isTopSentinelShowing=!1,t.states.isBottomSentinelShowing=!1,t.states.isSlidesPanelDragging=!1,t.states.isSlidesPanelExpanded=!1,t.states.skipUpdateActive=!1,t.states.immersiveElement=null,t.states.dragHandleElement=null,t.states.dnd.hasDraggedPlaceholder=!0,t.setViewportOffsetBottom(),t.addEventListener("getImmersiveId",(function(){return t.id})),t.addEventListener("selectFirstVisibleSlide",(function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.awrap(t.do("onSlideScrolledTo",t.getFirstVisibleChildIndex()));case 2:case"end":return e.stop()}}),null,null,null,Promise)})),t.addEventListener("reset",(function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.awrap(t.updateSlidesActivity({selectedIndex:t.getFirstVisibleChildIndex(),isTransitionAnimated:!1}));case 2:case"end":return e.stop()}}),null,null,null,Promise)})),t.addEventListener("onSlideScrolledTo",(function(e){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.awrap(t.updateSlidesActivity({selectedIndex:e,isTransitionAnimated:!0}));case 2:case"end":return n.stop()}}),null,null,null,Promise)})),t.addEventListener("onSlideScrolledAway",(function(e){var n;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:e>0&&(n=t.getPreviousVisibleChildIndex(e),t.updateSlidesActivity({selectedIndex:-1===n?e:n,isTransitionAnimated:!0}));case 1:case"end":return i.stop()}}),null,null,null,Promise)})),t.addEventListener("onMediaPanelMediaUpdated",(function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.awrap(t.update({skipSave:!0}));case 2:return e.next=4,a.a.awrap(t.updateDescendents({shouldUpdatePostorder:!0}));case 4:case"end":return e.stop()}}),null,null,null,Promise)})),t.addEventListener("duplicateSlide",(function(e){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.awrap(t.duplicateSlide(e));case 2:case"end":return n.stop()}}),null,null,null,Promise)})),t.addEventListener("getFirstVisibleChildIndex",(function(){return t.getFirstVisibleChildIndex()})),t.addEventListener("getLastVisibleChildIndex",(function(){return t.getLastVisibleChildIndex()})),t.addEventListener("getChildVisibleIndex",(function(e){return t.getChildVisibleIndex(e)})),t.addEventListener("getImmersiveElement",(function(){return t.states.immersiveElement})),t.addEventListener("getDragHandleElement",(function(){return t.states.dragHandleElement})),t.addEventListener("onDragStart",(function(){t.states.skipUpdateActive=!0,t.states.shouldScrollIntoView=!1})),t.addEventListener("onDragEnd",(function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t.states.skipUpdateActive=!1,e.next=3,a.a.awrap(t.do("selectFirstVisibleSlide"));case 3:return t.states.shouldScrollIntoView=!0,e.next=6,a.a.awrap(t.update({skipSave:!0}));case 6:case"end":return e.stop()}}),null,null,null,Promise)})),t.addEventListener("onBackgroundAudioUploaded",(function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t.fireToast("builder.immersive.toast.backgroundAudioAddedTitle","builder.immersive.toast.backgroundAudioAddedDetails"),e.next=3,a.a.awrap(t.update({skipSave:!0}));case 3:case"end":return e.stop()}}),null,null,null,Promise)})),t.addEventListener("onBackgroundAudioUploadFail",(function(){t.fireToast("builder.common.sorry","builder.addMediaModal.uploadFailDescription")})),t}return Object(r.a)(i,[{key:"onNodeAssembled",value:function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasChild()){e.next=3;break}return e.next=3,a.a.awrap(this.insertSlide(0));case 3:this.states.selectedSlideId=this.getFirstVisibleChildId();case 4:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"getChildrenBlocks",value:function(){var e,t=Object(c.a)(Object(p.a)(i.prototype),"getChildrenBlocks",this).call(this),n=t.reduce((function(e,t){var n=t.do("getMediaPanelMediaResourceId");return e[n]=(e[n]||0)+1,e}),{}),a=x(t);try{for(a.s();!(e=a.n()).done;){var o=e.value;o.states.viewportOffsetBottom=this.states.viewportOffsetBottom,o.states.immersiveType=this.data.type,o.do("setHasSameResourceMediaSibling",(n[o.do("getMediaPanelMediaResourceId")]||0)>1)}}catch(r){a.e(r)}finally{a.f()}return t}},{key:"getViewerProps",value:function(){var e=this;return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.data.type,t.t1=this.isDocked(),t.t2=this.states.viewportOffsetBottom,t.t3=function(t){e.setSentinelShowing("isImmersiveShowing",t)},t.t4=function(t){e.setSentinelShowing("isTopSentinelShowing",t)},t.t5=function(t){e.setSentinelShowing("isBottomSentinelShowing",t)},t.t6=function(t){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:e.states.immersiveElement=t;case 1:case"end":return n.stop()}}),null,null,null,Promise)},t.t7=this.states.shouldScrollIntoView,t.next=10,a.a.awrap(this.getChildrenUI());case 10:return t.t8=t.sent,t.t9=this.states.selectedSlideId,t.t10=this.getVisibleSlidePointers(this.getChildrenBlocks()),t.t11=this.getGlobalState("printMode"),t.abrupt("return",{type:t.t0,isDocked:t.t1,bottomOffset:t.t2,setIsImmersiveShowing:t.t3,setIsTopSentinelShowing:t.t4,setIsBottomSentinelShowing:t.t5,setImmersiveElement:t.t6,shouldScrollIntoView:t.t7,children:t.t8,selectedSlideId:t.t9,slidePointers:t.t10,printMode:t.t11});case 15:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"getBuilderProps",value:function(){var e=this;return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=j,t.t1={},t.next=4,a.a.awrap(this.getViewerProps());case 4:return t.t2=t.sent,t.t3={id:this.id,slides:this.getSlides(this.getChildrenBlocks()),isSlidesPanelDragging:this.states.isSlidesPanelDragging,isSlidesPanelExpanded:this.states.isSlidesPanelExpanded,shouldOpenOnboardingModal:this.states.shouldOpenOnboardingModal,delete:function(){e.remove()},addSlide:this.addSlide,toggleExpand:function(){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(e.setSlidesPanelExpanded(!e.states.isSlidesPanelExpanded));case 2:case"end":return t.stop()}}),null,null,null,Promise)},handleDragDrop:function(t){e.onReorder(t)},handleSetData:function(){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e.states.isSlidesPanelDragging=!0,t.next=3,a.a.awrap(e.update({skipSave:!0}));case 3:case"end":return t.stop()}}),null,null,null,Promise)},handleOnMove:function(e){return e.related&&!e.related.classList.contains("undraggable")},setDragHandleElement:function(t){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:e.states.dragHandleElement=t;case 1:case"end":return n.stop()}}),null,null,null,Promise)}},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t3));case 7:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"getChildrenUI",value:function(e){var t,n,o,r,s,l,u;return a.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:t=this.getVisibleSlides(),n=0;case 2:if(!(n<t.length)){d.next=13;break}if(o=t[n],r=o.do("getMainMediaBlock")){d.next=7;break}return d.abrupt("continue",10);case 7:r.states.shouldRender=!0,n>0&&(s=t[n-1],(l=s.do("getMainMediaBlock"))&&r.type===l.type&&r.do("getMediaId")===l.do("getMediaId")&&(r.states.shouldRender=!1,r.states.overrideCallback=l.states.overrideCallback,r.states.observer=l.states.observer)),r.states.shouldRender&&(r.states.overrideCallback=r.shallowUpdate.bind(r));case 10:n++,d.next=2;break;case 13:return d.next=15,a.a.awrap(Object(c.a)(Object(p.a)(i.prototype),"getChildrenUI",this).call(this,e));case 15:return u=d.sent,d.abrupt("return",u);case 17:case"end":return d.stop()}}),null,this,null,Promise)}},{key:"getLayoutProps",value:function(){return j({},Object(c.a)(Object(p.a)(i.prototype),"getLayoutProps",this).call(this),{postInserterProps:this.getBetweenInserterProps(),spacingTop:f.a.spacing.sm,spacingTopLg:f.a.spacing.xl,spacingBottom:"0",spacingBottomLg:f.a.spacing.xl,layoutType:"minimal",canBreakOverPrintPage:!0})}},{key:"getLayoutSize",value:function(){return"full"}},{key:"getSlides",value:function(e){var t=this,n=this.getVisibleSlides();return e.map((function(e){var i,o,r=e.do("getMainMediaBlock"),s=!!r&&!r.states.shouldRender,c=1===n.length&&n[0].id===e.id;return{id:e.id,isHidden:!!(null===(i=e.config)||void 0===i?void 0:i.isHidden),isReusingMedia:s,thumbnail:e.do("generateThumbnail"),mediaPanelBlockType:r?r.type:"",delete:c&&t.getSlidesCount()>1?void 0:function(){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(1!==t.getSlidesCount()){n.next=5;break}return n.next=3,a.a.awrap(t.remove());case 3:n.next=7;break;case 5:return n.next=7,a.a.awrap(t.removeSlide(e));case 7:case"end":return n.stop()}}),null,null,null,Promise)},getInserterAudioItems:!0===e.states.isBackgroundAudioDisabled?void 0:e.do("getInserterAudioItems"),getBackgroundAudioSrc:e.do("getBackgroundAudioSrc"),deleteBackgroundAudio:(null===(o=e.data.backgroundAudio)||void 0===o?void 0:o.id)?function(){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.awrap(e.do("deleteBackgroundAudio"));case 2:t.fireToast("builder.immersive.toast.backgroundAudioDeleted");case 3:case"end":return n.stop()}}),null,null,null,Promise)}:void 0,duplicate:!0===e.states.isDuplicateDisabled?void 0:function(){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.awrap(t.duplicateSlide(e));case 2:case"end":return n.stop()}}),null,null,null,Promise)},toggleHidden:c?void 0:t.toggleSlideVisibility.bind(t,e),onClick:t.onSlideClicked.bind(t,e),transitions:!1===e.states.canSwitchTransitions?[]:[{id:"fade-slow",isSelected:"fade-slow"===e.data.transition,labelId:"builder.immersive.slidesPanel.transitionSlowFade",onClick:function(){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.do("onTransitionUpdated","fade-slow"),n.next=3,a.a.awrap(t.update());case 3:case"end":return n.stop()}}),null,null,null,Promise)}},{id:"fade",isSelected:"fade"===e.data.transition,labelId:"builder.immersive.slidesPanel.transitionFade",onClick:function(){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.do("onTransitionUpdated","fade"),n.next=3,a.a.awrap(t.update());case 3:case"end":return n.stop()}}),null,null,null,Promise)}}]}}))}},{key:"getVisibleSlidePointers",value:function(e){var t=this;return e.filter((function(e){var t;return!(null===(t=e.config)||void 0===t?void 0:t.isHidden)})).map((function(e){return{id:e.id,onClick:t.onSlideClicked.bind(t,e)}}))}},{key:"getSelectedSlide",value:function(){return this.childrenNodes[this.states.selectedSlideId]}},{key:"navigateToSlide",value:function(e){var t,n,i=arguments;return a.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=i.length>1&&void 0!==i[1]&&i[1],!((n=this.childrenIds.indexOf(e.id))>=0)){o.next=6;break}return o.next=5,a.a.awrap(this.updateSlidesActivity({selectedIndex:n,isTransitionAnimated:t}));case 5:e&&e.do("scrollTo",t);case 6:case"end":return o.stop()}}),null,this,null,Promise)}},{key:"updateSlidesActivity",value:function(e){var t,n,i,o,r;return a.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.selectedIndex,n=e.isTransitionAnimated,!this.states.skipUpdateActive){s.next=3;break}return s.abrupt("return");case 3:if(!(t<0||t>this.childrenIds.length-1)){s.next=5;break}return s.abrupt("return");case 5:return i=this.getSelectedSlide(),this.states.selectedSlideId=this.childrenIds[t],o=this.getChildrenBlocks(),s.next=10,a.a.awrap(Object(m.b)(o,(function(e,i){return a.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,a.a.awrap(e.do("updateActive",{isActive:i<=t,isTransitionAnimated:n}));case 2:case"end":return o.stop()}}),null,null,null,Promise)})));case 10:if(r=this.getSelectedSlide(),!i){s.next=14;break}return s.next=14,a.a.awrap(i.do("onDeselected",{isTransitionAnimated:n}));case 14:if(!r){s.next=17;break}return s.next=17,a.a.awrap(r.do("onSelected",{isTransitionAnimated:n,isDocked:this.isDocked()}));case 17:return s.next=19,a.a.awrap(this.update({skipSave:!0}));case 19:case"end":return s.stop()}}),null,this,null,Promise)}},{key:"getVisibleSlides",value:function(){return this.getChildrenBlocks().filter((function(e){var t;return!(null===(t=e.config)||void 0===t?void 0:t.isHidden)}))}},{key:"getPreviousVisibleChildIndex",value:function(e){var t;if(e<=0)return-1;var n=e-1,i=this.getChildNodeByIndex(n);return i?(null===(t=i.config)||void 0===t?void 0:t.isHidden)?this.getPreviousVisibleChildIndex(n):n:-1}},{key:"getNextVisibleChildIndex",value:function(e){var t;if(e>=this.getSlidesCount()-1)return-1;var n=e+1,i=this.getChildNodeByIndex(n);return i?(null===(t=i.config)||void 0===t?void 0:t.isHidden)?this.getNextVisibleChildIndex(n):n:-1}},{key:"getPreviousVisibleChild",value:function(e){var t=this.getPreviousVisibleChildIndex(e.getIndex());if(-1!==t)return this.getChildNodeByIndex(t)}},{key:"getNextVisibleChild",value:function(e){var t=this.getNextVisibleChildIndex(e.getIndex());if(-1!==t)return this.getChildNodeByIndex(t)}},{key:"getFirstVisibleChildIndex",value:function(){return this.getNextVisibleChildIndex(-1)}},{key:"getLastVisibleChildIndex",value:function(){return this.getPreviousVisibleChildIndex(this.getSlidesCount())}},{key:"getFirstVisibleChildId",value:function(){var e=this.getFirstVisibleChildIndex();return this.childrenIds[e]}},{key:"getChildVisibleIndex",value:function(e){return this.getVisibleSlides().findIndex((function(t){return t.id===e}))}},{key:"removeSlide",value:function(e){var t;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return this.states.selectedSlideId===e.id?t=e.id===this.getFirstVisibleChildId()?this.getNextVisibleChild(e):this.getPreviousVisibleChild(e):e.getIndex()<this.childrenIds.indexOf(this.states.selectedSlideId)&&(t=this.getSelectedSlide()),n.next=3,a.a.awrap(e.remove());case 3:return n.next=5,a.a.awrap(this.updateDescendents({shouldUpdatePostorder:!0}));case 5:if(!t){n.next=8;break}return n.next=8,a.a.awrap(this.navigateToSlide(t));case 8:this.fireToast("builder.immersive.toast.slideDeleted");case 9:case"end":return n.stop()}}),null,this,null,Promise)}},{key:"toggleSlideVisibility",value:function(e,t){var n,i,o,r,s;return a.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=this.getSelectedSlide(),i=!!n&&e.getIndex()<n.getIndex(),o=e.id===this.states.selectedSlideId,c.next=5,a.a.awrap(e.do("toggleHidden",t));case 5:return c.next=7,a.a.awrap(this.update());case 7:return c.next=9,a.a.awrap(this.updateDescendents({shouldUpdatePostorder:!0}));case 9:if(t){c.next=14;break}return c.next=12,a.a.awrap(this.navigateToSlide(e));case 12:c.next=30;break;case 14:if(!i){c.next=19;break}return c.next=17,a.a.awrap(this.navigateToSlide(n));case 17:c.next=30;break;case 19:if(!o){c.next=30;break}if(!(r=this.getNextVisibleChild(e))){c.next=26;break}return c.next=24,a.a.awrap(this.navigateToSlide(r));case 24:c.next=30;break;case 26:if(!(s=this.getPreviousVisibleChild(e))){c.next=30;break}return c.next=30,a.a.awrap(this.navigateToSlide(s));case 30:this.fireToast("builder.immersive.toast.slide".concat(t?"Hidden":"Shown"));case 31:case"end":return c.stop()}}),null,this,null,Promise)}},{key:"onReorder",value:function(e){var t,n,i,o,r,s=this;return a.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.item.dataset.blockid,c.next=3,a.a.awrap(Object(v.b)(this,e));case 3:if("start"!==e.type){c.next=13;break}if(!t){c.next=11;break}if(!(n=this.childrenNodes[t])){c.next=11;break}if("immersive-slide"===n.type&&(this.states.isSlidesPanelDragging=!0),null===(i=n.config)||void 0===i?void 0:i.isHidden){c.next=11;break}return c.next=11,a.a.awrap(this.navigateToSlide(n));case 11:c.next=30;break;case 13:if("unchoose"!==e.type){c.next=19;break}return this.states.isSlidesPanelDragging=!1,c.next=17,a.a.awrap(this.update({skipSave:!0}));case 17:c.next=30;break;case 19:if("update"!==e.type){c.next=30;break}return c.next=22,a.a.awrap(Promise.all(this.getChildrenBlocks().map((function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(Promise.all(e.getChildrenBlocks().map((function(e){if("immersive-narrative-panel"===e.type)return e.update({skipSave:!0})}))));case 2:return t.abrupt("return",e.update({skipSave:!0}));case 3:case"end":return t.stop()}}),null,null,null,Promise)}))));case 22:if(!t){c.next=30;break}if(!(o=this.childrenNodes[t])){c.next=30;break}if(null===(r=o.config)||void 0===r?void 0:r.isHidden){c.next=30;break}return c.next=28,a.a.awrap(this.navigateToSlide(o));case 28:this.states.skipUpdateActive=!0,setTimeout((function(){s.states.skipUpdateActive=!1}),500);case 30:case"end":return c.stop()}}),null,this,null,Promise)}}]),i}(g.a);Object(d.a)(k,"type","immersive"),t.a=k},lL5k:function(e,t,n){"use strict";var i=/[|\\{}()[\]^$+*?.]/g;e.exports=function(e){if("string"!==typeof e)throw new TypeError("Expected a string");return e.replace(i,"\\$&")}},lMwr:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("ERkP"),u=n.n(p),d=n("686e"),h=u.a.createElement;function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(m()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"onItemCollapsed",(function(e){e===t.state.pendingItem&&t.setState({pendingItem:null})})),Object(l.a)(Object(o.a)(t),"onItemExpanded",(function(e){t.setState({pendingItem:e})})),t.state={pendingItem:null},t}return Object(a.a)(p,[{key:"render",value:function(){return h(d.a,{items:this.props.items,pendingItem:this.state.pendingItem,source:this.props.source,mediaPickerUI:this.props.mediaPickerUI||"altButton",childrenWithCallback:this.props.childrenWithCallback,onItemExpanded:this.onItemExpanded,onItemCollapsed:this.onItemCollapsed,isUploadByLinkDisabled:this.props.isUploadByLinkDisabled,isDisabled:this.props.isDisabled})}}]),p}(p.PureComponent);t.a=f},lPt2:function(e,t,n){"use strict";n.r(t),n.d(t,"TourPlaceViewer",(function(){return R}));var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("ERkP"),l=n.n(c),p=n("pWxA"),u=n("zjfJ"),d=n("yFcC"),h=n.n(d),m=n("t7DY"),f=n("QQI7"),y=n("f9/c"),g=n("cpdA"),v=n("hG09"),b=n("eCu0"),x=n("jmHV"),O=l.a.createElement;function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var j=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(w()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){var e;Object(i.a)(this,c);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),Object(u.a)(Object(p.a)(e),"__SHOULD_LOG",!1),Object(u.a)(Object(p.a)(e),"mapContainerId","tour-map-displayer-".concat(e.props.blockId)),Object(u.a)(Object(p.a)(e),"renderMap",(function(){return O("div",{className:"jsx-230643086 tour-map-displayer"},O(f.a,{type:"tourMap",mapContainerId:e.mapContainerId,graphicsContainerId:e.getGraphicsContainerId(),setCustomGraphics:e.setCustomGraphics,visConfigs:[],supportEditing:!1,isScrollZoomingEnabled:!1,shouldDownScaleGraphics:!1,onMapLoad:e.onMapLoad,ariaLabel:e.props.ariaLabel,basemap:e.props.basemap,groupColors:Object(g.c)(e.props.accentColor),isIntersecting:e.props.isIntersecting,blockId:e.props.blockId,observe:e.props.observe,shouldShowLocate:e.props.locate}),O(h.a,{id:"230643086"},[".tour-map-displayer.jsx-230643086{position:relative;height:100%;}"]))})),Object(u.a)(Object(p.a)(e),"onMapLoad",(function(t){e.mapView=t.mapView,e.mapView.watch("stationary",(function(t){e.setState({isViewStationary:t})})),e.mapView.when((function(){var t=e.getCurrentGeometry();"number"!==typeof(null===t||void 0===t?void 0:t.scale)||e.props.printMode?setTimeout((function(){Object(v.k)({view:e.mapView,geometries:e.props.geometries,skipAnimation:!0})}),1):Object(v.c)({view:e.mapView,drawingNode:t.nodes[0],scale:t.scale,skipAnimation:!0})}))})),Object(u.a)(Object(p.a)(e),"getCurrentGeometry",(function(){var t=e.props;return t.geometries[t.geometryOrder[t.activeIndex]]})),Object(u.a)(Object(p.a)(e),"updateToCustomGraphics",(function(t,n){if(e.customGraphics){var i=y.c(t,n);e.__SHOULD_LOG&&(console.group("%cTO GRAPHICS: ","color: #F1508B"),console.debug("%c".concat(i),"background: #F1508B; color: white"),console.groupEnd()),e.customGraphics.pushAction(i)}})),Object(u.a)(Object(p.a)(e),"onCustomGraphicsUpdate",(function(t){e.__SHOULD_LOG&&(console.group("%cFROM GRAPHICS: ","color: #33aa00"),console.debug("%c".concat(t),"background: #33aa00; color: white"),console.groupEnd());var n=y.b(t),i=y.a(t,n);switch(n){case m.a.Select:e.props.onSelectGeometry(i);break;default:e.__SHOULD_LOG&&console.debug("Unhandled action type in Editor: <".concat(n,">"))}})),Object(u.a)(Object(p.a)(e),"getGraphicsContainerId",(function(){return"".concat(e.mapContainerId,"-graphics")})),Object(u.a)(Object(p.a)(e),"setCustomGraphics",(function(t){e.customGraphics=t,e.customGraphics.bindActionEmitting(e.onCustomGraphicsUpdate),e.updateToCustomGraphics(m.a.SetDrawingMode,m.b.SELECT),e.applyGeometryInfo({applyOrder:!0,applyGeometries:!0,applyActiveness:!0})})),Object(u.a)(Object(p.a)(e),"applyGeometryInfo",(function(t){var n=t.applyOrder,i=t.applyGeometries,a=t.applyActiveness;i&&e.updateToCustomGraphics(m.a.Dump,JSON.stringify(e.props.geometries)),n&&e.updateToCustomGraphics(m.a.ReorderNumberedTourPoints,JSON.stringify(e.props.geometryOrder));var o=e.props.geometryOrder[e.props.activeIndex];if(a&&"string"===typeof o){var r;e.updateToCustomGraphics(m.a.Highlight,o);var s=e.props.geometries[o];if(!s)return;null===(r=e.mapView)||void 0===r||r.when((function(){Object(v.c)({view:e.mapView,drawingNode:s.nodes[0],scale:s.scale})}))}})),e}return Object(a.a)(c,[{key:"componentDidUpdate",value:function(e){var t=Object(x.b)(e.geometries)!==Object(x.b)(this.props.geometries),n=t||e.geometryOrder.join()!==this.props.geometryOrder.join(),i=e.isIntersecting!==this.props.isIntersecting,a=t||n||e.activeIndex!==this.props.activeIndex||i;this.applyGeometryInfo({applyGeometries:t,applyOrder:n,applyActiveness:a})}},{key:"render",value:function(){return this.renderMap()}}]),c}(c.PureComponent),C=Object(b.c)(j),k=n("gZeU"),S=n("Z3Fy"),I=l.a.createElement;function P(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var R=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(P()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return I(k.a,{aspectRatio:0,heightConstrained:!0,fillParent:!0,printMode:this.props.printMode},I(S.a,{isFullScreen:!1,showMask:!1},I(C,{ariaLabel:this.props.alt,accentColor:this.props.accentColor,basemap:this.props.basemap,locate:this.props.locate,onSelectGeometry:this.props.onSelectGeometry,activeIndex:this.props.activeIndex,geometries:this.props.geometries,geometryOrder:this.props.geometryOrder,isIntersecting:this.props.isIntersecting,blockId:this.props.blockId,observe:this.props.observe,printMode:this.props.printMode})))}}]),c}(c.PureComponent);t.default=R},lZMs:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("O94r"),c=n.n(s),l=n("Z4N4"),p=n("NX3A"),u=n("Y/5s"),d=r.a.createElement,h=function(e){return e<10?"0".concat(e.toString(10)):e.toString(10)};t.a=Object(u.d)((function(e){var t=c()("number-part",{integrated:e.isIntegrated});return d(o.Fragment,null,d("li",{"data-testid":"nav-number",className:a.a.dynamic([["3834934082",[l.a.typography.body12Bold(),"dark"===e.theme.id?p.a.color.auroMetalSaurus:p.a.color.coolGrey,p.a.color.white]]])+" "+(t||"")},h(e.currentIndex+1)),d("li",{className:a.a.dynamic([["3834934082",[l.a.typography.body12Bold(),"dark"===e.theme.id?p.a.color.auroMetalSaurus:p.a.color.coolGrey,p.a.color.white]]])+" "+(t||"")}," / "),d("li",{className:a.a.dynamic([["3834934082",[l.a.typography.body12Bold(),"dark"===e.theme.id?p.a.color.auroMetalSaurus:p.a.color.coolGrey,p.a.color.white]]])+" "+(t||"")},h(e.totalCount)),d(a.a,{id:"3834934082",dynamic:[l.a.typography.body12Bold(),"dark"===e.theme.id?p.a.color.auroMetalSaurus:p.a.color.coolGrey,p.a.color.white]},[".number-part.__jsx-style-dynamic-selector{".concat(l.a.typography.body12Bold(),";line-height:1;color:").concat("dark"===e.theme.id?p.a.color.auroMetalSaurus:p.a.color.coolGrey,";}"),".number-part.__jsx-style-dynamic-selector:not(.integrated){color:".concat(p.a.color.white,";}")]))}))},looe:function(e,t,n){"use strict";var i=n("HbGN"),a=n("ERkP"),o=n.n(a),r=n("9fIP"),s=n("K/z8"),c=n("sRHE"),l=n("8K1b"),p=n("jKTg");function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var d=function(e){Object(l.a)(i,e);var t,n=(t=i,function(){var e,n=Object(c.a)(t);if(u()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function i(e){return Object(r.a)(this,i),n.call(this,e,p.a.webMap)}return i}(p.b);function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){Object(l.a)(i,e);var t,n=(t=i,function(){var e,n=Object(c.a)(t);if(h()){var i=Object(c.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function i(e){return Object(r.a)(this,i),n.call(this,e,p.a.webScene)}return i}(p.b),f=o.a.createElement,y=Object(a.memo)((function(e){var t=e.type,n=Object(i.a)(e,["type"]),a=t.toLowerCase(),o=a.includes("map")?d:a.includes("scene")?m:null;return o&&f(o,n)}));t.a=y},lsPM:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("Z4N4"),g=n("NX3A"),v=n("OGR5"),b=n("pao5"),x=n("4yTv"),O=n("BQL3"),w=n("eCu0"),j=n("A7aE"),C=n("X/3D"),k=function(e){var t=e.totalColumns-e.size;return t<=0?0:"start"===e.position?1:"end"===e.position?e.totalColumns-(e.size+1):Math.floor(t/2)},S=h.a.createElement;function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var P=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(I()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"renderNarrativePanel",(function(){var t=e.props.panelStyle===C.a.themed?e.props.storyDesign.storyTheme.themeVariables.backgroundColor:"transparent",n=e.props.panelStyle===C.a.themed?e.props.storyDesign.storyTheme.themeVariables.titleColor:e.props.panelStyle===C.a.transparentWithLightColor?e.props.storyDesign.storyTheme.themeVariables.titleColorLight:e.props.storyDesign.storyTheme.themeVariables.titleColorDark,i=e.props.panelStyle===C.a.themed?e.props.storyDesign.storyTheme.themeVariables.bodyColor:e.props.panelStyle===C.a.transparentWithLightColor?e.props.storyDesign.storyTheme.themeVariables.bodyColorLight:e.props.storyDesign.storyTheme.themeVariables.bodyColorDark;return S("div",{className:u.a.dynamic([["779590470",[y.a.hexA(t,.9),g.a.spacing.xxs,y.a.shadow.xs(),i,i,n,n,g.a.responsiveBreakpoints.medium,g.a.spacing.sm,g.a.spacing.xxs,g.a.spacing.xxs]]])+" "+(f()("narrative-panel-wrapper",{selected:e.props.isVisible||e.props.printMode,"no-transition":!e.props.isTransitionAnimated,"background-transparent":e.props.panelStyle===C.a.transparentWithLightColor||e.props.panelStyle===C.a.transparentWithDarkColor},e.props.className)||"")},e.props.children,S(u.a,{id:"779590470",dynamic:[y.a.hexA(t,.9),g.a.spacing.xxs,y.a.shadow.xs(),i,i,n,n,g.a.responsiveBreakpoints.medium,g.a.spacing.sm,g.a.spacing.xxs,g.a.spacing.xxs]},[".narrative-panel-wrapper.__jsx-style-dynamic-selector{position:relative;background-color:".concat(y.a.hexA(t,.9),";pointer-events:auto;visibility:hidden;opacity:0;-webkit-transform:translateY(5rem);-ms-transform:translateY(5rem);transform:translateY(5rem);height:0;padding:").concat(g.a.spacing.xxs," 0;}"),".narrative-panel-wrapper.__jsx-style-dynamic-selector:empty{padding:0;}",".narrative-panel-wrapper.__jsx-style-dynamic-selector:not(.background-transparent){".concat(y.a.shadow.xs(),";}"),".narrative-panel-wrapper.selected.__jsx-style-dynamic-selector{height:auto;opacity:1;visibility:visible;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);-webkit-transition:opacity 0.5s ease-in-out,visibility 0.5s ease-in-out,-webkit-transform 0.8s ease;-webkit-transition:opacity 0.5s ease-in-out,visibility 0.5s ease-in-out,transform 0.8s ease;transition:opacity 0.5s ease-in-out,visibility 0.5s ease-in-out,transform 0.8s ease;}",".narrative-panel-wrapper.selected.no-transition.__jsx-style-dynamic-selector{-webkit-transition:none;transition:none;}",".narrative-panel-wrapper.__jsx-style-dynamic-selector>.layout-wrapper:first-child{margin-top:0;}",".narrative-panel-wrapper.__jsx-style-dynamic-selector>.layout-wrapper:last-child{margin-bottom:0;}",".narrative-panel-wrapper.__jsx-style-dynamic-selector .text-builder .ql-editor p{color:".concat(i,";}"),"body.print .slideshow .narrative-panel-wrapper.__jsx-style-dynamic-selector .text-viewer a,.narrative-panel-wrapper.__jsx-style-dynamic-selector .text-viewer-paragraph{color:".concat(i,";}"),".narrative-panel-wrapper.__jsx-style-dynamic-selector .text-viewer-h2{color:".concat(n,";}"),".narrative-panel-wrapper.__jsx-style-dynamic-selector .text-builder .ql-editor h3{color:".concat(n,";}"),"@media (min-width:".concat(g.a.responsiveBreakpoints.medium,"){.narrative-panel-wrapper.__jsx-style-dynamic-selector{padding:").concat(g.a.spacing.sm," ").concat(g.a.spacing.xxs,";}}"),"body.print .narrative-panel-wrapper.__jsx-style-dynamic-selector:not(:empty){padding:".concat(g.a.spacing.xxs," 0;}")]))})),Object(l.a)(Object(o.a)(e),"getSizedWidths",(function(t,n){var i="large"===e.props.size?6:"medium"===e.props.size?5:4,a=6;return t&&(i-=1),n&&(i*=2,a*=2),{small:6,medium:a,large:i,print:i}})),e}return Object(a.a)(p,[{key:"render",value:function(){var e=this.props.isViewportMinWidth("extra-extra-large"),t=this.getSizedWidths(e,"center"===this.props.position),n=this.renderNarrativePanel();return S(v.b,{spacingSm:this.props.horizonalSpacingSm,isFullWidth:e},S(b.a,null,S(x.a,{size:t.small,sizeMd:t.medium,sizeLg:t.large,sizePrint:t.print,pre:0,preMd:k({size:t.medium,totalColumns:O.a.numColumns.medium,position:this.props.position}),preLg:k({size:t.large,totalColumns:O.a.numColumns.large,position:this.props.position}),prePrint:k({size:t.print,totalColumns:O.a.numColumns.large,position:this.props.position})},"center"===this.props.position&&this.props.isViewportMinWidth("medium")?S(b.a,null,S(x.a,{size:O.a.numColumns.large/2,sizeMd:O.a.numColumns.medium/2,pre:k({size:O.a.numColumns.large/2,totalColumns:O.a.numColumns.large,position:"center"}),preMd:k({size:O.a.numColumns.medium/2,totalColumns:O.a.numColumns.medium,position:"center"})},n)):n)))}}]),p}(d.PureComponent);Object(l.a)(P,"defaultProps",{isVisible:!0,isTransitionAnimated:!1,horizonalSpacingSm:g.a.spacing.sm});t.a=Object(w.c)(Object(j.b)(P))},"m+lF":function(e,t,n){"use strict";n.r(t),n.d(t,"ExpressMapViewer",(function(){return ye}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("ERkP"),u=n.n(p),d=n("eCu0"),h=n("+L/X"),m=n("+2DB"),f=n("Z3Fy"),y=n("gZeU"),g=n("u0WM"),v=n("gMe1"),b=n("cxan"),x=n("yFcC"),O=n.n(x),w=n("YQpL"),j=n("O94r"),C=n.n(j),k=n("RNvQ"),S=n.n(k),I=n("t7DY"),P=n("NX3A"),R=n("Z4N4"),E=n("txt0"),D=n("WXRn"),T=n("7faH"),M=n("QQI7"),A=n("f9/c"),N=n("A7aE"),L=n("oK9Z"),G=n("hG09"),_=n("ZdeG"),B=n("hJks"),W=n("54/T"),V=n("RP1v"),F=n("T+qs"),U=n("KMip"),z=n("cpdA"),H=n("O9+8"),Y=n("0goI"),K=n("fGyu"),X=n("i3DM"),J=n("F9qf"),Z=n("4EqL"),q=n("t3zI"),Q=n("rwCY"),$=u.a.createElement;function ee(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var te=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(ee()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"renderText",(function(){return $("div",{className:O.a.dynamic([["2974835296",[R.a.gappedList(P.a.spacing.xxxs)]]])+" text"},e.props.groupName&&$(Q.a,{text:e.props.groupName}),e.props.title&&$(J.a,{text:e.props.title,styleMixin:R.a.lineClamp(1)}),$(q.a,{description:e.props.description,readMore:e.readMore,styleMixin:R.a.lineClamp(2)}),e.props.children,$(O.a,{id:"2974835296",dynamic:[R.a.gappedList(P.a.spacing.xxxs)]},[".text.__jsx-style-dynamic-selector{".concat(R.a.gappedList(P.a.spacing.xxxs),";justify-items:start;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;}"),".text.__jsx-style-dynamic-selector>div{width:100%;}"]))})),Object(l.a)(Object(o.a)(e),"onClick",(function(t){Object(X.a)(t)&&e.readMore()})),Object(l.a)(Object(o.a)(e),"readMore",(function(){e.props.onClick(e.props.id)})),e}return Object(a.a)(p,[{key:"render",value:function(){var e=this.props.storyDesign.storyTheme.themeVariables,t=e.backgroundColor,n=e.bodyColor,i=this.props.title||this.props.description;return $("div",{role:"button",onClick:this.onClick,onKeyDown:this.onClick,className:O.a.dynamic([["1462535052",[this.props.width,P.a.spacing.xxxs,P.a.spacing.xxs,n,t,R.a.shadow.lg(),P.a.spacing.xxs]]])+" "+(C()("card-summary",{"has-image":this.props.image,"has-text":i})||"")},$(Z.a,{src:this.props.image,styleMixin:"padding-bottom:unset;height:100%;"}),i&&this.renderText(),$(O.a,{id:"1462535052",dynamic:[this.props.width,P.a.spacing.xxxs,P.a.spacing.xxs,n,t,R.a.shadow.lg(),P.a.spacing.xxs]},[".card-summary.__jsx-style-dynamic-selector{width:".concat(this.props.width,";height:16.5rem;margin:0 calc(").concat(P.a.spacing.xxxs," / 2);padding:").concat(P.a.spacing.xxs,";color:").concat(n,";background-color:").concat(t,";").concat(R.a.shadow.lg(),";}"),".has-image.has-text.__jsx-style-dynamic-selector{display:grid;grid-template-columns:6.6rem 1fr;grid-column-gap:".concat(P.a.spacing.xxs,";}")]))}}]),p}(p.PureComponent),ne=Object(N.b)(te),ie=n("4wv1"),ae=u.a.createElement;function oe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var re=function(e){Object(c.a)(o,e);var t,n=(t=o,function(){var e,n=Object(s.a)(t);if(oe()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function o(){return Object(i.a)(this,o),n.apply(this,arguments)}return Object(a.a)(o,[{key:"render",value:function(){var e=this,t=Object(F.i)(this.props.drawingCategories,this.props.popups).map((function(t){return e.props.popups[t]})).map((function(t){return{id:t.id,node:ae(ne,Object(b.a)({width:"calc(100vw - 2 * (".concat(P.a.spacing.xxs," + ").concat(P.a.spacing.xxxs,"))"),groupName:e.props.getGroupName(t.id),onClick:e.props.onItemClick},t))}})),n=ae("div",{className:O.a.dynamic([["2718080256",[P.a.spacing.xxs]]])},ae(O.a,{id:"2718080256",dynamic:[P.a.spacing.xxs]},["div.__jsx-style-dynamic-selector{width:".concat(P.a.spacing.xxs,";}")])),i=[{id:"before",node:n}].concat(Object(K.a)(t),[{id:"after",node:n}]),a={styles:ae(O.a,{id:"2400506209",dynamic:[P.a.spacing.xs,this.props.iOSVersion?"-webkit-overflow-scrolling: touch;":""]},[".linear-tray.__jsx-style-dynamic-selector{padding-bottom:".concat(P.a.spacing.xs,";position:absolute;bottom:0;z-index:1;width:100%;").concat(this.props.iOSVersion?"-webkit-overflow-scrolling: touch;":"",";}")]),className:O.a.dynamic([["2400506209",[P.a.spacing.xs,this.props.iOSVersion?"-webkit-overflow-scrolling: touch;":""]]])};return ae(p.Fragment,null,ae(ie.a,{items:i,activeItemId:this.props.currentPopupId,id:"card-summaries",className:a.className}),a.styles)}}]),o}(p.PureComponent),se=Object(d.c)(re),ce=n("nVDo"),le=u.a.createElement;function pe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ue=function(e){Object(c.a)(u,e);var t,n=(t=u,function(){var e,n=Object(s.a)(t);if(pe()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function u(e){var t;return Object(i.a)(this,u),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"__SHOULD_LOG",!1),Object(l.a)(Object(o.a)(t),"preloadedPopupImages",{}),Object(l.a)(Object(o.a)(t),"renderMap",(function(){var e;return le("div",{className:"jsx-1231163621 displayer-container"},le(M.a,{type:"expressMap",mapContainerId:t.props.mapContainerId,graphicsContainerId:t.getGraphicsContainerId(),setCustomGraphics:t.setCustomGraphics,visConfigs:t.props.data.visConfigs,onMapLoad:t.onMapLoad,isScrollZoomingEnabled:t.props.isFullScreen,shouldDownScaleGraphics:t.props.isPlacedCompactly&&!t.props.isFullScreen||t.props.isViewportMaxWidth("medium"),hasHomeButton:!0,ariaLabel:t.props.ariaLabel,basemap:t.props.data.basemap,groupColors:Object(z.c)(t.props.data.drawingCategories),isIntersecting:t.props.isIntersecting,blockId:t.props.blockId,observe:t.props.observe,shouldShowSearch:t.getShouldShowWidget("mapSearch"),shouldShowLocate:t.getShouldShowWidget("locate"),isStatic:!(null===(e=t.props.data.navigation)||void 0===e||e)}),t.renderDrawingTexts(),t.renderFloatingUi(),t.renderFullscreenToggleStyle(),le(O.a,{id:"1231163621"},[".displayer-container.jsx-1231163621{position:relative;height:100%;}","body:not(.user-is-tabbing) .displayer-container.jsx-1231163621 *:focus{outline:none;}"]))})),Object(l.a)(Object(o.a)(t),"renderFloatingUi",(function(){if(t.props.type===m.a.Background)return null;var e=t.props.isFullScreen&&"small"===t.props.screenWidth,n=!t.props.isFullScreen&&"small"===t.props.screenWidth,i=(!t.props.isPlacedCompactly||t.props.isFullScreen)&&(t.props.data.isShowingLegend||t.state.idOfFullPopupBeingShown);return!n&&le(p.Fragment,null,e?t.renderCardSummaries():t.renderPopupSummaries(),i&&t.renderLegendOrFullPopup())})),Object(l.a)(Object(o.a)(t),"renderFullscreenToggleStyle",(function(){var e=!("small"===t.props.screenWidth&&t.state.idOfFullPopupBeingShown);return le(O.a,{id:"423843204",dynamic:[e?1:0,e?"visible":"hidden"]},["#stacking-context-breaker .buttons{opacity:".concat(e?1:0,";visibility:").concat(e?"visible":"hidden",";-webkit-transition:opacity 0.5s,visibility 0.5s;transition:opacity 0.5s,visibility 0.5s;}")])})),Object(l.a)(Object(o.a)(t),"renderDrawingTexts",(function(){return le(p.Fragment,null,t.state.idsOfDrawingTextsBeingShown.map((function(e){var n=t.props.data.drawings[e];if(!n)return null;var i=n&&n.type===I.j.TEXT_LEADERLINE,a=n.data,o=a&&"string"===typeof a.content?a.content:"",r=n.styles&&n.styles.textColor;return i&&le(W.a,{key:e,id:e,text:o,containerId:t.getGraphicsContainerId(),textColor:t.props.storyDesign.storyTheme.themeVariables[r||"backgroundColor"]})})))})),Object(l.a)(Object(o.a)(t),"renderCardSummaries",(function(){if(0===t.state.idsOfPopupsBeingShown.length)return null;var e={styles:le(O.a,{id:"2578456647",dynamic:[P.a.spacing.xs,R.a.shadow.xs()]},[".media-overlay-button.__jsx-style-dynamic-selector{position:absolute;top:0;margin:".concat(P.a.spacing.xs,";").concat(R.a.shadow.xs(),";}")]),className:O.a.dynamic([["2578456647",[P.a.spacing.xs,R.a.shadow.xs()]]])};return le(p.Fragment,null,le(L.a,{onClick:function(){t.setState({idsOfPopupsBeingShown:[]})},className:e.className},le(Y.a,{width:P.a.spacing.xxs,height:"auto",hasNaturalDirection:!1})),le(se,{currentPopupId:t.state.idsOfPopupsBeingShown[0],popups:t.props.data.popups,drawingCategories:t.props.data.drawingCategories,onItemClick:t.openFullPopup,getGroupName:t.getGroupName}),e.styles)})),Object(l.a)(Object(o.a)(t),"renderPopupSummaries",(function(){return le(p.Fragment,null,t.state.idsOfPopupsBeingShown.filter((function(e){return e!==t.state.idOfFullPopupBeingShown})).map((function(e){return t.props.data.popups[e]})).map((function(e){return e&&le(B.a,Object(b.a)({},e,{type:t.props.type===m.a.FullInteractive?V.c.Default:t.props.popupSummaryType,key:e.id,groupName:t.getGroupName(e.id),boundariesSelector:"#".concat(t.props.mapContainerId),onClickInPopupSummary:t.onClickInPopupSummary,isFullScreen:t.props.isFullScreen}))})))})),Object(l.a)(Object(o.a)(t),"renderLegendOrFullPopup",(function(){var e=t.props.isFullScreen&&"small"===t.props.screenWidth;return!t.state.idOfFullPopupBeingShown&&e&&0!==t.state.idsOfPopupsBeingShown.length?null:le("div",{className:O.a.dynamic([["537524526",[P.a.spacing.xs,P.a.spacing.sm,t.state.idOfFullPopupBeingShown?"100%":"unset"]]])+" "+(C()({"full-width":"small"===t.props.screenWidth})||"")},t.state.idOfFullPopupBeingShown?t.renderFullPopup():t.renderLegend(),le(O.a,{id:"537524526",dynamic:[P.a.spacing.xs,P.a.spacing.sm,t.state.idOfFullPopupBeingShown?"100%":"unset"]},["div.__jsx-style-dynamic-selector{position:absolute;bottom:0;margin:0 ".concat(P.a.spacing.xs," ").concat(P.a.spacing.sm,";z-index:1;}"),".full-width.__jsx-style-dynamic-selector{margin:0;width:100%;height:".concat(t.state.idOfFullPopupBeingShown?"100%":"unset",";-webkit-transition:height 0.2s;transition:height 0.2s;}")]))})),Object(l.a)(Object(o.a)(t),"renderLegend",(function(){return le(_.b,{mapSize:t.props.isFullScreen?_.a.Fullscreen:_.a.Inline,layerDefinitions:t.props.data.layerDefinitions,visConfigs:t.props.data.visConfigs,drawings:t.props.data.drawings,drawingCategories:t.props.data.drawingCategories,popups:t.props.data.popups,onSelectDrawing:t.onSelectDrawingFromLegend})})),Object(l.a)(Object(o.a)(t),"renderFullPopup",(function(){var e=t.state.idOfFullPopupBeingShown,n=t.props.data.popups[e],i=t.props.data,a=i.drawings,o=i.drawingCategories,r=F.c(a,o,e,t.props.intl.formatMessage),s=t.state.idsOfPopupsBeingShown.indexOf(t.state.idOfFullPopupBeingShown)>-1;return n&&le(H.a,Object(b.a)({},n,{categoryName:r,onClose:t.closeFullPopup,shouldHighlight:s,goToFullPopup:function(e){t.setState({idOfFullPopupBeingShown:e})},getNeighborPopupId:t.getNeighborPopupId}))})),Object(l.a)(Object(o.a)(t),"getShouldShowWidget",(function(e){var n=t.props.isViewportMaxWidth("small")||t.props.isPlacedCompactly,i=t.props.data&&("mapSearch"===e?!!t.props.data.search:!!t.props.data.locate);return(!n||t.props.isFullScreen)&&i&&!t.props.printMode})),Object(l.a)(Object(o.a)(t),"setCustomGraphics",(function(e){t.customGraphics=e,t.customGraphics.bindActionEmitting(t.onCustomGraphicsUpdate),t.updateNonStateData(!1)})),Object(l.a)(Object(o.a)(t),"updateToCustomGraphics",(function(e,n,i){if(t.customGraphics){var a=i?{type:e,payload:n}:A.c(e,n);t.__SHOULD_LOG&&(console.group("%cTO GRAPHICS: ","color: #F1508B"),console.debug("%c".concat(a),"background: #F1508B; color: white"),console.groupEnd()),t.customGraphics.pushAction(a)}})),Object(l.a)(Object(o.a)(t),"onCustomGraphicsUpdate",(function(e){t.__SHOULD_LOG&&(console.group("%cFROM GRAPHICS: ","color: #33aa00"),console.debug("%c".concat(e),"background: #33aa00; color: white"),console.groupEnd());var n=A.b(e);if(n===I.a.ShowPopup){var i=A.a(e,n);i in t.props.data.popups&&!t.state.idsOfPopupsBeingShown.includes(i)&&t.setState({idsOfPopupsBeingShown:[i]})}else if(n===I.a.HidePopup)0!==t.state.idsOfPopupsBeingShown.length&&t.setState({idsOfPopupsBeingShown:[]});else if(n===I.a.ShowText){var a=A.a(e,n);t.setState(F.q(a))}else if(n===I.a.HideText){var o=A.a(e,n);t.setState(F.k(o))}else if("select"===String(n).toLowerCase()){var r=e.replace(/select@/,"");t.onClickInPopupSummary(r,!0)}else n===I.a.PointerOut?t.setState({idOfFullPopupBeingShown:""}):t.__SHOULD_LOG&&console.debug("Unhandled action type in Displayer: <".concat(n,">"))})),Object(l.a)(Object(o.a)(t),"onSelectDrawingFromLegend",(function(e){if(e in t.props.data.drawings)if("small"===t.props.screenWidth)t.setState({idsOfPopupsBeingShown:[e]}),E.a.trackEvent(E.a.Category.Viewer,E.a.Action.Viewer_ExpressMap_ActivatePopupTourMode);else if(t.state.idsOfPopupsBeingShown.indexOf(e)<0){t.state.idsOfPopupsBeingShown.map(t.hidePopupOnMap),t.showPopupOnMap(e,!1);var n=t.props.data.drawings[e];U.b(n,t.mapView)}})),Object(l.a)(Object(o.a)(t),"showPopupOnMap",(function(e,n){t.updateToCustomGraphics(I.a.ShowPopup,e),n&&t.updateToCustomGraphics(I.a.ExclusiveSelect,e)})),Object(l.a)(Object(o.a)(t),"hidePopupOnMap",(function(e){t.updateToCustomGraphics(I.a.HidePopup,e),t.updateToCustomGraphics(I.a.InclusiveDeselect,e)})),Object(l.a)(Object(o.a)(t),"openFullPopup",(function(e){t.hidePopupOnMap(e),e in t.props.data.popups&&t.setState({idOfFullPopupBeingShown:e})})),Object(l.a)(Object(o.a)(t),"closeFullPopup",(function(e){t.setState({idOfFullPopupBeingShown:""}),t.showPopupOnMap(e,!1)})),Object(l.a)(Object(o.a)(t),"onClickInPopupSummary",(function(e,n){n&&!t.props.isFullScreen&&(t.props.goFullScreen(),t.props.type===m.a.Viewer&&E.a.trackEvent(E.a.Category.Viewer,E.a.Action.Viewer_ExpressMap_ActivateFullScreenMode,"large"===t.props.screenWidth?"desktop":"mobile"),t.props.type===m.a.Builder&&E.a.trackEvent(E.a.Category.Builder,E.a.Action.Builder_ExpressMap_ActivateFullScreenMode,"large"===t.props.screenWidth?"desktop":"mobile"));var i=t.props.data.drawings[e];(null===i||void 0===i?void 0:i.type)in ce.g&&(t.openFullPopup(e),t.hidePopupOnMap(e))})),Object(l.a)(Object(o.a)(t),"getNeighborPopupId",(function(e,n){var i=F.i(t.props.data.drawingCategories,t.props.data.popups),a=i.indexOf(e);if(!(a<0||0===a&&"prev"===n||a===i.length-1&&"next"===n))return i[a+("prev"===n?-1:1)]})),Object(l.a)(Object(o.a)(t),"updateNonStateData",(function(e){v.i(Object(o.a)(t),e)})),Object(l.a)(Object(o.a)(t),"onMapLoad",(function(e){t.mapView=e.mapView,t.props.setView(e.mapView),t.home=e.home,t.mapView.when((function(){var e,n;null===(e=t.mapView.container)||void 0===e||null===(n=e.querySelector('*[role="application"]'))||void 0===n||n.removeAttribute("role")})),Object(D.a)()&&"preview"===t.props.storyItem.viewerMode&&t.mapView.watch("size",S()((function(){t.props.isFullScreen||v.k({instance:Object(o.a)(t),mapData:t.props.data})}),300))})),Object(l.a)(Object(o.a)(t),"getGroupName",(function(e){return F.c(t.props.data.drawings,t.props.data.drawingCategories,e,t.props.intl.formatMessage)})),Object(l.a)(Object(o.a)(t),"getGraphicsContainerId",(function(){return"".concat(t.props.mapContainerId,"-graphics")})),t.state={idsOfPopupsBeingShown:[],idOfFullPopupBeingShown:"",idsOfDrawingTextsBeingShown:[],currentlyEditedPopupId:""},t}return Object(a.a)(u,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidUpdate",value:function(e){var t;(Object(T.b)(e.data,this.props.data)||this.updateNonStateData(!0),e.type!==this.props.type)&&(this.props.type!==m.a.FullInteractive&&(this.state.idOfFullPopupBeingShown&&this.closeFullPopup(this.state.idOfFullPopupBeingShown),Object(G.f)(this.mapView,null===(t=this.home)||void 0===t?void 0:t.viewpoint)))}},{key:"render",value:function(){return this.renderMap()}}]),u}(p.Component),de=Object(N.b)(Object(d.c)(Object(w.c)(Object(h.a)(ue)))),he=u.a.createElement;function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function fe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ye=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(fe()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"state",{expressMapData:void 0}),Object(l.a)(Object(o.a)(e),"renderDisplayer",(function(){var t=e.getData();return"object"===typeof t&&he(de,{type:e.props.isFullScreen?m.a.FullInteractive:e.props.viewerType||m.a.Viewer,mapContainerId:e.getMapContainerId(),data:t,ariaLabel:e.props.alt,popupSummaryType:e.props.popupSummaryType,goFullScreen:e.props.onToggleFullScreen,isFullScreen:e.props.isFullScreen,isPlacedCompactly:e.props.isPlacedCompactly,drawingCategoryVisibilities:e.props.drawingCategoryVisibilities,extent:e.props.extent,scale:e.props.scale,center:e.props.center,isIntersecting:e.props.isIntersecting,blockId:e.props.blockId,observe:e.props.observe,printMode:e.props.printMode,setView:e.props.setView})})),Object(l.a)(Object(o.a)(e),"getData",(function(){if(!0!==e.props.data){var t=e.props.data||e.state.expressMapData;return t&&function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{},Object(v.b)(e.props))}})),Object(l.a)(Object(o.a)(e),"getMapContainerId",(function(){return"".concat(e.props.itemId.replace(/\.json$/,""),"-viewer-map-").concat(e.props.blockId)})),e}return Object(a.a)(p,[{key:"componentDidMount",value:function(){this.props.data||Object(v.c)(this)}},{key:"render",value:function(){var e=this.props.showCaption?this.props.mediaWrapperCaption||he(g.a,{text:this.props.caption,alignmentLg:this.props.captionAlignmentLg,customCaptionColors:this.props.customCaptionColors}):void 0,t=this.props.fillParent?0:"small"===this.props.screenWidth||this.props.isPlacedCompactly?1.5:this.props.aspectRatio;return he(y.a,{aspectRatio:t,heightConstrained:this.props.heightConstrained,caption:e,fillParent:this.props.fillParent,isCompact:this.props.isCompact,isFullScreen:this.props.isFullScreen,onToggleFullScreen:this.props.onToggleFullScreen,printMode:this.props.printMode},he(f.a,{isFullScreen:this.props.isFullScreen,isPlacedCompactly:this.props.isPlacedCompactly,onToggleFullScreen:this.props.onToggleFullScreen},this.renderDisplayer()))}}]),p}(p.Component);t.default=Object(N.b)(Object(h.a)(Object(d.c)(ye)))},m14E:function(e,t,n){"use strict";var i=n("ERkP"),a=n.n(i).a.createElement,o=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},r=Object(i.memo)((function(e){var t=e.text,n=e.target,r=function(e,t){var n,i=new RegExp(o(t),"gi"),a=[],r=t.length;for(n=i.exec(e);n;)a.push(n.index),a.push(n.index+r),n=i.exec(e);return 0===a[0]?a:[0].concat(a)}(t,n),s=t.length,c=new RegExp("^".concat(o(n),"$"),"gi");return a(i.Fragment,null,r.map((function(e,n){var o=t.substring(e,n+1<r.length?r[n+1]:s),l=c.test(o);return a(i.Fragment,{key:n},l?a("b",null,o):o)})))}));t.a=r},mJaw:function(e,t,n){"use strict";var i=n("wWnZ");t.a=i.b},mJsu:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return g})),n.d(t,"a",(function(){return v}));var i=n("VtSi"),a=n.n(i),o=n("HbGN"),r=n("fGyu"),s=n("zjfJ"),c=n("7faH"),l=n("uYly"),p=n("hG09");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e,t){return d({},!t&&d({isShowingLegend:e.isShowingLegend,search:e.search,locate:e.locate},!1===e.navigation&&{navigation:!1}),{},e.mapLayers&&{mapLayers:Object(r.a)(e.mapLayers)})},m=function(e,t){var n=e.view;return d({},{extent:n&&n.extent?n.extent.toJSON():void 0,center:n&&n.center?n.center.toJSON():void 0,zoom:n?n.zoom:void 0,viewpoint:n&&n.viewpoint?n.viewpoint.toJSON():void 0,lightingDate:n&&n.environment?n.environment.lighting.date.getTime():void 0},{},h(e.state,t))},f=function(e){var t=e.tempDataStorage||e.props.data;if(t){t.extent,t.viewpoint,t.zoom,t.center;var n=Object(o.a)(t,["extent","viewpoint","zoom","center"]);if(e.props.itemType===l.a.WebMap?y(e.view,e.home,t):e.props.itemType===l.a.WebScene&&g(e.view,e.home,t),!e.tempDataStorage){n.mapLayers;var i=Object(o.a)(n,["mapLayers"]);e.setState(h(i))}}},y=function(e,t,n){var i,o,r,s,c,l,u,d,h,m,f,y=arguments;return a.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:if(i=y.length>3&&void 0!==y[3]&&y[3],o=y.length>4&&void 0!==y[4]&&y[4],r=n.extent,s=n.zoom,c=n.center,l=n.viewpoint,u="undefined"!==typeof r,h="undefined"!==typeof l,m=function(){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=8;break}if(!h){t.next=5;break}return t.abrupt("return",Object(p.f)(e,l));case 5:return t.abrupt("return",Object(p.e)({view:e,zoom:s,center:c}));case 6:t.next=14;break;case 8:if(!h){t.next=12;break}return t.abrupt("return",Object(p.f)(e,l,!0));case 12:e.center=c,e.zoom=s;case 14:case"end":return t.stop()}}),null,null,null,Promise)},f=function(){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i?Object(p.d)(e,r):Object(p.j)(e,r));case 1:case"end":return t.stop()}}),null,null,null,Promise)},!(d="number"===typeof s&&"undefined"!==typeof c)||!u){g.next=18;break}if(!o){g.next=14;break}return g.next=12,a.a.awrap(f());case 12:g.next=16;break;case 14:return g.next=16,a.a.awrap(m());case 16:g.next=26;break;case 18:if(!d||u){g.next=23;break}return g.next=21,a.a.awrap(m());case 21:g.next=26;break;case 23:if(d||!u){g.next=26;break}return g.next=26,a.a.awrap(f());case 26:e.when((function(){Object(p.l)(t,e.viewpoint)}));case 27:case"end":return g.stop()}}),null,null,null,Promise)},g=function(e,t,n){var i,o,r,s=arguments;return a.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(i=s.length>3&&void 0!==s[3]&&s[3],n){c.next=3;break}return c.abrupt("return");case 3:return o=n.viewpoint,r=n.lightingDate,c.next=6,a.a.awrap(Object(p.h)({view:e,viewpoint:o,skipAnimation:!i}));case 6:r&&e.when((function(){Object(p.m)(e,r)})),Object(p.l)(t,o);case 8:case"end":return c.stop()}}),null,null,null,Promise)},v=function(e,t,n){if(e&&t){var i=Object(c.a)(e,"id");t.forEach((function(e){var t=i[e.id];t?(n?Object(p.a)(e,t.visible):t.visible!==e.visible&&(e.visible=t.visible),t.title!==e.title&&(e.title=t.title)):e.visible=!1}))}}},mMSW:function(e,t,n){"use strict";n.r(t),n.d(t,"EmbedViewer",(function(){return re}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("2SGB"),f=n("Bcqe"),y=n.n(f),g=n("7Zgl"),v=n("+L/X"),b=n("gZeU"),x=n("u0WM"),O=n("O94r"),w=n.n(O),j=n("9pmT"),C=n("NX3A"),k=n("AuFC"),S=new(n("r2q8").EventEmitter);void 0!==typeof window.embedly&&function(e,t){var n="embedly-platform",i="script";if(!t.getElementById(n)){e.embedly=e.embedly||function(){(e.embedly.q=e.embedly.q||[]).push(arguments)};var a=t.createElement(i);a.id=n,a.async=!0,a.src="https://cdn.embedly.com/widgets/platform.js";var o=t.getElementsByTagName(i)[0];o.parentNode.insertBefore(a,o);var r=document.createElement("style");r.classList.add("embedly-css"),r.innerHTML="body#cards {padding: 0;}.hdr {display: none;}.video .resp-media{padding-bottom: unset !important; height: 100vh;};",document.head.appendChild(r),e.embedly("on","card.rendered",(function(e){S.emit("card.rendered",e)})),e.embedly("on","card.resize",(function(e){S.emit("card.resize",e)}))}}(window,document);var I=S,P=[],R=h.a.createElement;function E(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var D=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(E()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"cardContainerRef",Object(d.createRef)()),Object(l.a)(Object(o.a)(e),"subscribeToEvents",(function(){I.on("card.rendered",e.onCardRendered),I.on("card.resize",e.onCardResize)})),Object(l.a)(Object(o.a)(e),"unsubscribeToEvents",(function(){I.removeListener("card.rendered",e.onCardRendered),I.removeListener("card.resize",e.onCardResize),e.player&&(e.player.off("play",e.onPlayerPlay),P.filter((function(t){return t!==e.player})))})),Object(l.a)(Object(o.a)(e),"createCard",(function(){e.cardContainerRef.current&&window.embedly("card",e.cardContainerRef.current.querySelector("a"))})),Object(l.a)(Object(o.a)(e),"onCardRendered",(function(t){if(!e.cardIframe&&e.cardContainerRef.current){var n=e.cardContainerRef.current.querySelector("iframe");n===t&&(e.cardIframe=n,window.embedly("player",(function(n){n.frame.elem===t&&e.onPlayerReady(n)})),e.cardIframe.setAttribute("title",e.props.title||""),e.cardIframe.setAttribute("role","application"),"function"===typeof e.props.onRendered&&e.props.onRendered(t),e.props.fillParent&&(e.cardIframe.height="100%"))}})),Object(l.a)(Object(o.a)(e),"onCardResize",(function(t){e.cardIframe&&e.cardIframe===t&&"function"===typeof e.props.onResize&&e.props.onResize(t)})),Object(l.a)(Object(o.a)(e),"onPlayerReady",(function(t){e.player=t,P.push(e.player),e.player.on("play",e.onPlayerPlay)})),Object(l.a)(Object(o.a)(e),"onPlayerPlay",(function(){try{P.forEach((function(t){e.player!==t&&t.pause()}))}catch(t){}})),Object(l.a)(Object(o.a)(e),"renderThumbnailForPrinting",(function(t){if(t){var n={styles:R(u.a,{id:"2333126309"},[".video-play-button.jsx-2333126309{display:block;position:absolute;top:25%;left:25%;height:50%;width:50%;}"]),className:"jsx-2333126309"};return R("div",{className:"jsx-2637427626 video-thumbnail-wrapper"},R("img",{src:t,alt:e.props.title,className:"jsx-2637427626 video-thumbnail"}),R(j.a,{color:"rgba(255, 255, 255, 0.5)",height:"100%",width:"100%",className:"video-play-button ".concat(n.className)}),n.styles,R(u.a,{id:"2637427626"},[".video-thumbnail-wrapper.jsx-2637427626,.video-thumbnail.jsx-2637427626{height:100%;width:100%;}",".video-thumbnail.jsx-2637427626{object-fit:cover;}",".video-thumbnail-wrapper.jsx-2637427626{display:none;}","@media print{.video-thumbnail-wrapper.jsx-2637427626{display:block;}}"]))}})),e}return Object(a.a)(p,[{key:"componentDidMount",value:function(){this.subscribeToEvents(),this.createCard()}},{key:"componentDidUpdate",value:function(e){this.cardIframe&&e.title!==this.props.title&&this.cardIframe.setAttribute("title",this.props.title||"")}},{key:"componentWillUnmount",value:function(){this.unsubscribeToEvents()}},{key:"render",value:function(){var e=this.props.printMode&&"video"===this.props.embedType&&this.props.printThumbnail;return R("div",{ref:this.cardContainerRef,className:u.a.dynamic([["1230887372",[C.a.color.black]]])+" "+(w()("card-container",this.props.embedType,{"fill-parent":this.props.fillParent,"video-image":e})||"")},R("a",{href:this.props.url,"data-card-width":"100%","data-card-align":"center","data-card-key":this.props.config.EMBEDLY_API_KEY,"data-card-controls":"0",className:u.a.dynamic([["1230887372",[C.a.color.black]]])}),this.renderThumbnailForPrinting(e),R(u.a,{id:"1230887372",dynamic:[C.a.color.black]},[".card-container.video.__jsx-style-dynamic-selector{position:relative;background-color:".concat(C.a.color.black,";height:100%;overflow:hidden;}"),".card-container.fill-parent.__jsx-style-dynamic-selector,.card-container.fill-parent.__jsx-style-dynamic-selector .embedly-card,.card-container.fill-parent.__jsx-style-dynamic-selector .embedly-card-hug,.card-container.fill-parent.__jsx-style-dynamic-selector iframe,.card-container.video.__jsx-style-dynamic-selector .embedly-card,.card-container.video.__jsx-style-dynamic-selector .embedly-card-hug{height:100%;}",".card-container.__jsx-style-dynamic-selector .embedly-card-hug{margin:0 !important;}","@media print{.card-container.video-image.__jsx-style-dynamic-selector .embedly-card{display:none;}}"]))}}]),p}(d.PureComponent),T=Object(k.c)(D),M=n("g764"),A=n("A7aE"),N=n("Z4N4"),L=n("wWnZ"),G=n("+tpQ"),_=n("Y/5s"),B=n("YQpL"),W=n("liFR"),V=n("MEC2");function F(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var U=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(F()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"cursor-lock",path:"M2.50072727,8.50672727 L-7.99360578e-15,11.9363636 L-7.99360578e-15,0.0141818182 L9.66018182,7.06254545 L5.57463636,7.06254545 L7.74681818,11.3962727 L4.72727273,12.9149091 L2.50072727,8.50672727 Z M15.1333333,11.8 C15.3907471,11.8007688 15.5992312,12.0092529 15.6,12.2666667 L15.6,15.5333333 C15.5992312,15.7907471 15.3907471,15.9992312 15.1333333,16 L10.4666667,16 C10.2092529,15.9992312 10.0007688,15.7907471 10,15.5333333 L10,12.2666667 C10.0007688,12.0092529 10.2092529,11.8007688 10.4666667,11.8 L10.9333333,11.8 L10.9333333,10.8666667 C10.9333333,9.83573513 11.7690685,9 12.8,9 C13.8309315,9 14.6666667,9.83573513 14.6666667,10.8666667 L14.6666667,11.8 L15.1333333,11.8 Z M13.2666667,14.1333333 L13.2666667,13.6666667 L12.8,13.6666667 L12.8,13.2 L12.3333333,13.2 L12.3333333,14.6 L12.8,14.6 L12.8,14.1333333 L13.2666667,14.1333333 Z M14.2,11.8 L14.2,10.8666667 C14.2,10.093468 13.5731986,9.46666667 12.8,9.46666667 C12.0268014,9.46666667 11.4,10.093468 11.4,10.8666667 L11.4,11.8 L14.2,11.8 Z",viewBox:"0 0 16 16"})}return a}(V.a);function z(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var H=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(z()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"cursor-click",path:"M14.172 5.717l2.71-1.297.432.902-2.865 1.372zm.203-4.301l-.943-.333-1.028 2.915.872.535zm-9.219 8.616l.432.902 2.865-1.37-.587-.829zM7.978 2.03L9.06 4.291l.902-.431L8.88 1.599zm-.342 4.25L4.72 5.252l-.332.943 3.117 1.1zM23 15.946L11 7.19v14.804l3.176-4.352 3.164 6.266 3.582-1.802-3.087-6.16z",viewBox:"0 0 24 24"})}return a}(V.a),Y=n("eCu0"),K=n("Qv2g"),X=n("oK9Z"),J=n("i3DM"),Z=n("Abkm"),q=n("dunV"),Q=h.a.createElement;function $(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ee=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if($()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"state",{isMounted:!1,isInteractionEnabled:!1,isEnableInteractionMessageVisible:!1,frameHeight:!e.props.height||e.props.fillParent?"100%":"".concat(e.props.height,"px")}),Object(l.a)(Object(o.a)(e),"iframeRef",Object(d.createRef)()),Object(l.a)(Object(o.a)(e),"windowId",Object(q.b)()),Object(l.a)(Object(o.a)(e),"isFrameLoaded",!1),Object(l.a)(Object(o.a)(e),"isFrameRegistered",!1),Object(l.a)(Object(o.a)(e),"toggleInteraction",(function(t){t&&"touchend"===t.type?t.preventDefault():!e.state.isEnableInteractionMessageVisible&&t&&"touchstart"===t.type?e.setState({isEnableInteractionMessageVisible:!0}):e.state.isEnableInteractionMessageVisible&&t&&"touchstart"===t.type?e.setState({isEnableInteractionMessageVisible:!1,isInteractionEnabled:!0}):e.state.isInteractionEnabled||!t||"mouseover"!==t.type&&"focus"!==t.type?e.state.isInteractionEnabled||!t||"mouseout"!==t.type&&"blur"!==t.type?!e.state.isInteractionEnabled||t&&!Object(J.a)(t)?!e.state.isEnableInteractionMessageVisible||t&&!Object(J.a)(t)||(t&&t.preventDefault(),e.setState({isInteractionEnabled:!0,isEnableInteractionMessageVisible:!1})):(t&&t.preventDefault(),e.setState({isInteractionEnabled:!1,isEnableInteractionMessageVisible:!1})):e.setState({isEnableInteractionMessageVisible:!1}):e.setState({isEnableInteractionMessageVisible:!0})})),Object(l.a)(Object(o.a)(e),"onLoad",(function(){e.isFrameLoaded=!0,e.props.onLoad()})),Object(l.a)(Object(o.a)(e),"registerIframe",(function(){var t=0,n=setInterval((function(){e.isFrameRegistered||t>50?clearInterval(n):e.iframeRef.current&&e.iframeRef.current.contentWindow&&(e.iframeRef.current.contentWindow.postMessage({method:"register",windowId:e.windowId},"*"),e.isFrameLoaded&&t++)}),100)})),Object(l.a)(Object(o.a)(e),"receivePostMessage",(function(t){if(e.iframeRef.current&&t.origin===new URL(e.iframeRef.current.src).origin){var n="string"===typeof t.data?JSON.parse(Object(Z.e)(t.data)):Object(Z.e)(t.data);n&&"registered"===n.method&&n.windowId===e.windowId?e.isFrameRegistered=!0:n&&"resize"===n.method&&n.windowId===e.windowId&&"number"===typeof n.height?(e.setState({frameHeight:"".concat(n.height,"px")}),e.props.onResize(e.iframeRef.current)):n&&"iframe.resize"===n.context&&n.src===e.iframeRef.current.src&&"number"===typeof n.height&&(e.setState({frameHeight:"".concat(n.height,"px")}),e.props.onResize(e.iframeRef.current))}})),e}return Object(a.a)(p,[{key:"componentDidMount",value:function(){window.addEventListener("message",this.receivePostMessage,!1),this.registerIframe(),this.setState({isMounted:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.receivePostMessage)}},{key:"render",value:function(){var e=this.props.url.replace("http://","https://"),t=this.props.cleanEmbed||"photo"===this.props.embedType||this.props.printMode,n=t||this.state.isInteractionEnabled;return Q("div",{className:u.a.dynamic([["3759342665",[N.a.center(),N.a.hexA(C.a.color.black,.9),C.a.spacing.xxs,C.a.color.antiFlashWhite,C.a.spacing.xxs,N.a.typography.body16(),this.props.iOSVersion?"-webkit-overflow-scrolling: touch;overflow: ".concat(n?"auto":"hidden",";"):"",this.state.frameHeight]]])+" inline-embed"},!t&&Q(K.a,null,this.state.isInteractionEnabled&&Q(W.a,{tooltipContent:this.props.intl.formatMessage({id:"builder.embed.inlineEmbed.lockInteraction"}),placement:"left"},Q(X.a,{onClick:this.toggleInteraction,className:p.inlineEmbedButtonStyleInfo.className},Q(U,{width:C.a.spacing.xxs,height:"auto"}))),Q(W.a,{tooltipContent:this.props.intl.formatMessage({id:"builder.embed.inlineEmbed.openWebsite"}),placement:"left"},Q(X.a,{link:{href:this.props.url,openInNewPage:!0},"aria-label":this.props.intl.formatMessage({id:"builder.embed.inlineEmbed.openWebsite"}),className:p.inlineEmbedButtonStyleInfo.className},Q(G.a,{width:C.a.spacing.xxs,height:"auto"})))),!n&&Q("div",{onClick:this.toggleInteraction,onKeyDown:this.toggleInteraction,onFocus:this.toggleInteraction,onBlur:this.toggleInteraction,onMouseOver:this.toggleInteraction,onMouseOut:this.toggleInteraction,onTouchStart:this.toggleInteraction,onTouchEnd:this.toggleInteraction,role:"button",tabIndex:0,"aria-label":this.props.intl.formatMessage({id:"builder.embed.inlineEmbed.enableInteraction.ariaLabel"}),className:u.a.dynamic([["3759342665",[N.a.center(),N.a.hexA(C.a.color.black,.9),C.a.spacing.xxs,C.a.color.antiFlashWhite,C.a.spacing.xxs,N.a.typography.body16(),this.props.iOSVersion?"-webkit-overflow-scrolling: touch;overflow: ".concat(n?"auto":"hidden",";"):"",this.state.frameHeight]]])+" interaction-lock"},this.state.isEnableInteractionMessageVisible&&Q("div",{className:u.a.dynamic([["3759342665",[N.a.center(),N.a.hexA(C.a.color.black,.9),C.a.spacing.xxs,C.a.color.antiFlashWhite,C.a.spacing.xxs,N.a.typography.body16(),this.props.iOSVersion?"-webkit-overflow-scrolling: touch;overflow: ".concat(n?"auto":"hidden",";"):"",this.state.frameHeight]]])+" interact-message"},Q(H,{width:"4rem",height:"auto"}),Q("p",{className:u.a.dynamic([["3759342665",[N.a.center(),N.a.hexA(C.a.color.black,.9),C.a.spacing.xxs,C.a.color.antiFlashWhite,C.a.spacing.xxs,N.a.typography.body16(),this.props.iOSVersion?"-webkit-overflow-scrolling: touch;overflow: ".concat(n?"auto":"hidden",";"):"",this.state.frameHeight]]])},Q(m.a,{id:this.props.isTouchDevice?"builder.embed.inlineEmbed.enableInteraction.touch":"builder.embed.inlineEmbed.enableInteraction.noTouch"})))),Q("div",{className:u.a.dynamic([["3759342665",[N.a.center(),N.a.hexA(C.a.color.black,.9),C.a.spacing.xxs,C.a.color.antiFlashWhite,C.a.spacing.xxs,N.a.typography.body16(),this.props.iOSVersion?"-webkit-overflow-scrolling: touch;overflow: ".concat(n?"auto":"hidden",";"):"",this.state.frameHeight]]])+" iframe-wrapper"},this.state.isMounted&&"photo"!==this.props.embedType&&Q("iframe",{ref:this.iframeRef,role:"application",src:e,sandbox:"allow-scripts allow-same-origin allow-forms allow-popups",allow:"autoplay;",allowFullScreen:!0,title:this.props.title,tabIndex:n?0:-1,onLoad:this.onLoad,className:u.a.dynamic([["3759342665",[N.a.center(),N.a.hexA(C.a.color.black,.9),C.a.spacing.xxs,C.a.color.antiFlashWhite,C.a.spacing.xxs,N.a.typography.body16(),this.props.iOSVersion?"-webkit-overflow-scrolling: touch;overflow: ".concat(n?"auto":"hidden",";"):"",this.state.frameHeight]]])}),this.state.isMounted&&"photo"===this.props.embedType&&Q("img",{src:e,alt:this.props.title,onLoad:this.onLoad,className:u.a.dynamic([["3759342665",[N.a.center(),N.a.hexA(C.a.color.black,.9),C.a.spacing.xxs,C.a.color.antiFlashWhite,C.a.spacing.xxs,N.a.typography.body16(),this.props.iOSVersion?"-webkit-overflow-scrolling: touch;overflow: ".concat(n?"auto":"hidden",";"):"",this.state.frameHeight]]])+" photo-embed"})),Q(u.a,{id:"3759342665",dynamic:[N.a.center(),N.a.hexA(C.a.color.black,.9),C.a.spacing.xxs,C.a.color.antiFlashWhite,C.a.spacing.xxs,N.a.typography.body16(),this.props.iOSVersion?"-webkit-overflow-scrolling: touch;overflow: ".concat(n?"auto":"hidden",";"):"",this.state.frameHeight]},[".inline-embed.__jsx-style-dynamic-selector{position:relative;height:100%;width:100%;}",".interaction-lock.__jsx-style-dynamic-selector{position:absolute;top:0;bottom:0;left:0;right:0;".concat(N.a.center(),";cursor:pointer;}"),"@-webkit-keyframes fadein-touch-__jsx-style-dynamic-selector{0%{opacity:0;}100%{opacity:1;}}","@keyframes fadein-touch-__jsx-style-dynamic-selector{0%{opacity:0;}100%{opacity:1;}}",".interact-message.__jsx-style-dynamic-selector{-webkit-animation:fadein-touch-__jsx-style-dynamic-selector 0.5s linear;animation:fadein-touch-__jsx-style-dynamic-selector 0.5s linear;background-color:".concat(N.a.hexA(C.a.color.black,.9),";padding:").concat(C.a.spacing.xxs,";color:").concat(C.a.color.antiFlashWhite,";text-align:center;pointer-events:none;}"),"@media (hover:hover){@-webkit-keyframes fadein-__jsx-style-dynamic-selector{0%{opacity:0;}50%{opacity:0;}100%{opacity:1;}}@keyframes fadein-__jsx-style-dynamic-selector{0%{opacity:0;}50%{opacity:0;}100%{opacity:1;}}.interact-message.__jsx-style-dynamic-selector{-webkit-animation:fadein-__jsx-style-dynamic-selector 1s linear;animation:fadein-__jsx-style-dynamic-selector 1s linear;}}",".interact-message.__jsx-style-dynamic-selector p.__jsx-style-dynamic-selector{margin-top:".concat(C.a.spacing.xxs,";").concat(N.a.typography.body16(),";}"),".iframe-wrapper.__jsx-style-dynamic-selector{height:100%;width:100%;".concat(this.props.iOSVersion?"-webkit-overflow-scrolling: touch;overflow: ".concat(n?"auto":"hidden",";"):"",";}"),"iframe.__jsx-style-dynamic-selector{height:".concat(this.state.frameHeight,";width:100%;}"),".photo-embed.__jsx-style-dynamic-selector{height:100%;width:100%;object-fit:cover;}"]),p.inlineEmbedButtonStyleInfo.styles)}}]),p}(d.PureComponent);Object(l.a)(ee,"inlineEmbedButtonStyleInfo",{styles:Q(u.a,{id:"1688106274",dynamic:[N.a.shadow.xs()]},[".media-overlay-button.__jsx-style-dynamic-selector{".concat(N.a.shadow.xs(),";}")]),className:u.a.dynamic([["1688106274",[N.a.shadow.xs()]]])});var te=Object(B.c)(Object(Y.c)(ee)),ne=n("1yNe"),ie=n("ix8t"),ae=h.a.createElement;function oe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var re=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(oe()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"state",{inlineFrameLoaded:!1,cardRendered:!1,isMobile:!0}),Object(l.a)(Object(o.a)(e),"containerRef",Object(d.createRef)()),Object(l.a)(Object(o.a)(e),"onResize",y()((function(){var t,n=window.innerWidth<Object(g.i)(C.a.responsiveBreakpoints.large);e.containerRef.current&&(t=e.containerRef.current.clientWidth<Object(g.i)(C.a.responsiveBreakpoints.medium)),e.setState({isMobile:n,isSmallContainer:t}),!n&&!t||"standard"===e.props.tempSizeOverride||e.props.printMode?n||t||"undefined"===typeof e.props.tempSizeOverride||e.props.updateTempSizeOverride():e.props.updateTempSizeOverride("standard")}),300)),Object(l.a)(Object(o.a)(e),"onInlineFrameResize",y()((function(t){var n=t.getBoundingClientRect().height;e.setState({autoHeight:n}),"function"===typeof e.props.onFrameResize&&e.props.onFrameResize(t)}),300)),Object(l.a)(Object(o.a)(e),"renderFallbackPlaceholderUI",(function(){return ae(h.a.Fragment,null,ae(ie.a,null),e.renderFallbackPlaceholderTextAndButton())})),Object(l.a)(Object(o.a)(e),"renderFallbackPlaceholderTextAndButton",(function(){var t=e.props.storyDesign.storyTheme.themeVariables,n=t.backgroundColor,i=t.titleColor,a=Object(g.f)(n),o=Object(g.f)(i),r=N.a.themeOpacityBg(e.props.theme.id),s=e.getCombinedBgColor(a,o,r),c=e.getCombinedBgColor(Object(g.f)(s),Object(g.f)(Object(g.g)(255,255,255)),.12),l=i,p="light",d={styles:ae(u.a,{id:"554671911",dynamic:[l]},[".button.__jsx-style-dynamic-selector{color:".concat(l,";}")]),className:u.a.dynamic([["554671911",[l]]])};Object(g.c)(c,l).AA||(l=n,d={styles:ae(u.a,{id:"1885058889",dynamic:[l]},[".title-color.__jsx-style-dynamic-selector{color:".concat(l,";}")]),className:u.a.dynamic([["1885058889",[l]]])},Object(g.c)(c,l).AA||(d=void 0,Object(g.a)(c)<=.179?(p="dark",l=C.a.color.white):l=C.a.color.black));return ae("div",{className:u.a.dynamic([["3158464991",[N.a.center("column"),N.a.typography.body16(),C.a.spacing.sm,l]]])+" unsupported-placeholder"},ae("p",{className:u.a.dynamic([["3158464991",[N.a.center("column"),N.a.typography.body16(),C.a.spacing.sm,l]]])},ae(m.a,{id:"builder.embed.mediaPanelEmbed.cantDisplay"})),ae(L.a,{type:"clear",color:p,link:{href:e.props.url,openInNewPage:!0},icon:ae(G.a,null),iconPosition:"end",className:d?d.className:""},ae(m.a,{id:"builder.embed.mediaPanelEmbed.openWebsite"})),ae(u.a,{id:"3158464991",dynamic:[N.a.center("column"),N.a.typography.body16(),C.a.spacing.sm,l]},[".unsupported-placeholder.__jsx-style-dynamic-selector{position:absolute;top:0;height:100%;width:100%;".concat(N.a.center("column"),";}"),".unsupported-placeholder.__jsx-style-dynamic-selector p.__jsx-style-dynamic-selector{".concat(N.a.typography.body16(),";font-style:italic;max-width:28rem;margin-bottom:").concat(C.a.spacing.sm,";text-align:center;color:").concat(l,";}")]),d&&d.styles)})),Object(l.a)(Object(o.a)(e),"onInlineFrameLoaded",(function(){e.setState({inlineFrameLoaded:!0})})),Object(l.a)(Object(o.a)(e),"onEmbedlyCardRendered",(function(t){e.setState({cardRendered:!0}),"function"!==typeof e.props.onFrameResize||e.props.aspectRatio||e.props.onFrameResize(t)})),Object(l.a)(Object(o.a)(e),"getCombinedBgColor",(function(e,t,n){return Object(g.g)(Math.round((1-n)*e.red+n*t.red),Math.round((1-n)*e.green+n*t.green),Math.round((1-n)*e.blue+n*t.blue))})),e}return Object(a.a)(p,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize),this.onResize(),"function"===typeof this.props.observe&&this.containerRef.current&&this.props.observe(this.containerRef.current)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"render",value:function(){var e=this.props.showCaption?"string"===typeof this.props.caption?ae(x.a,{text:this.props.caption,alignmentLg:this.props.captionAlignmentLg,customCaptionColors:this.props.customCaptionColors}):this.props.caption:void 0,t=Object(ne.b)(this.state.isMobile&&!this.props.printMode,this.props.useSmartEmbed,this.props.blockDisplaySize,this.props.display,this.props.embedType,this.props.fillParent,this.props.displayInlineOnMobile,this.props.mobileDisplay);return ae("div",{ref:this.containerRef,"data-blockid":this.props.blockId,className:"jsx-2557286190 "+((this.props.fillParent?"fill-parent":"")||"")},"placeholder"===t&&this.renderFallbackPlaceholderUI(),"inline-iframe"===t&&ae(b.a,{widthLimit:400,caption:e,heightConstrained:!(this.props.height||this.state.autoHeight||this.props.aspectRatio),aspectRatio:this.props.height||this.state.autoHeight?void 0:this.props.aspectRatio?this.props.aspectRatio:1.7778,mediaLoaded:this.state.inlineFrameLoaded,fillParent:this.props.fillParent,isCompact:this.props.isCompact,printMode:this.props.printMode},this.props.isIntersecting&&ae(te,{url:this.props.useSmartEmbed&&this.props.fillParent&&this.props.embedSrc?this.props.embedSrc:this.props.url,embedType:this.props.embedType,title:this.props.alt,height:this.props.height,cleanEmbed:"video"===this.props.embedType,onLoad:this.onInlineFrameLoaded,onResize:this.onInlineFrameResize,fillParent:this.props.fillParent,printMode:this.props.printMode})),"embedly-iframe"===t&&ae(b.a,{mediaLoaded:this.state.cardRendered,widthLimit:400,caption:e,heightConstrained:"video"===this.props.embedType,fillParent:this.props.fillParent,isCompact:this.props.isCompact,aspectRatio:"video"===this.props.embedType?1.7778:this.state.cardRendered?void 0:this.props.aspectRatio,printMode:this.props.printMode},this.props.isIntersecting&&ae(T,{url:this.props.url,embedType:this.props.embedType,title:this.props.alt,onRendered:this.onEmbedlyCardRendered,onResize:this.props.onFrameResize,fillParent:this.props.fillParent,printMode:this.props.printMode,printThumbnail:this.props.thumbnailUrl})),"card"===t&&ae(M.a,{url:this.props.url,title:this.props.title,description:this.props.description,providerUrl:this.props.providerUrl,thumbnailUrl:this.props.thumbnailUrl,isMobileLayout:this.state.isSmallContainer,printMode:this.props.printMode}),ae(u.a,{id:"2557286190"},[".fill-parent.jsx-2557286190{height:100%;width:100%;}"]))}}]),p}(d.PureComponent);Object(l.a)(re,"defaultProps",{useSmartEmbed:!0});t.default=Object(_.d)(Object(v.a)(Object(A.b)(re)))},mUgm:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("ERkP"),u=n.n(p),d=n("YQpL"),h=n("S5pg"),m=n("AuFC"),f=u.a.createElement;function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var g=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(y()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"filePath","".concat(e.props.config.BASE_URL,"/static/images/builder/immersive/onboarding")),Object(l.a)(Object(o.a)(e),"sidecarStringsPath","builder.immersive.onboarding"),Object(l.a)(Object(o.a)(e),"slideshowStringsPath","builder.slideshow.onboarding"),Object(l.a)(Object(o.a)(e),"guidedTourStringsPath","builder.tour.onboarding"),Object(l.a)(Object(o.a)(e),"sidecarModalSlides",[{imageUrl:"".concat(e.filePath,"/sidecar1.jpg?v=20.1"),imageAlt:e.props.intl.formatMessage({id:"".concat(e.sidecarStringsPath,".slide1.imageAlt")}),title:e.props.intl.formatMessage({id:"".concat(e.sidecarStringsPath,".slide1.title")}),mainText:e.props.intl.formatMessage({id:"".concat(e.sidecarStringsPath,".slide1.text")}),navDotAria:e.props.intl.formatMessage({id:"builder.common.displayTip"},{tipNumber:1}),closeButtonLabel:e.props.intl.formatMessage({id:"builder.common.skip"})},{imageUrl:"".concat(e.filePath,"/sidecar2.jpg?v=20.2"),imageAlt:e.props.intl.formatMessage({id:"".concat(e.sidecarStringsPath,".slide2.imageAlt")}),title:e.props.intl.formatMessage({id:"".concat(e.sidecarStringsPath,".slide2.title")}),mainText:e.props.intl.formatMessage({id:"".concat(e.sidecarStringsPath,".slide2.text")}),navDotAria:e.props.intl.formatMessage({id:"builder.common.displayTip"},{tipNumber:2}),closeButtonLabel:e.props.intl.formatMessage({id:"builder.common.skip"})},{imageUrl:"".concat(e.filePath,"/sidecar3.jpg?v=20.1"),imageAlt:e.props.intl.formatMessage({id:"".concat(e.sidecarStringsPath,".slide3.imageAlt")}),title:e.props.intl.formatMessage({id:"".concat(e.sidecarStringsPath,".slide3.title")}),mainText:e.props.intl.formatMessage({id:"".concat(e.sidecarStringsPath,".slide3.text")}),navDotAria:e.props.intl.formatMessage({id:"builder.common.displayTip"},{tipNumber:3}),closeButtonLabel:e.props.intl.formatMessage({id:"builder.common.skip"})},{imageUrl:"".concat(e.filePath,"/sidecar4.jpg"),imageAlt:e.props.intl.formatMessage({id:"".concat(e.sidecarStringsPath,".slide4.imageAlt")}),title:e.props.intl.formatMessage({id:"".concat(e.sidecarStringsPath,".slide4.title")}),mainText:e.props.intl.formatMessage({id:"".concat(e.sidecarStringsPath,".slide4.text")}),navDotAria:e.props.intl.formatMessage({id:"builder.common.displayTip"},{tipNumber:4}),closeButtonLabel:e.props.intl.formatMessage({id:"builder.common.gotIt"})}]),Object(l.a)(Object(o.a)(e),"slideshowModalSlides",[{imageUrl:"".concat(e.filePath,"/slideshow1.jpg"),imageAlt:e.props.intl.formatMessage({id:"".concat(e.slideshowStringsPath,".slide1.imageAlt")}),title:e.props.intl.formatMessage({id:"".concat(e.slideshowStringsPath,".slide1.title")}),mainText:e.props.intl.formatMessage({id:"".concat(e.slideshowStringsPath,".slide1.text.beta")}),additionalText:e.props.intl.formatMessage({id:"".concat(e.slideshowStringsPath,".slide1.text.continued")}),navDotAria:e.props.intl.formatMessage({id:"builder.common.displayTip"},{tipNumber:1}),closeButtonLabel:e.props.intl.formatMessage({id:"builder.common.skip"})},{imageUrl:"".concat(e.filePath,"/slideshow2.jpg"),imageAlt:e.props.intl.formatMessage({id:"".concat(e.slideshowStringsPath,".slide2.imageAlt")}),title:e.props.intl.formatMessage({id:"".concat(e.slideshowStringsPath,".slide2.title")}),mainText:e.props.intl.formatMessage({id:"".concat(e.slideshowStringsPath,".slide2.text")}),additionalText:e.props.intl.formatMessage({id:"".concat(e.slideshowStringsPath,".slide2.text.continued")}),navDotAria:e.props.intl.formatMessage({id:"builder.common.displayTip"},{tipNumber:2}),closeButtonLabel:e.props.intl.formatMessage({id:"builder.common.gotIt"})}]),Object(l.a)(Object(o.a)(e),"guidedTourModalSlides",[{imageUrl:"".concat(e.filePath,"/guided-tour1.jpg"),imageAlt:e.props.intl.formatMessage({id:"builder.immersive.layoutSelector.guidedTour.mapFocused.alt"}),title:e.props.intl.formatMessage({id:"".concat(e.guidedTourStringsPath,".slide1.title")}),mainText:e.props.intl.formatMessage({id:"".concat(e.guidedTourStringsPath,".slide1.text")}),navDotAria:e.props.intl.formatMessage({id:"builder.common.displayTip"},{tipNumber:1}),closeButtonLabel:e.props.intl.formatMessage({id:"builder.common.gotIt"})}]),e}return Object(a.a)(p,[{key:"render",value:function(){return f(h.a,{modalSlides:"guided-tour"===this.props.immersiveType?this.guidedTourModalSlides:"slideshow"===this.props.immersiveType?this.slideshowModalSlides:this.sidecarModalSlides,onCloseButtonClick:this.props.onCloseButtonClick,isShowingModal:this.props.isShowingModal,previousButtonAria:this.props.intl.formatMessage({id:"builder.common.previousTip"}),nextButtonAria:this.props.intl.formatMessage({id:"builder.common.nextTip"})})}}]),p}(p.PureComponent);t.a=Object(m.c)(Object(d.c)(g))},mjBc:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var i=n("cxan"),a=n("ERkP"),o=n.n(a).a.createElement,r=Object(a.createContext)({areLabFeaturesEnabled:!1}),s=function(e){var t=e.children,n=e.areLabFeaturesEnabled;return o(r.Provider,{value:{areLabFeaturesEnabled:n}},t)},c=function(e){return function(t){return o(r.Consumer,null,(function(n){return o(e,Object(i.a)({},t,n))}))}}},mmNb:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("ERkP"),u=n.n(p),d=n("Abkm"),h=n("u0WM"),m=n("VtSi"),f=n.n(m),y=n("yFcC"),g=n.n(y),v=n("YQpL"),b=n("Z34l"),x=n("WXRn"),O=n("Z4N4"),w=n("e3Gu"),j=n("LqVs"),C=n("72yd"),k=n("ClPg"),S=n("A7aE"),I=u.a.createElement;function P(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var R=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(P()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"toolbarOptions",["bold","italic","link",{color:k.d}]),Object(l.a)(Object(o.a)(t),"renderEditor",(function(e){var n=t.props.storyDesign.storyTheme.themeVariables;return I("div",{className:g.a.dynamic([["2505616480",[O.a.hexA(n.bodyMutedColor,.5)]]])+" caption-editor-container"},I(h.a,{innerRef:e,alignmentLg:t.props.alignmentLg,customCaptionColors:t.props.customCaptionColors,hasRte:!0}),I(g.a,{id:"2505616480",dynamic:[O.a.hexA(n.bodyMutedColor,.5)]},[".caption-editor-container.__jsx-style-dynamic-selector .ql-editor,html[dir='rtl'] .caption-editor-container.__jsx-style-dynamic-selector .ql-editor{text-align:inherit;line-height:inherit;}",".caption-editor-container.__jsx-style-dynamic-selector .ql-editor.ql-blank::before{color:".concat(O.a.hexA(n.bodyMutedColor,.5),";font-style:initial;left:0;right:0;}"),".caption-editor-container.__jsx-style-dynamic-selector .media-caption .ql-tooltip.ql-editing{text-align:initial;}",".caption-editor-container.__jsx-style-dynamic-selector .ql-editor a{-webkit-text-decoration:inherit;text-decoration:inherit;}"]))})),t.state={isPublicUser:void 0},t}return Object(a.a)(p,[{key:"componentDidMount",value:function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.userSession){e.next=7;break}return e.t0=this,e.next=4,f.a.awrap(Object(b.i)(this.props.userSession));case 4:e.t1=e.sent,e.t2={isPublicUser:e.t1},e.t0.setState.call(e.t0,e.t2);case 7:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"render",value:function(){var e={modules:{toolbar:Object(x.b)()?this.toolbarOptions.slice().reverse():this.toolbarOptions}};return"boolean"===typeof this.state.isPublicUser&&I(w.a,{key:this.props.text,placeholder:this.props.placeholder,render:this.renderEditor,initHtml:this.props.text,variant:"inline",onHtmlChange:this.props.updateCaption,tooltipLinkPlaceholder:C.c,shouldCompareInitialContent:!1,initOptions:e,disabledToolbarOptions:this.state.isPublicUser?{paragraph:["custom-input"]}:{paragraph:[]},disabledColorBtnTooltip:this.state.isPublicUser?this.props.intl.formatMessage({id:"publicAccount.disabled"}):"",id:this.props.id,onCustomTextColorsChange:this.props.onCustomTextColorsChange})}}]),p}(p.PureComponent),E=Object(j.b)(Object(v.c)(Object(S.b)(R))),D=u.a.createElement;function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var M=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(T()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"renderEditor",(function(){return D("div",{role:"button",tabIndex:0,onFocus:t.startEditingState,onBlur:t.stopEditingState,onKeyDown:t.handleKeydown},D(E,{id:t.props.id,text:t.props.text,placeholder:t.props.placeholder,updateCaption:t.updateCaption,customCaptionColors:t.props.customCaptionColors,onCustomTextColorsChange:t.props.updateCustomCaptionColors,alignmentLg:t.props.alignmentLg}))})),Object(l.a)(Object(o.a)(t),"renderDisplayer",(function(){var e=Object(d.g)(t.props.text).trim()?t.props.text:t.props.placeholder;return D(h.a,{text:e,alignmentLg:t.props.alignmentLg,customCaptionColors:t.props.customCaptionColors})})),Object(l.a)(Object(o.a)(t),"handleKeydown",(function(e){"Enter"!==e.key&&"Tab"!==e.key||(t.stopEditingState(),t.props.insertTextBlock())})),Object(l.a)(Object(o.a)(t),"startEditingState",(function(){clearTimeout(t.timeoutID),t.setState({isEditing:!0})})),Object(l.a)(Object(o.a)(t),"stopEditingState",(function(){t.timeoutID=setTimeout((function(){t.setState({isEditing:!1})}),0)})),Object(l.a)(Object(o.a)(t),"updateCaption",(function(e){var n=Object(d.g)(e);t.props.updateCaption(n?e.replace(/<p><br><\/p>$/,""):"")})),t.state={isEditing:t.props.isIntersecting},t}return Object(a.a)(p,[{key:"shouldComponentUpdate",value:function(e,t){return!this.state.isEditing||this.state.isEditing!==t.isEditing}},{key:"render",value:function(){return this.props.isIntersecting?this.renderEditor():this.renderDisplayer()}}]),p}(p.Component);Object(l.a)(M,"defaultProps",{alignmentLg:"center"});t.a=M},n32U:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var i=n("zygG"),a=function(e){return new Promise((function(t,n){var i=new Image;i.onload=function(){t({height:i.naturalHeight,width:i.naturalWidth})},i.onerror=function(){n("image-load-error")},i.src=e}))},o=function(e,t,n,a){return new Promise((function(o,r){var s=new Image;s.onload=function(){var e=document.createElement("canvas"),r=e.getContext("2d");if(!r)return o("");var c="number"===typeof n?[n,n]:n,l=Object(i.a)(c,2),p=l[0],u=l[1],d=0,h=0,m=s.width/s.height,f=p/u;if("contain"===t?m<=f?(h=u,d=u*m):(d=p,h=p/m):"cover"===t&&(m<=f?(d=p,h=p/m):(h=u,d=u*m)),"cover"===t&&a){var y=m>f?.5*(p-d):0,g=m<=f?.5*(u-h):0;e.width=p,e.height=u,r.drawImage(s,y,g,d,h)}else e.width=d,e.height=h,r.drawImage(s,0,0,d,h);return o(e.toDataURL())},s.onerror=function(){return o("")},s.src=e}))}},nE7Y:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("ERkP"),l=n.n(c),p=n("2SGB"),u=n("YQpL"),d=n("AuFC"),h=n("1lKD"),m=l.a.createElement;function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(f()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return m(h.a,{isShowing:this.props.isShowing,optionGroupId:"guided-tour-layout",selectedOptionId:this.props.selectedLayout,onCloseClicked:this.props.onCloseClicked,onOptionSelected:this.props.onLayoutSelected,title:this.props.intl.formatMessage({id:"builder.immersive.layoutSelector.title.guidedTour"}),subtitle:this.props.intl.formatMessage({id:"builder.immersive.layoutSelector.subtitle.guidedTour"}),options:[{id:"map-focused",thumbnail:"".concat(this.props.config.BASE_URL,"/static/images/builder/immersive/layout-switch/guided-tour-map-focused.jpg"),alt:this.props.intl.formatMessage({id:"builder.immersive.layoutSelector.guidedTour.mapFocused.alt"}),title:m(p.a,{id:"builder.immersive.layoutSelector.guidedTour.mapFocused.title"}),subtitle:m(p.a,{id:"builder.immersive.layoutSelector.guidedTour.mapFocused.subtitle"})},{id:"media-focused",thumbnail:"".concat(this.props.config.BASE_URL,"/static/images/builder/immersive/layout-switch/guided-tour-media-focused.jpg"),alt:this.props.intl.formatMessage({id:"builder.immersive.layoutSelector.guidedTour.mediaFocused.alt"}),title:m(p.a,{id:"builder.immersive.layoutSelector.guidedTour.mediaFocused.title"}),subtitle:m(p.a,{id:"builder.immersive.layoutSelector.guidedTour.mediaFocused.subtitle"})}]})}}]),c}(c.PureComponent);t.a=Object(d.c)(Object(u.c)(y))},nOCn:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("A7aE"),c=r.a.createElement,l=Object(o.memo)((function(e){return c("div",{className:a.a.dynamic([["348187876",[e.storyDesign.storyTheme.themeVariables.accentColor1]]])+" divider"},c(a.a,{id:"348187876",dynamic:[e.storyDesign.storyTheme.themeVariables.accentColor1]},[".divider.__jsx-style-dynamic-selector{width:0.2rem;background-color:".concat(e.storyDesign.storyTheme.themeVariables.accentColor1,";display:inline-block;position:relative;height:100%;}")]))}));t.a=Object(s.b)(l)},nRhB:function(e,t,n){"use strict";n.r(t),n.d(t,"TemplateCustomViewer",(function(){return y}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("ERkP"),u=n.n(p),d=n("gZeU"),h=n("F4ML"),m=u.a.createElement;function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(f()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"setApp",(function(e){t.appConnector=e})),t}return Object(a.a)(p,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return m(d.a,{aspectRatio:1,caption:m("div",null,"TemplateCustom block")},m(h.a,{setApp:this.setApp}))}}]),p}(p.PureComponent);t.default=y},nVDo:function(e,t,n){"use strict";n.d(t,"i",(function(){return g})),n.d(t,"h",(function(){return v})),n.d(t,"c",(function(){return b})),n.d(t,"l",(function(){return x})),n.d(t,"m",(function(){return O})),n.d(t,"k",(function(){return w})),n.d(t,"j",(function(){return j})),n.d(t,"g",(function(){return C})),n.d(t,"f",(function(){return k})),n.d(t,"d",(function(){return S})),n.d(t,"e",(function(){return I})),n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return R})),n.d(t,"n",(function(){return E}));var i,a,o,r,s,c=n("zjfJ"),l=n("BAoe"),p=n("1PWK"),u=n("MKkT"),d=n("f95f"),h=n("bcaP"),m=n("RP1v"),f=n("t7DY"),y=n("QhVD"),g=147914381,v=[0,10],b=Object(l.b)((i={},Object(c.a)(i,m.a.PointRegular,{id:"builder.map.points"}),Object(c.a)(i,m.a.PointNumbered,{id:"builder.map.numberedPoints"}),Object(c.a)(i,m.a.Line,{id:"builder.map.lines"}),Object(c.a)(i,m.a.Area,{id:"builder.map.areas"}),i)),x=(a={},Object(c.a)(a,p.a.dark,[{id:"5e9b3685f4c24d8781073dd928ebda50"},{id:"747cb7a5329c478cbe6981076cc879c5"}]),Object(c.a)(a,p.a.light,[{id:"2afe5b807fa74006be6363fd243ffb30"},{id:"97fa1365da1e43eabb90d0364326bc2d",opacity:.375},{id:"ba52238d338745b1a355407ec9df6768"}]),o={},Object(c.a)(o,p.a.dark,"dark-gray-vector"),Object(c.a)(o,p.a.light,"gray-vector"),50),O=40,w="66.67%",j=72,C=(r={},Object(c.a)(r,f.j.POINT_REGULAR,m.a.PointRegular),Object(c.a)(r,f.j.POINT_NUMBERED,m.a.PointNumbered),Object(c.a)(r,f.j.POLYLINE_BENDING,m.a.Line),Object(c.a)(r,f.j.POLYGON,m.a.Area),r),k=(s={},Object(c.a)(s,m.a.PointRegular,{icon:u.a,color:"#9A79C0"}),Object(c.a)(s,m.a.PointNumbered,{icon:u.a,color:"#9A79C0"}),Object(c.a)(s,m.a.Line,{icon:d.a,color:"#E54724"}),Object(c.a)(s,m.a.Area,{icon:h.a,color:"#6BB769"}),s),S=[{type:m.a.PointRegular,title:"",drawingIds:[]},{type:m.a.PointNumbered,title:"",drawingIds:[]},{type:m.a.Line,title:"",drawingIds:[]},{type:m.a.Area,title:"",drawingIds:[]}],I={title:"",image:"",description:""},P=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],R=[y.d.numColor,y.d.numSize,y.d.simpleLocation],E=(y.c.serviceUrl,y.d.simpleLocation,y.c.serviceUrl,y.d.simpleLocation,{id:"newspaper",mode:y.b.light,color:{primary:"red",accent:"red",background:"red",primaryText:"red",secondaryText:"red"},font:{family:"Playfair Display Italic",baseFontSize:"16px"},graphics:{color:"red"},colorScheme:{primary:{name:"steel",category:"sequential",scheme:{default:[[62,63,69],[116,120,133,.9],[157,163,181,.9],[190,196,212,.9],[223,228,242,.9]],1:["#9da3b5"],2:["#3e3f45","#ced4e3"],3:["#3e3f45","#9da3b5","#ced4e3"],4:["#3e3f45","#747885","#9da3b5","#ced4e3"],5:["#3e3f45","#747885","#9da3b5","#bec4d4","#dfe4f2"],6:["#3e3f45","#5c5e65","#8c93a6","#adb3c4","#bec4d4","#dfe4f2"],7:["#3e3f45","#5c5e65","#747885","#8c93a6","#adb3c4","#bec4d4","#dfe4f2"],8:["#3e3f45","#5c5e65","#5c5e65","#8c93a6","#9da3b5","#adb3c4","#ced4e3","#dfe4f2"],9:["#3e3f45","#5c5e65","#747885","#8c93a6","#9da3b5","#adb3c4","#bec4d4","#ced4e3","#dfe4f2"],10:["#23242b","#3e3f45","#5c5e65","#747885","#8c93a6","#9da3b5","#adb3c4","#bec4d4","#ced4e3","#dfe4f2"],stops:["#3e3f45","#747885","#9da3b5","#bec4d4","#dfe4f2"]}},secondary:{name:"bronze",category:"sequential",scheme:{default:[[215,196,255,.9],[116,120,133,.9],[210,176,128,.9],[226,203,171,.9],[234,216,192,.9]],1:["#d2b080"],2:["#70521d","#ead8c0"],3:["#70521d","#d2b080","#ead8c0"],4:["#70521d","#ac8851","#d2b080","#ead8c0"],5:["#70521d","#ac8851","#d2b080","#e2cbab","#ead8c0"],6:["#70521d","#8e6d37","#caa26b","#dabd95","#e2cbab","#ead8c0"],7:["#70521d","#8e6d37","#ac8851","#caa26b","#dabd95","#e2cbab","#f2e6d5"],8:["#70521d","#8e6d37","#8e6d37","#caa26b","#d2b080","#dabd95","#ead8c0","#f2e6d5"],9:["#70521d","#8e6d37","#ac8851","#caa26b","#d2b080","#dabd95","#e2cbab","#ead8c0","#f2e6d5"],10:["#523803","#70521d","#8e6d37","#ac8851","#caa26b","#d2b080","#dabd95","#e2cbab","#ead8c0","#f2e6d5"],stops:["#70521d","#ac8851","#d2b080","#e2cbab","#ead8c0"]}},diverging:{name:"gold-tustine",category:"diverging",scheme:{default:[[140,255,220,.25],[90,162,139,.25],[80,89,68,.25],[179,171,96,.25],[255,234,140,.25]],1:["#ccb333"],2:["#a79325","#667170"],3:["#a79325","#ccb333","#667170"],4:["#827317","#ccb333","#7f8c8b","#484d3d"],5:["#827317","#ccb333","#f6e68d","#7f8c8b","#484d3d"],6:["#827317","#ccb333","#f6e68d","#a7b4b4","#7f8c8b","#484d3d"],7:["#827317","#ccb333","#e7d266","#f6e68d","#a7b4b4","#7f8c8b","#484d3d"],8:["#827317","#ccb333","#ccb333","#f6e68d","#d5dddd","#a7b4b4","#7f8c8b","#484d3d"],9:["#827317","#a79325","#ccb333","#e7d266","#f6e68d","#d5dddd","#a7b4b4","#7f8c8b","#484d3d"],10:["#827317","#a79325","#ccb333","#e7d266","#f6e68d","#d5dddd","#a7b4b4","#7f8c8b","#667170","#484d3d"],stops:["#827317","#ccb333","#f6e68d","#7f8c8b","#484d3d"]}},categorical:{name:"vibrant-rainbow",category:"categorical",scheme:{default:[[191,151,39,1],[96,113,0,1],[0,115,76,1],[112,68,137,1],[1,172,202,1],[2,78,118,1],[240,145,0,1],[234,49,31,1],[198,0,75,1],[117,112,179,1],[102,102,102,1],[51,51,51,1]],1:[[16,36,50,1]],2:[[16,36,50,1],[20,77,89,1]],3:[[16,36,50,1],[20,77,89,1],[255,199,48,1]],4:[[16,36,50,1],[20,77,89,1],[255,199,48,1],[237,147,16,1]],5:[[16,36,50,1],[20,77,89,1],[255,199,48,1],[237,147,16,1],[166,79,27,1]],6:[[16,36,50,1],[20,77,89,1],[255,199,48,1],[237,147,16,1],[166,79,27,1]],7:[[16,36,50,1],[20,77,89,1],[255,199,48,1],[237,147,16,1],[166,79,27,1],[102,21,16,1],[217,53,26,1]],8:[[16,36,50,1],[20,77,89,1],[255,199,48,1],[237,147,16,1],[166,79,27,1],[102,21,16,1],[217,53,26,1],[179,21,21,1]],9:[[16,36,50,1],[20,77,89,1],[255,199,48,1],[237,147,16,1],[166,79,27,1],[102,21,16,1],[217,53,26,1],[179,21,21,1],[74,9,50,1]],10:[[16,36,50,1],[20,77,89,1],[255,199,48,1],[237,147,16,1],[166,79,27,1],[102,21,16,1],[217,53,26,1],[179,21,21,1],[74,9,50,1],[140,33,63,1]],stops:[[16,36,50,1],[20,77,89,1],[255,199,48,1],[237,147,16,1],[166,79,27,1],[102,21,16,1],[217,53,26,1],[179,21,21,1],[74,9,50,1],[140,33,63,1],[24,56,46,1],[44,105,84,1]]}}},mapping:{basemap:"",baselayer:{type:y.a.vectorTileLayer,url:"https://www.arcgis.com/sharing/rest/content/items/86e885fac753433ea2e4bb1e2faa890f/resources/styles/root.json",backgroundColor:"#ebebeb"},visualization:{simple:{primary:{point:{type:"picture-marker",url:"/static/images/xg-theme-assets/light-theme/numbered-pin/color-1.svg",width:8,height:8},line:{type:"simple-line",style:"solid",color:[146,54,35],cap:"round",join:"round",width:2},polygon:{type:"simple-fill",style:"solid",color:[146,54,35,.15],outline:{color:[146,54,35],width:1}}},secondary:{point:{type:"picture-marker",url:"/static/images/xg-theme-assets/light-theme/numbered-pin/color-2.svg",width:15,height:22},line:{type:"simple-line",style:"solid",cap:"round",color:[0,0,0,.15],join:"round",width:2},polygon:{type:"simple-fill",style:"solid",color:[0,0,0,.15],outline:{color:[0,0,0],width:2}}}},proportional:{primary:{point:{type:"simple-marker",style:"circle",size:[8,75],color:[193,142,2,.45],outline:{width:1,color:[193,142,2,.65]}},line:{type:"simple-line",style:"solid",color:[193,142,2,.65],cap:"round",join:"round",width:[2,18]},polygon:{type:"simple-fill",outline:{color:[117,224,179,0],width:1},style:"solid"}},secondary:{point:{type:"simple-marker",style:"circle",color:[193,142,2,.65],size:[8,75],outline:{width:1,color:[255,255,255]}},line:{type:"simple-line",style:"solid",color:[193,142,2,.65],cap:"round",join:"round",width:[2,18]},polygon:{type:"simple-fill",outline:{color:[117,224,179,0],width:1},style:"solid"}}},choropleth:{primary:{point:{outline:{width:1,color:[153,153,153,0]},type:"simple-marker",style:"circle",size:8},line:{type:"simple-line",style:"solid",cap:"round",join:"round",width:2},polygon:{type:"simple-fill",outline:{color:"white",width:0},style:"solid"}},secondary:{point:{outline:{width:1,color:[153,153,153,0]},type:"simple-marker",style:"circle",size:8},line:{type:"simple-line",style:"solid",cap:"round",join:"round",width:2}},diverging:{polygon:{type:"simple-fill",outline:{color:[153,153,153,.6],width:0},style:"solid"}}},categorical:{primary:{point:{outline:{width:1,color:[153,153,153,.5]},type:"simple-marker",style:"circle",size:10},line:{type:"simple-line",style:"solid",cap:"round",join:"round",width:2},polygon:{type:"simple-fill",outline:{color:"white",width:0},style:"solid"}}}}}})},ndwQ:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("ukgq"),h=n("NX3A"),m=n("V+ka"),f=u.a.createElement;function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var g=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(y()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(e){return Object(i.a)(this,c),n.call(this,e)}return Object(a.a)(c,[{key:"render",value:function(){return f(d.a,{size:"standard"},f("div",{className:l.a.dynamic([["3743569024",[this.props.hasChildren?h.a.spacing.xs:"calc(".concat(h.a.spacing.xxxl," - ").concat(this.props.appOffset.top,")"),h.a.spacing.xs,h.a.print.textColor,h.a.responsiveBreakpoints.medium,this.props.hasChildren?h.a.spacing.sm:"calc(15.2rem - ".concat(this.props.appOffset.top,")"),h.a.responsiveBreakpoints.large,this.props.hasChildren?h.a.spacing.xl:"calc(18rem - ".concat(this.props.appOffset.top,")")]]])+" title-container"},this.props.children),f(l.a,{id:"3743569024",dynamic:[this.props.hasChildren?h.a.spacing.xs:"calc(".concat(h.a.spacing.xxxl," - ").concat(this.props.appOffset.top,")"),h.a.spacing.xs,h.a.print.textColor,h.a.responsiveBreakpoints.medium,this.props.hasChildren?h.a.spacing.sm:"calc(15.2rem - ".concat(this.props.appOffset.top,")"),h.a.responsiveBreakpoints.large,this.props.hasChildren?h.a.spacing.xl:"calc(18rem - ".concat(this.props.appOffset.top,")")]},[".title-container.__jsx-style-dynamic-selector{margin-top:".concat(this.props.hasChildren?h.a.spacing.xs:"calc(".concat(h.a.spacing.xxxl," - ").concat(this.props.appOffset.top,")"),";}"),"body.print .title-container.__jsx-style-dynamic-selector{margin-top:".concat(h.a.spacing.xs,";}"),"body.print .title-container.__jsx-style-dynamic-selector .sc-title,body.print .title-container.__jsx-style-dynamic-selector .sc-summary,body.print .title-container.__jsx-style-dynamic-selector .sc-viewer-byline,body.print .title-container.__jsx-style-dynamic-selector .sc-published-date{color:".concat(h.a.print.textColor,";}"),"@media (min-width:".concat(h.a.responsiveBreakpoints.medium,"){.title-container.__jsx-style-dynamic-selector{margin-top:").concat(this.props.hasChildren?h.a.spacing.sm:"calc(15.2rem - ".concat(this.props.appOffset.top,")"),";}}"),"@media (min-width:".concat(h.a.responsiveBreakpoints.large,"){.title-container.__jsx-style-dynamic-selector{margin-top:").concat(this.props.hasChildren?h.a.spacing.xl:"calc(18rem - ".concat(this.props.appOffset.top,")"),";}}")]))}}]),c}(p.PureComponent);t.a=Object(m.b)(g)},nv0H:function(e,t,n){"use strict";n.r(t),n.d(t,"BlockInserter",(function(){return ge}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("NX3A"),g=n("tSRP"),v=n("ukgq"),b=n("YQpL"),x=n("Z4N4"),O=n("A7aE"),w=h.a.createElement;function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var C=function(e){Object(c.a)(o,e);var t,n=(t=o,function(){var e,n=Object(s.a)(t);if(j()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function o(){return Object(i.a)(this,o),n.apply(this,arguments)}return Object(a.a)(o,[{key:"render",value:function(){var e="1.6rem",t="0.2rem",n=f()("cross",{inline:"inline"===this.props.mode,between:"between"===this.props.mode,"is-active":this.props.isActive,"is-awake":this.props.isAwake}),i=f()("button-container",{inline:"inline"===this.props.mode,between:"between"===this.props.mode});return w("button",{className:u.a.dynamic([["2137399601",["3.2rem","3.2rem",this.props.storyDesign.storyTheme.themeVariables.backgroundColor,y.a.color.haikuGreen,y.a.color.pearlAqua,y.a.color.haikuGreen,"2.6rem","2.6rem",x.a.hexA(y.a.color.black,.3),y.a.color.ashGrey,y.a.color.white,e,t,e,t]]])+" "+(i||"")},w("div",{title:this.props.intl.formatMessage({id:"builder.blockInserter.addContentBlock"}),className:u.a.dynamic([["2137399601",["3.2rem","3.2rem",this.props.storyDesign.storyTheme.themeVariables.backgroundColor,y.a.color.haikuGreen,y.a.color.pearlAqua,y.a.color.haikuGreen,"2.6rem","2.6rem",x.a.hexA(y.a.color.black,.3),y.a.color.ashGrey,y.a.color.white,e,t,e,t]]])+" "+(n||"")},w("span",{className:u.a.dynamic([["2137399601",["3.2rem","3.2rem",this.props.storyDesign.storyTheme.themeVariables.backgroundColor,y.a.color.haikuGreen,y.a.color.pearlAqua,y.a.color.haikuGreen,"2.6rem","2.6rem",x.a.hexA(y.a.color.black,.3),y.a.color.ashGrey,y.a.color.white,e,t,e,t]]])+" focus-overlay"}),w("span",{className:u.a.dynamic([["2137399601",["3.2rem","3.2rem",this.props.storyDesign.storyTheme.themeVariables.backgroundColor,y.a.color.haikuGreen,y.a.color.pearlAqua,y.a.color.haikuGreen,"2.6rem","2.6rem",x.a.hexA(y.a.color.black,.3),y.a.color.ashGrey,y.a.color.white,e,t,e,t]]])+" line vertical-line"}),w("span",{className:u.a.dynamic([["2137399601",["3.2rem","3.2rem",this.props.storyDesign.storyTheme.themeVariables.backgroundColor,y.a.color.haikuGreen,y.a.color.pearlAqua,y.a.color.haikuGreen,"2.6rem","2.6rem",x.a.hexA(y.a.color.black,.3),y.a.color.ashGrey,y.a.color.white,e,t,e,t]]])+" line horizontal-line"})),w(u.a,{id:"2137399601",dynamic:["3.2rem","3.2rem",this.props.storyDesign.storyTheme.themeVariables.backgroundColor,y.a.color.haikuGreen,y.a.color.pearlAqua,y.a.color.haikuGreen,"2.6rem","2.6rem",x.a.hexA(y.a.color.black,.3),y.a.color.ashGrey,y.a.color.white,e,t,e,t]},[".cross.__jsx-style-dynamic-selector{height:".concat("3.2rem",";width:").concat("3.2rem",";position:relative;z-index:0;border-radius:50%;}"),".cross.between.__jsx-style-dynamic-selector{opacity:0;}",".button-container.__jsx-style-dynamic-selector:focus .cross.between.__jsx-style-dynamic-selector,.cross.between.is-awake.__jsx-style-dynamic-selector,.cross.between.is-active.__jsx-style-dynamic-selector{opacity:1;}",".cross.is-active.__jsx-style-dynamic-selector{-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);}",".cross.between.__jsx-style-dynamic-selector{background-color:".concat(this.props.storyDesign.storyTheme.themeVariables.backgroundColor,";}"),".cross.inline.__jsx-style-dynamic-selector,.cross.is-active.__jsx-style-dynamic-selector{background-color:".concat(y.a.color.haikuGreen,";}"),".cross.__jsx-style-dynamic-selector:hover{background-color:".concat(y.a.color.pearlAqua,";}"),".button-container.__jsx-style-dynamic-selector:focus .cross.__jsx-style-dynamic-selector{background-color:".concat(y.a.color.haikuGreen,";}"),".focus-overlay.__jsx-style-dynamic-selector{display:none;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:1;width:".concat("2.6rem",";height:").concat("2.6rem",";border-radius:50%;background:").concat(x.a.hexA(y.a.color.black,.3),";}"),".button-container.__jsx-style-dynamic-selector:focus .focus-overlay.__jsx-style-dynamic-selector{display:block;}",".line.__jsx-style-dynamic-selector{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:2;}",".between.__jsx-style-dynamic-selector .line.__jsx-style-dynamic-selector{background:".concat(y.a.color.ashGrey,";}"),".inline.__jsx-style-dynamic-selector .line.__jsx-style-dynamic-selector,.cross.is-active.__jsx-style-dynamic-selector .line.__jsx-style-dynamic-selector,.cross.__jsx-style-dynamic-selector:hover .line.__jsx-style-dynamic-selector,.button-container.__jsx-style-dynamic-selector:focus .line.__jsx-style-dynamic-selector{background:".concat(y.a.color.white,";}"),".horizontal-line.__jsx-style-dynamic-selector{width:".concat(e,";height:").concat(t,";}"),".vertical-line.__jsx-style-dynamic-selector{height:".concat(e,";width:").concat(t,";}")]))}}]),o}(d.PureComponent);Object(l.a)(C,"defaultProps",{isAwake:!0});var k=Object(O.b)(Object(b.c)(C)),S=n("VtSi"),I=n.n(S),P=n("LqVs"),R=n("Z34l"),E=n("7sDT"),D=n("XEYk"),T=n("txt0"),M=h.a.createElement;function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var N=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(A()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"onItemClick",(function(){e.props.item.onClick(),e.props.onItemSelected(),e.trackInsertion()})),Object(l.a)(Object(o.a)(e),"trackInsertion",(function(){switch(e.props.item.id){case"button":T.a.trackEvent(T.a.Category.Builder,T.a.Action.Builder_InsertButton,T.a.Name.Builder_Common_BlockPalette);break;case"slideshow":T.a.trackEvent(T.a.Category.Builder,T.a.Action.Builder_InsertSlideshow,T.a.Name.Builder_Common_BlockPalette);break;case"action-button":T.a.trackEvent(T.a.Category.Builder,T.a.Action.Builder_InsertMapAction,T.a.Name.Builder_Common_BlockPalette)}})),e}return Object(a.a)(p,[{key:"render",value:function(){return M(D.a,{item:this.props.item,onItemClick:this.onItemClick,isDisabled:this.props.isDisabled,disabledTooltipStr:this.props.disabledTooltipStr})}}]),p}(d.PureComponent),L=n("q94Z"),G=n("C5oz"),_=n("Y1ga"),B=n("JmSK"),W=n("nE7Y"),V=n("Xls9"),F=n("mUgm"),U=h.a.createElement;function z(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var H=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(z()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"onLayoutSelected",(function(e){t.props.item.onClick({blockData:{type:"tour",data:{type:"guided-tour",subtype:e,narrativePanelPosition:"start",map:"",places:[]},config:{},children:[]}}),T.a.trackEvent(T.a.Category.Builder,T.a.Action.Builder_InsertGuidedTour,T.a.Name.Builder_Common_BlockPalette),t.props.onItemSelected(B.d.GuidedTour),t.setState({isLayoutModalShowing:!1})})),Object(l.a)(Object(o.a)(t),"onItemClick",(function(){t.props.onItemExpanded(B.d.GuidedTour)})),Object(l.a)(Object(o.a)(t),"onLayoutModalCancel",(function(){t.props.onItemCollapsed(B.d.GuidedTour)})),Object(l.a)(Object(o.a)(t),"onOnboardingModalClosed",(function(){t.setState({isOnboardingModalShowing:!1}),Object(V.g)("guided-tour")})),Object(l.a)(Object(o.a)(t),"canShowOnboardingModal",(function(){var e=!!document&&Object(V.d)("guided-tour");return t.props.isExpanded&&!e})),t.state={isOnboardingModalShowing:t.canShowOnboardingModal(),isLayoutModalShowing:t.props.isExpanded},t}return Object(a.a)(p,[{key:"componentDidUpdate",value:function(e){this.props.isExpanded!==e.isExpanded&&this.setState({isOnboardingModalShowing:this.canShowOnboardingModal(),isLayoutModalShowing:this.props.isExpanded})}},{key:"render",value:function(){return U(d.Fragment,null,U(D.a,{item:this.props.item,onItemClick:this.onItemClick}),U(W.a,{isShowing:this.state.isLayoutModalShowing,onCloseClicked:this.onLayoutModalCancel,onLayoutSelected:this.onLayoutSelected}),U(F.a,{onCloseButtonClick:this.onOnboardingModalClosed,isShowingModal:this.state.isOnboardingModalShowing,immersiveType:"guided-tour"}))}}]),p}(d.Component),Y=Object(b.c)(H),K=n("GTld"),X=h.a.createElement;function J(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Z=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(J()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"onLayoutSelected",(function(e){t.props.item.onClick({blockData:{type:"immersive",data:{type:"sidecar",subtype:e,narrativePanelPosition:"start"}}}),T.a.trackEvent(T.a.Category.Builder,T.a.Action.Builder_InsertSideCar,"docked-panel"===e?T.a.Name.Builder_Sidecar_Layout_DockedPanel:T.a.Name.Builder_Sidecar_Layout_FloatingPanel),t.props.onItemSelected(B.d.Sidecar),t.setState({isLayoutModalShowing:!1})})),Object(l.a)(Object(o.a)(t),"onItemClick",(function(){t.props.onItemExpanded(B.d.Sidecar)})),Object(l.a)(Object(o.a)(t),"onLayoutModalCancel",(function(){t.props.onItemCollapsed(B.d.Sidecar)})),Object(l.a)(Object(o.a)(t),"onOnboardingModalClosed",(function(){t.setState({isOnboardingModalShowing:!1}),Object(V.g)("sidecar")})),Object(l.a)(Object(o.a)(t),"canShowOnboardingModal",(function(){var e=!!document&&Object(V.d)("sidecar");return t.props.isExpanded&&!e})),t.state={isOnboardingModalShowing:t.canShowOnboardingModal(),isLayoutModalShowing:t.props.isExpanded},t}return Object(a.a)(p,[{key:"componentDidUpdate",value:function(e){this.props.isExpanded!==e.isExpanded&&this.setState({isOnboardingModalShowing:this.canShowOnboardingModal(),isLayoutModalShowing:this.props.isExpanded})}},{key:"render",value:function(){return X(d.Fragment,null,X(D.a,{item:this.props.item,onItemClick:this.onItemClick}),X(K.a,{isShowing:this.state.isLayoutModalShowing,onCloseClicked:this.onLayoutModalCancel,onLayoutSelected:this.onLayoutSelected}),X(F.a,{onCloseButtonClick:this.onOnboardingModalClosed,isShowingModal:this.state.isOnboardingModalShowing,immersiveType:"sidecar"}))}}]),p}(d.Component),q=Object(b.c)(Z),Q=n("+L/X"),$=h.a.createElement;function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function te(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ne=Object(d.lazy)((function(){return n.e(130).then(n.bind(null,"1MX3"))})),ie=Object(d.lazy)((function(){return n.e(129).then(n.bind(null,"RlMP"))})),ae=Object(d.lazy)((function(){return n.e(128).then(n.bind(null,"Pnb9"))})),oe=function(e){Object(c.a)(o,e);var t,n=(t=o,function(){var e,n=Object(s.a)(t);if(te()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function o(e){var t;return Object(i.a)(this,o),(t=n.call(this,e)).state={isPublicUser:!1},t}return Object(a.a)(o,[{key:"componentDidMount",value:function(){var e;return I.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.props.userSession){t.next=5;break}return t.next=3,I.a.awrap(Object(R.i)(this.props.userSession));case 3:e=t.sent,this.setState({isPublicUser:e});case 5:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"render",value:function(){var e=this,t=this.props.items.map((function(t){if(t.type===B.d.Image){var n=e.props.intl.formatMessage({id:"builder.addMediaModal.titleImage"});return $(L.a,{key:t.id,onItemSelected:e.props.onItemSelected,item:t,isExpanded:e.props.pendingItem===B.d.Image,onItemExpanded:e.props.onItemExpanded,onItemCollapsed:e.props.onItemCollapsed,mediaTitle:n,source:"block-pallete"})}if(t.type===B.d.Video){var i=e.props.intl.formatMessage({id:"builder.addMediaModal.titleVideo"});return $(L.a,{key:t.id,onItemSelected:e.props.onItemSelected,item:t,isExpanded:e.props.pendingItem===B.d.Video,onItemExpanded:e.props.onItemExpanded,onItemCollapsed:e.props.onItemCollapsed,mediaTitle:i,source:"block-pallete"})}if(t.type===B.d.Audio){var a,o;e.state.isPublicUser&&(a=!0,o=e.props.intl.formatMessage({id:"publicAccount.disabled"}));var r=e.props.intl.formatMessage({id:"builder.addMediaModal.titleAudio"});return $(L.a,{key:t.id,onItemSelected:e.props.onItemSelected,item:t,isExpanded:e.props.pendingItem===B.d.Audio,onItemExpanded:e.props.onItemExpanded,onItemCollapsed:e.props.onItemCollapsed,mediaTitle:r,source:"block-pallete",isDisabled:a,disabledTooltipStr:o})}if(t.type===B.d.Embed){var s,c,p=e.props.storyItem.storyMapUserPrivileges.canEmbedWebContent;return"video"===t.id||p||(s=!0,c=e.props.intl.formatMessage({id:"publicAccount.disabled"})),$(G.a,{key:t.id,onItemSelected:e.props.onItemSelected,item:t,isExpanded:e.props.pendingItem===B.d.Embed,onItemExpanded:e.props.onItemExpanded,onItemCollapsed:e.props.onItemCollapsed,isDisabled:s,disabledTooltipStr:c})}if(t.type===B.d.Map)return $(_.a,{key:t.id,onItemSelected:e.props.onItemSelected,item:t,isExpanded:e.props.pendingItem===B.d.Map,onItemExpanded:e.props.onItemExpanded,onItemCollapsed:e.props.onItemCollapsed});if("immersive"===t.type&&t.id===B.d.Sidecar)return $(q,{key:t.id,onItemSelected:e.props.onItemSelected,item:t,isExpanded:e.props.pendingItem===B.d.Sidecar,onItemExpanded:e.props.onItemExpanded,onItemCollapsed:e.props.onItemCollapsed});if(t.type===B.d.GuidedTour)return $(Y,{key:t.id,onItemSelected:e.props.onItemSelected,item:t,isExpanded:e.props.pendingItem===B.d.GuidedTour,onItemExpanded:e.props.onItemExpanded,onItemCollapsed:e.props.onItemCollapsed});if(t.type===B.d.Template)return $(d.Suspense,{fallback:$(D.a,{item:t,isDisabled:!0}),key:t.id},$(ne,{onItemSelected:e.props.onItemSelected,item:t,isExpanded:e.props.pendingItem===B.d.Template,onItemExpanded:e.props.onItemExpanded,onItemCollapsed:e.props.onItemCollapsed}));if(t.type===B.d.Globe)return $(d.Suspense,{fallback:$(D.a,{item:t,isDisabled:!0}),key:t.id},$(ie,{onItemSelected:e.props.onItemSelected,item:t,isExpanded:e.props.pendingItem===B.d.Globe,onItemExpanded:e.props.onItemExpanded,onItemCollapsed:e.props.onItemCollapsed}));if(t.type===B.d.ImageEditor)return $(d.Suspense,{fallback:$(D.a,{item:t,isDisabled:!0}),key:t.id});if(t.type===B.d.ExpressMapping)return $(d.Suspense,{fallback:$(D.a,{item:t,isDisabled:!0}),key:t.id},$(ae,{onItemSelected:e.props.onItemSelected,item:t,isExpanded:e.props.pendingItem===B.d.ExpressMapping,onItemExpanded:e.props.onItemExpanded,onItemCollapsed:e.props.onItemCollapsed}));var u,h=t;return"action-button"===t.id&&e.state.isPublicUser&&(u=e.props.intl.formatMessage({id:"publicAccount.disabled"}),h=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h,{isDisabled:!0})),$(N,{key:h.id,onItemSelected:e.props.onItemSelected,item:h,isDisabled:h.isDisabled,disabledTooltipStr:u})}));return $("div",{className:u.a.dynamic([["273619969",[y.a.spacing.xxxs]]])+" block-palette-section"},$("div",{className:u.a.dynamic([["273619969",[y.a.spacing.xxxs]]])+" grid-content"},t),$(u.a,{id:"273619969",dynamic:[y.a.spacing.xxxs]},[".grid-content.__jsx-style-dynamic-selector{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:1.2rem 0;grid-column-gap:".concat(y.a.spacing.xxxs,";}")]))}}]),o}(d.PureComponent),re=Object(E.c)(Object(b.c)(Object(P.b)(Object(Q.b)(oe)))),se=n("Y/5s"),ce=h.a.createElement;function le(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var pe=function(e){Object(c.a)(o,e);var t,n=(t=o,function(){var e,n=Object(s.a)(t);if(le()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function o(e){return Object(i.a)(this,o),n.call(this,e)}return Object(a.a)(o,[{key:"render",value:function(){var e=this;if(!this.props.items)return null;for(var t=[],n=[],i=0;i<this.props.items.length;i++){var a=this.props.items[i];"string"===typeof a?(t.push(n),n=[]):(n.push(a),i===this.props.items.length-1&&t.push(n))}var o=t.map((function(t){return ce(d.Fragment,{key:t.reduce((function(e,t){return e+t.id}),"")},ce(re,{onItemSelected:e.props.onItemSelected,items:t,pendingItem:e.props.pendingItem,onItemExpanded:e.props.onItemExpanded,onItemCollapsed:e.props.onItemCollapsed}),ce("span",{className:u.a.dynamic([["1318702986",[y.a.color.antiFlashWhite]]])+" divider"}),ce(u.a,{id:"1318702986",dynamic:[y.a.color.antiFlashWhite]},[".divider.__jsx-style-dynamic-selector{border-top:1px solid ".concat(y.a.color.antiFlashWhite,";height:0;display:block;margin:0 1.5rem;}")]))}));return ce("div",{className:u.a.dynamic([["1789663761",[y.a.color.white,x.a.shadow.sm()]]])+" menu"},o,ce(u.a,{id:"1789663761",dynamic:[y.a.color.white,x.a.shadow.sm()]},[".menu.__jsx-style-dynamic-selector{width:38rem;padding:0 1.5rem;display:inline-block;background-color:".concat(y.a.color.white,";").concat(x.a.shadow.sm(),"  pointer-events:auto;}")]))}}]),o}(d.PureComponent),ue=Object(se.d)(pe),de=h.a.createElement;function he(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var me=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(he()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"onClick",(function(t){"function"===typeof e.props.onClick&&(t.stopPropagation(),e.props.onClick())})),e}return Object(a.a)(p,[{key:"render",value:function(){return de("div",{role:"button",onClick:this.onClick,className:u.a.dynamic([["1092160615",[this.props.height,this.props.height,this.props.height]]])+" "+(f()("between-line",{"offset-top":"top"===this.props.offsetDirection,"offset-bottom":"bottom"===this.props.offsetDirection})||"")},de(u.a,{id:"1092160615",dynamic:[this.props.height,this.props.height,this.props.height]},[".between-line.__jsx-style-dynamic-selector{height:".concat(this.props.height,";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex:1 1 100%;-ms-flex:1 1 100%;flex:1 1 100%;cursor:text;}"),".between-line.offset-bottom.__jsx-style-dynamic-selector{margin:0 0 -".concat(this.props.height,";}"),".between-line.offset-top.__jsx-style-dynamic-selector{margin:-".concat(this.props.height," 0 0;}")]))}}]),p}(d.PureComponent),fe=h.a.createElement;function ye(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ge=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(ye()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"state",{isDropdownShowing:!1,pendingItem:null,isRegionHovered:!1}),Object(l.a)(Object(o.a)(e),"blockPaletteElement",Object(d.createRef)()),Object(l.a)(Object(o.a)(e),"handleDropdownHidden",(function(){e.setState({isDropdownShowing:!1})})),Object(l.a)(Object(o.a)(e),"handleDropdownShown",(function(){e.setState({isDropdownShowing:!0})})),Object(l.a)(Object(o.a)(e),"renderPopper",(function(){return fe("div",{ref:e.blockPaletteElement,className:"block-palette-container"},fe(ue,{items:e.props.items,onItemSelected:e.onItemSelected,pendingItem:e.state.pendingItem,onItemExpanded:e.onItemExpanded,onItemCollapsed:e.onItemCollapsed}))})),Object(l.a)(Object(o.a)(e),"onItemSelected",(function(t){t&&e.onItemCollapsed(t)})),Object(l.a)(Object(o.a)(e),"onItemCollapsed",(function(t){t===e.state.pendingItem&&e.setState({pendingItem:null})})),Object(l.a)(Object(o.a)(e),"onItemExpanded",(function(t){e.setState({pendingItem:t})})),Object(l.a)(Object(o.a)(e),"addHover",(function(){e.setState({isRegionHovered:!0})})),Object(l.a)(Object(o.a)(e),"removeHover",(function(){e.setState({isRegionHovered:!1})})),Object(l.a)(Object(o.a)(e),"shouldBetweenInserterShow",(function(){if("inline"!==e.props.mode)return"undefined"!==typeof e.props.canShowBetween&&(e.props.canShowBetween()&&(e.props.showFromExternal||e.state.isRegionHovered))})),Object(l.a)(Object(o.a)(e),"shouldBetweenInserterBeDisabled",(function(){return"inline"!==e.props.mode&&"undefined"!==typeof e.props.canShowBetween&&!e.props.canShowBetween()})),e}return Object(a.a)(p,[{key:"render",value:function(){var e=this.state.isDropdownShowing?9:2,t="4.4rem",n=this.props.isPreInserter?y.a.spacing.sm:y.a.spacing.xxl,i=y.a.spacing.xxs,a=this.shouldBetweenInserterBeDisabled()&&this.props.isPreInserter,o=this.shouldBetweenInserterBeDisabled()&&!this.props.isPreInserter,r=fe(g.a,{target:fe("div",{className:u.a.dynamic([["1595299910",[o&&"between"===this.props.mode?"hidden":"visible"]]])+" target-container"},fe(k,{isActive:this.state.isDropdownShowing,mode:this.props.mode,isAwake:this.shouldBetweenInserterShow()}),fe(u.a,{id:"1595299910",dynamic:[o&&"between"===this.props.mode?"hidden":"visible"]},[".target-container.__jsx-style-dynamic-selector{visibility:".concat(o&&"between"===this.props.mode?"hidden":"visible",";display:inline-block;}")])),popper:this.renderPopper(),placement:"right-start",onHidden:this.handleDropdownHidden,onShown:this.handleDropdownShown,arrow:!0,appendTo:document.body,zIndex:98}),s=fe("div",{onMouseEnter:this.addHover,onMouseLeave:this.removeHover,className:u.a.dynamic([["1907781731",[e,t,t,t,e,i,i,t,t]]])+" "+(f()("block-inserter",{inline:"inline"===this.props.mode,between:"between"===this.props.mode,pre:this.props.isPreInserter,"pre-disabled":a})||"")},fe("div",{className:u.a.dynamic([["1907781731",[e,t,t,t,e,i,i,t,t]]])+" button-wrapper"},"between"===this.props.mode?fe("div",{className:u.a.dynamic([["1907781731",[e,t,t,t,e,i,i,t,t]]])+" between-button-container"},r):r),fe(u.a,{id:"1907781731",dynamic:[e,t,t,t,e,i,i,t,t]},[".block-inserter.__jsx-style-dynamic-selector{line-height:0;}",".block-inserter.between.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".block-inserter.pre-disabled.__jsx-style-dynamic-selector{visibility:hidden;}",".block-inserter.inline.__jsx-style-dynamic-selector{position:absolute;z-index:".concat(e,";top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);}"),"html:not([dir='rtl']) .block-inserter.inline.__jsx-style-dynamic-selector{left:-".concat(t,";}"),"html[dir='rtl'] .block-inserter.inline.__jsx-style-dynamic-selector{right:-".concat(t,";}"),".between.__jsx-style-dynamic-selector .button-wrapper.__jsx-style-dynamic-selector{height:0;width:0;}",".between-button-container.__jsx-style-dynamic-selector{position:relative;width:".concat(t,";z-index:").concat(e,";-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);}"),".between.__jsx-style-dynamic-selector:not(.pre) .between-button-container.__jsx-style-dynamic-selector{top:".concat(i,";}"),".between.pre.__jsx-style-dynamic-selector .between-button-container.__jsx-style-dynamic-selector{top:-".concat(i,";}"),"html:not([dir='rtl']) .between-button-container.__jsx-style-dynamic-selector{left:-".concat(t,";}"),"html[dir='rtl'] .between-button-container.__jsx-style-dynamic-selector{right:-".concat(t,";}"),".user-is-dragging .block-inserter.__jsx-style-dynamic-selector{visibility:hidden;}"]));return fe(h.a.Fragment,null,this.props.hasLayout&&this.props.layoutSize?fe(v.a,{size:this.props.layoutSize},s):s,"between"===this.props.mode&&fe(me,{height:n,offsetDirection:this.props.isPreInserter?"top":"bottom",onClick:this.props.onBetweenSpaceClick}))}}]),p}(d.PureComponent);Object(l.a)(ge,"defaultProps",{mode:"inline",isPreInserter:!1});t.default=ge},o8Z9:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"redo",path:"M7.5 24H25v3H7.5A4.505 4.505 0 0 1 3 22.5v-9A4.505 4.505 0 0 1 7.5 9h15.457L18.8 4.843l2.122-2.121L28.7 10.5l-7.778 7.778-2.122-2.121L22.957 12H7.5A1.502 1.502 0 0 0 6 13.5v9A1.502 1.502 0 0 0 7.5 24z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},oGlf:function(e,t,n){"use strict";var i,a;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"g",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"h",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return h})),function(e){e.SOURCE_OVER="source-over",e.SOURCE_IN="source-in",e.SOURCE_OUT="source-out",e.SOURCE_ATOP="source-atop",e.COPY="copy",e.DESTAINATION_OVER="destination-over",e.DESTAINATION_IN="destination-in",e.DESTAINATION_OUT="destination-out",e.DESTAINATION_ATOP="destination-atop",e.LIGHTER="lighter",e.MULTIPLY="multiply",e.SCREEN="screen",e.OVERLAY="overlay",e.DARKEN="darken",e.LIGHTEN="lighten",e.COLOR_DODGE="color-dodge",e.COLOR_BURN="color-burn",e.HARD_LIGHT="hard-light",e.SOFT_LIGHT="soft-light",e.DIFFERENCE="difference",e.EXCLUSION="exclusion",e.HUE="hue",e.SATURATION="saturation",e.COLOR="color",e.LUMINOSITY="luminosity"}(i||(i={})),function(e){e.aqua="#00ffff",e.azure="#f0ffff",e.beige="#f5f5dc",e.black="#000000",e.blue="#0000ff",e.brown="#a52a2a",e.cyan="#00ffff",e.darkblue="#00008b",e.darkcyan="#008b8b",e.darkgrey="#a9a9a9",e.darkgreen="#006400",e.darkkhaki="#bdb76b",e.darkmagenta="#8b008b",e.darkolivegreen="#556b2f",e.darkorange="#ff8c00",e.darkorchid="#9932cc",e.darkred="#8b0000",e.darksalmon="#e9967a",e.darkviolet="#9400d3",e.fuchsia="#ff00ff",e.gold="#ffd700",e.green="#008000",e.indigo="#4b0082",e.khaki="#f0e68c",e.lightblue="#add8e6",e.lightcyan="#e0ffff",e.lightgreen="#90ee90",e.lightgrey="#d3d3d3",e.lightpink="#ffb6c1",e.lightyellow="#ffffe0",e.lime="#00ff00",e.magenta="#ff00ff",e.maroon="#800000",e.navy="#000080",e.olive="#808000",e.orange="#ffa500",e.pink="#ffc0cb",e.purple="#800080",e.vioconst="#800080",e.red="#ff0000",e.silver="#c0c0c0",e.white="#ffffff",e.yellow="#ffff00"}(a||(a={}));var o=function(){return"rgb(".concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),")")},r=function(e,t,n){return"#"+[Math.round(e),Math.round(t),Math.round(n)].map((function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})).join("")},s=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n=n||"1.0",e=e.replace("#","");var a=parseInt(e.substring(0,2),16),o=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16);if(i){var s=.58*a+.17*o+.8*r;t="rgba("+s+","+s+","+s+","+n+")"}else t="rgba("+a+","+o+","+r+","+n+")";return t},c=function(e,t){var n=e.split(",");return n[0]+","+n[1]+","+n[2]+","+t+")"},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=e.replace("#","");var i=parseInt(e.substring(0,2),16),a=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16);if(n){var r=.58*i+.17*a+.8*o;return[r,r,r,t]}return[i,a,o,t]},p=function(e,t,n){e/=255,t/=255,n/=255;var i=Math.max(e,t,n),a=Math.min(e,t,n),o=(i+a)/2,r=(i+a)/2,s=(i+a)/2;if(i===a)o=r=0;else{var c=i-a;switch(r=s>.5?c/(2-i-a):c/(i+a),i){case e:o=(t-n)/c+(t<n?6:0);break;case t:o=(n-e)/c+2;break;case n:o=(e-t)/c+4}o/=6}return[o,r,s]},u=function(e,t,n){var i,a,o;if(0===t)i=a=o=n;else{var r=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},s=n<.5?n*(1+t):n+t-n*t,c=2*n-s;i=r(c,s,e+1/3),a=r(c,s,e),o=r(c,s,e-1/3)}return[Math.max(0,Math.min(Math.round(255*i),255)),Math.max(0,Math.min(Math.round(255*a),255)),Math.max(0,Math.min(Math.round(255*o),255))]},d=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,i=[],a=0;a<e.length;++a){var o=e[a]+(t[a]-e[a])*n;i.push(o)}return i},h=function(e,t,n,i){var a=p(e[0],e[1],e[2]);a[0]+=t,a[1]+=n,a[1]<0&&(a[1]=0),a[2]+=i;var o=u(a[0],a[1],a[2]);return[o[0],o[1],o[2],e[3]]}},"op+c":function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("ERkP"));t.HeadManagerContext=a.createContext(null)},"ow/k":function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return m}));var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("ERkP"),p=n.n(l),u=p.a.createElement;function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var h=p.a.createContext(""),m=function(e){return function(t){Object(c.a)(p,t);var n,l=(n=p,function(){var e,t=Object(s.a)(n);if(d()){var i=Object(s.a)(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Object(r.a)(this,e)});function p(){return Object(a.a)(this,p),l.apply(this,arguments)}return Object(o.a)(p,[{key:"render",value:function(){var t=this;return u(h.Consumer,null,(function(n){return u(e,Object(i.a)({},t.props,{immersiveType:n}))}))}}]),p}(l.PureComponent)}},"p/3C":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("Bx5b"),a=n("Z34l"),o=n("amyi"),r=n("KDNM"),s=n("JmSK"),c=function(e){var t=!(!e.userSession||e.userSession.username!==e.item.owner),n=Object(a.c)(e.portalHost,e.userSession);return e.item.type===o.PortalItemTypes.Dashboard?{href:"".concat(n,"/apps/opsdashboard/index.html#/").concat(e.item.id),asPath:""}:e.item.type===o.PortalItemTypes.WebExperience?e.isPortal?{href:"".concat(n,"/apps/experiencebuilder/experience/?id=").concat(e.item.id),asPath:""}:{href:"https://experience".concat(Object(r.c)(e.portalHost),".arcgis.com/experience/").concat(e.item.id),asPath:""}:e.item.type===o.PortalItemTypes.InsightsPage?e.isPortal?{href:"".concat(n,"/apps/insights/#/embed/").concat(e.item.id),asPath:""}:{href:"https://insights".concat(Object(r.c)(e.portalHost),".arcgis.com/#/embed/").concat(e.item.id),asPath:""}:e.item.type!==o.PortalItemTypes.StoryMap&&e.item.url?{href:e.item.url.replace("http://","https://"),asPath:""}:e.item.type===o.PortalItemTypes.Image||e.item.type===o.PortalItemTypes.PDF?{href:"".concat(n,"/sharing/rest/content/items/").concat(e.item.id,"/data"),asPath:""}:function(e,t,n,a){var o=e.typeKeywords,r="small"===t||"medium"===t,c=!!(o&&o.length&&o.indexOf(i.b)>=0),l=!!(o&&o.length&&o.indexOf(s.c.draft)>=0);c&&!l&&(o&&o.length&&(o.indexOf(s.c.published)>=0||o.indexOf(s.c.unpublishedChanges)>=0)?l=!1:"private"===e.access&&(l=!0));var p=function(e){var t=e.isMobile,n=e.isDraft,i=e.isOwner,a=e.isCollection;return t?n&&!a?"preview":"view":n&&i?"edit":"view"}({isDraft:l,isMobile:r,isOwner:n,isCollection:c});return function(e){var t=e.itemType,n=e.actionType,i=e.itemId,a=e.basePath,o="view"===n?"":"/".concat(n);return{href:"/".concat(t,"/").concat(n,"?id=").concat(i),asPath:"".concat(a,"/").concat(t,"/").concat(i).concat(o)}}({itemType:c?"collections":"stories",itemId:e.id,actionType:p,basePath:a})}(e.item,e.screenWidth,t,e.baseUrl)}},p1W6:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("O94r"),c=n.n(s),l=n("NX3A"),p=n("Y/5s"),u=n("A7aE"),d=r.a.createElement;t.a=Object(p.d)(Object(u.b)((function(e){return d("li",{className:a.a.dynamic([["4011282284",[l.a.font.size.extraExtraSmall,l.a.font.size.extraExtraSmall,"dark"===e.theme.id?l.a.color.auroMetalSaurus:l.a.color.ashGrey,l.a.color.ashGrey,"dark"===e.theme.id?l.a.color.ashGrey:l.a.color.auroMetalSaurus,l.a.color.white,e.storyDesign.storyTheme.themeVariables.accentColor1,l.a.color.white]]])+" "+(c()("nav-dot",{selected:e.isSelected})||"")},d("button",{onClick:e.onClick,"aria-label":e.ariaLabel,className:a.a.dynamic([["4011282284",[l.a.font.size.extraExtraSmall,l.a.font.size.extraExtraSmall,"dark"===e.theme.id?l.a.color.auroMetalSaurus:l.a.color.ashGrey,l.a.color.ashGrey,"dark"===e.theme.id?l.a.color.ashGrey:l.a.color.auroMetalSaurus,l.a.color.white,e.storyDesign.storyTheme.themeVariables.accentColor1,l.a.color.white]]])+" "+(c()("dot-button",{integrated:e.isIntegrated})||"")}),d(a.a,{id:"4011282284",dynamic:[l.a.font.size.extraExtraSmall,l.a.font.size.extraExtraSmall,"dark"===e.theme.id?l.a.color.auroMetalSaurus:l.a.color.ashGrey,l.a.color.ashGrey,"dark"===e.theme.id?l.a.color.ashGrey:l.a.color.auroMetalSaurus,l.a.color.white,e.storyDesign.storyTheme.themeVariables.accentColor1,l.a.color.white]},[".nav-dot.__jsx-style-dynamic-selector{pointer-events:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".dot-button.__jsx-style-dynamic-selector{height:".concat(l.a.font.size.extraExtraSmall,";width:").concat(l.a.font.size.extraExtraSmall,";border-radius:50%;}"),".dot-button.integrated.__jsx-style-dynamic-selector{background-color:".concat("dark"===e.theme.id?l.a.color.auroMetalSaurus:l.a.color.ashGrey,";}"),".dot-button.__jsx-style-dynamic-selector:not(.integrated){background-color:".concat(l.a.color.ashGrey,";border:1px solid transparent;}"),"body:not(.user-is-tabbing) .dot-button.__jsx-style-dynamic-selector:focus{outline:none;}",".dot-button.integrated.__jsx-style-dynamic-selector:hover{background-color:".concat("dark"===e.theme.id?l.a.color.ashGrey:l.a.color.auroMetalSaurus,";}"),".dot-button.__jsx-style-dynamic-selector:not(.integrated):hover{border-color:".concat(l.a.color.white,";}"),".nav-dot.selected.__jsx-style-dynamic-selector .dot-button.integrated.__jsx-style-dynamic-selector{background-color:".concat(e.storyDesign.storyTheme.themeVariables.accentColor1,";}"),".nav-dot.selected.__jsx-style-dynamic-selector .dot-button.__jsx-style-dynamic-selector:not(.integrated){background-color:".concat(l.a.color.white,";}")]))})))},pcrg:function(e,t,n){"use strict";n.r(t),n.d(t,"ImageViewer",(function(){return E}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("YQpL"),f=n("O94r"),y=n.n(f),g=n("liFR"),v=n("+tpQ"),b=n("NX3A"),x=n("+L/X"),O=n("A7aE"),w=n("gZeU"),j=n("u0WM"),C=n("7/Cc"),k=n("Qv2g"),S=n("oK9Z"),I=n("ZaeZ"),P=h.a.createElement;function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var E=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(R()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"onImageLoad",(function(){t.setState({imageLoaded:!0})})),Object(l.a)(Object(o.a)(t),"checkForResourceId",(function(e){if(t.props.resourceId&&t.props.resourceId.length&&(t.props.resourceId!==t.state.resourceId||e)){var n=Object(I.b)({fileName:t.props.resourceId,windowWidth:t.props.shouldUseWindowWidth?window.innerWidth:t.props.windowWidth,imageNodeWidth:t.imgRef.current?t.imgRef.current.offsetWidth:void 0,imageNodeHeight:t.imgRef.current?t.imgRef.current.offsetHeight:void 0,aspectRatio:t.props.width&&t.props.height?t.props.width/t.props.height:void 0,isCropped:t.props.isCropped}),i=t.props.storyItem.getItemResourceImageFullUrl(t.props.resourceId,n);t.setState({src:i,resourceId:t.props.resourceId})}else t.props.src&&t.props.src.length&&!t.props.resourceId&&t.setState({src:t.props.src})})),Object(l.a)(Object(o.a)(t),"getFitColor",(function(){return t.props.storyDesign.storyTheme.themeVariables[t.props.mediaPlacement.fit.color]||t.props.mediaPlacement.fit.color})),Object(l.a)(Object(o.a)(t),"renderPlaceholderOpenButton",(function(){return P(k.a,null,P(g.a,{tooltipContent:t.props.intl.formatMessage({id:"builder.embed.inlineEmbed.openWebsite"}),placement:"left"},P(S.a,{link:{href:t.props.openInNewTabUrl,openInNewPage:!0},"aria-label":t.props.intl.formatMessage({id:"builder.embed.inlineEmbed.openWebsite"}),onClick:t.stopClick},P(v.a,{width:b.a.spacing.xxs,height:"auto"}))))})),Object(l.a)(Object(o.a)(t),"stopClick",(function(e){e.stopPropagation&&e.stopPropagation()})),t.imgRef=h.a.createRef(),t.state={imageLoaded:!1},t}return Object(a.a)(p,[{key:"componentDidMount",value:function(){this.checkForResourceId(),"function"===typeof this.props.observe&&this.imgRef.current&&this.props.observe(this.imgRef.current)}},{key:"componentDidUpdate",value:function(e){(e.resourceId!==this.props.resourceId||!e.isPartOfFullScreen&&this.props.isPartOfFullScreen)&&this.checkForResourceId(e.isPartOfFullScreen!==this.props.isPartOfFullScreen)}},{key:"render",value:function(){return P(d.Fragment,null,this.renderImage())}},{key:"renderImage",value:function(){var e="fit"===this.props.mediaPlacement.type&&this.props.mediaPlacement.fit?this.getFitColor():void 0,t=Object(C.c)(this.props.mediaPlacement.fill.x),n=Object(C.c)(this.props.mediaPlacement.fill.y),i=this.props.showCaption?this.props.mediaWrapperCaption||P(j.a,{text:this.props.caption,alignmentLg:this.props.captionAlignmentLg,customCaptionColors:this.props.customCaptionColors}):void 0,a=0;return!this.props.fillParent&&this.props.height&&this.props.width&&(a=this.props.width/this.props.height),this.props.printMode&&this.props.fillParent&&(a=b.a.print.aspectRatioStandard),P(w.a,{aspectRatio:a,mediaLoaded:this.state.imageLoaded,caption:i,fillParent:this.props.fillParent,isCompact:this.props.isCompact,widthLimit:this.props.width,widthConstrained:!0,isFullScreen:this.props.isFullScreen,onToggleFullScreen:this.props.onToggleFullScreen,printMode:this.props.printMode,isExpandableMedia:this.props.isExpandableMedia,fullWidth:this.props.width,fullHeight:this.props.height,captionText:this.props.caption,customCaptionColors:this.props.customCaptionColors},P("div",{ref:this.imgRef,"data-blockid":this.props.blockId,className:u.a.dynamic([["1647059365",[e,"".concat(t," ").concat(n),b.a.print.pageHeightLetter,this.props.resourceId&&this.props.resourceId.indexOf(".png")>=0?"background-color: ".concat(this.props.storyDesign.storyTheme.themeVariables.backgroundColor,";"):""]]])+" "+(y()("image-container",{"fill-parent":this.props.fillParent})||"")},this.props.showOpenInNewTabButton&&this.props.openInNewTabUrl&&this.renderPlaceholderOpenButton(),P("img",{src:this.props.isIntersecting?this.state.src:"",alt:this.props.alt,"aria-label":this.props.alt,onLoad:this.onImageLoad,className:u.a.dynamic([["1647059365",[e,"".concat(t," ").concat(n),b.a.print.pageHeightLetter,this.props.resourceId&&this.props.resourceId.indexOf(".png")>=0?"background-color: ".concat(this.props.storyDesign.storyTheme.themeVariables.backgroundColor,";"):""]]])+" "+(y()("image",{"is-cropped":this.props.isCropped,"is-fit":"fit"===this.props.mediaPlacement.type})||"")})),P(u.a,{id:"1647059365",dynamic:[e,"".concat(t," ").concat(n),b.a.print.pageHeightLetter,this.props.resourceId&&this.props.resourceId.indexOf(".png")>=0?"background-color: ".concat(this.props.storyDesign.storyTheme.themeVariables.backgroundColor,";"):""]},[".image-container.__jsx-style-dynamic-selector{text-align:center;}",".image-container.fill-parent.__jsx-style-dynamic-selector{height:100%;width:100%;}",".image.__jsx-style-dynamic-selector{height:100%;width:100%;}",".image.is-cropped.is-fit.__jsx-style-dynamic-selector{object-fit:contain;background-color:".concat(e,";}"),".image.is-cropped.__jsx-style-dynamic-selector:not(.is-fit){object-fit:cover;object-position:".concat("".concat(t," ").concat(n),";}"),"body.print .image.__jsx-style-dynamic-selector{max-height:calc(".concat(b.a.print.pageHeightLetter," - 3rem);object-fit:contain;").concat(this.props.resourceId&&this.props.resourceId.indexOf(".png")>=0?"background-color: ".concat(this.props.storyDesign.storyTheme.themeVariables.backgroundColor,";"):"",";}")]))}}]),p}(d.PureComponent);Object(l.a)(E,"defaultProps",{mediaPlacement:C.b}),t.default=Object(O.b)(Object(x.a)(Object(m.c)(E)))},ptGt:function(e,t,n){"use strict";var i=n("zygG"),a=n("ERkP"),o=n.n(a),r=n("2SGB"),s=n("bAEK"),c=n("gHjG"),l=o.a.createElement;t.a=function(e){var t=e.children,n=e.visible,a=Object(c.b)(),p=Object(i.a)(a,2),u=p[0],d=p[1];return n&&u?l(s.a,{title:l(r.a,{id:"common.whatsNew.nudge.title"}),text:l(r.a,{id:"common.whatsNew.nudge.description"}),placement:"bottom",target:l("div",null,t),onClick:d,isInteractive:!0,isShowing:!0}):l(o.a.Fragment,null,t)}},"q+Ww":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var i=n("72yd"),a=n("2SGB"),o=n("ERkP"),r=n.n(o).a.createElement,s=function(e,t,n){return t?c(e,t,n):"".concat(e?e+" - ":"").concat(i.e)},c=function(e,t,n){return t?!e&&n?r(a.a,{id:"component.builderHeader.defaultTitle"}):e:i.e}},q0L8:function(e,t,n){"use strict";var i=n("zygG"),a=n("yFcC"),o=n.n(a),r=n("ERkP"),s=n.n(r),c=n("NX3A"),l=n("liFR"),p=n("Qquf"),u=n("Lf33"),d=n("tSRP"),h=n("Y/5s"),m=n("2SGB"),f=n("YQpL"),y=n("AuFC"),g=n("O94r"),v=n.n(g),b=n("L5sG"),x=n("ptGt"),O=n("gHjG"),w=s.a.createElement;t.a=Object(f.c)(Object(y.c)(Object(h.d)((function(e){var t=e.config,n=e.intl,a=e.theme,r=Object(O.a)(),s=Object(i.a)(r,2),h=s[0],f=s[1];return w("div",{className:"context-menu"},w(d.a,{target:function(){var e=n.formatMessage({id:"common.help"}),t={styles:w(o.a,{id:"1342706887"},[".target-indicator.jsx-1342706887{position:absolute;right:-0.3rem;top:-0.1rem;}","html[dir='rtl'] .target-indicator.jsx-1342706887{right:1.3rem;}"]),className:"jsx-1342706887"};return w("button",{"aria-label":e,className:o.a.dynamic([["3033707114",[c.a.font.size.medium]]])+" target-container"},w(x.a,{visible:h},w(l.a,{tooltipContent:e},w(p.a,{color:a.color.secondary,width:"2rem",height:"2rem"})),w(b.a,{visible:h,className:v()("target-indicator",t.className)})),t.styles,w(o.a,{id:"3033707114",dynamic:[c.a.font.size.medium]},[".target-container.__jsx-style-dynamic-selector{position:relative;font-size:".concat(c.a.font.size.medium,";line-height:0;}"),"body:not(.user-is-tabbing) .target-container.__jsx-style-dynamic-selector:focus{outline:none;}"]))}(),popper:function(){var e=t.ESRI_OVERVIEW_LINK,n={styles:w(o.a,{id:"3841215687",dynamic:[c.a.spacing.xxxs]},[".indicator-override.__jsx-style-dynamic-selector{margin:0 ".concat(c.a.spacing.xxxs,";}")]),className:o.a.dynamic([["3841215687",[c.a.spacing.xxxs]]])};return w(u.a,null,w(u.a.Item,{isBold:!1,link:{href:"https://storymaps.arcgis.com/redirect/whats-new",openInNewPage:!0},onClick:f},w("div",{className:"jsx-4274351970 whats-new-item"},w(m.a,{id:"common.whatsNew"}),w(b.a,{visible:h,className:v()("indicator-override",n.className)}),n.styles,w(o.a,{id:"4274351970"},[".whats-new-item.jsx-4274351970{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"]))),w(u.a.Item,{isBold:!1,link:{href:e,openInNewPage:!0}},w(m.a,{id:"common.overview"})),w(u.a.Item,{isBold:!1,link:{href:"https://doc.arcgis.com/en/arcgis-storymaps/get-started/faq.htm",openInNewPage:!0}},w(m.a,{id:"component.feedbackMenu.faq"})),w(u.a.Item,{isBold:!1,link:{href:"https://www.esri.com/en-us/arcgis/products/arcgis-storymaps/resources",openInNewPage:!0}},w(m.a,{id:"common.resources"})),w(u.a.Item,{isBold:!1,link:{href:"https://doc.arcgis.com/en/arcgis-storymaps/get-started",openInNewPage:!0}},w(m.a,{id:"common.docs"})),w(u.a.Item,{isBold:!1,link:{href:"https://storymaps.arcgis.com/redirect/feedback",openInNewPage:!0}},w(m.a,{id:"component.feedbackMenu.feedback"})))}(),placement:"bottom-end"}))}))))},q94Z:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("YQpL"),f=n("Lf33"),y=n("NX3A"),g=n("XEYk"),v=n("VtSi"),b=n.n(v),x=n("GuR2"),O=n("2gSQ"),w=n("txt0"),j=n("AuFC"),C=n("cuUk"),k=n("ZjWX"),S=n("1yNe"),I=n("tJy7"),P=n("jD4n"),R=n("fGyu"),E=n("2SGB"),D=n("Z4N4");function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var M=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(s.a)(t);if(T()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"cloud",path:"M31.8 16.704c0 3.489-2.765 6.296-5.238 6.296H24v-1h2.562c1.92 0 4.238-2.362 4.238-5.296a5.359 5.359 0 0 0-3.607-5.097l-.407-.138-.581-.198-.087-.608-.06-.425A7.953 7.953 0 0 0 18.462 3.2a7.647 7.647 0 0 0-6.683 4.187l-.259.488-.37.696-.763-.197-.535-.138a3.474 3.474 0 0 0-.874-.13 2.943 2.943 0 0 0-3.024 2.766l-.022.404-.031.573-.51.262-.357.183A5.173 5.173 0 0 0 2.2 16.897c0 2.653 2.166 5.085 4.545 5.103H11v1H6.737C3.733 22.978 1.2 19.988 1.2 16.897a6.169 6.169 0 0 1 3.378-5.493l.357-.183.022-.402a3.93 3.93 0 0 1 4.022-3.713 4.432 4.432 0 0 1 1.125.162l.534.138.26-.488A8.645 8.645 0 0 1 18.462 2.2a8.956 8.956 0 0 1 8.584 7.897l.06.425.408.138a6.358 6.358 0 0 1 4.285 6.044zM18 14.707l2.646 2.646.707-.707-3.853-3.853-3.854 3.854.707.707L17 14.707V30h1z",viewBox:"0 0 32 32"})}return a}(n("MEC2").a),A=n("wWnZ"),N=n("Lri9"),L=n("7sDT"),G=h.a.createElement,_=Object(d.memo)((function(e){var t=Object(d.useState)(""),n=t[0],i=t[1];return G("div",{className:u.a.dynamic([["1292295332",[y.a.spacing.xxxs,y.a.spacing.sm]]])},e.placeholderResourceData&&G("div",{className:u.a.dynamic([["1292295332",[y.a.spacing.xxxs,y.a.spacing.sm]]])+" placeholder-resource-preview"},"image"===e.placeholderResourceData.type?G("img",{src:e.placeholderResourceData.data.src,alt:"",role:"presentation",className:u.a.dynamic([["1292295332",[y.a.spacing.xxxs,y.a.spacing.sm]]])+" placeholder-resource"}):"audio"===e.placeholderResourceData.type?G("audio",{controls:!0,controlsList:"nodownload",src:e.placeholderResourceData.data.src,className:u.a.dynamic([["1292295332",[y.a.spacing.xxxs,y.a.spacing.sm]]])+" placeholder-resource"}):G("video",{autoPlay:!0,muted:!0,src:e.placeholderResourceData.data.src,className:u.a.dynamic([["1292295332",[y.a.spacing.xxxs,y.a.spacing.sm]]])+" placeholder-resource"}),G("p",{className:u.a.dynamic([["1292295332",[y.a.spacing.xxxs,y.a.spacing.sm]]])+" placeholder-title"},n),G(A.a,{type:"clear",color:"danger",onClick:e.removePlaceholderResourceData},G(E.a,{id:"builder.common.delete"}))),!e.placeholderResourceData&&G(N.a,{accept:"audio"===e.mediaType?C.a.join(","):"image"===e.mediaType?C.b.join(","):"video"===e.mediaType?C.c.join(","):[].concat(Object(R.a)(C.b),Object(R.a)(C.c)).join(","),render:function(t,n,i,a,o,r){return G("div",{onDrop:n,onDragOver:i,onDragLeave:a,onDragEnd:a,className:u.a.dynamic([["746223048",[r?y.a.color.auroMetalSaurus:y.a.color.beauBlue,r?y.a.color.antiFlashWhite:y.a.color.splashedWhite,y.a.spacing.xxl,y.a.spacing.xxs,y.a.spacing.xs,D.a.typography.body16(),D.a.typography.body12(),y.a.color.bleuDeFrance]]])+" upload-file-container"},G("span",{className:u.a.dynamic([["746223048",[r?y.a.color.auroMetalSaurus:y.a.color.beauBlue,r?y.a.color.antiFlashWhite:y.a.color.splashedWhite,y.a.spacing.xxl,y.a.spacing.xxs,y.a.spacing.xs,D.a.typography.body16(),D.a.typography.body12(),y.a.color.bleuDeFrance]]])+" upload-file-ui"},G(M,{width:y.a.spacing.xl,height:y.a.spacing.xl}),G("div",{className:u.a.dynamic([["746223048",[r?y.a.color.auroMetalSaurus:y.a.color.beauBlue,r?y.a.color.antiFlashWhite:y.a.color.splashedWhite,y.a.spacing.xxl,y.a.spacing.xxs,y.a.spacing.xs,D.a.typography.body16(),D.a.typography.body12(),y.a.color.bleuDeFrance]]])+" upload-section"},G("p",{className:u.a.dynamic([["746223048",[r?y.a.color.auroMetalSaurus:y.a.color.beauBlue,r?y.a.color.antiFlashWhite:y.a.color.splashedWhite,y.a.spacing.xxl,y.a.spacing.xxs,y.a.spacing.xs,D.a.typography.body16(),D.a.typography.body12(),y.a.color.bleuDeFrance]]])+" upload-title"},G(E.a,{id:"builder.addMediaModal.uploadTitle"})),G("div",{className:u.a.dynamic([["746223048",[r?y.a.color.auroMetalSaurus:y.a.color.beauBlue,r?y.a.color.antiFlashWhite:y.a.color.splashedWhite,y.a.spacing.xxl,y.a.spacing.xxs,y.a.spacing.xs,D.a.typography.body16(),D.a.typography.body12(),y.a.color.bleuDeFrance]]])+" upload-description"},G(E.a,{id:"builder.addMediaModal.uploadDescription"}),e.featureDecisions.canAccessEsri&&G(h.a.Fragment,null,G("span",{className:u.a.dynamic([["746223048",[r?y.a.color.auroMetalSaurus:y.a.color.beauBlue,r?y.a.color.antiFlashWhite:y.a.color.splashedWhite,y.a.spacing.xxl,y.a.spacing.xxs,y.a.spacing.xs,D.a.typography.body16(),D.a.typography.body12(),y.a.color.bleuDeFrance]]])},"\xa0"),G("a",{href:"https://doc.arcgis.com/en/arcgis-online/reference/terms-of-use.htm",target:"_blank",rel:"noopener noreferrer",role:"button",className:u.a.dynamic([["746223048",[r?y.a.color.auroMetalSaurus:y.a.color.beauBlue,r?y.a.color.antiFlashWhite:y.a.color.splashedWhite,y.a.spacing.xxl,y.a.spacing.xxs,y.a.spacing.xs,D.a.typography.body16(),D.a.typography.body12(),y.a.color.bleuDeFrance]]])},G(E.a,{id:"builder.map.learnMore"}))))),G(A.a,{color:"primary",onClick:t},G(E.a,{id:"builder.addMediaModal.browseYourFiles"}))),G(u.a,{id:"746223048",dynamic:[r?y.a.color.auroMetalSaurus:y.a.color.beauBlue,r?y.a.color.antiFlashWhite:y.a.color.splashedWhite,y.a.spacing.xxl,y.a.spacing.xxs,y.a.spacing.xs,D.a.typography.body16(),D.a.typography.body12(),y.a.color.bleuDeFrance]},[".upload-file-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:100%;min-height:38rem;border:2px dashed ".concat(r?y.a.color.auroMetalSaurus:y.a.color.beauBlue,";background-color:").concat(r?y.a.color.antiFlashWhite:y.a.color.splashedWhite,";}"),".upload-file-ui.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:".concat(y.a.spacing.xxl,";}"),".upload-section.__jsx-style-dynamic-selector{margin-top:".concat(y.a.spacing.xxs,";margin-bottom:").concat(y.a.spacing.xs,";text-align:center;}"),".upload-title.__jsx-style-dynamic-selector{".concat(D.a.typography.body16(),";}"),".upload-description.__jsx-style-dynamic-selector{".concat(D.a.typography.body12(),";}"),".upload-description.__jsx-style-dynamic-selector a.__jsx-style-dynamic-selector,.upload-description.__jsx-style-dynamic-selector a.__jsx-style-dynamic-selector:visited{color:".concat(y.a.color.bleuDeFrance,";}")]))},onPick:function(t){var n=t.type.substring(0,t.type.indexOf("/"));return Object(C.e)(t,e.mediaType).then((function(a){if("video"===n||"audio"===n){var o={src:a,name:t.name,provider:"uri"};e.setPlaceholderResourceData({type:n,data:o}),i(t.name)}else"image"===n&&Object(C.f)(a).then((function(a){e.setPlaceholderResourceData({type:n,data:a}),i(t.name)})).catch((function(){e.toast.add({type:"error",title:G(E.a,{id:"builder.image.uploadErrorTitle"}),details:G(E.a,{id:"builder.image.uploadFailDescription"})})}))})).catch((function(t){"max-file-size-exceeded"===t?e.toast.add({type:"error",title:G(E.a,{id:"builder.image.uploadErrorTitle"}),details:G(E.a,{id:"builder.".concat(n,".uploadErrorDescription")})}):"invalid-file-type"===t&&e.toast.add({type:"error",title:G(E.a,{id:"builder.image.uploadErrorTitle"}),details:G(E.a,{id:"builder.addMediaModal.thisFileTypeIsNotSupported"})})}))}}),G(u.a,{id:"1292295332",dynamic:[y.a.spacing.xxxs,y.a.spacing.sm]},["audio.__jsx-style-dynamic-selector{width:100%;}","body:not(.user-is-tabbing) audio.__jsx-style-dynamic-selector{outline:none;}",".placeholder-resource-preview.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}",".placeholder-resource.__jsx-style-dynamic-selector{min-height:5rem;max-height:25rem;max-width:100%;object-fit:contain;margin-bottom:".concat(y.a.spacing.xxxs,";}"),".placeholder-title.__jsx-style-dynamic-selector{margin-bottom:".concat(y.a.spacing.sm,";overflow:hidden;text-overflow:ellipsis;width:100%;white-space:nowrap;}")]))})),B=Object(L.c)(Object(O.a)(Object(m.c)(_))),W=n("yz+K"),V=h.a.createElement,F=Object(d.memo)((function(e){var t="audio"===e.mediaType?"builder.addMediaModal.pasteALinkAudio.desc":"image"===e.mediaType?"builder.addMediaModal.pasteALinkImage":"video"===e.mediaType?"builder.addMediaModal.pasteALinkVideo":"builder.addMediaModal.pasteALinkImageOrVideo";return V(h.a.Fragment,null,V(W.a,{value:e.linkInputValue,onChange:e.onLinkInputChange,rows:1,isError:e.isInvalidLink,errorMessage:e.intl.formatMessage({id:"builder.addMediaModal.urlNotRecognized"})}),!e.isInvalidLink&&V("div",{className:u.a.dynamic([["1384906436",["audio"===e.mediaType?"block":"inline",y.a.spacing.xxxs,D.a.typography.body12(),y.a.color.bleuDeFrance]]])+" link-description"},V("p",{className:u.a.dynamic([["1384906436",["audio"===e.mediaType?"block":"inline",y.a.spacing.xxxs,D.a.typography.body12(),y.a.color.bleuDeFrance]]])},V(E.a,{id:t})),V("p",{className:u.a.dynamic([["1384906436",["audio"===e.mediaType?"block":"inline",y.a.spacing.xxxs,D.a.typography.body12(),y.a.color.bleuDeFrance]]])},"audio"===e.mediaType&&V(E.a,{id:"builder.addMediaModal.uploadDescription"}),e.featureDecisions.canAccessEsri&&V(h.a.Fragment,null,V("span",{className:u.a.dynamic([["1384906436",["audio"===e.mediaType?"block":"inline",y.a.spacing.xxxs,D.a.typography.body12(),y.a.color.bleuDeFrance]]])},"\xa0"),V("a",{href:"https://doc.arcgis.com/en/arcgis-online/reference/terms-of-use.htm",target:"_blank",rel:"noopener noreferrer",role:"button",className:u.a.dynamic([["1384906436",["audio"===e.mediaType?"block":"inline",y.a.spacing.xxxs,D.a.typography.body12(),y.a.color.bleuDeFrance]]])},V(E.a,{id:"builder.map.learnMore"}))))),V(u.a,{id:"1384906436",dynamic:["audio"===e.mediaType?"block":"inline",y.a.spacing.xxxs,D.a.typography.body12(),y.a.color.bleuDeFrance]},["p.__jsx-style-dynamic-selector{display:".concat("audio"===e.mediaType?"block":"inline",";margin-top:").concat(y.a.spacing.xxxs,";}"),".link-description.__jsx-style-dynamic-selector{".concat(D.a.typography.body12(),";}"),".link-description.__jsx-style-dynamic-selector a.__jsx-style-dynamic-selector,.link-description.__jsx-style-dynamic-selector a.__jsx-style-dynamic-selector:visited{color:".concat(y.a.color.bleuDeFrance,";}")]))})),U=Object(L.c)(Object(m.c)(F)),z=h.a.createElement;function H(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Y=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(H()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"onTabChange",(function(e){t.setState({selectedTabId:e})})),Object(l.a)(Object(o.a)(t),"isSaveDisabled",(function(){return"upload-media"===t.state.selectedTabId&&!t.state.placeholderResourceData||!("link-media"!==t.state.selectedTabId||t.state.linkData&&!t.state.isLoading&&!t.state.isInvalidLink)})),Object(l.a)(Object(o.a)(t),"onLinkInputChange",(function(e){t.setState({isInvalidLink:!1,linkData:e.target.value})})),Object(l.a)(Object(o.a)(t),"removePlaceholderResourceData",(function(){t.setState({placeholderResourceData:void 0})})),Object(l.a)(Object(o.a)(t),"setPlaceholderResourceData",(function(e){t.setState({placeholderResourceData:e})})),Object(l.a)(Object(o.a)(t),"onCancel",(function(){t.removePlaceholderResourceData(),t.props.onModalCancel()})),Object(l.a)(Object(o.a)(t),"onSave",(function(){var e,n,i,a,o,r,s,c,l;return b.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(e=!(!t.state.placeholderResourceData||"upload-media"!==t.state.selectedTabId),n=!(!t.state.linkData||"link-media"!==t.state.selectedTabId),!e){p.next=8;break}t.props.item.onClick({resourceData:t.state.placeholderResourceData}),i={type:"upload"},t.addAnalytics(i),p.next=35;break;case 8:if(!n){p.next=35;break}return t.setState({isLoading:!0}),p.prev=10,p.next=13,b.a.awrap(Object(I.a)(t.state.linkData,{baseUrl:t.props.config.BASE_URL,embedlyApiKey:t.props.config.EMBEDLY_API_KEY,portalHost:t.props.config.PORTAL_HOST}));case 13:if(a=p.sent,t.setState({isLoading:!1}),a&&"video"!==a.embedType&&"audio"!==a.embedType&&t.isValidResponse(a.contentType)){p.next=17;break}throw new Error("Invalid embed type");case 17:if(o=a.embedType,r=a.embedSrc,s=a.width,c=a.height,"image"!==o){p.next=23;break}t.props.item.onClick({resourceData:{type:"image",data:{src:r,provider:"uri",width:s,height:c}}}),i={type:"link-image",data:{url:r}},p.next=28;break;case 23:if(l=Object(S.a)(a)){p.next=26;break}throw new Error("Invalid embed type");case 26:t.props.item.onClick({blockData:{type:"embed",data:l}}),i={type:"link",data:l};case 28:t.addAnalytics(i),p.next=35;break;case 31:return p.prev=31,p.t0=p.catch(10),t.setState({isInvalidLink:!0,isLoading:!1}),p.abrupt("return");case 35:t.props.onSaveChanges();case 36:case"end":return p.stop()}}),null,null,[[10,31]],Promise)})),Object(l.a)(Object(o.a)(t),"isValidResponse",(function(e){return"error"!==e&&!("image"===t.props.item.type&&"photo"!==e||"video"===t.props.item.type&&"video"!==e||"image-or-video"===t.props.item.type&&"photo"!==e&&"video"!==e)})),Object(l.a)(Object(o.a)(t),"addAnalytics",(function(e){if("link"===e.type)w.a.trackEvent(w.a.Category.Builder,e.data.display===P.Display.Inline?w.a.Action.Builder_Embed_DisplayAsInlineEmbed:w.a.Action.Builder_Embed_DisplayAsCard,e.data.providerUrl),w.a.trackEvent(w.a.Category.Builder,w.a.Action.Builder_Embed_EmbedlyType,e.data.embedType);else if("link-image"===e.type)w.a.trackEvent(w.a.Category.Builder,w.a.Action.Builder_Embed_DisplayAsInlineImage,e.data.url);else if("upload"===e.type){var n,i,a;"video"===(null===(n=t.state.placeholderResourceData)||void 0===n?void 0:n.type)?t.trackSource("video"):"image"===(null===(i=t.state.placeholderResourceData)||void 0===i?void 0:i.type)?Object(C.f)(t.state.placeholderResourceData.data.src).then((function(e){try{var n,i,a=t.state.file,o=a.type.replace(/image\//,"");n=a.size<5e5?w.a.Name.Common_Size_XSmall:a.size<1e6?w.a.Name.Common_Size_Small:a.size<5e6?w.a.Name.Common_Size_Medium:a.size<1e7?w.a.Name.Common_Size_Large:a.size<2e7?w.a.Name.Common_Size_XLarge:w.a.Name.Common_Size_XXLarge,i=e.width<820?w.a.Name.Common_Size_Small:e.width<1200?w.a.Name.Common_Size_Medium:e.width<2e3?w.a.Name.Common_Size_Large:w.a.Name.Common_Size_XLarge,w.a.trackEvent(w.a.Category.Builder,"".concat(w.a.Action.Builder_UploadImageStats_FileSize,"_").concat(o),n),w.a.trackEvent(w.a.Category.Builder,"".concat(w.a.Action.Builder_UploadImageStats_SizeWidth,"_").concat(o),i),t.trackSource("image")}catch(r){}})):"audio"===(null===(a=t.state.placeholderResourceData)||void 0===a?void 0:a.type)&&t.trackSource("audio")}})),Object(l.a)(Object(o.a)(t),"trackSource",(function(e){if("sidecar"===t.props.source&&"audio"!==e)w.a.trackEvent(w.a.Category.Builder,"video"===e?w.a.Action.Builder_SideCar_AddVideo:w.a.Action.Builder_SideCar_AddImage,w.a.Name.Builder_Sidecar);else if("slideshow"===t.props.source&&"audio"!==e)w.a.trackEvent(w.a.Category.Builder,"video"===e?w.a.Action.Builder_Slideshow_AddVideo:w.a.Action.Builder_Slideshow_AddImage,w.a.Name.Builder_Slideshow);else{if("audio"!==e&&"image"!==e&&"video"!==e)return;w.a.trackEvent(w.a.Category.Builder,"video"===e?w.a.Action.Builder_InsertVideo:"image"===e?w.a.Action.Builder_InsertImage:w.a.Action.Builder_InsertAudio,t.props.source||w.a.Name.Builder_Common_BlockPalette)}})),t.state={selectedTabId:"upload-media",linkData:"",isInvalidLink:!1,isLoading:!1},t.textInputRef=Object(d.createRef)(),t}return Object(a.a)(p,[{key:"componentDidUpdate",value:function(){this.textInputRef.current&&this.textInputRef.current.focus()}},{key:"render",value:function(){var e=[{id:"upload-media",title:"builder.common.upload",modalProperties:[{id:"upload-media",customComponent:z(B,{mediaType:this.props.item.type,placeholderResourceData:this.state.placeholderResourceData,setPlaceholderResourceData:this.setPlaceholderResourceData,removePlaceholderResourceData:this.removePlaceholderResourceData})}]},{id:"link-media",title:"audio"===this.props.item.type?"builder.blockInserter.embed":"builder.common.link",modalProperties:[{id:"link-media",customComponent:z(U,{mediaType:this.props.item.type,linkInputValue:this.state.linkData||"",onLinkInputChange:this.onLinkInputChange,isInvalidLink:this.state.isInvalidLink,isLoading:this.state.isLoading})}],isDisabled:this.props.isUploadByLinkDisabled,disabledTooltipId:"builder.addMediaModal.linkingToMediaNotSupported"}],t=this.state.isLoading&&"link-media"===this.state.selectedTabId?z(x.a,{size:y.a.spacing.xxs}):this.props.intl.formatMessage({id:"common.add"});return z(k.a,{isShowingModal:this.props.isExpanded,mediaTitle:this.props.mediaTitle,tabs:e,onConfirm:this.onSave,onDiscard:this.onCancel,saveButtonContent:t,isSaveDisabled:this.isSaveDisabled(),selectedTabId:this.state.selectedTabId,onTabChange:this.onTabChange})}}]),p}(d.PureComponent);Object(l.a)(Y,"defaultProps",{isUploadByLinkDisabled:!1});var K=Object(j.c)(Object(O.a)(Object(m.c)(Y))),X=n("0OTU"),J=h.a.createElement;function Z(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var q=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(Z()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"renderResourcePickerUi",(function(){return"altButton"===e.props.mediaPickerUI?J(X.a,{item:e.props.item,onItemClick:e.onItemClick,isDisabled:e.props.isDisabled,disabledTooltipStr:e.props.disabledTooltipStr}):"dropdownMenuItem"===e.props.mediaPickerUI?J(f.a.Item,{maxHeight:y.a.spacing.xxl,isBold:!1,onClick:e.onItemClick,isDisabled:e.props.isDisabled},e.props.mediaTitle?e.props.mediaTitle:e.props.item.titleAlt?e.props.item.titleAlt:e.props.item.title):"children"===e.props.mediaPickerUI?J("div",{role:"button",onClick:e.props.childrenWithCallback?void 0:e.onItemClick,className:u.a.dynamic([["1165119383",[e.props.displayCss||"inline-block"]]])+" wrapper"},e.props.childrenWithCallback?e.props.childrenWithCallback(e.onItemClick):e.props.children,J(u.a,{id:"1165119383",dynamic:[e.props.displayCss||"inline-block"]},[".wrapper.__jsx-style-dynamic-selector{display:".concat(e.props.displayCss||"inline-block",";}")])):J(g.a,{item:e.props.item,onItemClick:e.onItemClick,isDisabled:e.props.isDisabled,disabledTooltipStr:e.props.disabledTooltipStr})})),Object(l.a)(Object(o.a)(e),"onSaveChanges",(function(){e.props.onItemSelected(e.props.item.type)})),Object(l.a)(Object(o.a)(e),"onItemClick",(function(){e.props.onItemExpanded(e.props.item.type)})),Object(l.a)(Object(o.a)(e),"onModalCancel",(function(){e.props.onItemCollapsed(e.props.item.type)})),e}return Object(a.a)(p,[{key:"render",value:function(){return J(d.Fragment,null,this.renderResourcePickerUi(),this.props.isExpanded&&J(K,{mediaTitle:this.props.mediaTitle,isExpanded:this.props.isExpanded,item:this.props.item,onModalCancel:this.onModalCancel,onSaveChanges:this.onSaveChanges,source:this.props.source,isUploadByLinkDisabled:this.props.isUploadByLinkDisabled}))}}]),p}(d.Component);t.a=Object(m.c)(q)},qNA3:function(e,t,n){"use strict";n.r(t),n.d(t,"SlideshowImmersiveNarrativePanelViewer",(function(){return j}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("NX3A"),g=n("eCu0"),v=n("A7aE"),b=n("uEvS"),x=n("lsPM"),O=h.a.createElement;function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var j=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(w()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"setTopRef",(function(t){"function"===typeof e.props.setTopNode&&t&&e.props.setTopNode(t)})),e}return Object(a.a)(p,[{key:"render",value:function(){var e="",t="start";try{e="string"===typeof this.props.position?this.props.position.split("-")[1]:"",t="string"===typeof this.props.position?this.props.position.split("-")[0]:"start"}catch(n){}return O("div",{"data-blockid":this.props.blockId,className:u.a.dynamic([["3918674170",[this.props.immersiveOffset.top,this.props.immersiveOffset.top,this.props.immersiveOffset.bottom,this.props.immersiveOffset.top,y.a.spacing.xs,y.a.spacing.xs]]])+" "+(f()("immersive-narrative-panel",{first:this.props.isFirst,last:this.props.isLast,"vertical-start":"top"===e,"vertical-center":"middle"===e,"vertical-end":"bottom"===e})||"")},!this.props.printMode&&O(h.a.Fragment,null,O("span",{ref:this.setTopRef,className:u.a.dynamic([["3918674170",[this.props.immersiveOffset.top,this.props.immersiveOffset.top,this.props.immersiveOffset.bottom,this.props.immersiveOffset.top,y.a.spacing.xs,y.a.spacing.xs]]])+" "+(f()("top-node",{first:this.props.isFirst})||"")})),O(x.a,{position:t,size:"center"===t?"medium":"small",isVisible:this.props.isVisible,panelStyle:this.props.panelStyle,isTransitionAnimated:this.props.isTransitionAnimated,printMode:this.props.printMode,className:this.props.className},this.props.children),O(u.a,{id:"3918674170",dynamic:[this.props.immersiveOffset.top,this.props.immersiveOffset.top,this.props.immersiveOffset.bottom,this.props.immersiveOffset.top,y.a.spacing.xs,y.a.spacing.xs]},[".immersive-narrative-panel.__jsx-style-dynamic-selector{--padding-below-panel:70vh;--spacing-from-edge:calc((100vh - ".concat(this.props.immersiveOffset.top,") * 0.2);position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;padding-bottom:var(--spacing-from-edge);padding-top:var(--spacing-from-edge);grid-column:1;grid-row:1;z-index:1;min-height:calc( 100vh - (").concat(this.props.immersiveOffset.top," + ").concat(this.props.immersiveOffset.bottom,") );pointer-events:none;}"),".immersive-narrative-panel.vertical-start.__jsx-style-dynamic-selector{-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}",".immersive-narrative-panel.vertical-center.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".immersive-narrative-panel.vertical-end.__jsx-style-dynamic-selector{-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;}",".top-node.__jsx-style-dynamic-selector{position:absolute;left:0;top:calc(".concat(this.props.immersiveOffset.top," * -1);width:100%;height:0;z-index:0;}"),"body.print .immersive-narrative-panel.__jsx-style-dynamic-selector{padding:".concat(y.a.spacing.xs," 0 0;min-height:0 !important;}"),"body.print .immersive-narrative-panel.vertical-end.__jsx-style-dynamic-selector{padding-bottom:".concat(y.a.spacing.xs,";}")]))}}]),p}(d.PureComponent);t.default=Object(b.b)(Object(g.c)(Object(v.b)(j)))},qhOZ:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("BAoe"),h=n("YQpL"),m=n("NX3A"),f=n("A7aE"),y=u.a.createElement;function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(g()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){var e=this.props.storyDesign.storyTheme.themeVariables;return y("div",{className:l.a.dynamic([["3592073206",[e.mixins.typography.body.size.stepDown1(),this.props.textColor||e.bodyColor,m.a.responsiveBreakpoints.medium,e.mixins.typography.body.size.baseline()]]])+" sc-metadata"},this.props.children,y("div",{className:l.a.dynamic([["3592073206",[e.mixins.typography.body.size.stepDown1(),this.props.textColor||e.bodyColor,m.a.responsiveBreakpoints.medium,e.mixins.typography.body.size.baseline()]]])+" sc-latter-container"},this.props.showPublishedDate&&y("p",{className:l.a.dynamic([["3592073206",[e.mixins.typography.body.size.stepDown1(),this.props.textColor||e.bodyColor,m.a.responsiveBreakpoints.medium,e.mixins.typography.body.size.baseline()]]])+" sc-published-date"},this.props.modifiedDate?y(d.a,{value:this.props.modifiedDate,year:"numeric",month:"long",day:"numeric"}):this.props.intl.formatMessage({id:"common.draft"}))),y(l.a,{id:"3592073206",dynamic:[e.mixins.typography.body.size.stepDown1(),this.props.textColor||e.bodyColor,m.a.responsiveBreakpoints.medium,e.mixins.typography.body.size.baseline()]},[".sc-metadata.__jsx-style-dynamic-selector{display:block;}",".sc-latter-container.__jsx-style-dynamic-selector{display:inline-block;}",".sc-published-date.__jsx-style-dynamic-selector{white-space:nowrap;margin:0;display:inline;".concat(e.mixins.typography.body.size.stepDown1()," color:").concat(this.props.textColor||e.bodyColor,";}"),"@media (min-width:".concat(m.a.responsiveBreakpoints.medium,"){.sc-published-date.__jsx-style-dynamic-selector{").concat(e.mixins.typography.body.size.baseline(),";}}")]))}}]),c}(p.PureComponent);t.a=Object(f.b)(Object(h.c)(v))},qzml:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("NX3A"),f=n("Z4N4"),y=n("Lf33"),g=n("Ur6V"),v=n("tSRP"),b=h.a.createElement;function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var O=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(x()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"state",{isShowingDropdown:!1}),Object(l.a)(Object(o.a)(e),"handleToggleDropdown",(function(){e.setState((function(e){return{isShowingDropdown:!e.isShowingDropdown}}))})),Object(l.a)(Object(o.a)(e),"renderTarget",(function(){var t=e.props.options[e.props.children?0:e.props.selectedIndex],n={styles:b(u.a,{id:"1795630082",dynamic:[m.a.spacing.xxxs,e.state.isShowingDropdown?"180deg":0,m.a.spacing.xxxs]},[".icon-caret-down.__jsx-style-dynamic-selector{position:absolute;right:".concat(m.a.spacing.xxxs,";-webkit-transform-origin:50% 45%;-ms-transform-origin:50% 45%;transform-origin:50% 45%;-webkit-transform:translateY(50%) rotate(").concat(e.state.isShowingDropdown?"180deg":0,");-ms-transform:translateY(50%) rotate(").concat(e.state.isShowingDropdown?"180deg":0,");transform:translateY(50%) rotate(").concat(e.state.isShowingDropdown?"180deg":0,");}"),"html[dir='rtl'] .icon-caret-down.__jsx-style-dynamic-selector{right:unset;left:".concat(m.a.spacing.xxxs,";}")]),className:u.a.dynamic([["1795630082",[m.a.spacing.xxxs,e.state.isShowingDropdown?"180deg":0,m.a.spacing.xxxs]]])},i={styles:b(u.a,{id:"701974401",dynamic:[f.a.lineClamp(1),e.props.isFullWidth?"display: flex; width: calc(100% - ".concat(m.a.spacing.xxs,");"):""]},[".dropdown-menu-item.__jsx-style-dynamic-selector{padding-top:0;padding-bottom:0;height:4rem;}",".dropdown-menu-item.__jsx-style-dynamic-selector .dropdown-menu-item-text{".concat(f.a.lineClamp(1)," ").concat(e.props.isFullWidth?"display: flex; width: calc(100% - ".concat(m.a.spacing.xxs,");"):"",";}")]),className:u.a.dynamic([["701974401",[f.a.lineClamp(1),e.props.isFullWidth?"display: flex; width: calc(100% - ".concat(m.a.spacing.xxs,");"):""]]])};return b("div",null,t&&b(y.a.Item,{flavor:"dark",isSelected:!0,isFullWidth:e.props.isFullWidth,className:i.className},t.content,b(g.a,{className:n.className,width:"1rem",height:"auto",color:m.a.color.antiFlashWhite}),n.styles,i.styles))})),Object(l.a)(Object(o.a)(e),"renderDropdown",(function(){if(e.props.children)return b("div",null,e.props.children);var t={styles:b(u.a,{id:"441172811"},[".dropdown-menu.jsx-441172811{max-height:30rem;overflow-y:auto;}"]),className:"jsx-441172811"};return b(y.a,{fullWidth:!0,flavor:"dark",className:t.className},e.props.options.map(e.renderOption),t.styles)})),Object(l.a)(Object(o.a)(e),"renderOption",(function(t,n){var i={styles:b(u.a,{id:"2576005388",dynamic:[f.a.lineClamp(1)]},[".dropdown-menu-item.__jsx-style-dynamic-selector{padding-top:0;padding-bottom:0;height:4rem;}",".dropdown-menu-item.__jsx-style-dynamic-selector .dropdown-menu-item-text{".concat(f.a.lineClamp(1),";}")]),className:u.a.dynamic([["2576005388",[f.a.lineClamp(1)]]])};return b(y.a.Item,{flavor:"dark",key:t.id,onClick:t.onClick,isSelected:n===e.props.selectedIndex,isFullWidth:e.props.isFullWidth,className:i.className},t.content,i.styles)})),e}return Object(a.a)(p,[{key:"render",value:function(){return b("div",{className:u.a.dynamic([["2757591494",[f.a.shadow.sm()]]])+" option-selector"},b(v.a,{target:this.renderTarget(),popper:this.renderDropdown(),placement:this.props.placement,onShown:this.handleToggleDropdown,onHidden:this.handleToggleDropdown}),b(u.a,{id:"2757591494",dynamic:[f.a.shadow.sm()]},[".option-selector.__jsx-style-dynamic-selector{position:relative;".concat(f.a.shadow.sm(),";}")]))}}]),p}(d.PureComponent);t.a=O},r3il:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b"),s=n("yFcC"),c=n.n(s),l=n("ERkP"),p=n.n(l),u=n("MEC2"),d=p.a.createElement;function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){Object(r.a)(s,e);var t,n=(t=s,function(){var e,n=Object(o.a)(t);if(h()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function s(e){Object(i.a)(this,s);var t={iconName:"numbered-point",path:"M16,32 C7.163444,32 0,24.836556 0,16 C0,7.163444 7.163444,0 16,0 C24.836556,0 32,7.163444 32,16 C32,24.836556 24.836556,32 16,32 Z",viewBox:"0 0 32 32",children:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";return d("text",{fill:"#fff",fontFamily:"monospace",fontWeight:"700",fontSize:"20",x:"50%",y:"50%",textAnchor:"middle",dy:".3em",className:"jsx-143133061"},e,d(c.a,{id:"143133061"},["text.jsx-143133061{line-height:1;}"]))}};return n.call(this,e,t)}return s}(u.a)},rRyh:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("zygG"),a=n("sCFI"),o=n("NX3A"),r=function(e,t){Object(a.loadModules)(["esri/symbols/SimpleMarkerSymbol"]).then((function(n){var a=new(0,Object(i.a)(n,1)[0])({color:t,style:"circle",size:"16px",outline:{color:o.a.color.white,width:1}});e.allSources.forEach((function(e){e.resultSymbol=a})),e.resultGraphicEnabled&&e.resultGraphic&&(e.resultGraphic.symbol=a)}))}},rTWs:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("2SGB"),c=n("Z4N4"),l=n("wWnZ"),p=n("MKkT"),u=r.a.createElement,d=function(e){return u("div",{className:a.a.dynamic([["517979424",[c.a.shadow.sm()]]])+" button-container"},u(l.a,{onClick:e.onClick,disabled:e.isDisabled,type:"full",color:"light",icon:u(p.a,null)},u(s.a,{id:"builder.tour.".concat("edit"===e.mode?"edit":"add","Location")})),u(a.a,{id:"517979424",dynamic:[c.a.shadow.sm()]},[".button-container.__jsx-style-dynamic-selector{position:absolute;bottom:0;left:50%;-webkit-transform:translate(-50%,50%);-ms-transform:translate(-50%,50%);transform:translate(-50%,50%);".concat(c.a.shadow.sm(),";}")]))};d.defaultProps={isDisabled:!1},t.a=d},rvpn:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAa0AAAEdCAYAAAC/nDhCAAAAAXNSR0IArs4c6QAAQABJREFUeAHcvemyJjlyppcn96zcq6pF3v+VSDKZNCb9GGkoktNaTLShiZwedlflvi/yxyPeCAcCQCCW72SPkPmdQAAO34CAY8fV//Evf/p+Y3RX8hx9Thj7EdVp9yAjdQ9cm586D4V0kIsJjpMvEElJFAEagbD09evXG1++fLnx+esXf375Yu/mv33r9o3bt2/Z786NO7d42rs9z3bKGT3BH/2ipzCeZbeuYCA+ff584/379zc+fPx44/adOzce3Lt34779bt28WUZ7JLTOrGONMsFbBP/67duNd8bn+w8fPB8eP3x0447lQd2ty19Pe/mYKGsvtW/fv9948eqlgz9/+mzWT1TUCd81BF69fXvj46dPN3559uzGzauEQJXdPqghObnz4uXLGybSjefPns6yVLHXIlRS2vn9wWR58erVjUc//eS/GjYPzzJHrzGNwvQkDn/NwR3l97Xp9d6duzceP3p4sP5oyxv5uPprMVozU99NWVFda8JIzUqzBj9TKvmEpRTnYaDPSRJxjKyjrv1Z5amWsBIOqxgyjNdnjNiXzzc+f/5iH9z3G3fu3rbK8679btnvzsGCODCQq0sqJFb+qL66vBFqwF37C+RHM1zvP36w56cbd+/duXH/7n03YL2VVg13Ep4Ll0TOLzWZ4PPtu3f+u2tG9vGjR5nOJbMIzTh/pE/ywF3OmeJ6+CM9lf1XK3s/W2XveeMi2x+MC1ZgC8IG0ZevX9/4Yo2Fn59uNyo9LMD2X168sG/p842//cMfDrDtCmhIMkR9sQbp72a4bl3dvPHs6ZO2MUYAoTW/5CEoRoE5jyOs5mh4vH1P+X1/497du25A242vGqYYLkZj2OxPjJaCxbTedz3bdCsoc4MlsBYyqVxPpdn/3C1/i8397HjK3TxtoEvrnw/us30Mnz9/ckNG8tt3MGB3b9y1nsBdK5hHKv2YS5IJtckPvfydsNkptl/ZfFgfP5kBs14NPTE+rgf37t+4Zz2wSHemsdHXgWQNZPr437678eD+/RsPrQU993wlM3z1y71RigU4PLXyWjJF7sSh4hZICwGkf/XmzdQTmnrFE5JzZAbLlt6QyOfyFUSYgkTjm4U8f7JiSKZUJY+o8qw7YjHG9CKhR8On6hBIaM1bk08gopwlK6L3kQP7vmiA3bXG7sOHD7wHVgSuBopiFcAjrv7un/7ZGtjfvZVtf10ofyda4fYcXgtPk8hDRxgHdODBB66Wu1JX3Z+D0ZIy1eMChujh6R5XeBJuIcLF86YNB03PFgNZHLTFsfjIQNqvStyG2hwrvnbxtJnanECG7BNDjN4j+2xDbbf847hzx4yYDQ3MleucruSLMkhNCgNefskIjPwDPoUo9RC65S8VMcbrgxmxz58+e88LI4ExTmltwLoh4Roo/L2xD/+d/R48eOAt16ES3y/zBkkS0M+W5wwBPXn8uKob5BFn8q/JmBAJL8j91ujRE/LWuiM07GPdEEB3e+H1t5cvht6JVfI9TnIB2yMbNDAk6A9ZJiPcQ2yCAUukPEUUPe8/fLzx8s3rGz9ZmXn88GGdT6EcBdErSOUfozxf87Ai8RAI15QZ8pH699GDn27cv7+1cQiWurv6d//4R7dVENCP1hV+XHyOQSbcMs4A3cgtSI30hSfGTwYtprWPdvg3F5DBqIL+m8ehzSHMIIHnXanG92/Wa+A3kKfFeHMyZFc3BwkUhoG7aWG8wyeFbAiz98hw9I9yeVAEiuER/gR/JHMCul0oEI/eGD0WjNgnq/hxd+/ecQNGS29teCDKAT69yy8VKtwJLP4IahHRHYBBxoC9t2HEb9a7xEj8ZAas1wgvCMGwhMgiG1EZ5PAKb1TizM/9NM5bWBE1J0zFZKcGIgo9E3retOLzfBUnzpbBSnQ99zDzzvLjtfW6GO5irsSdCIxf8x68MQ38MYzH182QZI+bWOgBHmGYR6N8MY+2u0xtkJky8+r1G5+/fmrDzIwoTK6QWV7tGoBkU77xxJXCFTZA1P+Cg3lljBfz6sy90Ths9dwHbOKCN3EyxOhvcXiQyFxGJdj0FP0y7QaqIWGqICERZ3nyCC3YAYa3yYi5URuM3Tczgt++fZ/ieMcIEvbdCgDj7Ezf37IFCjdvmSEzrbjfjNot3jGE9hvCAv2UfM7o7vdAYTeOSyRkbB0DxtwRxgwd8sHIkOUfbMxB+fWEP/l5lh0KFlQZYmsoMtBC5Hfv3l1vsU6V5hoysVJneMKwAdTTwNcbX0Tw0Y3XQ2u5DsZrQnlxD4bklfUc6HFh1KOL8qjYx7AI2+tnkcFLm6t5avRopbuzMuVZ3otkBY4e7Z9//93loULtdVtlo9JmsQKGKzf66zT3lXOMxQvLLxYgPTHjVTQUCGIuylPKP3EwQM8NE733PKkTmPNidINh74fWOGz3PkVVHKVUqkYLsChQmmzDW5luB4IhoXp1aYIa0jEnHLgGk2Jae6P1ggHD6H399nUycrQevmL0vg5x4BmM29WN2zdve0+Nyhqjxso8H65cI9YZH6XsTHKtYFS0jLF/snkxemLITg9sMGR3bWjmKmmViznJRc7Fsqd3wc3Pc/J4xmeNG6vMaB1jvBg94AOjhSjeImzV3wCOclXTFyIYasJ4UQGwUmszTwWcW4Kgz6Q/K02fVuZqJLbyK39uoYecv1svj4UpPz2QoYwYt2Arw/JtY7gYTsuNcTnFUC5rcbVwDd3RW016P7UESfg+mSnHNDQ+mh7pdWHA3MUCKNQjvVb+AaL4EXzzwxtgjB7Y90WD8IHlK3y18cJk6ppGS6BtpIJaeS5pdyVYGi0hgiv5haoUprjtT2Fbld/YoJBg1NyYYeTMmLE6jw/jq63QI57WxS2WmducEAYOo+ZPM2qrNAL7W2BDsh/iJYc0nPjpy2DEMGDMhVFgqQSjU45G3RNWl1kpIpbjfrB+MsPLyihWVm4aOqwzOzHWATLBRg89WlrRV9YYemrGa3vrPWLb5kcnXhGaXn79+eekBS95lBu841f4NkoDNIbyNxvGe/L4kS+ccWT2HR1CmjEiGt6rU8WewZRet8qlJerP6D1uoDPTlmbnkB6f91qtvLA4Aj1OPRwJgDrlN4SiQhD+0rOHbguGupDeID14VjHTAKPRUC7LkYsB6/UZLehJIy2JsrigzyymhSymasFlKCuvEVsFZAiWfiPQSJ6HGzTrhdDiwO9GzY3b19GgWa/MemnaM8VzKmQRp/m7ecrS/ehXCizGgOXofFDIxyII9cK0m0q5ti6nIC8nGfm1eeiwwThRcN0AaQpD2ndmTF+/eWtDhisT701M+yLZRsAIQqnXIJmUK3rfR8m2Zpju/+2336x3Z0OTtuJzVpoo7MU8p1Ov7pktmrjXWn03Jtmbf9D5jd6j9ezowW93+2QmFasz6eE8ffTYjESh1xVkwytKyj/eJTfxCsd/xPm3ZXzBGyMyGK907kuczFSuz2gtac9cNHyDovYuhQfxTsKBp+7MiqSUqzEs4IxeQNyIWatjMmjfzP/5q88P3bZVend8M/CwAfiOfVgMsf3X7KRTemEf7IcRYzEEBoyWqFqjgqtLi/YEdVmNYHC7hg7FTnwWWFuJLqRIg+jFv3z90srMN5//6alwUwz736T1GoYo2xpsDYfC1RvyHpdVamd808Ktp+bRnpvhai4bVwJ7IuNWx/eN4WL7CHOExfmmIlK0eMxhNF+a8cI9sV76NGc7ZhZViqjU8u9oXtYkAC9TCu/fDyt779+1OsCM6wObX86/7y6jBaE9GUS6hZNWFhGtgD1GC3ziehfRiaGYgVNgzSNSIg2cwmppGuFUTH6iBQaNnw1B8hzmyoYNwHwA6p01UP1VRkXdsvHzA60um7D9wpCcGS/2UvGLPbCo2lmoA0qekXT5oBSHDn1y2SaYE76iYAWsiiYqSVeArQcNMn+wBTCvbLkzle22irCOeW9MLpdyZb+MAyfeG7LTM5hPu09vyBttwr6X2zQdQ1YsVf/l+fPV1X6Sc49ccM1CE7aRlFZlplyV3vbLTcoPtjz+1ds33hBmfpStK1EeYVcYHJT8e2QvSZOHqXHIql7quqERy2gM819mC+KJGHni+C4GEUj+GN/tl0a6E/TQqyEVp7X4fiYiJvkXqWvKOU4+IQU69cxohepEC4A40eL2LZszMkPmPTLrcv+1O/Qp1emJsfZxbxuK+moGDMMlI4Y8aR4oFc/rdej/zTtbIGELTh4xoW/DPglvUbgCayvRhRSlIFvxar1AVqlh9H3xgvdISrCXD4vyx5yJ4Xu4+GgLe1iC/9xW4t21ivYSzpfcmx5/NcNVG5qPdI/kn6/KtJ5PMmQXkRf955RxsLARmG0V92104zHzXTbkS+GN+VTKv1JYkdUTAvm+OBjgg31fHHhAD+zq3//f/9SlBQmiUam4QEJ7sPSEV/zFnwTpoirg+Sk+5hB8LWSkkJrXYImvuzLtArzYUQKRV3ghyZEgkaGi90UPGLKvlsmfvjhabQJmovPQJtojTDbSin9AchURh1y0uphL+WaLWu4z7m1GLB3GUUpSyA/G63H0BF6/e2OLbr658WJllMslVqKQI0uR00L0BsZFZDh7kSEg5gdYNZZvN9iAdBcolUycUJdc4lDvu5BbYnoJbKL1Dcg+/yTMuzAWE2H8KW8sU28ZrkOyjJSHHuQr702wPL0f5zly09jRZnbfD/iQLRUzF/KJGu/49UQMweC/pKMewIBd/S9//L/ETx89E9IT2FOOfTm471c8TQRg/IdX/jGdA44nX5hyfCm4JbmyjwzhGfbC2BGO48nGX/6hzOGdsAF+qUJPdrE/8DhKWach1QAcncJj2En+nJTQMoauTcAMR3zlsFyMl63eO+NYJtE565nLIZUpnI2uzCvRo6CcMGnLb65clOIsjrbhoTfw2o5iYpvEI6sAOC7KCzZoYE2CBLSFoBC75hXS+YnPW9FW+TJ0SQ/wGI01HuZ4NtRybqUvmrBgeMGJvrgcQvf99d6Q9W5/sUN2b9t+yQn5PnTFVFTkGK8/2CrJNcMv2YqIOgIxHC9evrrBUQisLlyjNxckabeDyAoIBuG1DRky1OyH8FrZRS5RkIzKPz1Bm8OskDoQPVDtHh4UJTGv961PyE6GjE280aiZf9jgyxJy9kcN8cPJFvjZE2Xp7Q8ZDS/a2Gv1lxs8N2b2wuZfjhuiYrtlixgGIydVS81buR/gu3UgciJzjKywVJ89fKE39cY+fbajjGzoTccyTSv4UOYPcFCVyqKq8nDeOduNfWAfmLi1VjEbmX+6b+edWQ9s2AX2AwQIJJlUpgLHPTGjwYblmpN8xOPf56LGBgw0WIaJdyrDJ8Gw76PQk4rK7y+22u9hWCEn+UrPHpwlmDe2ehLj9QvHJPm2iaX8pXRbwl6bYXxn5WvtRIso1xb8OSyGkt8z5u1syG7dnS8zt0G8sVWpn+yJ8WK4m+4DlKKcohzD1vk9B2Kz0YIsjJ7iJPkmZFLfYPyY23Gj5gZv2PyLIST863d7/zqeeGHJaI37cU32dD/7pKwXR6VNwefXI5syCrab8GJVTxLgv5Br8lKhCTvaR/VRRsyMPAaM1Wg/Yjgxl0Pqy58SifAPNnToR8bY8CHLwFk6O/e+BHn9T4Y0qYjYV/X40U/ziq0KK7nsFbBKcNTQAEKI5rrYi1Rapl5BtjvYV8jZ/ir2tj2xii9yhXx6301gTOjXjVjD5RedDn8UYSG99+psuHVtVeFZcvm83avXPnrQPEPwUhXJKAgNQk6x+GT7Av0MTIzXOLpVyr9SWEGdJwRtWIiRUzv2cWXYkHiDK9OW2srI6Je5ITNjRo+NFqGfcoFx803BQxgVnY5oYhiNjNIm4GjUyjwUhBA7MYHCCuBHgiKJvXhgjXF2nWjB6h0WdLA8lgovzlfspdFKhwxRPXrXk7S5P+JjToU9VQwh0vtiP8x1VNSRh9yPPPDDgo1bt814PXjkvOVweke+7Q4qUTMpBq2MK650TEFPeeP7Ymk3DR8Whqi1DnJxuU/OwJ4hYLUfUwuPWb15GGHAHbzSna9cbPSAziKP7tjEzVD44gzBwNfsjV/MHLrbFwTh+39j3xPD8cwl8z0xrZBTJIlK4G66nQl39bQi7iBfDN7mzzXQlXqYFyuDthCK4yUMIW7YwskWnGZBj40JdgrTYMAwZLbx13pmnOjQ7KVFMiIN0zG8LMTu0EhmN5IxIcOJvhmYDcH2w2EEWIZ6qV6Y+EdFvf4IC48ML/ueKvvYrJXiwxzppkWgrtGZIMaGG1SMF/rzyjzUtFFWONP7di7LhYseEKdpcHbhsyfj3VXbkXenoOxguO6YUXnC0U9jyphX0d+NOACSnhWFKIvNwZcaGuY4JOg8iZtzAx949+dXhmh8xViuniHosOX8LmPdEIpAhpoiynYUbbDnnr1HNppBPaD803MD9t2gh40WlE/JrB16L9OV+moIY6oaTFmfQNPywLBRAfgTA2fzQlSSfhuwGTFuzNVtwN47i2T2ky8zVQiNJArRh4LoyfAxMYyBLljBx/4JKuEzh+OQQWpr+REGuJbMrDh698GGOmzZLEMdtBbP5BUeutwoCBPuOg6pdHxQS5Z1OtKGtJemINTvrrI8vI7hQui9sKtAHv700MtKnpcpd/vevhvS3168tNNkrlymZmHYR8JT+Uo/M1wsbGmdaHEs/1IGMfzkF99c+Qiodn6n2Da+jYLEPAMDw/AMedOAf8g8sm0CVoNkI4Vd4IeN1pkZNNVSG0Qp0y9/sDPamGoNdk5V8gkThcsNmm/+HVbscbX9ZMxs3sxPtrCudXI80zHyJZYu9c0uaCGz76HAiNmqI+TznexmwNZXQC3QTQHSafwcS2EkIFxwE4LEMyuYhgar6uiBYWQZKrv0cGfCCi+BYQw/V0kwHE0LPtdZAF2gaQfMMtfgNOTlqwtND5d0cPPFeio0cJRX4nC/jCnHNAS4boTW/xNb+XYpRxmCDof4PjZD3HLIdpbznp5tSGZojg3k5UaXtHoS1ZA5kkX5x0Ioth/QGGQEii0oGHLNe53EQRHNKUZLghQpbAncpfO9w4RbGKvDhnwtAlGxs9CBeTOOZWJ1DsaNr5f9U3S1qTgvsRFYBa3I2MmBZJ2fJ2gGjArxDAMm/vNioXBEIC6+E5Y6pQZq8JMnHIT7ziaauZX50QNb3deYq0jxHXyb2XDG4YhWK5c+xvmmtky9PEj2MjwVsF/X7j2U61ldCCdRNjiM72VO+0K5deEvdmr7Qxu64goX5Xdf6n4ozdf5CSSVvVVnyRS5QlfFMwTHcj1osp3nEV/TjwBClQkTXwFh+sD3UVpjEJ08sN4X5xtGuCatjZGHjRb0JN9hJtGAkHULMiQq05bWc2Qikj9zuG3vZR5GHJEVA6TCwHix5JzTz9kIzPJ8N2S26IHhxTMMWZOnbeJ1QyOqF2QrxBiwW2aUaYml+6m60SWFf8jt9HuKYWV5o/JnuoT6Aglbms7p+9yyeq3Ga2bFb7lleTorX33yPfRKAthGb9RMOSkQGi5khdx19DzJI+WI/PFZ5rQRqsQGwjFnGC426k4HwzaS7o2i4YPBxzFsl/d8xBLPsx3DlJQVTrDgPMahh668hpq0ewJlCWKomNsSFVFQNE/1vvimWH3I984qXgzZme7qf/i7f/hOZQlDw3PgDD9OYfmTjb6EsYQcS0OmDe/a9OvJt/+RNranTCq3OXkL4SDj0UyOWOSf6Xf4RhYxZGwEZlhRhswXe1ilz0o49co6ME4gu/iZUh/3IFo0YHfvWUvMNtzet99W3oAHX/4Ul+v4ymWB0MR42XDZdJiokF/qmTGtJdZ88L7kme/sEO2yzDlKDRcmNwbnQCe978+/PgYYzfjtxe/DJZLWWLqUQ7N+eobN8bC3Km/wRDnP5gHaLOh5axvZfUm6lVm271zEjWijPNDXu2iKOnHM97+z7R4cgItd0OntuXFX2i3Pq3/453+xxt2wiZflTRDUO28W5O+KAzlLxbU3aoAZb/sVHkvHyRaMb06nWbh/Nmxu5EzJM1wwdjCx2dWGCXch20xdCZRxel88IzsCjmEhAcEMLbL4gZYLvTL0rhuBaRWvreATiYD2h3mRh/1UjIPTs2ReieOOegwEcpBe8khlepdQEUZhw1Mp0tD4BsS1GS8JBAOZEAw/ceU8LWrvMZie6nJFCUp+pVyXXyedT/dXldCdENYQ/YCcgTEjwFD1i9evisYkQJ7ild5q84NZ9p5CU0i8rNhIAUvSHz5kWPSh1alRw4I88BS68Ql6lSaCoovhKnnM3bJJm4YR3zoNMjbbx+OiIo41/ynDgyIiAWBWRg2LixFkQYJfY29+wjzeRJ+uu7dwhGBSGst862pYSi7Dh3FrLi0fmRAP4ilVr1Q6x6Y1Rik+wrb9oq3MakNbbA7YQZ5CKgNGpcadXAwp3rsznMXHkKL4EP38XeE/8okcGAh+lA+MFydalFpi8C9VSUWlMORZl1UY6tIDIeN124YNHz98dJlhsyhEgR22GLAPicYJLfl9H7nkFbECoRDUu0IuJNntpVepYXAhWc8/Qa48DZEbE1vt99w2H589RJVTn+YHrZ6it0peSeOnyZQTDe/Qp6HDgo3HthBlOLhZHATAvV6hGoWJryphoB6ji0aNIVUMF98Wm5bv3ba9n2a8tq48PtVoRaa36gbBMWQyaO63Y5y4Y4lFDFRsX+3eICo7Gbd4kgWVnf/sAy/fNRVVG7nL1RzjtvsjNvkXWCIrAophiwT1AAqC9lFR4aA/CoKfLWgGTHMUkIGEyNUxXn8MfMuAwTvGK+9Biu8og/x6wjl+XFleQQpqgK39BYrVhvwY+mFfVcmo1tJ3h5eZ9eTwwPJ4dIThYvXYPtcnM7ipALkxmM2kHEF1CYfI7P3hyCdOGI9nFSqvd9MN+qSS/N2uNOEKECrHSzrlFcYSejKUYgfah2VbEYBy8trKK2eMknenyzwKo96WZJNcKmUxnDDFi33qLVYckz8fbEvKcIDBHedXdZZg8+fpRgsCOYM50e53aSBLgOFiEQO9Nzdko2HD/80MHDUXLeThNIthEzAHa962lXr1cV9xXSGa8dB6FaYWjMcpN/Uk8CB59cQoEBRgHBUuZ5lhCPa11h3Nxf9QkDFetMAZjmYYgR+GAp1KNfJLz1JffMKs4peM55BLiBgCX1rh5ydh2/zBqXqsMzqxwXFQr215/P5rR7bJTDmKlxV2sDjxusXD8Dd0vJK38gkdcboFzwI2IPKjkYzG2okWCxw7A95zX5WdRJ/n1aV0WGITY8CdWdSBnBaSz7eV0qyGSYAxg7LXKd+IxikL5PfAwh/gGVVwA2Z8w3Oss0RHSS9itCbk8hx9SgudeOiVuVGzD4/5IHofvuTc/MzB+WkWphjfL+UH67Lk3I5sovmQqLqTYAVMyh7zuAwVI+XfKG8Z8RBKq5nC4JuBrYJgKfqDuzambBVEvi+ohee64yjEGDB4p7XIcAdHAkk1+QcRVSe9l3mOkGWIWigVuQ/BGG/Fu7NqCXvCJVCDecryi7BXZ5/hlAbXmcJYs0KOUyae24nqDdbWkTUgyGvk8jusbNXsqXRcr9aqt7L/wnpcrRMtGixujiKv0B1lln1VUabo34x4QwJymm+I09vvWoOdrQDq/W1AUwRVT4tIV3H2VKL4tfXKTWOb3irfPiNufP/MhTGX7w3Y3ksgxUTvs5fBVXz939gCVYkHemcYNDdi1jNj0yNhFLKbNo9GD41VejxRUGmOaEEoC4h0lWkZyPwq+WIiYhU+Qx72UQl9sq44vTAqCrVoMGD5cNxhYichgGeOj2GIDoP72Jali1epKKpOYSIf4xQ2PIEkNk+RQpXeKCtxefpZFYHTqjPs3LKs+JVVhtd16y3a4fiir5YP3GG1z1CWtDiHITK9a3qz3BocaTTUMSPo8Rki8o1VhWsnWvSg64Gh7PrJJ1bHPH9ihxVbxatS15P+HBia6eMwt31HrAt4RAPQDMFu3ZIwCBLxEByd4hSu9wjT8qvRzWk2NLz9hKE//sufOAXlYu403JK6i9NBo3XaS2SE0CNjuflnu0CR695RGAsd5uOZrEdmZw5u2T9V52EUZGA1KQQ76tEureRADM3QosGAMXdIi4afjEIO/yPfUdN7W3X41lYhMXRIq5G5L/QbczPXt9Rb5j2mLEO0QrU8HZ1RER6e74rC5IJkjHgL2ibe8yGoDKzyKq30yQ+U7+WycrJ2MWKFYFcwp7ZTJqEh8cVpF4Ia0ITMRmDYx8UJ9Becr8vZoMfAghrKiV/0OC7SyOEu+z4YL06x4FoXRqM4wWJx03YvE5WyKlULjUqYwo/kJ2kpH1f/VRgtSS5NbHhKWWmSNYRzKrKanhnGa9g/xY3An4f5MnpljY3AM5aU+qa3NVY3IRuAS3xhoJk34RK4v3YDxsKT1+/f+gkjbrys96XFN6gL+aLa9F6Se24txBT9SqU1/cYqW4zIKUOGZSYnhqIsGoJicQbzNStJJxyzZ5vMGBV6vH/z669Jb2jGt98n3jlRnEskWUgkpzi973oGJIyyXMd8XeSTcsLQMgasfIZghD7bv/wq6LW8fTtcPcJS/c1X+UifI+rstfr9iZMjErrRAoGIHkFWSwvuw8yCYKNry9RCqJR1GCr5eSNwasj44OIeqk3yR0XVyW/UxBK8xZO65BzNEg3YKZO5S1Z2hcA/lTaVKD3FB/bhMezBdgnlnhBLpXoqfC6VxxWtIUNwc6LF2gqomYfMFzNmybADC4QXWsy+utB0wWKGfrr7ZP4LQ4VW9pl/isN4mRS7XiVXLf92ISVRRGz6skLiUwLMOXHQ63A6/G7smxJiLF7afVnkE3Ndt20K4npcOb/1DfncsfU+ufhx01y36TZRrwlTyz8VZz33yn31P//x/7ThQftnyqMQ+h4p/Lbxl4vrmPfglzOyhWAUaku6BWxZ7wuwZUC+8TiqrYZUEtfil1RkyPxoJuvG+h4qK5xMgjKkyNxHdQhJZHJlKXxJ7nCIJGwhmgyY9SSoIFkGTatsU8FuETghDh7fssHSjBfDHbQcVaFGdaLKusznKJoTsGlRP7S9Mo/sQNU6vYbgnYkimIYq+zYG55rYJjvzeVR2l5jjQqbIjd6jrA3NtaOExA3XQIf5OuYJkUXRbSTHY5HPT263b4rhQr6ny7uY51HDA2UWGVF2OQOTWxt80/+4mrPKW1TYiJ6giF3veoJLfp573NW//3/+iTsRjZKdk2zUaEXlG3+prHCDAePoJgzcbNCoiGXcmChTheGJxj97GYw43B81sogsBQwGi2RLHlrIBN2CKdGbw0jJUBYb6VjwwWQijYPhRmCMWMcKvv3kZ0YqPklYiV4E+6oe630xFMZZfRzHxNxAKb8XiS8YgByoCePFUB2nIbA0HeOVDxuW2ZCShakM1RsKHy/fvLLvaOh17V6oIXYaGRVBMCTsr+pfaCC5eyUb4Ej10noptsHEenfz/NM2LHVoiQudkr+eshEjRQHiSAfZ+TsvltjSU23Q6ozie8J40UF4WjjlvxPNRrBB7loihjH5vmkEYQf4vrsaqcooQyxvLf9ieI2PVvg0PBiBRDSGIQxCMFzkfjNyOs3CDd34zngxbjjBYjBufpKFVdYYN/ebYav2OCLRkl8St3WfpZyB6VXObg6fw3If8D1webr0XViYH6OwMqHIsBY9Wyo13xBsO8QnvWxlMyW36S2S6kmINjAMzIGxElEbgn/k8GGUgRtfaTEyvPmTLdjgIFz0jItwHjD9OZ7HE6rRo94PZ8O1r07PU47vYhbW5C+AxigMZv/GYMkMBvkLBApBQP9u92TxPV1ieC1ylPsL7PQFCRFPHI3x0a+8uq4l8QMDg9YZJWCY2xsb1tASe4I590nOSRFtzNRTOr2dkSIOvWYxyaKRmqOz9xjU8rc5KMde/fFf/+Sl1RHPeViG7gzFqGHI6KHxpOuJwRt6cfbOJmAzcqzKu3nrysZ1edq+Kbtzih5bct9UiaZzXIpoheVDhDlsDSmawdXih9jev8ImeFrHFA7upaInhlHXnoRkM/A55EV2eub8TBGdnqllZkMLOG+ZWSW9KNid+LaCebkdE8kvmTBeb2yPykfT65NHD423Bw6Zw800z1cyZf+lnYH31U53YQK+f85p5mqtFpO8SgFNvzHYytK2BRrb5AealXgcxcSFkmc5yQN+5RWNPXSnsMO0RCR813yHzHNNq/wOE2kjkGw8qQdev7HVk36SxSMbhj+wJL1N1mK35zOrDumBcYQc+uE7Txqpkz6ndsCUVzHP5BcHUQerbI8AQ09rTLkHQS8hwUk2GbZo1CiYwz6qweANe6XYO2UXJ9I7sx9+rxAltRB3PQeViYc5SQtZhG7BzdhaPmEbOEkhCVMPjCFFVinesQ11GDEKCMvtL+XE1xH89Bwp2D6pWyrYR5CvpIV/6VS5JJnYWMrpAN/NcNDjocVYd0pdh9gT47e9Wou6e4m6BIKYBFkhHMH4vn5/NfSE1jcG75cZOhguKjJOXjjTSR644zR16gOGpBV+jJZh9d53KjvyvHjJ0OfQyLiuuVvJxEKNV2a8cJRVTrK5jEvl7qVBg0jDh3RKuAyTPHE9IQRoR2EkU05J4dAM4Lx2uXR40LBdGRYh0rMLUycQDPfgpfBQgTPcSM8MgzZsCP5qOrHemRVgDtXFiNECW+2dBf6i0uZguKo5cV2L7w8XpjIPKR44+mgtHAoyw3A4KgcM2CX2UvXw5Eys/JkKtvW+mMN7SMEe91StJD0lOuo4ljWMKcu2mUPgEFzmFsuuVRbKKXpCaU2/sP06HCn29HHnAbgSBgKVDBJIHo0UzD1xxt/6oon9MpPfw+WLNo9oveyzHXJB4892TuEjW7jw8IyFC5OyVEJS+dnozJDddRz9VMo/PwrKGlrUc9yQvHtetJgZkpnIVO4ieCWQninDqnxX1L8YWHqIjJhRVktyibKoTtkwchLfK2RtnxbDgxGD+UvEagj2hvcwV8NNAfZ9U3YTMMaMDYNsBsZxagJKQ4lYf8Zi86GqOm0pokZZKdfgaunn8D069mHE0YAhNwUZI8bdVLmMM6V+n6TrT9GGREssROGWYFZUsjhi836QNokkVvxDN+pXuUUYa44+2CZlWrP0uOqbgpUqIXH4Bazar/N0PCWhC6mEqwBLXqIjKPS0MRjD1e457JeZuTS/fNEOv6XlfZaLclHm6dXRA9m9KTZnLCprqggHIBqL9Lp03mQCmuM5+C45Iw1yg9Ng6GViECir7fzbygQURHlr2hkeLNOt5fa9M9XDt0XjunT0mijqKUxRdoWVnoueFvlGr9k6OknhLyU+EtbL4CoNNDY6N2ZWsGnRujFjQ7B9TCwK8d6YGTQ2Yg6GrLSMPyAT0umZq3iK2OWR/FCUv4hILAlofKcnyjwYrRyG5Tg7kcqC5arTYo4iwnagyLShtseSJ3yADC1o3mvX/E4naeSQbvMnKDiWiJWG3ENEZbCsBKX4ToIbwcgzztuDLpVwl4tCVRLU8s8P/DX9t28nlqZAvl1+8phFIGf2TqLIcMR0AoYLvbGnqCZvRT1zsBB7iGHWe4aQOsXPX7Tw508uc4zVzFS5LuBb14HNWtRzRiN1oLs9nyO/uR9szHtxSAFG/7vpjyOjMGI+Rz8mENVM3dM3m+ON79NCDA8EkzIveHPEEcER/2l4pYECM0RR0NkITGufiU6GHbmqmq63758a91ENBaGBzPGL6zW4AjNZkDBlwelrJBMThPDEgFlhYR7svhkvemFbDRgkQB1JpQwde6MSYH7nvf0wtCxLZ87uLCe+pZ74LtmgJT+Nmxd2IjdCsyl4GIaJGhCmszic8aALFkxw88CztQpRDEugGU3RVwJjtecrOym+dMtuimS/zDLG6zRSiq23KDqcaYUke4me2NDZYZcoayk7IX5DsTVwnm3pHW9gTCyIut4jCsoLfNBQZRg27keMcNv8UBQ1Ud+GoQg9oqTO9ca11bls+6FRPYwO2Yn+1jsCLFIVJ0WcY+BstGLKLEUPoixJ16sYPgV/g/+cGUCnnhiGDINmlRc9MiotN2QMM1qvLOUt53gD0ZwJe8+xFUDqFqRCmmBuB/Ye2GjAaOVsHUJM5S5ydigQPul58btijskqn2Q10iHsqW6hJXlKfsI415DVW/DASQXG0piK2Ms5sMf7slZ7nx2FpgXCBmyWqv/6/OeVlYz75YYGc2k/2xmCq/J0qjbPPyrwP1uP6xcb8mSBluI70VXATOZxa0RalQ7gfFM6Q5AFNef1dmZ2euSgrmK+DX7oeWHA9g8bks8qMTMfh3xCF554yTM/63Scp+cIvHvWwB4use2/lmY2WuJSMvBOHir8gs9TaMD3RhfpkhxDxrwRPTGe3M3FcfiDEbPFD2bQhjRKuYNogUdhK0TNQSIVgRU2QyU+ovP9VD6EaEYsokkS2UsrLoc9+g6PfhDuu/ONF3JIRSW/5AQGP0OG7JlhCJMl3LQIBycs4+sFHtM+odacUM6wGC/wI9BClFccv1sPjzmudkNhv9zq1XFq+/4KdeYeecSN/NpGM/SOZ9jNPiF0pYlKGQujGtOcZFJGyvB7Q52VlcQYgfkUi7ve89qvi7bcK6wsoxOdpmaRKL41P3jB6llW93Jp5R1uMs6M2BKx4fqf/vGP37Xhl5aDn3TBHVPWenG/pUKcHiWWCKyFZbKtgbfjd+q9LJvtMbNCIQNGbwxDxrUlFAy6ucPcmCRos1aLVer4rMFWM6JDbj42KmMqk692kj3zSlTKtUIedXLJ/Jes0KCH+Obtu9N6XlGnUQb5eeIiHO8Mcfk199bbZrNp/eJQoM9zlC/muTgqi3mumAdFKqsAS9mER0al3hvKtaOU/U8qVHoEGK6tw9QlKhI35h/+U07v80Jg2Don9JmveWlDrexRo2d+hny5zJI3D8/f+bYZsUDf1Nv7rx5RnucUDry7Xi29PSVPzD8wEy4jhgGjzmWh3V0zYnQa7tp3yOlBSn/1v/3Tf/pO5axWC/ukvtkSc5aZ2xkYZrhYicfy8mHTL8uF4zX3QgTxo+40XJt139p4PCPDNxzLZD0yq9gwZG7EbEiJBR5Hl6F3yS92IrDCOjOAOQE3YGbE2MyN8WJiOx/uiCQ6UR8GQ5QzjZdkkIp4x68nDAsGvxwwtKjpBQ7n+bGUW1gEdf6Tb5GJf81zlXibqDYiFSWO9T6lNY8MV7s3JAwxZb+fLQY0ArhuJC9f/VhmSOSAIz2JKclG+C6XIGvLTqzPdZmx6N5/18mU2JCsPcmAjVePsFCFxqlw9eAYYNpy9+MJkCMTPCSTqET+FIYhVk+MxtxsxGzKRidiBPTTt8lFW36KhVVyVHR+kgXPce8Uho5K7xY9M19mzvFM2SbgBHH9JTJeh+qIkdQdoBGkTL+NzPaqWquA+6johX0aFEvLwLu5w0nvkUbLL/qiqPckTYzED1B8JsDrLySlYLyzipl9YDJesfdV5GMd9WEIeMN4Mc/ke1VsX9WR+RHJEdUVw8SwwvTOB0Ov65ad3MLeqku0qEVLT3jkll1O0eDk9iJNGAUQlzM9hK5FeXy7NyRtASpinmzTH/SnvWINVrtxSnThipwprBtZBBRiZN2AyMvIhc4Q3MBGlMSHgOl9wRvX9zy0o8z6Gg1RmwnK/S8SAtTm53X0Os5IUaAiJjiMGI0f5vPKRosUEZO95oQE4kaNfVKjUWNeyDcBg3xcoTcYtGHfFN3X5QIHsA0uZ1rhm54Z7z1p23RbCJXS+qWu2OE4JgoLO8Z9rwL7FVbmkcSjsOm9+BQ7EVhhxQTrgbTw6X1R0GmI0ELjR0GPZNYxnQuBWAwx8UOXtGiLlXiDLPyDJ3+SJIbxLjj8coQNLep3vsqPcffrcPRSWJLfXqZunORCjMwpmFf8Nfd6nNSv94bQwH5Hak5Tx51xTmEuV8wz+ang2vN1zs7yj5BPCuuTHSi2UPD9sKqPXs5RN7FwAFFctIE++KbX66I+mTexFYSRikkvv6KVf5EDxYneutESVqUYCYXXoheiGDR+g0Gzpxs0hh6/WMtVm395Div1fB6tiG1jYJR4Q9JB1HyosKRGIZVypNaUMAWGj4fxb8ZpNRdG4alNTucYRWnxFFsxIiUfY7r9oKD3xYZgzkJkMzArlOjlSMpuZCcC0iDQXhVt9uxrOaZM1PQrdeqZpuLNWnr0uphzsv1wj+0sw+vQhxZorC4hbzBTkznKSG+IsxrjrcExftGKTSNX39CrL++3RhCyHHW5uMo3Pbk+hc2mzDflsE3aUpYDGbZNiYczBJ22pedYq12GM2NQLG1kJcHC9zPMaX/0epjpAFYVl0cv0OIFnQmSy6J80zNSz8PqRkupMv7PUCAoNdnGkOPg5/R4DtG1vVOjEUOh82IHMdT5lKQZ/2upc2XO8D2IpJ05lXzqhTEMhyHTXBKFWsNxSl3nYcSWsxIT5nFiYMeT3hdDh+9sZR+ToQwxnPER7mBlSgJPzDWhw/Km4Am06pG6IoDC9CQOf+7Ix5evX1pD7Nv+A3BzpCvvyMoCjXRF45hITJLv8lfwtaJJTm+I43HKZxUeL1jojo3BftOyGZMzHbJJBTz5vTR5GJZkiLXWSCzykChqu9ykwEDQO0dWymnZOBSpLwKjbIvIHQE0pmkMwSOjXhgvjaos0W2Xf4kjhFSEicGRYgwXls1Gi4QguoSjULMBjRafhhkxaDrRAgO2yZBF6TcwXJevhjBPUYMbmCBWk4wUHBzzSflqvlKGObD+iMw28krd/YQMCxIwXqyuemRj5PQ2crLdCE8A5MN7aZuCrciETcFtxOIXeXK/VAmGPC7FOqTGmGM8qZAucd5eSnNowXPaRPOSRzGeJx5lkow1MOJ/e/m7n+lZPh1eGAoEOoP4xv/05z/7sPPf/PprZ6oyGHIMuTE8BSX5iNPQctHgK0HzaVgcoag1gZPISJ9vm7KydWhbCKNM8itu7xP+fEuM1UE0jGiQMqrC88o1uxfzSjoTQDLAA36ecnmcwvVcN1pARoz2uoZUyPc+hZ/0kMaA8aOiihuBZcD0LA4XZbyv80SC1jxODaG4HtIvlNYgzPwXhYbNgsyD0fKh4Kz2aiKpSL5B60gU5D4Zj2+twuasR8buS6sOj9DYmnYwHsOm4J75LtSkHIwqkx/6UusaL5TFzQfgriFtxFP+i5c8RqFIH4UJ+ARWiXZIZKc3xDfFCSFLJ+1Ii0uItRDR4Kr5snFcw7CMjzKJQ0Gpp6ojkCKsYIpPAdIykr8I2A7EUGuV4dGh7Tal/bHwSAOaHhhTOunw4f68LnIkXaJW8+f5pXdRBVxh4OszWkDGVCM20Sb6Eq6GH/KDEbOlkLbnSIaMIQDW8/PBsfzcWzUjr9v4y+e1lHoNmThegxO+5ZOKCePFj24Ek6bMKyFT1YnccfJVEooQCQyt5r2oDJh4LjYalPCCTz44JsH56HqGDJEhqiz3S0bC5U/Zn2MYTmOei3xjwcSmYagUadcb88MYLiqVZLJfQpUZnnD3gKFPDBeNp4TGVAlIYxPazR4wcHUKKMvDkX0oJQ/Q8ksFcy7Z/LoNE9LA4Dt6Yj2eTc4RHpeZvPObtQ8ObW/ifQcwZRnj5XWQZRCjKvfvxcMVdiDNk4yZpDwjWv4xKiltSVhxyXtOQO+FfMsJCfSMpxjtwQVrDLmhcD0520oGjHkyhhe34KzDFhQxMRlTteCmBFUPhpmbQ1lBpjkwxp4XQwyQgayewniMvLAsnpEUHyJDMBgMWpEMlS34W2C4TAB5ryHD1oWLeQ7pXeqT2vLwlGtBDaEsHadC2j8MlWJvvVEBY7i4BoLjryYXM2YKTD0CIVTypRDDGzQ4tZ0FJ8tT21PZS+l7wsDSf3VKG6Pk0hNoyQcdhXs5tW9okxOiKdEx+Smn3O9Gg/uJbeV4YPnY68SKZOpNtxfOR4GsgYoB+2ojCwxzcrACt5Wf0kg1gXKZpN0YHvnf1tNSyhFbvHtLUWc/xfgevBQOemGsguPgRrq97LBG6Sx+aPZejCC0y4VDoVJvzp24rsXn8PV38eDDh2PrBxkwXsm8kkiJNCgVVke/OyaSAUlivMxwMXT4o4yXhgw1FJPzGoWWfvUkTv74jGlSP0oeIDUM1UM3xbH9DaPyX/7yFz85I+kNRabFWgE9YGuO7wfj+Ozpk+xQYyE+XsDAoKtTWLl4RpnpVMGa+EO8kPmbcct41kkfFufwMWyI673wUdR5Xq+z9QZWf3o9ZLdL+Gpo249Kw4lpjM35JgHGoiS5kEn++JSsDv4f7T4tpVdE9TkSmGpy8rAKfF7EWTRYqcgmYFbwaR+VL0P3rm95GXqbNgqpOaVswdTSpuHCRChDN5yaTMX8+dMXN14YMK1ATFPa23HyC5QERJ4iAJWphuoYwvpRxgs+/Jp7y3N6PyX9IENUj2QiTHF6IqPi8aduxgJdTrTgQ6bXeUprNCU2vVGJcIYgrd/kehMxXWc4kW9CWPC0D7+d5S4k3RTUd3VKG6XELeWf4toYGrGJTs+TG0ycYvH63WC8aIDwPdf4jWxIzgbXJ0eJ4rgn1epRemDUR7c52s5+lMW1zkDCVBBU3pnK/B2SZpL9v/sPf/f9JqdZ2HwQ+6R886+eNv4rRBMhMMoJi73Lu4AX7IHnqbgD/3z00YgxnEhlo97YUOEMKizLFZAt5FOKFswiUTEgyj9wM4BRQfrk6bghmKuv798dL4Q8j3yRJwIjXzkQvDFs6JstHzJs+GPmvHRUUW0SXmoS/8qtKJt0rqdgh6dSzKGE+Mnt1lPhUNrNrdAZ1aoPPTOMl8xxReYrGARCdK6DPAnzGzRElmcILmXP0255hw4rMpkbLDUyWriiPMDpvfSs4Snnb4B2ZAbFc6IQ4g96aSAwT9yzyMlZMHqrPB/kaU4uSjxTR4j3wNyA2R1azMXb2oLh3MDKiJYyZkTlCzJEwsIUXXpe0dNabAK2zb+Mt+qYJo7RGTYA29OPa9pyG3Aq4N43ZdLe9FO6pc6nKIZD6IF9+PTBhxOZA1PrAfnLPDQQTpiPe8q0B7xwMG0I/vjZlq3e90rMWzwXZq/FF9zRMHht4/cM0fr8yP0HFT0OslziLxX7K1seT5nOe13wH1UkeRQW3wWrsCWvSjXE0HvAcO+phJe46yHomGE8erXT8nsxCUvyZyjW5ZkT0BPgYr/lqRmpzHOKfT5a7mx03nuRpEQVV/F9TV7oclgx3/zCLRJLsaK0SLE7gDqIxh66oLFFnpYW+Ei23YR2JVyXd+gMMC3DwQrjyUAtIxYEkVdU4jt+13prIQYALAbQqRb4ObiQU8L9iCbrkVGx+4G6Zszwn3LickOZEqIBsh4ljTQgGYZzpZviKTy0lumFDT2x+cThtMorIRTHHURLybOwKeOycL1SQVPg+d2yxgYF3ue+ziEvMslTEiaB2QsfIhUfhzH7+L0NI1y3U4XolbtV8JFv+aWmqGfCYrz8Kf9KmYaqp3fpBRoyXMPqSVtoENkpMzwxGmWdAgseTnqgYUfvcR72jIQKiXYEaW6wuSdtBW+UKeZfK5nTNcOF0apun3DEhtHntsB2vvzikTxlgQ8Xpvpws5XZ2AONMirNZZ/S5DaZNxkxhDIXZRNVwt3fMloAlRwJ3ZC5EbMl59aKhrFvZtBuskpvNGa09N2QTRlcwtYfNsrTn6AGuU3njsWHEa3i/WxGjEUdFKJhEvLe+AG3kOZZUGNsPbxXB2Zzfaz57QeGG2zfhfVwqKznymadVg9ElKwHHsPB5DMXP7JyKn6EPemPwlBOX7x+ZXWOHScUDsCNcignFQbN3F/nQ6lnCFXCl96IjGwMFSZHPsH4iusAmTDouKfUcBG9lHtKtMODcWS+ji0fT2y/2BYeRS7PM3HYwkVjlfLJil0MV3V+yZEbRkcWKYn6eU94ohFKr525I2+IWv0j15JHMOc+0eR+mRdGzMrOPVvUcecuV5BwpN8wkhcpJP49RmtSQFYKqCiHEy2sR2YVO70yCp8fmDsaMiopjg45UnmekknifRKmzwNtejNMPtKKxoCh6AdmFDBkZbnE8U6iGWvClgXPryIDoPk/2QpKH26wCV/mPviVhhtmBNt9I6muygX2dFPw0ZMCtnM6VK86xzD2gEoywGseXgob+IgxKWd8qFMlvHWfUIqq+SYDOQ1J5sxXUneCuWlimfrX71+tx/V8zO+63BVyXcFU1px2z20KbGHYUmaRBxc5y8MGiPJfRgboWdK4YZN1cXGBEDqVMp4zQ5GFOWx6X8wbsX+TH9thevPvPH7g5hznRmxc5f2Fw9dN96yt8OP8rG5V5+fW2PnpX/Je40+8j1qb8nGEJ1obgangoyETM3rmaWske+Fq6T0cxkaem3BZZE6bD2u43v6Dz4dhlKmIGZKbDVhMJYVliDe8iu2ItSe5Dx3aUUwYMCZJ6X1haM9wW3mBJrrTSsOeTcFn8BlxUMHTc5g2R1tknjuSS+F9ui8XLuTV2XubD3KNjK/4NQya3JMlQVbS9oAh3fKcwlxDK4Q2RGtucM88l+TJuVN4iw3S8K1QRv/wyy/hex5TTUiEvYXt3Djmihg2JK85UMEXYVm9M7F0LrkCNmSG2smyG0owDjbD7IV1euj4sHWJKal71gs7z2ghVkGGkhJnpsY9VMYU15kMN1QOSybXhhVLeGFhs9uh8xrtwYANBYmWGgZs3k8l5ei5mdMkgXiAffkTAF6ibAHomzVdvcVmww037S40NqieabyaPC2Y1MnY284RLKDZFUSesTSeA3A5WJWh7eikQqlPsukZYQe/UixjCIEep52feYRRiRIVPXmM4eLi1qksSJBCIqLEfQPMUwL3+8sXNuLw+cbf/uEPoQwKQ4HAgSBuSnjx8pVvYGdZ+Bp/OSnBw53kVFgOm7/T2KPHNTdCAxI05j2Ay8id85K/D3UOW2C4kXzYAkOjubiYJE98+P1yMqNS+1SSym0wYLae4tDwIEJniF0PFtZbIBze/qB8nWTB/BHWleEAXW8/Hcs0JtiKX3QWz916bx/1NBQmrre3jXj2Yct4DcZhN9GJfclfUv8EhEcAeipsjJpuCbZSQmVAgd/rxNPe9NoUjI6qE+F7ka+kU2ue+aD7Rj/mEHJJffEJynWZI6aBCUI4mJaDoJ89edqBY0i39S+bdj/Zd+TXjUQhGojW5UkTM+TJHefPTY65Ul/KnKba94bxYA8cFVqcj1zDFkXfnn9r2C3eCRjmrcrrQL0FhGE2Gir8/E48+5apdy655SL9MrZwuwIbdLnIv8NGS7Tz0qBwewb6IbTtBR2LHvjo2H3NUA7jnPReqNQwYnwke3AvKENso2vTTRH6sNzYlaf1wHDUA9vQvGWMvsZemw9LBSsloMAi3r8W44Wx15DhkdVjNX21wtWaZ6I7btaVCvNnC9eg+DoEuOipcHbhPDdUh98b87vNCTGnzGKGyZXKwxhJlOSc4BseYJdHMRF6GQdmLZRgPrJ3hCDKtUW+bilcp8J8OfnX+IGNb/ajA8Bikjh8uH754xr2PP4C8iqjRMr1OrYLLIzX4z0tIY/5NBIe6Qni0BP0GC+G3T59ttuBbX6MoRwdyYQRO0Qv8r+R0zLdMkL4pyC9t0URt2/rhuB9e5ciXajF96YIYo0E8o9ejNdbriAxd6Tn1c2LU1r+8Ylwm2+6ZcOX13XNPVzQwPDLCm1IjV4Qk7/SrVSVqc2Zr8urVEsZiaHHZSRv/GrDeHUcy7S9IdDweTRr7PlBsWK+QawRVSQLDW2mnvdxESpixWSHAjVvx4pYyumai5zk/rW0zXhDxoKNh9ajYYFZ8kE1E14uEvnk4vAhw2s+32515WUMmKie9DRBlFd6gvk8oyU+K2U1Kp8HPuYAAEAASURBVFKgR56Q+WzDiGxa1XAi82DsxKb1VVzt0yJY4buVRAV02d8DWc0N6mdw8aMZCIbE/IZgel9W8Lfyrczs0q9kFGsVNgnmnh2GzHD0OnpbtMBHnnKSxPc60tKqZsKZjcksHLkOB12vhK2BwdJuesRRjpI/hqU8ElN3xP7pz/9mW0NuX6zHRcWlUzPoRXoG1VmaYmI+ToENzyuWilu5Gc4Q7CqRDWzrUb4i04YLabyysGUeniynFUcxr+TXs5yyHcp3wugAW2BYUHTbGlo/yinPoC95xQv6In84eeOLLWzwutKGEDFka7oTjvIzag//uY7h4EjhXKMV+R01dl2H6vJh0hMjUxhKxFHR+s8yJc/Aoloj/0WAPFAJlmZrVrNg8rTzu8aiWanERm2WpCeH4c6gRZ9kEyW9F4EJBBAgJSCs4ljW//rNW9uofNNa6o+7jeoqDxV6pWDvdVlr9tYt9nZtW/pcwtcTBv/cG4bsLNCgJ4+LapOMUqcDFP+0FU0sS7tZxnzkmo4i6TGQMobh8iX+OlV8hXHJ18Kbx1GBU45Zcj83wNry5zi2vIOZBgbffdy+UMOxL/9q2OZwH9ZGdttA76dY2EWpZwz/zxS2+1r5x4gC9STnHn768skaTVZXWqMfA7af75PzWQKEckpQYrRC3HYNxRQRkflLBSWCH/VLtoiHhRxkCvup8N+1pZJ0iTFizUyB910uX5ghJfQgHDQEJMNzrARinxs9r549VSX5iyKIlTyBwouJBtumpb/ob2hNpqvsSklzMiWY3jBYfGMVArcnX+dcF3MDTP4/fWwbTW0bA3wMuTVwXvKncucpyhIDxRyXb3q+0OIMjD8LJ5I9XGV2PFSypfI0EoxR0ykgvqilcCTSOorNEHzrDNOp19VafCC5IJL7NxNWghERi1Lodb2zMwT5fi+5tUGka0/JxrPlKHuMrKgXxtoBvnMWJLGGYLsD44lOgoDS/InR8vF8O8MMhpOJ2z30xfdIcE1xe0jkaWo0aAWRKYMRY0GHrfc3A3bfriiZW4MjNvGdI2+81+gOSWoIY6olDC1jDAUrgSg4GC/ypeXACKaIuQifAy3JF5OhR3bl89NRSK1hhVU+ilTagTRAXjAkZPMHPUNCbWztWPHPYiAqe850ZHuAwkkdVSm/nkvsbUUT277ufolxawgVE3vTfrZrQLzsI0yBYQWDP8rbS49vjXwahnW5vypi7MWyDQ4x5uHkR77xtoQhyhNFj/5SutUwiWhP6lIOv91f8a9SawKIFYCivM1EFokOfBGHN/g/+fmzGF96YVr81sYBhgu4IIQfmBvevVfCEU1x6TMVhY/ZWkWPAKsu5n4mg5QZaa7i6wTowTllytiy8MsVTSYK12TAMp57yJdpSxEthEpZhiEU44WhwNi2hg4jJvmLvEdSAoxhxURzIB8kp3FTMfVsCoYE6EVqxrTPh/EUfZao72sN9tOGb2/Qsb/KWqHQlIuySYVlORWrlOUnUL9ZjwuZkgsey+C7Qr0nZPnnhsuOXWtljOSDUFmuOgtsCP3d9lYNxn59sUQd07YYDSfzbXOaRWtkRfLF5zZqGXREZOX0u69w7sv7DNMpr8ozOJB/C2Lqfho6nKrD9MstKy+UzbYRE7ULyG1CJD2tmjCQZvkklYVP5I6AFA5OuGAFX7E7Lt6F2N73KE7Je55b8MMerQoqXzKGoRlfXWPGmSNEtro2bajVnFLWYYiht0jrjXvBMF78Sj0dYatRcwtCZA5YJ19ERYHmpmDw0TOvGY+cTBHZjkD1Gn6y+YNHWQ9oB7rVJMw5sYScvYP0NLWyUAklJ2qUX3HDUzFtRfOdMf9EA7FnZVxKo+9N14D88vPzZqUubGV5FFt/YuwZXkVXT5+sL5aoY9oWg4Zp6NHYpmFFfkkGnqWcULzitlEM0JHA9LGF+Gv2Sq6jZNEL9SX1vhsxWwR3y0Y8ykYM6BNd0Kn3tEC9RzCGsGjxMgYahxMJJ4xFGDW3h14NVx6+B7cyZDJgphFWAzGP0WqpRdqDXgehl0szasqI3NZgIhUrOFZo+CDhlY8R46VGQ8SWpiq8QS4m6CO/QNSzKVhkcpILZBsDhkrx5TAXFA7A3YhmE7ivLLTG2s9P7aZdljYFJxUSWpY1hwiJgxe5MFzl6+4D4AEvZ9hRjvyeLFa8lRn2IqIoPbeQJc1LM/YMs2o15pb0R2Cpi17YcCgNDs4vnEZTRqRp7g0qICoP38RDkvnSGM/Uof9v360Baqti9f2mEOe8RXbEzRmYwVU3YmbMbPSq1Kg+SnsxPHgUIemHSuyNGbLHXulPOEftRSVOcSd7oHHEYRiYT2J1DSv6aPWm5wnWsddpLwtuikWaSUNrb5r3YvgQw+WtfxsSwYmH1UKaA6yxWGGG3gGtWnRWGzIUTxUUu4NheZj8fl+4Gn432kXCmDs01j5YGfmFazpGnZNAMuZqXSDraIHTky1fd7/EtjeE1X7k2c/P21fdS3bJt4ceowTk054zBPfQi2kwENBmZR9bOCSH5BKswtfzTykaT0dumBxpTmkYctY3w3z1T9YAvdTxS5Krwe3hKHSGEaPcem/MtiTReWFxDNuRaDDwPMrL1NMSx0cRCg+VGJdIcmmkO0PMB0KLR7fYnkVLNPPnGfiNXR+W48PmxAT2NvjEpA0htvCX48jWmstTtGBTHLTKaTHnxguMYMkxJ6lFJgdSeAK8/rI2ZJiTWcfYD0HPk8l/jPelhtXgRjK8tErwkw3ZPrdFDZwliJPagKnrXlCepPlHMk0LJ5rQ+yIZKmRxBhuc2S/Wcm25WimJswVRNqTE8v5L51GJE74TnTP52G7TZhRFTnmqnDkmp7COT0cuzFmcvVJXUr9gWHFMwVDHXKSX4hSu5w8Ss5eWOoH5sM/W62V/mM+LjQaMUay1c2YTbk2XidFSxiVAZ7yM+QXzH2wJOif10rIgGJr0GHqH4HrZOVWWkX8VLpalcwsuBYtfPuQgHus8jAgFmDyVqgWTJJheovGi4Mee1wSUe5QJMVxh21mYsGjZMz1Ael6SSs8J8GQPZYk5FDZ4cpLGpT58qYiGGJWNb6hlSNzkkdpy/1JUQS5jYoj2yi2vu49Qx/zaX4VxZGSh5JR3kr0E0xPG4djx0OBL5FGLDzbXssqQOewnZrw4JV15pSfpT5FXSKbarp3nNIzZ1sFQ6t/YyfJnOrFyNP+28zTLjA8DxndKbwybIEPGOgIaTZwswjxZrVyY0fovhmdGqkyTgNsZbKSAjBCbX96/2FE2XFRYPP6/gW4tSvgj2bU0xfhZPVO0G2BrZdO7uW2K5l6bdEPwsG+Ls+XS+a0CsgkrHLfiJ8CmJxov+HrILv0whLVILJJSGAAKWwD3B6hly8IRNn5qoUYk04+tHxLWOQ+PPGJP0tkNIjiJOUUZePX2jVUyv3pFGOWDF8HGcHDMbl3Z9evuZyyHfMYcx3cxhMfhtz09rn30Bo3wXXCgL4uLtpwhuI/mMhVc0Phk8zhG+jEXklplqfxSivxd4d1Pz3zD4nOfYOtzfDuXmueql8M+3rZDteUmVleQYMgwaBgyriJhfy03sPMN+8/yaGG0YOhiQmW8x3yEUV+8MWqEXg0b9FiZWOvJjKDVh5eXM+XJ+IcwQXFDMD0Lel+qKOu6LCADobuYqgUn+PKT4Vm1oH0FlfFWa71MXyvkRH4/6YQh9brQC6e3g14kEsCTXzSPkdzkexIN+Jd68KNnWu+//vzzlPeQ6pNTmEhRdwzhffnGYobLnFMI5Xdekb+ZNyAX2JHsfbIVEHjQUND4dpAr75HXUp0dDhc+tG75x+jPIyuf0VgckzFwOyHqy+uQsugdtFeMWg08J/9WyQSAyG2f/EBhyBjR+myLnr7akwsiv5p/HB6UGDOdScdz0HGf+M3IlWgByiothhJYpSVHeAle8flzC2yedvEu/hcRQwAte8am+XF19E82Zj4cTJn2tebkNYTiuhY/Y1jzgYkGge9rslYMk9BUEKKQpM+Ve5z8hJ6W4ytbHs9FoCx9Zm4QHnKSU4KTPJoTktE+Ca2jkQ6lJgwX5yT6EJu1DHGKE6wHJn+kAUEmkckLEL+/enHjpv2Le8USoBNe1MjwkzPsstCSU94RV5etlDKGDTJTPlnh56eBWI88Go0IfUk/jWTPP8tDFkQwJ0oDT7lziPakLMNGS52J8v1Kc1Y451Gn5tyzGyOqjdEK4yJ/inwVGstgqB13Y08LRClCCXWcRAGDSEHE/OOjKx/Zm4NRYL5Gw00FCougU+UR/wsqQwDRXCcPnwyNMb+EoVgWrBVEk0bW4CqMWHDULV1vhpm+GU8Yr7iBPMn+XFn7yS8YI/8YFvJeV5jrWgCeGEClyCo85FVP7yz0Ub/gfC3DZYsaVPnmMCltlCuINKb0RuXKqe33raK61OZj6DL3TA+o9zy/Eq99YUPh4q9Os+ih2Yd7OxSNqzesDB23k1DPsMRGubQdY5bCv61B5ixm0ysYqF/87ECbB2Neji06lPFlPbNE7Wwsgy8cIi0ekz8YLfhdIjtduMh3+FblXaNHcuYQcHGjs9B6ROXPGu5KsjR4qaI0PnvDUDD8wFJQDFe6OKKFTNxKshZsRrTyKh3DC4bjyq7feMJYvk16uhOpmF5hx8lPWKl4WUHGDcocRquh1AngAh5octIEhuTMixdLucQyZowzPS7oRRUKvixin5KpWNnD5VsLbMj1Uo6yy/FVj+yE/fit5fTaMuXQ8X0pLwsRXr567WXy0sd0RU6iH3kYNXlt85SfbVgq7pXbL2ug4EiWsgeITV7KNuUtGrDnz/ouFz1Fnk3cxq9hU8IJ+Op//af/9H3eBIYIszIvJtBMYmBkJHuEHq1Cjp9iD4hauJOUo+cI/gRXzn8SWX6BN4wtP8bO055iC6G4bsGUaeahOSZ6g0xEw890UzBkABS5PFGO9MC75pyeWKX4wDZYitQBlM2kiISxpNJnsUGtnDSRVCKlMj0ZvmFo8lczXAx7KZzk8vOcXa74Oabko1Kl93jRXokxSC8Vw6UyEnmOfnFf4rUvTAVuWAKuY7owXByxdl0OmWZOhn1Hr6zR+c30QKOTX76hfBNvTsAo+IS+UkaKCtv3lAFjJCPmTwlbjIeD+F6CPy/smLxX/+M//vE7HwAbJOlismqIlnds/V5EmMg3BOz9CB3QUQnfHs/GkoIJz/Hm74Ld9Iz8dye0NVOWDsNF74tVhw+tsmaop+4it7uILlBHjBRybXD0lrt9lH6SSQQShnPIC5s/KXus9GMF16WWqCcE7cXvfbKhlTj3lMMceZfqOHX8y1fu5Hru6BSOGuUv0+lTtHpCFzVcxqD3Us3YU1k/s9WYJd5LYWXZSqGSFyzyM0RpIwLWGJXB7Bn2KmHfEyZOJNdH63W+Y8TEnvftG3mE8WqtyG0RnZCrJMwyt5KdFUejjfpesoE3+s+i08azX2ZfiEFyJsg54FI7mtkEjPGiF0ahYVfz6S7yrYw0Imcq8E9//rO3jpjDkTsNf+RfyFeeQUxfdYjxwjHxW79NNHK8g2jGU8SmKDce4zmC6IqFEpOLCY6Tn9DKA8rXVjnRM7mulrWOnsJw7V2dKv555irinWvP6dnhfzpeN4JfKoxpLDiLEdQQU/srw3WJFZKTUMbKd2P2hfW4vlq9wJBurLCjTPC5lKvGfQwvy4vBnHpdtrIvmYeNyU/2R5minxETvlnmk+CFEZPN5UcKMtncea+rLP/JYjk6GgOUS92hxSkct+03bI+/BMUazn0yj6sHhXTSpg8LcCOw3wxsQjLEgRHDgGHIYqFV6l3PBt/iZhfeMRHDG1SGGpMHJ5XJaRnU4H/JN8DLlYSMR3NXFO6hHf6a7vfyYPsD55uIKWHyFJaabrVyDKPlQ4acSSd3nLwwFZ/s2WGY9xIr/UoEJet0v1QJaENYrlup688vfvdGANfdDyVgyMlaHmzNZ+aBXthp6hcxXMgvwcz72rah0OPIaQmkLlOPIqWxJax6XfTIOR4ujgQtoc8LyeVS/mG82ZLDRmBfKXz/p+3DmAtl1eU/T6IBE40BOijUjTR8GP6kbvcrmzoXc5zD03aZM6MFG1GTM0LWzCMcFQs7mm9azysasd1d95lE8nFELs5RzoyFVtL7j3aZ4IabeOfUmS/yn0XVX/MNxwOkjBe93Ee2U39pvKSVXUQX7AhbHhGHDDkIeTruRgnOIZ+T9Xdf/mwtelqvzE+KZBH4hEB0jqFk2OuMc9/gV+oR71RwLJzwhTgMvwa+gY3vqTkTppCg4qXy4Qir3JhUwLcHByals7xxAchSnq2k6jITw7L0tzZf6LStlxPY2kpoFV64c44UDgIawNyAAV807B9VG50Vcq40oxCRVkAvGcyQIUaMvKUHyaEEl3W5VvupFYwWiaXBJWLXsUFguDBin7gZ2IYWOT9qGkq0Cme3G0mKjjjZja+QEBIfraCxK58Tlg85kInZTkQCr8nGhks+gtR4RegdRDPeIrYsanqll83VI/SqkwUuYx5NgCd7kFtnxF3H6kJV+GfNDcX8VU5hjDFcDH8+sEpBKizng1IJqk/ByMHxSM9sH9zU0OhL2g81CsdGTxZo0HBFJskRZe9HmkO25UaXzBcyVMfJ7fBwSSfZoJHnjOII96uDrF6hgV/f5lLg1JVmGByZvxSALh8UZZG/RJWpBI5aasGU0pXDco2WoWLo1X/8z3aMk1USSyeW0jiFRnggyDA+Gn44rLWGEktpHCj+ERkB2zteghUUwY/6S7hZBk4Ln5U3m53435CwLJck5nDRTz5sSPb4PJOdDjJrZAfBwFtJ/hA9eaGNAWVI6PFj25gsI3+M/IQ/90SdeKva6F6s9xCInzU3FPWKivQOKRp6GBWu59Bp11JjlDuwZV5BpKG1N8rMdfW46JH71gVjMc5z1WWpcR3Dc63FuNSv4V3qmWn1awpy6pvysvSMhChLzHuRF/DGyfI8i3qJgXxs8T0ivUb/Ggs0VtjHx5wY9SVHLfmZgYfXPfSVdTNaf6LDUXBifRmpmEIiD8ISfzShyDRaHVyax8a36mWRQrQk5TFr9JR871P43UjYOPWzrfcyVfhe56c8TDikm5HycbI0/dbtm7ahNLYsZ5h1WksI5BYG+aWLHHpY5WenFtyyy/w0p6DEOfAJ7+KDVVssAGDC+5Int8My+S+jQiVzxEV9oia9a97uZ9t8zLyM5KzTiqnrUDFGc1xn9Rwj7sk/Mg53zMcytyN6knVdtglbwdNXuHwoe2xUccYmPZzdUxUFLvIgySTu9J7D8c6QG8NtnKLPkWo0hhl2K87HudIMawthicgFwpwVw9tixefE7NukfvdRN3v64j2r63v3iA2sS5P9ggw9LVVdnelbwuSkEY4PlcyjBcJEKsaLnlgx8+BhJODKu4Z8zOUJLPiCFIYhuiqxTv1FHeW0hzghcg14ECEslWd5Orw8sk3Bg/4EG7Fu85d5WOKgIag7kWjZ+uKW4+SXhCwk8sTHjzHhQNM4FFVMeDBQ8zWqgA+im+RATcpN9qfRc3XDZUOviivT2qdg9RyfPA5zkmUC20MlSMgkDD5zg3zXlA0t32nLViMdU/XJz5AhqwyRG/pnzslEccVNHhZUURSKRh/Gi/kvbvuFP3Q1GdgJgSgU0VxboNiJObFGnO8UA1ZfBZ02ksv41uUfjZYlp0Yqusj+DKDQOWTdBwUm+1gIQSFfGDBpSE9Qmh9aBOH20B1S1v+2cJIRzEU8eGCHvdqV7k0nJptAaWSddhkZjQA/jdsqPSb2WbAxFfwUdfdbt35HljjAkrku6D59lC5/7ibaARh1g9ycu4d7/uTZYZlb5CmbZw2xSbeSBRXi983Hturv12fpHq4lX0pRLg9L+DnkooYLMplw5JEPF9pJJwzpsk1G3M9c9fqUcpvc5B26HRZF7FjR18FenpfitCOp64NGPFsumDPGcN03AzYNHwr5VOP1YD0XJmbrFtl6uKA+/S9/+bPfqUX5YKk9dy7etlGkYZ5MCqjn+zinZeTYUVqFy8VYlNcefhMYSGm1Cq3bW7a0+j49MLrP4eJITzTyJXESRCe9tHBDnhZEnPAlrJhm5HUrW0Vc9QzxoYfhuKBPvpLqJzOqZRx9nHSnHQXn8caGLPn4fM4p7uvqI7kKlfMETb/q3vLiUleOiCkNsR2ZT4N/FYeSnwoexx4ueiajaqenR05/YuwUuOqhhc8chM56XE3QCyCB8kyy9NNJJ9bL49Do/W6fzNCbh9Rv+0bgrpGSTkZz0SOXBXVUsVKBDyuZP6bDhzYaNTgw/xiXy3gmF0hFfcq5rDSAOfhXJ7izSIlvruVs9aAtxJg0beiKehJAGqnQFoGeOLAmBsyGTFjuzYdW2g92Ft0Sb724qQhoGbD0dkqDILykaiqRycKGhBOeLLaFkLPRXr155R3lYbHGvrkYsR2fCzYIkGwjs94rsT1C3hO1Icu6DEVs3YERrxZonLW/qsaEelx76UiXwi8ZVExYLs15iJwlrutGFKc0w1OhUn4au/ZG5XiR4dVcoMAIvTyGC2lNP7YVfs373EK6snef3KTCKNC4Y1TnkY2UxIZnmVZfaMxb+aWOPgwpFPp679MoNnxoOuOUnGEKhZXY++RPKex7O0O2XsosrsCQcYFrzaGnwWgBETW+GCqMrKcKjMlqhLaEg30aQvxgK1TsagSMF0Ystka34OyF3SILFQEfg4/f+472QCVVUYhoeYdFGSRN+ehBduX7zl69fuPDDPBUMvYt6sSldNegLX5k1oeFzIhzAC5zQZtPCFghVeLr7LmnGgsyXEdOzoB/5aL8eqI7zhCkJ6DNx/BSknngUZiGt96/Gl5lazsHBh8dUna6dSY9Gk6ZZ8JwsDSdSni72ydvpAMGzQdjtGhoHi2jyj/o5GqAXh4GXI/j5BHKnNYBcKg1emMPIVuK9uLtod2C+TF0l3nP3OVstMRxdZgwsp0iizFCc8aTSpA9S1RQnxn/NeP1k2XgnQtlHnJIsl6ZYgGlFcCZXtPw5g4l1OmKsxzpnIKK6Y2dTE0lwYfJnNccm6drv5MuypZAVyJ8WMiGDDkVe1oanyTc/1KSA33T473IYoPAqoaajlx3L/6lOj0h84We0Hh1Coar7pSK53ZHKr/R2T58lt3vadgUqUq4YuTQCOW+LAwGjZp9BnOfzJElvg+WomPA4CU9tDpC9vklduRMYX0Y2lD0PDiV6KMNn1EPfrdy4gbM6r/WYoc21u2xZ8rURz1qdJni6j/88//7fdlltkTFdGI/jSSUEMUuyRwIGRFjYT+8HwwYSyupkIfus8Z/D9AISY/IwPxBcvJ2qqZApe2t89CHED64cNHUZEfehKtH2mQ9tk67kHjMmynG3jWH4j0Hq6A24ZsQLT01PNL5JQxl5OKM6+6RQSrjiVMYS6KHBT8PbMHPTxPcAJX/Veo8vO8dWd7bt8Sw59Eeh1OUELVMMiC+WfZB0oNgo/q+k9tz7fXJm0NhvOKh1X7u58452Vx0cZjT3Pye6HLIb68DGUK0nhjX0XPU2nUdu5Sws1mYIwmWZf3qv//7f/TQQQF2rqApwjoLBaNVyp6ZmYsJJZ5FwN6ZxGP8l1tiMbgYsLNbHiI3S9jn44PwZZ/WGiob/nU8ZdpSxFp6Ug+w2nzpk/BmvMp42/iaacRSBkQPedh0yuGq57XoMzIT43zMNBZ8NaVV+JdyzNEcve4eGVBbLgthbK3ggkcqUZ2VuZRFqaX8JURPiMrGab3UmmAZM+y7e2XHTWEs2b7Q39s7Jm/Ghr+CUXNeHEvHye1bhzCVjzFXFFaiuSvMEabyMz3BMKLfofXlk2/0ZQjxUg15ybeL/92JUpmFxlcP0lr9+JHDcT/5Se93bR5pOJLJ9lK5BRN4fCprZsQKiVCn+GcSc9PUENN6o9tMq4mKkhV03MvU/yGUuTtVDuOdFiZDEVv4avMQFSIZ8hQDDIWbFXfkMUMzvauocmyiUnxCKktgWTNtOn329Im3CotpNwZCpkBuuveJIWR6Kpdw0P3dFk7cvDp23b1kiDwqDMP15/GCRwxXptYxCZzglGp42/qX4VWW9rvO4oKirYgEX2ZWsf4EhAUozAfT6Nw3jC35E9S7X8A2HJ02Xy5LQ69DnImmckJPIraknxBFj5D507isIIR/zYFhyLirS3NgNOqL+2EjnU6/yENP/s6kB8Cglrqrf7RjnCIDVP46zQIFMP5MRUd3fphLAlpspwgjnpTMSW8iC7qRtGjyAWK8mP+CX+990ds54KKku9EYn1wjztj0L+OenB5ckmsJm+p8GS+u0xgtXKAlVlw8koL7mzDVeQmJxJYSjVGUISrGM0+0qPGjVXJ8sAyLXsLRkx6uuzc9HjCOkgG1ZSrzHte//fabt5o5HqnspPBybG8oOnvx+pWB0ys+uP9NQkFcghUYERgNKc4QpPH5tHsYW4jPkT9nj6E3Tm/nPFWOX6LhsNbYzPNP8onTnMaud0faJzN6pT6kE8LzDCMWZZR8u+TYnEgyzxzMm4uFLMDgZagLK44hYzkilR6/1kqWiwkFQzPv4jix+lQqdPkxYDiMF62mPZO/p8lhfFM5xMIvUSYhKp46D2AoOaUQhRkO3WifU0+vK8dUojZVTiInoJms94IwXPdsGS/LjoVXoFuepM1JxfTI+G9/+YtXOO1FDTHVNj95yfwTG7uPLDiRHnJ5eGeOix6XG3srwznMwDGhxx1YWOVHw+aUeS4JVmFN0ZKJkyKgrx5f/7d6jvwlNhlyZmERvcGeRrBkApfkEncxrkSrGUZiIXRAvQh7M7VHnmXEFqyskz4JQrIOHHhPC8yJYqUXJzm+WGXgE4FWwDgscTZg982A3ZnSJ3hOYnlCE3kfeTa2JtoT3OihpcGeHjIN48UvGo4cvvZ+ikzifSTC/Ah6WzuNu0w7Q7ZgnFR1GHo/0OdjbB2LJCziAYzyL0jmAQIe2eDBPBcV/tF5rjUeMFxc/kkr+VI9LsoU82hHNh+jMuk4+iXfZ6s4f2dVoTW66gZ4VDAIDjrNc512DJIEKfCVR1EuMFyUzW1DhufJX2DTb22mAczvyqZKOH6p1ghWXko2OMvDSjT6wwyjb685JjNllx+dEfXEOCKNdQG9w4mSsZ/3o5CzzGWjBX7BRO6wEKP7Yr0uWmaMBetsPjJTPbCYTGlOeYoFlYYRaYuet5rMeNEDo5dI63XLqqkW7k0yiXdLRKHh+o2fbciw1bIcxCwdrBuQVZnIlBTg1OuCD3pdyxWkM3CX/LBTAszYZKiUfDijRV8iJ66pBDEqfIj1Cl/Q+54a+jy6+VhySIVSGeHeqwtyCDblWCnS0D1vlAd6xVoo0SqbTfxlRhdJcjAqUY5hoqdJg6O+yvA8mRdMFQKgRn7T8+JJPUJ9R8MPhxzA6KkwnjE8l5f4LifEjuBc2akfNZzIQhmW1jMVxFwYJ7izMbt0FcluWboELgENcidGS8p1cL3oierxL9zV0AMz48UQ4hc7oYEMveR+qomPMSOT/FzwNwdQUTNezdl9d+7cspa4XSu/Yd7rcCZl+tOr8MJfuZIoGS3JJSx6z5/STh4+vKt1jSHnJ17K0GW7VINNvtYApKvuz+ilBLQLrwwX5ZHTQi7hpD/2cO2Z8Fbu6AmP8utJBc6JFu25urVy0C89mBhGpnImj1oNmipWMc+z4BQMLfkjGHrlZgMqzMd20kq9kSkM58kf+Sj5KVfTFIT1fOh9MYqjbzeKLu5KeHaFOXLDekKPq0Yf+Wi8MDXkl/+a//t3O6mCK0jMkPndidYzKxmyGs7j4XP+TkYLpIvCk2s89LRSJpTSjuHwDLWxYDvNgtAHdiUJp1ns+aBTGuFN/M9kkw89QBa9JH9vZ+ZhvMj7hw/sYE0reEJXStSKK8E3w8R/BsQYOpPSNeOx5EEZVEE44SdlHYaWFr0+FPDs8XKJ+pLuhHjpEZk8kcLHFOqlHF1ynZPJGaI8Mv9EpXKpq00YgqYSw3Cp4sr56HmXLKgKf3zSoGHlIhvX6zc6Z0ruIdqAkUGmPO7SXRSiQkcyl6KRhs3ArDRkUQQ8pMP7UUMlDJcPY+GGel8+98VokzWStGtIKoCTlqzdnAqhIzs3v1s8UP7ojekqEoauv9q5gVw7RYNi+tkiqFPkbDCzMFoqBlMa6UWcFA3XFDklw8Ockg8h2gd9+85wuaIfx+SthAR034uYFY+GRZz0IqTy5D4gVk3yUbSMF7hFshf/Ai7wmsdRMJj3wYgue4BDQo7hSV0DoQMKvg1HLJUDY/e1HtAh+Qvkac35Ya5WIZ25Ei/Vj504YR8YQ4XemzRal3DMETLnQY9OGu+lE+GlpqhrwnhnqfgLM1y8My+4NJBKbQAnOXT3uw0X3rLjhJ5uvWdOPEQBFZY9o7xZlDeEvWFgZfOn0YDOsp8vc06/551vl7qO/aOfrU6h93WPOwTHTcst+XrwL2Bcpz9Odsh/NZm9N2Zl5IsZNAwZm57pkbFViitY7ty67Yeh0yub82whzYYAG3ViyXuewvWhwBiriKLhIgEAMYGQDPsIqBA/m1BsYKblq/mvGWqDL5IZ+YonUInVXoy9xmsr3ir9yH8GRO9ALUrAZpqtYUKQlJDOqcvxKXFON3/5ar4XKaYGMn9PU49vkY2YIIaPoMiK4WIIigUAEbyIuxDYk4bKlx4X83cMF57tEI0GBz3l50+f7ZIDniSLVBXf8WO4WLBAg5C5tOUIhlKC7RwHRp+LtO93U88YhkksISrsrERPqchDel70ah/ayk0ad2lFeL7sE/ENHviERwyYFQif+6LMsdihQx3rlBK9/niZY/7BDYZMJ7h/tYYpx5TRK6MgYLzcoDHMaH4OB946zFg0WmgtMrLQdNFoJSkMw6zMGEOLxDPUhueGDcHDknRV0tDe7FQS7BlpbcZjCaLxevgTvKUbPMEvcnvwT2lm9UxBJQ/88BFoo2mddg1h5LgGk1JWj48KmMNVY95EbGmq7E2kYoYoLAOFHqedt4e+skTZaySTRU2vDG9gIPcunJgQVTyIxxAedzmhtx6ehEqwUhHv+OMTWIXp+o9UFsUKkud5Dv3Ro2Se6YndXh3LRZOKhABIglYSrER7Kr4HN9zGj/eerffFSfl/jY4K/L19w1z+SLlgYdADm0ffNU+YC+h6Nbl7lJanvdB7ixUaqOQdQ4w8v9r6B11JctPv1LplZcqM2GjIeGLUcpxVo4VMCbDKhAeOH8eq8VKiDNeoMD4Cel8svaTXhZGgF9btZvQzgTEs4b0b4QwYjVdp2PAofqcU+Z9JJz4qdCpC9jdpyLBOu4VQqVowM2mg/NQC+9jiZDxYiIvPOVXmEymRJlphGajLaT0VWs5bK3xQRRIZ6uSVIRwq3r0LJxJkhRfE++3l7zduXbXmnpYJoz6lIoUBXfLz3SDLcjhXGJZ0joaAGYNBw3Nzr3Ulk1aiF6wzvEwZpR7BeA2LIRZgPywgzzNW5jEHRr7RIKT3xepIfdebGBXySWmXy/M1vhasrCXI4uGcFegyZm7QvvH+1VeRYuwxXrfsJJqbdm1Jv9GCENijkhZ6iuynkVMy8GSOCgvjxYeAYylpXI2TgS9fRUpExne9LhP0h8h4UchYxaQCdgZu50K8N1gChAwdVlBx9vMNm+gtcbCGjDRrMCkjquTZO0NvDycsJQ6S1JDKgRrkicJA4/YOseXkHFn2h14Kw0xHTm3PUCavyPGXF7/7eD4V+1YXZZAK9QSX/DxpydN7TBdLEHNZx3eBwdSwbnevC7aigCObBEW5CiAj5PIxG69PtmCDYcPyPXzLlJcNqcmEnHzP6oHF09tpvKdDnis8OhHDaBX71m97BfOmaFHneaZDV6yexaj50/xNowXxBRNgwTGBRKxV5ksXU83xMXSZZgjhuCNW9TFmT1eaj3GorGspLHwmMQGJ1sjlFL7Xg0FlMvjWrSvr9Qwnp4vGXpxTugL/U1zBw7wTrY76WHALobhuwaREaflQMZIPceWaMKXQ2ZsyQE9FV8gTrE3IP9vc0JYPGH5yMiKXP9kLpKO1uuTIEay8a8iTiehewyX+I2rxJnUJRk9g+aBZLMHleSyWmHWmVBHjeX6wq9fFfCSNTfG7oKKIlQwS2CJ9RwDldJjzej8dwbSc8+tAdDJIzCv5JSfqIP9oHNIT+2zfNkvKucWdBnKTfyGDX6+P3WN/LpvvUKk5yVWLPyP86n//l//8fa2VNDEiXUhZ/lRgZEcplnGKidAlP+OfLCWlVXzHxtAfhuGxEvyUT+JtBOqlV8SZBSINPUKGJChQ9D4oVIdogDTjOSO7eOXjZFHBL8+eFQz6Uuczgkgo+meImo9KmLuYyBfmUWKZ6ZJfckJA/gqrBEOL1vx/8+uvm/QrqXp4YhMt95/tXQBS05XC0RlHSvH82z/8YbMc4JGKJE9UXQwjnNPT6XXMCzSUWhxd5ulzXTZkyDAOZwg2G5mdGdQJVhBo2Haj1YYMwfmiLzMEP9LFvGrJRlnxs1/tAHPKPytSqWv0E55EliTwevI8oT++SC5eE5ZKwAfCrv7bv/v777TY74/7qWJlJLwLBqQXjxhfFKZE/lTKNFKhCWjlhZTaUwVIaXGEJ40kRgJT48MBzvtDwaJF985+7B9hmfPcut1JJ/LfgcLHfW1FDi2ysmshVA60YMpYqQyQnYqRza5gAJuexVQxMvcXEwyB//pv/2atztt2YeH2HlcD7RQFKywAoTd0qeOeoMFQ4ZZFJtKnGNV7/iQ+hvGuBRrpPBdcXNZBQQ06fRPwtnDFwAXUKZXe8J0O2zhYfs2wIVtuOllYMnUwJOaVcqTFCzAM/9IDw4CxnPyOzfnftW+Ckyqm1ddCzFf4/9Nhwqj6q3+wJe9MDNI9ZUjODRgThNbVjxXxQrlodAq0F94XbgKwmBkghi6SNALIuLe2p+qzTdBhvH7Kl7wmPM0koZdHNch0R9HroNeF/radl1YhMauoApAHDwnYu4URm4cSehBJKznO9XdtOlXFqPxs6lgsCRgyCquQJNp7d7YbH8MVk1aSTMG9sFRs9FoZ2tq1gXaiWPdA4/eNi0wi/9Jr/owUFUcY34lO1uc7Gfb2AXF5xzfBBaScks6wKD2EhUM4sRMFXQCGKqYQVw8S8gGCN46be2sXX36z74Se16Y58zqhzTESPRcbHvOwHDnliDoaI0bvluXknF96zxquNO7o4dLbnZWbY7j8e059TaY9HCVzWp65NnfD8kyU4ssz7WP2ycGIPS0Tg7ZNoWUnttN4hZbTtEMZAqG1j7HAuDLvNVXYKRlHJEUeodniiEnVl/ahMr8XF2u00hTjCrwX4RaBFOZhJeYz6wGlcpaQphB7CrkqRow1l+dBJceasBnZyAFjXJJo4GwwXFwR/7xNI0ubk8mip1cNt27agzSl7vMg4p5FJsgg3UpNCouUFSaZMR4YSuqw4ZQTxcRUl/NTPrhH7qbNAT95+Lg8ZLjC0kp0J/PS2gBOvUaPkEY6DRV+pyw/7+QGMORKuZrDtshMHjMvy7ePIftmK+78iCXuQ6Q3duee0copbWB0J+gWGfaQSIxWRIBCaJ2wAOEbV5JY5rLLexqvjrpwLgkwz8J4RRFiopVKLjJT8cMjBZBhusR4jax4spFk5KKC7lAw+NEVHyqtS+ZJSkOtXURSNXUkGQRmUpzrP7QLf0jYQiattGDq5KnsWaCBvMxldDmREmkSKayCgOgjG3cjqQoJb6Qhi3qPNbgj4ZKDFvOWniP8k1ZylPyE4QSDn7DXb215uvUwBrmud14H+hoyZG6JBs7im4gMw3TBdYAUUilImtH78PS6w/aKopu109vTlOe8SSa4w6/nEexfbUTChxOtwYBx/vJ1GE6kzmYoH4O20P8Rgp1pJWsn+CpY1WjFlPRsaJlQKXOcC+PCtFBYwTY558xUXywjke0lQIyd8G3wUAlojoneoS+QsE1q7kA+kjxKp4cl58WGDNHVriHDpXp6yE6VFR+jCiaoBplrSKNGajBt8shLD4LbfFlZyJByxLpILab0FMAKeaKhw/DH1n1cTX5E357qPf5cXOASAA94kYOeI5sqe69ogX+pJ/fDCnFRxvxdcg1zTeuHIoPzTEcZ0Z4/huUePRqPuopCFQhKplyeAuhKkAgtwYhBPzo/EONK3VYc1lwm3xzSk3+bkeYJRsWhd3pi1N/+tB4ZBpqTOZgG8l6ZGbI4DZSjOvJ+Xv6lXHQZLSUhgxlTZfiQoTnfEGwnRvB051waVLGMKLv0DEkG7+G/bjCs10Xrjt6GGy9beehu5EmKPEysgCDipqAwtp/v7yokWwYV9bcEW4akxzxxmjofH7vMK5li4ZHrfYRJ9cJ6Kd/GuafVjyCS2UCeZBguPrbHtpp0i4tkWunQ2Zu3l9vDBW3k4FgkviMWtEyjFw3GxD9p8UuFJb9gIzoaMy9e27mFdk85tyGrYRNhLu2nZ843wabRx2a4GB3RzpkW7VzGFuwyLtfYEkIh6IjGJvUH46q6O+uSusplE7fi6dDTC4JKyoCJPGC+8ZMt6qCOYnEHp1FgyLwnZquhGS5d/YY3MFYqjxuSL0A3GS2lhgkMBJnLyj6+IFpQtOSsIza4VFdjYD1SMSPgoYd4e2uVD5W27/WyMV74FB3Yk/8QsULiiFdDhrTeMKKbCkNRhwWCISjSVgt7XjZeQxhT1WACkYqXzaZ8CD9nS+KL4LUMWCFP3uqerK2H7EYpizyNgayQpGxfavOxaO+9oiXKEdUov56ioyfhjEiwmInhayrlH+HYZ/javk021bLylt7N2scYZd7PMxroc/DI0CEjTNwt9cB4hM9N32+FFLIoj/QEVH49K8n7gieFga3uiGVIcTBm86G3VzZywqpaDjr3pzX+6/tC6/iJmVhpg3XH7jJaOSNUju/ChuCffhonNxN9RdaVLQNAzMRuzjsAOdvw3Qf7SN++t1adDRta61ytpshNB6rNIBE/Fe2Wa+4nYon+ptBVT6TtH52PZcfQEooYv5OwofUehH3o7CFjD1TEWqLqYSoOAlghT4uYFX9br7vv4mXk4bVV7vSEjl43IpFqTzUsehaBwL9UJRWthZXoMlT08vUb3yi/++T2EuKNYZRN9EwhecI+TJuPXXNb8jDFJY2loWtvpNLcvi9OsxEcHz40A7afl5nqnvybUzd8jti4ZyWOl5oGbBaFzDpW6RO9MeuZfbbtNdypdcsMGXdq3TIjhjFbO/A2p877UbfbaEE4YcAkHbrXtjDCPnarr6wltzxwdmBYKVFPGqL3055GAqMxjKm/914XS+VveWaeRiVBJOmSQHvhI40LNbpabbOKcnSVdxKk80pDCOAcAUVcDSmc1+JI3+d8ftF6KswNlQ68nLCIVFSYwiagsoce3dbr7iOZMtY0lLxiVZYb4AuWFypDlqj7fI+thK055U7+FLzkQ4URRvHxSUnYdXJ7RHKCH14xCvRuad0/ttPbW/NJknEf6aiZ7RioRxg54fR2lpvT82IOHX6P8TXwIhzicjuHWQovBIZtKrtg3u+Qn14Z9TzfHwfeYsxYtTgbs6FndtOG3OiZxU7CWXIdMlqIL0W7Kkad8Pj0+aOv6vtkVlobggcBYoqlEmOs4zzrj5GiC+z7qqxnyLAElQTuUjRLeMl4VvnRwq7uY4kyL1UUY6v+Em2AueyRYUoVphRBTLWT8IjQz/ezeZvVRQ0iE0mDQ+Epg8mbeinMC21ZtpyTSpBmLz7kaR/m1g3OGZrVV8omqxeR44ntb2rxSJzUk8PFcPx5fMrIcLEfMm4+uT1FdPgNXjEI3G1HK/6RNSwvY7xyDe1jnfyiEcoBuNwlhQGTEWvrfEkvwufcxbhlys4QkFi9s1IYOpEtweDZD7s1I8YCI/TBdSTsiaNxhEHTdSTeM7OeGluUmg3aJZkp5FyjBVokCJrGMsc9VRiKYeJZQMqmJNnE4KmekTdatm9sKfC3r8PFj3T3z3ZROvkjDSpcHThKJVXtdc3qiclX/HMm5LTZGPz+o/WCnjyr4CDFLqIJPrBAi2GoP/z8c8VIjqREUsxuIK+NzltObReZhOHGC70glhOXL15sJNwYRYOGpf0811YWRpVFdUk2hel9yQoQAxZ8P7zXNTJK3YrxevueYcMrvxyU3kyUY+D6aH0hDS01szWEngcGjB4YFTbGljrF97dOvZw+rJJT3Om9L3UGJUUR7IiENYO74CtlGYPGtinvlZkh4/JIDzO9sRrYe2T2vIkhsyE6DBpTCxi1UuP6FKOFKhLlJgH2Yv/JWCa3+XEECZe4DdeQADy7BM8cfNyXknF8GA72sWAwWI02rYI8Ts0xqMzUZCJD6flR4J8+sdMDWteyFPjvYbNEm7PNyq1YcdyDeR0GbG9toc4rM1y/2lX0PavkJqwb5PVz5qyi2zL/VNLLRDvzwApzkgx7/42dhVhtYGTp9rxCi94Gc8StPWPKqfiEntQWwwmry6sUjI7YfVk2CsDQ/tNHT+YN+yC+LjcyivH68ImeFwu9vvuwPoZAcui5j61Z5n3p66lkwD7YN0aDnRV5fNf0wqYDEArJJY844x2/wgtJ+oOEDIxuREWlH8VZkGJFT+bO+LH+4Cu9NPxm4GgkEs48GqsbMWDMkK9eTbKF0US50skUaAFjGA8ZL6wst4/60lcBWPyUbAsDvbAwII2Zl9ePVhnFuaaSde9Fn8P1yILRotflcxo2dFdMk/Gd0ym/D4mW+GZkfGTLBRNKAdwxByZa8eR5c6hQpEQasgrrYIH8oyXXs2lXJKSFDvQOQo+L4Y9LDxVCTGWCpeHMDdccskiO+ARecfLzTJ0UPEMSMqwwfDddbS99pWkv/BaI0rh8Yz0v5lBYCYzxYk5a8u7nRPLvx9BKSaPUtwjZ940MrcNvlQN6gjf3t2h1xU06leYuK3+LJ8k2sVQBhsNo2NhWc7inFWlNDCx0YQHickwACHu9mPvgnhQVxgmHxUd/pHPIL96EfHxnP5WvfDMDtmtT8ApTIlcDw3i8eP3SayBWdBVbZeK9hqQSXqY9IKNlwxxbevxTnmIn4cAPWyPY//ScjbvWaio6kdlBnqTafMzQ2prLSazBK16LM7qW9SvRzmdrngv+o7rwKyzKVgtPWYpQQwy0taeqa+41RXjOWxTEMFLx0/jhSQOP+92K38lm6tLk5oSbEtCTZSn9R9vkyzCizg1kHjOOQkSxY87E8E2EE2DDeA6iBOuel71sXMZoSQJpXO98ZoRljkx88+6NWdRvvoyZK+7DWRsZ9Amv4is+DS1KZFWMNgU/sUsfzxoy7Mkg2FErl1PHi3NtBf21NZJuOM5hmShlYzCVwHLIEK43E8xJ+DuYfHGGrRKjx9WsbJQvpNxAHlBOVGc4hoU2Pa4nX3I83MVFg8tXRzKWdkFHa324X4x5rnJjJsqQq0txCtd7yrJi01De6PFhqKlYDx1NtkRdDoFB2BGj0T+mwKBivDjFgoqf1cDcALzP1WXfh68vFY1Uth58tCtIMGZ+k7HJwJ4wvkON9jTU0EcoQiW6lWJ/jPywJdkiiz3+q7//1z99P3OMPmEk6sMVFgPE3qxJMpE5Hgole3AuZrzEhkiPrETetSmYAnTGxypSkYY0kD99bsGGC2l9FRdpiP88YfO9ZrwwW8MGw+UKvMjtLqILjtwoW2XDHJc+zAQIMpGsIjvJUxmwh4ueu25aFor8uSVP8rTagLxqgPOEO94RnUqab2NtP1euOqlN4TX1zmwpxRzic6/W2OCMz4fWGECvZ9YZM6WCT4wXoqQXdIPjlH7mjrbxJo0s5S6QvFgQdR49SIYT+f4ZsvfzAv3wW7sMcmwcidtjjBiWv5K5LeRoZHFRTL9PizklX+1irakzXMJEScvWelw6pRrGgakUyEj2bWC8FLtMdyAk8jayFOlooQQG7Kwhw4i/xTm0GbajADMhH4cPtvQ+Io0ybSlhzhP0nvaElHKGiXi3+MHkw7CtnkokI9IQieENovCP4WJYi0pszUUSa7AxXj3H3qOYYto9fsoC82o0LuIN0uCSDKgIf1SV3uOTNKmLKdIYvaFXFi5xqjgNubgwQjCnPnOhKsgBY+n5O5v3gjf46q/PShqrELrGYPJ6+LGk/osbGY5aYuSH/N97OsVUOKTbpKRco4CBVLtcBsDR6zcXM9/wzo4sYUOYbwi2ltQk0zLNakiSVt/CFDgGKDzBJqAhklYHK6nisKEgkmR7X8SDkNo7XoIVBGqGDNnfROvnyaPHWYUOxDYXca+lVI9vMVwo3tcQTPFDgnTbsSJTZCwKmT96cZvCKOWWZ9Qthovx/V+eFa4bESmRhojCOgnSaqWC79nDFcl0op/AtOS+tdJvAj7BQ2OGlYyUSTVmol5RUy6PwvLnkp0IsYxVCLpliBT3xHpey2FlQZ70jAJWUAqE+XFWeTJ0uP30duT/63AxD+GKJeKcTvHZdM+Gd47AYmiUFdgYMAxZdw9TyuKjioR+oOhb2JjmtFAM4/RkNhaecwSpuJIW/kahJkZiWXCFxQAhnaDHgBmGpaO08HYdPiv0redMyqFyTggEhKEthmjodTH8VIJzBI0/Lr7Fb0mrFja9Blq40yGjGd8NsklUmfaMzOf1TN+/2MWLs1OqGW6O6/dF+dlMy+Dk840XPHpmdJDcYrhAJwk7UCcgorO20i9JdPBF5xbmNKVfode7noTLz7Pu1vMZg/36zVtb1n3bj0g7UlfU+bCYBsOKIn2UB+7Jl3h6O/O2yyFwUuLW5R3grvev5NMT6vjZvPvZGn0c3sD3mh98y0gJvbKokwXnSeSPkV8sQF3+BZ9ZwGS0YjjDALTwyXAKIuPY9cyOKWd/kYGEM3vZoCfwMSlMC525EAzHVp5m7jKf+Mr4KcmAbuh14eh17flQS3gzjhavtLB/f/XCwu1qDltd6PNBGb+LRIUAaGMoyj0uEgxI+RCWsg2pC2g3BUl+KFWvu5dsAhYFhet95aml4z09LlDl5FbQT9HoCyPs139Yg+Y6HDRfWK+L6Y7hosdhUYhkQFVb/DPP/UoGUvvK6HHxXaZDyzPWQz4J0kBSA2Gek/qMHhh7vpgO4bDgOp/98jfYOS0KuWp5KSLE07infuLpZwbaCe63bU+sriJBXvaNJT0yV9pfh7y1/JOMehaNliIRhXFiJjrTPVWC+P+oexNeP25mT8+yJC/yJi/vTL7/9wiSABMgSJBgMJM7N7gBZibr5Pq1JWu1bElW6in2r7vIJtns5Zyj24JOcynWQvafxaVY7L9XTMS68ZaICcKlUuQ5kDLmmDalUVrMPNof31y0HYgsTOREVZyUhSkCD+w5sfmLUm/BlmUV36IhuPiGLjM9foAsDXFI+8yz5jlWxoKZH8JSxypVh11K9UOSH2X85Mh19zvIawmve04ssCsJQ9JQkM7xiSkuTPrLPachBAeA/JuYDiPHWZfqF5S98JokGFVC7zVUmUI7unGKrUawQoPyqhralAX3xMUO787Ty2bVAs8VOEPGAwPKixWMxOuOj6pD/+osiQ3eMtyjhTRssUiRvbXfsWZkD3F4a0uLfKt4cn9w/2atYHt8lnm99gO2q7SEDOFZOqSjpgKwHkrXkGyhT5UsPNMgPk+0j339RLx5vnL4kcDPK+vE4YUfSTaCWCPtp4gMBKawgqJZIqAuMI9nHZ2zVeuZSVliibdwLhDtkGYPcycl3ttFGjmtGVeOkGUWTqs/+kIziDy/gbybHOWnHnF+izxf2gWj2SNSsYDSMsB+RMtpW+6eIpk+xnou36Xfsmwf0ffmKuvUN1knUU2lM8abBZe0aiZONSGP3hRUWFVY5gOTHkEoPvZGcbOMzm9Th+UvrYONBpI8cNsDRTq+a5QXv6fPPn/o397NqG1iAABAAElEQVTnn2F9OCbrbUKJpVr77eGD8u4n0A7iuxKz74Y3e2SuvGzajvcJ+jLehw0+9jAVYCVnSFoFXWmpIla5lQR+HHyUaHCUBR/mMgqvFLCkjBGI8cyJlqC0lBP+ApRnzsUmKH4kzD748FBc8FPCBITtoMhMhZ3ylLaFTx0i9LfMrEsGnI4lbtEoy/nSkBkaMErkypW95dvwqoiFIh3x33/99ZO//fjj1AmL6wXmaEiYWNJoXncPSyXDazY3WZC135aZeklqE3EBAGvMwvkmb8uyEBacLjNxUxiYxj+aBgBlVUX5yItx8CxPWXLJ2Qrpd8mqwCNWI+x3eWrmBZOR2RiuMNOWaQ3M941rM3jl2A3GDdzO/oVdlXKpwl2TPpQSZduohmH81MFbW05kcErfsseD+zCRQcAoX63Ivf/w//1sd5nufxgdM5pipMKGHx12S3mt8Ou34BlTtVul1R+AljzFSpxU9KlDwQuJ5VdsaSWdOo/BwtCuV8C7xMjH3pKlRaNM50PTVfd7r6AXrrp8VIa4S5C0N0vEqeOJpWLFCeu+tygxEMLir7qMJ5Yi6gOkWSr87fkLv26ktycqnqKkkfRIWMuSW2erRnDtgdGs64FNGb5h39VGzHpUjaq6KKfyBLtoCUEvOaMhvhsGuSgElg0xYGr1E0M4I8OdAoNgKwxJgdl+/ps/XIGxB/SFzb6WJcRVkVtLiDKpRUg7/UTEjkzY0xfAgBILbtykcSULRiC86SLkwZ2lVtrVZ2fT+whvkZX195gkdaVF8AgBytHIKC8OHqK8+Chby2QzDdVJ5BDFpHQQz49K5ZlKncGmAD+OU34ERUYELK5gSauMU5QRNjyMmkCP4i5pKQ5NXXUfN+OV339TumWSQV7+JGilwblS1rCC2nqX8jNrbV53LzIqdJC8aPRmQSKxxf9WPgoERczmP146rsK7RZf8F+x1messPxBsv0t2LWKVwYuqFPg6bxECqGOPLxtO/QQKoNdPdCmI6fhuFBgAaZRMyVJgb0yBsZTo3ipMiWFw0urjughPZkZ5YjuClrxTj5CDxJFttzv1w1IjCu3dX2l2Fj24z57abbA7KzVbfpzTsSCqPFuyzEpLZbcKCK58J+XFqXmzOLSGZeYVG7aKVzWvn061nlQyz1RqyQdxeJHBwu4lQ5ERAYsTJFlJ0Og9fOB0VFrTHym3l0ZJH6tKrgfvdcRlGeJt3lQReSlS+VDd67LNKvNuL4fdE4vyc5ut3CTNM9ayARSvs7lJWku6LavCdr1sol4B0GH/5hant7vPBSM4G/3t5fNPPtg1PBgtyd2Rqq2UU9W6EkK/0XXGrhR+m9rzkql8b8bbRC7G2wzPRQU6J+wKpJriL9+k74PZu+f8dhf6A8DIk7jq/X4PIKbIXFmicAwPpaOj23c2S2PvHwXnHtynmRoXf9KX4AAZZYYX9wfm1V2rOt7PWPrMFiyyPAhbMZH40WdYeUFVtR+J20edP1lmlhVzsowpwpIhMx88A+/yI1iyYPi2aJX06aiemeKCNkt3W0sie/GX9Ih7R/zilS1Pftu/5qRW2NLqPKwrg3rFcCJ5nIiGE2vYBqksuaQLFtXd6gyXSNQKZVi3IzJo2ZoVl6S2Ma8hYJtvkU6PejvUUa/RDqXA/2vOVNkVMayG4BoseklXlYKsL2uEHCLdBAKTG1LZAAUF8PWjL30fqU+/QLcBTDZ0NsAKpGW0LjMz6Nn5re0F0Z7sgzELO7V3V5IPcclDksJ6C+ycrMJiMrubJ+J1+QV55o2uQLHRR3K3IftppHF5pL9dyXE9iRmMSamhwKS0RPwaoadlQ/sg+TDLmVdGQ3XiiVNEac4UGSSU7zxF/NfeLNcxE+GDYrQ5j95rwEoTD2J2iisqsK03m//M+m7apZD40CzPPWiUlngCqrzbcqki8kJ8VKx1Yzab6rMOl5fajokPsD159tRGXQ+87rKSIiVgMpWWAW5HVF89RR/JbGPsQ2if64jRTh9zPxcZaDN+B+xDY6n5xeSYmqqTjDGcYzxYwTmSVQyszGC4dw13RRhtYIY+1PHDdJvhmdYg2AyfB0SgLT/1iiGHlhFZCsNvIP0Ng4Sh/iYnuhmLMolDCsXwJpIawPwhGCaFa3C3nMYszf9zNUmptODlSl5pUKyZWBLgBlI32DBt6U/8DmailhjTE2TBVQ4wF51h1wH4wP0NIyQUCB/U5iMyELDwCJ0aTu1r6PxKC08rvYazl+YzoafJhLx3F1MNR5sHVUYsJehaXoQbC4MNTMJKmzGj+9ysuLikc35EToBkKG0GGg8wYv7t2fPmwCKSGcfahsQ44anNwt083WbhN9GpldRVt6Qz2HhmHk9Mi9kB+XSTgfLju8SR4icquo5wTuW7ZZDLIHPXvtdgAw2CzfzkAX2Z2/Lze9dMjLr2A76mxJiN0e+c42PhSngiZ6QpvkAeCDlyYdqW+QCFoSKSMQJXlRYANeBYcG+YDshN0+2j/NJGUxzKnX+sqhP5JzLY/IlNUeYlyFF+GVkPXXMPWpES8imuaM5jP+bLhdO+xuPO+Z0oaR9jP/etjVoxIfd9NavrkSfRrp3dUkW0sKhGtuBa5Zf0Un7qDee3eP3PFHAkdQF5OhnqqzUDiiQUXrjeH4J9mcUPD6L2k8lKiG9oE/YlQ9ww2UHTr7mGx87mKC8rmEVixWcZl0XoK7Tvdd940gHgub+IlBBETOsd86dwKXsFpJMkxPtlpwR9jhQZh3v9UK/JhRLjf1WuDjdkSewYVppk3UAxlu1ITYpLkY6RLmVTqXv/4Z9tT6vSFjfFI6NMlBfmzd4R2V04rqvEkTjlvVJeWSaR7BnlmR9F7DAY1TWfWDfegMsHM0pPuEEluu7Rwj7Y2rMXbw0HadT1E5txffmlWa7FmUqrwJTepx8rJBV4Y3cCsZ/G3l36Aa5hNkhm2SV95EBxzYepgYYEgHqTpucgeZ8BmeLSMnLJRxkXuTNv7auxLPbN4ODiDL1YZVQT/7H8RUm4SboZUMVOtC3zwUrewTwU3KmBfVtD3tvbzF7Y556Tm75HCow3Sgyz8eTBPTnAHVoaDfUYxRZ3MS2AjgeFgD7Yw/wR9nE0V0GKHfA1Z1oiFoGVdsWbBntlSxTvzJoEU2B+MEsHNFXOqo5KbhaAMmeERw4ScmYHK0ffnNayZSwMCZCL1BQWPWXHIlthmeVnnXBRSCRFp8geixpzzFR8ic2WJVgKGnnaNFUJayzs1bx9a1fJ2F5Ju/y6XCullF/GH9mZJ1W+3iBrs9gilaXTqeAPkY6jdvbtCtkyghahjZJ14SeffHfBLQIl/jJe1i1VBg8MJlESmKPzv4Rb8KjCT1b2gnAzBH9N7+2RUbHUaKgIukl0BSDkq4zDCWBkAM/3TX+EcsaKjhkYtgAYcLEvVhNHskTiJRz4y7QIvxmeC18v+ybtCSDKSfjeP9hMy/mq8DTzO4r9ABwNhgd3TgsxG6CBslpG06+eyFmeH3NWxSoJlGb2gyJpGkuIBMin8F46JWk+0rR8x4HLdUd/Fn+k95ftXTyxG30fmq9CZBx7kqD1U1yqkIip5LgGE+H74RIb0FJcWTuJTCygtD6JZi7F023Bf33yg3mg18wDEuRFUk0kOzPAy2yH/60lyp0om+CSAwCFJROOVl/a7xHv4fDB8nL9NA2lT1Y0KHY+UKTPYGbPrb+skjDgnTt2CdLAu5HdKFUm35zcYOZICd86+2Gl41sUGYPs0r2S5KI84cih8kopNuMRkSOpYd/EcikAbNz77/7xHz98ZUt0uGRaLdNN5A4LPcCu6gWLpudmkuub7jYjSFNkq6RY+xk+lcwSD3co/BDwmM3SELOulcziQxlTXNGci7EYo3oOBkNsWVrLy57BHzHtU1xJuLbCgitVSKTSSo8w+8PCypsZ+srdk1gBgEfxFDv0FxTMPBjMRLdPInEI6UAhOqvkuf3ejc66SjmQlzS9qecXr1+a54O/fBm/fhHrBRU9UCctEGZftA8OcDGTRnl98cXnyZF0KWBAoizJGrIGgip1e7JDSbMxFBqK7C8zD/e9MZuVocg4z8TsjEfyeeSKP/5hGBduBn97crdYv/dv/6//+wPemfE19cjOSjxij2mCdl4trHgLyRXp0KATf2kbw3yI834XmnRVTzXOFqCj/EKf80HsbbDnFA9HZzxM5I/SifUF1+lSv7d+r1S5nn0FDadnhJDvn3/5xRyDfj7shbxOf6nrKAthctineWDr9Kn+2rBl2Vq8Rl9m6pszLhCeI/+JjiyUZ7lqfNX4P5IGy7ruo7eEfAR3qwzyQFdvwdFZPjfPGlga8ptcOTR2wJOVLGIn3ih7eW+/Z+6rUF7w2jofea79JG9ZWycE2FmU33LaE+Murcn5re2P8btDZpzfPpx+gyi0U/K6mCbzLZzd2qoGWEmGGBbg4/Rbgm1kVSovEJ0SGgSdp8SN5Zv7EbSfETej4sBy9WtyfCqpjygnotw8dTsmbwmrZZpIBuQhfpSWuGHgwNJQzUPDWdyiAb987Pgr5OMeWSps0w7CzwRSgH3KX58+8dnj53a76tmnxgM/2F/NHJ59usxJMWypQJvFXSxJSbLPg9Urj0jsQrQTWLOu+/eZdU13qO3E0QIX/6quWFVlHjioA91WvD4IHEu3KN5C+sQ4y4YMnNhnxdwcx7csI9YUmGTdz91HInNgHI5QYPPyIr4CrS/lcO4D9sdsVsayois1e+9SZlSUi2x/7njGNSstyc5G4CsbWb0rZl7HG1eYt98ZDasbZlzuR9CuDeBQ8H13GxTxxBJeo54ZUyP0njCzLfY1PjWa3I00z4AWMjO6K+iBTPJmM4iJylU0pLjY42IwMGKc0aZdqYyJXxuYT4ePMemdEk+8aijo1BfPHGYBCjsA6i16bTYFsflmKYplyfvmZoZraOI+12bhEwCwrnuqtMdUq4ujJFrVpXTwKswbZfDS7tj7YA38la3MsCSXlpEvqOSjQjTKsVnPYJzfFUqXQ7+4sdIFkOIYuY49wnCs9E2WUptBg0O5ydmt3adl/RoulejfWWJEqbsyQ6nZt01/h2Kb+7vIpCM1me94xrVSWs6j8cVIlruq6Bi+4ozMtGx4vIGj9PVwhnv6Hv6yHsj3FuyHwlmS9dUjsVT+EcWcOsV+KtigzYHHbHkoJ+NIztISJ/zIOHgaZ3ngFslTdEAyIWPGheLi/iCsN9tPKtSmK85KDCoRiJYgB+LCqqJ8pyiT2apQ5ATQYk/5O96gYvmY3wQzYkasJT870O0CheZzM5Bgb/I7G8Bp/2IXkgow/KuKFJZMqkq9Ka4wSuDl7za4NYtRZqBusKGCFTp3khQEgm9+Wyhd/mOhh8JlDxtz8+MPmD+OJ4jrDKmt9C65pA9gVpauI3nf9ODOWTmUGDOzB3amj3DSW6JYYr7ZeF1pQXNqCykvNLQ+zpv8NjPc4XtgpPC8ec19LLUUiqlnqnFZHvoyWfqJhAhMcaIElXyUJnVNR0zHFJfwzuKd+Zn4ZfbATIWlk77iSiXb9FUhM4UQiKV6cKFIIxgxRRDNuHz/5/Mvl6yywDnyM964z8XIHbQlqRn44oCWrr3NTHlpxneWDPxLDlWTZFJcNJRO3PsHU16s0OjerKt4Er1DbwlE4ciwRZEHBcbvGgXGQ32iwPhfgHt+/09ZQ33o28qVHJE7pW3xEBUa/RE+Aln2d/+A1m/QxvdRYP6elJopMwYDzNRu8htoKy2kCtLycWIa/gHns3aWhMa9qWeuWOgT0dsC3mGYlaGuW5hhs09tYXzJP8ctHTzLhSyFzPdlia+J3FW04FR7T/fN43G8uv0SGkv1+PkcDu5uec5o0y0qIatmStlM2Tz/sxTBEm8bT1awGUkYV/2Qz35Q9AysvjKfev5EYkHmJvIdGRrIUG+3feUI34YOqc8zzB2810BVr+QpHN8qo9ZWXG8uEHxl7YwS+NKMIKiXzJBJgLf91jfQYtz4wbT8zXRG6p2FP7N9WFYgUGTVZbKqDBd/YFUa+xL3tN8ezEiK8nIFZorsnYWx3iw9uH9qfRdKzD242yzNFR1vlBvKbgqriUZ56CstsBRtweFDzlXRmbKEddUyRcnwLEikPyWyJvvcDgXjHTi/5l6lYqF1B1fSGo2DVf4L3brQjBnmB9ITWXEx5x0MgA6jCSlK8F6FW7zCGiMpZlzMVOrWYUDxwFHdEN6zI9KU4PCUYpkVg4LMFdMMMx7oyS85XAHbcrY/scDUPuPU+pA+kHnxzB23fG/7XLWN/j6Gc7koTowjrA8wgyW77PHUMtfybaVWVmvPn3VXmSVJ8NT9lw8s8Tf64KH1EV+ms5exGc5JfaD0AHFAkBujhej8lqUxzcDo6/qoLv7ADoiqIpJHb9IV7ssgDI13RGJ11TLKYGDlV5PY98D+Z1JyhKerSUzZEQYOBcZ+oyszI8sbz/+u2LimxDbFHYY08tyNU4M/T660A0m/2x7TK7tgjjMCjKCv/sGuKlZ8zIfJ7rm1HZ2hj65thJ13pypwUWOFOtISDUYM3smL2YlkbNdQ7FAQlE9NofB8//ixf3gi54ln/ixVVD//VMHdph2QVcrlXWIVYFdiiw86TWZcmPv6ebsScIvNXVykji7tuXLF/Tf2PXRcgu3EPQKOOOy5wgMzAwaS47ODhQLVFKtG8dpbpYDPq3dJwTccBhCsjKDVGUiwh0Tnc+tPT4iCmcgd0vgyos2+GCC8t8Eyd4B9/tDOglm/R98X4fMaLBDfUbQn+tJaB5iT4K64DpSfisBDumcrXUeCgvOrSgyve3W3ATV2DezlEkfRHVJaYpFRCT8YDDY4nIzyOPKDEb7yrXqZ05GQx1vCIvZmSvrcNse5WIxlSzeP95+fSqdCiiUE5/+yXOo30mLIoGUv5yvhvpIeEnAImY6AQ8jxLqTTkqhODZGWvKrX3ReE2vIFhEWZpYvrwawKZQmiCwaFMwCL+NLq82mGOvtDDFDHyQckeZC6wxEze1zVw+k5+OUxZEZx8Xt0Ix4fxO0nozpVFcU44ZjebgNBJfp40YcvTNGlvM7OCndLJkEaBWN2Sy7qWHthf9jvnyUxZmF44+CdBu657A1yt5qsdtMb4lHew8wI4YzsdmTfVlqSqMKPeEYD8oNxv2XB0lBFz7yr9eGJE0PTS7Mfzuyw3zWXK4i30guwoSgf8W+2fMcn4B4tJttuaFiW8wB7V9AED5ZrTLO5GBHFdckz1Z9wUY/N6+4noDZlSVsg9XKpFDl/2t1DTPPPdFziQRTFv96k+0FxM+3F0g9T9fmpsTdnHg/wPWAsxIb193ZM4urVhxHOWCLljCMmzdvLvW2M1K/qVm+ga+GYtmAkNX/gTf4DN72350Wvi+nDaWDcyM5KMatnsIIiYxDLfj+DZmZgn3G4dzUTy4rfakRyxbaK4VPMOPJ1e5/C2Sl8WGnBZym0m+XaaJMZwa6bgjsMkqUKdzAR9bf94T09vsfgxhI6W0VJcVrgUaGTb8in5aHJ3Y9Z1MCTqGa8n6RFcc6t8UP56YcfnMZl+EM9puvukef77nJOnXZAVJX3niveX837/CPzPq/DulXQTuJo/b6wM4e/v35jS6vf+ZJh1jBbrHbot7LgS9aFy7J1C/rm0vlG2O9ibINPz1HDKdUrnG2Fye8/9QomdZf39j6R8dxthh3XINiKLkoZp7cYdvxhh3r/+ovlRJuJsZRoe2O872R51DitteVROVeCZ4jqbb4qcyJhXGlBpMKPKiPyzVo21k1Mm/1QsI2qzzwR98xDTGRaMz2EkuPR391cnHX+kvFYVOXOvjXTY0Penf5OCKEFT1fSZFkSK61//dNP1/wIluqbqwEarC2vrrufIVKgLlcF4VwulWBgwwzdr9E+OGsUbdWv3jOpKeCHts3i1G8ntm/Snx6LJYIDcTah5bn98R0YacAyIv4+zZxnowjrOEeeXt2qnlWFgm3jFeQagoGmZl9svnPw98b3vrYZdkYHwdZCTZ2UlhPxFchM7K0pNL8Q0hQYszAUWen4toLssiTJs7/9OiyAdEZoAf8tt9u7g2k4a5/SAm2DH1WIKNNgzEBwhBsPJyt/z7vEvVSSYfFMY6rgK+054QD34WqPYYVvDzMdWNbs6exrZshX04QOVpQ/bsyGOuzmWUX9EX1q+0IP75uhzcbh49wAJqItkMYsD1MrWzCrQlnCaL0y8+B24m++Mc/lmMRD9jz5jJcYEerouZ39nFF+I66zYUSVsQbm3F/bzGt0aVb8qpUkl97wJpg6nypZz1UqUCyzMfjjdwSfKK8vzH9gH78wDLzFdHwXxTpZBeRINJddMrIixWzsrQ1s5JUizcTw15muIxnBfgQmyifuSLvkmREJ8yVYV0j2KS14kdQB1cxrSFOQBmLWxaj9zJJhRiPWiVsTWm6YbYm2GZzMzmg5pMv0XE+GT4kXvP3GYFui9KUvM/fluSlabPyjuOL1GadFCHXLwMO9ZthstXWJJLIxa8oVV0BSZSjWSILFT1zf3L6KyBMjtjYU53HMg7opezrE2Vhii9Uewk5eqpfU9vwGntk+E7PK27gvq8UWokqJslyIwUZr3038C5fqGBzKi2nAKa4yy8iAlPGK5rtjJcHvaLNDy6yWoMDm60cWAsdDEgIMa8ZnvJ2sGWYdiLW0zo0pPhtDgdk5NxQZe5Gzr0AzA/fZGG/ru47xkqiV4opDctUyZ/A7FScyYTuNLPFd+7tPaQmDpJziqpAen75kaDMvFAcdxpG13Qy/eJgTLUFp4tPf92affvhK0x7KXCyDvSaCRePslPa7b/3Kl5uiF5fxzi3CmuyV+mP5pnrdfVFVbfkqSOeylCL/3ie/PntqZ3oeDe+9zCi8tLDE1ErYSGE+yyFxOovv3RLTak1sVIqcTVK9IKWs+9xAwmZ7yjtLY295ZGffza1+TRmw99ZSXuBW9ZTvMq/NR2rj6gfWLuQ5fH/0Hdn1I6bE4gB0A0U9W5Uv1ipQAqlk7UiCwL4HmTUbkwd3zO1ZWnxoCsyd3rLEaP/3WGsfb78d/GeVtl/2EUrHlBaYG/xkPBcc8GNh1sUmLIor7TcVQBvRDL94UKLhXz9kmo8t9hiss5KHCSlNFV2XO5FibCAr9PjAWI6B3k3QQmKs5P76gJWcGU6cYHsuWlQjPyAOH2f+F2dgAqnAWsICUVaGiGokHUplCau/FLlCMCekVl4wzhllwFiCK/zmvTYPDi4Ttwjc0CMJhV6zLuLMukaX6VT+yjffKM54OQjM7JN79UplEOuVeovxyIvyYloeBuLcQ93p+hEw0X/wf/csREKApGwg0opH4AOgRUnJLAxF9o4omHwmZv0Y9UB/9taWU5m9Y4m514N7Kct2+w0y66IatpLAYPERsGNKS21RoTDCq8448YNFee0ZLUAyoyFetExIl6S0jL97npwcnnJ31Q07PJ3YwPyYqf8PplBkpg57mQwZn/sj4PPLJK0T0gHk/ViKEkUdctaGPaHWGa62PJK2QJiRo7QZZhj/Gkxk2YORNg8FgomVN2Z6zxLrymdhAX4m2uJJFoYse7FMd0buM/xRlnpnwMDSIYdnUV6yNkwtk75XtaDSIl2lteRNP0pBxZLHwvQhb6zTZgDMchrKiwtkMTlv81DQioD6TAOIuI3vkL0zqNrbWWwDnFkZCsyvJOFtMzLuRuRozOLBPV1HwoC95RfwGhknZmO91jvjDan62ff+p//8nz/Ig3sftJJbtIN4rbT/qrCP8iZDDSwM+fHueUTLy4jg/C4YmxGnplGHwT4XHgxUbAa7IiAWjKTM1Nl7QkFnvF9By3BADsVFp8PM7hQN8V7wxh7DC7uk88fvTQE3LUJb+1up7guUUzRym4jTKZWj/nrZPDVSiVhzKItBxgAYtfo+17RsPTtcWRU4ntDigw6HlQdkxbvKkZWH41ytS1IlUl6f2rk2mcqrTiXHVHWOQGHeempwyksVv8SuCNGGKDD2wTjwqxnYrj0wMd1gaCO7UYpk1ZDCHdALs+hfF0VmSozZmX1vvHl8idF+w5/axIElRyw3WSJ2f4CX8GFyY0lofJzrjNbM3Ps3//RPH9DMjPb2Kg5vjzXOXTxiMcQmNZcS7pl1ZR+RfjGeOEWUtuIvleQ8BZ0VMt+ow1P4MJJcsJnOCz32j2TF1gUJkHLDCRttHl1my9io1CHLSW9MedXPcJUKS9iEiLpXWHlK0zulY0WG53CW7/Y+YNrz8APXQWT3KWk/5KufHk9+psqUl+7qag8Iruaqjo8Woo05ZE7H85Wdp/ty2oOLrSSZgFcYjGWctOVRLu/rH2YdKC+U2Dtb4WDgg/PbxWNFhaaYF0uKF6CN5AKqFpXM5IlIDe520qTQsFxMszRmZqbQrO5Iw9EtyouVoflaEhQcis1+G8OrAnOFXSvzvX/4558/8KN5aT8aHkZ88ZzRZjV2+Jl53kACinRA1/Y0dsy6VvhBpEQ0/OqZMz2HhmLfiX2gxzYLGm6MFd5Ogtgw0njBZgnGbye+gY4RLpCJ/Sf3DGIm1qcf8R8QMXNkyZMzXLU6Uy2HIhasIMoBLEbJBMdfZo7U1Z5nwbB8CqPlddYOhX/WsW9JU3zV6yZJzcCGfTau+MBgqAVb4r7JOH3DK/MziuWlu2qzb4r9E7Wm5IIHhcU3MArnPKp0nnp1jM4Z57eY0CMHTllRXp+bIstmYXUmq+zsAK2Uvx25K4SbScgjrgj/xX9fZkSBTVeRmGEZy414eiGPRpVio++kXhloMei6Z5dIEkbBuRcan2lFKlbg5ONKCxww/sfRQ8GSOjADm3sflkmemRscvwreRti1DlE4V/jFQ8yoKi4wLJVIMZZoGJ39YB3kjWyMB968Y3zxyjtjfjw38TBiwuKvdgPybnrivSjILBV/jyx5xiqPP4E8XQgaCGcsSz6hOg7hqr+Hy4hUKEDnzD6XZj29b7BOvZ0ayDSBGPlyiwKzTM77XXpOqUl1O4MlOJYOseTj+nqUOgogtpHClWqtEBBUJesGkqDmfgOtj0GB0flifMIe2DwLo4EkRMFDJ6uAHIneruwtjkqZJLrerXIMBuTBHcWWlFtSaCg9zdjofl15mZcgV27m5s69t7vXdlNspuDw4C4lB+zIb2RWWjBIARg6dCi40Q4jTEBbD2i4/oMP67HtOW3N+jL84kGJ1BphpYtIVjUp003yTXm1LeTmwvsDoj/x9fvvyWNIy6hhP4F1CSyNnthMBUV8ZG/IMcJ3tf5SlTITsk/VjUxU5YmTVDBPI6eDcG4TVVbCpL+kskY/OqgQ22sehHF6i6WQzGeDAQ0jdL6Hw/UXcBLc5CXA8/3jhonnW5v50bF+DA/9A9aG7AvTAX1jx0g+twPAdEpque26j5WuUrcrHSsS1HFSZGaFZ/9QYm7M8eCzNEuosLQtW6XQKuluZF6xERIkF0kK8z7zICUztL+YofG2L8SVnH1Dfi0JMzkLk6ZrStgGY7bmnnJQYhZHlaHQiLhiY3kwMiZGGVmhPLDMGV4yzDAtWIVzSdkOMfOBvt+GurFUkuEXD0o0/tfPnGlZhBMMHzAzCPeSfcXSWklYrBhJFBcj+r+ZD8HeGZkSxZ44llW/GY2fzHDiFA3xXRAnGcXF4eK6u6etPa4CoUdj2yz50Pr5l1/cCGRUFrWsMC7YipDki4CWxjdIG13tQzCSKTjJorDF3hLGLxjYfPPV9VcAZQQHI/DPiPpPq5+Xb15/8u7te98bxgUTgwr4BqZ8W1LxRIgi65aj9Hes9LCcyJs9HQYKDFgYOGvGHeU6ziJyf3yPvsvYKpfIK8TZF1GXn0GRK7HwpgvHOQW6iPxspgWaGf+EUzMQGm7Tj2CjLUqcdXbXqYyG2CCHWW7vbXVWK/yqdUc5MVXljZJ5Bssz3F8lU+QV7jWbYykiExAyo2Wfi32bm1oqZETMyBiLP/3wxhguoMR/Jbm8qHIBqSktIVrX/VKuHmJkTOeiA+J1qHVqqPJ1JimRJUFMaXwPGAr5N3jRuSpJvsnXxAusYADDYWDtd51qS8l48C3+KU6YOpL/wE9tKcj9B+J+yUbGgm3Lqso/yMwNFPtgzL615dk/3uG9HQe472wJ674rMM6EociwuOOB+7ZsDlL8kbyqmSL7jqKSoeRO6afYkqj+Ngonka6UlpiLeHctGUpqIZreEV+R1Y2C7jU/WPvfM9LI8Eceog1zTF/9nJZM5OXKEdZcH5tCyXB3ud3IXEjMDffmTZpR3uRSIcqRHx8Wf6dkifwHUUl+YvV13+qLwUWkEcOhiAUpRW4NaSyV5zOQ2WtdF7HlPBQxsRSTJ/I6JnHVrGuYp8ALsrvBkvvz/MqNbe5SecFabEGqitmX+w+0Tp+BHwqsv7yq9o2YgtB3FQwNBIcstzMD0xu2ZNDB7HL3Aefu939XQs/d0vyrDNVwjik174xQ7b4fbVVprfBPeBnluh9B+/HQOTX3Fzr8zDzv5JUPhqU7fPp9VTmHtMIrHpRhiqj+zABZNtDP2LOxaalfvMia6lUPyANZZrNY5KG4Prshq0Ju84XkKSXcqkLDS9YvT574qPu/+tvfZvGgufZNaInz00IaKmiGzQOM8Fnj3uq4Ew+prLDmmKZYZEWAIQ16V3luF/oqHxuJ8IHyYuaJEsUR71YdbKDcna06jW+QqLpY4nllxxbe2DK4NdInj+w8JEpsPeCghLDsZuNmCoid+C4o0QZSYPRNxx3fqsYKAnccjaKrhS5hyREbRt4Hn6rSAlcPJyawr+wMxyPbhK0pkPnLLZjq4SxAq1FmQOxzceobRVJbLsxo6HvwxKnqM+WVQRtNFUjkyX1hnQNKhSW8ppKucttJFBkIWJjNRkby1CmKqyZXB9tQFiSf/vbUZDDfj3as4NQj/gskJD8xH4KmRlbKsazpVLSBaMarUnU4N1YwZa+7xeZijYCwNbJTciSlAiGNoJzOXrH3KRJdnhqZDCIxk8fSEF7uwos8/FMn5RuWlUY7cdsDLpgemrEDCgyryFzRhkqm8F0/Yp73xgMIfZPPxCbHtywpsqT88DN8BNre2DQby5W2ZBaxDUK3kB05KcOnyYOQhz6YTq/obz1v4E9Taams6CiuNyMNbmn9y1ypcyg4WwJQWwi4eLdwFmDNqDoNZnvRqkrVMOMXHzFBaRl2AawzydH5HT9fdZWZukhBwMK8XpriYin0JhQX+Plh/WKm8CzZ7N0XsuLpEd+KF2+y2ePiWYwzSF17JnQg/7OBdAFchVD2eEDIO4MV2NyBkkNd7Hoq7KEw5Lmd2wvODGh281MwT2eJ8sJDuGZeZ3EWJLpRaKUWXt4qENNJw7CE/S/2jLDUw7P/59Z+id9KRQvRXb2jcBUeetks5/pszL6Vt7Y/hsEKD4rsgV3589D2/zje88DeSf4KgTtKEj+x/cq0w6wJ0U0pLRibaVS45OwGSxUcPGS0l8E2vsEMpoJzJMk9WpgvvNpsL8Nf1jpavvrEUjkMObIk4xr1LTP8KvoyMZKAwBSnPvmP4trqiEuUW3HIcIfPkyvOcEX+C8JkJXP45Ek9jqhjLS/FOsjyL8qKrGFJqeNdKBBSNY/Azr1wRFGQJqoBFLOc1fcfy3bCQ/x0yiuLGY0OAkt5xboX3NXvyH9RRXO7KF1twCyEFQxcg+GRh3vv8LrBbyt5Cb2ay5P4opATKskizBUQZc1vBvvy3P6OPTKLv3//1hRX7sGdScBttN3MWCMgmWL7NUDHk1VxjlyYdxQvTd5rRcV4LY80RhTPbb/pndnif8fNvZqNdPjZwtmiFdOhS+dI435ny3dq5CpueFFGU3FF7EtYxegU2Fe77CyXeIpvI4ul2B/2Y667Slr4OhJClj/YH7R6Oy1Hp33JwvKTcxrynAHt9f5WIXxTqFS6mT1lsJxLh61voYQXFt7NR3KVQEovCvr3j2NkWxLiQHec/RegzWhJqgk4kMHMC+XFsqG8WFw9AGqxUcqhKlO6WjuWpyNnUIgDYzpy+Q5cZmAR+g7CPeaNHWUf4wwz7mTokRRaUmTUgzy4Y6mICb77C+Q9WS4eozdWCpnUdpSQjLX2G8NYQM0EDOPOpcLN5UGREtOK194yj//Clp+w9PMyUfJQaARfAG8GQc8+FzMv9rniMs1MQzyQQBiLQqXNmGdoAU3vBKBcznI9tc74Em8ToBYf4i2RS9eNmFK+zGv7hJcXpKSAMYU//CMQ7wF3GcTARJaLUiSqyxy2h6ws0YZlufDNn28++dG86reeElsLztMhVRZokPezhSYvZ6q+NfP4vYqiJNPlayCTTpCZIL9LZoIo8708DZCZQeBf1RWrqExXnIKlzAwAWEJEgbG0xgAAJYb/QH0/M8HbDJSMBto9eQLYRjDWWAKlLliGxsOEO7+1OMoM47A9Htw3CG9mS77yTcFOtfTxqiATiJtQWpHZPidp1vXCjSVs1iULw3V7zGjE+5xwMKBlymgWn+EWD3OiJShtphklXWXODcRIFms8DBqwiDr1FGRoP9qR5Kdm1PDg0weuIE/RaBT+3ay75LX9kOIqeG+QcWMWOnT2BEVnboasEAjVBlnGlE5aDyaVQSH3ZjuRQp2PhCf7PgS4QZ5slsv5Ho8YR4jMxMElLzo/lBc8uRm6KbA4uLuESEBSyhCrjDzFQ5EiCETqS2hLBiF//mHOb/FYseX8tsB0STQyvcF8BN1PW8iT/K3y7E33PLjrfi1/26wMC1t+d/rttfDW0qM8kTvSL3kcUcS8jXV4pgWqPYyyPPHSTvKjRBjlZR3AxNcefNui2BkRUyYs37mzWBtV8mQ09C3Md28ZwGqpkBKqRDCoUI6LERCOaemYoHfpYyThgo8Tr+2MNLlu5MpH9eJWi2eNP5YqarIoYxaWJL+w0TNPvlSoOu8hE9c9mDUL1GM5ShemNXSRIlKxgNIK0BiVoQafDw54e0o0lotkYvoVYeqB3yVOeR9wbxb+A2cjiCsopO82Vg/yENcbKmWYtPaTsMF75vzWOmJ4Zy9s1x1abULbOWocCdQoIbBG9kZyrL0N0Eo2A5TkFzB5cGe/UFeSMEPjkLR7brfR8ezo1urSvbqj4HzWsyBWW+lNjsLn5JwQiZS1ryNWvPMeVlpiFFyjzPLDxYv6Q64dsc6q5g5xFFdHhiyLRsN6zU27bX8hO10VvwcnPCXEdMcWuVplzvKz/PKrnU3CevLqGZeEQh4MJ77+ys7jWCdz9YOk7KExCu/fk9WhvK6iKrCWJHEEyz1mbXvCHkK1TQ8mJ/93ayOUZW12IWx5iRCLZCJwTA/gZVB3kGEhhhumGg9lmUimzLsiDusswTFgwS8cg0r+lx3WUVriHzqj4Qib6LYrmJzo/JY7orBE1CzsRpZAEUQsSajE6PxXyRtgM3w7IAxtiCM5YPWlRuu3OEcnv4DYIryf/AOCFw/uDx5wcMX+mSLjihLuV0Ph8Y0oDVhwSm7ih58MSV/+YaUVmcnwx4xKGPIcSMYPHvtAjIrKZw++smwtzqgMjxY8XDmiG4M9IdZH01sGkJGrWCjPQXFxqJYZ5akZl0iIrMUV1KzutOGEV8D6D3QwYGAJ77DVovhfo89StLTK/so302w4A5h/Bi2EcEue3nnpWgxlyb4O9Vd7VM+1PE+LrETgmN4snLiVlSGDG2bnPQURSXTQXpIlow2cA1+5dBhbpxdGCLVmW6B+RTOwo401E2MmgbcKZrd4qujVdZtmJUeCbDTQRnYFcUxSbfRljiWuDNN3ppmavLfL4W1ybotjW5Qd1p8+a5NSs9mae3BHqVmYOpfTW4+T32JU9epfggE1AROCQ0qLoht4E/bw1zepn7+omsbvxRXQNoM0uQw0sF6TrzAvEL8HJ24JMc2BxBUZhBOAQsoFFKXCHtfp2ZB4EPIpTlQGICiVkdE6fI08IgUsiosf/mGrRfG/QRhFT33RqbAvGHlYivaQxRI9uAUbP0Z1XpSIGGJ4KVGEykLKHiPv0HSu7HfxW+jtdw3xI/oXveGNmRd+Klk65CzfmWtRkEFVpjesKqxqi3B1UcoSdSilAs1v5U875PuHWU9yESRGC3xrHPBNJvWCPvEeaKRt2Xr098ndw3R1HnLNV5DYb5krij6YCSTLj5zbTR7bLWwiMKPjGhikcUWGQkOBGRLUmPunJI27uICZlBtXliie4CdYgzmstKxs9sMnvvXww3hmy4Umm3tMKKfxMHn1oxFudjCYGtTjRC0hpilvJWEOFPnVbOi0cUZOwjkRHbfOtE7v8DLeLNcSADckRaNm7bdAD4Qq/NdKoUSe2rfwmXUoHHSWQslhe8jEcQ8mx6YY3yGKI86MIzaFBT+/RSoCKG0G2g7wrTx/9cJ+zB98oMMB29oTydTybyINcdIB4N9n7+3MwI4MlMR/WUVKh3/yYpy09lNiakMqhxK+lMhMzPa835s3HY7ksOKDTKeUWIfxTpZYG3jvl3cA6WmQKNto+wHnCgwlZv+Jf5CSs76A/sD/TQoOpYhrLGZ0/n8qA/P3/vt/+t8/fGPLdqUCIbP3RMZ7cGUezL42d0UoE/zg8QGBa1T4Et9I3Gd5ZtG4MlMXUX/bH97ZEznLM2vyS3Gt6GQ4ByIiJSKKW1HqDeV12mt7hQ2RY8bFPte/+vHH3d+Fow38VsjMSYD5NffWkXxfdcsFhNpgLhYCytM7ZHWCYE0GLubHMhjRSP5mUckVAbdYbCJLxw6oa56WsUYk1UF1I1nMiOW9/f7kvX3tfmmbdJShrC7yYlqEXTCr4peUoyE6R1YTOFMnJcZMzBXZpMTqA6iCYp3RAmiPQl4VtYRYM7X8u0lTm0Fd4fg+xZUjMrmZiq075FQj/8N/+k8ffjdromgqvocoqHc/xhNr0HRY7G3wX88hfCrcebtloS1J+VXq6qjib0GVtcIROYoFEmDMJUV7NpcprokfZ8/CvLnjSYd2S/oT+O5XxE9hzbhYWt01oFlX0SYvLEuxbIa3kbWVXQ9hlL4Ht2YBaEbgolfKvy4RUigcSZO1j3xAZnermVHESxvIsSSCsUZ5TU1JKit8CxFEY08aC1A/sOxLh1jurfene+zEOlYVxmrbljNC9yiN56HEOA+GAns7+Q3UNSSY2GPQ1TUV32Z69amMcwfk9TLvo7+GLttREANVIdD+2xHVvpBU7N4//PzzBzpaFMgDsw7Bym+kkxLjoDnKLL7SsC4UXV/z7ItzKtf3UsxM/Ssc/X45KUrVjWOePpDqdyIp15nKEXNSXKcMJ0RGyC1OUMnc+cVab8u4QLzsfYsc5V7YbAtHp4eMM8ToIANxEFP3i9hCGGtlkFgFjCVDliGyvc8K3NwA5KmyWqzVyjfSQMGyHOfmmNV8bd8nSkEkGsVuPZl6QnlxpQ71hSMBLEG3lg/VSpJHVaa4BCG9TEt5ylFJlbj2DXZ5b0eJoaR55C9wdnxrezCrb0EseonlTyn7krMndLNy7+FE8lCmbKtGFexBP3V0hqkx23KlBUaIca6KjVhtEo9SKhkfKje1AS8UJh8Io3qNag7hHCCM4uJ81Vd2xYmffZr48KJO1BJiWoYzcrUAxVSBS3Fle2nKPPqeSEKP4K9Pn1jH9rnPHo+ijOUkB7gVljk8ikttE8tUw0Iw8VuFqSTSIWL1yUiXg+lpmUZIJHVZUJwqXfCKj70ZcXMzMu01pCxEJpJX2hjJKhQoOH7AMjBm8nyj5cyrWvAOEvnGWXpnuRozaJQX+1/loFctpzesKqy32CfOQz0o7AnZnwsqOsPXj/BdRse3b/985wNGPJ8wE/P3hpViW5Y+7bwmblfuHmdqN70Fe1xOYZjeQmS/y/JDmJWWg1o++zIokfs2kvjW/AiWH2CB2qPCX8vbTJvagUOPXM3hZ57s4yf5FN4OYTYCtafBcuGspCJBKit7ssxmTszgB81S3iWukiBvLE0vf/Nj+vXiM1xRSsmiA8h06FsjapWZ63ROGAmwFXvPvz9O/ENvUZRlewhfrJEWjGD7bwY0LBmyzwWmWl1kGEogxc+x4SRAgfJi2fTBQzvj9ejref834+EjiMAr9Yby4ptnVsKZwtL1Umwp2I7VpbpW1ZWwScxYIqXc1V++lbSc+O6TP21PFvdKXBpLW7nzWxtwoNA4tCvZ4DWG9/GumtlX6qagY/uoVaAVw4dpZ8gNYzHjypXWRBXC/FiYdZXXf9QYOd4Qhg1i08OHTyfvvgtNmZzCK6SNNyPr+X4pM0SZj2xFoivFBbKsRmfssdicaAE6fB3cHdrgjYUV1pcQ6kpc0Lkzczy9hyZa9q7JIo8Wu0zuA78B/UYQtXXP641vcC1XC6m4buVvkA3ZERNLYM12i6RioYDrbBASuNvCiwV7Xr5s6Aezz2K+mfLwyzInCoyZGAYOyQHucn8WVQVcrLKYpmpV/ppTlRbkGuJWUybm36K87P9bvFDYyhHbH/ITyLIzAz4GYefOjn0kMk8VXLZbjJ9qgxWiRW5TWn+32JLghKYojk6f2dkq3KVgqAGe1rOi0QKspQfyaYnomc/wTt2yW6NTpKG4frMOn9EQytnlg5c5YOHAWyoea2GVWa0jLMTkNDaWLthpR0WGwgpbULi0FHlqD61CXfiVpZnjbjqBZ+HqvUXX97kYxMzf3xYildyC61HP81gy5NuQ66k8txG7jvxMAJR4/n9pyss2k9xU/sw5qhnxDQb4fWGpx3dDW6LAmH3Rng9sP1bVRKsRju82WxGyDXXrOZF5sWhMUAfMyFBgLDEml0rmwd3+cR6O/fx9HtxVa7cuYZNgQ/Qm/K4MR24yh9lWXWmBdaobKt2vHbHpMD/ereUhaBx6QlsQ5Kp7FBiKiw/8ph5o/Wb+/e7Z1B6z6/mRICb/+lEmOUt+TI1lnIbJw3NYEYuMiFhcQfAyS8X7/PffcTXMPqsuyteeiF/5dD74d/zma7spd8StlPgWgh1v6PvAwox1WNLl2hsuztt+xPlx4sLwxuSlbru3PUNGBSJzx8lHLFkYMrTBC7v0ERdMWN6yj9ScDWal7y5CVTADcwVm3jfYB0Lpsn8YjV/KKqtVa5JClV6WuDsZnXKbYf9ExHW6Rwv3SfLgbm9uO7Z/983tHXWSlJm9TbFxLcmyxwuRj0fuKHLJVcw71TIzIluJYaaVdhIKlAV1ra9/ZT7wZsu7okisyplGAdOMFvSIsjyE9dquvZQmgXqGeP7nv//df0Bcb+JK3cHFlEFlykul9F7jJic+YGIfzX0i2qx19wOCBjnRkkK57KLKiWTJK/ueeLT40oxZvhl15KuqLJF14pILEJnFJ2VZP4ybUDUqqUOnlyVskRcU6awkynZRgR7SC/IgQ3vr3iz5D1z2AC8gckMoqDJM6P2/yYD7H5SX+w+0AVesa1VvnZUDH1Ud0TWpse2jEBXsyi7l85mZzcgYsLNvhl9Fn53ZsiN6Knlwv2dvTPEnR7dWfx9Lu0suiVzKp/RdbyGlD7bwvf/VTN5BoPQVMs9NqbORhlVSzzS+iWuFvEgItJQjZXllRyzcesMvpNnjwlkkI/pZBs+sMOaFVVLvTj0aPB8khhOMjOtm3Y60/UdsiLkpLuq8Z8VlM1SWY84+IlXi4UeFY2KuC5+XVkugMi7+y/RuPO1xAcL3xyyP2RZGQrbF03hixiGiM96ISYm/WBtybCLzZAGZGvA58iKZvUsydG78TvhPx/8Ic/kL2j4jemEE/mO1sLzNd8t/9mi/MBnwVMFSIoZggi/lTiyp4iPGC5ndi6rP7IytLsucXQ24IrP6YZ/snc2y37PsaL9DFFvTgzszNqtDZm3zQKuK/XxiFD22xhFZV9wEJLPSAiikpzKR8oSFpMwBrn1c8YmMx/ShcIUe5VieobM67SJpgAk//2RLhd4RxwrJZlogyjJXmGNuzKSDwXACWVjb3/2ojlTRE4JIT3tPu4wmOoyIVKQBuC/d2Yzrg1mxfP/t4/6PQnx36KyzFoWlPGjiU5J9Aow06opZnB4iKlLzu5Qf5ekeXWy5PHtE7lryGQlFSp5Ip24wgEB5sVzAsQ6usBc7KvuxvCNfVB1xOuE/bR/MlZgtI7Lv4woM03Lra/KNApVSxX8EkqlhxEoUckqLIJVsldx45zITQ+Gj2FhK540ywy/g7MHdgDiawAwNS0f31m4K7VMb/RF3xUZ8WWra4KGeXcoEb5K5zKtj6KVan7DMtIQur4xsSBRw8VG5R4vKcqEwBfB9wYIFCvso2zpIzJGjB419iNvQ4pkfPorLZxDWKc6/+JXSirgonTMtfBFKYRlOnJo9TuS0P0k00qTzwqvFFYpL0kX8kgW6UiJD3jPyahKazXdJGy8Sz1+8/OSR7el8bbOeMn/5mWyi3gQo5S/rGgRstHOuav4MxNBBeTeZmgBEpoTn98nSIe6KvrTfDA5wP5YlpJJX4rGOVWW835ocvq+IEYN1wro/y/fCbJ9neVRqSbmzUKtRCoYGwYpSteiY7PRt1KGUGnGc2foVJYZC4eSdPV0ema4lSWGUGQqO/f8URuHlSk7tKC4Vj2/lHXobollpRQQQyJ5GnTBr0N1VtSWiFZ4MaSdSoQcuRmEcPvV9IczUOyiOZoGTxuQOKwwauPtpeYyxCm+5ulgAwEWsxiedCrPH3UpFCPWGuYlkSQca7D3pwCygR58Sd4lHh5CZ/dChNJ+J12Z+J6PkgdHksxcYaXzwWVduJCRoESSucIdIIytiUziCclQD83j/HUBGQMdJRvTVsEhUM6dELR0yiLnCe3uP1tE85IjVJLnKaqSzxQoXLxV829R3us3YlhNtOZSBZo7pKEcXl5NAFbSSvQNSKVUmxdor8/bH6f8wEHGlpru2LM29t1sbJGe2eHZnRvfeCWjmhhLDVArFZxptXt5N15aQvnhzl/f2vTO7TGlhhpkaXe9J4E6dIJisC93Sz6afek41RIWmuEKhuAsj27c5RUOMhrfwueKyPa7PH2LuH24NNnnrj7jLc4UvT00xzj7hc+6Q13bYiMgDWzFZMy4UV30prcbZOi3iXOemFC1Ldi0LxXfgt4UvT08F13x8cLdCuD96ZDMuPEjkMMR2E8tJWyzHucp2ChgOYVHJwfzsOU8+Q1dGtngDHhau8t5e0r8iHmVILb20WmzBCIdCRomhwNhCoE9g4MJyIu98EHMFlztxiFkJ1CgusEb2RrKQ876bB8qu5FBoKDeu8bBEX6qkv7T/DDgYZPg/S/I4afyzODrO9Y8F/LqS+Z1+e+T5dSUoPS0PRnGrlWiIew9r/PxnpFmOtKv4esiUV6EJLjT9M1vC43ls7oUO43cM6z/CR6WjINlw/9oVFwxZLrVcfVQyz1dqrcgld1iJgJFVMNKSMjm1HDkhrOGPtGQsgYLEu0kVPq+eWLwbruKaStCBPXuZrr1htrd0WCp1kGjBEdjAJKxFdsqbAFiaw4+gjySvIV+S83iLlyqwJfrsy2ZeOA+Q9/a72vtSfcKrwpJH9aw3MArrTZoevj2fiZkio+7pJDGtv+QaEhE58pZAjbIb2Y1StWRq5eN4YlvGtlJYb7gl7AoNpRb/Ww5dLUowvVN+VWlJ7FVlgr3z8MH89uy5j3i/CiPeFZ4OjiyrQ48sznIhJDO8vVPMjE4lIp5RXL8+ma67l3d4qjnjTU0UES1pwhVzY5hlQkYe3+9VwOJBBKa4opGGliN3HwyOSCws3JBSuADx0dZvtI394whB1RWYeC8LD8TXdBdkMo3X7QEJNpZYYAdIrUCEqSe/CrGMxZ1hc52fIy201bf4qmY2EmEnem/HMAjL1lN3TDVobSXDv+pU1SSZFBcOpSuevwV9b/JOkZze/olRgpmN442C7YXZ8a3Nzm786TM8k491MCcOBSTzEPCtAUnskjulH2XkUqUFE3TydFh8+HQcUZnsZhZp1ZKFhErGGISp+7lolgAAQABJREFUKR1+pFWAH4qKX0ZtT2wvbe589PNC/a8ecab3AiB8S0oKgQXjD6x3mCXsesTChNypWpqoR5o6gAyNQ5aLxlgNb41f2HppB2BxP7TUWwVS/FeyWklRpgVmQZRmXbbHZHtdWGkuh62BkQRLyT0hla7zUGAycvCCax+v74XFAvCa6BBPDVL8bpmRY+Dy3oxKUF7wfGZJuUFqMznWsVpMhRRXVdZlVq5KpTdLV9k1JDao8CVFm42hyHxJ0ZTapf2IhBErFYYFUslSqYG3agbQuvwDSG4EJMoVuTxKzJRWxY1TwBYJzskbdUK2W5SZxQ/KRGct5vJ7Ahu04O/w3U8DfEh+ZpFPf5sMJ+wj92eltARNbs54zEmF87/aQ6OjcO/zeXY/JlIQUdiCNZqyXDx7fKCGu8akliar+1yB11rZdtraFD7B5ghlYUid4oaMzeIaXJtOO0dVPVQPsBUAWRLmgP6lnWNOos34QA6K9ncUmC0fsr+g60duw/ow1quqTa1ay2uLo1JtCHJYUnR/gTYwZTaGz0A8UEiB8V68UfRxdXMj813A7FPZgCyzx2QuS91kXGJDQ+H4PkK7O9MSoRXiwbpxp7u2ds4+FyO2U8wWNMHFQzJhOgI2mn/8/odLOwPRgdbvv9t9RzZ7WAwnjHrGlyQEmiePKxZxJrj01/fQbMa1+/CxeJgQOx1La9Hhh8pZMa6giTf3Rl62wsINaYVbZbTPRafHt5B11uK9Vbianqiu6QoZOSnMYIBzhShPLEGXA8ELTJXEQKIwrPkIhSNLJFscS0Ocq/70+PsAeE2wy8sBEiwrU3f8Z//rC/kODAZXB9BuFol1SxXGOIXLal0jFMQ6p5dCKfcRaIpb15GgyLBM5EgDCuyhh5Pz2x6uVV4pxAogJRxvQ9UUeI7J32DpdHIpurg7Ius00xJPQqV4p0Nagy6FQgjrNToNGWgcYXJGV9AsKwLFhTHIv/rpp7xjnBHsD2T8Gn1Mu/G6/eMPk3JczbagEUvlTMecGje+h+YeF3CX9WUNpJ0GKVVKCNZoMprGHN5ndgc96tfwtpiDNWbfdIIsF66WnfJqaqEJ6UnYNQ91RMwwmZFjevut3Q485sMwkKsE17QrQJGdUIADn3GvD+WaKfMKqpEkSKSaGYEehwEny8tSYBxMxXMFSmwxehnHNwqpKpNMqs4op/IWnDFFJZbcvSEwcL5JHtzfvjPPHW/f+376A/bIrC7YK2NQ1pyVRYYHGJDcA6AVkPMyV5AeToqii7OYthdxUFpCl6PA1JAN9Wol1ovkCCwmjxb4LeRqhcNPg17kjb2hd3Z24AcbxcZO4TDNqWCkged7v+7eDSeMqSpfKpFnkkqKcmt8oVDSTOjRmFNaIclJKbVJi46Sc3Ysmx1x5Dsiy8zEFJAJfm4oYZkN3svyZbxdj2uEpCQr19+nQ8mP/OsucY7Gd8kP8ZLZwCK3RDOix4XYVcprVI69cLCdKTAbCHATBJ7wV4ORvcgn+Fi3sepq4Zi2JkfuzTwMMFFmvsTI2363GHvQZ8qDO0pMysz7oyhYg60BkEbJmHxzckcqo2F9+rGtFNZ7GNf/+H/8nx9wtpmetqCJqKpzE3xFP43sf3N/Yr6/sIIYTKiwqAoRhtNm5EIU3pEGkyuuNLln53GYNfhz8YyL+sJP4e69J9XP1FSR7yDOHAQcwxl8l+HR4kiHuUVjJjYFkO3Zi+f+42YGPg8uxHtZoBEX3TSoUiwC1xG+NwON50afzoa9trNXfNQoRy48DCslYGCPIAqVEftVfgNLciueLkiAbxSYlhHZA3Pntygw+3+GB8qqimph4QZG+UrLRROWPPUmYlDCMIz/fF/+Jm5h3J09uG8zMlPyKDW+++TJXR7cF47qciz5Y6Hbk3uLH7UPcAoflfHef/uP/9sHfHqlMzWx+ddsVInsqBcf2VtnT2Ot9jbW5OopDXplRcg4gxnXkY44Ei9xk4eOwms7lmnffM3s0aBWikslI7YUJmfr4aPfdcGjmi8gdg4svUePYu5P0jqf/LbggGgjKEl7dCIKaLLniZ+8x3adyudcp0LigSfRrhln9BDe8472xauXTpEbrMvzhXtYGZIfdmoVFNiMIPxeqB9mpbViPf4ifMTZK3NFHsuwuF1CidFRu+d261/k/HYPjVinUQaFefNEuJRS/hVkmX67cdqTfTLN0FitkQd3ZmfuFxBFNs3OOKTO/pl7jjjEallTh5BcVkjtBMIyvIfIvX/3zz9/4LwTFcoSURr1thsZYqunDV4FhR5rwezZHFYoFZolb2x4M32/0hx+pmH0tf/0tS17PjLnpPVOdy4x1cXCeJmzqixLOGTtt5CYUY7Q0hmno94zRmjMDE0BOjfOqTHbxzDEcVT4L8vl8ZrCEkQLGZTSHO33N69Nab/ypS1WAY5ayQ3JL3YisNLE8vQm+Tc75wWXP5hD4iNPJHOk/Jky/D64BJI2/sOc39IZs4fKTHLPMmJqqcSJwnqTui0jNSmoRmUn9Lf7VywZVSkyeXD/y/qtt1Z/8uCOIQhK7L4t5Sent5NvwGm21u5HPyJ5p1ZQa4izUA1D9T/vacVRb+uDYjSQHpELNCpJIXcVdMtCs/ZjJrT7kscGLbgjS1xC9PDBXQoXzwq/EWP/jMPH3307nX1azbaERKUVX96R3yV1CTHjYqmQTn3oShPVT0Q8pcWkhcISYqMdZb93WXIL70JhHeIH6+ft7P3d1y3P7etyeUpNccWvQZUSS8F1gkExYGTzCnN0m9mUZwxjqVpY8ouK4jVYTxNr8d0Apn7mJVSD4Xtgr2SThsGOwDTIXpqMmFpGRIlxmJ6ZbfIdmK4g6RGUHLG6YprKKk3x/E3pj+SBUbHTZ9oZZvDNd0C9sbzuzm0/sAyJiyTz/2e4GBTcN4e2mOyj2Li6hzBLtq7wLG2A1I1XkEQXL6oGCCutx8SstADiY3LP7dOPdqnVHEUVcaScgzdjbolnyx84jT00uq3QLHkDBJlo2O9NQZb5TeY6GRkOI8CP8antkaQZip3hqvCVN0cOkOFr0D20xyUyEJjCI7SY3aHs3fRes58GX2XyCP6yjOIy0sB/3zzrUubGu09XFVFDopIJho5BS6XwwAxQELXSZdoQrNiJwEorEVbimhGPOluOZCro7iSJ75n+xt0uTYd8GSxLicWZA/xTPeUbxmMaccERXj/K3VHZayTXp5RCVCgA0ntYKUOxodT4hvkvh7YpbE5wrQ8EDwrNryFR2GZrLEFS5yg4D09pW3R7PLXyJC75CouOWqhV1sukw8ULCB8TG/PcucJFj/HjWaDyLnhOP/AtsPnMIUaW8HYrrgq9shLgDTCXyUYiezvDWbYQUAXPSUbAZygvX/gZrvrMUaXgRlwmDMqZ8TUC2uOqHtStlanUD2Aj9PjQMZag9h5v3ZUVaEuyERqh2Bx0uj7I+Mtme/tmXX3ajcpwyuJ2gUFxv/z9lZs2s/w76puvz8MsZr13XcgHwHqQbwEXZnFVhOKSRKXED/EyTzB3/YZvPxNldf6nmZPj/oor592gwxXZYtAheUpZJLvea5mUE99rqDtLKQUKjLRkDiADQeRON1i4oQhKbbprSwqOpUmzUXLF5x7d7fuCtu+p+TKkKTT7x7ERV26TgrOXxRfv7VJ8vFtilemxVco8Zzz8yWZaSgcBntv5kB4//m6lTHJWUmWorGuIObIdgEE2m7H4Gx05ZlgL8uTVhAYM57dYZ7H0deYBP/hKOihgPLf7AecVgVgqZzrmrIoVCQwqMM7wPSCbEW8+kZQRMgOmKu81PBTVwVxmkaPnccp6qeHeSqMe3XO7HZFgSXQcZ22ZEGqxIlrU1RJLPrMB3FFx/QnKa8TScJhXsSSyei/kd4V+/vVXuzvri0++Mb+f5TPMU1nwDuJUiy8losTMEw0zCJZDP8Nn4LQfRkcaH1Wd3uS1ZVbFRwx3FBaTsKRwg5WN7EYpJe+XmRIMjHz2Zv2Oh6c4MzviKDdPt9+XRWeFx3I7cXj2tkKBzf8tbRJWeT45MmBPn+BY3px1jaXx8LeqtDzX/ry2TpgfrB8GtfXn8kloylSL76+fT95Mh5AxBomjxwr2PKlDq+SPiv716RM/+8Sexdknwz/xgdUihw/Zq8vyZ2JKzRlX6gzWCSyKy7zPVzqorGgkA5EQH6WpZbvb3OdCBkaAbojgPgTHZ11tuYLwWSURUeXonQOgvBhY8QPF0hCDgq1HmJr8iJ0SQOlbBIp8Zl9Y7n0Tvm1QCb3eRbGPPooMzHzfmgJLy4mmxGyJy10tfcYRgc98uUuCSM4ou/LSDwCIg5W8ILo+JMYrmCPHHbBKyZh0uzJDzRXapNhcyZFGnH8GQBoBT5ni9yzu5cib2slD/LGnq7QASPtcz9x3G3sc8WlW3oQ8wo6EWWJ7YUYA8p4xUmaGqdCs8ecdvs24sBIr5ZlxDQYy/BP9D5bIUiRrxtCgAfKHUqTpnecSy/Cusz2FDp0Zl/vVs060+xQs+KDF0pQ8Qi/uc9Fpbz0jOLdwKN9n4mbdpz221pK14Hm36UvqCK0wpcjXW+nLm2+UvVienpl8m/6Ca24AklSgTz4UHgvifxGeGdzQyYvMWOmPDwr+uZqIVSBmYK7EzG8gHR/7YTi+xTIZL+695akkWe9buEPZG41Esj6P49wJw8clexRZHLZk3FRaVBNezhnxsiRVm6FEgk7oRH24UYN1+j+Zm6Rde1wdmiV/3gEbjdYMslVZtfQM98SDKy5TKParcRoZjCOJKQvjMbVGq0xj5shZMcxhUfTd8pABYCHXhy+JWdz3m6Z9ru++0fGICuCUJHJdvtrFU87EN26PWKqk7Zjxbc10Eu1yqbBSCSv64jZUVAFDDn4uucCTjpHlSzxCqKTAEw+LPlL66i1SEYHSVsD7EkCD0ufhiEkk4Yn/Av+oXmFdYQajeBT50/qqt/ZGoX1qlnMoLykxtgbW8l9U0WfrUYKsGaxiHgQryiKrCBVZdxSN3Cgs2cRtydqA0kpF6LCeWgfpe0LF5X4iUiKPHeQqr5IgpqW4frD9tOVaiUqBMqnx/dX4SzNIs/gzA5DRvZqSnOIZ/okHXu4iyRZmcc2TwXjBmJIzHnNEo/VGcTGz49m8V0xkIDCFFRylSbH5eIQpyq0DuaN44X/zMeJ/2BLR8xcvbSZrhkJmqNEf2JRKSxRUEYrHd+S4B5fKaObFcsZXdnNyzWAjYoyU5nAkE4Fj+gx8PgCJp7Zn7asBNmuOJM9jv3kM8EvVxDdUYxrhdywp+mzMlJgpNZTZcpdWcq9UV2Rgu4OnFGiDhXPtdkMf1wbPrewoujiTfGpXlR1WWnwSdJDPOOxo78eFyx8REGJ/i3qW2I+IeRQXpuq7ZkMVesIH1ZJHRqAs9Sxe2/u89XIz3BMfuG158vQ371jr92SJO70XChm+Jbkaghx1hUNPXDHFMz1zgVg3BTlF99BE6a8OBc/EloBwQl7hJXdHKPBPkL3WVzbTYebfsghtyyVuAtKMFXG6BbcUoj5e/v7a76KCJ5nKl5iWEkUoshILFWBXRbEge237yF/aDPHsoO0qno7giW2sKizTYnXSr6DImIn5+z0e3G1J8YF5n5ju1MLoo/obOsLg3jIt5gs8kqlIHoyOf9eDCC8F26qCHUoLvtg+u5f8tlnjc9V9HOlWK1Jf0g6xhEezoV3GGQ16wlmygdLSlSYtmLJMK56Vn/hggzG5ezKrRfMunj9ZCctKhcrUvEw7hiwo4k1Lv1BHR2nBhS8XmrLkq2A2Gb+FyOUZGhHPVD1zEqPn53bMAOumb2zWVfPZ16cdKmLGqoBK9mAEu7xZvkShsqT+yGZe3Jt1f7J8WqAaIUiJrED2kVepoXdJikI9C8QhpHcIJHlUjfENW8qPLALj+2M24HNFxps9MnvwDxivIUGZjeyneuEzf2BUzG/gqcm0USRkQ+TjeSSLRI9vuFT+TqVF0SRo8pb9OnWQtlbMI6Qe0Z8D9QIeMczyC1da7FrGa9Cs8me0mDFg0YISbsFInN47KyseLDHtPT2xTtUuI1wZMaiUCiwUlLOkbIdkKv69+fOrLq1GMhCY4grupUlxfQst68KjuKvSRv4nAIwNMI/nvqPWkmFbrgpCx6sS5EuCKkfVREbx1AsDL2Yzj2z2xRUWwlYtFFk5R76KvkyUVCJFPkqX/9HzCoMTP6tTIvhI4pF/VWGUTXWud862SuSpyJwMPVha5FoS4umCyPvMymx25s5urU0vn5lF5nO25phASIjyzwDDgbr8w8VvCFDy1d4HlJa4/OBWSSiUuIRXrcCD9SKGZQ4/rLg69Gr8Ac5+HQca68t4knn7XcNPKX4EzLi4f6ituIBMzAsPMYXJHXm0dNdSIo5DdQRyC++lUfJBR4fyZ48rOV/OIc7in7GJ7zkhBUhmrw1F4WfYbHBQjorrPDQQFviPKC5Q0O7MfjlA/9BG7sy8ut7PYScyOsreit+xhEiqVYLvibvXsIbdfcdbC+lF6fAfq0jyKC3GBau0Ogsquc4lh2VVlBmz/MyDu22ZYPDhHtxZXsRPoBmCnJqdbTC8kb0WoJqCVMJUBbjVRLWNWiHGxeW9f//z3zF22/kIpUzin6/M1Fc4lyLDtGYmrQQ/fDqkYc8ZDXorviZuZImHUmGP5MyT0RAflsiJ859/+dWW0T795Ce7YTl/orQqlCAyfHmhZoyRPh1N9RByRC/kU5qiTcSdjLTnma78eGzGOnTO5XMG/4wr8j8npgBKAuXlZt7WjtpbomubDypmZTrIHE4cb8FlSFcRSnN5KLdfU090/pjwl4p1VVAJ58gLS/UtCauZU6LPPGzG4d74p7Q/bKAC/x/DnphkUDURJxzfsK00wvmjkqSqVA7Ri3n9BGXG7IwrcHS/VnJyy1UkyQAEpeZOcItD0lUaEq6auXC7AdYorRqJ8jdAbzFZLRDfkHduUVpEjgvMkoJtyj977iNsmSKnDiJURAhCb/SJfJ1VXKoAaEe84oUPD8e0zIQuP8M1EWeP69cntlTIjMRGrssjjvKKUuoCNx5CHiwYGfFVr4KB1MRXxHqGJnhQGDjdpQ79rFpAfha3o8qrKGBfgijt569sv8scitKey3e5wOShHlJVkt55yT0xMLyxzv53G4AxO6WOUKyr/UC1TYm8x2YJuyN+pF186d6OIeBW7MvP8zOcO0hfAqqW0RukvXCb6PUVLIXG2/+j3Ajbm/3g5ODWnNreM5+AkxEIhiAsyd63Je+tgY3k5H38uV7u47ykkpKLWBb+9383pWX8HhN4EZTNTC0h4PA06cREfP67gM9JWwExK/6YbeGh4YfvB+7JatATrhptn6HYGatDB5wnhCv84sMzkhWmu5Qya6V8KU0lVWDhUDlLylgITLIsfPzt2iUXbR+/COgoaYxCHYofJ0vHLKOw5Bq9nByVZUVpXU0rEDpWPFl8ev+eeYr4umqssUjcQiiOW/krst0EYaNuGIjx/7PPH37y6PMv03mvkowKlOldKscyRWpPaWaOsWNlwMLMYp/7rT0U+7BRBqqMuN6UVFhv0tKjFN6380CJ5UY5uuWbSB7czQ8g+2h/2U3IthZ23y+NlAf3tPRInbtis7qWtWOUfVyC25d7hLfYbuKQcvektDwygmkFszSwOvyud+wFfIWplxAbgx8F68ksFcb0avkKvVgZtTKyWhzeQ6shsbSZt8jDlMhHGmdBKbnkbCk442rQ2kqWZ3D2H1dnqyAzkcbQzfqghfctxBv5cgGlfSbInJUlI7lUUZYcI4CgGFg2fPjQPJWYFSd+7PJnAJEqKS+4OzZV9VwPUGbpEBP09+/e+8yLGdhq9gWlETZ3c3RtmzCDZLBQziDpH25yKVH1GsXXt6ZqE0xMVziWS2GVWufcZkqaoZky00zN3ig2+2v9oA2CCU8Dh6TE0qwNx7YoM5YicWgrJQdMHGQssiCvamhJvcuQ2kYtQTwpLbiaUgU0zqjQpRKMFJ5uOXTNi2ySUjWKN4r7dfdW+XTCm0+FnnC1ytLZMkI/c4ZrRUN8TBmcd8MAhA8Ks/6UzF8Brrlb4VyDNFP80LYZS/jZJrNm86dNyrPP0BMj/OiY7fHWrOsKvCP8iwfeiMpMHZ+acpy8VgwbFXLRj1ryQ01heKRj59vjP5v4j0x5uZPeCLTFIogOPpApeTqIalXs77YsTsf7r3/6aZV3VUKsJnCqqpQu2fSu01Wpeu6tp6pRICxBCibgGAto+l/322dhBvYoMyk4S3IY9tYZmKK4UGxJiRG3sCk4KTcGsHu9txdsXRaV2N5uPtMC9dROytxPbUJgBemcWP5is/krd+i65M14K0lzXiUAXxQRf4ShwWb/2hqvgqBCr8RZlvIOzkbAOL/V9LuEGYmLZ9XxLIQV5gNDAfMsJvdzCSA8T39ijtL2vGkbzfAWRWkYiso9S6fGU5x10WaX0Mirp0Z2lcYP+ZUdBH5th5PZ62JlIFdeLaRw3MpbkekmSPZY7bEA6Zwf5AjD2z/szBeGG+bB3Wcq17AQyc1h8TUnXBzg+4u/JTpZztoxs7xqX6xsJcXLN6Jty3uDlX2kbjcY3sieKSIVAwj/j2Kzu7a4ySDFTalZnis/+95RcKQTkMJzhWa1J6VHHA/t8uRugSlMHSvMO8U933hAYfJQrnwrDQj4BcLfs9KiBCnTk1AotvWOKBMsH+ff7aoEOidG9it8gdYW9jJfuGblOHkgKOGyeIee8GXwU4TZFleGo7jqU+paqSVthVt8eEaK8FHovi/qihFPegS84CO0wplnb8bAWt3nqpM7TS8yRJux18WMglnXFxULwwg/FG7w3S+bfowMTPhPp4nySh1qD6FqvwfTpxxzhS2mlWE6ds2++JGjaLFyzRVtWep4fISn49jzktQiyhkZ45UqfB90lN3jATmqLBZlgAbx8p0VqEauaeMq6jOJUbgCj+RUcgdUIJV3X25yNZub356WZnCk+X+rcfo2wgSydGuROT7lw4jSaDAvN/c+Zv2LIjRUy/IgJXjgyJ79wk4FU3H/y4fILOJLGyXGw4oBZKaXpXUiahTxBw1mXBg0yEKsWnzNnoMJD9kKl+W5bgQLyaOKC3wr3OJnyqCB6MzZD8CjReqQVErACU+P15L3Xlz7XH6eq7T+MtJ77t7q0anlsW+IvMwcaLs4+q7Bb6YtVbQJWgLQOfqs2va9UF4MHDiW0H7ULkCcIGylhWmzTScyf9i1N2/e/OFK7KF5Nf/SlBfLh0cGVG35Fr56MDeZh9J6/sp8TLJ0HrYAGPSguFVvWzwAp7pVSyktlm3jU6kIfYdhMd9meLhuxqS4e/nFgRTavf/5//1/Pqw8J0xQnXrpyCsSCQSlwh5XWios7rDKQTs486ySL/ZqONg65O6pQbPEmVO0mYl1sFj5YJxxpINY4YePOdEiE19yxYSlX7K4WzM8FyuZPBBHSSKblEe6hM0QFWSvpCk2IfHKZrIoTwY11Rm5gEffBd8jxSQbHWI6VvHKjVWYea0NB4CGiN4jFNowwiIe2pCWI7JT8A+Ul81S/vjjT7M6/MyX12re5rs4O5m7eOvgOZMVRHY0LJcyiGSglayU+9hVrxFPLRzTcozk8Kg2UuxO/4oVCddgZhCsUVpyN7LvIFni3vuv//EfP1TvljKeBbSPv7Wws+KiY7JZV/aswbPsWqTGl58Zsc4XU/juskmHXg2v6FOMJTVG5UNWiyoY3hl+EMYEpsjTo72f3NIP4AVGsYhC5fe+2ePRkt1j8yG47qhzVvfi34JnMMComnV03DBF8/itsln+Uj1Zcj+SGiLWo+95YbBhyhRrQ7xYrCwuHalaoU9hK7fEEnlZlZWMArI4/LLE9rtZ7OE3D15ZdTijwMSTyKz4uMME5OV3GH/nz23wgxf3r6e2Ev+w2QuTn74AQq1Hld7Kv+V0NYrYUrxgo5FcQI1ERWgE9mZhkOne//Jf/ssHlvAY5eIfbX6MTwBgd7/wayGZ7kOnpSBnujsCJV++uW4djV93P23sVdGt2RuSlWJ+DYj9aBajiSqFamLJrwNlFWyRiTdZ+lFfrXNvVXxVymOJ8lvIhYGrwcWE4mqa4gy8UtYyjji8ZDjVoXCPvkvZQPPaDDZYOsRsmHpZK69Y6hjhiKHLq9CXBZRuhZktUo9vbB/WFdgFM7CSXJfHO8pEkXFWlH2POOhBmTEYYiaPkqOqkEdVVgvn8pYl7kjAGtmc0RqEpw2CNcqrphrZd5Dse1o+E7J9IZQWymt+Jn73Ca1GBksuMIqLpULfgLeR4PzkYHPySKDkza+7t4+XGVeZl+Gr0AQ+cp/BTxHy19Z+Nch2mvMV6UdG7cenx/frrL7YZ+Fs0cLdAhOLqtyZN230zC56xBiEJcpP7T4wHva3bvqB0nuTnyVDZjksz+1eMjzEZ8vFExLbBrL9ZSajSx8fmRVfujdLtX+IKMizB2xgEtYsM0ZKoAZ5FBgrECgwOvR5Bmb7YKNL3Ju8RL4+wjCzeNxNoci0goBM9BNYsPF9yQu/qlXvtTiNil4D3l7KwEdzrg0lswjdnmgtSrMhBh/4U1Ncn9umLm5Z/Jn43S+0ml0CL+T58TBbWRlOrEGXQo2QqjHyB5pn06WI381nnxoIKjRrOMvSFEP5sh/0r//2t+1OpkAQ+fVeivyYGBQX7cKt0fc/5XbibwxMHC5IY9El9XgI+bglmA5v9iE41ZWoX00TbiNOlCc8oLjZv+ga2ZSiVtq1BCnjkgu1keo4QiSE/P3D6uTVm9c2i0mHgB9x9cik2GOJI2HJDx3xo7QMX5RPADEtA04RLSHSpny3dOK+hGgKbGtG2+WlQutjS4r8q27f2D74n/aNPbLBM97aBePePMzQg5lZrtg3KvguhRbzvItHWSRXsgvoVvTjkn1WWrDriss6Yz/7ZB2FCznxe6XA3DWE4npsnXDmVPVA3dT4Ao27SbIfZu7fr2iUBr0azqKk6xqfcRkwF2KOlIk4MnjxMSdagtKsEEHqi46H2U/sJOciEflFYTq4Z8/tDI3NLNyHoDFyk/TEdqThVoamvJjxuScLa9OhJ9TfELwD1RRWLL0gRakyG2QpDus9zlF9Zq52rnii/E18sAKg3gAu7BFrPnxHHOOgfTHi4BAzszD+t27yHeKpSfHjyIjVpWqLVUY+39sf1rZf2epGVOZPJh+eye1aLHXHsg02TJT9OMcfh9yZ0kIYPmhmEaz/fmumpnOdGL9zeJfUdUG9MzLDhsxVUh10iFrJG3L8+vSJdyZspDefCs3RBqaoKxObDe21Ksz4FQ8x0fiPDzGdKfre2uUzGyHHXioWjeXOhjlwiAHKW/Na7bOuh8lz+03Rg98SN7KjIHDDRMeKAo0dSlXGvPqqIOtEFVrPtWJdx3J8Z6/Nczv83Tf/higv92ARgXaGkR9OynpYoSmBxP4KsJ1AEY5zoLz4TWLg4ArM9sI+D8uI4qUk2cb8ceZEOeBQcXGrKiQ9yvqH1dE7d7H1xVQmQXBpJk5tf7SBqx7KUY+b36gKXPEuGQ44Y1aUKYAMBFUzA6A3DLJSWtDjh0hnzPR4XmIznhF+/9MWlh86LnXYf5obuA3eJV3jzfeEDp7hquGrMQC7WN7tNYePH9KMF2ROWAF7EwzPG+tcWML45msznHHHxClzlN+Aaiw40fdZ1+S5QDcw3xhN46yGm+9S56lQDuxH5Es4FZGK+qtArJJqtBNQGxk5dPwsHeI/0D082Gg9WritCHUSxAN4Fa6ClwBtFqvFy0R+Mz7bsJkYy4jMwjjIzHIi/7u8lMg+sji8q3oU1lusSr6yWpW/vBMm6gt3SSh6PeT8/MsvHo0uq/h+meHi1Z26vPQR4w2kknMDrFE6JqsGY9rthqtKCxZgjeUvtqG/N28Q2ojfLzSYVGVgzh9Gz+wTrLy2H6ybkj9+eL4UaftbzQ+lQUtclzhzCVKMjV15zpgVcA2wSMtwRz5U4TFtKvvWOkX2uZAnLVcsSDN8S/L5kPHx3nyWJQWdPLdzvT3s3RTNFl46Cv9ubGagK+2byqtSfyOVUactaVtIU6m0dJhuI8B7O+6Jjsy+wCaKTZ7FSsmw0psFtzNAwW8TJcbviM75C5uBca6TTvqoQt6mfLMQqirVrd5QVbX1676EqvOLkorfJXGMnDgk+0OYmbEtgyurB+bE+ZtgCAcVYCOOOqWQKuFCUgz25YqQtbBqSvLXYG4+ram0IA1r7A3xyBpPfakn7vpTF5SFGDpgzFIzM/I6eJdiq7340bHE1T183KDXwlljhIPBeOve46twhT/y4ZVtEPbh5s89nw0/s3V2c5wy7XONewnIcQ3GAgvs42AkgaeTy3wIFmxQL5Bc1U+AQzmgvOhQmXU1LQ0D76H4ZrBNu4dwKcWAzy9+tPpKS0vp4sc9nf2CbZPdNUCPzTX0ZgqdKwOzt3++dUUm83IONqPI9gzWNondIAB1Gr8theMb8oJTmHf+XFPBYME6lZ85DpL1MDj7xbY4uDjyb7YapYd24ED+Q1uWjP4axU3rtE8pD/DHvi+VFEVxdjvvrtKCBSryl19/8WUCVyoW3y/otnDso2HFgzm8P9tFElzxt8Uby1vMErI9tKKsf8lFmhq6hbcAT/tO9kH9YJ4zRjunGTcy1wiulBZUzXeX/U37XK/c9ZOWb4QGqEufgPi93fVDfTL6ZrbHrOsmnlp1lHRkacgbM3mWDuc6BRi+Dz2pYL7DpUqoIY3c5vnwhrLn/wMz2Ji9t2/wFTE2QUUqCq20ZqHjGSKDTAwYtCfG75cZ2EOT72NXYqpXakHh+FbtUI21dOWn9w1WthEQD6LJjI0BMsop+mukLX61gSwGQT/a6pgelB9bMbo1QOnM4vj90m7jszlxc7Myi8fae1NpUQj2WCpkZOV7XBO/NOb+py4sFcisTgdLHW8dtEuyx5NmCE3F1aHXw1syJKMBPFpk1pElYIhn+CMfzLaIAxDT54R7Pkpjn8vPNZUddqBxSTDwwI8GP3jPbNaF0hoykDjIRFY/DRz8aF+8fml7SnaY9KtH01mqABx4D6ndYJtutVEmXGosvRcSlGJUzUFuzOb53pPp+bInIuhYus3HBB1li8AxXYgveEcSoIMMx1mkxP602Rg+AhlIYZHIm06zLHcBK4dQwIeqJvKkNCFVHukKK295l6WWnNsO2X2RqyVFZmb0ffTfOA1ADjj240fWb+BnMy5X0ob8pj+z9ponEQbvys/wpBkehmAJE/gZwDDT1lk4y3Qa9OvQbdcdkPueIaUFSoTk7icOnX5nZtcwsZ+RfuNiqfbEpsN0vmxk+9MvkmAqf1u8oVCYnaC4qjOhCj1wKbmFt2RBM7vVebQSMMRn3FVilqj0uYw4u2cflB0j4DwX7WP7dzowOYNeEYC+mAy88GGyTMcPozrTOUlbJEfRsBz88vUrs+D6YEuGLMlNM6/A8xiuReA6Dy2EglY+cYUXynQC+A5E8VOHfPMosPjDBzpiU3jB0gmJ/TXpTqHxLEnV4omODNdKKDA6QizqPjMnv8zCkPGoB/dxDvuQ4jtWj9JUUnlKV5UqP7UruYJccj6KkBgvmIkclyBIgkLjYbChB+XERaXMypLHnCRzGiy+/uSBKa2o5PgdPrU+iUFLtK4kHV+x4MY5uB7w4MGEb+M7sxDWw3f0wty8sef3remGYaUFAlj0ZTxj7lvzUdfzgy2C9fe6gaWL+cihkV13vwavow2pZUOErHSX0mtbwotWixGgQq+HLxaNYRoBIxDtt8S8WnhFQ3wowzq29TNnevuw14Ty+OE7m+VN5unrMidTxAakLTy93IKSDWWeXWeqvET/j6TsQ+W5eEJ4aTMvZjS0AcuGvgwi/nPwZizJ1zrD1UMmrnswiSzfCgMd2o7lGpQXSkz7RMLUZJKMSCYWiOldBPsyI4mRknR6LCVyTpO2eW8DLWZfD23PhiXFh9Yp3fZsDBmoHsmicKyyEqYuayxRh7jVVAk0QHQHaAVbrcYqYCGJEgxgePR9E2bZE2XJDD0O3EjHrR0zNpafdyktIfZzXK4N8dBw9Fk3MoqLzWuftlpnny3jrcGHCLf4c9PpltFEgxa4yGrhrDHEaJpLFznz4gd0a0BT2gpv5EMWMDFtxqWSKVMjGTpqTvYrdwa/IhArouAJ44MXL195p7sl8x5WjsqBQqC9eePBglHi+Bp+4rBOuxB8JUwstQWbCgPFDxTlhRJ7+NmD2fqQ2TP5EWtGspc5Rj5DNxJp8jJQ2GWdlBiDVZQZlwwyMs8UmSnxm3rEv6pO70hPaXrHvDwMxEf4SMgGaxvZjVIkq0ZuV+7dSgtW0XzsPzG958zOfqHbQkpxvbEfLUtO82yoXQSWqs8WX11rvwY9cJK1hTsyRH0x42KkkN0WHIFCOMMtPmKi4Vs/Akh5jGqxmITb5EXj+Lx4RaskD2lLEwfAQ59ZH4oCC8N5uXeFbDxB+CGv8HjpdJU9yovlOJ3ziiO9Pq7WTEulykpRujht5Qtu/aaEe2+33wL1+LktrfmZKRsAsRTTfUTuOPku+pgJCciJVMzbG9Zo+09XYkmRgYOZGMtD7Kc8sJnZ1TOyKIOqDrq19JgGTHpUA7G08u7oXWc0YwYQHnGfYkf+3p7ch5QWIklx+QyCdcbdcraFTEuFaZ+E0eZ8hqtdpEu9xxudGLcT//TDD/keV4dWD1+LEdChuJgWM4PsjfQz/JEPz7CEmDYTjKUSAH9f2d7Oa1sKza85mQudC4gPSFtYHJCsMLMGrh1BYWPpNGqY0mNMuHswvTwU6qtX6eoRlCkKLC5HtMu2FJcqolYyctuDq5Vd0vi9ueslU7gssTEbQYGxjLhSvJHMNeQXRiqhSKKSfTqJ9mL1BV+B70yZcXyAGRmm4BgLoMAemDJjebH3uxplRPLE77gVruOMDVCHuPVUCdUgvJHdKKXksnaUfjPvw0oLdviYnjx5YvsFFTPjIX7bjUslkpvMqrl8cfLa3i5SpSg8vUZh0/53c8VTNc6o0OvhqjIRElGQLP2wAdnrKDMakYc5wxJjutMgk0S9E2EUB9aFrAezXHfFD9sxR/qB5MxiIu8cacmQzVd4qBrBTPBbrxL/FnwrH7N9NpbxyoIZ+ldmsLF1B5XEXPMQK6OkGKF7cGW5dpxDv9yfxRvepcDmeo1krie/YkwkIKvwCujCBM3IWH7HGw1uxnhjKIYC06wM7xMo+C2eYr5kUBWS1wqvRSpLryFuNUXMRwE3GNgBGjCphkLSDQXv/bu//x0rycMPH82TJ+m6+y9t1Lf/qQurZULwubm9LYf4tdt18C7ZEfl8j8ssC1eKq0FvBGeLKZQWS2d03q1lsxV++CDR3xNTVd5UcskkhSs/GAAwYsXCBwV2ybOQWfibEIsT0aGj0XEAGaccVaAlbtHY/Tb+EYFlOL4BLA6Zec1GGxWEbdqxMsqClCJf7zJ/LK7S4gGM2gNjL1NnpRgcYIhjE9yFrEj02BTMgbd4OlD0kiKIheLCkhavMRh6MCsjjvJyZeZLi/c9jjKL319ZVbG1JFstbc38DVXwmtD+FAlSlCxlL7IHo7cjtystOGrIMsQsP5rfnpnzW2YPA6OaNdK2sPClpcgvbCkHw4J52LNG1EwZkU8damYAIowVFkdwqnj5Zo8Cs0+UFmbiNVyrNPHgGRZRPEMeS+UA5LDcyqyLZaXLZl05GecmcpGxZxHtd9HJcg3ObJJeAm7EezQ2ii7ZBe/wxHfAu7d02KZdIFwoWUilejBZgW4kYiMMVn6LfFu0M0vRn5viwmOFO7/VFSrXkG/yJr6aALecgbgoMw7Samb27i8Lm+EHy9Y4vMXwA4XPTBXrNZYcdWykrK4oH3kxno8QypK3LHgkpw8kZzZCuBxreTKQgcjNy3yJ0kISNrcZybP/9PCQtc9aWM22qGdfijTjDzddDo5iB2oxA+m0mcNpFrRy+bRm73QjI9NsLGG+yOKoD2YyXiN9Moj7O2ZQikcl13nkMAigrejc5vuyvNyJPwWpyGILK/Q5f8EZJW4FRpHueSTlnjIr2Lke8xzaBuXFf4wAuClgOVeUCrXpF5Uxo1aJBtEZbjtQYqqVoING+bKEiGEDHTFKjKVEZKoPemqY9qWJt32l7gaadk6zs+T4llnZX7ZszHIjZx4/RaHZLO1TV2gWZ7nR6hHFxtOX9Xw7X14rMCy2Ksg3sislakmt778Guz9tVloU7TfANvLX0+b2j2bUUHbA26WBWAubjDJSni9FmuLyZTVzQnrkGZGRUSqd+sqjxZq903UGSpYKoVnb56ryKz6avgmpGZUUcKotpRLTrIsZBXUa8xL0zr+QEhILE4xJLWzwwV4fd2bVr7RvlVzItSEGc/JqmguRzH4cyos9MJYNqS9G5BJ1Bs4CDYQOo5I9mAzZKjJat2oAGxe4AQd1jSLjQYHpsO/KmGNFcSxBko1Bf7xQyPHOFNp7lhuZlVnb/8Vyo6X9xdIjpvkYfth1NPfv2XKjeZWgDlmGZMbG/1QXx9v4RmpnoIEGQAZYuzm5M6UFJ2cZfv7ipe+b/Ggzrv242oIKF6ejOSd204qLH3bVyW6DRfE30JpVEM3wXC7rFMtnxh/pe6IlxLS54FxiSlmAYg6zLuRkQMBeVzwBP6MaDSwkshKRXpYRIhTlmAPKi72Hr6eZTQBpBkfwNwsro8G7snnz7aG8aCt5b8dhaZ1+C2GEbsFEqmNhsIItYs9KitQEgCxcpYIlIh4rmIWlfTDbC7P9zmODzoVik48F5KMOxfpUveoN4+wRs9z4l/1ntsZ/wig4ZmrEqcNPJ2WmZUeUG8YizNRQbGfr+XAldhooyn4Yf71TOo4ulLxcadGwz36zM0n2nu/iCgS3g/p1rSFVz74fZObj7iLJljr2PsKzVc736qxDzxRJg71RnD2aLldjn2uFX3zMGZagtCoRABOAQnNRy9Gs6/ReFyQiAYtHOlXWQiLFmdm8tFk7P3T2+7YU6R78gVQ9mKqonjelikeUl9+dZTc7c7cZ/K6fFkJx3cpfY2qlCFMrf04XqVjA0kj2vTBbQuQbxFhHS4maicUiM75OQPDgVrgD/tFmiXfJwZuH9DJN6bzJY08RY5D3psjev/9gcRQc5voWRrGZkgOOGdo9n6XZrM1maimMYjOlZwrOlRswpgTFDzQOP5H5BhLRkYwNsIFkMFz7rJSW0Itpxfe8YROLQjqb7nX3K6SqorqgkScpru/MndRRS7iIb8XKlMCIlPNVXDnP0pU/dfY8awTnhLr6YoT2jKtajAaurNQRrvCKhznDEpSWYRZAnqnUCMqPSUuVGEjESyYj3K5wTnb4R0cxZjUcMOc7Qnm1jgggC/A1mc7wOlKW/RCc37KnK+/t6cbfXunIaVFBvWKNPMlPdsS8AhepCKS0AEySDDpYcWCfhz2wzx7aZZA2Iyut7kLRLBjJZBn/giKqW8lC3ZThmLYWTbm81w+pKC9XYMzemLG5UpOCM+Vn+ShAYH32Nik57Go0a0OhMXtzRcceHApuSmsqu1K4iT0li1vJq/jYuy/3GI461L1/+/PPH8op6jEmcwJU/JNf7QwX5sNY/A0/9caNxcWfZkK+92Tr83seNYxw9cryIbEkyY/VL11ssDiCq0dHeaDn7BAm2KXD3YxG5MMzLCGmCeH8MyMhB8jwTfAMCPAhyA+CWWZLWczoy4BICPkUV7QE78UpSj3wH+WFIU5t5nUEd5WueK9m9hNn7xW23MZAir2vdO6rhTRy3YLp01RuxKS06juSiYVielGQ3zK/NV9StOVEFDVeKWiHpMzqd2lF9AXKf3FRZFEVKSz5SI9piudCKlVY8tyRGCVRXvqPAZMruKDoOHRtpzb8fkLPn5Sd6S/jMSk2zkGYXjPfsWn25kYlpNl/V3D+XuCRbUkPMCNMO8xxmWsk7v03//RPH2oeGtQgtUKjaZyRwN0TeyX7LMPaQpZ8+d6Tmds/fmw3E9vG6J6nxNUry8eRZkDmFglLv0wRLCXBCfd7cC+l85CWC+kAXVnW8IqYv+0P79UjbtaZyimLAKmZDsYHLbP8spzH12QysBbNDKiIUP/wg/Kio2zteR3BXZBq1OEKKiQgMF1CehjksNyKEuM3wG2/KLCask1fSip/gHDgIQXhQdhWmSSobcSs0lSwWihPBIVmYvLiTseHfCwn1hzfRnI5tn85Mcmg+o1VGdMEt0gWc5fU2wzx+5ESQ+nxoODgjKVKv9IEBTfBOaxdMUsGZX3pJ+RRjgdZpdBQhp4W3imIJ5n06Fcyl5nS/TWVi0kKA6/n3r/5j//xAyMoTNWX5JRdxlWo+1b7TEDccvrUlte+33G31IJfVbOkKBR5o4N4/rxi7SfgxjviaIBkyXCjA7rfm+KqWVztxZkRqESSssRQ4p37ENSsJ6NT1Ll/YBkuoAWU12mGJyuTInTALrN9I7sPJYvkhDdeDVYhNZQESikvNrUxRY8Doi15hogAlFfTYLEkcOSBdsNzBUYmdAQoL1kfLkjVPkvK0VCkvYkjts8heRMFijL70n4YbzrGh1xDMvkLdEVW3fPb5PKjAlBL6Q1zsc5VjTEtF0AQeeqdxMQkLCncYKSWTbGo5AjzxDcO0FOi51gM5TklKWBRlUk5+d85b2LC97SwHuMcQm00XWM2R7kRMwaZDT03GihG7dFslJqyJ+kKYLQ1wkfeGPk9MQMQlgpjJ1YUrUYjnipAkai7o3BEKyVSgGS8lXlH4pr10EbpLpsJS1lF0gxVIpI0L6TUapEp0We0dgyA9mPWN9SOkQxELD69TtcPqFEEr35/7T8CDp1z+Fyy6N2TqZkX+W4C1TPadG2JzTpzBlgYcGAhyd7XF2Z9yCV8S69xgnhgqVvPkGgBXEPe92ZckZkye8uSoh3kBTW36j60pXzOcrLcXhv4BTE+mqDatVZ1scoEV2c8lq5D3Elqn+n5U4G3DdAO+7GWOmADWa60QMcFj6xT0yGVz3FGJ0xGgE73tfn4++H7H3Z+qG1hS74w4XUz9Z2zOvBApcRX1kOMy0S9ZQiyB1fE2wu7UQiXqtnolXbSiX0vkwkwRcJIJuGNXK3rNebW+KDEKzOMYInuy2nJsNwPXZUryDDLh60tWis8nQQUAcqLc1Tf1G4s7pTdzCr434Q3gLZsCRl/GWSlJcQ/3DqMvS8/9GvK7MzTpl3BCiMU0BuQxCKhyx+MDWZFhhd3W4VhWZHlXvcVaIoMq8WhAdHl3G0jjFWlaoppYFBVlu8cu0rnqXcWkxAwQLjyCKSRXSlRS4q1UssfS5utB1mGemr7T/x4GM2XzzlmDZvxywyFH2ttKbKkl+L9xq3xpD2u7BLJOvIstYYrA6hEkAVXTCxRYSBQe47greFRGjXCch1y4s0is5xUdTlRiyiuwv4WR3kmqaQoNytSRFgypC3pdPlW2PPqlouILSxaoO2WK+huRWkPrptBuTMbZeZ1zDvLRCmvoi3yc35dJlVCjpQYZ6UYcP1uFoh04uyB0a71PbCZzFCgzstUVKyUQEofojAOVJKhJG3FEiq+AvHgzp1arKKgvHCtJCU2arE4zs0xSGSgekpZlKb3NvYbquRtwnWIlmAV6FL2CkglSTUT3xWwgaRZaQFLZ4TX9q8rjlwPMSr+QD61EcuErHc/tus59uGcEICreEo8f1oHgDJhNrJnqbDEU5CpRqkzvxTTzHG+tRlenHkcwVclUknUct0X1rlh4bcyDBHx1WwLZMoU4lS3ZapyW286HEzkqQPuzOrWtZoPIlN4L70WH2U6B6V/Z2Zv/+n8UaqZci8LbMXF+xbcKn/PVSbpgkcUL22LEQcPdcp/Ou099bUHttkLr+S5LqHHHwNozoq5QmN50WdodnbMldgyG7uJe7WOSog8fCZ6C09dTkECdfjjEonr3mK+zrTTGQAZ4OeczJnSghofCp1wbabSkWWAUQMxXmEXr+2cunfnt0MlKaXqWheo8cUpf85XZQeD10WzlBqeDKARgbtnZsEoY4lyeeMo3ga5OZkfN0qDjq5pJFFVWqAQV3C/PEpdUrZDzLjwZHHfDo588/U3zX2++VcNyonsEXrbHCUINnC5egQFxrJkcsG0MSsskefVU+Y24225QEjuNmL2wFBg/GdpDcU7O78N1lQtJkSlzctUMrKiQi2kF6Rv8lOhAYssLcZZGcvBDFDYF9vy4F5BeSpJMtRas8xrE4oV34a6tZzIOEQVLxhoJBdQrWitxlqw9fSV0gKMHwsdfs3b+TmGDbnxrKVIFNf+w8e5IDWjDEGw1IAC1hKW0rfeR2X080TmySEqfHCpmbboHs2nU2PJkE7tG7tJ2md7kXBXcYk73uk5Ij+lZSzCzIDl0lJ5zxVRkDxCT7xuvVUNOI199ea1GQS8d+WFAhs2AliqZotcNb8uXwtpCZ3g6JyTAuMSyLf/f3XntmS3bazhrbItW7J3YqVSlfd/j7xAKne5yQOkcrOdnViWZEvyYdJfgz/ZOBLk4hpJrJoh0OgjyMUmgGbDXwzYesRHYTaV1jrESd3dwllhPaSemivhuYJ0O0e9UaEezgynTpJbMpQwMiMTBc+GMoO78gLGGZGN27GSbCi7TnV1HXiC5RKEkUM/eE2GdRRRc9umDlETfM7+ptOCP4EGr+0t/g+W/Db+uKVwU4dZoOnKWzDfcLGGxtTS3DE2sqUb38nguJ4/f+ZrT3Nyui8Zu+S+zmWjLh7aWudCr9sv8Fg0/Ynj4oHmmdv1sfUwqS481Wt53wo6llq38kKC8+bjaII16IP1/pGIhbn3i8HOyqqltyGRPzMJOFfub9aMfOrQ7sGI0+Qi3ZuNfWCbL8zU0mKsNvjW7UC4zxjh4sg4fBTmI7HaFriJS+TshPEfSCWCCCPeBeVSzAUsKxZMW6fRWco4wSgtjc7SZpE4tM9tWv8zc/rMEqQ9tyinDO4Vwwag7NvYhSrr3CBfQHfq5L7AuZadi7TTPCdjvTMn0Q2t67RgwWI7b6gvLFQ9vpncrOxyjVjbIvjjq5giaUr3+iJ3R1yGylvqf15+b2+lls180kGettHk+TqXyeMHofyLp/lN9UdCQgYPMvbL4lsg0k6R1mU9shFXgDdunNi60h8o0Ac4L6bmyIiC81rvIS6fBIRLKdABMVOoLb44VxwXeQ7L7O1dpkHXLk7VICLu0HgIHmFlGYp9PByxj8IsoIO1ID7DeGrh9KRc8uS3Jdsj9X3xR7hluHl/ZE13rWASz57kxFIG95Qj0PIB2ksuH90SzShHpqS3n9maGg5NGdx1dWQHfAXDgAinziFYqun/HTtZIo6e24pWXGTvJHqgP2/z0Gkhgbd3EjgyxSbFdA4anCua3tw8//7Pv+2NdxuZ7DMbG1zpZ+g8RJny5KaTIxnJgQdSKl4jIrUZIbQpezof5f5uXec5xU98J87w54GsCMPf2XQheRNdI5SqDmnUbDxnf5BBv3ukoTmIr+0eYmRTBo2gAdKlSSC/tNjjH0dfXzz9/H+ef5kiDyt8KdnuqoGuvYAMSEbMpMEIJxcLpoI5GHXzYPZMFTbyTudjAR3OfV58rsxETRZOoD4aCr8fRmg8m7h//Y9RmpXzDO5sHkm+Pxut2XMF50b0p+/DZeH7fJJC10Uby/pm1B07eRMyX0LpvrKrTQOUSVniMG//rtOCFYETXAzWanTECyHY4fOiJ/PRfCdG6PhcnsK+gUkv9XjQyEigemmOi5uvlboqYHvxJhsXFZmKIljiG0tAi3038SwVLOolbx5ejLpYW/pfi6RMH7EaUdV9oswbBC3EnKoy2vWRu+mkTwRiLIG+ib5SZlR0hi/WM/JiBMa0MqNVnGxzbS4ynyzXOiARaN7vObtINcLLqVTjAfzu/Tv/JgonxoMY50VAB5Q9akIAABUISURBVGtiXduiWDE7Ll6Uw3NL1JDgAzfSDT5Sw7HZqIyROvWUxT3VHzwHoIXum0N7gjOzm50ySRwou5PD0eHkDJb64E4dfLa/UAqVBhdo0HRA6jG7d50WkrnxmcZ7Wqw/XaKw6QsfHmqscR0LmugbW+m2oHLCifBDJhVT9aPF4HBUfELbsBhU403+5asf/KYlLD77KHjI5Fxj1NkunU/TvbEPu7+2D2/7jhMqlNZ5kx35bdBzJfoC58UDNL2k2MgL77X015WySg1l2YwM9EzThyl7BVPLBD3wFu2HmJVCuvVkYDlJuBrepZO2Swd18fYb4ESQAhkq0l5aPzuRj8BsPYxpxTW0XreC2N4uXpyqc7RQ5QrpIwZEndVNwNhz68GcGc82nNivlsnWnZvV3dlZnXZeovkJ8DtgVittSUICW5uToG5wnNt6dhxrA/8x+gUh5f1QyJ1AKShUVY+pvn+eclqwoWP5hktTPGJ9c6eZzjKYIfl8tF/f2E0ncV60DSRkUHhjkX7f/t4S7dqbZ+sQ9cavhbUDW2Ry8kAJG2lctsV9R3Sm7yKfH84ry9zOJnVMV7LeUR+iDB1lSILW+OchfJLAmhejQUbXBMqsDuFOMtH2qC30BOu6ODDWjbhXGIHhxI7y2pef9zv4ucat9oQ1+186w4ky9wUfNxNpy4sE+z35mpi2IbH8gf5SgYDbxcOleUivZuMnBJQd6qpYp1zCZRoDA43WCKrCqf2Gk1scX9qHC5jxsH/g+jU0prgunBqeTw4vg+Hc1jbwEo2S1mZnKcR5pHDEW1AL0ImqemdMOu20YMPbZ/kNF3bddAQ94cWP6F/mHJmWmQuHDwyCIk29ClSCFnAkex8hN3kFWcNiRybfqPGwvon3QHDFFz0MyL5PP7x55YlMsXt9IFWabIrDayEfSDzXxDQczouPaZ/ZRopksmD0ey95t9jCA8S3HzFdf37/i6ddwoER7FD1d7M7klVt3K2/m6QuQb2yh9vmAHTPfmzkRYKXiveWoYI1MW1DQvJb9gxjmuvqo90nV0u5Lz/1LVJUjmfguoJlmXp+zF1jd2o4ucWRwQOHZ6DVsW1OzkZ24FobZ5A4+59pBogDnaMjs4fE8pywtVkf3YGRcMoz7SvMGIqPA4t/wk3gRfiCs7BZKaQbgENOCwJuaLJNvLARiqYSEJdUBWPyKImsLh6M6v6fzBzLg73PMTe0xBO/DF6Q8HZJgIamzjLcUGnyCu3DYiETx0xmEAwm6S7z2/c4Mp2DDvaeZlN0KbJPofkb7lZKP7FNs9iyQW8sLXpxzRn9/vSjZbGwaTiufS8Z8Y0SnRxbEH3WJvT96ae37sRY00ijL4vY64zao85Jdis4I1ykSODlqPEIryJsAiK3JgJAE4Ok97+YE7PfiWepsBEZQPIFkviWETuplm69h89eh67uj9wQ+1NXRzBUaZX3bRanxzMGiasjk0NbzhghB4dGciTCxx6cKM4IWMKxsxAdkv6pPYCWYqALjdHBHXZa8NEIRVnbdUH2L0LQolU0fcWDBzvBGXNRhcnQFktg4rm2F+guy0LUWZhm9FHhL4Q9+Mq3VyjkgQaI5LOEhO+N9HpsZ+CZzggNAPZCev3qta9zMKplyitpBlKutMgKFjMq7ONIlAnhpv/RHBejry/NAeBUZxzBvpAaQzbVLccgTK3xm+CPHyNrX3w3NRqBtWWrd9UhpR5Q9dpK3P16W4cdOhPPFDMOjFEyo7GY+JZkzrzM8sKxjeJ3eIbmUzoF+o+hGG2IV1TwFizX+7prnPO9qCZDGuxokn2N5h2QKMf2n3JaSNY3OHx8zM05sGNH0dC86CpeOBMiF7+yKaNxyqe+keIVpKRiQcLDkshCzqxztd4cu7wq5g1AIQ8M+LGe8L3tBcaDOZ+ua/A4Aap0lh5qMHtZq/nBglOYDyejRnISK0ImVdAMeEVFesHLhDzYHAaRl2/sj6jH5zZ1GLceuULkZbYE3ZlClwNjygYHxl/pwJANWVuHwLAyVBQjnIqoCRCnZqOAUUwkCHCKrEfzEiRHRj19rGsf8Nr3TQryaP2uJErnKEawT/UsW9Rd1CnrjF3CoVwfoqxbHh0ipQcKD5oOqFv2UE562mnBhgcdb1zK2n6Jwss1Ei+mYRS5OF7jGl9c8cvML0io4ozJ5sC+XDxoyqPJp0Tq1Qt5QuPt3CMa7U39HqOuVedSPg0mm4P/SsPEPk/kbOTjyu0nlfBWXhBdeUg31ylnzL5ZP4aPgP1br3LSOyc5VLvEJukfJPPSlQI43nlYNKMvH4WZE4s9G0is2GC0IqhzpPEIdyXaLYjbEBFRJeJAPE0+GrM1MRwZKZbYU4uDdbGUwX1xaPbCVrKm3hLpDD6Bf7JHXRTrpW0lzmaeWjbIBy+VyncUmkRrUO/bfJPTgj1rMzgW/+6pocIUCEbxqoYq9Ix+CIdn2qE/fdc3lnGgLTOuIuDpR4dE05+t8HupKRaHzh15usD6ruoeo65M76hHkeaJvpbjJlL0a8uqkT6R3CzNeG3g20vSaxHgqhlXwIBYV8Gxcn30DdUV616X2CPdO72AA0Nv/2bKHt7JeZkTsxcE/G97rqLHNGrcw+koEsBwUd/qHJrrokTdIJ5nRRqVbSMzBXtwLVOuwOTMWCuLomqFPk6I+lXaqV6eaY8w4ddndXzd8uiQOYUvvG617Tc5LToMlkyrMVrQdiPYddOx6Bn58DAlcpHIMr51im2bLAjVqxuUUhO/7o+ViGme723DxdY6lyQ0ea4cOoWOTPHCzvQd2SBze4f1CCz+K466ygGLUkE3HrKvXr/xiNFvfGPFOsS74rkyP1mQTvFsrJAjEJw9CMJGXzhXAgKYOiR44xZ9bqFFJz9C/wnUOqN/cmBvLbCJjBUp3dKXS9aKOWbqlZaE4zBx6/aDbIsIgh0Xl1HARqMyglqYZiTzBN+UsR/aZzY9TFolpomZcuTl9cx6WSb0zpXYn9jXqkcVhBNhqawWzh/JIWNQJ94PDfV2mhsUAvXtvdlpIQL2rD0R4UGKpEti4Rado9GACM7gxh07LrTKj/xNtuiQoipKHEhvnSvqJfzpc0de5Mk6E9ksPHM7+2XdOB0Gb8S6DBWkh4CqB0MIfWZjRd6Gfc8sC/EG3UkC3qXFhh7wL2WClk0dmm4k6Z1ZN4n6whdeJf+IM13u6N6jBz2FmKcEuGUgR0wdufFoaXxQ8MbM7Z62v4V4XnTQoi7C9ld7eeTe4yWKEdov5syUwV3h92SU4GXWzx/Z6CxeKXWTYNFiwTi3D1G3Wz8ItK+sq7Nv04zWtd2XOC1Ewzo6lFOOCybqiKCrQJLDlCQjIaYk2w+oQAxROCKvFdxHd7sUdMKeVXGdq8lrZbpTaMgs+eE0/YNkmxZL0X1f7jDdb85kSIcSKLizS4040dc/vrZvPx6S87KRDUdG6pAL/iEfxkGPWG3JjFOHTK+y7nVk9NXiedqSoPccDxE88Qczff1OyW+/+MymEO1bMLOpngqV1qKfk9bCEqdWWwaTqEggWIZ4XSWKElecGOnftnM/gzsjNLJLXBGaL/lHzuhPF8mOVjl2ofBqGRGrbv0gkL6yqzoTKCtuXahtvsxpIQz2vvZkbzv9tadarSHEmLaMZtPBt7Y4/62lYqp/zHCsjQV6dH0LGg6tc/kWJ77Ok+D8b+m3tQ5KbRUrfim6jxyCqV/bjnogJzRlukb53mCACFvpNio+rn1tKaE4iDRkJLi1rgS3Fxp6zMjB0aMja1/T2dsLbWfkFCRbFb1h0NB/Q2qV6u+2sIVRGOtg3AOMwlIo/Rc+bc39sB2HBW6kRWnKftkp2uvEi+N6ntJnwUYNnBlTsIzINDLj/JvBWdtO2drTViRkkmADSc8BaDM4Wx7AVfzNhXg7lGWYt7qyb7Ow79jhRy3uK7v+FAYoE9JyWy91Wkjnh8bakwdN2LTWbcoaw0XfFh9Fu7Uj/XJDY8+kqcJGewMU6fgh8CGyT4PautrndsND0tIt0nXLA3klT1AZ8fFtlweI3JBNI+MddVCDXcP6UCOXxByDrSkxbei7FVvABmt/lx+ogdigjqqbNn2pjMa5R4jge2rZ25/1srcHFjN8A3q7GPRtI/SgtePaMC3zuD10cV4+nWijbx60jMAY/dP/KdpzozhTmrI/2hcJIvyM8AFNFDNA223i+cQ0I58jJMeGg0tOLmZwJyCEl0OWItyhLaM1nNoZxyb96SLK6qpWWbi1MSV1jfGoECnfV9jVERqVHdSB+uox4/G3777bagOSI03uuJZoP6bUbj4WDVsG8yNmCxBCtIkoy4++aS1eTtsnWZsVXRfD07v8coXqWkPeiBcPLqYMSdXCtiNxurJm3odkMqIOCtnj9qqcl6gSAf/Jik52DbZoINKQkcBlR9RrYRo1UHlPnvTEeRF+vZe9Ypbvntz1ybSLuCGMZW8dQongBaZF/c/WHhkx4MS4BrcEK4x1WHSVKiWy4JtJl5VKUZcxDoxQH4fmjo0kt4zQ3MFFx/ar/TpspGYO7IktOuLcmH7UvltexuFZOw6v1DvWkae6yjoHtYoiGB/hIUMaqg2aGtg9ULL7Lk4LkTiu//vXd34x//THP/a0mIMv16hnuEf6WUaLOnuGLn//Ijd59tFXfRWezrqJvh9r8lopOoWOLHhJ+xYlD2CiDJGPwz4TqJHpG/UowuA3+aKQZomI/zgvMlnwgTLZ24+sJ238i1IUE0UbmqoFxW6Ve4WpXvqPEfMz6z8+Wi6z/cNf4neZ9hBS9/Rau/C2bWNmjNF8BGb2vf/ZtiIxZ6aPep9a0lsyVZQ2dhWwhmn7pVZUWrCRgBNtUcQJ8ktJeL4xDcnZtyTBuVE22K8PBrfEtpSB8dvEefHb4J4jMTTZ293heTnBrNHxdJ369tLBukKXmnWOmVTpK7zyPYC60qTCdlM9+cs//vFQj1AK/JNVxJAZfvx91QHmxrDXLwz112nJLBXTZmwpKfFSNy6tffSS3G/IdX8usmjw5lVhTQIacvd48YPQR8ntkeZYdsVfOniDVVSv2IgyR6D2zpwBOQRNNRt5PbNRzbPzfYLcKCKIpUiTQKAeOaD92UbpPy0OjNB50ljxW7h065io/wEF23bJ4h7TjYopXI3EdOaByfovo3PO/C43ilo52iSxbg2NJVJPvSaTeeBI13kuj4tJVzBS488T19oPQ9uUsEbpbWR0B05Wd3d6vy0voWkUl5xZSlrLCA8H6DDrEK6pO0ODU071ZduSpf4o/aabhe4dCBw0TVyYdKM9+fPf//7w7e8t+8M91iS4YHYx3JnYA70fpj6p74LWMxxZ39uIiwvrofd20baj/UuKGBuuldroGYoq2uYEx/G8mqIU1s65IQ/d0mUa0zI99INtO4Ld6MAU0eyR2R91ODjakjzxY9qWaVSmM8kfSDSf2oR76Bx1M0LxmumfPTnwaG0/ggOTnD0e3fZC7y5e0dCXO2IYqWo8rgVpw/iMgREnIwV2aua3Twb3ckoxcivU26oSUyILvmFeVipFXcb4kRihv7qntEVwd2juyMjYjqMzh+bZ23F0vJIYD1uLW+EGYXSHYxQ+WEbmB3Lk1DhbZXF2C9zudLUngqSZoy6/Aqdb+TgWVAt6OnvVn7uLYBmU0FfcBTtAtyL6J0Szp6S3Pnjy13/+84E1IcLH21F4G7OzJeR6OLwNhWe2uu/K2WwZoqTRx9tGZGHZAzz8jmXL6Al2x2EbPZKehl2CT0X4FepxYQGNLrD0AY/ku2ywyMMH56VpBuH0zhl/CVzPFFqHqLZ26Qu2WpmyImCDhyTbjrAdy5mpTNdAOlGxsuRJluPc+I8XH6IPmUIkESzTnEwh3jTduXXRYe36tvWYlr3Sw0sfaWsURpolyqzH+GjM7iFPt2TObHrkiaiocF/04X6IBFFEhH9K5XiVYjfJNsFUr21TZwuzxhAEjNWR2f3to77FGzh8cW7CgS46PHmOst3xxIeX3IekrYM6isODJmkPj/KQcxTcfaBXjNYqvqZFhBVRaS9evJh+0Inh7BklX1pUIZ3x4tsX2b09y2PFM2adPllRtOazTZuhQf+o+I3Rm4wgeW3rTETWxSCNJnIL2JFZ6daiXWA8dBUogoNglDPjJDIZ6LECFqUq3YSQNwhaqojTQi9GYIxgGHnNOtWVl0QhROWo6op4TYEfN9OH79g/y1IvEeCg3IEzfZppEfTN4DuVdn+eZLYjC64pxRLbkKSPenkZS3kC03QiW5E0pxUhjsreR8XVgihqBX5CBd3C8Yz66rYIL7s2N1MUOfSD1XRhxkqvt8oOWtOMNRCDJLE8VO7tuDxXoU1LeK7CzYU2lesCl+uk/unh8eZIKqavbF2FMPGE377IaZhbtBXVnpwSzloJ2Sx4Y2VK9NADriNzz9ZSB9b4GHEy0sF2MkWMeFRt6BGByxtVLidDWJsidAUuBaaoeKHgRYn+wakeijiUXqGfRvJK+Ufr4k1/Mvp6+z45MKbTcL6MwK64viO9pEONEzqhaoSq0VkV3j6A3xEvHZy5fsoVyEsHH+xyHf3DXRulZfcMrEcq7otuYsgyGvt90yT96ICypTzLNnVf287YqvJHYmJb4VW5aO8KnCysTgt8nBZTTDiuU9NbE0Lp2lf2QOeN7lbHtdMvrg0PG6Y/+fXwIXI7LU5SvMvvxP0AyelRV0NeV7ekevc/b8o4L0a4+hi4h5zJiDooDD7CKiZQ5wgZvwIfTBwXfxyMvKbWvaKIIFLFkUwXdPJf5LtOIdou0OwnxRoiIzACOXYdWNR/UpcoOyfpMSspeng5t1FNHMUpOTAcmf3xEa+defH73DJ4pD21zJHZVLknvRXRSMDBNulzkOyjRMcWuiiepWgPrvZ0jlh5ywet6SJJvYYyQmk0dUGZ0wKLbAdvbUfWezou5GgU0E/FBNbgoCPsmDEa1G2dy3ZctjfD0VHxXGSNaMo28WDh+6Xtl8WUClOGuw81GDXkiV8pZ7bu06Wsd9nb8Te23tXqg0oGepTA7oirVrok7emqoA3e5nFcjGB2pw4lDiFLeVZeT48RvMcbB0YQB6Mw7CAKkei8PPlt4Cy9A2hcFEGaC6hx1V63XAnp2R9l+CiMEZn98VKqusLtia7lvuPsziwSnyzP6HWS9aORRRvKq6k2wVWvlRNG3fJBIFIUtVQuFOmAC6y6+l/BTwq1QTV0xAAAAABJRU5ErkJggg=="},rwCY:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("NX3A"),c=n("Z4N4"),l=n("A7aE"),p=r.a.createElement;t.a=Object(l.b)((function(e){return p("div",{className:a.a.dynamic([["1460959655",[s.a.color.coolGrey,e.storyDesign.storyTheme.themeVariables.mixins.typography.title.size.stepDown2(),c.a.lineClamp(1)]]])+" popup-subtitle"},e.text.toUpperCase(),p(a.a,{id:"1460959655",dynamic:[s.a.color.coolGrey,e.storyDesign.storyTheme.themeVariables.mixins.typography.title.size.stepDown2(),c.a.lineClamp(1)]},[".popup-subtitle.__jsx-style-dynamic-selector{color:".concat(s.a.color.coolGrey,";").concat(e.storyDesign.storyTheme.themeVariables.mixins.typography.title.size.stepDown2()," ").concat(c.a.lineClamp(1),";}")]))}))},s4SP:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var i=n("7xIC"),a=n.n(i),o=n("fd07"),r=function(e){return l.indexOf(e.toLocaleLowerCase())>-1},s=function(){var e=function(){try{return new URLSearchParams(window.location.search.substr(1)).get("locale")}catch(e){return""}}()||function(){var e=Object(o.g)(document.cookie||"");return e&&e.culture?e.culture:""}()||navigator.language||"en-US",t=e.toLowerCase();return r(t)?{locale:e,lang:t}:(t=t.split("-")[0],r(t)?{locale:e,lang:t}:{locale:"en-US",lang:"en"})},c=function(e){var t=function(){var e=a.a.router;if(!e||!e.query)return"";try{var t=new URLSearchParams(e.asPath.split(/\?/)[1]).get("dir");return!t||"rtl"!==t&&"ltr"!==t?"":t}catch(n){return""}}();return"ltr"===t||"rtl"===t?t:!e||"ar"!==e&&"he"!==e?"ltr":"rtl"},l=["ar","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw"]},sDPw:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return w}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("ERkP"),u=n.n(p);function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(d()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"state",{currentValue:""}),Object(l.a)(Object(o.a)(e),"onChange",(function(t){var n=t.currentTarget.value;"undefined"===e.props.currentValue&&e.setState({currentValue:t.currentTarget.value}),"function"===typeof e.props.onChange&&e.props.onChange(n,t)})),e}return Object(a.a)(p,[{key:"render",value:function(){var e="undefined"===typeof this.props.currentValue?this.state.currentValue:this.props.currentValue;return this.props.children({name:this.props.name,currentValue:e,onChange:this.onChange})}}]),p}(p.PureComponent),m=n("yFcC"),f=n.n(m),y=n("Z4N4"),g=n("NX3A"),v=u.a.createElement;function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var x=function(e){Object(c.a)(o,e);var t,n=(t=o,function(){var e,n=Object(s.a)(t);if(b()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function o(){return Object(i.a)(this,o),n.apply(this,arguments)}return Object(a.a)(o,[{key:"render",value:function(){var e="normal"===this.props.spacing?g.a.spacing.xxs:g.a.spacing.xxxs,t="undefined"!==typeof this.props.currentValue?this.props.value===this.props.currentValue:this.props.isChecked;return v(p.Fragment,null,v("label",{htmlFor:this.props.id,className:f.a.dynamic([["575446557",[y.a.screenReaderOnly(),this.props.alignment,g.a.spacing.xxs,g.a.spacing.xxs,g.a.color.coolGrey,e,e,e,e,e,e,g.a.color.haikuGreen,g.a.color.haikuGreen]],["2295101617",[this.props.disabled?"not-allowed":"pointer",this.props.disabled?.5:1]]])+" "+(this.props.className||"")},v("input",{id:this.props.id,type:"radio",checked:t,"aria-checked":t,value:this.props.value,name:this.props.name,disabled:this.props.disabled,onChange:this.props.onChange,className:f.a.dynamic([["575446557",[y.a.screenReaderOnly(),this.props.alignment,g.a.spacing.xxs,g.a.spacing.xxs,g.a.color.coolGrey,e,e,e,e,e,e,g.a.color.haikuGreen,g.a.color.haikuGreen]],["2295101617",[this.props.disabled?"not-allowed":"pointer",this.props.disabled?.5:1]]])}),v("div",{className:f.a.dynamic([["575446557",[y.a.screenReaderOnly(),this.props.alignment,g.a.spacing.xxs,g.a.spacing.xxs,g.a.color.coolGrey,e,e,e,e,e,e,g.a.color.haikuGreen,g.a.color.haikuGreen]],["2295101617",[this.props.disabled?"not-allowed":"pointer",this.props.disabled?.5:1]]])+" radio-input-outer"},v("div",{className:f.a.dynamic([["575446557",[y.a.screenReaderOnly(),this.props.alignment,g.a.spacing.xxs,g.a.spacing.xxs,g.a.color.coolGrey,e,e,e,e,e,e,g.a.color.haikuGreen,g.a.color.haikuGreen]],["2295101617",[this.props.disabled?"not-allowed":"pointer",this.props.disabled?.5:1]]])+" radio-input-inner"})),v("div",{className:f.a.dynamic([["575446557",[y.a.screenReaderOnly(),this.props.alignment,g.a.spacing.xxs,g.a.spacing.xxs,g.a.color.coolGrey,e,e,e,e,e,e,g.a.color.haikuGreen,g.a.color.haikuGreen]],["2295101617",[this.props.disabled?"not-allowed":"pointer",this.props.disabled?.5:1]]])+" label-content"},this.props.children)),v(f.a,{id:"575446557",dynamic:[y.a.screenReaderOnly(),this.props.alignment,g.a.spacing.xxs,g.a.spacing.xxs,g.a.color.coolGrey,e,e,e,e,e,e,g.a.color.haikuGreen,g.a.color.haikuGreen]},["input[type='radio'].__jsx-style-dynamic-selector{".concat(y.a.screenReaderOnly(),";}"),"label.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:".concat(this.props.alignment,";-webkit-box-align:").concat(this.props.alignment,";-ms-flex-align:").concat(this.props.alignment,";align-items:").concat(this.props.alignment,";}"),".label-content.__jsx-style-dynamic-selector{-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".radio-input-outer.__jsx-style-dynamic-selector{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:".concat(g.a.spacing.xxs,";height:").concat(g.a.spacing.xxs,";border-radius:50%;border:1px solid ").concat(g.a.color.coolGrey,";box-shadow:inset 0 0.2rem 0.2rem 0 rgba(0,0,0,0.1);margin:calc(").concat(e," / 2) ").concat(e," calc(").concat(e," / 2) 0;}"),"html[dir='rtl'] .radio-input-outer.__jsx-style-dynamic-selector{margin:calc(".concat(e," / 2) 0 calc(").concat(e," / 2) ").concat(e,";}"),"input[type='radio'].__jsx-style-dynamic-selector:checked+.radio-input-outer.__jsx-style-dynamic-selector .radio-input-inner.__jsx-style-dynamic-selector{width:1rem;height:1rem;border-radius:50%;background-color:".concat(g.a.color.haikuGreen,";margin:0.2rem;}"),"input[type='radio'].__jsx-style-dynamic-selector:focus+.radio-input-outer.__jsx-style-dynamic-selector{box-shadow:inset 0 0.2rem 0.2rem 0 rgba(0,0,0,0.1), 0 0 0.5rem 1px ".concat(g.a.color.haikuGreen,";}")]),v(f.a,{id:"2295101617",dynamic:[this.props.disabled?"not-allowed":"pointer",this.props.disabled?.5:1]},["label.__jsx-style-dynamic-selector{cursor:".concat(this.props.disabled?"not-allowed":"pointer",";opacity:").concat(this.props.disabled?.5:1,";}")]))}}]),o}(p.PureComponent);Object(l.a)(x,"defaultProps",{alignment:"initial",spacing:"normal"});var O=h,w=x},sZnk:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"copy",path:"M30 2v18h-9V10a1 1 0 0 0-1-1h-8V2zm-10 8H2v18h18z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},t3zI:function(e,t,n){"use strict";var i=n("ERkP"),a=n.n(i),o=n("Abkm"),r=n("4m8B"),s=n("DmvT"),c=n("nVDo"),l=n("xPLh"),p=a.a.createElement,u=Object(i.memo)((function(e){var t=e.description||"";if(!Object(o.e)(t).replace(/\s+/g,""))return null;var n="function"===typeof e.readMore&&Object(s.b)(t),a=n?"".concat(t.substring(0,c.l),"\u2026"):t;return p(i.Fragment,null,p(r.a,{text:a,styleMixin:e.styleMixin}),n&&p(l.a,{onClick:e.readMore}))}));t.a=u},t7DY:function(e,t,n){"use strict";var i,a,o,r,s,c,l,p,u,d,h,m,f,y,g,v,b,x,O,w,j,C,k,S,I,P,R,E,D,T,M,A,N,L;n.d(t,"c",(function(){return i})),n.d(t,"r",(function(){return a})),n.d(t,"m",(function(){return c})),n.d(t,"s",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"j",(function(){return h})),n.d(t,"g",(function(){return m})),n.d(t,"a",(function(){return y})),n.d(t,"l",(function(){return b})),n.d(t,"i",(function(){return x})),n.d(t,"n",(function(){return O})),n.d(t,"p",(function(){return w})),n.d(t,"o",(function(){return j})),n.d(t,"f",(function(){return I})),n.d(t,"k",(function(){return P})),n.d(t,"d",(function(){return E})),n.d(t,"q",(function(){return D})),n.d(t,"e",(function(){return T})),n.d(t,"t",(function(){return M})),n.d(t,"h",(function(){return A})),function(e){e.GUIDED_TOUR="GUIDED_TOUR",e.ANNOTATION_MAP="ANNOTATION_MAP",e.EXPRESS_MAPPING="EXPRESS_MAPPING",e.EXPRESS_CHARTING="EXPRESS_CHARTING",e.EXPRESS_DRAWING="EXPRESS_DRAWING",e.ANNOTATION_GLOBE="ANNOTATION_GLOBE",e.ANNOTATION_TERRAIN="ANNOTATION_TERRAIN",e.VISUALIZATION_BIN="VISUALIZATION_BIN",e.VISUALIZATION="VISUALIZATION",e.VISUALIZATION_MAPPING="VISUALIZATION_MAPPING",e.VISUALIZATION_CHARTING="VISUALIZATION_CHARTING",e.IMAGE_EDITOR="IMAGE_EDITOR",e.VIEWER_3D="VIEWER_3D",e.ANNOTATION_SCENE="ANNOTATION_SCENE",e.WALLPAPER2D="WALLPAPER2D",e.ANNOTATION_3D="ANNOTATION_3D",e.WALLPAPER3D="WALLPAPER3D",e.DRAWINGTOOL2D="DRAWINGTOOL2D",e.DRAWINGTOOL3D="DRAWINGTOOL3D"}(i||(i={})),function(e){e.MERCATOR="MERCATOR",e.SPHERICALPROJECTION="SPHERICALPROJECTION",e.ORTHOGRAPHIC="ORTHOGRAPHIC",e.CONIC_EQUAL_AREA="CONIC_EQUAL_AREA",e.CONIC_EQUI_DISTANT="CONIC_EQUI_DISTANT",e.EQUAL_EARTH="EQUAL_EARTH",e.EQUI_RECTANGULAR="EQUI_RECTANGULAR",e.GNOMONIC="GNOMONIC",e.CONIC_CONFORMAL="CONIC_CONFORMAL",e.STEREO_GRAPHIC="STEREO_GRAPHIC",e.ALBERS_USA="ALBERS_USA"}(a||(a={})),function(e){e.POINT_REGULAR="POINT_REGULAR",e.POINT_NUMBERED="POINT_NUMBERED",e.POINT_ICON="POINT_ICON",e.POLYLINE="POLYLINE",e.POLYLINE_BENDING="POLYLINE_BENDING",e.POLYGON="POLYGON",e.POLYGON_DEPRECATED="POLYGON_DEPRECATED",e.POLYGON_GRAPH="POLYGON_GRAPH",e.POLYGON_MULTIPLE="POLYGON_MULTIPLE",e.CIRCLE="CIRCLE",e.RECTANGLE="RECTANGLE",e.AN_GON="AN_GON",e.ARROW_SINGLE="ARROW_SINGLE",e.ARROW_DOUBLE="ARROW_DOUBLE",e.TEXT="TEXT",e.CATEXT="CATEXT",e.TEXT_LEADERLINE="TEXT_LEADERLINE",e.APOINT="APOINT",e.AMIDPOINT="AMIDPOINT",e.ANODE="ANODE",e.APOINT_PATH="APOINT_PATH",e.ANODE_RECT="ANODE_RECT",e.ANODE_CIRCLE="ANODE_CIRCLE",e.ANODE_NGON="ANODE_NGON",e.ANODE_TEXT="ANODE_TEXT",e.AMIDPOINT_ALINE="AMIDPOINT_ALINE",e.CURVE="CURVE",e.CURVE_OPEN="CURVE_OPEN",e.CURVE_CLOSE="CURVE_CLOSE",e.FREEHAND_POLYLINE="FREEHAND_POLYLINE",e.FREEHAND_CURVE="FREEHAND_CURVE",e.SMARTDRAWING="SMARTDRAWING",e.ALINE="ALINE",e.CPOINT="CPOINT",e.CMIDPOINT="CMIDPOINT",e.CNODE="CNODE",e.CNODE_RECT="CNODE_RECT",e.CNODE_CIRCLE="CNODE_CIRCLE",e.CNODE_NGON="CNODE_NGON",e.CNODE_TEXT="CNODE_TEXT",e.CPOINT_REGULAR="CPOINT_REGULAR",e.CPOINT_NUMBERED="CPOINT_NUMBERED",e.CLINE="CLINE",e.CEDGE="CEDGE",e.CPOLYLINE="CPOLYLINE",e.CPOLYGON="CPOLYGON",e.CRECTANGLE="CRECTANGLE",e.CN_GON="CN_GON",e.CN_STAR="CN_STAR",e.CARC="CARC",e.CCIRCLE="CCIRCLE",e.CCURVE="CCURVE",e.CCURVE_OPEN="CCURVE_OPEN",e.CCURVE_CLOSED="CCURVE_CLOSED",e.CBLACKHOLE="CBLACKHOLE",e.CFREEHAND="CFREEHAND",e.COTHERS="COTHERS",e.POINT_NUMBERED_TOUR="POINT_NUMBERED_TOUR"}(o||(o={})),function(e){e.SMARTDRAWING="SMARTDRAWING",e.MAPFILTER="MAPFILTER",e.MAPTICON="MAPTICON",e.DRAWINGBLOCK="DRAWINGBLOCK"}(r||(r={})),function(e){e.NONE="NONE",e.SELECT="SELECT",e.REMOVE="REMOVE"}(s||(s={})),function(e){e.NONE="NONE",e.DEEP_LEARNING="DEEP_LEARNING"}(c||(c={})),function(e){e.SVG="SVG",e.CANVAS="CANVAS",e.THREE="THREE",e.WEBGL="WEBGL",e.WEBGL2="WEBGL2",e.WEBGPU="WEBGPU"}(l||(l={})),function(e){e.ERASER="ERASER",e.NONE="NONE",e.SIMPLE_PENCIL="SIMPLE_PENCIL",e.SIMPLE_MULT_PENCIL="SIMPLE_MULT_PENCIL",e.BRUSH_PENCIL="BRUSH_PENCIL",e.FUR_PENCIL="FUR_PENCIL",e.FUR_PENCIL_TEXTURE="FUR_PENCIL_TEXTURE",e.BRAID_PENCIL="BRAID_PENCIL",e.STAR_PENCIL="STAR_PENCIL",e.MULTIPLE_LINE_PENCIL="MULTIPLE_LINE_PENCIL",e.RANDOM_RADIUS_PENCIL="RANDOM_RADIUS_PENCIL",e.COLORED_PIXELS_PENCIL="COLORED_PIXELS_PENCIL",e.PATTERN_BASED_PENCIL="PATTERN_BASED_PENCIL",e.SHAPED_PENCIL="SHAPED_PENCIL"}(p||(p={})),function(e){e.NONE="NONE",e.SELECT="SELECT",e.REMOVE="REMOVE",e.SELECT_RECT="SELECT_RECT",e.SELECT_LASSO="SELECT_LASSO",e.MOVE_EASEING="MOVE_EASEING",e.UNDO="UNDO",e.REDO="REDO",e.POINT_REGULAR="POINT_REGULAR",e.POINT_NUMBERED="POINT_NUMBERED",e.POLYLINE="POLYLINE",e.FREEHAND_POLYLINE_BENDING="FREEHAND_POLYLINE_BENDING",e.POLYLINE_CONSTRAINT="POLYLINE_CONSTRAINT",e.POLYGON="POLYGON",e.POLYGON_GRAPH="POLYGON_GRAPH",e.POLYGON_MULTIPLE="POLYGON_MULTIPLE",e.POLYGON_CONSTRAINT="POLYGON_CONSTRAINT",e.POLYLINE_BENDING="POLYLINE_BENDING",e.LINE_GRAPH="LINE_GRAPH",e.CIRCLE="CIRCLE",e.CIRCLE_CONSTRAINT_AREA="CIRCLE_CONSTRAINT_AREA",e.CIRCLE_CONSTRAINT_CIRCUMFERENCE="CIRCLE_CONSTRAINT_CIRCUMFERENCE",e.RECTANGLE="RECTANGLE",e.POINT_ICON="POINT_ICON",e.TEXT="TEXT",e.TEXT_LEADERLINE="TEXT_LEADERLINE",e.STAR="STAR",e.ARROW_SINGLE="ARROW_SINGLE",e.ARROW_DOUBLE="ARROW_DOUBLE",e.CURVE="CURVE",e.CURVE_OPEN="CURVE_OPEN",e.CURVE_CLOSE="CURVE_CLOSE",e.FREEHAND_POLYLINE="FREEHAND_POLYLINE",e.FREEHAND_POLYGON="FREEHAND_POLYGON",e.FREEHAND_POLYGON_GRAPH="FREEHAND_POLYGON_GRAPH",e.FREEHAND_CURVE="FREEHAND_CURVE",e.FREEHAND_CURVE_CLOSED="FREEHAND_CURVE_CLOSED",e.SMARTDRAWING="SMARTDRAWING",e.SMARTDRAWING_DEEPLEARNING="SMARTDRAWING_DEEPLEARNING",e.LINE="LINE",e.APOINT="APOINT",e.CPOINT_REGULAR="CPOINT_REGULAR",e.CPOINT_NUMBERED="CPOINT_NUMBERED",e.CLINE="CLINE",e.CPOLYLINE="CPOLYLINE",e.CPOLYGON="CPOLYGON",e.CLINE_TOOGLE="CLINE_TOOGLE",e.CARC="CARC",e.CCIRCLE="CCIRCLE",e.CRECTANGLE="CRECTANGLE",e.CNGON="CNGON",e.CSTAR="CSTAR",e.CCURVE="CCURVE",e.CCURVE_CLOSE="CCURVE_CLOSE",e.CFREEHAND_POLYLINE="CFREEHAND_POLYLINE",e.CFREEHAND_CURVE="CFREEHAND_CURVE",e.CFREEHAND_LINE="CFREEHAND_LINE",e.CFREEHAND_SMARTDRAWING="CFREEHAND_SMARTDRAWING",e.CFREEHAND_SMOOTH="CFREEHAND_SMOOTH",e.CRECTANGLE_CROP="CRECTANGLE_CROP",e.CPOINT="CPOINT",e.CNODE="CNODE",e.CEDGE="CEDGE",e.SVG_TOUR_POINT="SVG_TOUR_POINT",e.SVG_TOUR_LINE="SVG_TOUR_LINE",e.LINE_SPIKE="LINE_SPIKE",e.CIRCLE_TRAJECTORY="CIRCLE_TRAJECTORY",e.ARC_SPIKE="ARC_SPIKE",e.POINT_NUMBERED_TOUR="POINT_NUMBERED_TOUR"}(u||(u={})),function(e){e.SELECT="SELECT",e.REMOVE="REMOVE",e.POINT_REGULAR="POINT_REGULAR",e.POINT_NUMBERED="POINT_NUMBERED",e.LINE_SPIKE="LINE_SPIKE",e.CIRCLE_TRAJECTORY="CIRCLE_TRAJECTORY",e.ARC_SPIKE="ARC_SPIKE",e.POLYLINE="POLYLINE",e.POLYGON="POLYGON",e.CIRCLE="CIRCLE",e.LINE="LINE"}(d||(d={})),function(e){e.POINT_REGULAR="POINT_REGULAR",e.POINT_NUMBERED="POINT_NUMBERED",e.POINT_NUMBERED_TOUR="POINT_NUMBERED_TOUR",e.POINT_ICON="POINT_ICON",e.POLYLINE="POLYLINE",e.POLYLINE_BENDING="POLYLINE_BENDING",e.POLYGON="POLYGON",e.POLYGON_DEPRECATED="POLYGON_DEPRECATED",e.POLYGON_GRAPH="POLYGON_GRAPH",e.POLYGON_MULTIPLE="POLYGON_MULTIPLE",e.CIRCLE="CIRCLE",e.RECTANGLE="RECTANGLE",e.AN_GON="AN_GON",e.ARROW_SINGLE="ARROW_SINGLE",e.ARROW_DOUBLE="ARROW_DOUBLE",e.TEXT="TEXT",e.CATEXT="CATEXT",e.TEXT_LEADERLINE="TEXT_LEADERLINE",e.APOINT="APOINT",e.AMIDPOINT="AMIDPOINT",e.ANODE="ANODE",e.APOINT_PATH="APOINT_PATH",e.ANODE_RECT="ANODE_RECT",e.ANODE_CIRCLE="ANODE_CIRCLE",e.ANODE_NGON="ANODE_NGON",e.ANODE_TEXT="ANODE_TEXT",e.AMIDPOINT_ALINE="AMIDPOINT_ALINE",e.CURVE="CURVE",e.CURVE_OPEN="CURVE_OPEN",e.CURVE_CLOSE="CURVE_CLOSE",e.FREEHAND_POLYLINE="FREEHAND_POLYLINE",e.FREEHAND_CURVE="FREEHAND_CURVE",e.SMARTDRAWING="SMARTDRAWING",e.ALINE="ALINE",e.CPOINT="CPOINT",e.CMIDPOINT="CMIDPOINT",e.CNODE="CNODE",e.CNODE_RECT="CNODE_RECT",e.CNODE_CIRCLE="CNODE_CIRCLE",e.CNODE_NGON="CNODE_NGON",e.CNODE_TEXT="CNODE_TEXT",e.CPOINT_REGULAR="CPOINT_REGULAR",e.CPOINT_NUMBERED="CPOINT_NUMBERED",e.CLINE="CLINE",e.CEDGE="CEDGE",e.CPOLYLINE="CPOLYLINE",e.CPOLYGON="CPOLYGON",e.CRECTANGLE="CRECTANGLE",e.CN_GON="CN_GON",e.CN_STAR="CN_STAR",e.CARC="CARC",e.CCIRCLE="CCIRCLE",e.CCURVE="CCURVE",e.CCURVE_OPEN="CCURVE_OPEN",e.CCURVE_CLOSED="CCURVE_CLOSED",e.CBLACKHOLE="CBLACKHOLE",e.CFREEHAND="CFREEHAND",e.COTHERS="COTHERS"}(h||(h={})),function(e){e.DEFAULT="default",e.AUTO="auto",e.CROSSHAIR="crosshair",e.MOVE="move",e.POINTER="pointer",e.TEXT="text",e.WAIT="wait",e.HELP="help",e.PROGRESS="progress"}(m||(m={})),function(e){e.X_NONE="X_NONE",e.X_REMOVE="X_REMOVE",e.X_SELECT="X_SELECT",e.X_SELECT_RECT="X_SELECT_RECT",e.X_SELECT_LASSO="X_SELECT_LASSO",e.X_UNDO="X_UNDO",e.X_REDO="X_REDO",e.X_ARROW_SINGLE="X_ARROW_SINGLE",e.X_ARROW_DOUBLE="X_ARROW_DOUBLE",e.X_POINT_REGULAR="X_POINT_REGULAR",e.X_POINT_NUMBERED="X_POINT_NUMBERED",e.X_POLYLINE="X_POLYLINE",e.X_FREEHAND_POLYLINE="X_FREEHAND_POLYLINE",e.X_POLYGON="X_POLYGON",e.X_CIRCLE="X_CIRCLE",e.X_RECTANGLE="X_RECTANGLE",e.X_TEXT_LEADERLINE="X_TEXT_LEADERLINE",e.X_POINT="X_POINT",e.X_NODE="X_NODE",e.X_EDGE="X_EDGE",e.X_POINT_ICON="X_POINT_ICON"}(f||(f={})),function(e){e.Select="select",e.Deselect="deselect",e.PointerOut="pointerOut",e.SetDrawingMode="setDrawingMode",e.ToggleMapfilter="toggleMapfilter",e.ToggleQuickActions="toggleQuickActions",e.ChangeTheme="changeTheme",e.ToggleDrawingTooltips="toggleDrawingTooltips",e.ToggleGrid="toggleGrid",e.ToggleMeasure="toggleMeasure",e.ShiftUnit="shiftUnit",e.DumpIconsBase64s="dumpIconsBase64s",e.AddIconBase64="addIconBase64",e.SelectIconBase64="selectIconBase64",e.ActiveColorId="activeColorId",e.InclusiveSelect="inclusiveSelect",e.InclusiveDeselect="inclusiveDeselect",e.ExclusiveSelect="exclusiveSelect",e.ExclusiveDeselect="exclusiveDeselect",e.ReorderNumberedPoints="reorderNumberedPoints",e.ReorderNumberedTourPoints="reorderNumberedTourPoints",e.Remove="remove",e.RemoveSelected="removeSelected",e.Update="update",e.Enter="enter",e.Leave="leave",e.Show="show",e.Hide="hide",e.HidePopup="hidePopup",e.ShowPopup="showPopup",e.Dump="dump",e.InitGhost="initGhost",e.EnterGhost="enterGhost",e.LeaveGhost="leaveGhost",e.ShowGhostPopup="showGhostPopup",e.HideGhostPopup="hideGhostPopup",e.AddGhost="addGhost",e.Add="add",e.Transform="transform",e.RemoveGhost="removeGhost",e.ShowText="showText",e.HideText="hideText",e.StartEditingText="startEditingText",e.EndEditingText="endEditingText",e.PolylineConstraintLength="polylineConstraintLength",e.PolylineConstraintLengthPercentage="polylineConstraintLengthPercentage",e.DisableExcept="disableExcept",e.Highlight="highlight",e.Style="style",e.ClusteringPoint="ClusteringPoint"}(y||(y={})),function(e){e.START="start",e.END="end",e.LEFT="left",e.CENTER="center",e.RIGHT="right"}(g||(g={})),function(e){e.WRAP="WRAP",e.LINEBREAK="LINEBREAK",e.NORMAL="NORMAL"}(v||(v={})),function(e){e.ROUND="round",e.BUTT="butt",e.SQUARE="square"}(b||(b={})),function(e){e.CURVE="CURVE",e.CURVE_CLOSED="CURVE_CLOSED",e.LINE="LINE",e.PLINE="PLINE",e.POLYGON="POLYGON",e.POLYGON_GRAPH="POLYGON_GRAPH",e.PLINE_BENDING="PLINE_BENDING",e.PGON="PGON",e.SMOOTH="SMOOTH",e.SMDRAWING="SMDRAWING"}(x||(x={})),function(e){e.REGULAR="REGULAR",e.DOUGLAS_PEUCKER="DOUGLAS_PEUCKER"}(O||(O={})),function(e){e.NONE="NONE",e.ZOOM="ZOOM",e.COLLISION="COLLISION",e.AGENT="AGENT"}(w||(w={})),function(e){e.NONE="NONE",e.ZOOM="ZOOM",e.COLLISION="COLLISION",e.AGENT="AGENT",e.GRID="GRID"}(j||(j={})),function(e){e.FULL_HD="d"}(C||(C={})),function(e){e.SVG="SVG",e.CANVAS="CANVAS",e.GL="GL"}(k||(k={})),function(e){e.COMMAND="COMMAND",e.OBJECT="OBJECT"}(S||(S={})),function(e){e.PRODUCTION="PRODUCTION",e.DEVELOPMENT="DEVELOPMENT",e.LOCAL="LOCAL"}(I||(I={})),function(e){e.DRAWING="DRAWING",e.INTERACTIVE_VIEWER="INTERACTIVE_VIEWER",e.OBSERVE_VIEWER="OBSERVE_VIEWER"}(P||(P={})),function(e){e.DRAWING="DRAWING",e.INTERACTIVE_VIEWER="INTERACTIVE_VIEWER",e.OBSERVE_VIEWER="OBSERVE_VIEWER"}(R||(R={})),function(e){e.OPERA="Opera",e.CHROME="Chrome",e.SAFARI="Safari",e.FIREFOX="Firefox",e.IE="IE",e.EDGE="Edge",e.UNKNOWN="unknown"}(E||(E={})),function(e){e.UP="UP",e.DOWN="DOWN"}(D||(D={})),function(e){e.LEFT="LEFT",e.MIDDLE="MIDDLE",e.RIGHT="RIGHT",e.WHEEL="WHEEL",e.DRAG="DRAG",e.DRAG_LEFT="DRAG_LEFT",e.DRAG_MIDDLE="DRAG_MIDDLE",e.DRAG_RIGHT="DRAG_RIGHT",e.MOVE="MOVE",e.DOUBLE="DOUBLE",e.UP="UP",e.DOWN="DOWN",e.DOWN_MIDDLE="DOWN_MIDDLE",e.DOWN_RIGHT="DOWN_RIGHT"}(T||(T={})),function(e){e.START="START",e.END="END",e.MOVE="MOVE",e.CANCEL="CANCEL"}(M||(M={})),function(e){e.NATIVE="NATIVE",e.JSAPI4X="JSAPI4X"}(A||(A={})),function(e){e.PERSPECTIVE="PERSPECTIVE",e.ORTHOGRAPHIC="ORTHOGRAPHIC",e.STEREO="STEREO"}(N||(N={})),function(e){e.CANVAS="CANVAS",e.GL="GL"}(L||(L={}))},tAnR:function(e,t,n){"use strict";n.r(t),n.d(t,"BlockLayoutViewer",(function(){return D}));var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("ERkP"),l=n.n(c),p=n("HbGN"),u=n("pWxA"),d=n("zjfJ"),h=n("yFcC"),m=n.n(h),f=n("NX3A"),y=n("O94r"),g=n.n(y),v=l.a.createElement;function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var x=function(e){Object(s.a)(l,e);var t,n=(t=l,function(){var e,n=Object(r.a)(t);if(b()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function l(){var e;Object(i.a)(this,l);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),Object(d.a)(Object(u.a)(e),"containerElement",Object(c.createRef)()),Object(d.a)(Object(u.a)(e),"getSpacingValue",(function(e,t){return t||e})),Object(d.a)(Object(u.a)(e),"onClick",(function(t){"function"===typeof e.props.onClick&&e.props.onClick(t)})),e}return Object(a.a)(l,[{key:"componentDidMount",value:function(){"function"===typeof this.props.onClick&&this.containerElement.current&&this.containerElement.current.addEventListener("click",this.onClick)}},{key:"componentWillUnmount",value:function(){this.containerElement.current&&this.containerElement.current.removeEventListener("click",this.onClick)}},{key:"render",value:function(){return v("div",{"data-blockid":this.props.blockId,id:this.props.blockId,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,role:"function"===typeof this.props.onClick?"button":void 0,ref:this.containerElement,className:m.a.dynamic([["2875387789",[this.getSpacingValue(this.props.spacingTop,this.props.spacingTopSm),this.getSpacingValue(this.props.spacingBottom,this.props.spacingBottomSm),this.props.hasOwnBlockFormattingContext?"grid":"block",this.props.canBreakOverPrintPage?"":"break-inside: avoid;",f.a.responsiveBreakpoints.medium,this.getSpacingValue(this.props.spacingTop,this.props.spacingTopMd),this.getSpacingValue(this.props.spacingBottom,this.props.spacingBottomMd),f.a.responsiveBreakpoints.large,this.getSpacingValue(this.props.spacingTop,this.props.spacingTopLg),this.getSpacingValue(this.props.spacingBottom,this.props.spacingBottomLg)]]])+" "+(g()("layout-wrapper",this.props.className,{"text-cursor":"text"===this.props.cursorType})||"")},this.props.prependedUI,this.props.children,this.props.appendedUI,v(m.a,{id:"2875387789",dynamic:[this.getSpacingValue(this.props.spacingTop,this.props.spacingTopSm),this.getSpacingValue(this.props.spacingBottom,this.props.spacingBottomSm),this.props.hasOwnBlockFormattingContext?"grid":"block",this.props.canBreakOverPrintPage?"":"break-inside: avoid;",f.a.responsiveBreakpoints.medium,this.getSpacingValue(this.props.spacingTop,this.props.spacingTopMd),this.getSpacingValue(this.props.spacingBottom,this.props.spacingBottomMd),f.a.responsiveBreakpoints.large,this.getSpacingValue(this.props.spacingTop,this.props.spacingTopLg),this.getSpacingValue(this.props.spacingBottom,this.props.spacingBottomLg)]},[".layout-wrapper.__jsx-style-dynamic-selector{--small-and-print-margin-top:".concat(this.getSpacingValue(this.props.spacingTop,this.props.spacingTopSm),";--small-and-print-margin-bottom:").concat(this.getSpacingValue(this.props.spacingBottom,this.props.spacingBottomSm),";margin-top:var(--small-and-print-margin-top);margin-bottom:var(--small-and-print-margin-bottom);display:").concat(this.props.hasOwnBlockFormattingContext?"grid":"block",";").concat(this.props.canBreakOverPrintPage?"":"break-inside: avoid;",";}"),".layout-wrapper.text-cursor.__jsx-style-dynamic-selector{cursor:text;}","@media (min-width:".concat(f.a.responsiveBreakpoints.medium,"){.layout-wrapper.__jsx-style-dynamic-selector{margin-top:").concat(this.getSpacingValue(this.props.spacingTop,this.props.spacingTopMd),";margin-bottom:").concat(this.getSpacingValue(this.props.spacingBottom,this.props.spacingBottomMd),";}}"),"@media (min-width:".concat(f.a.responsiveBreakpoints.large,"){.layout-wrapper.__jsx-style-dynamic-selector{margin-top:").concat(this.getSpacingValue(this.props.spacingTop,this.props.spacingTopLg),";margin-bottom:").concat(this.getSpacingValue(this.props.spacingBottom,this.props.spacingBottomLg),";}}"),"body.print .layout-wrapper.__jsx-style-dynamic-selector{margin-top:var(--small-and-print-margin-top);margin-bottom:var(--small-and-print-margin-bottom);}"]))}}]),l}(c.PureComponent),O=n("ukgq"),w=l.a.createElement;function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var C=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(j()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){var e=this.props,t=(e.size,e.horizontalSpacing,e.horizontalSpacingLg,Object(p.a)(e,["size","horizontalSpacing","horizontalSpacingLg"]));return w(x,t,w(O.a,{size:this.props.size,horizontalSpacing:this.props.horizontalSpacing,horizontalSpacingLg:this.props.horizontalSpacingLg},this.props.children))}}]),c}(c.PureComponent),k=n("BQL3"),S=l.a.createElement;function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var P=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(I()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return S("div",{"data-blockid":this.props.blockId,id:this.props.blockId,className:m.a.dynamic([["2654780696",[f.a.spacing.sm,5/12,7/12,k.a.gap.medium,f.a.responsiveBreakpoints.medium,f.a.spacing.sm,f.a.spacing.sm,f.a.spacing.xxs,f.a.spacing.xxs,f.a.spacing.xxs,f.a.responsiveBreakpoints.large,5/8,3/8,k.a.gap.large,.25,.25,k.a.gap.large,.25,.25,k.a.gap.large]]])+" float-layout is-draggable"},this.props.children,S(m.a,{id:"2654780696",dynamic:[f.a.spacing.sm,5/12,7/12,k.a.gap.medium,f.a.responsiveBreakpoints.medium,f.a.spacing.sm,f.a.spacing.sm,f.a.spacing.xxs,f.a.spacing.xxs,f.a.spacing.xxs,f.a.responsiveBreakpoints.large,5/8,3/8,k.a.gap.large,.25,.25,k.a.gap.large,.25,.25,k.a.gap.large]},[".float-layout.__jsx-style-dynamic-selector{position:relative;margin-bottom:".concat(f.a.spacing.sm,";z-index:1;--medium-and-print-width:calc( 100% * ").concat(5/12," - ").concat(7/12," * ").concat(k.a.gap.medium," );}"),"@media (min-width:".concat(f.a.responsiveBreakpoints.medium,"){.float-layout.__jsx-style-dynamic-selector{margin-left:").concat(f.a.spacing.sm,";margin-right:").concat(f.a.spacing.sm,";width:var(--medium-and-print-width);}html:not([dir='rtl']) .float-layout.__jsx-style-dynamic-selector{float:left;margin-left:0;}html[dir='rtl'] .float-layout.__jsx-style-dynamic-selector{float:right;margin-right:0;}}"),"body.print .float-layout.__jsx-style-dynamic-selector{margin-left:".concat(f.a.spacing.xxs,";margin-right:").concat(f.a.spacing.xxs,";margin-bottom:").concat(f.a.spacing.xxs,";width:var(--medium-and-print-width);}"),"html:not([dir='rtl']) body.print .float-layout.__jsx-style-dynamic-selector{float:left;margin-left:0;}","html[dir='rtl'] body.print .float-layout.__jsx-style-dynamic-selector{float:right;margin-right:0;}","@media (min-width:".concat(f.a.responsiveBreakpoints.large,"){.float-layout.__jsx-style-dynamic-selector{width:calc( 100% * ").concat(5/8," - ").concat(3/8," * ").concat(k.a.gap.large," );}html:not([dir='rtl']) .float-layout.__jsx-style-dynamic-selector{margin-left:calc( (100% * ").concat(.25," + ").concat(.25," * ").concat(k.a.gap.large,") * -1 );}html[dir='rtl'] .float-layout.__jsx-style-dynamic-selector{margin-right:calc( (100% * ").concat(.25," + ").concat(.25," * ").concat(k.a.gap.large,") * -1 );}}")]))}}]),c}(c.PureComponent),R=l.a.createElement;function E(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var D=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(E()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){var e=this.props.layoutType,t=C;return"float"===e?t=P:"minimal"===e&&(t=x),R(t,this.props,this.props.children)}}]),c}(c.PureComponent);t.default=D},tJy7:function(e,t,n){"use strict";n.d(t,"a",(function(){return K}));var i={};n.r(i),n.d(i,"survey123",(function(){return T})),n.d(i,"operationsDashboard",(function(){return N})),n.d(i,"arcgisApps",(function(){return _})),n.d(i,"storymaps",(function(){return V}));var a=n("VtSi"),o=n.n(a),r=n("zjfJ"),s=n("8nAU"),c=n("Abkm");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e,t,n){var i,a,r,s;return o.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return i=p({key:t,format:"json",scheme:"https",a:0,dnt:0,url:e},n),a="https://api.embedly.com/1/oembed?".concat(Object(c.f)(i)),l.next=4,o.a.awrap(fetch(a));case 4:return r=l.sent,l.next=7,o.a.awrap(r.json());case 7:return s=l.sent,l.abrupt("return",p({},s,{thumbnail_url:s.thumbnail_url&&0===s.thumbnail_url.search("https://")?s.thumbnail_url:void 0}));case 9:case"end":return l.stop()}}),null,null,null,Promise)},d=n("sHW7"),h=n("7Zgl"),m=function(e){var t="error";if(void 0!==typeof document){var n=e.trim(),i=new d.Sanitizer({whiteList:{iframe:["src","width","height"]}}),a=function(e){var n=e.substring(0,e.indexOf(":")).toLowerCase();return n?i.allowedProtocols.includes(n)?e:void(t="unsupported-protocol"):"https://".concat(e)},o=i.sanitize(n),r=document.createElement("div");if(r.innerHTML=o,0===r.childElementCount&&!/\s/g.test(o)){var s=a(o);if(s)return{src:s,type:"url"}}var c=r.querySelector("iframe");if("error"===t&&null===c)return{type:"invalid-embed-code"};if(c&&a(c.src)){var l=Object(h.b)(c.height),p=Object(h.b)(c.width);return 100!==p[0]||"%"!==p[1]||"number"!==typeof l[0]||"px"!==l[1]&&""!==l[1]?p[1]===l[1]&&"number"===typeof l[0]&&"number"===typeof p[0]?{src:c.src,type:"iframe",aspectRatio:+(p[0]/l[0]).toFixed(4)}:{src:c.src,type:"iframe"}:{src:c.src,type:"iframe",height:l[0]}}}return{type:t}},f=n("9fIP"),y=n("K/z8"),g=n("sRHE"),v=n("8K1b"),b=n("+lMt");function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var O=function(e){Object(v.a)(i,e);var t,n=(t=i,function(){var e,n=Object(g.a)(t);if(x()){var i=Object(g.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(y.a)(this,e)});function i(e){var t;switch(Object(f.a)(this,i),(t=n.call(this)).name="EmbedError",e){case"NoValidCode":t.message="The provided embed code or URL is not valid and cannot be parsed";break;default:t.message="An unknown embed error has occurred."}return t}return i}(Object(b.a)(Error)),w=n("AZ/v"),j=n("HbGN"),C=n("RJSd"),k=n("Z34l"),S=n("fQV3");function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(e,t,n){var i,a,r;return o.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(!n){s.next=14;break}return s.prev=1,s.next=4,o.a.awrap(Object(S.a)(n,{portal:Object(k.e)(t.portalHost)}));case 4:return i=s.sent,a=Object(k.b)(t.portalHost,i,"none"),r=P({},e),i&&(r.title=i.title,r.description=i.snippet),a&&"none"!==a&&(r.thumbnailUrl=a),s.abrupt("return",r);case 12:s.prev=12,s.t0=s.catch(1);case 14:return s.abrupt("return",e);case 15:case"end":return s.stop()}}),null,null,[[1,12]],Promise)};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e,t){var n,i,a,r,s,l,p;return o.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(!/survey123.arcgis.com\/share/.test(e.url)){u.next=10;break}if(n=e.url.match(/share\/([a-zA-Z0-9]{32})|id=([a-zA-Z0-9]{32})/),i=n&&n[1]||n&&n[2],a=Object(C.d)(e.url),r=D({open:"web",hide:"navbar,footer,theme",embed:"fullScreen"},a,{id:i}),s=r.hide,l=Object(j.a)(r,["hide"]),p="https://survey123.arcgis.com/share/?".concat(Object(c.f)(l),"&hide=").concat(s),!i){u.next=10;break}return u.next=9,o.a.awrap(R(D({},e,{url:p,embedSrc:p,embedType:"iframe",isKnownEmbed:!0}),t,i));case 9:return u.abrupt("return",u.sent);case 10:case"end":return u.stop()}}),null,null,null,Promise)};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(e,t){var n,i;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!/arcgis.com\/apps\/opsdashboard/.test(e.url)&&!new RegExp("".concat(t.portalHost,"/apps/opsdashboard")).test(e.url)){a.next=6;break}return n=e.url.match(/index.html#\/([a-zA-Z0-9]{32})/),i=n&&n[1]?n[1]:void 0,a.next=5,o.a.awrap(R(A({},e,{isKnownEmbed:!0,embedType:"iframe"}),t,i));case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}}),null,null,null,Promise)};function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e,t){var n,i,a;return o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(/arcgis.com\/apps/.test(e.url)||new RegExp("".concat(t.portalHost,"/apps/")).test(e.url)||/arcgis.com\/home\/item.html/.test(e.url)||new RegExp("".concat(t.portalHost,"/home/item.html")).test(e.url))){r.next=10;break}if(new RegExp("/".concat(t.portalHost,"/apps/"),"g").test(e.url),n=e.url.match(/id=([a-zA-Z0-9]{32})/),!(i=n&&n[1])){r.next=10;break}return r.next=7,o.a.awrap(R(G({},e),t,i));case 7:if((a=r.sent).title===e.title){r.next=10;break}return r.abrupt("return",a);case 10:return r.abrupt("return");case 11:case"end":return r.stop()}}),null,null,null,Promise)};function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=function(e,t){return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!/storymaps.arcgis.com\/(?:stories|collections)\/[a-zA-Z0-9]{32}/.test(e.url)&&!new RegExp("".concat(t.portalHost,"/apps/storymaps/(?:stories|collections)/[a-zA-Z0-9]{32}")).test(e.url)){n.next=2;break}return n.abrupt("return",W({},e,{isKnownEmbed:!0,contentType:"link",embedType:"iframe",useSmartEmbed:!1}));case 2:case"end":return n.stop()}}),null,null,null,Promise)},F=function(e,t){var n,a;return o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=o.a.keys(i);case 1:if((r.t1=r.t0()).done){r.next=10;break}return n=r.t1.value,r.next=5,o.a.awrap(i[n](e,t));case 5:if("undefined"===typeof(a=r.sent)){r.next=8;break}return r.abrupt("return",a);case 8:r.next=1;break;case 10:return r.abrupt("return",e);case 11:case"end":return r.stop()}}),null,null,null,Promise)},U=function(e){return new Promise((function(t,n){var i=window.document.createElement("img");i.onload=function(){t({isImage:!0,aspectRatio:i.width>0&&i.height>0?+(i.width/i.height).toFixed(4):void 0,height:i.height,width:i.width})},i.onerror=function(){t({isImage:!1})},i.src=e}))},z=function(e,t){var n;return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(/^https:/.test(e)){t.next=3;break}return t.abrupt("return",{});case 3:return t.prev=3,t.next=6,o.a.awrap(U(e));case 6:if(!(n=t.sent).isImage){t.next=9;break}return t.abrupt("return",{contentType:"photo",embedType:"image",aspectRatio:n.aspectRatio,width:n.width,height:n.height,useSmartEmbed:!1});case 9:t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(3),t.abrupt("return",{});case 14:return t.abrupt("return",{});case 15:case"end":return t.stop()}}),null,null,[[3,11]],Promise)};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=function(e,t){var n,i,a,r,c,l,p,d,h;return o.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:if("error"!==(n=m(e)).type&&"invalid-embed-code"!==n.type&&"unsupported-protocol"!==n.type){f.next=3;break}throw new O("NoValidCode");case 3:if(i={url:n.src,addedAsType:n.type,embedSrc:n.src,embedType:"link",contentType:"link",height:n.height,aspectRatio:n.aspectRatio,isKnownEmbed:!1},!t.embedlyApiKey){f.next=25;break}return f.prev=5,f.next=8,o.a.awrap(u(i.url,t.embedlyApiKey));case 8:if(a=f.sent,"link"!==(r=!a.type||"photo"!==a.type&&"video"!==a.type&&"rich"!==a.type?"link":a.type)&&(i.isKnownEmbed=!0,i.supportsEmbedlyCards=!0),"rich"===r||"video"===r?"iframe"===(c=m(a.html)).type&&c.src&&(i.embedSrc=c.src,i.embedType="iframe"):"photo"===a.type&&(i.embedSrc=a.url,i.embedType="image"),"image"!==(i=Y({},i,{contentType:a.type,title:a.title,description:a.description,thumbnailUrl:a.thumbnail_url,providerUrl:a.provider_url,width:a.width,height:a.height})).embedType||a.height&&a.width){f.next=19;break}return f.next=16,o.a.awrap(z(a.url));case 16:l=f.sent,i.height=l.height,i.width=l.width;case 19:f.next=23;break;case 21:f.prev=21,f.t0=f.catch(5);case 23:f.next=26;break;case 25:i.useSmartEmbed=!1;case 26:if("iframe"===n.type&&(i.embedType="iframe",i.useSmartEmbed=!1),"link"!==i.embedType){f.next=43;break}if(!Object(s.a)()){f.next=37;break}return i.embedType="iframe",t.embedlyApiKey||(i.skippedUrlChecks=!0),f.next=33,o.a.awrap(z(i.url,i.embedType));case 33:p=f.sent,i=Y({},i,{},p),f.next=43;break;case 37:return f.next=39,o.a.awrap(Object(w.a)({url:i.url,baseUrl:t.baseUrl,addedAsEmbedCode:"iframe"===n.type}));case 39:d=f.sent,i.url=d.url,i.embedSrc=d.url,d.isSupportedAudioUrl?(i.embedType="audio",i.contentType="audio"):d.isSupportedVideoUrl?(i.embedType="video",i.contentType="video"):d.isSupportedImageUrl?(i.embedType="image",i.contentType="photo",i.useSmartEmbed=!1):i.embedType=d.isEmbedSupported?"iframe":"link";case 43:if("link"!==i.embedType&&"iframe"!==i.embedType){f.next=48;break}return f.next=46,o.a.awrap(F(i,{portalHost:t.portalHost}));case 46:h=f.sent,i=Y({},i,{},h);case 48:if(!i.providerUrl)try{i.providerUrl=new URL(i.url).origin}catch(y){i.providerUrl=i.url}return f.abrupt("return",i);case 50:case"end":return f.stop()}}),null,null,[[5,21]],Promise)}},tSRP:function(e,t,n){"use strict";var i=n("cxan"),a=n("HbGN"),o=n("yFcC"),r=n.n(o),s=n("ERkP"),c=n.n(s),l=n("O94r"),p=n.n(l),u=n("lwzu"),d=n("WXRn"),h=n("NX3A"),m=n("Wkul"),f=n("d1xm"),y=c.a.createElement;t.a=function(e){var t=e.popper,n=e.target,o=e.onCreate,c=e.placement,l=void 0===c?"bottom-start":c,g=e.trigger,v=void 0===g?"click":g,b=e.duration,x=void 0===b?0:b,O=e.offset,w=void 0===O?[0,0]:O,j=e.arrow,C=void 0!==j&&j,k=e.hideOnContentClick,S=void 0===k||k,I=e.shouldFlipRTLPlacement,P=void 0===I||I,R=e.stopClickPropagation,E=Object(a.a)(e,["popper","target","onCreate","placement","trigger","duration","offset","arrow","hideOnContentClick","shouldFlipRTLPlacement","stopClickPropagation"]),D=Object(s.useRef)(null),T=function(){var e;null===(e=D.current)||void 0===e||e.hide()},M=function(e){S&&T(),R&&e.stopPropagation()},A=Object(d.b)()&&P?Object(f.a)(l):l,N={styles:y(r.a,{id:"1043559371",dynamic:["0.6rem","0.6rem",h.a.color.white,"0.6rem","0.6rem","0.6rem","0.6rem","0.6rem","0.6rem",h.a.color.white,"0.6rem","0.6rem","0.6rem",h.a.color.white,"0.6rem","0.6rem","0.6rem","0.6rem","0.6rem",h.a.color.white]},[".tippy-box[data-placement^='top'].__jsx-style-dynamic-selector .tippy-arrow{bottom:-".concat("0.6rem",";border-top:").concat("0.6rem"," solid ").concat(h.a.color.white,";border-right:").concat("0.6rem"," solid transparent;border-left:").concat("0.6rem"," solid transparent;}"),".tippy-box[data-placement^='right'].__jsx-style-dynamic-selector .tippy-arrow{left:-".concat("0.6rem",";border-top:").concat("0.6rem"," solid transparent;border-bottom:").concat("0.6rem"," solid transparent;border-right:").concat("0.6rem"," solid ").concat(h.a.color.white,";}"),".tippy-box[data-placement^='bottom'].__jsx-style-dynamic-selector .tippy-arrow{top:-".concat("0.6rem",";border-right:").concat("0.6rem"," solid transparent;border-bottom:").concat("0.6rem"," solid ").concat(h.a.color.white,";border-left:").concat("0.6rem"," solid transparent;}"),".tippy-box[data-placement^='left'].__jsx-style-dynamic-selector .tippy-arrow{right:-".concat("0.6rem",";border-top:").concat("0.6rem"," solid transparent;border-bottom:").concat("0.6rem"," solid transparent;border-left:").concat("0.6rem"," solid ").concat(h.a.color.white,";}")]),className:r.a.dynamic([["1043559371",["0.6rem","0.6rem",h.a.color.white,"0.6rem","0.6rem","0.6rem","0.6rem","0.6rem","0.6rem",h.a.color.white,"0.6rem","0.6rem","0.6rem",h.a.color.white,"0.6rem","0.6rem","0.6rem","0.6rem","0.6rem",h.a.color.white]]])},L=N.className,G=N.styles;return y("div",{className:"container"},y(u.a,Object(i.a)({trigger:v,placement:A,duration:x,offset:w,content:y("div",{className:p()(E.className,"dropdown-container"),role:S?"button":void 0,onClick:M,"data-testid":"dropdown-container"},t,y(m.a,{triggerKey:"Escape",on:T})),onCreate:function(e){D.current=e,null===o||void 0===o||o(e)},interactive:!0,arrow:C,className:L},E),n),G)}},uEvS:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return m}));var i=n("cxan"),a=n("9fIP"),o=n("MMYH"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("ERkP"),p=n.n(l),u=p.a.createElement;function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var h=p.a.createContext({top:"0rem",bottom:"0rem"}),m=function(e){return function(t){Object(c.a)(p,t);var n,l=(n=p,function(){var e,t=Object(s.a)(n);if(d()){var i=Object(s.a)(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Object(r.a)(this,e)});function p(){return Object(a.a)(this,p),l.apply(this,arguments)}return Object(o.a)(p,[{key:"render",value:function(){var t=this;return u(h.Consumer,null,(function(n){return u(e,Object(i.a)({},t.props,{immersiveOffset:n}))}))}}]),p}(l.PureComponent)}},"uPd/":function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("NX3A"),c=n("A7aE"),l=n("0xoW"),p=n("qzml"),u=n("UvhB"),d=r.a.createElement,h=["themeColor1","themeColor2","themeColor3","accentColor1"];t.a=Object(c.b)((function(e){var t=e.onSelect,n=e.selected,i=e.storyDesign,o=e.placement,r=("number"===typeof n?h[n]:n)||"accentColor1",c=i.storyTheme.themeVariables[r],m=[{id:"",content:d(l.a,{id:"",color:c,isSelected:!0,isSmall:!0,selectedBorderColor:s.a.color.haikuBlack})}];return d("div",{className:"jsx-845033506 theme-color-selector"},d(p.a,{selectedIndex:0,options:m,isFullWidth:!0,placement:o},d(u.a,{flavor:"light",onSelect:function(e){return t("number"===typeof n?h.indexOf(e):e)},selectedColor:c})),d(a.a,{id:"845033506"},[".theme-color-selector.jsx-845033506{width:6rem;}",".theme-color-selector.jsx-845033506 .dropdown-menu-item-text{padding:0.4rem;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]))}))},uUTH:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"pencil",path:"M6.714 22.922L22.148 7.488l2.84 2.84L9.555 25.763zm1.642 3.774l-2.578-2.577-1.958 4.456a.415.415 0 0 0-.016.075.607.607 0 0 0 .104-.026zm17.757-21.84a.943.943 0 0 0-1.333 0l-1.566 1.566 2.84 2.84 1.567-1.566a.943.943 0 0 0 0-1.333z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},uYlf:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},uYly:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.WebMap="Web Map",e.WebScene="Web Scene"}(i||(i={}))},ukgq:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("ERkP"),u=n.n(p),d=n("pao5"),h=n("4yTv"),m=n("OGR5"),f=u.a.createElement;function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var g=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(y()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"layoutGridConfig",{standard:{size:8,sizeMd:12,sizeSm:6,sizePrint:8,pre:2,preMd:0,preSm:0,prePrint:2},wide:{size:12,sizeSm:6,sizePrint:10,prePrint:1},full:{size:12,sizeSm:6,sizePrint:12}}),e}return Object(a.a)(p,[{key:"render",value:function(){return f(m.b,{spacing:this.props.horizontalSpacing,spacingLg:this.props.horizontalSpacingLg,isFullWidth:"full"===this.props.size},f(d.a,null,f(h.a,this.layoutGridConfig[this.props.size],this.props.children)))}}]),p}(p.PureComponent);t.a=g},uoXB:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"chevron-right",path:"M13.707 7l9 9-9 9h-1.414l9-9-9-9z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},utbi:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("NX3A"),h=u.a.createElement;function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(m()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){return h("div",{className:l.a.dynamic([["4110407618",[d.a.spacing.xxs,d.a.spacing.xxxs,d.a.color.platinum]]])+" drawing-tool-divider"},h(l.a,{id:"4110407618",dynamic:[d.a.spacing.xxs,d.a.spacing.xxxs,d.a.color.platinum]},["div.__jsx-style-dynamic-selector{height:calc(100% - ".concat(d.a.spacing.xxs,");margin:").concat(d.a.spacing.xxxs," 0;border-left:1px solid ").concat(d.a.color.platinum,";}")]))}}]),c}(p.PureComponent);t.a=f},v7Aj:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("Z4N4"),c=r.a.createElement,l=Object(o.memo)((function(e){var t=e.children,n=e.size,i=e.onClick,o=e.isDisabled,r=e.className;return c("button",{onClick:i,disabled:o,className:a.a.dynamic([["1797010569",[n||"2.4rem",n||"2.4rem",s.a.center()]]])+" "+(r||"")},c("div",{className:a.a.dynamic([["1797010569",[n||"2.4rem",n||"2.4rem",s.a.center()]]])},t),c(a.a,{id:"1797010569",dynamic:[n||"2.4rem",n||"2.4rem",s.a.center()]},["button.__jsx-style-dynamic-selector>div.__jsx-style-dynamic-selector{width:".concat(n||"2.4rem",";height:").concat(n||"2.4rem",";").concat(s.a.center(),";overflow:hidden;}"),"button[disabled].__jsx-style-dynamic-selector>div.__jsx-style-dynamic-selector{opacity:0.4;}"]))}));t.a=l},vEi1:function(e,t,n){"use strict";n.r(t),n.d(t,"TextViewer",(function(){return j}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("Y/5s"),g=n("A7aE"),v=n("ClPg"),b=n("0bxY"),x=n("F6FI"),O=h.a.createElement;function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var j=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(w()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"renderViewerText",(function(){var e=v.c[t.props.type],n=e.tagName,i=f()("text-viewer",e.className,{"display-small":"small"===t.props.displaySize}),a=O(n,{dangerouslySetInnerHTML:{__html:t.props.text},className:i,style:t.props.style});return t.props.type===v.b.TYPE.QUOTE&&"line-left"!==t.props.storyDesign.storyTheme.themeVariables.blockQuoteStyle?O(x.a,{themeVariables:t.props.storyDesign.storyTheme.themeVariables},a):a})),t}return Object(a.a)(p,[{key:"render",value:function(){return O(d.Fragment,null,this.renderViewerText(),O(u.a,{id:"3276381632"},[".text-viewer{padding:0;margin:0;}","html[dir='rtl'] .text-viewer{text-align:right;}",".text-viewer-h1{tab-size:4;white-space:pre-wrap;}",".text-viewer-h2{tab-size:4;text-align:left;white-space:pre-wrap;}",".text-viewer-bullet-list,.text-viewer-numbered-list,.text-viewer-quote,.text-viewer-h1,.text-viewer-h2,.text-viewer-paragraph{overflow-wrap:break-word;}",".text-viewer-quote{padding:1rem 2rem;}",".text-viewer-bullet-list,.text-viewer-numbered-list{padding-left:1.5em;}","html[dir='rtl'] .text-viewer-bullet-list,html[dir='rtl'] .text-viewer-numbered-list{padding-left:0;padding-right:1.5em;}",".text-viewer-numbered-list{tab-size:4;text-align:left;white-space:pre-wrap;counter-reset:list-0;}",".text-viewer-numbered-list li{counter-increment:list-0;}",".text-viewer-bullet-list li::before{content:'\u2022';}",".text-viewer-numbered-list li::before{content:counter(list-0,decimal) '. ';}",".text-viewer-numbered-list li::before,.text-viewer-bullet-list li::before{display:inline-block;white-space:nowrap;width:1.2em;text-align:left;margin-left:-1.5em;margin-right:0.3em;}","html[dir='rtl'] .text-viewer-numbered-list li::before,html[dir='rtl'] .text-viewer-bullet-list li::before{margin-right:-1.5em;margin-left:0.3em;text-align:right;}"]),Object(b.c)(this.props.storyDesign.storyTheme.themeVariables),Object(b.a)(this.props.customTextColors||[],this.props.storyDesign.storyTheme.themeVariables))}}]),p}(d.PureComponent);t.default=Object(y.d)(Object(g.b)(j))},vKUr:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("zjfJ"),l=n("yFcC"),p=n.n(l),u=n("ERkP"),d=n.n(u),h=n("YQpL");function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){Object(s.a)(a,e);var t,n=(t=a,function(){var e,n=Object(r.a)(t);if(m()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"arrow-up-down",path:"M4.518 1.809l2.808 2.809-.707.707L5 3.705V14H4V3.74L2.415 5.325l-.707-.707zm9.101 8.882L12 12.276V2.016h-1V12.31l-1.585-1.62-.707.708 2.81 2.809 2.808-2.81z",viewBox:"0 0 16 16"})}return a}(n("MEC2").a),y=n("h/OP"),g=d.a.createElement;function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(v()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(a.a)(c,[{key:"render",value:function(){var e={styles:g(p.a,{id:"4246577432",dynamic:["horizontal"===this.props.iconOrientation?"rotate(90deg)":"none"]},[".flip.__jsx-style-dynamic-selector{-webkit-transform:".concat("horizontal"===this.props.iconOrientation?"rotate(90deg)":"none",";-ms-transform:").concat("horizontal"===this.props.iconOrientation?"rotate(90deg)":"none",";transform:").concat("horizontal"===this.props.iconOrientation?"rotate(90deg)":"none",";}")]),className:p.a.dynamic([["4246577432",["horizontal"===this.props.iconOrientation?"rotate(90deg)":"none"]]])};return g(y.a,{onClick:this.props.onToggle,tooltipContent:this.props.intl.formatMessage({id:"builder.panelToggle.switchPlacement"})},g(f,{className:"flip ".concat(e.className)}),e.styles)}}]),c}(u.PureComponent);Object(c.a)(b,"defaultProps",{iconOrientation:"horizontal"});t.a=Object(h.c)(b)},vLiI:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("ERkP"),u=n.n(p),d=n("Wkul"),h=n("O94r"),m=n.n(h),f=u.a.createElement;function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var g=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(y()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"isTabbing",(function(){t.setState({isTabbing:!0})})),Object(l.a)(Object(o.a)(t),"isClicking",(function(){t.setState({isTabbing:!1})})),t.state={isTabbing:!1},t}return Object(a.a)(p,[{key:"componentDidMount",value:function(){"undefined"!==typeof document&&document.addEventListener("mousedown",this.isClicking)}},{key:"componentDidUpdate",value:function(e,t){this.state.isTabbing!==t.isTabbing&&document&&document.body&&(this.state.isTabbing?document.body.classList.add("user-is-tabbing"):document.body.classList.remove("user-is-tabbing"))}},{key:"componentWillUnmount",value:function(){"undefined"!==typeof document&&document.removeEventListener("mousedown",this.isClicking)}},{key:"render",value:function(){var e=m()("page-container",this.props.className);return f("div",{className:e},f(d.a,{triggerKey:"Tab",on:this.isTabbing}),this.props.children)}}]),p}(p.PureComponent);t.a=g},vfFb:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"star-filled",path:"M24.8522575,31.7971166 L15.9990001,26.9252519 L7.14574266,31.7971166 C6.25981697,32.285103 5.67586595,31.8591148 5.83985219,30.8411431 L7.53570995,20.4974305 L0.414307269,13.2296324 C-0.297633016,12.5036526 -0.0696521383,11.7876725 0.926264328,11.6396766 L10.7534401,10.1457181 L15.2090663,0.695980663 C15.6470296,-0.231993554 16.3549702,-0.231993554 16.7929335,0.695980663 L21.2465599,10.1457181 L31.0737357,11.6396766 C32.0696521,11.7876725 32.297633,12.5036526 31.5856927,13.2296324 L24.46429,20.4974305 L26.1601478,30.8411431 C26.3221342,31.8591148 25.7381832,32.2871029 24.8522575,31.7971166 Z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},"wAF/":function(e,t,n){"use strict";var i=n("cxan"),a=n("yFcC"),o=n.n(a),r=n("ERkP"),s=n.n(r),c=n("2SGB"),l=n("NX3A"),p=n("wWnZ"),u=n("hJks"),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.trim().toLowerCase()},h=s.a.createElement,m=Object(r.memo)((function(e){var t=e.id,n=e.searchResult,a=function(e){var t=e.address,n=e.attributes;return t||n.placeName||n.Place_addr||""}(n),r=function(e){var t=e.address,n=e.attributes;return d(t)===d(n.Place_addr)?"":n.Place_addr||""}(n),s={title:a,description:r,id:t},m=e.addSearchedDrawing({title:a,description:r});return h(u.a,Object(i.a)({},s,{placement:"right-end",boundariesSelector:e.boundariesSelector,onClose:e.onClose,shouldIgnoreTheme:!0}),h("div",{className:o.a.dynamic([["172052170",[l.a.spacing.xs]]])+" button-wrapper"},h(p.a,{type:"clear",color:"light",onClick:m},h(c.a,{id:"builder.expressMap.addToMap"}))),h(o.a,{id:"172052170",dynamic:[l.a.spacing.xs]},[".button-wrapper.__jsx-style-dynamic-selector{margin-top:".concat(l.a.spacing.xs,";}")]))}));t.a=m},wHix:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"hide",path:"M15.613 7.999C13.763 10.51 11.068 12.9 8 12.9c-.169 0-.331-.033-.498-.047l1.51-1.51A10.197 10.197 0 0 0 13.957 8c-.201-.23-.473-.518-.78-.82l.95-.95a17.786 17.786 0 0 1 1.487 1.769zm-.753-4.59L3.413 14.857l-1.135-1.135 2-2a14.457 14.457 0 0 1-3.89-3.724c1.849-2.51 4.544-4.9 7.612-4.9a7.08 7.08 0 0 1 3.723 1.179l2.003-2.003zm-4.167 1.898A5.712 5.712 0 0 0 8 4.541c-2.634 0-4.979 2.332-5.956 3.457a12.443 12.443 0 0 0 3.269 2.69L6.6 9.4A1.965 1.965 0 0 1 6 8a2 2 0 0 1 2-2 1.965 1.965 0 0 1 1.4.6z",viewBox:"0 0 16 16"})}return c}(n("MEC2").a)},wVTu:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("KO1s"),c=r.a.createElement;t.a=Object(s.a)((function(e){return e.storyContext.storyLogo?c("a",{href:e.storyContext.storyLogo.link,target:"_blank",rel:"noreferrer noopener",className:a.a.dynamic([["1463167673",[e.maxHeight?e.maxHeight:"3.2rem",e.maxWidth?e.maxWidth:"12rem"]]])+" "+"story-logo".concat(e.className?" ".concat(e.className):"")},c("img",{src:e.storyContext.storyLogo.src,alt:e.storyContext.storyLogo.alt,className:a.a.dynamic([["1463167673",[e.maxHeight?e.maxHeight:"3.2rem",e.maxWidth?e.maxWidth:"12rem"]]])+" story-logo-img"}),c(a.a,{id:"1463167673",dynamic:[e.maxHeight?e.maxHeight:"3.2rem",e.maxWidth?e.maxWidth:"12rem"]},[".story-logo.__jsx-style-dynamic-selector{line-height:0;}",".story-logo-img.__jsx-style-dynamic-selector{max-height:".concat(e.maxHeight?e.maxHeight:"3.2rem",";max-width:").concat(e.maxWidth?e.maxWidth:"12rem",";}")])):null}))},wZmz:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("K/z8"),r=n("sRHE"),s=n("8K1b"),c=n("yFcC"),l=n.n(c),p=n("ERkP"),u=n.n(p),d=n("YQpL"),h=n("O94r"),m=n.n(h),f=n("Z4N4"),y=n("NX3A");function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){Object(s.a)(a,e);var t,n=(t=a,function(){var e,n=Object(r.a)(t);if(g()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function a(e){Object(i.a)(this,a);return n.call(this,e,{iconName:"arrow-double-detached",path:"M2.25,8.33,4,10.06l-.46.46L1,8,3.52,5.48,4,5.94,2.25,7.67H7v.66Zm11.5-.66L12,5.94l.46-.46L15,8l-2.52,2.52L12,10.06l1.73-1.73H9V7.67Z",viewBox:"0 0 16 16"})}return a}(n("MEC2").a),b=n("vKUr"),x=n("h/OP"),O=n("uEvS"),w=n("QSI2"),j=u.a.createElement;function C(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var k=function(e){Object(s.a)(c,e);var t,n=(t=c,function(){var e,n=Object(r.a)(t);if(C()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(o.a)(this,e)});function c(e){var t;return Object(i.a)(this,c),(t=n.call(this,e)).state={hasBeenDocked:t.props.isDocked},t}return Object(a.a)(c,[{key:"componentDidUpdate",value:function(e){e.isDocked||!this.props.isDocked||this.state.hasBeenDocked||this.setState({hasBeenDocked:!0})}},{key:"render",value:function(){return j("div",{className:l.a.dynamic([["3143813917",[this.props.immersiveOffset.top,f.a.gapped("row",y.a.spacing.xxs),this.props.immersiveOffset.top,y.a.responsiveBreakpoints.large,w.c.common,w.c.makeHidden,w.c.makeShown]]])+" "+(m()("sticky-container",{shown:this.props.isDocked,"has-docked":this.state.hasBeenDocked})||"")},j("div",{className:l.a.dynamic([["3143813917",[this.props.immersiveOffset.top,f.a.gapped("row",y.a.spacing.xxs),this.props.immersiveOffset.top,y.a.responsiveBreakpoints.large,w.c.common,w.c.makeHidden,w.c.makeShown]]])+" "+(m()("toggle-buttons-container",{docked:this.props.isDocked})||"")},"function"===typeof this.props.onSizeToggleClicked&&j(x.a,{onClick:this.props.onSizeToggleClicked,tooltipContent:this.props.intl.formatMessage({id:"builder.panelToggle.changeSize"})},j(v,null)),j(b.a,{onToggle:this.props.onPositionToggleClicked})),j(l.a,{id:"3143813917",dynamic:[this.props.immersiveOffset.top,f.a.gapped("row",y.a.spacing.xxs),this.props.immersiveOffset.top,y.a.responsiveBreakpoints.large,w.c.common,w.c.makeHidden,w.c.makeShown]},[".sticky-container.__jsx-style-dynamic-selector{--distance-from-top:calc(50vh - ".concat(this.props.immersiveOffset.top,");display:none;position:absolute;z-index:2;top:var(--distance-from-top);bottom:0;grid-column:1 / 2;pointer-events:none;}"),"html:not([dir='rtl']) .sticky-container.__jsx-style-dynamic-selector{right:0;}","html[dir='rtl'] .sticky-container.__jsx-style-dynamic-selector{left:0;}",".toggle-buttons-container.__jsx-style-dynamic-selector{".concat(f.a.gapped("row",y.a.spacing.xxs)," position:sticky;top:calc(var(--distance-from-top) + ").concat(this.props.immersiveOffset.top,");z-index:1;pointer-events:auto;}"),"html:not([dir='rtl']) .toggle-buttons-container.__jsx-style-dynamic-selector{-webkit-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);transform:translate(50%,-50%);}","html[dir='rtl'] .toggle-buttons-container.__jsx-style-dynamic-selector{-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}",".ReactModal__Body--open .toggle-buttons-container.docked.__jsx-style-dynamic-selector{display:none;}","@media (min-width:".concat(y.a.responsiveBreakpoints.large,"){.sticky-container.__jsx-style-dynamic-selector{").concat(w.c.common,";").concat(w.c.makeHidden,";}.sticky-container.has-docked.__jsx-style-dynamic-selector{display:block;}.sticky-container.shown.__jsx-style-dynamic-selector{").concat(w.c.makeShown,";}}")]))}}]),c}(p.PureComponent);t.a=Object(d.c)(Object(w.b)(Object(O.b)(k)))},wpUe:function(e,t,n){"use strict";n.r(t),n.d(t,"MediaFocusedTourPlaceViewer",(function(){return I}));var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("O94r"),f=n.n(m),y=n("NX3A"),g=n("eCu0"),v=n("KaQd"),b=n("Xls9"),x=n("6Fw+"),O=n("y+Ko"),w=n("l/Z4"),j=n("5mn2"),C=n("D6ti"),k=h.a.createElement;function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var I=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(S()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"isMounted",!0),Object(l.a)(Object(o.a)(t),"onIntersection",(function(e){Object(v.a)({entries:e,node:t.sentinelNode.current,callback:t.props.onThresholdHit})})),Object(l.a)(Object(o.a)(t),"setTopRef",(function(e){"function"===typeof t.props.setTopElement&&e&&t.props.setTopElement(e)})),t.sentinelNode=Object(d.createRef)(),t.state={isTransitioning:!1},t}return Object(a.a)(p,[{key:"componentDidMount",value:function(){this.isMounted=!0,this.intersectionObserver=new IntersectionObserver(this.onIntersection,{threshold:0}),this.sentinelNode.current&&this.intersectionObserver.observe(this.sentinelNode.current)}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.isActive!==e.isActive&&this.props.isTransitionAnimated){this.setState({isTransitioning:!0});var n=Object(O.a)("fade");setTimeout((function(){t.isMounted&&t.setState({isTransitioning:!1})}),1e3*n)}}},{key:"componentWillUnmount",value:function(){this.isMounted=!1,this.intersectionObserver.disconnect()}},{key:"render",value:function(){var e=Object(b.c)();return this.props.isViewportMaxWidth("medium")||this.props.printMode?k(C.a,this.props):k(d.Fragment,null,k("div",{className:u.a.dynamic([["3795834367",["end"===this.props.narrativePanelPosition?"1 / 2":"2 / 3","end"===this.props.narrativePanelPosition?"2 / 3":"1 / 2",y.a.spacing.xl,y.a.spacing.sm,y.a.spacing.xl,y.a.spacing.sm,y.a.spacing.xxxxs,y.a.spacing.xs,y.a.spacing.xs]]])+" media-container"},k(x.a,{isVisible:this.props.isActive,isTransitionAnimated:this.props.isTransitionAnimated,transition:"fade",position:this.props.narrativePanelPosition,showDropShadow:!1},this.props.media&&k("div",{className:u.a.dynamic([["3795834367",["end"===this.props.narrativePanelPosition?"1 / 2":"2 / 3","end"===this.props.narrativePanelPosition?"2 / 3":"1 / 2",y.a.spacing.xl,y.a.spacing.sm,y.a.spacing.xl,y.a.spacing.sm,y.a.spacing.xxxxs,y.a.spacing.xs,y.a.spacing.xs]]])+" "+(f()("media-wrapper",{shown:this.props.isActive||this.state.isTransitioning})||"")},this.props.media))),k("div",{className:u.a.dynamic([["3795834367",["end"===this.props.narrativePanelPosition?"1 / 2":"2 / 3","end"===this.props.narrativePanelPosition?"2 / 3":"1 / 2",y.a.spacing.xl,y.a.spacing.sm,y.a.spacing.xl,y.a.spacing.sm,y.a.spacing.xxxxs,y.a.spacing.xs,y.a.spacing.xs]]])+" "+(f()("content-container",e.className,{selected:this.props.isSelected,animated:this.props.isTransitionAnimated,first:this.props.isFirst,last:this.props.isLast})||"")},k("span",{ref:this.setTopRef,className:u.a.dynamic([["3795834367",["end"===this.props.narrativePanelPosition?"1 / 2":"2 / 3","end"===this.props.narrativePanelPosition?"2 / 3":"1 / 2",y.a.spacing.xl,y.a.spacing.sm,y.a.spacing.xl,y.a.spacing.sm,y.a.spacing.xxxxs,y.a.spacing.xs,y.a.spacing.xs]]])+" top-node"}),k("span",{ref:this.sentinelNode,className:u.a.dynamic([["3795834367",["end"===this.props.narrativePanelPosition?"1 / 2":"2 / 3","end"===this.props.narrativePanelPosition?"2 / 3":"1 / 2",y.a.spacing.xl,y.a.spacing.sm,y.a.spacing.xl,y.a.spacing.sm,y.a.spacing.xxxxs,y.a.spacing.xs,y.a.spacing.xs]]])+" sentinel"}),k("div",{className:u.a.dynamic([["3795834367",["end"===this.props.narrativePanelPosition?"1 / 2":"2 / 3","end"===this.props.narrativePanelPosition?"2 / 3":"1 / 2",y.a.spacing.xl,y.a.spacing.sm,y.a.spacing.xl,y.a.spacing.sm,y.a.spacing.xxxxs,y.a.spacing.xs,y.a.spacing.xs]]])+" number-container"},k(w.a,{isSelected:this.props.isSelected,number:this.props.index+1,hasColor:this.props.hasFeature,color:this.props.accentColor,dimension:y.a.spacing.sm})),k("div",{className:u.a.dynamic([["3795834367",["end"===this.props.narrativePanelPosition?"1 / 2":"2 / 3","end"===this.props.narrativePanelPosition?"2 / 3":"1 / 2",y.a.spacing.xl,y.a.spacing.sm,y.a.spacing.xl,y.a.spacing.sm,y.a.spacing.xxxxs,y.a.spacing.xs,y.a.spacing.xs]]])+" content-wrapper"},this.props.content?this.props.content:k(j.a,null))),this.props.appendedUI,k(u.a,{id:"3795834367",dynamic:["end"===this.props.narrativePanelPosition?"1 / 2":"2 / 3","end"===this.props.narrativePanelPosition?"2 / 3":"1 / 2",y.a.spacing.xl,y.a.spacing.sm,y.a.spacing.xl,y.a.spacing.sm,y.a.spacing.xxxxs,y.a.spacing.xs,y.a.spacing.xs]},[".media-container.__jsx-style-dynamic-selector{position:absolute;height:100%;width:100%;grid-column:".concat("end"===this.props.narrativePanelPosition?"1 / 2":"2 / 3",";grid-row:1;pointer-events:none;}"),".media-wrapper.__jsx-style-dynamic-selector{display:none;height:100%;width:100%;}",".media-wrapper.shown.__jsx-style-dynamic-selector{display:block;}",".content-container.__jsx-style-dynamic-selector{grid-column:".concat("end"===this.props.narrativePanelPosition?"2 / 3":"1 / 2",";padding-bottom:20rem;min-height:35rem;position:relative;opacity:0.6;position:relative;z-index:0;}"),".content-container.animated.__jsx-style-dynamic-selector{-webkit-transition:opacity 0.3s ease-in-out;transition:opacity 0.3s ease-in-out;}","html:not([dir='rtl']) .content-container.__jsx-style-dynamic-selector{padding-left:".concat(y.a.spacing.xl,";padding-right:").concat(y.a.spacing.sm,";}"),"html[dir='rtl'] .content-container.__jsx-style-dynamic-selector{padding-right:".concat(y.a.spacing.xl,";padding-left:").concat(y.a.spacing.sm,";}"),".content-container.first.__jsx-style-dynamic-selector{margin-top:60vh;}",".content-container.last.__jsx-style-dynamic-selector{padding-bottom:50vh;}",".content-container.selected.__jsx-style-dynamic-selector{opacity:1;z-index:1;}",".top-node.__jsx-style-dynamic-selector{position:absolute;top:-50vh;left:0;width:100%;height:0;z-index:0;}",".sentinel.__jsx-style-dynamic-selector{position:absolute;top:25vh;left:0;width:100%;height:0.1rem;z-index:0;}",".number-container.__jsx-style-dynamic-selector{position:absolute;top:".concat(y.a.spacing.xxxxs,";}"),"html:not([dir='rtl']) .number-container.__jsx-style-dynamic-selector{left:".concat(y.a.spacing.xs,";}"),"html[dir='rtl'] .number-container.__jsx-style-dynamic-selector{right:".concat(y.a.spacing.xs,";}"),".content-wrapper.__jsx-style-dynamic-selector>.layout-wrapper:first-child{margin-top:0;}",".content-wrapper.__jsx-style-dynamic-selector>.layout-wrapper:last-child{margin-bottom:0;}"]),e.styles)}}]),p}(d.PureComponent);t.default=Object(g.c)(I)},wpjN:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=function e(t){Object(i.a)(this,e)},m=n.n(d).a.createElement;function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(f()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=n.call(this,e),Object(l.a)(Object(o.a)(t),"initApp",(function(){t.ref.current&&(t.appConnector=new h(t.ref.current),t.props.setApp(t.appConnector))})),t.ref=Object(d.createRef)(),t}return Object(a.a)(p,[{key:"componentDidMount",value:function(){this.initApp()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return m("div",{id:"some-id",style:{backgroundColor:"salmon",position:"absolute",top:0,bottom:0,left:0,right:0},ref:this.ref,className:"jsx-3674702507 core-app"},m(u.a,{id:"3674702507"},[".core-app.jsx-3674702507>*{position:relative;height:100%;}"]))}}]),p}(d.PureComponent);t.a=y},wrGn:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"arrow-left",path:"M16.387 24.799l-.202.201h-4.627l-9-9 9-9h4.627l.202.203L9.59 14H29v4H9.59z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},"wre/":function(e,t,n){"use strict";n.r(t),n.d(t,"FullPageError",(function(){return h}));var i=n("cxan"),a=n("yFcC"),o=n.n(a),r=n("ERkP"),s=n.n(r),c=n("2SGB"),l=n("NX3A"),p=n("AuFC"),u=n("j62V"),d=s.a.createElement,h=Object(r.memo)((function(e){e.detailedError&&console.error(e.detailedError);var t=e.link?e.link:{href:"/",asPath:"".concat(e.config.BASE_URL,"/"),replace:!0};return d(u.a,null,d(u.e,null,e.title||d(c.a,{id:"page.error.unknownTitle"})),d(u.c,null,e.description),d(r.Fragment,null,d("div",{className:o.a.dynamic([["666264867",[l.a.responsiveBreakpoints.small]]])+" full-page-message-button"},d(u.b,Object(i.a)({type:"clear"},t),e.linkText?e.linkText:d(c.a,{id:"page.error.back"})))),d(o.a,{id:"666264867",dynamic:[l.a.responsiveBreakpoints.small]},[".full-page-message-button.__jsx-style-dynamic-selector{display:inline-block;}","@media (max-width:".concat(l.a.responsiveBreakpoints.small,"){.full-page-message-button.__jsx-style-dynamic-selector{display:block;}}")]))}));t.default=Object(p.c)(h)},xNfo:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"drag-handler",path:"M5.5,11 C6.32842712,11 7,11.6715729 7,12.5 C7,13.3284271 6.32842712,14 5.5,14 C4.67157288,14 4,13.3284271 4,12.5 C4,11.6715729 4.67157288,11 5.5,11 Z M10.5,11 C11.3284271,11 12,11.6715729 12,12.5 C12,13.3284271 11.3284271,14 10.5,14 C9.67157288,14 9,13.3284271 9,12.5 C9,11.6715729 9.67157288,11 10.5,11 Z M5.5,6 C6.32842712,6 7,6.67157288 7,7.5 C7,8.32842712 6.32842712,9 5.5,9 C4.67157288,9 4,8.32842712 4,7.5 C4,6.67157288 4.67157288,6 5.5,6 Z M10.5,6 C11.3284271,6 12,6.67157288 12,7.5 C12,8.32842712 11.3284271,9 10.5,9 C9.67157288,9 9,8.32842712 9,7.5 C9,6.67157288 9.67157288,6 10.5,6 Z M5.5,1 C6.32842712,1 7,1.67157288 7,2.5 C7,3.32842712 6.32842712,4 5.5,4 C4.67157288,4 4,3.32842712 4,2.5 C4,1.67157288 4.67157288,1 5.5,1 Z M10.5,1 C11.3284271,1 12,1.67157288 12,2.5 C12,3.32842712 11.3284271,4 10.5,4 C9.67157288,4 9,3.32842712 9,2.5 C9,1.67157288 9.67157288,1 10.5,1 Z",viewBox:"0 0 16 16"})}return c}(n("MEC2").a)},xPLh:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("2SGB"),c=n("A7aE"),l=r.a.createElement,p=Object(o.memo)((function(e){return l("button",{onClick:e.onClick,className:a.a.dynamic([["72306015",[e.storyDesign.storyTheme.themeVariables.accentColor1,e.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.stepDown1()]]])+" read-more"},l(s.a,{id:"builder.map.readMore"}),l(a.a,{id:"72306015",dynamic:[e.storyDesign.storyTheme.themeVariables.accentColor1,e.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.stepDown1()]},[".read-more.__jsx-style-dynamic-selector{color:".concat(e.storyDesign.storyTheme.themeVariables.accentColor1,";display:block;").concat(e.storyDesign.storyTheme.themeVariables.mixins.typography.body.size.stepDown1(),";}")]))}));t.a=Object(c.b)(p)},xWUc:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var i=n("VtSi"),a=n.n(i),o=n("9fIP"),r=n("MMYH"),s=n("pWxA"),c=n("K/z8"),l=n("sRHE"),p=n("8K1b"),u=n("zjfJ"),d=n("yFcC"),h=n.n(d),m=n("ERkP"),f=n.n(m),y=n("2SGB"),g=n("YQpL"),v=n("Z4N4"),b=n("NX3A"),x=n("bAEK"),O=n("liFR"),w=n("uUTH"),j=n("wwFW"),C=n("Pmyh"),k=n("60Hg"),S=n("8DHD"),I=n("LqVs"),P=n("Z34l"),R=n("3Uv7"),E=n("fGyu"),D=n("dV92"),T=n("AuFC"),M=n("ZaeZ"),A=n("+L/X"),N=n("IXx0"),L=f.a.createElement,G=Object(m.memo)(Object(T.c)(Object(g.c)(Object(A.b)((function(e){var t,n=Object(m.useRef)();Object(m.useEffect)((function(){return"function"===typeof e.handleDragDrop&&n.current&&(t=Object(N.a)({element:n.current,draggableItemSelector:".draggable",filteredItemSelector:".undraggable",ghostClass:"sorting-ghost",dragClass:"sorting-drag",id:"sort-tray",handler:e.handleDragDrop,setForceFallback:!1})),function(){t&&"function"===typeof t.destroy&&t.destroy()}}),[]);return L("div",{ref:n,className:h.a.dynamic([["1270986330",[b.a.spacing.xs,b.a.spacing.xs,b.a.spacing.xs,b.a.color.platinum,b.a.font.weight.bold]]])+" grid"},e.thumbnails.map((function(t,n){var i,a,o,r;return(null===(i=t.thumbnail)||void 0===i?void 0:i.includes(".mp4"))?(o="builder.tour.carousel.thumbnail.video",r="".concat(e.config.BASE_URL,"/static/images/builder/immersive/slides-panel/video.png")):(null===(a=t.thumbnail)||void 0===a?void 0:a.includes("https"))?(o="builder.tour.carousel.thumbnail.embed",r=t.thumbnail):(o="builder.tour.carousel.thumbnail.image",r=function(t){if(!t)return"";var n=Object(M.b)({fileName:t,imageNodeWidth:150});return e.storyItem.getItemResourceImageFullUrl(t,n)}(t.thumbnail)),L("span",{key:t.id,className:h.a.dynamic([["1270986330",[b.a.spacing.xs,b.a.spacing.xs,b.a.spacing.xs,b.a.color.platinum,b.a.font.weight.bold]]])+" draggable"},L("img",{alt:e.intl.formatMessage({id:o}),src:r,className:h.a.dynamic([["1270986330",[b.a.spacing.xs,b.a.spacing.xs,b.a.spacing.xs,b.a.color.platinum,b.a.font.weight.bold]]])}),L("span",{className:h.a.dynamic([["1270986330",[b.a.spacing.xs,b.a.spacing.xs,b.a.spacing.xs,b.a.color.platinum,b.a.font.weight.bold]]])+" bold"},n+1))})),L(h.a,{id:"1270986330",dynamic:[b.a.spacing.xs,b.a.spacing.xs,b.a.spacing.xs,b.a.color.platinum,b.a.font.weight.bold]},[".grid.__jsx-style-dynamic-selector{display:grid;grid-template-columns:repeat(3,15.6rem);grid-column-gap:".concat(b.a.spacing.xs,";grid-row-gap:").concat(b.a.spacing.xs,";margin:").concat(b.a.spacing.xs," 0;}"),".draggable.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}","img.__jsx-style-dynamic-selector{width:100%;height:11.6rem;object-fit:contain;}",".grid.__jsx-style-dynamic-selector .draggable:hover{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing;}",".grid.__jsx-style-dynamic-selector .sorting-drag.__jsx-style-dynamic-selector{background-color:".concat(b.a.color.platinum,";}"),".bold.__jsx-style-dynamic-selector{font-weight:".concat(b.a.font.weight.bold,";}")]))}))))),_=f.a.createElement;function B(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var W=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(B()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),t=n.call(this,e),Object(u.a)(Object(s.a)(t),"handleDragDrop",(function(e){"end"===e.type&&e.oldIndex!==e.newIndex&&t.setState((function(t){var n=Object(E.a)(t.media);return n.splice(e.newIndex,0,n.splice(e.oldIndex,1)[0]),{media:n}}))})),Object(u.a)(Object(s.a)(t),"handlePrimaryButtonClick",(function(){t.props.onConfirm(t.state.media)})),t.state={media:e.media},t}return Object(r.a)(i,[{key:"render",value:function(){return _(D.a,{headerTitle:this.props.title,isShowingModal:this.props.isShowing,primaryButtonTitle:this.props.altPrimaryButtonContent?this.props.altPrimaryButtonContent:_(y.a,{id:"builder.common.save"}),onPrimaryButtonClick:this.handlePrimaryButtonClick,secondaryButtonTitle:_(y.a,{id:"common.cancel"}),onSecondaryButtonClick:this.props.onCancel,onCloseButtonClick:this.props.onCancel,closeButtonLabel:this.props.intl.formatMessage({id:"common.close"})},_("div",{className:"description"},this.props.description),_(G,{thumbnails:this.state.media,handleDragDrop:this.handleDragDrop}))}}]),i}(m.PureComponent),V=Object(g.c)(W),F=n("lMwr"),U=f.a.createElement;function z(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var H="button-bar-container",Y=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(z()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),t=n.call(this,e),Object(u.a)(Object(s.a)(t),"renderItems",(function(e){return U("div",{className:h.a.dynamic([["3884864195",[v.a.shadow.sm(),b.a.spacing.xxxxs,b.a.color.white,b.a.color.darkGreen,b.a.spacing.xxxxs,b.a.spacing.xxxxs,b.a.color.ashGrey,b.a.color.platinum,b.a.color.beauBlue,b.a.color.platinum]]])+" button-bar"},e.map((function(e,n){var i=e.tooltipId||"",a=t.props.intl.formatMessage({id:i}),o=e.icon,r="add"===e.id?U(F.a,{items:t.props.mediaPanelInserterItems,source:"sibling",mediaPickerUI:"children",childrenWithCallback:function(e){return U("button",{disabled:t.state.isPublicUser||t.props.thumbnails&&t.props.thumbnails.length>4,onClick:e,"aria-label":a,className:h.a.dynamic([["3884864195",[v.a.shadow.sm(),b.a.spacing.xxxxs,b.a.color.white,b.a.color.darkGreen,b.a.spacing.xxxxs,b.a.spacing.xxxxs,b.a.color.ashGrey,b.a.color.platinum,b.a.color.beauBlue,b.a.color.platinum]]])+" button"},U(o,null))}}):U("button",{disabled:"edit"===e.id&&t.props.isEditDisabled,onClick:e.onClick,"aria-label":a,className:h.a.dynamic([["3884864195",[v.a.shadow.sm(),b.a.spacing.xxxxs,b.a.color.white,b.a.color.darkGreen,b.a.spacing.xxxxs,b.a.spacing.xxxxs,b.a.color.ashGrey,b.a.color.platinum,b.a.color.beauBlue,b.a.color.platinum]]])+" button"},U(o,{className:h.a.dynamic([["3884864195",[v.a.shadow.sm(),b.a.spacing.xxxxs,b.a.color.white,b.a.color.darkGreen,b.a.spacing.xxxxs,b.a.spacing.xxxxs,b.a.color.ashGrey,b.a.color.platinum,b.a.color.beauBlue,b.a.color.platinum]]])}));return U(m.Fragment,{key:e.id},n>0&&U("span",{className:h.a.dynamic([["3884864195",[v.a.shadow.sm(),b.a.spacing.xxxxs,b.a.color.white,b.a.color.darkGreen,b.a.spacing.xxxxs,b.a.spacing.xxxxs,b.a.color.ashGrey,b.a.color.platinum,b.a.color.beauBlue,b.a.color.platinum]]])+" button-separator"}),e.hasNudge?U(x.a,{target:r,placement:"bottom",title:e.nudgeTitle,text:e.nudgeDescription,isShowing:!0,onClick:t.props.onSettingsNudgeClicked}):"add"===e.id?t.state.isPublicUser?U(O.a,{tooltipContent:t.props.intl.formatMessage({id:"publicAccount.disabled"})},r):t.props.thumbnails&&t.props.thumbnails.length>4?U(O.a,{tooltipContent:t.props.intl.formatMessage({id:"builder.tour.carousel.media.full.tooltip"})},r):U(O.a,{tooltipContent:a},r):"edit"===e.id&&t.props.isEditDisabled?U(O.a,{tooltipContent:t.props.intl.formatMessage({id:"builder.mediaAction.mediaToolbarEditButton.disabledTooltip"})},r):U(O.a,{tooltipContent:a},r),"remove"===e.id&&U(R.a,{title:U(y.a,{id:"builder.media.delete.modal.title"}),description:U(y.a,{id:"builder.media.delete.modal.description"}),isShowing:t.state.isDeleteConfirmationModalShowing,onConfirm:t.deleteMedia,onCancel:t.toggleDeleteModal}),"reorder"===e.id&&t.state.isReorderModalShowing&&U(V,{title:U(y.a,{id:"builder.tour.carousel.title.media"}),description:U(y.a,{id:"builder.tour.carousel.media.description"}),isShowing:t.state.isReorderModalShowing,onConfirm:t.reorderMedia,onCancel:t.toggleReorderModal,media:t.props.thumbnails}))})),U(h.a,{id:"3884864195",dynamic:[v.a.shadow.sm(),b.a.spacing.xxxxs,b.a.color.white,b.a.color.darkGreen,b.a.spacing.xxxxs,b.a.spacing.xxxxs,b.a.color.ashGrey,b.a.color.platinum,b.a.color.beauBlue,b.a.color.platinum]},[".button-bar.__jsx-style-dynamic-selector{".concat(v.a.shadow.sm(),";padding:0.5rem ").concat(b.a.spacing.xxxxs,";display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:").concat(b.a.color.white,";}"),".button.__jsx-style-dynamic-selector{color:".concat(b.a.color.darkGreen,";font-size:2rem;padding:").concat(b.a.spacing.xxxxs,";border:1px solid transparent;line-height:0;margin:0 ").concat(b.a.spacing.xxxxs,";}"),"button[disabled].__jsx-style-dynamic-selector{pointer-events:none;color:".concat(b.a.color.ashGrey,";}"),".button-separator.__jsx-style-dynamic-selector{width:1px;-webkit-align-self:stretch;-ms-flex-item-align:stretch;align-self:stretch;background-color:".concat(b.a.color.platinum,";}"),".button.__jsx-style-dynamic-selector:focus{outline:none;border:1px solid ".concat(b.a.color.beauBlue,";}"),".button.__jsx-style-dynamic-selector:hover{background:".concat(b.a.color.platinum,";}")]))})),Object(u.a)(Object(s.a)(t),"toggleDeleteModal",(function(){t.setState({isDeleteConfirmationModalShowing:!t.state.isDeleteConfirmationModalShowing})})),Object(u.a)(Object(s.a)(t),"toggleReorderModal",(function(){t.setState({isReorderModalShowing:!t.state.isReorderModalShowing})})),Object(u.a)(Object(s.a)(t),"reorderMedia",(function(e){t.setState({isReorderModalShowing:!1});for(var n=!1,i=0;i<e.length;i++)t.props.thumbnails&&e[i]!==t.props.thumbnails[i]&&(n=!0);n&&t.props.updateOrder&&t.props.updateOrder(e)})),Object(u.a)(Object(s.a)(t),"deleteMedia",(function(){t.setState({isDeleteConfirmationModalShowing:!1}),t.props.onDeleteClicked()})),t.state={isDeleteConfirmationModalShowing:!1,isReorderModalShowing:!1,isPublicUser:!1},t}return Object(r.a)(i,[{key:"componentDidMount",value:function(){var e;return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.props.userSession){t.next=5;break}return t.next=3,a.a.awrap(Object(P.i)(this.props.userSession));case 3:e=t.sent,this.setState({isPublicUser:e});case 5:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"render",value:function(){var e=[];"function"===typeof this.props.onEditClicked&&e.push({id:"edit",icon:w.a,onClick:this.props.onEditClicked,tooltipId:"builder.common.edit"}),"function"===typeof this.props.onSettingsClicked&&e.push({id:"settings",icon:j.a,onClick:this.props.onSettingsClicked,tooltipId:"builder.mediaToolbar.properties",hasNudge:this.props.showSettingsNudge,nudgeTitle:this.props.nudgeTitle,nudgeDescription:this.props.nudgeDescription}),e.push({id:"remove",icon:C.a,onClick:this.toggleDeleteModal,tooltipId:"builder.mediaToolbar.delete"});var t=[];return this.props.mediaPanelInserterItems&&t.push({id:"add",icon:k.a,onClick:function(){},tooltipId:"builder.tour.addMedia"}),this.props.thumbnails&&this.props.thumbnails.length>=2&&t.push({id:"reorder",icon:S.a,onClick:this.toggleReorderModal,tooltipId:"builder.tour.carousel.title.media"}),U("div",{className:h.a.dynamic([["686661399",[H,b.a.spacing.xs,b.a.spacing.xxxs]]])+" "+(H||"")},this.renderItems(e),t.length>0&&U("div",{className:h.a.dynamic([["686661399",[H,b.a.spacing.xs,b.a.spacing.xxxs]]])+" space"}),t.length>0&&this.renderItems(t),U(h.a,{id:"686661399",dynamic:[H,b.a.spacing.xs,b.a.spacing.xxxs]},[".".concat(H,".__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;top:").concat(b.a.spacing.xs,";left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);z-index:2;}"),".space.__jsx-style-dynamic-selector{width:".concat(b.a.spacing.xxxs,";height:100%;background:transparent;}")]))}}]),i}(m.PureComponent);t.b=Object(I.b)(Object(g.c)(Y))},xkor:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"reset",path:"M32 16.001a13.008 13.008 0 0 1-17.837 12.07l1.094-2.797a10.035 10.035 0 1 0-5.936-6.78l4.114-4.114 2.121 2.121-7.778 7.778L0 16.501l2.121-2.121 4.147 4.147A12.99 12.99 0 1 1 32 16z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},"y+Ko":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return"fade"===e?.5:"fade-slow"===e?1.5:0}},yHNY:function(e,t,n){"use strict";var i=n("yFcC"),a=n.n(i),o=n("ERkP"),r=n.n(o),s=n("Z4N4"),c=n("NX3A"),l=n("AuFC"),p=r.a.createElement;t.a=Object(l.c)((function(e){return p("a",{href:"https://".concat(e.config.PORTAL_HOST,"/home/user.html?user=").concat(e.username),target:"_blank",rel:"noopener noreferrer",className:a.a.dynamic([["3565665772",[s.a.typography.body12(!0),c.a.font.weight.medium,c.a.color.cadet,s.a.lineClamp(1)]]])+" card-owner"},e.username,p(a.a,{id:"3565665772",dynamic:[s.a.typography.body12(!0),c.a.font.weight.medium,c.a.color.cadet,s.a.lineClamp(1)]},[".card-owner.__jsx-style-dynamic-selector{".concat(s.a.typography.body12(!0),";font-weight:").concat(c.a.font.weight.medium,";-webkit-text-decoration:none;text-decoration:none;color:").concat(c.a.color.cadet,";").concat(s.a.lineClamp(1),";}")]))}))},yd9k:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("9fIP"),a=n("K/z8"),o=n("sRHE"),r=n("8K1b");function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(r.a)(c,e);var t,n=(t=c,function(){var e,n=Object(o.a)(t);if(s()){var i=Object(o.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(a.a)(this,e)});function c(e){Object(i.a)(this,c);return n.call(this,e,{iconName:"ellipsis",path:"M8 16a2 2 0 1 1-2-2 2 2 0 0 1 2 2zm8 2a2 2 0 1 0-2-2 2 2 0 0 0 2 2zm10 0a2 2 0 1 0-2-2 2 2 0 0 0 2 2z",viewBox:"0 0 32 32"})}return c}(n("MEC2").a)},yhfQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=function(e){return Object.keys(e.resources).reduce((function(t,n){var i=e.resources[n];return"image"===i.type&&"item-resource"===i.data.provider?t.concat({id:i.data.resourceId,type:"image"}):"video"===i.type&&"item-resource"===i.data.provider?t.concat({id:i.data.resourceId,type:"video"}):"audio"===i.type&&"item-resource"===i.data.provider?t.concat({id:i.data.resourceId,type:"audio"}):"expressmap"===i.type?t.concat({id:i.data.itemId,type:"expressmap"}):t}),[])},a=function(e,t){var n=e&&"string"===typeof e.root?i(e):[],a=t&&"string"===typeof t.root?i(t):[];return{itemResourcesToUnpublish:a.filter((function(e){return-1===n.findIndex((function(t){return t.id===e.id}))})),itemResourcesToPublish:n.filter((function(e){return"expressmap"===e.type||-1===a.findIndex((function(t){return t.id===e.id}))})),draftItemResources:n,publishedItemResources:a}}},ymhH:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("ERkP"),u=n.n(p),d=n("NX3A"),h=n("N8kh"),m=n("JmSK"),f=n("yFcC"),y=n.n(f),g=n("2SGB"),v=n("YQpL"),b=n("Z4N4"),x=n("91F1"),O=n("liFR"),w=n("BVlg"),j=u.a.createElement;function C(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var k=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(C()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"getTooltipStringId",(function(){return e.props.mode===m.c.draft?"component.badge.full.tooltips.".concat(e.props.itemType,".draft"):"component.badge.full.tooltips.".concat(e.props.itemType,".").concat(e.props.sharingLevel,".").concat(e.props.mode)})),Object(l.a)(Object(o.a)(e),"showSharingLevelIcon",(function(){return e.props.mode!==m.c.draft&&"example"!==e.props.mode})),Object(l.a)(Object(o.a)(e),"getTarget",(function(){var t={styles:j(y.a,{id:"1927240729",dynamic:[d.a.spacing.xxxxs,d.a.spacing.xxxxs,d.a.spacing.xxxs,d.a.spacing.xxxxs,d.a.spacing.xxxs,d.a.spacing.xxxxs]},[".icon.__jsx-style-dynamic-selector{line-height:1em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:".concat(d.a.spacing.xxxxs," 0 ").concat(d.a.spacing.xxxxs," ").concat(d.a.spacing.xxxs,";}"),"html[dir='rtl'] .icon.__jsx-style-dynamic-selector{padding:".concat(d.a.spacing.xxxxs," ").concat(d.a.spacing.xxxs," ").concat(d.a.spacing.xxxxs," 0;}"),".icon.__jsx-style-dynamic-selector::before{content:'';}",".icon.__jsx-style-dynamic-selector svg{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}"]),className:y.a.dynamic([["1927240729",[d.a.spacing.xxxxs,d.a.spacing.xxxxs,d.a.spacing.xxxs,d.a.spacing.xxxxs,d.a.spacing.xxxs,d.a.spacing.xxxxs]]])};return j("div",{className:y.a.dynamic([["3380556935",[d.a.color.white,e.props.modeDetails.color,b.a.typography.blockSmall(!0),d.a.spacing.xxxxs,d.a.spacing.xxxs]]])+" badge"},e.showSharingLevelIcon()&&j(x.a,{sharingLevel:e.props.sharingLevel,iconProps:{className:t.className,height:"1.2rem",width:"1.2rem"}}),j("span",{className:y.a.dynamic([["3380556935",[d.a.color.white,e.props.modeDetails.color,b.a.typography.blockSmall(!0),d.a.spacing.xxxxs,d.a.spacing.xxxs]]])+" text"},j(g.a,{id:e.props.modeDetails.statusStrId})),t.styles,j(y.a,{id:"3380556935",dynamic:[d.a.color.white,e.props.modeDetails.color,b.a.typography.blockSmall(!0),d.a.spacing.xxxxs,d.a.spacing.xxxs]},[".badge.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-radius:0.2rem;color:".concat(d.a.color.white,";background-color:").concat(e.props.modeDetails.color,";overflow-wrap:break-word;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}"),".text.__jsx-style-dynamic-selector{display:inline-block;".concat(b.a.typography.blockSmall(!0),";vertical-align:middle;padding:").concat(d.a.spacing.xxxxs," ").concat(d.a.spacing.xxxs,";overflow:hidden;}")]))})),e}return Object(a.a)(p,[{key:"render",value:function(){return j(O.a,{tooltipContent:this.props.intl.formatMessage({id:this.getTooltipStringId()})},this.getTarget())}}]),p}(p.PureComponent);Object(l.a)(k,"defaultProps",{mode:m.c.draft,sharingLevel:h.a.PRIVATE,itemType:w.a.Story});var S=Object(v.c)(k),I=n("Q2nK"),P=u.a.createElement;function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var E=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(R()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"showIndicator",(function(){return e.props.mode!==m.c.published||e.props.alwaysShow})),e}return Object(a.a)(p,[{key:"render",value:function(){return this.showIndicator()?P(I.a,{tooltipContent:this.props.intl.formatMessage({id:this.props.modeDetails.statusStrId}),color:this.props.modeDetails.color}):null}}]),p}(p.PureComponent),D=Object(v.c)(E),T=u.a.createElement;function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var A=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(M()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e,t;Object(i.a)(this,p);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return t=n.call.apply(n,[this].concat(r)),Object(l.a)(Object(o.a)(t),"modeDetails",(e={},Object(l.a)(e,m.c.draft,{statusStrId:"component.badge.draft",color:d.a.color.mangoTango}),Object(l.a)(e,m.c.published,{statusStrId:"component.badge.published",color:d.a.color.haikuGreen}),Object(l.a)(e,m.c.unpublishedChanges,{statusStrId:"component.badge.unpublished",color:d.a.color.deepLilac}),e)),t}return Object(a.a)(p,[{key:"render",value:function(){var e,t,n,i,a,o,r=this.modeDetails[this.props.mode];return"indicator"===this.props.type?T(D,{mode:this.props.mode,modeDetails:r}):T(S,{mode:this.props.mode,modeDetails:r,sharingLevel:(null===(e=this.props.sharingLevel)||void 0===e?void 0:e.access)===h.a.PRIVATE&&(null===(t=this.props.sharingLevel)||void 0===t?void 0:null===(n=t.groups)||void 0===n?void 0:n.length)&&(null===(i=this.props.sharingLevel)||void 0===i?void 0:null===(a=i.groups)||void 0===a?void 0:a.length)>0?h.a.SHARED:null===(o=this.props.sharingLevel)||void 0===o?void 0:o.access,itemType:this.props.itemType})}}]),p}(p.PureComponent);Object(l.a)(A,"defaultProps",{mode:m.c.draft,sharingLevel:{access:h.a.PRIVATE,groups:[]},type:"default"});t.a=A},ysqo:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("ERkP")),o=i(n("J9Yr")),r=n("TZT2"),s=n("op+c"),c=n("dq4L");function l(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[a.default.createElement("meta",{charSet:"utf-8"})];return e||t.push(a.default.createElement("meta",{name:"viewport",content:"width=device-width"})),t}function p(e,t){return"string"===typeof t||"number"===typeof t?e:t.type===a.default.Fragment?e.concat(a.default.Children.toArray(t.props.children).reduce((function(e,t){return"string"===typeof t||"number"===typeof t?e:e.concat(t)}),[])):e.concat(t)}t.defaultHead=l;var u=["name","httpEquiv","charSet","itemProp"];function d(e,t){return e.reduce((function(e,t){var n=a.default.Children.toArray(t.props.children);return e.concat(n)}),[]).reduce(p,[]).reverse().concat(l(t.inAmpMode)).filter(function(){var e=new Set,t=new Set,n=new Set,i={};return function(a){var o=!0;if(a.key&&"number"!==typeof a.key&&a.key.indexOf("$")>0){var r=a.key.slice(a.key.indexOf("$")+1);e.has(r)?o=!1:e.add(r)}switch(a.type){case"title":case"base":t.has(a.type)?o=!1:t.add(a.type);break;case"meta":for(var s=0,c=u.length;s<c;s++){var l=u[s];if(a.props.hasOwnProperty(l))if("charSet"===l)n.has(l)?o=!1:n.add(l);else{var p=a.props[l],d=i[l]||new Set;d.has(p)?o=!1:(d.add(p),i[l]=d)}}}return o}}()).reverse().map((function(e,t){var n=e.key||t;return a.default.cloneElement(e,{key:n})}))}var h=o.default();function m(e){var t=e.children;return a.default.createElement(r.AmpStateContext.Consumer,null,(function(e){return a.default.createElement(s.HeadManagerContext.Consumer,null,(function(n){return a.default.createElement(h,{reduceComponentsToState:d,handleStateChange:n,inAmpMode:c.isInAmpMode(e)},t)}))}))}m.rewind=h.rewind,t.default=m},yyMi:function(e,t,n){"use strict";var i=n("9fIP"),a=n("MMYH"),o=n("pWxA"),r=n("K/z8"),s=n("sRHE"),c=n("8K1b"),l=n("zjfJ"),p=n("yFcC"),u=n.n(p),d=n("ERkP"),h=n.n(d),m=n("YQpL"),f=n("O94r"),y=n.n(f),g=n("uoXB"),v=n("NX3A"),b=n("AtlR"),x=n("Z4N4"),O=n("eCu0"),w=n("Y/5s"),j=n("A7aE"),C=n("uEvS"),k=n("lZMs"),S=n("p1W6"),I=n("WXRn"),P=h.a.createElement;function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var E=function(e){Object(c.a)(p,e);var t,n=(t=p,function(){var e,n=Object(s.a)(t);if(R()){var i=Object(s.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(r.a)(this,e)});function p(){var e;Object(i.a)(this,p);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(o.a)(e),"renderNavDots",(function(){var t=!!e.props.isIntegrated;return P(d.Fragment,null,e.props.showArrows&&!t&&e.renderArrowButton("left"),e.props.items.map((function(n,i){var a=e.props.intl.formatMessage({id:"builder.immersive.slidesPanel.slideNumber"},{currentOfTotal:i+1});return P(S.a,{key:n.id,isSelected:n.id===e.props.selectedItemId,isIntegrated:t,onClick:n.onClick,ariaLabel:a})})),e.props.showArrows&&!t&&e.renderArrowButton("right"))})),Object(l.a)(Object(o.a)(e),"renderNavNumbers",(function(){return P(k.a,{currentIndex:e.props.items.findIndex((function(t){return t.id===e.props.selectedItemId})),totalCount:e.props.items.length,isIntegrated:e.props.isIntegrated})})),Object(l.a)(Object(o.a)(e),"renderArrowButton",(function(t){var n=e.props.items.findIndex((function(t){return t.id===e.props.selectedItemId})),i=n<=0,a=n>=e.props.items.length-1,o=Object(I.b)()?P(g.a,{color:i?v.a.color.ashGrey:v.a.color.white,width:"2rem",height:"2rem"}):P(b.a,{color:i?v.a.color.ashGrey:v.a.color.white,width:"2rem",height:"2rem"}),r=Object(I.b)()?P(b.a,{color:a?v.a.color.ashGrey:v.a.color.white,width:"2rem",height:"2rem"}):P(g.a,{color:a?v.a.color.ashGrey:v.a.color.white,width:"2rem",height:"2rem"});return P(d.Fragment,null,P("button",{onClick:e.handleArrowClick(n,t),className:"jsx-170538316 "+(y()("arrow-button",{"is-disabled":"left"===t&&i||"right"===t&&a})||"")},"left"===t?o:r),P(u.a,{id:"170538316"},["button.arrow-button.is-disabled.jsx-170538316{pointer-events:none;}"]))})),Object(l.a)(Object(o.a)(e),"handleArrowClick",(function(t,n){return function(i){"left"===n&&t>0?e.props.items[t-1].onClick():"right"===n&&t<e.props.items.length-1&&e.props.items[t+1].onClick()}})),e}return Object(a.a)(p,[{key:"render",value:function(){var e=this.props.items.length>this.props.maximumItemCount,t=x.a.hexA(v.a.color.black,.6);return P("div",{"data-testid":"nav-dots-container",className:u.a.dynamic([["3016669782",[this.props.immersiveOffset.bottom,this.props.isFullScreen?"calc(100vh - (".concat(this.props.immersiveOffset.top," + var(--height)))"):"auto",v.a.spacing.sm,this.props.immersiveOffset.bottom,"start"===this.props.position?"flex-start":"flex-end",this.props.isFullScreen?"calc(".concat(this.props.immersiveOffset.bottom," + ").concat(v.a.spacing.sm,")"):"".concat(v.a.spacing.xxs),v.a.spacing.xxs,v.a.spacing.xxxs,v.a.spacing.sm,this.props.isTouchDevice?t:x.a.hexA(v.a.color.black,.3),t,t,v.a.spacing.sm,v.a.spacing.xxs,v.a.spacing.xxs,v.a.spacing.sm,v.a.spacing.xxs,v.a.spacing.xxs,v.a.responsiveBreakpoints.large,this.props.isFullScreen?"calc(".concat(this.props.immersiveOffset.bottom," + ").concat(v.a.spacing.sm,")"):"".concat(v.a.spacing.xs)]]])+" "+(y()("nav-dots-container",{"no-show":this.props.items.length<this.props.minimumItemCount||!this.props.showOnSmallScreens&&this.props.isViewportMaxWidth("medium")})||"")},P("div",{className:u.a.dynamic([["3016669782",[this.props.immersiveOffset.bottom,this.props.isFullScreen?"calc(100vh - (".concat(this.props.immersiveOffset.top," + var(--height)))"):"auto",v.a.spacing.sm,this.props.immersiveOffset.bottom,"start"===this.props.position?"flex-start":"flex-end",this.props.isFullScreen?"calc(".concat(this.props.immersiveOffset.bottom," + ").concat(v.a.spacing.sm,")"):"".concat(v.a.spacing.xxs),v.a.spacing.xxs,v.a.spacing.xxxs,v.a.spacing.sm,this.props.isTouchDevice?t:x.a.hexA(v.a.color.black,.3),t,t,v.a.spacing.sm,v.a.spacing.xxs,v.a.spacing.xxs,v.a.spacing.sm,v.a.spacing.xxs,v.a.spacing.xxs,v.a.responsiveBreakpoints.large,this.props.isFullScreen?"calc(".concat(this.props.immersiveOffset.bottom," + ").concat(v.a.spacing.sm,")"):"".concat(v.a.spacing.xs)]]])+" "+(y()("nav-dots-wrapper",this.props.orientation)||"")},P("ul",{className:u.a.dynamic([["3016669782",[this.props.immersiveOffset.bottom,this.props.isFullScreen?"calc(100vh - (".concat(this.props.immersiveOffset.top," + var(--height)))"):"auto",v.a.spacing.sm,this.props.immersiveOffset.bottom,"start"===this.props.position?"flex-start":"flex-end",this.props.isFullScreen?"calc(".concat(this.props.immersiveOffset.bottom," + ").concat(v.a.spacing.sm,")"):"".concat(v.a.spacing.xxs),v.a.spacing.xxs,v.a.spacing.xxxs,v.a.spacing.sm,this.props.isTouchDevice?t:x.a.hexA(v.a.color.black,.3),t,t,v.a.spacing.sm,v.a.spacing.xxs,v.a.spacing.xxs,v.a.spacing.sm,v.a.spacing.xxs,v.a.spacing.xxs,v.a.responsiveBreakpoints.large,this.props.isFullScreen?"calc(".concat(this.props.immersiveOffset.bottom," + ").concat(v.a.spacing.sm,")"):"".concat(v.a.spacing.xs)]]])+" "+(y()("nav-dots",this.props.orientation,{integrated:this.props.isIntegrated,"is-numbers":e})||"")},e?this.renderNavNumbers():this.renderNavDots())),P(u.a,{id:"3016669782",dynamic:[this.props.immersiveOffset.bottom,this.props.isFullScreen?"calc(100vh - (".concat(this.props.immersiveOffset.top," + var(--height)))"):"auto",v.a.spacing.sm,this.props.immersiveOffset.bottom,"start"===this.props.position?"flex-start":"flex-end",this.props.isFullScreen?"calc(".concat(this.props.immersiveOffset.bottom," + ").concat(v.a.spacing.sm,")"):"".concat(v.a.spacing.xxs),v.a.spacing.xxs,v.a.spacing.xxxs,v.a.spacing.sm,this.props.isTouchDevice?t:x.a.hexA(v.a.color.black,.3),t,t,v.a.spacing.sm,v.a.spacing.xxs,v.a.spacing.xxs,v.a.spacing.sm,v.a.spacing.xxs,v.a.spacing.xxs,v.a.responsiveBreakpoints.large,this.props.isFullScreen?"calc(".concat(this.props.immersiveOffset.bottom," + ").concat(v.a.spacing.sm,")"):"".concat(v.a.spacing.xs)]},[".nav-dots-container.__jsx-style-dynamic-selector{display:block;--height:calc(35rem + ".concat(this.props.immersiveOffset.bottom,");position:absolute;left:0;width:100%;top:").concat(this.props.isFullScreen?"calc(100vh - (".concat(this.props.immersiveOffset.top," + var(--height)))"):"auto",";bottom:0;z-index:2;pointer-events:none;}"),".nav-dots-wrapper.horizontal.__jsx-style-dynamic-selector .arrow-button{line-height:0;}",".nav-dots-container.no-show.__jsx-style-dynamic-selector,.ReactModal__Body--open .nav-dots-container.__jsx-style-dynamic-selector{display:none;}",".nav-dots-wrapper.__jsx-style-dynamic-selector{height:var(--height);padding:0 ".concat(v.a.spacing.sm," ").concat(this.props.immersiveOffset.bottom,";position:-webkit-sticky;position:sticky;top:calc(100vh - var(--height));z-index:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}"),".nav-dots-wrapper.vertical.__jsx-style-dynamic-selector{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-align-items:".concat("start"===this.props.position?"flex-start":"flex-end",";-webkit-box-align:").concat("start"===this.props.position?"flex-start":"flex-end",";-ms-flex-align:").concat("start"===this.props.position?"flex-start":"flex-end",";align-items:").concat("start"===this.props.position?"flex-start":"flex-end",";}"),".nav-dots-wrapper.horizontal.__jsx-style-dynamic-selector{padding-bottom:".concat(this.props.isFullScreen?"calc(".concat(this.props.immersiveOffset.bottom," + ").concat(v.a.spacing.sm,")"):"".concat(v.a.spacing.xxs),";-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;}"),".nav-dots.__jsx-style-dynamic-selector{display:grid;justify-items:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;line-height:0;}",".nav-dots.__jsx-style-dynamic-selector:not(.is-numbers){grid-gap:".concat(v.a.spacing.xxs,";}"),".nav-dots.is-numbers.__jsx-style-dynamic-selector{grid-gap:".concat(v.a.spacing.xxxs,";}"),".nav-dots.vertical.__jsx-style-dynamic-selector{grid-auto-flow:row;margin-bottom:".concat(v.a.spacing.sm,";}"),".nav-dots.horizontal.__jsx-style-dynamic-selector{grid-auto-flow:column;}",".nav-dots.__jsx-style-dynamic-selector:not(.integrated){pointer-events:auto;-webkit-transition:background-color 0.15s;transition:background-color 0.15s;background-color:".concat(this.props.isTouchDevice?t:x.a.hexA(v.a.color.black,.3),";border-radius:1.6rem;}"),".nav-dots.__jsx-style-dynamic-selector:not(.integrated):not(.is-numbers):hover{background-color:".concat(t,";}"),".user-is-tabbing .nav-dots.__jsx-style-dynamic-selector:not(.integrated):focus-within{background-color:".concat(t,";}"),".nav-dots.vertical.__jsx-style-dynamic-selector:not(.integrated){width:".concat(v.a.spacing.sm,";padding-top:").concat(v.a.spacing.xxs,";padding-bottom:").concat(v.a.spacing.xxs,";}"),".nav-dots.horizontal.__jsx-style-dynamic-selector:not(.integrated){height:".concat(v.a.spacing.sm,";padding-left:").concat(v.a.spacing.xxs,";padding-right:").concat(v.a.spacing.xxs,";}"),"@media (min-width:".concat(v.a.responsiveBreakpoints.large,"){.nav-dots-wrapper.horizontal.__jsx-style-dynamic-selector{padding-bottom:").concat(this.props.isFullScreen?"calc(".concat(this.props.immersiveOffset.bottom," + ").concat(v.a.spacing.sm,")"):"".concat(v.a.spacing.xs),";}}")]))}}]),p}(d.PureComponent);Object(l.a)(E,"defaultProps",{isIntegrated:!0,position:"start",showArrows:!1,isFullScreen:!0}),t.default=Object(O.c)(Object(j.b)(Object(w.d)(Object(C.b)(Object(m.c)(E)))))},zfQs:function(e,t,n){"use strict";var i=n("VtSi"),a=n.n(i),o=n("9fIP"),r=n("MMYH"),s=n("pWxA"),c=n("K/z8"),l=n("sRHE"),p=n("8K1b"),u=n("zjfJ"),d=n("yFcC"),h=n.n(d),m=n("ERkP"),f=n.n(m),y=n("YQpL"),g=n("fd07"),v=n("AuFC"),b=f.a.createElement;function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var O=function(e){Object(p.a)(i,e);var t,n=(t=i,function(){var e,n=Object(l.a)(t);if(x()){var i=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),t=n.call(this,e),Object(u.a)(Object(s.a)(t),"isMounted",!0),Object(u.a)(Object(s.a)(t),"getProfileImage",(function(){var e,n;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(e=t.props.userSession)){i.next=11;break}return i.prev=2,i.next=5,a.a.awrap(e.getUser());case 5:n=i.sent,t.isMounted&&t.setState({profileImage:Object(g.c)({basePortalUrl:e.portal,userName:e.username,thumbnailUrl:n.thumbnail||"",token:e.token})}),i.next=11;break;case 9:i.prev=9,i.t0=i.catch(2);case 11:case"end":return i.stop()}}),null,null,[[2,9]],Promise)})),t.state={profileImage:""},t}return Object(r.a)(i,[{key:"render",value:function(){var e=this.state.profileImage?this.state.profileImage:"".concat(this.props.config.BASE_URL,"/static/images/blank-avatar.svg");return b(m.Fragment,null,b("img",{src:e,alt:this.props.intl.formatMessage({id:"component.avatarImage.altText"}),className:"jsx-205096810 image"}),b(h.a,{id:"205096810"},[".image.jsx-205096810{border-radius:50%;overflow:hidden;height:4rem;width:4rem;}"]))}},{key:"componentDidMount",value:function(){this.isMounted=!0,this.getProfileImage()}},{key:"componentWillUnmount",value:function(){this.isMounted=!1}}]),i}(m.PureComponent);t.a=Object(v.c)(Object(y.c)(O))}}]);