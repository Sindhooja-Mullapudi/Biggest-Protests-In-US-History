(window.webpackJsonp=window.webpackJsonp||[]).push([[60,86],{"+JQK":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return p}));var r=n("zjfJ"),a=n("VtSi"),s=n.n(a),i=n("79uv"),o=n("g2IE");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){var t,n,r,a,o;return s.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.itemId,n=e.storyItem,r=Object(i.e)(t,n.version),a=n.userSession,o={resourceName:r,userSession:a},s.abrupt("return",n.fetchItemResource(o));case 5:case"end":return s.stop()}}),null,null,null,Promise)},p=function(e){var t,n,r,a,c,l;return s.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(t=e.itemId,n=e.data,"function"===typeof(r=e.storyItem).upsertItemResource){p.next=3;break}return p.abrupt("return",void 0);case 3:return a=t||"expressmap_".concat(Date.now(),".json"),c={isAdd:!t,resourceName:Object(i.e)(a,"draft"),resource:Object(o.c)(n)},p.next=7,s.a.awrap(r.upsertItemResource(c));case 7:return l=p.sent,p.abrupt("return",u({},l,{itemId:a}));case 9:case"end":return p.stop()}}),null,null,null,Promise)}},RP1v:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return a})),function(e){e.PointRegular="POINT_REGULAR",e.PointNumbered="POINT_NUMBERED",e.Line="LINE",e.Area="AREA"}(r||(r={}));var a,s="POINT";!function(e){e[e.TitleOnly=0]="TitleOnly",e[e.Default=1]="Default",e[e.Hidden=2]="Hidden"}(a||(a={}))},yA8Z:function(e,t,n){"use strict";n.r(t),n.d(t,"ExpressMapBlock",(function(){return I}));var r=n("VtSi"),a=n.n(r),s=n("9fIP"),i=n("MMYH"),o=n("pWxA"),c=n("PRnZ"),u=n("K/z8"),l=n("sRHE"),p=n("8K1b"),d=n("zjfJ"),f=n("ERkP"),b=n.n(f),h=n("NX3A"),y=n("KDNM"),O=n("h0mi"),g=n("O8Oa"),v=n("nmTH"),w=n("RP1v"),m=n("+JQK");function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var I=function(e){Object(p.a)(f,e);var t,r=(t=f,function(){var e,n=Object(l.a)(t);if(j()){var r=Object(l.a)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Object(u.a)(this,e)});function f(e){var t;return Object(s.a)(this,f),t=r.call(this,e),Object(d.a)(Object(o.a)(t),"applyProps",(function(){var e;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if("function"!==typeof t.states.overrideCallback){n.next=5;break}return n.next=3,a.a.awrap(t.getProps());case 3:e=n.sent,t.states.overrideCallback({blockProps:e});case 5:case"end":return n.stop()}}),null,null,null,Promise)})),Object(d.a)(Object(o.a)(t),"updateOverridingData",(function(e){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.data=x({},t.data,{},e),n.next=3,a.a.awrap(t.update());case 3:return n.next=5,a.a.awrap(t.applyProps());case 5:case"end":return n.stop()}}),null,null,null,Promise)})),Object(d.a)(Object(o.a)(t),"setIsEditorOpen",(function(e){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.states.isEditorOpen=e,n.next=3,a.a.awrap(t.update({skipSave:!0}));case 3:return n.next=5,a.a.awrap(t.applyProps());case 5:case"end":return n.stop()}}),null,null,null,Promise)})),Object(d.a)(Object(o.a)(t),"bakeOverridingDataToExternalResource",(function(){var e,n,r,s;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if("undefined"!==typeof t.data.extent||"undefined"!==typeof t.data.center||"undefined"!==typeof t.data.scale){i.next=2;break}return i.abrupt("return");case 2:if("undefined"!==typeof(e=t.getGlobalState("storyItem"))){i.next=5;break}return i.abrupt("return");case 5:return n=t.getResource().data.itemId,i.next=8,a.a.awrap(Object(m.a)({itemId:n,storyItem:e}));case 8:return(r=i.sent).extent=t.data.extent,r.scale=t.data.scale,r.center=t.data.center,i.next=14,a.a.awrap(Object(m.b)({itemId:n,storyItem:e,data:r}));case 14:if(!(null===(s=i.sent)||void 0===s?void 0:s.success)){i.next=27;break}return t.states.bakedData=r,delete t.data.drawingCategoryVisibilities,delete t.data.extent,delete t.data.center,delete t.data.scale,i.next=23,a.a.awrap(t.update());case 23:return i.next=25,a.a.awrap(t.applyProps());case 25:i.next=28;break;case 27:console.error("Upsert from block failed.",s);case 28:case"end":return i.stop()}}),null,null,null,Promise)})),Object(d.a)(Object(o.a)(t),"isPlacedCompactly",(function(){return!(!t.states.isCompact&&!t.states.isInFloat)})),Object(d.a)(Object(o.a)(t),"observe",(function(e){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.awrap(t.states.observer.observe(Object(o.a)(t),e));case 2:case"end":return n.stop()}}),null,null,null,Promise)})),Object(v.a)(Object(o.a)(t),{isOnce:!1,shouldPreload:!1}),t.states=x({},t.states,{heightConstrained:!0,isFullScreen:!1,isMedia:!0,isEditorOpen:!1,dnd:x({},t.states.dnd,{hasDraggedPlaceholder:!0}),showSettingsOption:!0,disableMapConfigurationsInEditor:!1}),"undefined"!==typeof e.resourceId&&(t.data.map=e.resourceId),t.addEventListener("getMediaId",(function(){var e=t.getResource();return e?e.do("getItemId"):null})),t.addEventListener("applyProps",(function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.awrap(t.applyProps());case 2:case"end":return e.stop()}}),null,null,null,Promise)})),t.addEventListener("bakeOverridingDataIntoExternalResource",(function(){t.bakeOverridingDataToExternalResource()})),t}return Object(i.a)(f,[{key:"getBlockComponent",value:function(){return this.mode===O.a.Viewer?b.a.lazy((function(){return Promise.all([n.e(2),n.e(0),n.e(1)]).then(n.bind(null,"m+lF"))})):b.a.lazy((function(){return Promise.all([n.e(2),n.e(0),n.e(1),n.e(85)]).then(n.bind(null,"DQjk"))}))}},{key:"getViewerProps",value:function(){var e,t,n,r=this;return a.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=this.getResource(),n=this.isPlacedCompactly()?w.c.TitleOnly:w.c.Default,s.abrupt("return",{isPlacedCompactly:this.isPlacedCompactly(),popupSummaryType:n,itemId:t?t.do("getItemId"):"",alt:this.data.alt,caption:this.data.caption,customCaptionColors:this.data.customCaptionColors,aspectRatio:this.states.aspectRatio,heightConstrained:this.states.heightConstrained,widthConstrained:this.states.widthConstrained,captionAlignmentLg:this.states.captionAlignment,showCaption:this.states.showCaption,fillParent:this.states.fillParent,isFullScreen:this.states.isFullScreen,isCompact:this.states.isCompact,onToggleFullScreen:function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return r.states.isFullScreen=!r.states.isFullScreen,e.next=3,a.a.awrap(r.update({skipSave:!0}));case 3:return e.next=5,a.a.awrap(r.applyProps());case 5:case"end":return e.stop()}}),null,null,null,Promise)},printMode:this.getGlobalState("printMode"),setView:function(e){var t;null===(t=r.parent)||void 0===t||t.do("setView",{id:r.id,view:e})},isForOverriding:!!(null===(e=this.parent)||void 0===e?void 0:e.do("getHasSameResourceMediaSibling")),drawingCategoryVisibilities:this.data.drawingCategoryVisibilities,extent:this.data.extent,scale:this.data.scale,center:this.data.center,isIntersecting:this.states.observer.isIntersecting,observe:this.observe,blockId:this.id});case 3:case"end":return s.stop()}}),null,this,null,Promise)}},{key:"getBuilderProps",value:function(){var e=this;return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=x,t.t1={},t.next=4,a.a.awrap(this.getViewerProps());case 4:return t.t2=t.sent,t.t3={showSizeOptions:this.states.showSizeOptions,showFullToolbar:this.states.showFullToolbar,size:this.getLayoutSize(),updateSize:function(t){e.updateSize(t)},updateCaption:function(t){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.data.caption=t,t&&Object(y.a)(t)||!e.data.customCaptionColors||delete e.data.customCaptionColors,n.next=4,a.a.awrap(e.update());case 4:return n.next=6,a.a.awrap(e.applyProps());case 6:case"end":return n.stop()}}),null,null,null,Promise)},updateCustomCaptionColors:function(t){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.data.customCaptionColors=t,n.next=3,a.a.awrap(e.update());case 3:return n.next=5,a.a.awrap(e.applyProps());case 5:case"end":return n.stop()}}),null,null,null,Promise)},updateAlt:function(t){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.data.alt=t,n.next=3,a.a.awrap(e.update());case 3:return n.next=5,a.a.awrap(e.applyProps());case 5:case"end":return n.stop()}}),null,null,null,Promise)},onSaveOriginalMap:function(){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(e.update());case 2:return t.next=4,a.a.awrap(e.applyProps());case 4:case"end":return t.stop()}}),null,null,null,Promise)},insertTextBlock:function(){e.parent&&e.insertBlock({type:"text",mode:O.a.Builder,parent:e.parent,index:e.getIndex()+1,data:{text:"",type:"paragraph"},states:{hasFocus:!0}})},delete:function(){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(e.remove());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),null,null,null,Promise)},updateOverridingData:this.updateOverridingData,isEditorOpen:this.states.isEditorOpen,setIsEditorOpen:this.setIsEditorOpen,bakedData:this.states.bakedData,clearBakedData:function(){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e.states.bakedData=void 0,t.next=3,a.a.awrap(e.update({skipSave:!0}));case 3:return t.next=5,a.a.awrap(e.applyProps());case 5:case"end":return t.stop()}}),null,null,null,Promise)},showSettingsOption:this.states.showSettingsOption,shouldDisableAllMapConfigs:this.states.disableMapConfigurationsInEditor},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t3));case 7:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"getLayoutProps",value:function(){return x({},Object(c.a)(Object(l.a)(f.prototype),"getLayoutProps",this).call(this),{spacingTop:h.a.spacing.xl,spacingBottom:h.a.spacing.xl,spacingTopSm:h.a.spacing.sm,spacingBottomSm:h.a.spacing.sm,postInserterProps:this.getBetweenInserterProps(),preInserterProps:this.getBetweenInserterProps(!0),hasDragHandle:!0})}},{key:"getLayoutSize",value:function(){return this.config&&this.config.size?this.config.size:"wide"}},{key:"getResources",value:function(){var e=this.getResource();return e?[e]:[]}},{key:"getResource",value:function(){return this.getResourceById(this.data.map)}}]),f}(g.a);Object(d.a)(I,"type","expressmap"),Object(d.a)(I,"getInstance",(function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new I(Object(g.b)(e,I.type)));case 1:case"end":return t.stop()}}),null,null,null,Promise)})),t.default=I}}]);