(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"+ApL":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a("9fIP"),n=a("K/z8"),o=a("sRHE"),s=a("8K1b");function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(s.a)(c,e);var t,a=(t=c,function(){var e,a=Object(o.a)(t);if(i()){var r=Object(o.a)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return Object(n.a)(this,e)});function c(e){Object(r.a)(this,c);return a.call(this,e,{iconName:"chevron-down-16",path:"M14 4.217v2.766l-6 6-6-6V4.217l6 6z",viewBox:"0 0 16 16"})}return c}(a("MEC2").a)},"/QYh":function(e,t,a){"use strict";var r=a("zQIG"),n=a("8mBC");function o(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return s(e,t)}(e))){var t=0,a=function(){};return{s:a,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,n=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw n}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(a("ERkP")),l=a("D3Vl"),p=a("4smK"),u=[],y=[],d=!1;function f(e){var t=e(),a={loading:!0,loaded:null,error:null};return a.promise=t.then((function(e){return a.loading=!1,a.loaded=e,e})).catch((function(e){throw a.loading=!1,a.error=e,e})),a}function m(e){var t={loading:!1,loaded:{},error:null},a=[];try{Object.keys(e).forEach((function(r){var n=f(e[r]);n.loading?t.loading=!0:(t.loaded[r]=n.loaded,t.error=n.error),a.push(n.promise),n.promise.then((function(e){t.loaded[r]=e})).catch((function(e){t.error=e}))}))}catch(r){t.error=r}return t.promise=Promise.all(a).then((function(e){return t.loading=!1,e})).catch((function(e){throw t.loading=!1,e})),t}function h(e,t){return c.default.createElement((a=e)&&a.__esModule?a.default:a,t);var a}function g(e,t){var a=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:h,webpack:null,modules:null},t),r=null;function n(){if(!r){var t=new b(e,a);r={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return r.promise()}if(!d&&"function"===typeof a.webpack){var s=a.webpack();y.push((function(e){var t,a=o(s);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(-1!==e.indexOf(r))return n()}}catch(i){a.e(i)}finally{a.f()}}))}var i=function(e,t){n();var o=c.default.useContext(p.LoadableContext),s=l.useSubscription(r);return c.default.useImperativeHandle(t,(function(){return{retry:r.retry}})),o&&Array.isArray(a.modules)&&a.modules.forEach((function(e){o(e)})),s.loading||s.error?c.default.createElement(a.loading,{isLoading:s.loading,pastDelay:s.pastDelay,timedOut:s.timedOut,error:s.error,retry:r.retry}):s.loaded?a.render(s.loaded,e):null};return i.preload=function(){return n()},i.displayName="LoadableComponent",c.default.forwardRef(i)}var b=function(){function e(t,a){r(this,e),this._loadFn=t,this._opts=a,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return n(e,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var e=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var t=this._res,a=this._opts;t.loading&&("number"===typeof a.delay&&(0===a.delay?this._state.pastDelay=!0:this._delay=setTimeout((function(){e._update({pastDelay:!0})}),a.delay)),"number"===typeof a.timeout&&(this._timeout=setTimeout((function(){e._update({timedOut:!0})}),a.timeout))),this._res.promise.then((function(){e._update(),e._clearTimeouts()})).catch((function(t){e._update(),e._clearTimeouts()})),this._update({})}},{key:"_update",value:function(e){this._state=Object.assign(Object.assign({},this._state),e),this._callbacks.forEach((function(e){return e()}))}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return Object.assign(Object.assign({},this._state),{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading})}},{key:"subscribe",value:function(e){var t=this;return this._callbacks.add(e),function(){t._callbacks.delete(e)}}}]),e}();function x(e){return g(f,e)}function v(e,t){for(var a=[];e.length;){var r=e.pop();a.push(r(t))}return Promise.all(a).then((function(){if(e.length)return v(e,t)}))}x.Map=function(e){if("function"!==typeof e.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return g(m,e)},x.preloadAll=function(){return new Promise((function(e,t){v(u).then(e,t)}))},x.preloadReady=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(t){var a=function(){return d=!0,t()};v(y,e).then(a,a)}))},window.__NEXT_PRELOADREADY=x.preloadReady,t.default=x},"4smK":function(e,t,a){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var n=r(a("ERkP"));t.LoadableContext=n.createContext(null)},"6pnf":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a("9fIP"),n=a("K/z8"),o=a("sRHE"),s=a("8K1b");function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(s.a)(c,e);var t,a=(t=c,function(){var e,a=Object(o.a)(t);if(i()){var r=Object(o.a)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return Object(n.a)(this,e)});function c(e){Object(r.a)(this,c);return a.call(this,e,{iconName:"check",path:"M15.379 3.566L5.74 13.203.8 8.262l1.767-1.768L5.74 9.668l7.871-7.87z",viewBox:"0 0 16 16"})}return c}(a("MEC2").a)},"6tvD":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();t.default=function(e){return function(t){function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),r(a,[{key:"componentDidMount",value:function(){i.canUseDOM&&(0,c.isTouchDevice)()&&document.addEventListener("touchmove",c.preventTouchMove,c.listenerOptions)}},{key:"componentWillUnmount",value:function(){i.canUseDOM&&(0,c.isTouchDevice)()&&document.removeEventListener("touchmove",c.preventTouchMove,c.listenerOptions)}},{key:"render",value:function(){return s.default.createElement(e,this.props)}}]),a}(o.PureComponent)};var n,o=a("ERkP"),s=(n=o)&&n.__esModule?n:{default:n},i=a("uPah"),c=a("sc5R")},"7Ez9":function(e,t,a){"use strict";var r=a("cxan"),n=a("VtSi"),o=a.n(n),s=a("9fIP"),i=a("MMYH"),c=a("K/z8"),l=a("sRHE"),p=a("8K1b"),u=a("yFcC"),y=a.n(u),d=a("ERkP"),f=a.n(d),m=a("2SGB"),h=a("hnTD"),g=a.n(h),b=a("NX3A"),x=a("WyAy"),v=a("2gSQ"),O=a("PxFk"),j=a("lPey"),w=a("TuFI"),P=f.a.createElement;function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=function(e){Object(p.a)(n,e);var t,a=(t=n,function(){var e,a=Object(l.a)(t);if(k()){var r=Object(l.a)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return Object(c.a)(this,e)});function n(){return Object(s.a)(this,n),a.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.awrap(this.props.storyItem.discardUnpublishedChanges());case 3:return e.next=5,o.a.awrap(this.props.fetchStoryData());case 5:this.next(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),this.props.toast.add({type:"error",title:P(m.a,{id:"builder.common.sorry"}),details:P(m.a,{id:"component.builderWorkflows.discardUnpublished.error.message"})}),this.props.onClose();case 12:case"end":return e.stop()}}),null,this,[[0,8]],Promise)}},{key:"render",value:function(){var e=this;return P("div",{className:y.a.dynamic([["2426437857",[b.a.color.white]]])+" discard-unpublished-workflow"},P(x.a.Controller,{onFinish:this.props.onFinish},(function(t,a){return e.next=a,P(d.Fragment,null,P(g.a,null),P(x.a.Stage,Object(r.a)({order:1,delay:w.a.stageDelay},t),P(O.a,{message:P(m.a,{id:"component.builderWorkflows.discardUnpublished.discarding.message"})})),P(x.a.Stage,Object(r.a)({order:2,delay:w.a.stageDelay,onStageReady:e.next},t),P(j.a,{message:P(m.a,{id:"component.builderWorkflows.discardUnpublished.".concat(e.props.itemType,".success.message")})})))})),P(y.a,{id:"2426437857",dynamic:[b.a.color.white]},[".discard-unpublished-workflow.__jsx-style-dynamic-selector{position:fixed;height:100vh;width:100vw;top:0;right:0;background-color:".concat(b.a.color.white,";z-index:999;}")]))}}]),n}(d.PureComponent);t.a=Object(v.a)(S)},"7Vmz":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a("9fIP"),n=a("K/z8"),o=a("sRHE"),s=a("8K1b");function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var c=function(e){Object(s.a)(c,e);var t,a=(t=c,function(){var e,a=Object(o.a)(t);if(i()){var r=Object(o.a)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return Object(n.a)(this,e)});function c(e){Object(r.a)(this,c);return a.call(this,e,{iconName:"error",path:"M30.845 27.305L18.182 2.99a1.844 1.844 0 0 0-3.268-.005L2.158 27.3A1.844 1.844 0 0 0 3.79 30h25.42a1.844 1.844 0 0 0 1.635-2.695zm-.915 1.29a.847.847 0 0 1-.72.405H3.79a.843.843 0 0 1-.746-1.235L15.799 3.45a.843.843 0 0 1 1.495.001l12.664 24.315a.848.848 0 0 1-.028.828zM17.5 25.5a1 1 0 1 1-1-1 1.002 1.002 0 0 1 1 1zM17 22h-1V11h1z",viewBox:"0 0 32 32"})}return c}(a("MEC2").a)},AU4o:function(e,t,a){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=r(a("ERkP")),o=r(a("/QYh")),s=!1;function i(e,t){if(delete t.webpack,delete t.modules,!s)return e(t);var a=t.loading;return function(){return n.default.createElement(a,{error:null,isLoading:!0,pastDelay:!1,timedOut:!1})}}t.noSSR=i,t.default=function(e,t){var a=o.default,r={loading:function(e){e.error,e.isLoading;return e.pastDelay,null}};if(e instanceof Promise?r.loader=function(){return e}:"function"===typeof e?r.loader=e:"object"===typeof e&&(r=Object.assign(Object.assign({},r),e)),r=Object.assign(Object.assign({},r),t),"object"===typeof e&&!(e instanceof Promise)&&(e.render&&(r.render=function(t,a){return e.render(a,t)}),e.modules)){a=o.default.Map;var n={},s=e.modules();Object.keys(s).forEach((function(e){var t=s[e];"function"!==typeof t.then?n[e]=t:n[e]=function(){return t.then((function(e){return e.default||e}))}})),r.loader=n}if(r.loadableGenerated&&delete(r=Object.assign(Object.assign({},r),r.loadableGenerated)).loadableGenerated,"boolean"===typeof r.ssr){if(!r.ssr)return delete r.ssr,i(a,r);delete r.ssr}return a(r)}},Kec5:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var r=a("9fIP"),n=a("K/z8"),o=a("sRHE"),s=a("8K1b"),i=a("ERkP"),c=a.n(i),l=a("MEC2"),p=c.a.createElement;function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){Object(s.a)(i,e);var t,a=(t=i,function(){var e,a=Object(o.a)(t);if(u()){var r=Object(o.a)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return Object(n.a)(this,e)});function i(e){Object(r.a)(this,i);var t={iconName:"premium-content",path:"",viewBox:"0 0 15 16",children:function(){return p("g",null,p("path",{d:"M6.99666362 16c-.0938668 0-.18609791-.0245145-.26731062-.0714706C-.96919289 11.4932833.03803353 1.64038101.04872596 1.5401133c.0201949-.17274361.12354879-.32481497.2769338-.4074709.15383016-.08258738.33812807-.08616125.49505927-.0096001 1.97552219.82698005 4.25251248.43583939 5.83699472-1.00267708.199772-.16286841.48763917-.16017613.68431519.00640007 1.9428136 1.64268372 3.85034216 1.96695376 5.83485626.99414366.1564227-.07688346.3406017-.0728318.4934751.01085572.1528733.08368751.2552279.236493.274241.40941531.1393673 1.77378958.0154241 3.55838765-.3678194 5.296055-.0403014.18635167-.1771979.33709876-.3591219.39545629-.181924.05835754-.3812369.01545963-.5228596-.1125345-.1416226-.12799413-.2040391-.32163913-.1637377-.5079908.2966502-1.38847396.4283612-2.80696848.392412-4.22617722-2.0443958.71544641-4.31698391.26692093-5.93429578-1.17121216-1.67368359 1.30672147-3.87537294 1.7302833-5.91611866 1.13814515-.06094683 2.22508977.24699501 9.22782916 6.19091398 12.65079806.21067396.1202296.31372888.3669491.2509728.6008434-.06275608.2338943-.27557459.396268-.51828342.3954368z"}),p("path",{d:"M10.5 16C8.01471863 16 6 13.9852814 6 11.5 6 9.01471863 8.01471863 7 10.5 7c2.4852814 0 4.5 2.01471863 4.5 4.5-.0030992 2.4839965-2.0160035 4.4969008-4.5 4.5zm0-7.8c-1.82253967 0-3.3 1.47746033-3.3 3.3 0 1.8225397 1.47746033 3.3 3.3 3.3 1.8225397 0 3.3-1.4774603 3.3-3.3-.0018191-1.82178566-1.4782143-3.29818094-3.3-3.3z"}))}};return a.call(this,e,t)}return i}(l.a)},L28g:function(e,t,a){"use strict";var r=a("VtSi"),n=a.n(r),o=a("cxan"),s=a("9fIP"),i=a("MMYH"),c=a("K/z8"),l=a("sRHE"),p=a("8K1b"),u=a("zjfJ"),y=a("yFcC"),d=a.n(y),f=a("ERkP"),m=a.n(f),h=a("2SGB"),g=a("YQpL"),b=a("hnTD"),x=a.n(b),v=a("NX3A"),O=a("WyAy"),j=a("2gSQ"),w=a("AuFC"),P=a("PxFk"),k=a("BVlg"),S=a("i8u9"),D=a("lPey"),_=a("TuFI"),I=a("EP0r"),R=m.a.createElement;function E(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var T=function(e){Object(p.a)(r,e);var t,a=(t=r,function(){var e,a=Object(l.a)(t);if(E()){var r=Object(l.a)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return Object(c.a)(this,e)});function r(){return Object(s.a)(this,r),a.apply(this,arguments)}return Object(i.a)(r,[{key:"componentDidMount",value:function(){this.props.phase&&this.props.storyItem&&this.runDuplicatePhase()}},{key:"componentDidUpdate",value:function(e){"undefined"!==typeof this.props.storyItem&&"undefined"===typeof e.storyItem&&this.runDuplicatePhase(),this.props.isStoryRendered&&!e.isStoryRendered&&this.runDuplicatePhase(),this.props.phase&&e.phase!==this.props.phase&&this.runDuplicatePhase()}},{key:"render",value:function(){var e=this;return R("div",{className:d.a.dynamic([["1583546157",[v.a.color.white]]])+" duplicate-workflow"},R(O.a.Controller,{onFinish:this.props.onFinish},(function(t,a){return e.next=a,R(f.Fragment,null,R(x.a,null),R(O.a.Stage,Object(o.a)({order:1,delay:_.a.stageDelay},t),R(P.a,{message:R(h.a,{id:"component.duplicateItem.".concat(e.props.itemType,".load")})})),R(O.a.Stage,Object(o.a)({order:2,delay:_.a.stageDelay,onStageReady:e.next},t),R(D.a,{message:R(h.a,{id:"component.duplicateItem.".concat(e.props.itemType,".complete")})})))})),R(d.a,{id:"1583546157",dynamic:[v.a.color.white]},[".duplicate-workflow.__jsx-style-dynamic-selector{position:fixed;height:100vh;width:100vw;top:0;right:0;background-color:".concat(v.a.color.white,";z-index:999;}")]))}},{key:"runDuplicatePhase",value:function(){var e,t,a,r;return n.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if("undefined"!==typeof this.props.storyItem&&this.props.isStoryRendered){o.next=2;break}return o.abrupt("return");case 2:o.prev=2,o.t0=this.props.phase,o.next="cleanup"===o.t0?6:"duplicate"===o.t0?10:19;break;case 6:return o.next=8,n.a.awrap(this.props.storyItem.duplicateStoryCleanup(this.props.intl.formatMessage({id:"component.duplicateItem.titleModifier"})));case 8:return this.next(),o.abrupt("break",21);case 10:return o.next=12,n.a.awrap(this.props.storyItem.duplicateStory());case 12:return e=o.sent,t=e.itemId,"cleanup",a="duplicatePhase=".concat("cleanup"),r=this.props.itemType===k.a.Collection?"collections":"stories",Object(I.b)(this.props.environment.isStatic?{href:"".concat(this.props.config.SITE_ORIGIN).concat(this.props.config.BASE_URL,"/").concat(r,"/").concat(t,"/edit"),isExternal:!0}:{href:"/".concat(r,"/edit?id=").concat(t,"&").concat(a),asPath:"".concat(this.props.config.BASE_URL,"/").concat(r,"/").concat(t,"/edit?").concat(a)}),o.abrupt("break",21);case 19:return this.props.onClose(),o.abrupt("break",21);case 21:o.next=27;break;case 23:o.prev=23,o.t1=o.catch(2),this.props.toast.add({type:"error",title:R(h.a,{id:"duplicate"===this.props.phase?"component.duplicateItem.toast.duplicationFail":"builder.common.sorry"}),details:R(h.a,{id:"duplicate"===this.props.phase?"component.duplicateItem.".concat(this.props.itemType,".toast.duplicationFail.description"):"component.duplicateItem.".concat(this.props.itemType,".toast.duplicationError.description")})}),this.props.onClose();case 27:case"end":return o.stop()}}),null,this,[[2,23]],Promise)}}]),r}(f.PureComponent);Object(u.a)(T,"defaultProps",{phase:"duplicate"}),t.a=Object(w.c)(Object(S.b)(Object(g.c)(Object(j.a)(T))))},"T/ZO":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TouchScrollable=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a("ERkP"),s=a("uPah"),i=a("sc5R");function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}t.TouchScrollable=function(e){function t(){var e,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];return a=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.getScrollableArea=function(e){r.scrollableArea=e},c(r,a)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){s.canUseEventListeners&&(this.scrollableArea.addEventListener("touchstart",i.preventInertiaScroll,i.listenerOptions),this.scrollableArea.addEventListener("touchmove",i.allowTouchMove,i.listenerOptions))}},{key:"componentWillUnmount",value:function(){s.canUseEventListeners&&(this.scrollableArea.removeEventListener("touchstart",i.preventInertiaScroll,i.listenerOptions),this.scrollableArea.removeEventListener("touchmove",i.allowTouchMove,i.listenerOptions))}},{key:"render",value:function(){var e=this.props,t=e.children,a=function(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}(e,["children"]);return"function"===typeof t?t(this.getScrollableArea):(0,o.cloneElement)(t,r({ref:this.getScrollableArea},a))}}]),t}(o.PureComponent)},TuFI:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r={stageDelay:2e3}},WMue:function(e,t,a){"use strict";var r=a("cxan"),n=a("VtSi"),o=a.n(n),s=a("9fIP"),i=a("MMYH"),c=a("K/z8"),l=a("sRHE"),p=a("8K1b"),u=a("yFcC"),y=a.n(u),d=a("ERkP"),f=a.n(d),m=a("2SGB"),h=a("hnTD"),g=a.n(h),b=a("NX3A"),x=a("WyAy"),v=a("2gSQ"),O=a("PxFk"),j=a("lPey"),w=a("TuFI"),P=f.a.createElement;function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=function(e){Object(p.a)(n,e);var t,a=(t=n,function(){var e,a=Object(l.a)(t);if(k()){var r=Object(l.a)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return Object(c.a)(this,e)});function n(){return Object(s.a)(this,n),a.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.awrap(this.props.storyItem.unpublishStory());case 3:this.next(),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),this.props.toast.add({type:"error",title:P(m.a,{id:"builder.common.sorry"}),details:P(m.a,{id:"component.builderWorkflows.unpublish.".concat(this.props.itemType,".error.message")})}),this.props.onClose();case 10:case"end":return e.stop()}}),null,this,[[0,6]],Promise)}},{key:"render",value:function(){var e=this;return P("div",{className:y.a.dynamic([["3254261591",[b.a.color.white]]])+" unpublished-workflow"},P(x.a.Controller,{onFinish:this.props.onFinish},(function(t,a){return e.next=a,P(d.Fragment,null,P(g.a,null),P(x.a.Stage,Object(r.a)({order:1,delay:w.a.stageDelay},t),P(O.a,{message:P(m.a,{id:"component.builderWorkflows.unpublish.unpublishing.".concat(e.props.itemType,".message")})})),P(x.a.Stage,Object(r.a)({order:2,delay:w.a.stageDelay,onStageReady:e.next},t),P(j.a,{message:P(m.a,{id:"component.builderWorkflows.unpublish.success.".concat(e.props.itemType,".message")})})))})),P(y.a,{id:"3254261591",dynamic:[b.a.color.white]},[".unpublished-workflow.__jsx-style-dynamic-selector{position:fixed;height:100vh;width:100vw;top:0;right:0;background-color:".concat(b.a.color.white,";z-index:999;}")]))}}]),n}(d.PureComponent);t.a=Object(v.a)(S)},WyAy:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));var r=a("9fIP"),n=a("MMYH"),o=a("pWxA"),s=a("K/z8"),i=a("sRHE"),c=a("8K1b"),l=a("zjfJ"),p=a("yFcC"),u=a.n(p),y=a("ERkP"),d=a.n(y),f=d.a.createElement;function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){Object(c.a)(p,e);var t,a=(t=p,function(){var e,a=Object(i.a)(t);if(m()){var r=Object(i.a)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return Object(s.a)(this,e)});function p(){var e;Object(r.a)(this,p);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=a.call.apply(a,[this].concat(n)),Object(l.a)(Object(o.a)(e),"state",{currentStage:1}),Object(l.a)(Object(o.a)(e),"delayTimer",!1),Object(l.a)(Object(o.a)(e),"onDelayFinished",!1),Object(l.a)(Object(o.a)(e),"stages",[]),Object(l.a)(Object(o.a)(e),"previousStage",1),Object(l.a)(Object(o.a)(e),"goToNextStage",(function(){e.delayTimer?e.onDelayFinished=e.goToNextStage:e.stages.findIndex(e.findCurrentStage)===e.stages.length-1?e.onFinish():e.setState((function(e){return{currentStage:e.currentStage+1}}))})),Object(l.a)(Object(o.a)(e),"goToPreviousStage",(function(){e.delayTimer?e.onDelayFinished=e.goToPreviousStage:0===e.stages.findIndex(e.findCurrentStage)?e.onClose():e.setState((function(e){return{currentStage:e.currentStage-1}}))})),Object(l.a)(Object(o.a)(e),"goToStage",(function(t){e.delayTimer?e.onDelayFinished=function(){e.goToStage(t)}:e.stages.findIndex(e.findCurrentStage)>=0&&e.setState({currentStage:t})})),Object(l.a)(Object(o.a)(e),"registerStage",(function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.stages=e.stages.concat({order:t,delay:a}),e.stages.sort((function(e,t){return e.order-t.order}))})),Object(l.a)(Object(o.a)(e),"onFinish",(function(){"function"===typeof e.props.onFinish&&e.props.onFinish()})),Object(l.a)(Object(o.a)(e),"onClose",(function(){"function"===typeof e.props.onClose&&e.props.onClose()})),Object(l.a)(Object(o.a)(e),"onStageChange",(function(){var t=e.stages.find(e.findCurrentStage);t&&t.delay>0&&(e.delayTimer=setTimeout((function(){clearTimeout(e.delayTimer),e.delayTimer=!1,"function"===typeof e.onDelayFinished&&(e.onDelayFinished(),e.onDelayFinished=!1)}),t.delay))})),Object(l.a)(Object(o.a)(e),"findCurrentStage",(function(t){return t.order===e.state.currentStage})),e}return Object(n.a)(p,[{key:"componentDidMount",value:function(){this.onStageChange()}},{key:"componentDidUpdate",value:function(e,t){this.previousStage=this.state.currentStage,this.state.currentStage!==t.currentStage&&this.onStageChange()}},{key:"render",value:function(){return f("div",{className:"jsx-1798489856 staged-workflow controller"},this.props.children({currentStage:this.state.currentStage,registerStage:this.registerStage,previousStage:this.previousStage},this.goToNextStage,this.goToPreviousStage,this.goToStage),f(u.a,{id:"1798489856"},[".controller.jsx-1798489856{position:absolute;width:100%;height:100%;top:0;right:0;overflow:hidden;}"]))}}]),p}(y.PureComponent),g=a("Z4N4"),b=d.a.createElement;function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){Object(c.a)(p,e);var t,a=(t=p,function(){var e,a=Object(i.a)(t);if(x()){var r=Object(i.a)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return Object(s.a)(this,e)});function p(){var e;Object(r.a)(this,p);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=a.call.apply(a,[this].concat(n)),Object(l.a)(Object(o.a)(e),"onTransitionEnd",(function(){0===e.position&&"function"===typeof e.props.onStageReady&&e.props.onStageReady()})),e}return Object(n.a)(p,[{key:"componentDidMount",value:function(){this.props.registerStage(this.props.order,this.props.delay),this.props.order===this.props.currentStage&&this.onTransitionEnd()}},{key:"render",value:function(){var e=this.position,t=0===this.position?0:this.position>0?1:-1,a=this.props.order===this.props.previousStage||0===e;return b("div",{onTransitionEnd:this.onTransitionEnd,className:u.a.dynamic([["2145255749",[100*t]],["1743787276",[g.a.center()]]])+" staged-workflow stage"},a&&this.props.children,b(u.a,{id:"2145255749",dynamic:[100*t]},[".stage.__jsx-style-dynamic-selector{-webkit-transform:translateY(".concat(100*t,"%);-ms-transform:translateY(").concat(100*t,"%);transform:translateY(").concat(100*t,"%);}")]),b(u.a,{id:"1743787276",dynamic:[g.a.center()]},[".stage.__jsx-style-dynamic-selector{position:absolute;width:100%;height:100%;right:0;overflow:auto;-webkit-overflow-scrolling:touch;top:0;-webkit-transition:-webkit-transform 400ms ease-in-out;-webkit-transition:transform 400ms ease-in-out;transition:transform 400ms ease-in-out;".concat(g.a.center(),";}")]))}},{key:"position",get:function(){return this.props.order-this.props.currentStage}}]),p}(y.PureComponent),O={Controller:h,Stage:v}},YbHY:function(e,t,a){"use strict";a.d(t,"a",(function(){return K}));var r=a("VtSi"),n=a.n(r),o=a("zjfJ"),s=a("HbGN"),i=a("DeSy"),c=a("fQV3"),l=a("S15H");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=u({},e);return a.isNestedItem=!0,!e.rules.sharing&&t.requiredSharingLevel&&(a.rules.sharing={requiredSharingLevel:t.requiredSharingLevel}),a},d=function(e){var t=[],a=!1,r=!1,n=[],o=[];return"undefined"!==typeof e.currentItem&&(a=e.currentItem.parsedIssues.hasErrors,r=e.currentItem.parsedIssues.hasWarnings,n=e.currentItem.parsedIssues.fixableIssues.map((function(t){return{item:e.currentItem.item,issue:t}})),o=e.currentItem.parsedIssues.unfixableIssues.map((function(t){return{item:e.currentItem.item,issue:t}}))),e.nestedItems.forEach((function(e){e.success?(t=t.concat(e.summary.failures),n=n.concat(e.summary.fixableIssues),o=o.concat(e.summary.unfixableIssues),a=a||e.summary.hasErrors,r=r||e.summary.hasWarnings):t.push(e)})),{hasIssues:n.length>0||o.length>0,hasFailures:t.length>0,hasErrors:!!a,hasWarnings:!!r,failures:t,fixableIssues:n,unfixableIssues:o}},f=function(e){var t=[],a=[],r=!1,n=!1;return e.forEach((function(e){e.hasFix?t.push(e):a.push(e),"warning"===e.severity?n=!0:r=!0})),{fixableIssues:t,unfixableIssues:a,hasIssues:e.length>0,hasErrors:r,hasWarnings:n}},m=a("fGyu"),h=a("zygG");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x=function(e){var t;return n.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.item.layers?e.item.layers:[],a.abrupt("return",Promise.all(t.reduce((function(t,a){var r=v(b({},e,{item:{type:i.d.MAP_LAYER,itemId:a.layerItemId,itemInfo:{mapLayerData:a}}}));return t.concat(r)}),[])));case 2:case"end":return a.stop()}}),null,null,null,Promise)},v=function(e){var t,a,r,o,s,i,p,u,m,g,v,O;return n.a.async((function(j){for(;;)switch(j.prev=j.next){case 0:if(j.prev=0,t=[],a=e.item.itemInfo||{},!e.item.itemId){j.next=14;break}return j.next=6,n.a.awrap(Promise.all([Object(c.a)(e.item.itemId,{authentication:e.userSession})]));case 6:return o=j.sent,s=Object(h.a)(o,1),i=s[0],j.next=11,n.a.awrap(Object(l.b)(i,e));case 11:(p=j.sent).hasIssue&&t.push(p.issue),r=p.sharingLevel;case 14:return u=y(e,{requiredSharingLevel:r}),j.next=17,n.a.awrap(x(u));case 17:return m=j.sent,g=b({},e.item,{itemInfo:a}),v=f(t),O=d({currentItem:{item:g,parsedIssues:v},nestedItems:m}),j.abrupt("return",b({success:!0,item:g},v,{nestedItems:m,summary:O}));case 24:return j.prev=24,j.t0=j.catch(0),j.abrupt("return",{success:!1,item:e.item,failure:j.t0});case 27:case"end":return j.stop()}}),null,null,[[0,24]],Promise)};function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var j=function(e,t){return Promise.all(e.reduce((function(e,a){var r=v(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,{item:{type:i.d.MAP_LAYER,layerType:a.layerType,itemId:a.itemId,itemInfo:{mapLayerData:a}}}));return e.concat(r)}),[]))};function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k=function(e){var t,a,r,o,s,i,p,u,g,b,x,v;return n.a.async((function(O){for(;;)switch(O.prev=O.next){case 0:return O.prev=0,t=[],O.next=4,n.a.awrap(Promise.all([Object(c.a)(e.item.itemId,{authentication:e.userSession}),Object(c.b)(e.item.itemId,{authentication:e.userSession})]));case 4:return a=O.sent,r=Object(h.a)(a,2),o=r[0],s=r[1],O.next=10,n.a.awrap(Object(l.b)(o,e));case 10:return(i=O.sent).hasIssue&&t.push(i.issue),p=[].concat(Object(m.a)(s.baseMap.baseMapLayers),Object(m.a)(s.operationalLayers)),u=y(e,{requiredSharingLevel:i.sharingLevel}),O.next=16,n.a.awrap(j(p,u));case 16:return g=O.sent,b=P({},e.item,{itemInfo:{itemDetails:o,itemData:s}}),x=f(t),v=d({currentItem:{item:b,parsedIssues:x},nestedItems:g}),O.abrupt("return",P({success:!0,item:b},x,{nestedItems:g,summary:v}));case 23:return O.prev=23,O.t0=O.catch(0),O.abrupt("return",{success:!1,item:e.item,failure:O.t0});case 26:case"end":return O.stop()}}),null,null,[[0,23]],Promise)};function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var D=function(e,t){return Promise.all(e.reduce((function(e,a){var r=v(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,{item:{type:i.d.MAP_LAYER,layerType:a.layerType,itemId:a.itemId,itemInfo:{mapLayerData:a}}}));return e.concat(r)}),[]))};function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R=function(e){var t,a,r,o,s,i,p,u,g,b,x,v,O,j;return n.a.async((function(w){for(;;)switch(w.prev=w.next){case 0:return w.prev=0,t=[],w.next=4,n.a.awrap(Promise.all([Object(c.a)(e.item.itemId,{authentication:e.userSession}),Object(c.b)(e.item.itemId,{authentication:e.userSession})]));case 4:return a=w.sent,r=Object(h.a)(a,2),o=r[0],s=r[1],w.next=10,n.a.awrap(Object(l.b)(o,e));case 10:return(i=w.sent).hasIssue&&t.push(i.issue),p=s.ground&&s.ground.layers?s.ground.layers:[],u=s.baseMap.elevationLayers?s.baseMap.elevationLayers:[],g=[].concat(Object(m.a)(s.baseMap.baseMapLayers),Object(m.a)(s.operationalLayers),Object(m.a)(p),Object(m.a)(u)),b=y(e,{requiredSharingLevel:i.sharingLevel}),w.next=18,n.a.awrap(D(g,b));case 18:return x=w.sent,v=I({},e.item,{itemInfo:{itemDetails:o,itemData:s}}),O=f(t),j=d({currentItem:{item:v,parsedIssues:O},nestedItems:x}),w.abrupt("return",I({success:!0,item:v},O,{nestedItems:x,summary:j}));case 25:return w.prev=25,w.t0=w.catch(0),w.abrupt("return",{success:!1,item:e.item,failure:w.t0});case 28:case"end":return w.stop()}}),null,null,[[0,25]],Promise)},E=a("I/HP");function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var F=function(e,t){return t.item.checkDraftData?Object(E.a)({itemDetails:e,portalHost:t.portalHost,userSession:t.userSession}):Object(c.b)(t.item.itemId,{authentication:t.userSession})},M=function(e,t,a){return"story"===e?Promise.all(Object.keys(t.resources).reduce((function(e,r){var n=t.resources[r];switch(n.type){case"webmap":var o=k(C({},a,{item:{type:i.d.WEBMAP,itemId:n.data.itemId}}));return e.concat(o);case"webscene":var s=R(C({},a,{item:{type:i.d.WEBSCENE,itemId:n.data.itemId}}));return e.concat(s);default:return e}}),[])):[]},L=a("Bx5b");function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var W=function(e){var t,a,r,o,s,i,p,u,m,h;return n.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,t=[],g.next=4,n.a.awrap(Object(c.a)(e.item.itemId,{authentication:e.userSession}));case 4:return a=g.sent,g.next=7,n.a.awrap(F(a,e));case 7:return r=g.sent,g.next=10,n.a.awrap(Object(l.b)(a,e));case 10:return(o=g.sent).hasIssue&&t.push(o.issue),s=a.typeKeywords&&a.typeKeywords.includes(L.b)?"collection":"story",i=y(e,{requiredSharingLevel:o.sharingLevel}),g.next=16,n.a.awrap(M(s,r,i));case 16:return p=g.sent,u=A({},e.item,{itemInfo:{itemDetails:a,storyData:r}}),m=f(t),h=d({currentItem:{item:u,parsedIssues:m},nestedItems:p}),g.abrupt("return",A({success:!0,item:u},m,{nestedItems:p,summary:h}));case 23:return g.prev=23,g.t0=g.catch(0),g.abrupt("return",{success:!1,item:e.item,failure:g.t0});case 26:case"end":return g.stop()}}),null,null,[[0,23]],Promise)};function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var B=function(e){var t,a;return n.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t=G({},e)).rules.sharing||!t.rules.sharing.appProxy){r.next=8;break}return r.next=4,n.a.awrap(Object(c.a)(t.rules.sharing.appProxy.itemId,{authentication:t.userSession}));case 4:a=r.sent,t.rules.sharing.appProxy.isAppAdmin="admin"===a.itemControl,t.rules.sharing.appProxy.isRegisteredApp=Object(l.d)(a),t.rules.sharing.appProxy.existingAppProxy={proxies:a.appProxies?a.appProxies:[],referrers:a.serviceProxyParams&&a.serviceProxyParams.referrers?a.serviceProxyParams.referrers:[]};case 8:return r.abrupt("return",t);case 9:case"end":return r.stop()}}),null,null,null,Promise)};function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var K=function(e){var t,a,r,o;return n.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,n.a.awrap(B(e));case 2:a=c.sent,c.t0=a.item.type,c.next=c.t0===i.d.STORY_MAP?6:c.t0===i.d.WEBMAP?10:c.t0===i.d.WEBSCENE?14:c.t0===i.d.MAP_LAYER?18:22;break;case 6:return c.next=8,n.a.awrap(W(a));case 8:return t=c.sent,c.abrupt("break",24);case 10:return c.next=12,n.a.awrap(k(a));case 12:return t=c.sent,c.abrupt("break",24);case 14:return c.next=16,n.a.awrap(R(a));case 16:return t=c.sent,c.abrupt("break",24);case 18:return c.next=20,n.a.awrap(v(a));case 20:return t=c.sent,c.abrupt("break",24);case 22:return t={success:!1,item:e.item,failure:new Error('The type "'.concat(a.item.type,'" is not a valid type.'))},c.abrupt("break",24);case 24:return a.item,r=Object(s.a)(a,["item"]),o=d({nestedItems:[t]}),c.abrupt("return",z({},o,{itemResults:t,fixOptions:r}));case 27:case"end":return c.stop()}}),null,null,null,Promise)}},hnTD:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("tIbH");Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=r,e&&e.__esModule?e:{default:e}).default;var e}});var n=a("T/ZO");Object.defineProperty(t,"TouchScrollable",{enumerable:!0,get:function(){return n.TouchScrollable}})},itnt:function(e,t,a){"use strict";var r=a("9fIP"),n=a("MMYH"),o=a("pWxA"),s=a("K/z8"),i=a("sRHE"),c=a("8K1b"),l=a("zjfJ"),p=a("ERkP");function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){Object(c.a)(p,e);var t,a=(t=p,function(){var e,a=Object(i.a)(t);if(u()){var r=Object(i.a)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return Object(s.a)(this,e)});function p(){var e;Object(r.a)(this,p);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=a.call.apply(a,[this].concat(n)),Object(l.a)(Object(o.a)(e),"onKeyDownHandler",(function(t){"Backspace"===t.key&&(!e.isInWhiteList(t.target)&&t.preventDefault())})),Object(l.a)(Object(o.a)(e),"isInWhiteList",(function(e){var t=e.nodeName.toLowerCase();return"input"===t||"textarea"===t||"true"===e.contentEditable})),e}return Object(n.a)(p,[{key:"render",value:function(){return!1}},{key:"componentDidMount",value:function(){"undefined"!==typeof document&&document.addEventListener("keydown",this.onKeyDownHandler)}},{key:"componentWillUnmount",value:function(){"undefined"!==typeof document&&document.removeEventListener("keydown",this.onKeyDownHandler)}}]),p}(p.PureComponent);t.a=y},lPey:function(e,t,a){"use strict";var r=a("yFcC"),n=a.n(r),o=a("ERkP"),s=a.n(o),i=a("2SGB"),c=a("NX3A"),l=a("Z4N4"),p=a("6pnf"),u=s.a.createElement;t.a=function(e){var t={styles:u(n.a,{id:"1338955884",dynamic:[c.a.spacing.xxxxs]},[".icon-check.__jsx-style-dynamic-selector{margin-top:".concat(c.a.spacing.xxxxs,";}")]),className:n.a.dynamic([["1338955884",[c.a.spacing.xxxxs]]])};return u("div",{className:n.a.dynamic([["3689638502",[l.a.typography.h3(),c.a.color.cadet,c.a.spacing.xxs,l.a.center(),c.a.spacing.xl,c.a.spacing.xl,c.a.color.haikuGreen,c.a.color.white]]])+" finish-stage-wrapper"},u("div",{className:n.a.dynamic([["3689638502",[l.a.typography.h3(),c.a.color.cadet,c.a.spacing.xxs,l.a.center(),c.a.spacing.xl,c.a.spacing.xl,c.a.color.haikuGreen,c.a.color.white]]])+" icon-container"},u(p.a,{className:t.className,title:u(i.a,{id:"component.builderWorkflows.shared.finishedStage.iconTitle",tagName:"title"}),height:c.a.spacing.md,width:"auto"})),u("h3",{className:n.a.dynamic([["3689638502",[l.a.typography.h3(),c.a.color.cadet,c.a.spacing.xxs,l.a.center(),c.a.spacing.xl,c.a.spacing.xl,c.a.color.haikuGreen,c.a.color.white]]])},e.message),t.styles,u(n.a,{id:"3689638502",dynamic:[l.a.typography.h3(),c.a.color.cadet,c.a.spacing.xxs,l.a.center(),c.a.spacing.xl,c.a.spacing.xl,c.a.color.haikuGreen,c.a.color.white]},[".finish-stage-wrapper.__jsx-style-dynamic-selector{text-align:center;}","h3.__jsx-style-dynamic-selector{".concat(l.a.typography.h3(),";color:").concat(c.a.color.cadet,";margin:").concat(c.a.spacing.xxs," 0 0;}"),".icon-container.__jsx-style-dynamic-selector{".concat(l.a.center()," width:").concat(c.a.spacing.xl,";height:").concat(c.a.spacing.xl,";background-color:").concat(c.a.color.haikuGreen,";border-radius:50%;color:").concat(c.a.color.white,";font-size:5rem;text-align:center;margin:auto;}")]))}},lU4A:function(e,t,a){"use strict";var r=a("cxan"),n=a("VtSi"),o=a.n(n),s=a("9fIP"),i=a("MMYH"),c=a("pWxA"),l=a("K/z8"),p=a("sRHE"),u=a("8K1b"),y=a("zjfJ"),d=a("yFcC"),f=a.n(d),m=a("ERkP"),h=a.n(m),g=a("2SGB"),b=a("YQpL"),x=a("hnTD"),v=a.n(x),O=a("NX3A"),j=a("WyAy"),w=a("2gSQ"),P=a("AuFC"),k=a("YbHY"),S=a("DeSy"),D=a("fQV3"),_=a("S15H"),I=a("ZcpU"),R=a("IhTG");function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){Object(y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C=function(e){return e.userSession&&e.userSession.portal?e.userSession.portal:"https://".concat(e.portalHost,"/sharing/rest")},F=function(e,t,a){return"".concat(C(a),"/content/users/").concat(t,"/items/").concat(e)},M=function(e,t){var a,r;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.rules.sharing&&t.rules.sharing.appProxy&&t.rules.sharing.appProxy.registerAppParams)){n.next=6;break}return a="".concat(C(t),"/oauth2/registerApp"),r={itemId:e,appType:t.rules.sharing.appProxy.registerAppParams.appType,redirect_uris:JSON.stringify(t.rules.sharing.appProxy.registerAppParams.redirect_uris)},n.abrupt("return",Object(I.c)(a,{authentication:t.userSession,params:r}));case 6:throw S.a;case 7:case"end":return n.stop()}}),null,null,null,Promise)},L=function(e,t,a){var r,n,s,i;return o.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!a.rules.sharing||!a.rules.sharing.appProxy){o.next=6;break}return r=a.rules.sharing.appProxy.existingAppProxy&&a.rules.sharing.appProxy.existingAppProxy.referrers||[],n=a.rules.sharing.appProxy.serviceProxyParams.referrers.concat(r).filter(R.a),s=T({},a.rules.sharing.appProxy.serviceProxyParams,{referrers:n}),i="".concat(F(e.id,e.owner,a),"/createProxies"),o.abrupt("return",Object(I.c)(i,{authentication:a.userSession,params:{proxies:t,serviceProxyParams:s}}));case 6:throw S.c;case 7:case"end":return o.stop()}}),null,null,null,Promise)},N=function(e,t){var a,r,n,s;return o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,!t.rules.sharing||!t.rules.sharing.appProxy){i.next=16;break}return i.next=4,o.a.awrap(Object(D.a)(t.rules.sharing.appProxy.itemId,{authentication:t.userSession}));case 4:if(a=i.sent,Object(_.d)(a)){i.next=8;break}return i.next=8,o.a.awrap(M(a.id,t));case 8:return r=t.rules.sharing.appProxy.existingAppProxy&&t.rules.sharing.appProxy.existingAppProxy.proxies?t.rules.sharing.appProxy.existingAppProxy.proxies:[],n=e.map((function(e){return{sourceUrl:e.fixProperties.sourceUrl}})).filter((function(e,t,a){return a.indexOf(e)===t&&!r.find((function(t){return t.sourceUrl===e.sourceUrl}))})),i.next=12,o.a.awrap(L(a,n,t));case 12:s=i.sent,e.forEach((function(e){e.resolve(s)})),i.next=17;break;case 16:e.forEach((function(e){e.reject(S.c)}));case 17:i.next=22;break;case 19:i.prev=19,i.t0=i.catch(0),e.forEach((function(e){e.reject(i.t0)}));case 22:case"end":return i.stop()}}),null,null,[[0,19]],Promise)},A=a("mvvZ"),W=function(){var e,t,a=new Promise((function(a,r){e=a,t=r}));return{resolve:e,reject:t,promise:a}},U=function(e,t){var a,r,n;return o.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=[],r=[].concat(e),n=r.reduce((function(e,t){var r=t.issue?t.issue:t;if(r.hasFix&&"function"===typeof r.fix)return e.concat(r.fix());if(r.hasFix&&"object"===typeof r.fix&&"app-proxy"===r.fix.type){var n=W(),s=n.resolve,i=n.reject,c=n.promise;return a.push({fixProperties:r.fix,resolve:s,reject:i}),e.concat(c)}return e.concat(o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:throw S.b;case 1:case"end":return e.stop()}}),null,null,null,Promise))}),[]),!(a.length>0)){s.next=6;break}return s.next=6,o.a.awrap(N(a,t));case 6:return s.abrupt("return",Object(A.a)(n));case 7:case"end":return s.stop()}}),null,null,null,Promise)},G=a("PxFk"),B=a("lPey"),H=a("TuFI"),z=a("Z34l");function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(Object(a),!0).forEach((function(t){Object(y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var V=function(e,t){var a={hasIssues:!1,hasUnfixableIssues:!1,mapsWithIssues:[]},r={hasIssues:!1,hasUnfixableIssues:!1,mapsWithIssues:[]};return e.hasIssues&&e.itemResults.success&&e.itemResults.nestedItems.forEach((function(n){if(n.success&&n.summary.hasIssues&&(n.item.type===S.d.WEBMAP||n.item.type===S.d.WEBSCENE)){var o=!1,s=!1,i={hasUnfixableIssues:!1,itemId:n.item.itemId,title:n.item.itemInfo.itemDetails.title,thumbnailUrl:Object(z.b)(t.PORTAL_HOST,n.item.itemInfo.itemDetails,"",e.fixOptions.userSession.token,100),layerNames:[]},c=Y({},i,{type:"sharing-issue-map-details",sharingLevels:{private:!1,org:!1}}),l=Y({type:"premium-issue-map-details"},i);n.summary.fixableIssues.concat(n.summary.unfixableIssues).forEach((function(e){var t;e.item.type===S.d.MAP_LAYER&&(t=e.item.itemInfo.mapLayerData&&e.item.itemInfo.mapLayerData.title?e.item.itemInfo.mapLayerData.title:e.item.itemInfo.itemDetails&&e.item.itemInfo.itemDetails.title?e.item.itemInfo.itemDetails.title:e.item.itemId),"sharing-access-level"===e.issue.type?(e.issue.hasFix||(a.hasUnfixableIssues=!0,c.hasUnfixableIssues=!0),o=!0,c.sharingLevels[e.issue.currentSharingLevel.access]=!0,t&&c.layerNames.push(t)):"app-proxy-required"===e.issue.type&&e.issue.isPremiumContent?(e.issue.hasFix||(r.hasUnfixableIssues=!0,l.hasUnfixableIssues=!0),s=!0,t&&c.layerNames.push(t)):"app-proxy-required"===e.issue.type&&e.issue.isSubscriberContent&&!e.issue.hasFix&&(o=!0,a.hasUnfixableIssues=!0,c.hasUnfixableIssues=!0)})),o&&(a.hasIssues=!0,a.mapsWithIssues.push(c)),s&&(r.hasIssues=!0,r.mapsWithIssues.push(l))}})),{hasFailures:e.hasFailures,hasIssues:a.hasIssues||r.hasIssues,sharingIssues:a,premiumIssues:r}},q=a("Z4N4"),Q=a("nylY"),Z=a("91F1"),J=a("7Vmz"),X=a("wWnZ"),$=a("+ApL"),ee=a("liFR"),te=a("Kec5"),ae=a("N8kh"),re=h.a.createElement,ne=Object(b.c)((function(e){var t=Object(m.useState)(!1),a=t[0],r=t[1],n={styles:re(f.a,{id:"1746753570",dynamic:[O.a.spacing.xxxs,a?"0":"-90deg",a?"0":"90deg"]},[".icon.__jsx-style-dynamic-selector::after{content:'';margin-right:".concat(O.a.spacing.xxxs,";}"),".icon.__jsx-style-dynamic-selector svg{vertical-align:text-top;-webkit-transform:rotate(".concat(a?"0":"-90deg",");-ms-transform:rotate(").concat(a?"0":"-90deg",");transform:rotate(").concat(a?"0":"-90deg",");}"),"html[dir='rtl'] .icon.__jsx-style-dynamic-selector svg{-webkit-transform:rotate(".concat(a?"0":"90deg",");-ms-transform:rotate(").concat(a?"0":"90deg",");transform:rotate(").concat(a?"0":"90deg",");}")]),className:f.a.dynamic([["1746753570",[O.a.spacing.xxxs,a?"0":"-90deg",a?"0":"90deg"]]])};return re("div",{className:f.a.dynamic([["2139228739",[O.a.spacing.xs,O.a.spacing.xs,O.a.color.platinum,e.mapDetails.thumbnailUrl,O.a.color.platinum,O.a.spacing.xs,q.a.typography.h6(!0),O.a.color.darkGreen,q.a.lineClamp(1),q.a.typography.body14(),"sharing-issue-map-details"===e.mapDetails.type?O.a.color.alertRed:O.a.color.bleuDeFrance,O.a.spacing.xxxs,O.a.spacing.xxxxs,q.a.typography.body14(!0),O.a.color.cadet,q.a.lineClamp(1),O.a.spacing.xxxs]]])+" item"},re("div",{className:f.a.dynamic([["2139228739",[O.a.spacing.xs,O.a.spacing.xs,O.a.color.platinum,e.mapDetails.thumbnailUrl,O.a.color.platinum,O.a.spacing.xs,q.a.typography.h6(!0),O.a.color.darkGreen,q.a.lineClamp(1),q.a.typography.body14(),"sharing-issue-map-details"===e.mapDetails.type?O.a.color.alertRed:O.a.color.bleuDeFrance,O.a.spacing.xxxs,O.a.spacing.xxxxs,q.a.typography.body14(!0),O.a.color.cadet,q.a.lineClamp(1),O.a.spacing.xxxs]]])+" thumbnail"}),re("div",{className:f.a.dynamic([["2139228739",[O.a.spacing.xs,O.a.spacing.xs,O.a.color.platinum,e.mapDetails.thumbnailUrl,O.a.color.platinum,O.a.spacing.xs,q.a.typography.h6(!0),O.a.color.darkGreen,q.a.lineClamp(1),q.a.typography.body14(),"sharing-issue-map-details"===e.mapDetails.type?O.a.color.alertRed:O.a.color.bleuDeFrance,O.a.spacing.xxxs,O.a.spacing.xxxxs,q.a.typography.body14(!0),O.a.color.cadet,q.a.lineClamp(1),O.a.spacing.xxxs]]])+" info"},re("h6",{className:f.a.dynamic([["2139228739",[O.a.spacing.xs,O.a.spacing.xs,O.a.color.platinum,e.mapDetails.thumbnailUrl,O.a.color.platinum,O.a.spacing.xs,q.a.typography.h6(!0),O.a.color.darkGreen,q.a.lineClamp(1),q.a.typography.body14(),"sharing-issue-map-details"===e.mapDetails.type?O.a.color.alertRed:O.a.color.bleuDeFrance,O.a.spacing.xxxs,O.a.spacing.xxxxs,q.a.typography.body14(!0),O.a.color.cadet,q.a.lineClamp(1),O.a.spacing.xxxs]]])},e.mapDetails.title),1===e.mapDetails.layerNames.length&&re("p",{className:f.a.dynamic([["2139228739",[O.a.spacing.xs,O.a.spacing.xs,O.a.color.platinum,e.mapDetails.thumbnailUrl,O.a.color.platinum,O.a.spacing.xs,q.a.typography.h6(!0),O.a.color.darkGreen,q.a.lineClamp(1),q.a.typography.body14(),"sharing-issue-map-details"===e.mapDetails.type?O.a.color.alertRed:O.a.color.bleuDeFrance,O.a.spacing.xxxs,O.a.spacing.xxxxs,q.a.typography.body14(!0),O.a.color.cadet,q.a.lineClamp(1),O.a.spacing.xxxs]]])+" layer-changes"},re(g.a,{id:"component.builderWorkflows.publishWorkflow.fixStage.".concat(e.type,".item.layoutCount.singular"),values:{layerName:e.mapDetails.layerNames[0]}})),e.mapDetails.layerNames.length>1&&re(h.a.Fragment,null,re("button",{onClick:function(){r(!a)},className:f.a.dynamic([["2139228739",[O.a.spacing.xs,O.a.spacing.xs,O.a.color.platinum,e.mapDetails.thumbnailUrl,O.a.color.platinum,O.a.spacing.xs,q.a.typography.h6(!0),O.a.color.darkGreen,q.a.lineClamp(1),q.a.typography.body14(),"sharing-issue-map-details"===e.mapDetails.type?O.a.color.alertRed:O.a.color.bleuDeFrance,O.a.spacing.xxxs,O.a.spacing.xxxxs,q.a.typography.body14(!0),O.a.color.cadet,q.a.lineClamp(1),O.a.spacing.xxxs]]])+" layer-changes"},re($.a,{className:n.className,width:"1.4rem",height:"auto"}),re(g.a,{id:"component.builderWorkflows.publishWorkflow.fixStage.".concat(e.type,".item.layoutCount.plural"),values:{layerCount:e.mapDetails.layerNames.length}})),re("div",{className:f.a.dynamic([["2139228739",[O.a.spacing.xs,O.a.spacing.xs,O.a.color.platinum,e.mapDetails.thumbnailUrl,O.a.color.platinum,O.a.spacing.xs,q.a.typography.h6(!0),O.a.color.darkGreen,q.a.lineClamp(1),q.a.typography.body14(),"sharing-issue-map-details"===e.mapDetails.type?O.a.color.alertRed:O.a.color.bleuDeFrance,O.a.spacing.xxxs,O.a.spacing.xxxxs,q.a.typography.body14(!0),O.a.color.cadet,q.a.lineClamp(1),O.a.spacing.xxxs]]])+" "+"layer-details-wrapper ".concat(a?"is-open":"")},e.mapDetails.layerNames.map((function(t){return re("p",{key:t,className:f.a.dynamic([["2139228739",[O.a.spacing.xs,O.a.spacing.xs,O.a.color.platinum,e.mapDetails.thumbnailUrl,O.a.color.platinum,O.a.spacing.xs,q.a.typography.h6(!0),O.a.color.darkGreen,q.a.lineClamp(1),q.a.typography.body14(),"sharing-issue-map-details"===e.mapDetails.type?O.a.color.alertRed:O.a.color.bleuDeFrance,O.a.spacing.xxxs,O.a.spacing.xxxxs,q.a.typography.body14(!0),O.a.color.cadet,q.a.lineClamp(1),O.a.spacing.xxxs]]])+" layer-details"},t)}))))),re("div",{className:f.a.dynamic([["2139228739",[O.a.spacing.xs,O.a.spacing.xs,O.a.color.platinum,e.mapDetails.thumbnailUrl,O.a.color.platinum,O.a.spacing.xs,q.a.typography.h6(!0),O.a.color.darkGreen,q.a.lineClamp(1),q.a.typography.body14(),"sharing-issue-map-details"===e.mapDetails.type?O.a.color.alertRed:O.a.color.bleuDeFrance,O.a.spacing.xxxs,O.a.spacing.xxxxs,q.a.typography.body14(!0),O.a.color.cadet,q.a.lineClamp(1),O.a.spacing.xxxs]]])+" issue-icons-container"},"sharing-issue-map-details"===e.mapDetails.type&&re(h.a.Fragment,null,e.mapDetails.sharingLevels.private&&re("span",{className:f.a.dynamic([["2139228739",[O.a.spacing.xs,O.a.spacing.xs,O.a.color.platinum,e.mapDetails.thumbnailUrl,O.a.color.platinum,O.a.spacing.xs,q.a.typography.h6(!0),O.a.color.darkGreen,q.a.lineClamp(1),q.a.typography.body14(),"sharing-issue-map-details"===e.mapDetails.type?O.a.color.alertRed:O.a.color.bleuDeFrance,O.a.spacing.xxxs,O.a.spacing.xxxxs,q.a.typography.body14(!0),O.a.color.cadet,q.a.lineClamp(1),O.a.spacing.xxxs]]])+" issue-icon"},re(ee.a,{placement:"left",usePositionFixed:!0,tooltipContent:e.intl.formatMessage({id:"common.arcgis.sharing.itemTooltip.private"})},re(Z.a,{sharingLevel:ae.a.PRIVATE,iconProps:{width:O.a.spacing.xxs,height:O.a.spacing.xxs,color:O.a.color.coolGrey}}))),e.storyShareToLevel.access===ae.a.PUBLIC&&e.mapDetails.sharingLevels.org&&re("span",{className:f.a.dynamic([["2139228739",[O.a.spacing.xs,O.a.spacing.xs,O.a.color.platinum,e.mapDetails.thumbnailUrl,O.a.color.platinum,O.a.spacing.xs,q.a.typography.h6(!0),O.a.color.darkGreen,q.a.lineClamp(1),q.a.typography.body14(),"sharing-issue-map-details"===e.mapDetails.type?O.a.color.alertRed:O.a.color.bleuDeFrance,O.a.spacing.xxxs,O.a.spacing.xxxxs,q.a.typography.body14(!0),O.a.color.cadet,q.a.lineClamp(1),O.a.spacing.xxxs]]])+" issue-icon"},re(ee.a,{placement:"left",usePositionFixed:!0,tooltipContent:e.intl.formatMessage({id:"common.arcgis.sharing.itemTooltip.org"})},re(Z.a,{sharingLevel:ae.a.ORG,iconProps:{width:O.a.spacing.xxs,height:O.a.spacing.xxs,color:O.a.color.coolGrey}}))),e.mapDetails.hasUnfixableIssues&&re("span",{className:f.a.dynamic([["2139228739",[O.a.spacing.xs,O.a.spacing.xs,O.a.color.platinum,e.mapDetails.thumbnailUrl,O.a.color.platinum,O.a.spacing.xs,q.a.typography.h6(!0),O.a.color.darkGreen,q.a.lineClamp(1),q.a.typography.body14(),"sharing-issue-map-details"===e.mapDetails.type?O.a.color.alertRed:O.a.color.bleuDeFrance,O.a.spacing.xxxs,O.a.spacing.xxxxs,q.a.typography.body14(!0),O.a.color.cadet,q.a.lineClamp(1),O.a.spacing.xxxs]]])+" issue-icon"},re(ee.a,{placement:"left",usePositionFixed:!0,tooltipContent:e.intl.formatMessage({id:"component.builderWorkflows.publishWorkflow.fixStage.issue.iconTooltip"})},re(J.a,{width:O.a.spacing.xxs,height:O.a.spacing.xxs,color:O.a.color.alertRed})))),"premium-issue-map-details"===e.mapDetails.type&&re("span",{className:f.a.dynamic([["2139228739",[O.a.spacing.xs,O.a.spacing.xs,O.a.color.platinum,e.mapDetails.thumbnailUrl,O.a.color.platinum,O.a.spacing.xs,q.a.typography.h6(!0),O.a.color.darkGreen,q.a.lineClamp(1),q.a.typography.body14(),"sharing-issue-map-details"===e.mapDetails.type?O.a.color.alertRed:O.a.color.bleuDeFrance,O.a.spacing.xxxs,O.a.spacing.xxxxs,q.a.typography.body14(!0),O.a.color.cadet,q.a.lineClamp(1),O.a.spacing.xxxs]]])+" issue-icon"},re(ee.a,{placement:"left",usePositionFixed:!0,tooltipContent:e.intl.formatMessage({id:"component.builderWorkflows.publishWorkflow.fixStage.item.premiumContent.tooltip"})},re(te.a,{width:O.a.spacing.xxs,height:O.a.spacing.xxs,color:O.a.color.bleuDeFrance})))),n.styles,re(f.a,{id:"2139228739",dynamic:[O.a.spacing.xs,O.a.spacing.xs,O.a.color.platinum,e.mapDetails.thumbnailUrl,O.a.color.platinum,O.a.spacing.xs,q.a.typography.h6(!0),O.a.color.darkGreen,q.a.lineClamp(1),q.a.typography.body14(),"sharing-issue-map-details"===e.mapDetails.type?O.a.color.alertRed:O.a.color.bleuDeFrance,O.a.spacing.xxxs,O.a.spacing.xxxxs,q.a.typography.body14(!0),O.a.color.cadet,q.a.lineClamp(1),O.a.spacing.xxxs]},[".item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:start;-webkit-box-align:start;-ms-flex-align:start;align-items:start;padding:".concat(O.a.spacing.xs," 0;margin:0 ").concat(O.a.spacing.xs,";}"),".item.__jsx-style-dynamic-selector:not(:first-child){border-top:1px solid ".concat(O.a.color.platinum,";}"),".thumbnail.__jsx-style-dynamic-selector{height:4rem;width:6.8rem;background-image:url(".concat(e.mapDetails.thumbnailUrl,");background-position:center;background-repeat:no-repeat;background-size:cover;background-color:").concat(O.a.color.platinum,";-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;}"),".info.__jsx-style-dynamic-selector{margin:0 ".concat(O.a.spacing.xs,";-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;}"),"h6.__jsx-style-dynamic-selector{".concat(q.a.typography.h6(!0),";color:").concat(O.a.color.darkGreen,";margin:0;").concat(q.a.lineClamp(1),";}"),"body:not(.user-is-tabbing) .layer-changes.__jsx-style-dynamic-selector:focus{outline:none;}",".layer-changes.__jsx-style-dynamic-selector{".concat(q.a.typography.body14(),";color:").concat("sharing-issue-map-details"===e.mapDetails.type?O.a.color.alertRed:O.a.color.bleuDeFrance,";margin:").concat(O.a.spacing.xxxs," 0 ").concat(O.a.spacing.xxxxs,";overflow:hidden;}"),".layer-details-wrapper.__jsx-style-dynamic-selector{height:0;overflow:hidden;padding-left:2.2rem;}","html[dir='rtl'] .layer-details-wrapper.__jsx-style-dynamic-selector{padding:0 0 0 2.2rem;}",".layer-details-wrapper.is-open.__jsx-style-dynamic-selector{height:auto;}",".layer-details.__jsx-style-dynamic-selector{".concat(q.a.typography.body14(!0),";color:").concat(O.a.color.cadet,";margin-top:0.2rem;").concat(q.a.lineClamp(1),";}"),".issue-icons-container.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;margin-top:2.2rem;}",".issue-icon.__jsx-style-dynamic-selector:not(:first-child)::before{content:'';margin-right:".concat(O.a.spacing.xxxs,";}")]))})),oe=h.a.createElement,se=Object(b.c)((function(e){var t={styles:oe(f.a,{id:"1787035431",dynamic:[q.a.typography.body14(),O.a.color.cadet]},[".button.__jsx-style-dynamic-selector{padding:0;".concat(q.a.typography.body14()," color:").concat(O.a.color.cadet,";}")]),className:f.a.dynamic([["1787035431",[q.a.typography.body14(),O.a.color.cadet]]])},a={styles:oe(f.a,{id:"835798159",dynamic:[O.a.spacing.xxxs]},[".icon.__jsx-style-dynamic-selector::after{content:'';margin-right:".concat(O.a.spacing.xxxs,";}")]),className:f.a.dynamic([["835798159",[O.a.spacing.xxxs]]])},r=e.storyShareToLevel.access!==ae.a.PRIVATE&&e.storyShareToLevel.access!==ae.a.SHARED,n=e.storyShareToLevel.groups&&e.storyShareToLevel.groups.length>0?e.storyShareToLevel.groups.length:0;return oe("div",{className:f.a.dynamic([["4147101905",[O.a.spacing.xxs,O.a.spacing.xxxs,O.a.spacing.xxxs,O.a.color.darkGreen,q.a.typography.h2(),O.a.spacing.sm,q.a.typography.body14(),q.a.typography.body16(),O.a.spacing.xs,O.a.color.beauBlue,O.a.spacing.xxs,O.a.spacing.sm,O.a.color.platinum,O.a.color.beauBlue,O.a.spacing.xxxs,q.a.typography.body14(),O.a.color.alertRed,O.a.spacing.xxs,q.a.typography.body14(),O.a.spacing.xl,O.a.spacing.sm,q.a.gapped("column",O.a.spacing.sm)]]])+" issue-report-stage"},oe("button",{type:"button",title:e.intl.formatMessage({id:"common.close"}),onClick:e.onClose,className:f.a.dynamic([["4147101905",[O.a.spacing.xxs,O.a.spacing.xxxs,O.a.spacing.xxxs,O.a.color.darkGreen,q.a.typography.h2(),O.a.spacing.sm,q.a.typography.body14(),q.a.typography.body16(),O.a.spacing.xs,O.a.color.beauBlue,O.a.spacing.xxs,O.a.spacing.sm,O.a.color.platinum,O.a.color.beauBlue,O.a.spacing.xxxs,q.a.typography.body14(),O.a.color.alertRed,O.a.spacing.xxs,q.a.typography.body14(),O.a.spacing.xl,O.a.spacing.sm,q.a.gapped("column",O.a.spacing.sm)]]])+" close-btn"},oe(Q.a,{height:O.a.spacing.sm,width:O.a.spacing.sm,color:O.a.color.coolGrey})),oe("h2",{className:f.a.dynamic([["4147101905",[O.a.spacing.xxs,O.a.spacing.xxxs,O.a.spacing.xxxs,O.a.color.darkGreen,q.a.typography.h2(),O.a.spacing.sm,q.a.typography.body14(),q.a.typography.body16(),O.a.spacing.xs,O.a.color.beauBlue,O.a.spacing.xxs,O.a.spacing.sm,O.a.color.platinum,O.a.color.beauBlue,O.a.spacing.xxxs,q.a.typography.body14(),O.a.color.alertRed,O.a.spacing.xxs,q.a.typography.body14(),O.a.spacing.xl,O.a.spacing.sm,q.a.gapped("column",O.a.spacing.sm)]]])},oe(g.a,{id:"component.builderWorkflows.publishWorkflow.fixStage.".concat(e.type,".title")})),oe("p",{className:f.a.dynamic([["4147101905",[O.a.spacing.xxs,O.a.spacing.xxxs,O.a.spacing.xxxs,O.a.color.darkGreen,q.a.typography.h2(),O.a.spacing.sm,q.a.typography.body14(),q.a.typography.body16(),O.a.spacing.xs,O.a.color.beauBlue,O.a.spacing.xxs,O.a.spacing.sm,O.a.color.platinum,O.a.color.beauBlue,O.a.spacing.xxxs,q.a.typography.body14(),O.a.color.alertRed,O.a.spacing.xxs,q.a.typography.body14(),O.a.spacing.xl,O.a.spacing.sm,q.a.gapped("column",O.a.spacing.sm)]]])+" report-description"},"sharing"===e.type&&oe(g.a,{id:"component.builderWorkflows.publishWorkflow.fixStage.sharing.subtitle"}),"premium"===e.type&&oe(g.a,{id:"component.builderWorkflows.publishWorkflow.fixStage.premium.subtitle"})),oe("div",{className:f.a.dynamic([["4147101905",[O.a.spacing.xxs,O.a.spacing.xxxs,O.a.spacing.xxxs,O.a.color.darkGreen,q.a.typography.h2(),O.a.spacing.sm,q.a.typography.body14(),q.a.typography.body16(),O.a.spacing.xs,O.a.color.beauBlue,O.a.spacing.xxs,O.a.spacing.sm,O.a.color.platinum,O.a.color.beauBlue,O.a.spacing.xxxs,q.a.typography.body14(),O.a.color.alertRed,O.a.spacing.xxs,q.a.typography.body14(),O.a.spacing.xl,O.a.spacing.sm,q.a.gapped("column",O.a.spacing.sm)]]])+" item-wrapper"},oe(x.TouchScrollable,null,oe("div",{className:f.a.dynamic([["4147101905",[O.a.spacing.xxs,O.a.spacing.xxxs,O.a.spacing.xxxs,O.a.color.darkGreen,q.a.typography.h2(),O.a.spacing.sm,q.a.typography.body14(),q.a.typography.body16(),O.a.spacing.xs,O.a.color.beauBlue,O.a.spacing.xxs,O.a.spacing.sm,O.a.color.platinum,O.a.color.beauBlue,O.a.spacing.xxxs,q.a.typography.body14(),O.a.color.alertRed,O.a.spacing.xxs,q.a.typography.body14(),O.a.spacing.xl,O.a.spacing.sm,q.a.gapped("column",O.a.spacing.sm)]]])+" item-details"},e.issueReport.mapsWithIssues.map((function(t){return oe(ne,{key:t.itemId,mapDetails:t,storyShareToLevel:e.storyShareToLevel,type:e.type})})))),"sharing"===e.type&&oe("div",{className:f.a.dynamic([["4147101905",[O.a.spacing.xxs,O.a.spacing.xxxs,O.a.spacing.xxxs,O.a.color.darkGreen,q.a.typography.h2(),O.a.spacing.sm,q.a.typography.body14(),q.a.typography.body16(),O.a.spacing.xs,O.a.color.beauBlue,O.a.spacing.xxs,O.a.spacing.sm,O.a.color.platinum,O.a.color.beauBlue,O.a.spacing.xxxs,q.a.typography.body14(),O.a.color.alertRed,O.a.spacing.xxs,q.a.typography.body14(),O.a.spacing.xl,O.a.spacing.sm,q.a.gapped("column",O.a.spacing.sm)]]])+" item-footer"},oe("p",{className:f.a.dynamic([["4147101905",[O.a.spacing.xxs,O.a.spacing.xxxs,O.a.spacing.xxxs,O.a.color.darkGreen,q.a.typography.h2(),O.a.spacing.sm,q.a.typography.body14(),q.a.typography.body16(),O.a.spacing.xs,O.a.color.beauBlue,O.a.spacing.xxs,O.a.spacing.sm,O.a.color.platinum,O.a.color.beauBlue,O.a.spacing.xxxs,q.a.typography.body14(),O.a.color.alertRed,O.a.spacing.xxs,q.a.typography.body14(),O.a.spacing.xl,O.a.spacing.sm,q.a.gapped("column",O.a.spacing.sm)]]])+" sharing-level-before"},oe(g.a,{id:"component.builderWorkflows.publishWorkflow.fixStage.detailsFooter.changingTo"})),r&&oe(h.a.Fragment,null,oe(Z.a,{sharingLevel:e.storyShareToLevel.access,iconProps:{width:O.a.spacing.xxs,height:O.a.spacing.xxs,lineHeight:"1em",verticalAlignment:"text-bottom",color:O.a.color.cadet}}),oe("p",{className:f.a.dynamic([["4147101905",[O.a.spacing.xxs,O.a.spacing.xxxs,O.a.spacing.xxxs,O.a.color.darkGreen,q.a.typography.h2(),O.a.spacing.sm,q.a.typography.body14(),q.a.typography.body16(),O.a.spacing.xs,O.a.color.beauBlue,O.a.spacing.xxs,O.a.spacing.sm,O.a.color.platinum,O.a.color.beauBlue,O.a.spacing.xxxs,q.a.typography.body14(),O.a.color.alertRed,O.a.spacing.xxs,q.a.typography.body14(),O.a.spacing.xl,O.a.spacing.sm,q.a.gapped("column",O.a.spacing.sm)]]])+" sharing-level"},oe(g.a,{id:"common.arcgis.sharing.display.".concat(e.storyShareToLevel.access)}),n>0?"; ":"")),n>0&&oe(h.a.Fragment,null,oe(Z.a,{sharingLevel:ae.a.SHARED,iconProps:{width:O.a.spacing.xxs,height:O.a.spacing.xxs,lineHeight:"1em",verticalAlignment:"text-bottom",color:O.a.color.cadet}}),oe("p",{className:f.a.dynamic([["4147101905",[O.a.spacing.xxs,O.a.spacing.xxxs,O.a.spacing.xxxs,O.a.color.darkGreen,q.a.typography.h2(),O.a.spacing.sm,q.a.typography.body14(),q.a.typography.body16(),O.a.spacing.xs,O.a.color.beauBlue,O.a.spacing.xxs,O.a.spacing.sm,O.a.color.platinum,O.a.color.beauBlue,O.a.spacing.xxxs,q.a.typography.body14(),O.a.color.alertRed,O.a.spacing.xxs,q.a.typography.body14(),O.a.spacing.xl,O.a.spacing.sm,q.a.gapped("column",O.a.spacing.sm)]]])+" sharing-level"},"".concat(n," "),oe(g.a,{id:n>1?"common.arcgis.sharing.display.groups":"common.arcgis.sharing.display.group"}))))),"premium"===e.type&&oe("p",{className:f.a.dynamic([["4147101905",[O.a.spacing.xxs,O.a.spacing.xxxs,O.a.spacing.xxxs,O.a.color.darkGreen,q.a.typography.h2(),O.a.spacing.sm,q.a.typography.body14(),q.a.typography.body16(),O.a.spacing.xs,O.a.color.beauBlue,O.a.spacing.xxs,O.a.spacing.sm,O.a.color.platinum,O.a.color.beauBlue,O.a.spacing.xxxs,q.a.typography.body14(),O.a.color.alertRed,O.a.spacing.xxs,q.a.typography.body14(),O.a.spacing.xl,O.a.spacing.sm,q.a.gapped("column",O.a.spacing.sm)]]])+" report-description"},oe(g.a,{id:"component.builderWorkflows.publishWorkflow.fixStage.premium.subtitle.p2",values:{"credits-link":function(e){return oe("a",{href:"https://doc.arcgis.com/en/arcgis-online/administer/credits.htm",target:"_blank",rel:"noopener noreferrer",className:f.a.dynamic([["4147101905",[O.a.spacing.xxs,O.a.spacing.xxxs,O.a.spacing.xxxs,O.a.color.darkGreen,q.a.typography.h2(),O.a.spacing.sm,q.a.typography.body14(),q.a.typography.body16(),O.a.spacing.xs,O.a.color.beauBlue,O.a.spacing.xxs,O.a.spacing.sm,O.a.color.platinum,O.a.color.beauBlue,O.a.spacing.xxxs,q.a.typography.body14(),O.a.color.alertRed,O.a.spacing.xxs,q.a.typography.body14(),O.a.spacing.xl,O.a.spacing.sm,q.a.gapped("column",O.a.spacing.sm)]]])},e)}}})),e.issueReport.hasUnfixableIssues&&oe("div",{className:f.a.dynamic([["4147101905",[O.a.spacing.xxs,O.a.spacing.xxxs,O.a.spacing.xxxs,O.a.color.darkGreen,q.a.typography.h2(),O.a.spacing.sm,q.a.typography.body14(),q.a.typography.body16(),O.a.spacing.xs,O.a.color.beauBlue,O.a.spacing.xxs,O.a.spacing.sm,O.a.color.platinum,O.a.color.beauBlue,O.a.spacing.xxxs,q.a.typography.body14(),O.a.color.alertRed,O.a.spacing.xxs,q.a.typography.body14(),O.a.spacing.xl,O.a.spacing.sm,q.a.gapped("column",O.a.spacing.sm)]]])+" unfixable-issues-warning"},oe(J.a,{className:a.className,width:O.a.spacing.xxs,height:O.a.spacing.xxs,lineHeight:"1em"}),oe(g.a,{id:"component.builderWorkflows.publishWorkflow.fixStage.issue.iconTooltip"})),oe("div",{className:f.a.dynamic([["4147101905",[O.a.spacing.xxs,O.a.spacing.xxxs,O.a.spacing.xxxs,O.a.color.darkGreen,q.a.typography.h2(),O.a.spacing.sm,q.a.typography.body14(),q.a.typography.body16(),O.a.spacing.xs,O.a.color.beauBlue,O.a.spacing.xxs,O.a.spacing.sm,O.a.color.platinum,O.a.color.beauBlue,O.a.spacing.xxxs,q.a.typography.body14(),O.a.color.alertRed,O.a.spacing.xxs,q.a.typography.body14(),O.a.spacing.xl,O.a.spacing.sm,q.a.gapped("column",O.a.spacing.sm)]]])+" actions"},oe(X.a,{className:t.className,type:"blank",onClick:e.onSkipFix},oe(g.a,{id:"component.builderWorkflows.publishWorkflow.fixStage.".concat(e.type,".skipFix")})),oe(X.a,{color:"primary",onClick:e.onConfirmFix},oe(g.a,{id:"component.builderWorkflows.publishWorkflow.fixStage.".concat(e.type,".confirmFix")}))),t.styles,a.styles,oe(f.a,{id:"4147101905",dynamic:[O.a.spacing.xxs,O.a.spacing.xxxs,O.a.spacing.xxxs,O.a.color.darkGreen,q.a.typography.h2(),O.a.spacing.sm,q.a.typography.body14(),q.a.typography.body16(),O.a.spacing.xs,O.a.color.beauBlue,O.a.spacing.xxs,O.a.spacing.sm,O.a.color.platinum,O.a.color.beauBlue,O.a.spacing.xxxs,q.a.typography.body14(),O.a.color.alertRed,O.a.spacing.xxs,q.a.typography.body14(),O.a.spacing.xl,O.a.spacing.sm,q.a.gapped("column",O.a.spacing.sm)]},[".close-btn.__jsx-style-dynamic-selector{position:absolute;padding:".concat(O.a.spacing.xxs,";top:").concat(O.a.spacing.xxxs,";right:").concat(O.a.spacing.xxxs,";}"),".issue-report-stage.__jsx-style-dynamic-selector,.issue-report-stage.__jsx-style-dynamic-selector a.__jsx-style-dynamic-selector{text-align:left;color:".concat(O.a.color.darkGreen,";max-width:63rem;}"),"html[dir='rtl'] .issue-report-stage.__jsx-style-dynamic-selector{text-align:right;}","h2.__jsx-style-dynamic-selector{".concat(q.a.typography.h2(),";margin:0 0 ").concat(O.a.spacing.sm," 0;}"),"p.__jsx-style-dynamic-selector{".concat(q.a.typography.body14(),";margin:0;}"),".report-description.__jsx-style-dynamic-selector{".concat(q.a.typography.body16(),";margin:").concat(O.a.spacing.xs," 0;}"),".item-wrapper.__jsx-style-dynamic-selector{border:1px solid ".concat(O.a.color.beauBlue,";}"),".item-details.__jsx-style-dynamic-selector{max-height:28.4rem;overflow:auto;-webkit-overflow-scrolling:touch;}",".item-footer.__jsx-style-dynamic-selector{padding:".concat(O.a.spacing.xxs," ").concat(O.a.spacing.sm,";background-color:").concat(O.a.color.platinum,";border-top:1px solid ").concat(O.a.color.beauBlue,";}"),".sharing-level-before.__jsx-style-dynamic-selector{display:inline-block;}",".sharing-level-before.__jsx-style-dynamic-selector::after{content:'';margin-left:".concat(O.a.spacing.xxxs,";}"),".sharing-level.__jsx-style-dynamic-selector{display:inline-block;".concat(q.a.typography.body14(),";margin:0 0.5rem;cursor:default;}"),".tooltip{z-index:9999;}",".unfixable-issues-warning.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:".concat(O.a.color.alertRed,";margin-top:").concat(O.a.spacing.xxs,";").concat(q.a.typography.body14(),";}"),".actions.__jsx-style-dynamic-selector{margin:".concat(O.a.spacing.xl," 0 ").concat(O.a.spacing.sm,";").concat(q.a.gapped("column",O.a.spacing.sm)," justify-content:end;}")]))})),ie=h.a.createElement;function ce(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var le=function(e){Object(u.a)(n,e);var t,a=(t=n,function(){var e,a=Object(p.a)(t);if(ce()){var r=Object(p.a)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return Object(l.a)(this,e)});function n(){var e;Object(s.a)(this,n);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e=a.call.apply(a,[this].concat(r)),Object(y.a)(Object(c.a)(e),"fixSharingIssues",!1),Object(y.a)(Object(c.a)(e),"fixPremiumIssues",!1),Object(y.a)(Object(c.a)(e),"renderSharingIssuesReport",(function(){return e.issueReport&&e.issueReport.sharingIssues.mapsWithIssues.length>0?ie(se,{issueReport:e.issueReport.sharingIssues,storyShareToLevel:e.props.storyItem.itemSharingLevel,type:"sharing",onClose:e.onClose,onConfirmFix:e.sharingFixConfirm,onSkipFix:e.sharingSkipFix}):null})),Object(y.a)(Object(c.a)(e),"renderPremiumIssuesReport",(function(){return e.issueReport&&e.issueReport.premiumIssues.mapsWithIssues.length>0?ie(se,{issueReport:e.issueReport.premiumIssues,storyShareToLevel:e.props.storyItem.itemSharingLevel,type:"premium",onClose:e.onClose,onConfirmFix:e.premiumFixConfirm,onSkipFix:e.premiumSkipFix}):null})),Object(y.a)(Object(c.a)(e),"checkStory",(function(){return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.awrap(Object(k.a)({item:{type:S.d.STORY_MAP,itemId:e.props.storyItem.itemId,checkDraftData:"publishing"===e.props.mode},portalHost:e.props.config.PORTAL_HOST,rules:{sharing:{requiredSharingLevel:e.props.storyItem.itemSharingLevel,appProxy:{itemId:e.props.storyItem.itemId,registerAppParams:{appType:"multiple",redirect_uris:[window.location.origin]},serviceProxyParams:{referrers:["".concat(window.location.origin,"/stories/").concat(e.props.storyItem.itemId)]}}}},userSession:e.props.storyItem.userSession,storyMapUserPrivileges:e.props.storyItem.storyMapUserPrivileges}));case 3:e.checkResponse=t.sent,e.issueReport=V(e.checkResponse,e.props.config),e.issueReport.hasFailures&&e.props.toast.add({type:"error",title:ie(g.a,{id:"builder.common.sorry"}),details:ie(g.a,{id:"component.builderWorkflows.publishWorkflow.error.failuresWhileChecking"})}),e.issueReport.hasIssues?e.issueReport.sharingIssues.hasIssues?e.next():e.goTo(3):e.fixStory(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),e.props.toast.add({type:"error",title:ie(g.a,{id:"builder.common.sorry"}),details:ie(g.a,{id:"component.builderWorkflows.publishWorkflow.".concat(e.props.itemType,".error.publishErrorDetails")})}),e.props.onClose();case 13:case"end":return t.stop()}}),null,null,[[0,9]],Promise)})),Object(y.a)(Object(c.a)(e),"sharingFixConfirm",(function(){e.fixSharingIssues=!0,e.issueReport.premiumIssues.mapsWithIssues.length>0||e.issueReport.premiumIssues.hasUnfixableIssues?e.goTo(3):e.fixStory()})),Object(y.a)(Object(c.a)(e),"sharingSkipFix",(function(){e.fixSharingIssues=!1,e.issueReport.premiumIssues.mapsWithIssues.length>0||e.issueReport.premiumIssues.hasUnfixableIssues?e.goTo(3):e.publishStory()})),Object(y.a)(Object(c.a)(e),"premiumFixConfirm",(function(){e.fixPremiumIssues=!0,e.fixStory()})),Object(y.a)(Object(c.a)(e),"premiumSkipFix",(function(){e.fixPremiumIssues=!1,e.fixStory()})),Object(y.a)(Object(c.a)(e),"fixStory",(function(){var t;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.checkResponse){a.next=11;break}return t=e.checkResponse.fixableIssues.filter((function(t){return!("sharing-access-level"!==t.issue.type||!e.fixSharingIssues)||(!("app-proxy-required"!==t.issue.type||!t.issue.isSubscriberContent)||!("app-proxy-required"!==t.issue.type||!t.issue.isPremiumContent||!e.fixPremiumIssues))})),a.prev=2,a.next=5,o.a.awrap(U(t,e.checkResponse.fixOptions));case 5:a.sent.forEach((function(e){if("rejected"===e.status)throw new Error("Fix failed")})),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(2),e.props.toast.add({type:"error",title:ie(g.a,{id:"builder.common.sorry"}),details:ie(g.a,{id:"component.builderWorkflows.publishWorkflow.error.publishFixErrorDetails"})});case 11:"publishing"===e.props.mode?(e.goTo(4),e.publishStory(void 0,!0)):(e.goTo(5),e.shareStory(void 0,!0));case 12:case"end":return a.stop()}}),null,null,[[2,8]],Promise)})),Object(y.a)(Object(c.a)(e),"publishStory",(function(t,a){return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return a||e.goTo(4),t.prev=1,t.next=4,o.a.awrap(e.props.storyItem.publishStory());case 4:e.goTo(6),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),e.props.toast.add({type:"error",title:ie(g.a,{id:"builder.common.sorry"}),details:ie(g.a,{id:"component.builderWorkflows.publishWorkflow.".concat(e.props.itemType,".error.publishErrorDetails")})}),e.props.onClose();case 11:case"end":return t.stop()}}),null,null,[[1,7]],Promise)})),Object(y.a)(Object(c.a)(e),"shareStory",(function(t,a){return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return a||e.goTo(5),t.prev=1,t.next=4,o.a.awrap(e.props.storyItem.shareStory());case 4:e.goTo(6),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),e.props.toast.add({type:"error",title:ie(g.a,{id:"builder.common.sorry"}),details:ie(g.a,{id:"component.builderWorkflows.publishWorkflow.".concat(e.props.itemType,".error.shareErrorDetails")})}),e.props.onClose();case 11:case"end":return t.stop()}}),null,null,[[1,7]],Promise)})),Object(y.a)(Object(c.a)(e),"onFinish",(function(){e.props.onFinish(!1)})),Object(y.a)(Object(c.a)(e),"onClose",(function(){e.props.onClose()})),e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.checkStory()}},{key:"render",value:function(){var e=this;return ie("div",{className:f.a.dynamic([["4031135809",[O.a.color.white]]])+" publish-workflow"},ie(j.a.Controller,{onClose:this.props.onClose,onFinish:this.onFinish},(function(t,a,n,o){return e.next=a,e.goTo=o,ie(m.Fragment,null,ie(v.a,null),ie(j.a.Stage,Object(r.a)({order:1,delay:H.a.stageDelay},t),ie(G.a,{message:ie(g.a,{id:"component.builderWorkflows.publishWorkflow.checkStage.".concat(e.props.itemType,".message")})})),ie(x.TouchScrollable,null,ie("div",{className:f.a.dynamic([["4031135809",[O.a.color.white]]])},ie(j.a.Stage,Object(r.a)({order:2},t),e.renderSharingIssuesReport()),ie(j.a.Stage,Object(r.a)({order:3},t),e.renderPremiumIssuesReport()))),ie(j.a.Stage,Object(r.a)({order:4,delay:H.a.stageDelay},t),ie(G.a,{message:ie(g.a,{id:"component.builderWorkflows.publishWorkflow.publishStage.".concat(e.props.itemType,".message")})})),ie(j.a.Stage,Object(r.a)({order:5,delay:H.a.stageDelay},t),ie(G.a,{message:ie(g.a,{id:"component.builderWorkflows.publishWorkflow.shareStage.message"})})),ie(j.a.Stage,Object(r.a)({order:6,delay:H.a.stageDelay,onStageReady:e.next},t),ie(B.a,{message:ie(m.Fragment,null,ie(g.a,{id:"component.builderWorkflows.publishWorkflow.finishedPublishedStage.".concat(e.props.itemType,".").concat(e.props.mode)}))})))})),ie(f.a,{id:"4031135809",dynamic:[O.a.color.white]},[".publish-workflow.__jsx-style-dynamic-selector{position:fixed;height:100vh;width:100vw;top:0;right:0;background-color:".concat(O.a.color.white,";z-index:999;}")]))}}]),n}(m.PureComponent);t.a=Object(w.a)(Object(P.c)(Object(b.c)(le)))},sc5R:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pipe=t.listenerOptions=void 0,t.preventTouchMove=function(e){return e.preventDefault(),!1},t.allowTouchMove=function(e){var t=e.currentTarget;if(t.scrollHeight>t.clientHeight)return e.stopPropagation(),!0;return e.preventDefault(),!1},t.preventInertiaScroll=function(){var e=this.scrollTop,t=this.scrollHeight,a=e+this.offsetHeight;0===e?this.scrollTop=1:a===t&&(this.scrollTop=e-1)},t.isTouchDevice=function(){return!!r.canUseDOM&&("ontouchstart"in window||navigator.maxTouchPoints)},t.camelToKebab=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},t.parse=function(e){return isNaN(e)?e:e+"px"},t.getPadding=function(){if(!r.canUseDOM)return 0;var e=parseInt(window.getComputedStyle(document.body).paddingRight,10),t=window.innerWidth-document.documentElement.clientWidth;return e+t},t.getWindowHeight=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(r.canUseDOM)return window.innerHeight*e},t.getDocumentHeight=function(){if(r.canUseDOM)return document.body.clientHeight},t.makeStyleTag=function(){if(!r.canUseDOM)return;var e=document.createElement("style");return e.type="text/css",e.setAttribute("data-react-scrolllock",""),e},t.injectStyles=function(e,t){if(!r.canUseDOM)return;e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))},t.insertStyleTag=function(e){if(!r.canUseDOM)return;(document.head||document.getElementsByTagName("head")[0]).appendChild(e)};var r=a("uPah");t.listenerOptions={capture:!1,passive:!1};var n=function(e,t){return function(){return t(e.apply(void 0,arguments))}};t.pipe=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.reduce(n)}},tIbH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),n=a("ERkP"),o=u(n),s=a("uPah"),i=a("T/ZO"),c=u(a("x4Gz")),l=u(a("6tvD")),p=a("sc5R");function u(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){s.canUseDOM&&(this.initialHeight=window.innerHeight)}},{key:"componentWillUnmount",value:function(){var e=window.innerHeight-this.initialHeight;e&&window.scrollTo(0,window.pageYOffset+e),this.initialHeight=window.innerHeight}},{key:"render",value:function(){var e=this.props.children;return e?o.default.createElement(i.TouchScrollable,null,e):null}}]),t}(n.PureComponent),d=(0,p.pipe)(l.default,c.default)(y),f=function(e){return e.isActive?o.default.createElement(d,e):e.children};f.defaultProps={accountForScrollbars:!0,children:null,isActive:!0},t.default=f},x4Gz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();t.default=function(e){return function(t){function a(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=r=c(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(o))),r.addSheet=function(){var e=r.getStyles(),t=(0,i.makeStyleTag)();t&&((0,i.injectStyles)(t,e),(0,i.insertStyleTag)(t),r.sheet=t)},r.getStyles=function(){var e=r.props.accountForScrollbars,t=(0,i.getDocumentHeight)(),a=e?(0,i.getPadding)():null;return"body {\n        box-sizing: border-box !important;\n        overflow: hidden !important;\n        position: relative !important;\n        "+(t?"height: "+t+"px !important;":"")+"\n        "+(a?"padding-right: "+a+"px !important;":"")+"\n      }"},c(r,t)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),r(a,[{key:"componentDidMount",value:function(){this.addSheet()}},{key:"removeSheet",value:function(){this.sheet&&(this.sheet.parentNode.removeChild(this.sheet),this.sheet=null)}},{key:"componentWillUnmount",value:function(){this.removeSheet()}},{key:"render",value:function(){return s.default.createElement(e,this.props)}}]),a}(o.PureComponent)};var n,o=a("ERkP"),s=(n=o)&&n.__esModule?n:{default:n},i=a("sc5R");function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}}}]);