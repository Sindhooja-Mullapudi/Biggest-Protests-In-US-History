(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{IXx0:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d}));var r=n("9fIP"),o=n("zjfJ"),a=n("VtSi"),i=n.n(a),s=n("k5Cm"),l=n("WXRn"),c=n("UTGL"),u=function(e,t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:"undefined"!==typeof document&&("start"===t.type?document.body.classList.add("user-is-dragging"):"end"!==t.type&&"unchoose"!==t.type&&"update"!==t.type||document.body.classList.remove("user-is-dragging")),n.t0=t.type,n.next="update"===n.t0?4:"end"===n.t0?4:"start"===n.t0?7:10;break;case 4:return n.next=6,i.a.awrap(h.handleUpdate(e,t));case 6:return n.abrupt("break",11);case 7:return n.next=9,i.a.awrap(h.handleStart(e,t));case 9:case 10:return n.abrupt("break",11);case 11:case"end":return n.stop()}}),null,null,null,Promise)},d=function(e){if(e.id)return new s.a(e.element,{group:{name:e.id,put:"undefined"===typeof e.groupsToDropFrom||0!==e.groupsToDropFrom.length&&e.groupsToDropFrom},swapThreshold:.65,invertSwap:"boolean"===typeof e.shouldUseInvertedSwapZones&&e.shouldUseInvertedSwapZones,sort:"boolean"!==typeof e.canSortWithinGroup||e.canSortWithinGroup,forceFallback:"boolean"!==typeof e.setForceFallback||e.setForceFallback,delay:100,delayOnTouchOnly:!0,ghostClass:e.ghostClass,dragClass:e.dragClass,draggable:e.draggableItemSelector,handle:e.handleSelector,filter:e.filteredItemSelector,animation:150,easing:"cubic-bezier(1, 0, 0, 1)",setData:function(t,n){return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.setData("text/plain",""),"function"!==typeof e.setDataHandler){r.next=4;break}return r.next=4,i.a.awrap(e.setDataHandler(t,n));case 4:case"end":return r.stop()}}),null,null,null,Promise)},onStart:e.handler,onUpdate:e.handler,onEnd:e.handler,onChoose:e.handler,onUnchoose:e.handler,onMove:e.onMoveHandler,onChange:e.handler})},h=function e(){Object(r.a)(this,e)};Object(o.a)(h,"handleStart",(function(e,t){var n,r,o,a,s,l;return i.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(n=document.querySelector(".dnd-drag-block"),r=t.item.dataset.blockid,o=t.from.dataset.blockid,r&&n&&o){c.next=5;break}return c.abrupt("return");case 5:if(a=e.getNodeById(r),s=e.getNodeById(o),a&&s){c.next=9;break}return c.abrupt("return");case 9:if(l=t.item){c.next=12;break}return c.abrupt("return");case 12:if("immersive"!==a.type&&"tour"!==a.type){c.next=15;break}return c.next=15,i.a.awrap(a.do("onDragStart"));case 15:a.states.dnd.hasDraggedPlaceholder&&h.shrinkLargeBlocks({ghostElement:l,draggedElement:n,event:t,block:a}),h.setGhostElementWidth(l,a.getLayoutSize());case 17:case"end":return c.stop()}}),null,null,null,Promise)})),Object(o.a)(h,"handleUpdate",(function(e,t){var n,r,o,a,s,l,c,u,d,p,g,v;return i.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t.item.dataset.blockid,r=t.from.dataset.blockid,o=t.to.dataset.blockid,n&&r&&o){i.next=5;break}return i.abrupt("return");case 5:if("end"===t.type&&(t.item.style.width=""),a=e.getNodeById(n),s=e.getNodeById(r),l=e.getNodeById(o),s&&a&&l){i.next=11;break}return i.abrupt("return");case 11:if("number"===typeof(c=t.newIndex)){i.next=14;break}return i.abrupt("return");case 14:s.do("hasFloatGroupAsChildren")&&(c=f(a,s,c)),"story"===l.type&&(null===(d=l.getChildNodeByIndex(1))||void 0===d?void 0:null===(u=d.config)||void 0===u?void 0:u.isHidden)&&c>=1&&c++,p={srcBlock:s,targetBlock:l,itemBlock:a,insertIndex:c},"float"===a.config.size&&(delete a.config.size,l.do("deleteFloatGroupById",n),(g=document.getElementById(n))&&(v=g.parentElement)&&v.removeChild(g)),h.updateBlocks(p);case 19:case"end":return i.stop()}}),null,null,null,Promise)})),Object(o.a)(h,"updateBlocks",(function(e){var t,n,r,o;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.srcBlock,n=e.targetBlock,r=e.itemBlock,o=e.insertIndex,"story"===t.type&&e.insertIndex===t.getChildrenNodes().length-1&&(o-=1),t.removeChildById(r.id),r.states.isAssembling=!0,a.next=7,i.a.awrap(n.upsertChild(r,o));case 7:if(r.states.isAssembling=!1,t===n){a.next=11;break}return a.next=11,i.a.awrap(t.update());case 11:return a.next=13,i.a.awrap(n.update());case 13:if("embed"!==r.type&&"webmap"!==r.type&&"expressmap"!==r.type&&"swipe"!==r.type){a.next=16;break}return a.next=16,i.a.awrap(r.updateBlockComponent());case 16:if("immersive"!==r.type&&"tour"!==r.type){a.next=19;break}return a.next=19,i.a.awrap(r.do("onDragEnd"));case 19:case"end":return a.stop()}}),null,null,null,Promise)})),Object(o.a)(h,"shrinkLargeBlocks",(function(e){var t=e.block,n=e.draggedElement,r=e.ghostElement,o=e.event,a="immersive"===t.type||"tour"===t.type,i=a?t.do("getDragHandleElement"):null,s=a?t.do("getImmersiveElement"):null,u=i?i.getBoundingClientRect().top:0,d=s?s.getBoundingClientRect().top:0;if(a){var h=u-d,p=d+window.pageYOffset;window.scrollTo(0,p-h)}n.classList.add("large-block");var f=o.originalEvent.clientX,g=o.originalEvent.clientY;Object(l.b)()?n.style.marginLeft=f-n.getBoundingClientRect().left-parseInt(c.b.replace("px",""),10)+"px":n.style.marginLeft=f-n.getBoundingClientRect().left+"px";var v=r.getBoundingClientRect().top;if(n.style.marginTop="".concat(a?g-d:g-v,"px"),"image"===t.type){var m=n.getElementsByTagName("img")[0];n.style.backgroundImage="url(".concat(m.getAttribute("src"),")")}for(var b=n.firstChild;b;)n.removeChild(b),b=n.firstChild;if("embed"===t.type||"video"===t.type)n.classList.add("embed-placeholder");else if("webmap"===t.type||"expressmap"===t.type)n.classList.add("map-placeholder");else if("immersive"===t.type){var y;"slideshow"===(null===(y=t.data)||void 0===y?void 0:y.type)?n.classList.add("slideshow-placeholder"):n.classList.add("sidecar-placeholder")}else"tour"===t.type?n.classList.add("tour-placeholder"):"swipe"===t.type&&n.classList.add("swipe-placeholder")})),Object(o.a)(h,"setGhostElementWidth",(function(e,t){var n=e.firstChild;"float"===t&&(n=e.parentElement);var r=p(t,n,16);r&&(e.style.width=r)}));var p=function(e,t,n){if(t){var r=t.clientWidth;return("float"===e?1.5*r:"standard"===e?.66*r:"wide"===e?r-2*n:r)+"px"}},f=function(e,t,n){var r=e.getIndex();if(0===n)return r;for(var o=n,a=t.getChildNodeByIndex(0),i=!1,s=0;s<n;s++){if(a.id===e.id&&(i=!0),a.states.isMedia&&"float"===a.config.size){var l=t.root().do("getFloatGroupById",a.id);if(l){var c=l.childrenIds.length;o=n-r===1&&n-s===1?a.getIndex()+c:a.getIndex()+c+1}}else o=a.getIndex()+1;i&&n-s===1&&n-r!==1&&(o-=1),a=t.getChildNodeByIndex(o)}return o}},UTGL:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u}));var r=n("yFcC"),o=n.n(r),a=n("ERkP"),i=n.n(a),s=n("NX3A"),l=i.a.createElement,c="256px",u=function(e){var t="".concat(e.baseUrl,"/static/images/builder/drag-and-drop");return l(o.a,{id:"2740610981",dynamic:[s.a.color.haikuGreen,c,"132px",t,t,t,t,t,t]},[".dnd-ghost-block{height:0.2rem;margin:auto;padding:1px;overflow:hidden;background:".concat(s.a.color.haikuGreen,";}"),".dnd-drag-block.large-block{width:".concat(c," !important;height:").concat("132px"," !important;overflow:hidden;background-size:cover;background-repeat:no-repeat;background-position:center;}"),".dnd-drag-block .media-toolbar,.dnd-drag-block .dnd-handle,.dnd-drag-block .media-caption,.dnd-ghost-block *{visibility:hidden;}",".dnd-drag-block.embed-placeholder{background-image:url('".concat(t,"/embed-placeholder.png');}"),".dnd-drag-block.map-placeholder{background-image :url('".concat(t,"/map-placeholder.png');}"),".dnd-drag-block.sidecar-placeholder{background-image :url('".concat(t,"/sidecar-placeholder.png');}"),".dnd-drag-block.slideshow-placeholder{background-image :url('".concat(t,"/slideshow-placeholder.png');}"),".dnd-drag-block.tour-placeholder{background-image :url('".concat(t,"/guided-tour-placeholder.png');}"),".dnd-drag-block.swipe-placeholder{background-image :url('".concat(t,"/swipe-placeholder.png');}"),".dnd-handle:hover,.dnd-handle:focus{cursor:move;}"])}},k5Cm:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function l(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var c=l(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),u=l(/Edge/i),d=l(/firefox/i),h=l(/safari/i)&&!l(/chrome/i)&&!l(/android/i),p=l(/iP(ad|od|hone)/i),f=l(/chrome/i)&&l(/android/i),g={capture:!1,passive:!1};function v(e,t,n){e.addEventListener(t,n,!c&&g)}function m(e,t,n){e.removeEventListener(t,n,!c&&g)}function b(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function y(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function w(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&b(e,t):b(e,t))||r&&e===n)return e;if(e===n)break}while(e=y(e))}return null}var x,k=/\s+/g;function I(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(k," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(k," ")}}function S(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"===typeof n?"":"px")}}function O(e,t){var n="";if("string"===typeof e)n=e;else do{var r=S(e,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function E(e,t,n){if(e){var r=e.getElementsByTagName(t),o=0,a=r.length;if(n)for(;o<a;o++)n(r[o],o);return r}return[]}function D(){var e=document.scrollingElement;return e||document.documentElement}function T(e,t,n,r,o){if(e.getBoundingClientRect||e===window){var a,i,s,l,u,d,h;if(e!==window&&e!==D()?(i=(a=e.getBoundingClientRect()).top,s=a.left,l=a.bottom,u=a.right,d=a.height,h=a.width):(i=0,s=0,l=window.innerHeight,u=window.innerWidth,d=window.innerHeight,h=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!c))do{if(o&&o.getBoundingClientRect&&("none"!==S(o,"transform")||n&&"static"!==S(o,"position"))){var p=o.getBoundingClientRect();i-=p.top+parseInt(S(o,"border-top-width")),s-=p.left+parseInt(S(o,"border-left-width")),l=i+a.height,u=s+a.width;break}}while(o=o.parentNode);if(r&&e!==window){var f=O(o||e),g=f&&f.a,v=f&&f.d;f&&(l=(i/=v)+(d/=v),u=(s/=g)+(h/=g))}return{top:i,left:s,bottom:l,right:u,width:h,height:d}}}function C(e,t,n){for(var r=R(e,!0),o=T(e)[t];r;){var a=T(r)[n];if(!("top"===n||"left"===n?o>=a:o<=a))return r;if(r===D())break;r=R(r,!1)}return!1}function P(e,t,n){for(var r=0,o=0,a=e.children;o<a.length;){if("none"!==a[o].style.display&&a[o]!==Ne.ghost&&a[o]!==Ne.dragged&&w(a[o],n.draggable,e,!1)){if(r===t)return a[o];r++}o++}return null}function _(e,t){for(var n=e.lastElementChild;n&&(n===Ne.ghost||"none"===S(n,"display")||t&&!b(n,t));)n=n.previousElementSibling;return n||null}function B(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Ne.clone||t&&!b(e,t)||n++;return n}function j(e){var t=0,n=0,r=D();if(e)do{var o=O(e),a=o.a,i=o.d;t+=e.scrollLeft*a,n+=e.scrollTop*i}while(e!==r&&(e=e.parentNode));return[t,n]}function R(e,t){if(!e||!e.getBoundingClientRect)return D();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=S(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return D();if(r||t)return n;r=!0}}}while(n=n.parentNode);return D()}function L(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function M(e,t){return function(){if(!x){var n=arguments,r=this;1===n.length?e.call(r,n[0]):e.apply(r,n),x=setTimeout((function(){x=void 0}),t)}}}function N(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function A(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var F="Sortable"+(new Date).getTime();function H(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==S(e,"display")&&e!==Ne.ghost){t.push({target:e,rect:T(e)});var n=i({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=O(e,!0);r&&(n.top-=r.f,n.left-=r.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof n&&n());var o=!1,a=0;t.forEach((function(e){var t=0,n=e.target,i=n.fromRect,s=T(n),l=n.prevFromRect,c=n.prevToRect,u=e.rect,d=O(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&L(l,s)&&!L(i,s)&&(u.top-s.top)/(u.left-s.left)===(i.top-s.top)/(i.left-s.left)&&(t=function(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}(u,l,c,r.options)),L(s,i)||(n.prevFromRect=i,n.prevToRect=s,t||(t=r.options.animation),r.animate(n,u,s,t)),t&&(o=!0,a=Math.max(a,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"===typeof n&&n()}),a):"function"===typeof n&&n(),t=[]},animate:function(e,t,n,r){if(r){S(e,"transition",""),S(e,"transform","");var o=O(this.el),a=o&&o.a,i=o&&o.d,s=(t.left-n.left)/(a||1),l=(t.top-n.top)/(i||1);e.animatingX=!!s,e.animatingY=!!l,S(e,"transform","translate3d("+s+"px,"+l+"px,0)"),function(e){e.offsetWidth}(e),S(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),S(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){S(e,"transition",""),S(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),r)}}}}var X=[],G={initializeByDefault:!0},Y={mount:function(e){for(var t in G)!G.hasOwnProperty(t)||t in e||(e[t]=G[t]);X.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var o=e+"Global";X.forEach((function(r){t[r.pluginName]&&(t[r.pluginName][o]&&t[r.pluginName][o](i({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](i({sortable:t},n)))}))},initializePlugins:function(e,t,n,r){for(var o in X.forEach((function(r){var o=r.pluginName;if(e.options[o]||r.initializeByDefault){var i=new r(e,t,e.options);i.sortable=e,i.options=e.options,e[o]=i,a(n,i.defaults)}})),e.options)if(e.options.hasOwnProperty(o)){var i=this.modifyOption(e,o,e.options[o]);"undefined"!==typeof i&&(e.options[o]=i)}},getEventProperties:function(e,t){var n={};return X.forEach((function(r){"function"===typeof r.eventProperties&&a(n,r.eventProperties.call(t[r.pluginName],e))})),n},modifyOption:function(e,t,n){var r;return X.forEach((function(o){e[o.pluginName]&&o.optionListeners&&"function"===typeof o.optionListeners[t]&&(r=o.optionListeners[t].call(e[o.pluginName],n))})),r}};function V(e){var t=e.sortable,n=e.rootEl,r=e.name,o=e.targetEl,a=e.cloneEl,s=e.toEl,l=e.fromEl,d=e.oldIndex,h=e.newIndex,p=e.oldDraggableIndex,f=e.newDraggableIndex,g=e.originalEvent,v=e.putSortable,m=e.extraEventProperties;if(t=t||n&&n[F]){var b,y=t.options,w="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||c||u?(b=document.createEvent("Event")).initEvent(r,!0,!0):b=new CustomEvent(r,{bubbles:!0,cancelable:!0}),b.to=s||n,b.from=l||n,b.item=o||n,b.clone=a,b.oldIndex=d,b.newIndex=h,b.oldDraggableIndex=p,b.newDraggableIndex=f,b.originalEvent=g,b.pullMode=v?v.lastPutMode:void 0;var x=i({},m,Y.getEventProperties(r,t));for(var k in x)b[k]=x[k];n&&n.dispatchEvent(b),y[w]&&y[w].call(t,b)}}var z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,o=s(n,["evt"]);Y.pluginEvent.bind(Ne)(e,t,i({dragEl:U,parentEl:J,ghostEl:Z,rootEl:q,nextEl:K,lastDownEl:Q,cloneEl:$,cloneHidden:ee,dragStarted:pe,putSortable:ie,activeSortable:Ne.active,originalEvent:r,oldIndex:te,oldDraggableIndex:re,newIndex:ne,newDraggableIndex:oe,hideGhostForTarget:je,unhideGhostForTarget:Re,cloneNowHidden:function(){ee=!0},cloneNowShown:function(){ee=!1},dispatchSortableEvent:function(e){W({sortable:t,name:e,originalEvent:r})}},o))};function W(e){V(i({putSortable:ie,cloneEl:$,targetEl:U,rootEl:q,oldIndex:te,oldDraggableIndex:re,newIndex:ne,newDraggableIndex:oe},e))}var U,J,Z,q,K,Q,$,ee,te,ne,re,oe,ae,ie,se,le,ce,ue,de,he,pe,fe,ge,ve,me,be=!1,ye=!1,we=[],xe=!1,ke=!1,Ie=[],Se=!1,Oe=[],Ee="undefined"!==typeof document,De=p,Te=u||c?"cssFloat":"float",Ce=Ee&&!f&&!p&&"draggable"in document.createElement("div"),Pe=function(){if(Ee){if(c)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),_e=function(e,t){var n=S(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=P(e,0,t),a=P(e,1,t),i=o&&S(o),s=a&&S(a),l=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+T(o).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+T(a).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&i.float&&"none"!==i.float){var u="left"===i.float?"left":"right";return!a||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return o&&("block"===i.display||"flex"===i.display||"table"===i.display||"grid"===i.display||l>=r&&"none"===n[Te]||a&&"none"===n[Te]&&l+c>r)?"vertical":"horizontal"},Be=function(e){function t(e,n){return function(r,o,a,i){var s=r.options.group.name&&o.options.group.name&&r.options.group.name===o.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"===typeof e)return t(e(r,o,a,i),n)(r,o,a,i);var l=(n?r:o).options.group.name;return!0===e||"string"===typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},o=e.group;o&&"object"==r(o)||(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},je=function(){!Pe&&Z&&S(Z,"display","none")},Re=function(){!Pe&&Z&&S(Z,"display","")};Ee&&document.addEventListener("click",(function(e){if(ye)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ye=!1,!1}),!0);var Le=function(e){if(U){var t=function(e,t){var n;return we.some((function(r){if(!_(r)){var o=T(r),a=r[F].options.emptyInsertThreshold,i=e>=o.left-a&&e<=o.right+a,s=t>=o.top-a&&t<=o.bottom+a;return a&&i&&s?n=r:void 0}})),n}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[F]._onDragOver(n)}}},Me=function(e){U&&U.parentNode[F]._isOutsideThisEl(e.target)};function Ne(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=a({},t),e[F]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _e(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ne.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var r in Y.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var o in Be(t),this)"_"===o.charAt(0)&&"function"===typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&Ce,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?v(e,"pointerdown",this._onTapStart):(v(e,"mousedown",this._onTapStart),v(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(v(e,"dragover",this),v(e,"dragenter",this)),we.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),a(this,H())}function Ae(e,t,n,r,o,a,i,s){var l,d,h=e[F],p=h.options.onMove;return!window.CustomEvent||c||u?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=r,l.related=o||t,l.relatedRect=a||T(t),l.willInsertAfter=s,l.originalEvent=i,e.dispatchEvent(l),p&&(d=p.call(h,l,i)),d}function Fe(e){e.draggable=!1}function He(){Se=!1}function Xe(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function Ge(e){return setTimeout(e,0)}function Ye(e){return clearTimeout(e)}Ne.prototype={constructor:Ne,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(fe=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,U):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,o=r.preventOnFilter,a=e.type,i=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(i||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=r.filter;if(function(e){Oe.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var r=t[n];r.checked&&Oe.push(r)}}(n),!U&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||r.disabled)&&!l.isContentEditable&&(!(s=w(s,r.draggable,n,!1))||!s.animated)&&Q!==s){if(te=B(s),re=B(s,r.draggable),"function"===typeof c){if(c.call(this,e,s,this))return W({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),z("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(r){if(r=w(l,r.trim(),n,!1))return W({sortable:t,rootEl:r,name:"filter",targetEl:s,fromEl:n,toEl:n}),z("filter",t,{evt:e}),!0}))))return void(o&&e.cancelable&&e.preventDefault());r.handle&&!w(l,r.handle,n,!1)||this._prepareDragStart(e,i,s)}}},_prepareDragStart:function(e,t,n){var r,o=this,a=o.el,i=o.options,s=a.ownerDocument;if(n&&!U&&n.parentNode===a){var l=T(n);if(q=a,J=(U=n).parentNode,K=U.nextSibling,Q=n,ae=i.group,Ne.dragged=U,se={target:U,clientX:(t||e).clientX,clientY:(t||e).clientY},de=se.clientX-l.left,he=se.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,U.style["will-change"]="all",r=function(){z("delayEnded",o,{evt:e}),Ne.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!d&&o.nativeDraggable&&(U.draggable=!0),o._triggerDragStart(e,t),W({sortable:o,name:"choose",originalEvent:e}),I(U,i.chosenClass,!0))},i.ignore.split(",").forEach((function(e){E(U,e.trim(),Fe)})),v(s,"dragover",Le),v(s,"mousemove",Le),v(s,"touchmove",Le),v(s,"mouseup",o._onDrop),v(s,"touchend",o._onDrop),v(s,"touchcancel",o._onDrop),d&&this.nativeDraggable&&(this.options.touchStartThreshold=4,U.draggable=!0),z("delayStart",this,{evt:e}),!i.delay||i.delayOnTouchOnly&&!t||this.nativeDraggable&&(u||c))r();else{if(Ne.eventCanceled)return void this._onDrop();v(s,"mouseup",o._disableDelayedDrag),v(s,"touchend",o._disableDelayedDrag),v(s,"touchcancel",o._disableDelayedDrag),v(s,"mousemove",o._delayedDragTouchMoveHandler),v(s,"touchmove",o._delayedDragTouchMoveHandler),i.supportPointer&&v(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(r,i.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){U&&Fe(U),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;m(e,"mouseup",this._disableDelayedDrag),m(e,"touchend",this._disableDelayedDrag),m(e,"touchcancel",this._disableDelayedDrag),m(e,"mousemove",this._delayedDragTouchMoveHandler),m(e,"touchmove",this._delayedDragTouchMoveHandler),m(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?v(document,"pointermove",this._onTouchMove):v(document,t?"touchmove":"mousemove",this._onTouchMove):(v(U,"dragend",this),v(q,"dragstart",this._onDragStart));try{document.selection?Ge((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(be=!1,q&&U){z("dragStarted",this,{evt:t}),this.nativeDraggable&&v(document,"dragover",Me);var n=this.options;!e&&I(U,n.dragClass,!1),I(U,n.ghostClass,!0),Ne.active=this,e&&this._appendGhost(),W({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(le){this._lastX=le.clientX,this._lastY=le.clientY,je();for(var e=document.elementFromPoint(le.clientX,le.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(le.clientX,le.clientY))!==t;)t=e;if(U.parentNode[F]._isOutsideThisEl(e),t)do{if(t[F]){if(t[F]._onDragOver({clientX:le.clientX,clientY:le.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Re()}},_onTouchMove:function(e){if(se){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,o=e.touches?e.touches[0]:e,a=Z&&O(Z,!0),i=Z&&a&&a.a,s=Z&&a&&a.d,l=De&&me&&j(me),c=(o.clientX-se.clientX+r.x)/(i||1)+(l?l[0]-Ie[0]:0)/(i||1),u=(o.clientY-se.clientY+r.y)/(s||1)+(l?l[1]-Ie[1]:0)/(s||1);if(!Ne.active&&!be){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Z){a?(a.e+=c-(ce||0),a.f+=u-(ue||0)):a={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");S(Z,"webkitTransform",d),S(Z,"mozTransform",d),S(Z,"msTransform",d),S(Z,"transform",d),ce=c,ue=u,le=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Z){var e=this.options.fallbackOnBody?document.body:q,t=T(U,!0,De,!0,e),n=this.options;if(De){for(me=e;"static"===S(me,"position")&&"none"===S(me,"transform")&&me!==document;)me=me.parentNode;me!==document.body&&me!==document.documentElement?(me===document&&(me=D()),t.top+=me.scrollTop,t.left+=me.scrollLeft):me=D(),Ie=j(me)}I(Z=U.cloneNode(!0),n.ghostClass,!1),I(Z,n.fallbackClass,!0),I(Z,n.dragClass,!0),S(Z,"transition",""),S(Z,"transform",""),S(Z,"box-sizing","border-box"),S(Z,"margin",0),S(Z,"top",t.top),S(Z,"left",t.left),S(Z,"width",t.width),S(Z,"height",t.height),S(Z,"opacity","0.8"),S(Z,"position",De?"absolute":"fixed"),S(Z,"zIndex","100000"),S(Z,"pointerEvents","none"),Ne.ghost=Z,e.appendChild(Z),S(Z,"transform-origin",de/parseInt(Z.style.width)*100+"% "+he/parseInt(Z.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,o=n.options;z("dragStart",this,{evt:e}),Ne.eventCanceled?this._onDrop():(z("setupClone",this),Ne.eventCanceled||(($=A(U)).draggable=!1,$.style["will-change"]="",this._hideClone(),I($,this.options.chosenClass,!1),Ne.clone=$),n.cloneId=Ge((function(){z("clone",n),Ne.eventCanceled||(n.options.removeCloneOnHide||q.insertBefore($,U),n._hideClone(),W({sortable:n,name:"clone"}))})),!t&&I(U,o.dragClass,!0),t?(ye=!0,n._loopId=setInterval(n._emulateDragOver,50)):(m(document,"mouseup",n._onDrop),m(document,"touchend",n._onDrop),m(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(n,r,U)),v(document,"drop",n),S(U,"transform","translateZ(0)")),be=!0,n._dragStartId=Ge(n._dragStarted.bind(n,t,e)),v(document,"selectstart",n),pe=!0,h&&S(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,r,o,a=this.el,s=e.target,l=this.options,c=l.group,u=Ne.active,d=ae===c,h=l.sort,p=ie||u,f=this,g=!1;if(!Se){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=w(s,l.draggable,a,!0),M("dragOver"),Ne.eventCanceled)return g;if(U.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||f._ignoreWhileAnimating===s)return H(!1);if(ye=!1,u&&!l.disabled&&(d?h||(r=!q.contains(U)):ie===this||(this.lastPutMode=ae.checkPull(this,u,U,e))&&c.checkPut(this,u,U,e))){if(o="vertical"===this._getDirection(e,s),t=T(U),M("dragOverValid"),Ne.eventCanceled)return g;if(r)return J=q,A(),this._hideClone(),M("revert"),Ne.eventCanceled||(K?q.insertBefore(U,K):q.appendChild(U)),H(!0);var v=_(a,l.draggable);if(!v||function(e,t,n){var r=T(_(n.el,n.options.draggable));return t?e.clientX>r.right+10||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+10}(e,o,this)&&!v.animated){if(v===U)return H(!1);if(v&&a===e.target&&(s=v),s&&(n=T(s)),!1!==Ae(q,a,U,t,s,n,e,!!s))return A(),a.appendChild(U),J=a,X(),H(!0)}else if(s.parentNode===a){n=T(s);var m,b,y,x=U.parentNode!==a,k=!function(e,t,n){var r=n?e.left:e.top,o=n?e.right:e.bottom,a=n?e.width:e.height,i=n?t.left:t.top,s=n?t.right:t.bottom,l=n?t.width:t.height;return r===i||o===s||r+a/2===i+l/2}(U.animated&&U.toRect||t,s.animated&&s.toRect||n,o),O=o?"top":"left",E=C(s,"top","top")||C(U,"top","top"),D=E?E.scrollTop:void 0;if(fe!==s&&(b=n[O],xe=!1,ke=!k&&l.invertSwap||x),0!==(m=function(e,t,n,r,o,a,i,s){var l=r?e.clientY:e.clientX,c=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,h=!1;if(!i)if(s&&ve<c*o){if(!xe&&(1===ge?l>u+c*a/2:l<d-c*a/2)&&(xe=!0),xe)h=!0;else if(1===ge?l<u+ve:l>d-ve)return-ge}else if(l>u+c*(1-o)/2&&l<d-c*(1-o)/2)return function(e){return B(U)<B(e)?1:-1}(t);if((h=h||i)&&(l<u+c*a/2||l>d-c*a/2))return l>u+c/2?1:-1;return 0}(e,s,n,o,k?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,ke,fe===s))){var P=B(U);do{P-=m,y=J.children[P]}while(y&&("none"===S(y,"display")||y===Z))}if(0===m||y===s)return H(!1);fe=s,ge=m;var j=s.nextElementSibling,R=!1,L=Ae(q,a,U,t,s,n,e,R=1===m);if(!1!==L)return 1!==L&&-1!==L||(R=1===L),Se=!0,setTimeout(He,30),A(),R&&!j?a.appendChild(U):s.parentNode.insertBefore(U,R?j:s),E&&N(E,0,D-E.scrollTop),J=U.parentNode,void 0===b||ke||(ve=Math.abs(b-T(s)[O])),X(),H(!0)}if(a.contains(U))return H(!1)}return!1}function M(l,c){z(l,f,i({evt:e,isOwner:d,axis:o?"vertical":"horizontal",revert:r,dragRect:t,targetRect:n,canSort:h,fromSortable:p,target:s,completed:H,onMove:function(n,r){return Ae(q,a,U,t,n,T(n),e,r)},changed:X},c))}function A(){M("dragOverAnimationCapture"),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function H(t){return M("dragOverCompleted",{insertion:t}),t&&(d?u._hideClone():u._showClone(f),f!==p&&(I(U,ie?ie.options.ghostClass:u.options.ghostClass,!1),I(U,l.ghostClass,!0)),ie!==f&&f!==Ne.active?ie=f:f===Ne.active&&ie&&(ie=null),p===f&&(f._ignoreWhileAnimating=s),f.animateAll((function(){M("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(s===U&&!U.animated||s===a&&!s.animated)&&(fe=null),l.dragoverBubble||e.rootEl||s===document||(U.parentNode[F]._isOutsideThisEl(e.target),!t&&Le(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function X(){ne=B(U),oe=B(U,l.draggable),W({sortable:f,name:"change",toEl:a,newIndex:ne,newDraggableIndex:oe,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){m(document,"mousemove",this._onTouchMove),m(document,"touchmove",this._onTouchMove),m(document,"pointermove",this._onTouchMove),m(document,"dragover",Le),m(document,"mousemove",Le),m(document,"touchmove",Le)},_offUpEvents:function(){var e=this.el.ownerDocument;m(e,"mouseup",this._onDrop),m(e,"touchend",this._onDrop),m(e,"pointerup",this._onDrop),m(e,"touchcancel",this._onDrop),m(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;ne=B(U),oe=B(U,n.draggable),z("drop",this,{evt:e}),J=U&&U.parentNode,ne=B(U),oe=B(U,n.draggable),Ne.eventCanceled?this._nulling():(be=!1,ke=!1,xe=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ye(this.cloneId),Ye(this._dragStartId),this.nativeDraggable&&(m(document,"drop",this),m(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),h&&S(document.body,"user-select",""),S(U,"transform",""),e&&(pe&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Z&&Z.parentNode&&Z.parentNode.removeChild(Z),(q===J||ie&&"clone"!==ie.lastPutMode)&&$&&$.parentNode&&$.parentNode.removeChild($),U&&(this.nativeDraggable&&m(U,"dragend",this),Fe(U),U.style["will-change"]="",pe&&!be&&I(U,ie?ie.options.ghostClass:this.options.ghostClass,!1),I(U,this.options.chosenClass,!1),W({sortable:this,name:"unchoose",toEl:J,newIndex:null,newDraggableIndex:null,originalEvent:e}),q!==J?(ne>=0&&(W({rootEl:J,name:"add",toEl:J,fromEl:q,originalEvent:e}),W({sortable:this,name:"remove",toEl:J,originalEvent:e}),W({rootEl:J,name:"sort",toEl:J,fromEl:q,originalEvent:e}),W({sortable:this,name:"sort",toEl:J,originalEvent:e})),ie&&ie.save()):ne!==te&&ne>=0&&(W({sortable:this,name:"update",toEl:J,originalEvent:e}),W({sortable:this,name:"sort",toEl:J,originalEvent:e})),Ne.active&&(null!=ne&&-1!==ne||(ne=te,oe=re),W({sortable:this,name:"end",toEl:J,originalEvent:e}),this.save()))),this._nulling())},_nulling:function(){z("nulling",this),q=U=J=Z=K=$=Q=ee=se=le=pe=ne=oe=te=re=fe=ge=ie=ae=Ne.dragged=Ne.ghost=Ne.clone=Ne.active=null,Oe.forEach((function(e){e.checked=!0})),Oe.length=ce=ue=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":U&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,o=n.length,a=this.options;r<o;r++)w(e=n[r],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||Xe(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach((function(e,r){var o=n.children[r];w(o,this.options.draggable,n,!1)&&(t[e]=o)}),this),e.forEach((function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))}))},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return w(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=Y.modifyOption(this,e,t);n[e]="undefined"!==typeof r?r:t,"group"===e&&Be(n)},destroy:function(){z("destroy",this);var e=this.el;e[F]=null,m(e,"mousedown",this._onTapStart),m(e,"touchstart",this._onTapStart),m(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(m(e,"dragover",this),m(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),we.splice(we.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ee){if(z("hideClone",this),Ne.eventCanceled)return;S($,"display","none"),this.options.removeCloneOnHide&&$.parentNode&&$.parentNode.removeChild($),ee=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ee){if(z("showClone",this),Ne.eventCanceled)return;q.contains(U)&&!this.options.group.revertClone?q.insertBefore($,U):K?q.insertBefore($,K):q.appendChild($),this.options.group.revertClone&&this.animate(U,$),S($,"display",""),ee=!1}}else this._hideClone()}},Ee&&v(document,"touchmove",(function(e){(Ne.active||be)&&e.cancelable&&e.preventDefault()})),Ne.utils={on:v,off:m,css:S,find:E,is:function(e,t){return!!w(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:M,closest:w,toggleClass:I,clone:A,index:B,nextTick:Ge,cancelNextTick:Ye,detectDirection:_e,getChild:P},Ne.get=function(e){return e[F]},Ne.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Ne.utils=i({},Ne.utils,e.utils)),Y.mount(e)}))},Ne.create=function(e,t){return new Ne(e,t)},Ne.version="1.10.2";var Ve,ze,We,Ue,Je,Ze,qe=[],Ke=!1;function Qe(){qe.forEach((function(e){clearInterval(e.pid)})),qe=[]}function $e(){clearInterval(Ze)}var et=M((function(e,t,n,r){if(t.scroll){var o,a=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=D(),u=!1;ze!==n&&(ze=n,Qe(),Ve=t.scroll,o=t.scrollFn,!0===Ve&&(Ve=R(n,!0)));var d=0,h=Ve;do{var p=h,f=T(p),g=f.top,v=f.bottom,m=f.left,b=f.right,y=f.width,w=f.height,x=void 0,k=void 0,I=p.scrollWidth,O=p.scrollHeight,E=S(p),C=p.scrollLeft,P=p.scrollTop;p===c?(x=y<I&&("auto"===E.overflowX||"scroll"===E.overflowX||"visible"===E.overflowX),k=w<O&&("auto"===E.overflowY||"scroll"===E.overflowY||"visible"===E.overflowY)):(x=y<I&&("auto"===E.overflowX||"scroll"===E.overflowX),k=w<O&&("auto"===E.overflowY||"scroll"===E.overflowY));var _=x&&(Math.abs(b-a)<=s&&C+y<I)-(Math.abs(m-a)<=s&&!!C),B=k&&(Math.abs(v-i)<=s&&P+w<O)-(Math.abs(g-i)<=s&&!!P);if(!qe[d])for(var j=0;j<=d;j++)qe[j]||(qe[j]={});qe[d].vx==_&&qe[d].vy==B&&qe[d].el===p||(qe[d].el=p,qe[d].vx=_,qe[d].vy=B,clearInterval(qe[d].pid),0==_&&0==B||(u=!0,qe[d].pid=setInterval(function(){r&&0===this.layer&&Ne.active._onTouchMove(Je);var t=qe[this.layer].vy?qe[this.layer].vy*l:0,n=qe[this.layer].vx?qe[this.layer].vx*l:0;"function"===typeof o&&"continue"!==o.call(Ne.dragged.parentNode[F],n,t,e,Je,qe[this.layer].el)||N(qe[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==c&&(h=R(h,!1)));Ke=u}}),30),tt=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,o=e.activeSortable,a=e.dispatchSortableEvent,i=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=n||o;i();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(u)&&(a("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function nt(){}function rt(){}nt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=P(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:tt},a(nt,{pluginName:"revertOnSpill"}),rt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:tt},a(rt,{pluginName:"removeOnSpill"});Ne.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):this.options.supportPointer?v(document,"pointermove",this._handleFallbackAutoScroll):t.touches?v(document,"touchmove",this._handleFallbackAutoScroll):v(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?m(document,"dragover",this._handleAutoScroll):(m(document,"pointermove",this._handleFallbackAutoScroll),m(document,"touchmove",this._handleFallbackAutoScroll),m(document,"mousemove",this._handleFallbackAutoScroll)),$e(),Qe(),clearTimeout(x),x=void 0},nulling:function(){Je=ze=Ve=Ke=Ze=We=Ue=null,qe.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(r,o);if(Je=e,t||u||c||h){et(e,this.options,a,t);var i=R(a,!0);!Ke||Ze&&r===We&&o===Ue||(Ze&&$e(),Ze=setInterval((function(){var a=R(document.elementFromPoint(r,o),!0);a!==i&&(i=a,Qe()),et(e,n.options,a,t)}),10),We=r,Ue=o)}else{if(!this.options.bubbleScroll||R(a,!0)===D())return void Qe();et(e,this.options,R(a,!1),!1)}}},a(e,{pluginName:"scroll",initializeByDefault:!0})}),Ne.mount(rt,nt),t.a=Ne},x5U6:function(e,t,n){"use strict";n.r(t),n.d(t,"Story",(function(){return B}));var r=n("fGyu"),o=n("VtSi"),a=n.n(o),i=n("9fIP"),s=n("MMYH"),l=n("pWxA"),c=n("K/z8"),u=n("sRHE"),d=n("8K1b"),h=n("zjfJ"),p=n("ERkP"),f=n.n(p),g=n("mvvZ"),v=n("27N1"),m=n("h0mi"),b=n("O8Oa"),y=n("PRnZ"),w=n("IXx0");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=function(e){Object(d.a)(p,e);var t,o=(t=p,function(){var e,n=Object(u.a)(t);if(I()){var r=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=o.call(this,e),Object(h.a)(Object(l.a)(t),"childrenIds",[]),Object(h.a)(Object(l.a)(t),"childrenBlocks",{}),t.block=e.data.block,t.id=t.block.id,t.states.alwaysRenderInserter=!1,t}return Object(s.a)(p,[{key:"getBlockComponent",value:function(){return f.a.lazy((function(){return n.e(107).then(n.bind(null,"Ot6V"))}))}},{key:"getViewerProps",value:function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.awrap(this.getChildrenUI());case 2:return e.t0=e.sent,e.abrupt("return",{children:e.t0});case 4:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"getBuilderProps",value:function(){var e=this;return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=k,t.t1={},t.next=4,a.a.awrap(this.getViewerProps());case 4:return t.t2=t.sent,t.t3={blockId:this.block.parent.id,handleDragDrop:function(t){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if("end"!==t.type&&"start"!==t.type){n.next=3;break}return n.next=3,a.a.awrap(Object(w.b)(e.block,t));case 3:case"end":return n.stop()}}),null,null,null,Promise)},handleOnMove:function(e){return e.related&&!e.related.classList.contains("drag-sentinel")}},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t3));case 7:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"getLayoutProps",value:function(){return k({},Object(y.a)(Object(u.a)(p.prototype),"getLayoutProps",this).call(this),{blockId:void 0,size:"standard",spacingTop:this.mode===m.a.Builder?"5rem":"auto",spacingBottom:"auto",canBreakOverPrintPage:!0})}},{key:"upsertChild",value:function(e,t){var n;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return(n=this.childrenIds.indexOf(e.id))>-1&&this.childrenIds.splice(n,1),e.states.isInFloat=!0,this.childrenIds.splice("undefined"!==typeof t?t:n,0,e.id),this.childrenBlocks[e.id]=e,this.isDirty=!0,r.abrupt("return",this);case 7:case"end":return r.stop()}}),null,this,null,Promise)}},{key:"appendChild",value:function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(this.upsertChild(e,this.childrenIds.length));case 2:return this.isDirty=!0,t.abrupt("return",this);case 4:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"removeChildById",value:function(e){var t=this.childrenIds.indexOf(e);return-1===t?this:(this.childrenIds.splice(t,1),this.childrenBlocks[e].states.isInFloat=!1,delete this.childrenBlocks[e],this.isDirty=!0,this)}},{key:"removeChildByIndex",value:function(e){if(e<0||e>=this.childrenIds.length)return this;var t=this.childrenIds[e];return this.childrenBlocks[t].states.isInFloat=!1,this.childrenIds.splice(e,1),delete this.childrenBlocks[t],this.isDirty=!0,this}},{key:"hasChild",value:function(e){return-1!==this.childrenIds.indexOf(e)}},{key:"getChildIndex",value:function(e){if(this.id===e)return 0;var t=this.childrenIds.indexOf(e);return-1!==t?t+1:-1}},{key:"setChildren",value:function(e,t){var n=this;return function(){if(n.childrenIds.length!==e.length)return!1;for(var t=0;t<n.childrenIds.length;t++)if(e[t]!==n.childrenIds[t])return!1;return!0}()||(this.childrenIds=Object(r.a)(e),this.childrenBlocks=k({},t),this.isDirty=!0),this}},{key:"getChildrenUI",value:function(){var e,t,n,r=this;return a.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=[],t=this.block.states.isInFloat,this.block.states.isInFloat=!0,o.t0=e,o.next=6,a.a.awrap(this.block.render({forceUpdate:t}));case 6:return o.t1=o.sent,o.t0.push.call(o.t0,o.t1),o.next=10,a.a.awrap(Object(g.b)(this.childrenIds,(function(n){var o,i;return a.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(o=0===r.childrenIds.indexOf(n)?"top":r.childrenIds.indexOf(n)===r.childrenIds.length-1?"bottom":void 0,i=r.childrenBlocks[n],t=!i.states.isInFloat,i.states.isInFloat=!0,!o){s.next=12;break}return s.t0=e,s.next=8,a.a.awrap(i.render({forceUpdate:t,marginToRemove:o}));case 8:s.t1=s.sent,s.t0.push.call(s.t0,s.t1),s.next=17;break;case 12:return s.t2=e,s.next=15,a.a.awrap(i.render({forceUpdate:t}));case 15:s.t3=s.sent,s.t2.push.call(s.t2,s.t3);case 17:case"end":return s.stop()}}),null,null,null,Promise)})));case 10:if(this.mode!==m.a.Builder||0!==this.childrenIds.length&&!this.states.alwaysRenderInserter||!this.block||!this.block.parent){o.next=21;break}return o.next=13,a.a.awrap(this.insertBlock({mode:m.a.Builder,type:"text",parent:this.block.parent,data:{text:"",type:"paragraph"},states:{hasFocus:!1,isExtra:!0,showInlineInserter:function(){return 0===r.childrenIds.length&&r.states.alwaysRenderInserter},getInsertHintType:function(){return"continue"},getInserterIndex:function(){return r.block.getIndex()+r.childrenIds.length+1},convertExtraBlockOnEmptyEnter:!0}},!1));case 13:if(!(n=o.sent)){o.next=21;break}return n.states.isInFloat=!0,o.t2=e,o.next=19,a.a.awrap(n.render());case 19:o.t3=o.sent,o.t2.push.call(o.t2,o.t3);case 21:return o.abrupt("return",e);case 22:case"end":return o.stop()}}),null,this,null,Promise)}}]),p}(b.a);Object(h.a)(S,"type","float"),Object(h.a)(S,"getInstance",(function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new S(Object(b.b)(e,S.type)));case 1:case"end":return t.stop()}}),null,null,null,Promise)}));var O=n("iSuU"),E=n("ayGt"),D=n("EaQW"),T=n("2WDw");function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var B=function(e){Object(d.a)(p,e);var t,o=(t=p,function(){var e,n=Object(u.a)(t);if(_()){var r=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function p(e){var t;return Object(i.a)(this,p),t=o.call(this,e),Object(h.a)(Object(l.a)(t),"floatGroupMap",new Map),Object(h.a)(Object(l.a)(t),"getFloatChildrenCount",(function(){return t.getChildrenBlocks().reduce((function(e,t){return t.states.isInFloat&&"float"!==t.getLayoutSize()?e+1:e}),0)})),Object(h.a)(Object(l.a)(t),"setThemeStates",(function(){var e;t.storyThemeResource?(t.states.storyTheme=Object(O.c)(t.storyThemeResource.data.themeId),t.states.themeBaseVariableOverrides=t.storyThemeResource.data.themeBaseVariableOverrides):(t.states.storyTheme=Object(O.c)(E.a.Summit),t.states.themeBaseVariableOverrides={});var n=null===(e=t.getGlobalState("environment"))||void 0===e?void 0:e.isPortal;t.states.themeVariables=Object(E.b)(P({baseVariables:t.states.storyTheme.defaultBaseVariables,baseOverrides:t.states.themeBaseVariableOverrides},n&&{portalBaseVariables:t.states.storyTheme.portalBaseVariables}))})),Object(h.a)(Object(l.a)(t),"setStoryLogoStates",(function(){t.storyLogoResource?t.states.storyLogo={resource:t.storyLogoResource,link:t.data.storyLogoLink,altText:t.data.storyLogoAlt}:t.states.storyLogo=void 0})),Object(h.a)(Object(l.a)(t),"updateDataSchema",(function(e){var n,r,o;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(!e||e.storyTheme&&e.storyTheme!==E.a.Summit&&e.storyTheme!==E.a.Obsidian){i.next=8;break}return n="object"===typeof e.storyDesignSettings?e.storyDesignSettings.accentColor:void 0,r={themeId:e.storyTheme||E.a.Summit,themeBaseVariableOverrides:{}},n&&(r.themeBaseVariableOverrides.accentColor1=n),i.next=6,a.a.awrap(t.insertResource({root:Object(l.a)(t),type:"story-theme",data:r}));case 6:(o=i.sent)&&(t.data.storyTheme=o.id,delete t.data.storyDesignSettings,t.update());case 8:case"end":return i.stop()}}),null,null,null,Promise)})),Object(h.a)(Object(l.a)(t),"findImageInChildren",(function(e){if("image"===e.type){var n=e.do("getMediaId");if(n)return n}return e.getChildrenBlocks().reduce((function(e,n){return e||t.findImageInChildren(n)}),void 0)})),Object(h.a)(Object(l.a)(t),"initLabRegistry",(function(){v.a.setRegistry({node:P({},D.b.node,{},D.a.node),resource:P({},D.b.resource,{},D.a.resource)})})),e.resourceMap&&t.setTreeResources(e.resourceMap),t.setThemeStates(),t.initListeners(),t.initTheme(),t.initStoryLogo(),t.addEventListener("reset",(function(){window.scrollTo(0,0),t.getChildrenBlocks().forEach((function(e){"immersive"!==e.type&&"tour"!==e.type&&"navigation"!==e.type||e.do("reset")}))})),t.getGlobalState("lab")&&t.initLabRegistry(),t}return Object(s.a)(p,[{key:"getBlockComponent",value:function(){return this.mode===m.a.Viewer?f.a.lazy((function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"JZSJ"))})):f.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(12),n.e(106)]).then(n.bind(null,"Othq"))}))}},{key:"getLayoutComponent",value:function(){}},{key:"getStoryTheme",value:function(){return this.states.storyTheme}},{key:"getViewerProps",value:function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.id,e.next=3,a.a.awrap(this.getChildrenUI());case 3:return e.t1=e.sent,e.t2=this.states.themeVariables,e.t3=this.states.storyLogo,e.t4=this.getGlobalState("printMode"),e.t5=this.do("getIsCreditsHidden"),e.t6=this.do("getIsNavigationHidden"),e.abrupt("return",{blockId:e.t0,children:e.t1,themeVariables:e.t2,storyLogo:e.t3,printMode:e.t4,isCreditsHidden:e.t5,isNavigationHidden:e.t6});case 10:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"getBuilderProps",value:function(){var e=this;return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=P,t.t1={},t.next=4,a.a.awrap(this.getViewerProps());case 4:return t.t2=t.sent,t.t3={storyCover:this.states.storyCover,websiteThemeId:this.states.storyTheme.websiteThemeId,storyTheme:this.states.storyTheme,themeBaseVariableOverrides:this.states.themeBaseVariableOverrides,updateStoryCover:function(t){e.states.storyCover=t,e.do("setCoverType",t)},updateStoryTheme:function(t){e.storyThemeResource&&"function"===typeof e.storyThemeResource.setData&&(e.storyThemeResource.setStoryTheme(t),e.setThemeStates(),e.update())},updateThemeBaseVariableOverrides:function(t){e.storyThemeResource&&"function"===typeof e.storyThemeResource.extendThemeBaseVariables&&(e.storyThemeResource.extendThemeBaseVariables(t),e.setThemeStates(),e.update())},updateLogoResource:function(t){var n;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if("remove"!==t||!e.storyLogoResource){r.next=5;break}e.storyLogoResource=void 0,e.data.storyLogoResource=void 0,r.next=18;break;case 5:if("remove"===t||"uri"!==t.provider){r.next=9;break}return r.abrupt("return");case 9:if(e.storyLogoResource){r.next=17;break}return r.next=12,a.a.awrap(e.insertResource({data:t,root:e,type:"image"}));case 12:n=r.sent,e.storyLogoResource=n,e.data.storyLogoResource=n.id,r.next=18;break;case 17:e.storyLogoResource.setData(t);case 18:e.setStoryLogoStates(),e.update();case 20:case"end":return r.stop()}}),null,null,null,Promise)},updateLogoLink:function(t){e.data.storyLogoLink=t,e.setStoryLogoStates(),e.update()},updateLogoAltText:function(t){e.data.storyLogoAlt=t,e.setStoryLogoStates(),e.update()},handleDragDrop:function(t){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if("update"!==t.type&&"start"!==t.type&&"end"!==t.type){n.next=3;break}return n.next=3,a.a.awrap(Object(w.b)(e,t));case 3:case"end":return n.stop()}}),null,null,null,Promise)},handleSetData:function(){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(e.update());case 2:case"end":return t.stop()}}),null,null,null,Promise)},handleOnMove:function(e){return e.related&&!e.related.classList.contains("drag-sentinel")},toggleCredits:function(){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e.emit("toggleIsCreditsHidden"),t.next=3,a.a.awrap(e.update());case 3:case"end":return t.stop()}}),null,null,null,Promise)},toggleNavigation:function(){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e.emit("toggleIsNavigationHidden"),t.next=3,a.a.awrap(e.update());case 3:case"end":return t.stop()}}),null,null,null,Promise)}},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t3));case 7:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"onNodeAssembled",value:function(){var e,t,n;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.setGlobalState("background-audio-muted",!0),this.states.storyCover=this.do("getCoverType"),e=!1,(t=this.getChildNodeByIndex(1))&&(!t||"navigation"===t.type)){r.next=8;break}return e=!0,r.next=8,a.a.awrap(this.insertBlock({type:"navigation",parent:this,data:{links:[]},config:{isHidden:!0},index:1},!1));case 8:if(!(n=this.getChildNodeByIndex(this.childrenIds.length-1))||"credits"===n.type){r.next=13;break}return e=!0,r.next=13,a.a.awrap(this.insertBlock({type:"credits",parent:this,index:this.childrenIds.length},!1));case 13:if(!e){r.next=16;break}return r.next=16,a.a.awrap(this.update());case 16:case"end":return r.stop()}}),null,this,null,Promise)}},{key:"getLayoutProps",value:function(){}},{key:"getResources",value:function(){var e=[];return"undefined"!==typeof this.storyThemeResource&&e.push(this.storyThemeResource),"undefined"!==typeof this.storyLogoResource&&e.push(this.storyLogoResource),e}},{key:"getChildrenUI",value:function(e){var t,n,r,o,i,s,l,c,u,d,h,p,f,v,b=this;return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!0,0!==this.childrenIds.length){e.next=3;break}return e.abrupt("return",[]);case 3:if(i=[],s=this.getChildrenBlocks(),l=function(e){var t;return a.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if("undefined"!==typeof n){s.next=2;break}throw new Error;case 2:if("undefined"!==typeof b.floatGroupMap.get(n)){s.next=5;break}throw new Error;case 5:if("undefined"!==typeof(t=b.floatGroupMap.get(n))){s.next=8;break}throw new Error;case 8:return t.states.alwaysRenderInserter=e,s.next=11,a.a.awrap(t.setChildren(r,o).update());case 11:return s.t0=i,s.next=14,a.a.awrap(t.render());case 14:s.t1=s.sent,s.t0.push.call(s.t0,s.t1),n=void 0;case 17:case"end":return s.stop()}}),null,null,null,Promise)},c=function e(c,u){var d,h;return a.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(c){p.next=2;break}return p.abrupt("return");case 2:if(d=c.getLayoutSize(),!n){p.next=24;break}if("undefined"!==typeof b.floatGroupMap.get(n)){p.next=7;break}throw new Error;case 7:if("text"===c.type&&"float"!==d&&("text"!==c.type||"quote"!==c.do("getTextType"))){p.next=20;break}if(c.getIndex()!==s.length-1){p.next=14;break}return t=!1,p.next=12,a.a.awrap(l(!0));case 12:p.next=16;break;case 14:return p.next=16,a.a.awrap(l(!1));case 16:return p.next=18,a.a.awrap(e(c,u));case 18:p.next=22;break;case 20:r.push(c.id),o[c.id]=c;case 22:p.next=45;break;case 24:if(h=c.states.isInFloat,c.states.isInFloat=!1,"float"!==d){p.next=40;break}if(n=c.id,r=[],o={},!b.floatGroupMap.has(c.id)){p.next=32;break}return p.abrupt("return");case 32:return p.t0=b.floatGroupMap,p.t1=c.id,p.next=36,a.a.awrap(S.getInstance({mode:b.mode,type:"float",data:{block:c}}));case 36:p.t2=p.sent,p.t0.set.call(p.t0,p.t1,p.t2),p.next=45;break;case 40:return p.t3=i,p.next=43,a.a.awrap(c.render({forceUpdate:h}));case 43:p.t4=p.sent,p.t3.push.call(p.t3,p.t4);case 45:case"end":return p.stop()}}),null,null,null,Promise)},!s.length){e.next=10;break}return e.next=10,a.a.awrap(Object(g.b)(s,(function(e,t){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.awrap(c(e,t));case 2:case"end":return n.stop()}}),null,null,null,Promise)})));case 10:if(this.mode===m.a.Viewer&&(t=!1),!t){e.next=28;break}return u=3===this.childrenIds.length,d=this.childrenNodes[this.childrenIds[this.childrenIds.length-2]],h="immersive"===d.type||"tour"===d.type,e.next=17,a.a.awrap(this.insertBlock({mode:m.a.Builder,type:"text",parent:this,data:{text:"",type:"paragraph"},states:{hasFocus:this.states.shouldInserterGetFocus||!1,isExtra:!0,showInlineInserter:function(){return u||h},getInsertHintType:function(){return u?"start":h?"continue":"none"},getInserterIndex:function(){return b.childrenIds.length-1}}},!1));case 17:if(!(p=e.sent)){e.next=27;break}return v=this.getFloatChildrenCount(),f=this.childrenIds.length-v,e.t0=i,e.t1=f-1,e.next=25,a.a.awrap(p.render());case 25:e.t2=e.sent,e.t0.splice.call(e.t0,e.t1,0,e.t2);case 27:this.states.shouldInserterGetFocus=!1;case 28:return e.abrupt("return",i);case 29:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"getInserterItems",value:function(){var e=this.getFeatureDecisions(),t=Object(T.c)(e);return this.getGlobalState("lab")?[].concat(Object(r.a)(t),["divider"],Object(r.a)(Object(T.d)())):t}},{key:"initTheme",value:function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.awrap(this.updateDataSchema(this.data));case 2:if("undefined"!==typeof this.data.storyTheme&&(this.storyThemeResource=this.getResourceById(this.data.storyTheme)),"undefined"!==typeof this.storyThemeResource){e.next=5;break}throw new Error("Story theme is not defined");case 5:this.setThemeStates();case 6:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"initStoryLogo",value:function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:"undefined"!==typeof this.data.storyLogoResource&&(this.storyLogoResource=this.getResourceById(this.data.storyLogoResource)),this.setStoryLogoStates();case 2:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"initListeners",value:function(){var e=this,t=this.root();t.addEventListener("getStoryTheme",(function(){return e.states.storyTheme})),t.addEventListener("getStoryDataForSave",(function(){var n=t.do("getCoverData"),r={itemData:e.treeToJSON(),itemDetails:{}};return r.itemDetails=P({},r.itemDetails,{},n),r.itemDetails.imageResourceId||(r.itemDetails=P({},r.itemDetails,{imageResourceId:e.findImageInChildren(e)})),e.getChildrenBlocks(),r})),t.addEventListener("getGAID",(function(){return e.config.gaid})),t.addEventListener("updateGAID",(function(t){e.config.gaid=t,e.update()})),t.addEventListener("isPublishedDateHidden",(function(){return e.config.isPublishedDateHidden})),t.addEventListener("updatePubDateHiddenStatus",(function(t){e.config.isPublishedDateHidden=t,e.update()})),t.addEventListener("isSocialIconsHidden",(function(){return e.config.isSocialIconsHidden})),t.addEventListener("updateSocialIconsHiddenStatus",(function(t){e.config.isSocialIconsHidden=t,e.update()})),t.addEventListener("deleteFloatGroupById",(function(t){var n=e.floatGroupMap;n.has(t)&&n.delete(t)})),t.addEventListener("getFloatGroupById",(function(t){return e.floatGroupMap.get(t)})),t.addEventListener("hasFloatGroupAsChildren",(function(){return e.floatGroupMap.size>0}))}}]),p}(b.a);Object(h.a)(B,"type","story"),Object(h.a)(B,"getInstance",(function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new B(Object(b.b)(e,B.type)));case 1:case"end":return t.stop()}}),null,null,null,Promise)}));t.default=B}}]);