(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{bFY2:function(t,e,n){"use strict";n.r(e),n.d(e,"NavigationBlock",(function(){return m}));var r=n("fGyu"),i=n("VtSi"),a=n.n(i),s=n("9fIP"),c=n("MMYH"),o=n("pWxA"),u=n("PRnZ"),l=n("K/z8"),d=n("sRHE"),f=n("8K1b"),p=n("zjfJ"),k=n("ERkP"),b=n.n(k),h=n("Abkm"),v=n("h0mi"),y=n("O8Oa");function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){Object(p.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var m=function(t){Object(f.a)(k,t);var e,i=(e=k,function(){var t,n=Object(d.a)(e);if(j()){var r=Object(d.a)(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Object(l.a)(this,t)});function k(t){var e;return Object(s.a)(this,k),e=i.call(this,t),Object(p.a)(Object(o.a)(e),"maxLinks",10),Object(p.a)(Object(o.a)(e),"updateActiveLink",(function(t){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.states.activeLink=t,n.next=3,a.a.awrap(e.update({skipSave:!0}));case 3:case"end":return n.stop()}}),null,null,null,Promise)})),e.states.activeLink="",e.root().on("story-data-update",(function(){e.data.links=e.getLinks(!0),e.update({skipSave:!0})})),e.root().addEventListener("getIsNavigationHidden",(function(){return e.config.isHidden})),e.root().on("toggleIsNavigationHidden",(function(){!e.config.isHidden||e.data&&e.data.links.length||(e.data.links=e.getLinks(!0)),e.config.isHidden=!e.config.isHidden})),e.addEventListener("reset",(function(){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(e.updateActiveLink(""));case 2:case"end":return t.stop()}}),null,null,null,Promise)})),e}return Object(c.a)(k,[{key:"onNodeAssembled",value:function(){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),null,null,null,Promise)}},{key:"getLayoutProps",value:function(){return O({},Object(u.a)(Object(d.a)(k.prototype),"getLayoutProps",this).call(this),{spacingTopSm:"0rem",layoutType:"minimal",blockId:this.id,className:"navigation-bar  drag-sentinel"})}},{key:"getBlockComponent",value:function(){return this.mode===v.a.Viewer?b.a.lazy((function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"3SKz"))})):b.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(102)]).then(n.bind(null,"xVra"))}))}},{key:"getViewerProps",value:function(){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{isHidden:this.config.isHidden||this.data.links.length<=0,links:this.data.links.length?this.getLinks():[],activeLink:this.states.activeLink,updateActiveLink:this.updateActiveLink,blockId:this.id,coverType:this.root().do("getCoverType")});case 1:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"getBuilderProps",value:function(){var t=this;return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=O,e.t1={},e.next=4,a.a.awrap(this.getViewerProps());case 4:return e.t2=e.sent,e.t3={isHidden:!1,maxLinks:this.maxLinks,updateLinks:function(e){t.data.links=e,t.update()}},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"getLinks",value:function(t){var e=this,n=0;return this.root().childrenIds.reduce((function(i,a){var s=e.root().childrenNodes[a],c=s.data;if("text"===s.type&&"h2"===c.type&&c.text){var o,u=e.data.links.findIndex((function(t){return t.nodeId===s.id}));!e.data.links[u]&&e.data.links.length>=e.maxLinks||n>=e.maxLinks||e.data.links[u]&&e.data.links[u].isHidden?o=!0:n++;var l={nodeId:s.id,defaultText:t?void 0:Object(h.e)(c.text),customText:e.data.links[u]&&e.data.links[u].customText,isHidden:o};return[].concat(Object(r.a)(i),[l])}return Object(r.a)(i)}),[])}}]),k}(y.a);Object(p.a)(m,"type","navigation"),Object(p.a)(m,"getInstance",(function(t){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new m(Object(y.b)(t,m.type)));case 1:case"end":return e.stop()}}),null,null,null,Promise)})),e.default=m}}]);